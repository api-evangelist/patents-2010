---

title: Techniques for displaying a selection marquee in stereographic content
abstract: A technique for stereographic display of a selection marquee in a scene includes receiving the selection marquee in a two-dimensional viewpoint at a near plane of the scene. A selection volume is generated from which the fragments of a scene associated with the selection marquee are determined. A two-dimensional stereoscopic representation of the three-dimensional scene, including the selection marquee at the associated fragments, may then be rendered.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09001157&OS=09001157&RS=09001157
owner: Nvidia Corporation
number: 09001157
owner_city: Santa Clara
owner_country: US
publication_date: 20100325
---
This application claims the benefit of U.S. Provisional Patent Application No. 61 163 374 filed Mar. 25 2009.

Conventional three dimensional rendering includes monographic and stereo graphic rendering. Monographic rendering produces a three dimensional projection onto a two dimensional display. Typically monographic rendering utilizes depth testing shading and the like to project a three dimensional scene on a display. Currently monographic rendering is popularly utilized in computer games.

Stereographic rendering produces a left eye and right eye two dimensional projection of three dimensional data in addition to depth testing shading and the like to produce an image that appears to have depth in front of and behind a display device when used for example in combination with shutter glasses. Two images may be generated by shifting a mono view along the x axis. In one implementation each scene is copied and shifted by a parallax value to generate a left and right eye view of the scene as illustrated in . The left and right eye views are then presented on a display independently to each eye of the user. In one implementation a pair of shutter glasses are used in combination with a liquid crystal display LCD digital light processing DLP display or 3D projection unit to present the stereoscopic scene. The left and right eye views are alternatively presented on the display and the left and right lens of the shutter glasses synchronously turn on and off to independently present the left and right eye views to each respective eye of the user to create the illusion of a three dimensional image. The resulting image appears to the user to have depth in front of and behind the stereoscopic three dimensional display.

In a number of graphical rendering applications a selection marquee may be used to indicate a selected area in the rendered image. For example a user may use a pointing device to draw a box for selecting a region in the image. In monographic rendering the selection marquee is naturally defined in the view space as a two dimensional shape e.g. rectangle disc free form shape . Therefore the selection marquee can be simply drawn as the desired shape in the window space. However in stereographic rendering the same solution does not work. Each view defines its own selection marquee volume in its clipping space. The vertical edges of the shape don t match in the right and left images. Accordingly there is a need for an improved technique for displaying a selection marquee in stereographic rendering.

The present technology may best be understood by referring to the following description and accompanying drawings that are used to illustrate embodiment of the present technology.

Embodiments of the present technology are directed toward techniques for displaying a selection marquee in stereographic content. In one embodiment a selection volume is generated from a mono viewpoint projection of the selection marquee. The fragments of the three dimensional scene inside the selection volume projection are determined for each of a right eye view and a left eye view of the scene. The coordinates of the fragments for each of the left eye view and the right eye view are transformed to two dimensional coordinates expressed in a mono viewpoint at the near plane. The fragments inside the selection volume at the two dimensional coordinates in the near plane are shaded with a selection attribute.

Reference will now be made in detail to the embodiments of the present technology examples of which are illustrated in the accompanying drawings. While the present technology will be described in conjunction with these embodiments it will be understood that they are not intended to limit the invention to these embodiments. On the contrary the invention is intended to cover alternatives modifications and equivalents which may be included within the scope of the invention as defined by the appended claims. Furthermore in the following detailed description of the present technology numerous specific details are set forth in order to provide a thorough understanding of the present technology. However it is understood that the present technology may be practiced without these specific details. In other instances well known methods procedures components and circuits have not been described in detail as not to unnecessarily obscure aspects of the present technology.

Referring now to a method of displaying a selection marquee in stereographic content in accordance with one embodiment of the present technology is shown. The method begins with receiving a two dimensional 2D selection marquee at a near plane e.g. display screen of a scene at . The selection marquee may be any shape such as a rectangle disk lasso or the like. In one implementation the opposite vertex coordinates of a selection marquee rectangle are received from manipulation of a cursor on a display screen in response to corresponding manipulation of a mouse by a user. An exemplary rectangular selection marquee in a two dimensional viewpoint at a near plane of a scene is illustrated in .

At a selection volume is generated from a mono viewpoint projection of the received selection marquee. A selection volume projection on the three dimensional 3D scene is illustrated in . The selection marquee may be projected from the mono viewpoint on to the three dimensional scene to intersect with one or more scene surfaces. In one implementation rays are projected from the mono viewpoint through the rectangular selection marquee onto the three dimensional scene to create the selection volume .

Referring again to the one or more fragments of the scene that are inside the selection volume projection are determined at . In one implementation the selection volume is depth tested e.g. z test against the depth buffer of the three dimensional scene. To perform the test the scene may first be generated as if it were completely inside the selection marquee. A mask is constructed in a stencil buffer that has holes where the visible scene is outside the selection marquee for each of the left and right viewpoints. When generating the mask writes to the depth and color buffers are disabled. In addition back facing surfaces in the scene are culled. The stencil operation is set to increment on depth pass e.g. only count volume projections in front of the objects in the scene . Thereafter the selection volume projection is rendered e.g. because of culling only their front faces are rendered . Next front face culling is used and the stencil operation is set to decrement on depth pass. Thereafter the selection volume is again rendered e.g. only their back faces are rendered . For each of the left and right viewpoints the scene is generated again as if it were lit using the stencil buffer to mask the selection marquee. Thereafter the surface within the selection volume will have an odd value in the stencil buffer e.g. the number of front and back surfaces of the selection volume between the right and left viewpoints respectively and the scene surfaces are not equal . If the stencil value of the fragment is odd the fragment is within the selection marquee.

At the three dimensional coordinates of the scene fragment inside the selection volume for each of the right and left views are transformed to two dimensional coordinates expressed in the mono viewpoint at the near plane. In one implementation for each of the left and right views if the stencil value is odd the position of the three dimensional scene fragment is looked up in a mono view space position buffer. The position is transformed back to the mono two dimensional near plane view space.

Transforming the three dimensional coordinates of the scene fragment inside the selection volume to two dimensional coordinates is illustrated in . In the near plane the three dimensional scene the selection volume the mono viewpoint the left eye viewpoint the right eye viewpoint and the right eye frustrum are shown. The right eye frustrum is a projection from the right eye viewpoint to the fragments in the selection marquee volume at the three dimensional scene . For each fragment a projection from the right eye view point to a given fragments inside the selection marquee volume is indicated. In a projection from the given fragment inside the selection marquee volume back to the mono viewpoint indicates the two dimensional coordinate of the fragment at the near plane . If the scene fragment is on the selection volume within the frustrum of either the left or right eye viewpoint the view space position of the three dimensional scene is transformed back to the two dimensional monographic space . The same process would also be repeated from the left eye viewpoint to the three dimensional scene fragments and back to the two dimensional monographic space .

Referring again to the fragments inside the selection volume at the two dimensional coordinates in the near plane are shaded with a given selection attribute in each respective left and right scene at . In one implementation a selection color is blended with the color of the pixels in the selection marquee. In another implementation a selection color over write the color of pixels at the border of the selection marquee.

At the left and right views of the scene including the shaded selection marquee are written to a computing device readable media and or output to a user on a display. In one implementation the left and right views of the scene are written to a frame buffer. The left and right views of the scene are then output from the frame buffer to an attached display synchronously with operation of one or more shutter glasses.

Referring now to a stereographic processor in accordance with one embodiment of the present technology is shown. The stereographic processor may be implemented in hardware software or a combination thereof. In one implementation the stereographic processor may be implemented in software by a general purpose processing unit e.g. CPU . In another implementation the stereographic processor may be implemented in hardware software or a combination thereof by a graphics processing unit e.g. GPU . The operation of the stereographic processor will be further explained in combination with the stereographic marquee selection techniques described above and the exemplary computing device shown in .

Referring now to the exemplary computing device for implementing embodiment of the present technology may be a personal computer laptop computer hand held device game console personal entertainment center media center PC tablet PC computer based simulator server computer client computer minicomputer mainframe computer distributed computer system or the like. The computing device includes one or more general purpose processors e.g. CPU one or more computing device readable media and one or more input output I O devices . The I O device may include a network adapter e.g. Ethernet card CD drive DVD drive and or the like and peripherals such as a keyboard a pointing device a speaker a printer and or the like. The computing device may also include one or more specialized processors such as a graphics processing unit GPU .

The computing device readable media may be characterized as primary memory and secondary memory. Generally the secondary memory such as a magnetic and or optical storage provides for non volatile storage of computer readable instructions and data for use by the computing device . For instance the disk drive may store the operating system OS and applications and data . The primary memory such as the system memory and or graphics memory provides for volatile storage of computer readable instructions and data for use by the computing device . For instance the system memory may temporarily store a portion of the operating system and a portion of one or more applications and associated data that are currently used by the CPU GPU and the like.

The computing device readable media I O devices and GPU may be communicatively coupled to the processor by a chip set and one or more busses. The chipset acts as a simple input output hub for communicating data and instructions between the processor and the computing device readable media I O devices and GPU . In one implementation the chipset includes a northbridge and a southbridge .

Referring again to the stereographic processor includes a setup module a rasterizer and a data write module . The rasterizer is communicatively coupled to the setup module and the data write module is communicatively coupled to the rasterizer . The stereographic processor may also include a data fetch unit a shader vertex buffer a fetch cache write buffer and or the like. In one implementation the shader is integral to the rasterizer . The modules of the processor are typically arranged in a pipeline architecture.

Referring now to in combination with in one implementation images are off loaded from the general purpose CPU to the stereographic processor e.g. GPU by transferring geometric primitive parameters draw commands and instruction for controlling the operation of the stereo graphic processor . The geometric primitives may be vertex data representations of lines triangulated three dimensional models of objects and the like. The geometric primitives draw commands and instructions are transferred from the CPU to the GPU utilizing a graphics application programming interface such as the OpenGL ES graphics language Direct3D or the like.

Referring now to the setup module receives geometric primitives draw command and instructions. The setup module prepares parameters e.g. vertex data of the primitives for rasterization. The setup module may also perform clipping and viewpoint operations culling of back facing primitives and occlusion guard band clipping power management for the rest of the pipeline and or the like.

The rasterizer receives instructions and vertex data and performs rasterization thereupon. Rasterization includes walking the primitive and generating pixel packets that contain parameters e.g. set of descriptions for each pixel . The rasterizer then generates a color and depth value for each pixel. After generating the color and depth value of each pixel the rasterizer duplicates each scene and applies a parallax value to generate a left eye view and right eye view. If one or more instructions and vertex data specific a selection marquee the shader generates a selection volume from the mono viewpoint projection of the selection marquee and determines one or more fragments of the three dimensional scene inside the selection volume projection for each of the right and left eye views in a first pass. In a second pass the shader transforms the coordinate of the fragments for each of the right and left eye views to two dimensional coordinates expressed in the mono viewpoint at the near plane and applies a selection attribute to the fragments inside the selection volume at the two dimensional coordinates in the near plane. To perform the operation in the first and second passes of the shader the stereographic processor may include a stencil buffer for determining fragments in the selection marquee volume and a position buffer for transforming the three dimensional scene s fragments to the near plane.

The scenes rendered by the rasterizer are passed to the data write module . The data write module outputs the resulting pixel data to a computing device readable memory device. In one implementation the data write module writes the pixel data to a frame buffer for output to a display device. Referring now to an exemplary system including a stereographic processor of a computing device is shown. The computing device outputs the left and right eye views on a display which are presented independently to each eye of a user by a selective viewing device . The selective viewing device may be passive polarized glasses used in combination with a micropol display shutter glasses with an LCD display DLP display or 3D projection unit or anaglyph glasses with most displays. The stereographic processor of the computing device is adapted to display an accurate selection marquee in the stereographic scene in response to an input from a user or application.

Embodiments of the present technology can advantageously be used to render any two dimensional selection marquee. Rendering the selection marquee may be performed by generating the corresponding selection volume. Embodiments provide an accurate solution to represent the selection marquee in stereo. The technique utilizes an extra buffer containing the position of the view space of the three dimensional scene fragments.

The foregoing descriptions of specific embodiments of the present technology have been presented for purposes of illustration and description. They are not intended to be exhaustive or to limit the invention to the precise forms disclosed and obviously many modifications and variations are possible in light of the above teaching. The embodiments were chosen and described in order to best explain the principles of the present technology and its practical application to thereby enable others skilled in the art to best utilize the present technology and various embodiments with various modifications as are suited to the particular use contemplated. It is intended that the scope of the invention be defined by the claims appended hereto and their equivalents.

