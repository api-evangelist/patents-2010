---

title: System and method for dual mode communication
abstract: Wi-Fi setup application and path switching applications are provided to allow commands received from native applications of the UE to be redirected to a Wi-Fi engine. The Wi-Fi engine supports circuit switched and packet switched services over a Wi-Fi connection, thus allowing commands received from native applications on a UE to connect the user to either a wireless unlicensed communication system or a wireless licensed communication system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09265073&OS=09265073&RS=09265073
owner: Kineto Wireless, LLC
number: 09265073
owner_city: Richardson
owner_country: US
publication_date: 20101222
---
This application claims the benefit of U.S. Provisional Application 61 347 376 entitled System and Method for Dual Mode Communication filed May 21 2010. U.S. Provisional Application 61 347 376 is hereby incorporated by reference.

Licensed wireless systems provide mobile wireless communications to individuals using wireless transceivers. Licensed wireless systems refer to public cellular telephone systems and or Personal Communication Services PCS telephone systems. Wireless transceivers include cellular telephones PCS telephones wireless enabled personal digital assistants wireless modems and the like.

Licensed wireless systems utilize wireless signal frequencies that are licensed from governments. Large fees are paid for access to these frequencies. Expensive base station equipment is used to support communications on licensed frequencies. Base stations are typically installed approximately a mile apart from one another e.g. cellular towers in a cellular network . The wireless transport mechanisms and frequencies employed by typical licensed wireless systems limit both data transfer rates and range. As a result the quality of service voice quality and speed of data transfer in licensed wireless systems is considerably inferior to the quality of service afforded by landline wired connections. Thus the user of a licensed wireless system pays relatively high fees for relatively low quality service.

Landline wired connections are extensively deployed and generally perform at a lower cost with higher quality voice and higher speed data services. The problem with landline connections is that they constrain the mobility of a user. Traditionally a physical connection to the landline was required.

In recent years the use of unlicensed wireless communication systems to facilitate mobile access to landline based networks has seen rapid growth. For example such unlicensed wireless systems may support wireless communication based on the IEEE 802.11a b or g standards Wi Fi or the Bluetooth standard. The mobility range associated with such systems is typically on the order of 100 meters or less. A typical unlicensed wireless communication system includes a base station comprising a wireless access point with a physical connection e.g. coaxial twisted pair or optical cable to a landline based network. The access point has a radio frequency RF transceiver to facilitate communication with a wireless user equipment UE that is operative within a modest distance of the access point. The data transport rates supported by the Wi Fi and Bluetooth standards are much higher than those supported by the aforementioned licensed wireless systems. Thus this option provides higher quality services at a lower cost but the services only extend a modest distance from the base station.

Currently technology is being developed to integrate the use of licensed and unlicensed wireless systems in a seamless fashion. Thus enabling a user to access via a single UE an unlicensed wireless system when within the range of such a system while accessing a licensed wireless system when out of range of the unlicensed wireless system. However existing technology requires separate applications on the wireless UE for accessing the licensed and unlicensed wireless systems.

For example a user accesses native applications e.g. phone dialer contacts list and short messaging service provided by the manufacturer of the wireless UE in order to establish a connection with the licensed wireless communication system. On the other hand when the user wishes to connect to an unlicensed wireless communication system the user must launch a third party application to connect to the unlicensed wireless communication system. These third party applications are standalone applications which include separate phone dialers contact lists etc. for connecting a user to an unlicensed wireless communication system. Thus the user must retain duplicate contact lists and use a separate phone dialer each time the user wishes to establish a communications connection with the unlicensed wireless communication system. Furthermore these applications employ a separate user identity e.g. a separate phone number to authorize the user to use the unlicensed wireless communication system.

Some embodiments provide a method and system for allowing a user of a mobile station or user equipment UE to use a single identity e.g. same phone number when accessing licensed or unlicensed wireless communications networks over cellular frequencies or through wireless connections to the Internet e.g. Wi Fi . Some embodiments integrate a Wi Fi setup application in the UE. The Wi Fi setup application uses a single subscriber identity for accessing both the unlicensed and licensed wireless communication networks. In some embodiments the Wi Fi setup application uses existing native user interface applications e.g. phone dialer contacts list and short messaging services provided by the UE manufacturer. In some embodiments the Wi Fi setup application is pre loaded into the UE. In other embodiments the Wi Fi setup application is downloaded and installed on the UE.

Some embodiments accomplish integrating the Wi Fi setup application with existing native applications by providing path switches in the operating system of the UE. These path switches allow commands received from native applications of the UE to be redirected to an unlicensed radio interface. The unlicensed radio interface supports circuit switched and packet switched services over a Wi Fi connection thus allowing commands received from native applications on a UE to connect the user to either a wireless unlicensed communication system or a wireless licensed communication system. Some embodiments of the unlicensed radio interface provide for automatic network selection for connecting to either a wireless licensed communication network or a wireless unlicensed communication network. Other embodiments allow the user to determine which network the user wishes to access i.e. licensed or unlicensed communication networks .

In accordance with some embodiments of the present invention a method for mobile communication is described herein. The method generates radio interface layer RIL commands in response to a call command from a native dialer application of a mobile device. The RIL commands may include a subscriber identity and commands to cause a cellular RIL of the mobile device to establish a connection with a core network via a licensed wireless communication network. The method then diverts the RIL commands to an unlicensed wireless radio client. Next the method establishes a connection with the core network via an unlicensed wireless communication network using the subscriber identity and the diverted RIL commands.

The method repackages the diverted RIL commands into commands for establishing communication with the unlicensed wireless communication network in some embodiments. In some embodiments the unlicensed wireless radio client is a generic access network GAN client. The GAN client is configured to i perform non access stratum functions ii establish an IPSec tunnel to a network controller of the second unlicensed wireless communication network and 3 transfer data between the access point and the GAN client over the established IPSec tunnel using TCP IP protocols.

The method also monitors the signal quality of the connection with the unlicensed wireless communication network in some embodiments. When the signal quality is below a certain threshold the method commences the handover procedure. The handover procedure includes the process of obtaining a list of cell identities of a service area of the licensed wireless communication network directly from the first RIL of the mobile device without communicating with an access mode switch in some embodiments. The handover procedure also includes sending a channel mode a ciphering code and a cell identity from the list of cell identities to the core network via the unlicensed wireless communication network in some embodiments.

The handover procedure then sends a handover request to the core network via the unlicensed wireless communication network. The handover request includes a request to establish a communication channel using the channel mode and the ciphering code in some embodiments. In response to the handover request a handover confirmation is received from the core network via the unlicensed wireless communication network in some embodiments.

Some embodiments provide a computer readable medium that stores a computer program that is executable by a processing unit to establish communication with the core network using either a cellular radio access technology RAT or a GAN RAT. The computer program includes sets of instructions for generating radio interface layer RIL commands in response to a call command from a native dialer application of a mobile device. In some embodiments the RIL commands includes a subscriber identity and commands to cause a first RIL of the mobile device to establish a connection with a core network via a licensed wireless communication network. The computer program also includes sets of instructions for diverting the RIL commands to an unlicensed wireless radio client and establishing a connection with the core network via an unlicensed wireless communication network using the subscriber identity and the diverted RIL commands.

In accordance with yet other embodiments of the present invention a mobile communication device is provided. The mobile device includes a dialer application a RIL switch and an unlicensed wireless radio module. The dialer application is configured to send radio interface layer RIL commands to a first RIL of the device. The RIL commands include a subscriber identity and commands to cause a cellular RIL of the mobile device to establish a connection with a core network via a licensed wireless communication network.

The RIL switch is configured to divert the RIL commands to an unlicensed wireless radio client. The unlicensed wireless radio module is configured to establish a connection with the core network via a second unlicensed wireless communication network using the subscriber identity and the diverted RIL commands.

The preceding Summary is intended to serve as a brief introduction to some embodiments of the invention. It is not meant to be an introduction or overview of all inventive subject matter disclosed in this document. The Detailed Description that follows and the Drawings that are referred to in the Detailed Description will further describe the embodiments described in the Summary as well as other embodiments. Accordingly to understand all the embodiments described by this document a full review of the Summary Detailed Description and the Drawings is needed.

In the following detailed description of the invention numerous details examples and embodiments of the invention are set forth and described. However it will be clear and apparent to one skilled in the art that the invention is not limited to the embodiments set forth and that the invention may be practiced without some of the specific details and examples discussed.

Throughout the following description acronyms commonly used in the telecommunications industry for wireless services are utilized along with acronyms specific to the present invention. A table of acronyms used in this application is included in Section VIII.

Some embodiments provide a method of operating a user equipment UE in a communication system that includes a licensed wireless communication system and an unlicensed wireless communication system such as a generic access network GAN . Some embodiments of the inventions are implemented on UEs that are dual mode UEs. Dual mode UEs typically include two radios a radio operating in licensed frequencies and a radio operating in unlicensed frequencies. In this specification the terms licensed licensed radio and licensed frequencies are used interchangeable with cellular cellular radio and cellular frequency respectively. The term unlicensed radio refers to an IEEE 802.11 Wi Fi radio Bluetooth radio or similar radios operating in frequencies that are not licensed by the governments. The cellular radio is used to communicate with a wide area cellular network over cellular frequencies. When within range of a Wi Fi connection the Wi Fi radio is used to communicate data over an unlicensed wireless frequency connection. In some embodiments a dual mode UE is also able to receive cellular voice and data services over a broadband service through the Wi Fi connection. Access to cellular services through a broadband connection is referred to as unlicensed Mobile Access UMA .

Some embodiments provide a method and system for allowing a user of a mobile station or user equipment UE to use a single identity e.g. same phone number when accessing licensed or unlicensed wireless communications networks over cellular frequencies or through wireless connections to the Internet e.g. Wi Fi . Some embodiments integrate a Wi Fi setup application in the UE. The Wi Fi setup application uses a single subscriber identity for accessing both the unlicensed and licensed wireless communication networks. In some embodiments the Wi Fi setup application uses existing native user interface applications e.g. phone dialer contacts list and short messaging services provided by the UE manufacturer. In some embodiments the Wi Fi setup application is pre loaded into the UE. In other embodiments the Wi Fi setup application is downloaded and installed on the UE.

Some embodiments accomplish integrating the Wi Fi setup application with existing native applications by providing path switches in the operating system of the UE. These path switches allow commands received from native applications of the UE to be redirected to an unlicensed radio interface. The unlicensed radio interface supports circuit switched and packet switched services over a Wi Fi connection thus allowing commands received from native applications on a UE to connect the user to either a wireless unlicensed communication system or a wireless licensed communication system. Some embodiments of the unlicensed radio interface provide for automatic network selection for connecting to either a wireless licensed communication network or a wireless unlicensed communication network. Other embodiments allow the user to determine which network the user wishes to access i.e. licensed or unlicensed communication networks .

In accordance with some embodiments of the present invention a method for mobile communication is described herein. The method generates radio interface layer RIL commands in response to a call command from a native dialer application of a mobile device. The RIL commands may include a subscriber identity and commands to cause a cellular RIL of the mobile device to establish a connection with a core network via a licensed wireless communication network. The method then diverts the RIL commands to an unlicensed wireless radio client. Next the method establishes a connection with the core network via an unlicensed wireless communication network using the subscriber identity and the diverted RIL commands.

The method repackages the diverted RIL commands into commands for establishing communication with the unlicensed wireless communication network in some embodiments. In some embodiments the unlicensed wireless radio client is a generic access network GAN client. The GAN client is configured to i perform non access stratum functions ii establish an IPSec tunnel to a network controller of the second unlicensed wireless communication network and 3 transfer data between the access point and the GAN client over the established IPSec tunnel using TCP IP protocols.

The method also monitors the signal quality of the connection with the unlicensed wireless communication network in some embodiments. When the signal quality is below a certain threshold the method commences the handover procedure. The handover procedure includes the process of obtaining a list of cell identities of a service area of the licensed wireless communication network directly from the first RIL of the mobile device without communicating with an access mode switch in some embodiments. The handover procedure also includes sending a channel mode a ciphering code and a cell identity from the list of cell identities to the core network via the unlicensed wireless communication network in some embodiments.

The handover procedure then sends a handover request to the core network via the unlicensed wireless communication network. The handover request includes a request to establish a communication channel using the channel mode and the ciphering code in some embodiments. In response to the handover request a handover confirmation is received from the core network via the unlicensed wireless communication network in some embodiments.

Some embodiments provide a computer readable medium that stores a computer program that is executable by a processing unit to establish communication with the core network using either a cellular radio access technology RAT or a GAN RAT. The computer program includes sets of instructions for generating radio interface layer RIL commands in response to a call command from a native dialer application of a mobile device. In some embodiments the RIL commands includes a subscriber identity and commands to cause a first RIL of the mobile device to establish a connection with a core network via a licensed wireless communication network. The computer program also includes sets of instructions for diverting the RIL commands to an unlicensed wireless radio client and establishing a connection with the core network via an unlicensed wireless communication network using the subscriber identity and the diverted RIL commands.

In accordance with yet other embodiments of the present invention a mobile communication device is provided. The mobile device includes a dialer application a RIL switch and an unlicensed wireless radio module. The dialer application is configured to send radio interface layer RIL commands to a first RIL of the device. The RIL commands include a subscriber identity and commands to cause a cellular RIL of the mobile device to establish a connection with a core network via a licensed wireless communication network.

The RIL switch is configured to divert the RIL commands to an unlicensed wireless radio client. The unlicensed wireless radio module is configured to establish a connection with the core network via a second unlicensed wireless communication network using the subscriber identity and the diverted RIL commands.

Several more detailed embodiments of the invention are described in sections below. Specifically Section I describes the overall integrated communication system in which some embodiments are incorporated. The discussion in Section I is followed by describing the use of a single user interface in a dual mode UE in Section II. Next Section III describes using a single identity to access licensed and unlicensed services. Next Section IV describes roving and handover between the licensed and unlicensed wireless system. Section V then describes the UE architecture of some embodiments. Next a process for defining API and interfaces for a dual mode UE. Section VI describes a computer system which is used in some embodiments. Next Section VII presents the list of abbreviations used. Finally Section VIII lists the abbreviations used.

The mobile core network includes one or more Home Location Registers HLRs and databases for subscriber authentication and authorization. Once authorized the UE may access the voice and data services of the mobile core network . In order to provide such services the mobile core network includes a mobile switching center MSC for providing access to the voice services. Data services are provided for through a Serving GPRS General Packet Radio Service Support Node SGSN in conjunction with a gateway such as the Gateway GPRS Support Node GGSN .

The SGSN is typically responsible for delivering data packets from and to the GGSN and the user equipment within the geographical service area of the SGSN . Additionally the SGSN may perform functionality such as mobility management storing user profiles and storing location information. However the actual interface from the mobile core network to various external data packet services networks e.g. public Internet is facilitated by the GGSN . As the data packets originating from the user equipment typically are not structured in the format with which to access the external data networks it is the role of the GGSN to act as the gateway into such packet services networks. In this manner the GGSN provides addressing for data packets passing to and from the UE and the external packet services networks not shown . Moreover as the user equipment of a licensed wireless network traverses multiple service regions and thus multiple SGSNs it is the role of the GGSN to provide a static gateway into the external data networks.

In the illustrated embodiment components common to a UMTS Terrestrial Radio Access Network UTRAN based cellular network are depicted that include multiple base stations referred to as Node Bs of which only one is shown for simplicity that facilitate wireless communication services for various user equipments via respective licensed radio links e.g. radio links employing radio frequencies within a licensed bandwidth . One of ordinary skill in the art will recognize that in some embodiments the licensed wireless network may include other licensed wireless networks such as the GSM EDGE Radio Access Network GERAN . An example of a system using A and Gb interfaces to access GERAN is shown in below.

The licensed wireless channel may comprise any licensed wireless service having a defined UTRAN or GERAN interface protocol e.g. Iu cs and Iu ps interfaces for UTRAN or A and Gb interfaces for GERAN for a voice data network. The UTRAN typically includes at least one Node B and a Radio Network Controller RNC for managing the set of Node Bs . Typically the multiple Node Bs are configured in a cellular configuration one per each cell that covers a wide service area.

Each RNC communicates with components of the core network through a standard radio network controller interface such as the Iu cs and Iu ps interfaces depicted in . For example a RNC communicates with MSC via the UTRAN Iu cs interface for circuit switched voice services. Additionally the RNC communicates with SGSN via the UTRAN Iu ps interface for packet data services through GGSN . Moreover one of ordinary skill in the art will recognize that in some embodiments other networks with other standard interfaces may apply. For example the RNC in a GERAN network is replaced with a Base Station Controller BSC that communicates voice to the MSC via an A interface and the BSC communicates data to the SGSN via a Gb interface of the GERAN network.

In some embodiments of the ICS architecture the user equipment use the services of the mobile core network CN via a second communication network facilitated by the ICS access interface and a Generic Access Network Controller GANC also referred to as a Universal Network Controller or UNC .

In some embodiments the voice and data services over the ICS access interface are facilitated via an access point communicatively coupled to a broadband IP network . In some embodiments the access point is a generic wireless access point that connects the user equipment to the ICS network through unlicensed wireless frequencies.

The signaling from the UE is passed over the ICS access interface to the GANC . After the GANC performs authentication and authorization of the subscriber the GANC communicates with components of the mobile core network using a radio network controller interface that is the same or similar to the radio network controller interface of the UTRAN described above and includes a UTRAN Iu cs interface for circuit switched voice services and a UTRAN Iu ps interface for packet data services e.g. GPRS . In this manner the GANC uses the same or similar interface to the mobile core network as a UTRAN Radio Network Subsystem e.g. the Node B and RNC .

In some embodiments the GANC communicates with other system components of the ICS system through one or more of several other interfaces which are 1 Up 2 Wm 3 D Gr 4 Gn and 5 S1 . The Up interface is the interface between the UE and the GANC . The Wm interface is a standardized interface between the GANC and an Authorization Authentication and Accounting AAA Server for authentication and authorization of the UE into the ICS. The D Gr interface is the standard interface between the AAA server and the HLR . Optionally some embodiments use the Gn interface which is a modified interface for direct communications with the data services gateway e.g. GGSN of the core licensed network. Some embodiments optionally include the S1 interface. In these embodiments the S1 interface provides an authorization and authentication interface from the GANC to an AAA server. In some embodiments the AAA server that supports the S1 interface and the AAA server that supports Wm interface may be the same.

In some embodiments the UE must register with the GANC prior to accessing ICS services. Registration information of some embodiments includes a subscriber s International Mobile Subscriber Identity IMSI a Media Access Control MAC address and a Service Set Identifier SSID of the serving access point as well as the cell identity from the GSM or UTRAN cell upon which the UE is already camped. In some embodiments the GANC may pass this information to the AAA server to authenticate the subscriber and determine the services e.g. voice and data available to the subscriber. If approved by the AAA for access the GANC will permit the UE to access voice and data services of the ICS system.

These voice and data services are seamlessly provided by the ICS to the UE through the various interfaces described above. In some embodiments when data services are requested by the UE the ICS uses the optional Gn interface for directly communicating with a GGSN . The Gn interface allows the GANC to avoid the overhead and latency associated with communicating with the SGSN over the Iu ps interface of the UTRAN or the Gb interface of the GSM core networks prior to reaching the GGSN .

An ICS provides scalable and secure interfaces into the core service network of mobile communication systems. illustrates several applications of an ICS in some embodiments. As shown homes offices hot spots hotels and other public and private places are connected to one or more network controllers such as the GANC shown in through the Internet . The network controllers in turn connect to the mobile core network such as the core network shown in .

A Wi Fi access point enables dual mode cellular Wi Fi UEs to receive high performance low cost mobile services when in range of a home office or public Wi Fi network. With dual mode UEs subscribers can roam and handover between licensed wireless communication system and Wi Fi access and receive a consistent set of services as they transition between networks.

Some licensed wireless communication system operators are investigating deployment of WiMAX networks in parallel with their existing cellular networks. A dual mode cellular WiMAX UE enables a subscriber to seamlessly transition between a cellular network and such a WiMAX network through a WiMAX access point .

Several examples of Integrated Communication Systems ICS are given in the following sub sections. A person of ordinary skill in the art would realize that the teachings in these examples can be readily combined. For instance an ICS can be an IP based system and have an A Gb interface towards the core network while another ICS can have a similar IP based system with an Iu interface towards the core network.

The generic IP access network provides connectivity between the UE and the GANC . The IP transport connection extends from the GANC to the UE . A single interface the Up interface is defined between the GANC and the UE .

The GAN co exists with the GERAN and maintains the interconnections with the Core Network CN via the standardized interfaces defined for GERAN. These standardized interfaces include the A interface to Mobile Switching Center MSC for circuit switched services Gb interface to Serving GPRS Support Node SGSN for packet switched services Lb interface to Serving Mobile Location Center SMLC for supporting location services and an interface to Cell Broadcast Center CBC for supporting cell broadcast services. The transaction control e.g. Connection Management CC and Session Management SM and user services are provided by the core network e.g. MSC VLR and the SGSN GGSN .

As shown the SEGW is connected to an AAA server over the Wm interface. The AAA server is used to authenticate the UE when it sets up a secure tunnel. Some embodiments require only a subset of the Wm functionalities for the GAN application. In these embodiments as a minimum the GANC SEGW shall support the Wm authentication procedures.

The generic IP access network provides connectivity between the UE and the GANC . The IP transport connection extends from the GANC to the UE . A single interface the Up interface is defined between the GANC and the UE . Functionality is added to this interface over the UP interface shown in to support the Iu mode GAN service.

The GAN co exists with the UTRAN and maintains the interconnections with the Core Network CN and via the standardized interfaces defined for UTRAN. These standardized interfaces include the Iu cs interface to Mobile Switching Center MSC for circuit switched services Iu ps interface to Serving GPRS Support Node SGSN for packet switched services Iu pc interface to Serving Mobile Location Center SMLC for supporting location services and Iu bc interface to Cell Broadcast Center CBC for supporting cell broadcast services. The transaction control e.g. Connection Management CC and Session Management SM and user services are provided by the core network e.g. MSC VLR and the SGSN GGSN .

As shown the SEGW is connected to a AAA server over the Wm interface. The AAA server is used to authenticate the UE when it sets up a secure tunnel. Some embodiments require only a subset of the Wm functionalities for the Iu mode GAN application. In these embodiments as a minimum the GANC SEGW shall support the Wm authentication procedures. Several embodiments for integrating an unlicensed wireless client into an existing Wi Fi enabled device architecture are disclosed in the following sections. The disclosed unlicensed wireless client supports GAN protocol UMA protocol or any similar protocols used to support dual mode user equipments. The disclosed Wi Fi enabled device provides circuit switched CS and packet switched PS services over the Wi Fi using one of the supported protocols.

As shown in UE is a dual mode UE. Licensed radio interface sends and receives voice and data through cellular frequencies. Unlicensed radio interface sends and receives voice and data through unlicensed frequencies. UE includes several applications installed at the application layer that enable UE to access voice and data services from mobile CN . Generally the original equipment manufacturer OEM of UE provides native interface to enable the user to access various services from mobile CN via cellular frequencies.

Native interface includes several native applications such as a dialer for inputting telephone numbers a contacts list for storing contacts and applications for enabling short message and multimedia message services. Each of the applications in native interface utilizes a single unique identity or phone number to identify the UE . Native interface sends commands received from the native applications to licensed radio interface which interprets the commands and facilitates communications between UE and a base station subsystem BSS or a UMTS terrestrial radio access network UTRAN using licensed wireless frequencies. BSS or UTRAN is responsible for channel allocation transcoding paging transmitting and receiving of data between UE and CN .

UE can also access services from CN through an alternative route when a broadband connection is available. To accomplish this UE is loaded with a separate Wi Fi application made available by a third party. This Wi Fi application utilizes the Wi Fi radio of UE to establish a connection to CN through a broadband connection provided by access point . In a conventional system Wi Fi application assigns the UE with a separate identity and separate applications e.g. a dialer application contact lists SMS MMS application etc. in order to provide unlicensed wireless services.

Furthermore Wi Fi application utilizes a different set of commands for requesting CN services through the broadband connection. These commands are sent from the Wi Fi application to an unlicensed radio interface which interprets the commands and establishes a communication session with the mobile CN using the Wi Fi radio of UE . The drawback of this implementation is that a user must access different applications on UE when requesting mobile CN services through either a cellular network or a broadband network. Furthermore a user must establish a secondary identity such as a secondary phone number or user name when accessing CN services through a broadband connection.

For unlicensed access an access point AP facilitates communication between UE and CN using both unlicensed wireless frequencies and broadband connection. AP communicates with an unlicensed mobile access UMA network controller UNC via the Internet through the broadband Internet connection. Alternatively a GANC can be used as the network controller. AP communicates with UE via unlicensed wireless frequencies .

As illustrated in when a user places a call through the user s mobile service provider the user accesses the native cellular application on the user interface of UE . Such applications can include dialers contact lists and SMS MMS applications. Dialer application enables the user to dial and connect to CN using licensed wireless frequencies. Typically both of the cellular application and the dialer application are included along with UE by the UE OEM. As shown in native dialer sends commands to the licensed radio interface that facilitates communication with CN through the BSS or UTRAN using a cellular radio of the UE .

On the other hand when a user places a call or requests data through a broadband connection the user accesses a separate Wi Fi application that has a second dialer application . This particular dialer is only accessible through Wi Fi application which is provided by a third party. Referring to commands from the Wi Fi dialer are sent to the unlicensed radio interface . The unlicensed radio interface facilitates communication with CN through the AP which connects the UE to the broadband. Referring back to UNC receives the request for services from the UE and opens a communication channel between CN and the UE through the unlicensed wireless frequencies provided by the AP . illustrate exemplary systems and methods for communicating with a mobile core network via either a licensed radio interface or an unlicensed radio interface using a single UE identifier and or a single user interface according to some embodiments of the present invention.

In some embodiments native interface is identical to native interface as described in . Wi Fi setup application is an application layer interface that enables UE to access the functionalities of unlicensed radio interface which communicates with access point to establish communication with CN through a network controller . For licensed wireless communication UE communicates with CN via BSS or UTRAN which communicates with UE via licensed radio interface .

In some embodiments RIL switch is a logical switch which is used to redirect commands received from mobile native interface to unlicensed radio interface which repackages the commands for packet services over Wi Fi and forwards them to access point when UE is in unlicensed mode. UE may enter unlicensed mode automatically upon the detection of and authenticating with a nearby access point. Alternatively UE may enter unlicensed mode only upon request of the user and when broadband access is available. In this manner RIL switch eliminates the need for a separate Wi Fi application such as application of that uses a separate and distinct UE identity to communicate with CN via an unlicensed wireless frequency access point.

In some embodiments unlicensed radio interface includes an unlicensed radio interface layer RIL and an unlicensed wireless client . Each of these components of unlicensed radio interface will be described in greater detail below.

In order to implement this architecture on UE unlicensed radio interface receives commands e.g. in response to user input from mobile native interface through the RIL switch . The unlicensed radio interface then reformats the commands to enable UE to use unlicensed wireless protocols to access CN . Similarly when the UE is operating in unlicensed mode and for instance a text message is received from the core network the text message is received at the unlicensed radio interface through the network controller and the access point . The unlicensed radio interface sends the text message through the RIL switch to SMS MMI application which will then present it to the user. When the UE is operating in licensed mode and for instance a text message is received from the core network the text message is received at the licensed radio interface through the BSS or UTRAN . The licensed radio interface sends the text message through the RIL switch to SMS MMI application which will then present it to the user.

When the Wi Fi service is available the process determines at whether broadband e.g. the Internet is also available . Availability of the Internet avoids a captive portal situation in which Wi Fi is available by an access point which is not connected to broadband and therefore is not able to connect the UE to the CN. When the broadband service is not available the process proceeds to that was described above. In some embodiments the Wi Fi module of the UE also determines whether the detected Wi Fi device is connected to the broadband and sends an indication to process about the availability of the broadband connection. In some embodiments process receives at this indication separately. In other embodiments the availability of Wi Fi and the broadband are received in one indication at . In these embodiments operations and are merged.

In some embodiments process receives an indication from the Wi Fi management application that a Wi Fi system is available. Once the process determines that both Wi Fi and broadband services are available through the detected Wi Fi device process determines at whether the licensed or the unlicensed radios shall be used. In some embodiments the user of the UE determines the preference for using the licensed versus unlicensed services. In other embodiments the preferences are pre set by the OEM of the UE. In some embodiments the user can either use the preferences pre set of the OEM as default or change them through the UE user interface. Yet in some embodiments the process automatically connects to Wi Fi upon the availability and successful registration . In these embodiments operation is skipped.

When process determines that preferences are not set to use unlicensed service the process proceeds to which was described above. Otherwise the process instructs at the RIL switch to direct user commands to unlicensed radio interface. In some embodiments process activates the RIL switch only after a successful registration with the Wi Fi system. Next the process optionally disables at the licensed radio or places the licensed radio in low power state e.g. with enough power to allow access to the U SIM card. The process then ends. Referring back to once it is determined that the UE shall use the services of the CN through the unlicensed radio interface the UE is communicatively coupled to the CN through the AP broadband and the network controller .

One of ordinary skill in the art will recognize that process is a conceptual representation of a process that determines whether to use the licensed or the unlicensed radio interface of a dual mode UE. The specific operations of the process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also the process may not be performed as one continuous series of operations. Furthermore the process could be implemented using several sub processes or as part of larger macro process.

Once availability of the Wi Fi and broadband services as well as the preferences are determined the commands a user enters through the user interface are directed from the RIL switch to either the licensed radio interface of the unlicensed radio interface. conceptually illustrates a process of some embodiments that handles the user commands for a dual mode UE in some embodiments. This process is utilized when for instance the user places a call using the native dialer of the UE.

As shown process receives at commands from native applications of UE e.g. for placing a call . Process then determines at whether the RIL switch is set to direct traffic to the licensed radio interface. As described by reference to process determines whether the UE shall use the licensed or unlicensed radios depending on the availability of Wi Fi availability of the Internet and preferences the UE uses either of the licensed or unlicensed radios. When the UE shall use the licensed radio process proceeds to which is described below. Otherwise the process sends at commands from the native applications of UE to the unlicensed radio interface. Next the process enables UE to establish or to maintain at a communication channel with the CN using the unlicensed frequencies and the broadband services. The process then ends.

When the process determines that the UE shall use the licensed services the process sends at the commands received from the native applications to licensed radio interface as it normally would when requesting CN services using licensed cellular frequencies. Next the process enables the UE to establish or maintain at a communication channel with CN if the connection is not already established using the licensed wireless network. The process then ends.

One of ordinary skill in the art will recognize that process is a conceptual representation of the operations used to establish communication with a core network via either unlicensed or licensed wireless frequencies. The specific operations of process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also process may not be performed as one continuous series of operations. Furthermore process could be implemented using several sub processes or as part of larger macro process.

The above discussion has illustrated how native application commands can be redirected to an unlicensed radio interface to eliminate the need for different applications to connect to a core network. However a solution is also needed to alleviate the need for two different subscriber identities when accessing core network services using licensed and unlicensed communications networks. The next section will discuss how a UE can re use the subscriber identity assigned by the cellular network provider when communicating with CN through both wireless licensed and unlicensed communications networks.

In some embodiments the UE includes a subscriber identity module SIM or a universal subscriber identity module USIM on a removable SIM card. The term U SIM is used hereinafter to refer to either a SIM module or a USIM module. The U SIM module includes several elementary files EFs such as EFimsi EFacc EFloci EFepsloci EFkeys EFsms EFsmsp EFsmss and EFsmsr. The information stored in the EFs include identify of a subscriber on the UE e.g. international mobile subscriber identity IMSI of the subscriber . Other information include the unique serial number security authentication and ciphering information temporary information related to the local network a list of the services the user has access to and one or more passwords.

The elementary information interface is used by both licensed radio interface and unlicensed radio interface to access elementary files EFs on the U SIM. The information in the EFs is used e.g. in GAN registration procedures Non Access Stratum NAS circuit switched CS and packet switched PS registration procedures and SMS handling.

The U SIM access interface also includes a U SIM authentication interface which is used for GSM authentication EAP SIM authentication and location area updates. The U SIM access interface also generates integrity and ciphering keys and provides them to the unlicensed radio interface upon request for use in generic access GAN and NAS security mode procedures. As described below when the UE accesses the CN through the unlicensed radio interface the licensed radio can either be turned off or placed in a low power mode and the licensed protocol stack can be detached. The U SIM access interface however remains available to the unlicensed radio interface after the licensed protocol stack is detached. In some embodiments the unlicensed radio interface accesses the U SIM access interface through an application programming interface API . In some embodiments the API to elementary information interface is available through the operating system running on the UE while the API to U SIM authentication interface is provided by an original equipment manufacturer OEM of the UE.

In some embodiments the U SIM card credentials which is used for authentication to access licensed services is reused by the unlicensed radio interface in the process of unlicensed authentication to establish the IPSec tunnel and access unlicensed services. The reuse of the U SIM card credentials eliminates the need for the user of the UE to enter a user name and password for the authentication of the UE. In addition the licensed network periodically sends an authentication challenge to the UE regardless of whether the UE is in licensed or unlicensed mode. This authentication challenge could include a set of numbers e.g. three numbers referred to as a triplet . The triplet is given to the U SIM card which uses its private key and its algorithm to modify the triplet to generate a signed triplet. The signed triplet is sent to the licensed network when the UE is either in the licensed or unlicensed mode . The licensed network has its own copy of the algorithm and the private key. The licensed network generates a copy of the signed triplet and compares it with the signed triplet received from the UE. When the two set of values match the UE successfully passes the challenge.

Process then determines at whether unlicensed wireless services shall be used. In some embodiments process described above determines whether the licensed or unlicensed services are to be used and sets the RIL switch to direct traffic flow to either the licensed radio interface or the unlicensed radio interface. When the licensed wireless services are to be used process instructs at UE to register itself with the cellular or licensed network via BSS UTRAN . On the other hand when the unlicensed wireless services are to be used process starts at the rove in and unlicensed registration procedure. The rove in and the unlicensed registration will be discussed in greater detail below. The process then ends.

One of ordinary skill in the art will recognize that process is a conceptual representation of the SIM initialization process. The specific operations of the process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also the process may not be performed as one continuous series of operations. Furthermore the process could be implemented using several sub processes or as part of larger macro process.

Process then initiates at the unlicensed registration process using unlicensed wireless client of unlicensed radio interface . Next the process requests at the subscriber identity or IMSI stored in the U SIM card through U SIM access interface in order to start the GSM and EAP Extensible Authentication Protocol authentication procedures. Next the process also requests at for data stored in the U SIM such as authentication and ciphering keys and LOCI information which is information relating to a particular location of UE .

Next process establishes at a secure communication channel between UE and CN using the subscriber identity IMSI data of the U SIM card. Process then determines at whether the registration with the network controller e.g. UNC or GANC is successful. When the registration is not successful process registers UE at with the cellular network. Alternatively if UE has already been registered with the cellular network then process maintains at connection with the cellular network. The process then ends.

On the other hand when the unlicensed registration is successful process instructs at RIL switch to switch to unlicensed service from cellular service. At this time the UE is able to use the services of the CN through the unlicensed wireless link and the network controller . Process then optionally disables at the cellular radio components of UE to conserve power. Alternatively the cellular radio components may be placed in low power or sleep mode. The process then ends.

As discussed in the foregoing paragraphs UE is able to connect to CN using either licensed wireless frequency of the cellular network or unlicensed broadband frequencies with a single UE identity. This eliminates the need to have a separate Wi Fi application having separate identifier dialer application contact list and SMS MMS application. In this manner the user of UE may switch between the cellular network and the unlicensed wireless network seamlessly without having to use different phone numbers and contact lists.

One of ordinary skill in the art will recognize that process is a conceptual representation of the unlicensed or GAN registration and rove in process. The specific operations of process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also process may not be performed as one continuous series of operations. Furthermore process could be implemented using several sub processes or as part of larger macro process.

One of ordinary skill in the art will recognize that process is a conceptual representation of a rove out process. The specific operations of process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also process may not be performed as one continuous series of operations. Furthermore process could be implemented using several sub processes or as part of larger macro process.

One of ordinary skill in the art will recognize that process is a conceptual representation of a dropped call handling process. The specific operations of process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also process may not be performed as one continuous series of operations. Furthermore process could be implemented using several sub processes or as part of larger macro process.

When the Wi Fi signal is above the threshold process maintains at the call with the core network via unlicensed radio interface using unlicensed wireless communication frequencies. The process then proceeds to to keep on monitoring Wi Fi signal. Otherwise process commences at the handover procedure.

The handover procedure starts by obtaining at a list of cell identities of service region of the licensed wireless network. In some embodiments the list of cell identities comprises cell identities of GERAN GSM Edge Radio Access Network cell. In some embodiments unlicensed wireless client makes a direct request to the cellular RIL of mobile device for the list of cell identities.

Process then sends at connection data and requirements to the core network using the unlicensed wireless network. The connection data and requirements may include the list of cell identities and connection requirements such as channel information channel mode ciphering codes etc. Next process sends at a handover request to the core network using the unlicensed network. Procedures and may be implemented together or concurrently. In some embodiments the handover request message includes the connection data and requirements. In other words the connection data and requirements of operation may be embedded in the handover request message.

Next process receives at the handover confirmation message from the core network via the unlicensed wireless network. The handover confirmation message may include timing information to help synchronize the handover of the current call using unlicensed radio interface over to licensed radio interface. Once the handover confirmation message is received process establishes at a voice connection with the core network using the licensed radio interface and hands over the ongoing call to the licensed wireless communication system. Then process then ends.

One of ordinary skill in the art will recognize that process is a conceptual representation of a handover process. The specific operations of process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also process may not be performed as one continuous series of operations. Furthermore process could be implemented using several sub processes or as part of larger macro process.

When the licensed wireless services are to be used process maintains at the call with the licensed communication network. The process then proceeds to to continue monitor whether the unlicensed services shall be used. On the other hand when the signal strength is above a certain threshold process establishes at an IPSec tunnel with a network controller such as a UNC or GANC . In some embodiments when a call is ongoing the call is handed in to a Wi Fi system only when the UE can automatically connect to the Wi Fi system e.g. without requiring the user to enter a password or to enter a credit card number . Next process registers at with the unlicensed network controller.

Process then requests at from licensed radio interface for a data package that contains data necessary for the hand in. This data package may be referred to as a hand in data package which may include channel information channel mode ciphering codes. In some embodiments process receives either automatically or upon request by the unlicensed wireless client the hand in data packages as a message from the licensed radio interface. Once the hand in data package is received process sends at the hand in data package along with a handover request to the core network over the licensed network.

Next process receives at a handover confirmation message from the core network. Process then establishes at a voice connection with the core network over the unlicensed wireless network using information from the hand in data package. In this manner the transition from the licensed network to the unlicensed network is seamless.

One of ordinary skill in the art will recognize that process is a conceptual representation of a hand in process. The specific operations of process may not be performed in the exact order described or different specific operations may be performed in different embodiments. Also process may not be performed as one continuous series of operations. Furthermore process could be implemented using several sub processes or as part of larger macro process.

Library layer includes native licensed radio interface layer with embedded SIM authentication algorithms for authenticating the U SIM . Library layer also includes RIL switch TCP IP stack a Data Switch or GPRS data switch a GPRS driver and unlicensed radio interface . In some embodiments unlicensed radio interface includes unlicensed RIL unlicensed wireless client unlicensed virtual interface a SIM interface Baseband interface WLAN module and other modules in such as status interface. These entities are described further below by reference to .

System also includes at the radio layer a cellular transceiver and a Wi Fi transceiver . Components that are within dotted area as shown in are non native components. These non native or new components are added to the UE in some embodiments to implement the processes and systems described above.

In some embodiments the unlicensed RIL is eliminated and commands from the native interface are directly passed through the RIL switch to the unlicensed wireless client . In these embodiments the NAS layer of the unlicensed wireless client is configured to recognize the commands from the native interface . In some embodiments non voice data is forwarded to unlicensed virtual interface via a TCP IP stack . Unlicensed virtual interface allows PS or GPRS data to be routed to CN using the unlicensed communication network. shows two TCP IP protocol stacks. TCP IP stack is the native TCP IP stack of the UE . TCP IP stack is a part of unlicensed wireless client which connects the upper layers e.g. NAS and generic access GA layers of unlicensed wireless client protocol stack to the lower layers e.g. IPSec transport and access layers of unlicensed wireless client protocol stack.

When Wi Fi setup application is downloaded and installed on UE one or more communication application programming interfaces APIs are also installed to enable unlicensed wireless client to communicate with various components of UE . In some embodiments the APIs may be part of Wi Fi setup application or unlicensed wireless client . In other embodiments the APIs are separate software entities. In some embodiments the APIs enable unlicensed wireless client to communicate with the following components of UE RIL switch WLAN subsystem audio subsystem storage subsystem U SIM cellular based band user interface i.e. the man machine interface MMI of the UE and data switch . In some embodiments a separate communication API is installed to enable communication between unlicensed wireless client and each of the components described above.

In some embodiments Wi Fi setup application can be downloaded and installed or comes as a pre installed application. Wi Fi setup application may be downloaded via a software upgrade and installed on UE application layer. Alternatively a third party or the OEM may install Wi Fi setup application onto UE prior to releasing it to consumers. In some embodiment Wi Fi setup application includes an interface for interacting with unlicensed wireless client . In addition Wi Fi setup application includes source codes to enable communication between Wi Fi setup application and the RIL switch unlicensed RIL unlicensed virtual interface and RIL daemon configuration.

In some embodiments the communication APIs enable RIL switch to communicate with unlicensed wireless client which requires certain types of services from RIL switch as described below. In some embodiments RIL switch is located above the unlicensed radio interface Layer RIL and an OEM licensed RIL or vendor RIL .

OEM licensed RIL is responsible for proxying commands responses between the MMI handler and the cellular baseband. For instance in some embodiments the OEM licensed RIL converts the commands received from the native interface through the RIL switch into AT commands and sends them to the cellular baseband . In some embodiments OEM licensed RIL is a modified version of the native licensed radio interface layer of the UE that implements the processes and systems described above.

RIL switch is responsible for proxying commands responses between the MMI handler and integrated unlicensed client RIL . Depending on whether Wi Fi and broadband services are available and on the service preference of the user RIL switch may switch between cellular RAT or unlicensed RAT to access the core network based on instructions received from unlicensed wireless client .

One advantage of different embodiments of the present invention disclosed in this specification is that calls received through the licensed and unlicensed wireless paths are treated as calls received from a single line and are processed using the same logic. For instance when a call is already in progress through the unlicensed wireless path and a second call is received the UE handles the second call in a similar way that multiple calls are handled when the UE directly receives calls through the licensed wireless path e.g. by playing a beep to the user indicating an incoming call displaying an indication of the second incoming call to the user or forwarding the call to a recording service . On the other hand prior art dual mode UEs treat the unlicensed wireless path as a second added line. As a result in prior art dual mode UEs a second call received e.g. through the licensed wireless path while a call is in progress through the unlicensed wireless path has to be processed as a call received through a separate line.

In some embodiments the communication APIs enable unlicensed wireless client to communicate with WLAN subsystem of UE . Wireless client requires certain types of services from WLAN subsystem which are described below. In some embodiments WLAN subsystem scans for Wi Fi devices and associates itself with any available access points without any involvement from unlicensed wireless client . In some embodiments WLAN subsystem provides unlicensed wireless client with an indication of Wi Fi coverage only when there is Internet access. WLAN subsystem may also provide unlicensed wireless client with an indication of Wi Fi loss and Wi Fi signal strength e.g. through the interface in the form of a received signal strength indication RSSI message. The signal strength is used in some embodiments to e.g. perform rove in or rove out. For simplicity shows the interfaces between unlicensed wireless client and storage subsystem WLAN subsystem and Wi Fi setup application as user interface persistent storage Wi Fi connection manager interface UI PS WCM I F .

Once WLAN subsystem attaches itself to a specific Wi Fi access point WLAN subsystem of some embodiments provides the following information to unlicensed wireless client IP address of WLAN subsystem the MAC address of the Wi Fi access point and the SSID of the Wi Fi access point. WLAN subsystem may also have built in intelligence to put the Wi Fi into low power state when packets are sent and receive infrequently e.g. once every 5 minutes . Additionally WLAN subsystem may have built in intelligence to control the scan rate of known Wi Fi APs in certain location areas.

In some embodiments the communication APIs also enable unlicensed wireless client to communicate with audio subsystem of UE . As shown the unlicensed wireless client communicates with audio subsystem through audio processing block interface APB I F . Wireless client requires certain types of services from audio subsystem which are described below. In some embodiments audio subsystem of UE includes the ability to access audio frame in either pulse code modulation PCM or adaptive multi rate AMR format coordinate timing for uplink and downlink of audio streams capture and playback audio simultaneously and switch captured audio streams or playback streams between integrated audio device internal speaker and external wireless audio device such as a Bluetooth headset.

The uplink audio path receives audio signals from the microphone and records the audio using the audio recorder . The GAN client cancels the echoes using acoustic echo canceller and encodes the audio using the AMR encoder and RTP encode module . As shown the encoded audio goes through GAN client s TCP IP and IPSec protocol layers. The audio is passed to the Wi Fi network through the TCP IP stack .

The downlink audio path receives the audio signal from the Wi Fi network through the TCP IP stack and the IPSec and TCP IP protocol layers of GAN client . The received signal is decoded by the RTP decode module jitter buffer and AMR decode module . The decoded signal goes through acoustic echo canceller and is played by audio player through one or more speakers .

Referring back to the communication APIs also enable unlicensed wireless client to communicate with U SIM in some embodiment. In some embodiments the communication API includes a SIM access API that enables unlicensed wireless client to have access to the following elementary files EFimsi EFacc EFloci EFepsloci EFkeys EFsms EFsmsp etc. In some embodiments the SIM access API also generates integrity and ciphering keys and provides them to unlicensed wireless client upon request. These keys are then used in the GSM and EAP SIM authentication process. Other keys may also be generated by SIM access API such as confidentiality key integrity key xres and auts values. These keys may be used in the UMTS and EAP AKA authentication process.

In some embodiments the communication APIs also enable unlicensed wireless client to communicate with licensed radio interface or the vendor RIL of UE . In some embodiments the communication API include a baseband control API that enables unlicensed wireless client to detach the cellular baseband NAS from the cellular network before switching to the unlicensed wireless network. To accomplish this task the integrated unlicensed wireless client of some embodiments requests the cellular baseband NAS to deregister from the CS and PS services with the cellular network. Via the baseband control API unlicensed wireless client may request the cellular baseband NAS to become inactive. Conversely unlicensed wireless client may also request the cellular baseband NAS via the baseband control API to become active and search for cellular service. The cellular baseband NAS may then register for CS and PS services with the cellular network. In some embodiment the integrated unlicensed wireless client may query the cellular baseband on its current service state.

In some embodiments the communication APIs also enable unlicensed wireless client to communicate with the MMI of UE . In some embodiment the communication API includes a status interface API that enables unlicensed wireless client to pass GAN specific health status information to the devices MMI for optional display as well as probe the status of the mobile phone services i.e. Call SMS and MMS . In some embodiments the status interface API does not define or restrict how the actual end user MMI is updated which is platform specific and is managed by the MMI handler or other higher layer platform entities. However the status interface API may receive or have access to status data from the MMI handler.

In some embodiments the MMI handler updates the device MMI upon an indication of the GAN connection unlicensed connection status from unlicensed wireless client . The device MMI handler may map and pass to the device MMI the current unlicensed or GAN mode GAN Service Zone Indicator GAN Service Zone Name and Location Status upon indication from unlicensed wireless client when GAN becomes the active RAT. The device MMI handler may also update the device MMI to turn the unlicensed mode display off upon indication from unlicensed wireless client when cellular becomes the active RAT. Upon an error indication from unlicensed wireless client the device MMI handler may map and pass the error indication to the device MMI. Additionally the MMI handler may provide the status of the mobile phone services i.e. Call SMS and MMS .

In some embodiments the communication APIs also enable unlicensed wireless client to communicate with storage subsystem . In some embodiments the communication API includes a storage interface that enables unlicensed wireless client to read the latest unlicensed serving server information e.g. the IP address of the network upon power on. In this manner the application does not need to relearn the serving server at each power cycle. Additionally load on the unlicensed servers may also be reduced.

A shown in UE includes a data switch which is a three way switch that routes data received from applications to either cellular baseband to Wi Fi i.e. unlicensed service through the native WALN subsystem of the UE or to Wi Fi through the unlicensed virtual interface . The unlicensed virtual interface also converts the packets from the IP stack to packets with format compatible with the unlicensed client. The unlicensed virtual interface also converts responses from the unlicensed client into format expected by the application MMI handler. In some embodiments each of the foregoing interfaces is a software based interface installed during the installation process of Wi Fi setup application .

In some embodiments data switch bypasses unlicensed virtual interface when routing data traffic between WLAN subsystem and applications e.g. web browser online games etc. of UE . For example gaming and web browsing applications go through the native WLAN subsystem of the UE. However certain application activities do require going through the unlicensed wireless client and the unlicensed virtual interface . For instance one of the applications may require data to be replicated as cellular GPRS data in order to request usage statistics account information etc. from core network .

In some embodiments voice received through audio devices is converted to audio frames and passed through audio subsystem and APB I F to unlicensed wireless client . Packets related to voice are then passed through TCP IP stack to data switch . Data switch then passes e.g. based on the way the packets are addressed by unlicensed wireless client the packets to WLAN subsystem which passes them to the Wi Fi system .

In some embodiments TCP IP stack receives data from applications . TCP IP stack passes the data to data switch which in turn sends the data to unlicensed wireless client through unlicensed virtual interface . Unlicensed wireless client processes the data and sends data packets to data switch through TCP IP stack . Data switch then passes e.g. based on the way the packets are addressed by unlicensed wireless client the packets to WLAN subsystem which passes them to the Wi Fi system .

As shown in unlicensed wireless client includes various application stacks such as NAS generic access GA such as GA RC GA CSR GA PSR TCP IP IPSec transport and access protocol layers. Similar to system unlicensed wireless client communicates with Wi Fi setup application via a JNI interface. In some embodiments the UE includes a RIL daemon driver to make the native applications modules compatible with new modules interfaces provided herein. It should be noted that UEs made by different OEMs might use different RIL daemon drivers. These RIL daemon drivers are modified in some embodiments e.g. to connect the native interface to RIL switch instead of directly connecting native interface to vendor RIL .

Next process creates at an API that enables unlicensed wireless client to communicate with U SIM . This interface allows unlicensed wireless client to retrieve various EFs data from the SIM installed in UE . Process then creates at an API that enables unlicensed wireless client to communicate with licensed radio interface or vendor RIL . This for example allows unlicensed wireless client to request licensed radio interface to deregister from the CS and PS services with the cellular network.

Process then creates at an API that enables unlicensed wireless client to communicate with the MMI or user interface of native applications of UE . In this manner unlicensed wireless client may graphically update the signal strength of Wi Fi connection using the interface for example.

Process then creates at an API that enables unlicensed wireless client to communicate with storage subsystem . In this manner unlicensed wireless client can retrieve the latest unlicensed serving server information upon power on for example. Next process creates at an API that enables unlicensed wireless client to communicate with RIL switch . Process then creates at an API that enables unlicensed wireless client to communicate with data switch .

Process then stores at the created APIs and software modules on a computer readable storage medium. As mentioned above in some embodiments the computer readable storage medium is a distributable CD ROM. In some embodiments the medium is one or more of a solid state device a hard disk a CD ROM or other non volatile computer readable storage medium.

One or more of the above described methods are implemented as software processes that are specified as a set of instructions recorded on a computer readable storage medium also referred to as computer readable medium . When these instructions are executed by one or more computational elements or processing units such as processors or other computational elements like ASICs and FPGAs they cause the computational element s to perform the actions indicated in the instructions. Computer can include any electronic device with a processor. Examples of computer readable media include but are not limited to CD ROMs flash drives RAM chips hard drives EPROMs etc. The computer readable media does not include carrier waves and electronic signals passing wirelessly or over wired connections.

In this specification the term software includes firmware residing in read only memory or applications stored in magnetic storage which can be read into memory for processing by a processor. Also in some embodiments multiple software inventions can be implemented as sub parts of a larger program while remaining distinct software inventions. In some embodiments multiple software inventions can also be implemented as separate programs. Finally any combination of separate programs that together implement a software invention described here is within the scope of the invention. In some embodiments the software programs when installed to operate on one or more computer systems define one or more specific machine implementations that execute and perform the operations of the software programs.

The bus collectively represents all system peripheral and chipset buses that support communication among internal devices of the computer system . For instance the bus communicatively connects the processor with the read only memory the system memory and the permanent storage device .

From these various memory units the processor retrieves instructions to execute and data to process in order to execute the processes of the invention. In some embodiments the processor comprises a Field Programmable Gate Array FPGA an ASIC or various other electronic components for executing instructions. The read only memory ROM stores static data and instructions that are needed by the processor and other modules of the computer system. The permanent storage device on the other hand is a read and write memory device. This device is a non volatile memory unit that stores instruction and data even when the computer system is off. Some embodiments of the invention use a mass storage device such as a magnetic or optical disk and its corresponding disk drive as the permanent storage device . Some embodiments use one or more removable storage devices flash memory card or memory stick as the permanent storage device.

Like the permanent storage device the system memory is a read and write memory device. However unlike storage device the system memory is a volatile read and write memory such as a random access memory. The system memory stores some of the instructions and data that the processor needs at runtime.

Instructions and or data needed to perform processes of some embodiments are stored in the system memory the permanent storage device the read only memory or any combination of the three. For example the various memory units include instructions for processing multimedia items in accordance with some embodiments. From these various memory units the processor retrieves instructions to execute and data to process in order to execute the processes of some embodiments.

The bus also connects to the input and output devices and . The input devices enable the user to communicate information and select commands to the computer system. The input devices include alphanumeric keyboards and cursor controllers. The output devices display images generated by the computer system. The output devices include printers and display devices such as liquid crystal displays LCD or light emitting diodes LED displays. Finally as shown in bus also couples computer to a network through a network adapter not shown . In this manner the computer can be a part of a network of computers such as a local area network LAN a wide area network WAN or an Intranet or a network of networks such as the Internet .

Any or all of the components of computer system may be used in conjunction with the invention. However one of ordinary skill in the art will appreciate that any other system configuration may also be used in conjunction with the invention or components of the invention.

Some embodiments include electronic components such as microprocessors storage and memory that store computer program instructions in a machine readable or computer readable medium alternatively referred to as computer readable storage media machine readable media or machine readable storage media . Some examples of such computer readable media include RAM ROM read only compact discs CD ROM recordable compact discs CD R rewritable compact discs CD RW read only digital versatile discs e.g. DVD ROM dual layer DVD ROM a variety of recordable rewritable DVDs e.g. DVD RAM DVD RW DVD RW etc. flash memory e.g. SD cards mini SD cards micro SD cards etc. magnetic and or solid state hard drives read only and recordable Blu ray discs ultra density optical discs any other optical or magnetic media and floppy disks. The computer readable media may store a computer program that is executable by at least one processor and includes sets of instructions for performing various operations. Examples of hardware devices configured to store and execute sets of instructions include but are not limited to application specific integrated circuits ASICs field programmable gate arrays FPGA programmable logic devices PLDs ROM and RAM devices. Examples of computer programs or computer code include machine code such as produced by a compiler and files including higher level code that are executed by a computer an electronic component or a microprocessor using an interpreter.

As used in this specification and any claims of this application the terms computer server processor and memory all refer to electronic or other technological devices. These terms exclude people or groups of people. For the purposes of the specification the terms display or displaying means displaying on an electronic device. As used in this specification and any claims of this application the terms computer readable medium and computer readable media are entirely restricted to tangible physical objects that store information in a form that is readable by a computer. These terms exclude any wireless signals wired download signals and any other ephemeral signals.

In some embodiments some or all of the above described features are provided through one or more application programming interfaces APIs . An API is an interface of a particular application that allows other applications to interact with the particular application or a part of the particular application. The particular application can be an operating system of a device a framework that is a part of the operating system or runs on top of the operating system or any other type of application that runs on the device. As known in the art an application is a set of instructions that is executable to achieve one or more functions.

APIs are implemented differently in different embodiments. For instance in some embodiments an API is defined in terms of names of routines to call and or objects to use by the other applications. For some or all of such names an API can also be defined in terms of the parameters to send to and receive from such routines and or objects. By using these names and parameters a client application can access a particular application s functionality without requiring this functionality to be implemented within the client application and without requiring any further interoperability with the particular application.

Licensed RAN antenna subs system and licensed RAN interface logic are employed to facilitate conventional licensed RAN operations. For example in some embodiments the licensed RAN comprises a GSM network and thus these components facilitate normal GSM network operations typically employed by GSM based cellular devices e.g. one or more BTSs and the like. In other embodiments licensed RAN comprises a UTRAN network and thus these components facilitate normal UTRAN network operations typically employed by UTRAN based cellular devices e.g. one or more Node Bs and the like. Meanwhile the unlicensed RAN antenna system and WLAN interface logic are used to support an unlicensed wireless channel i.e. link with an access point via which unlicensed wireless services may be accessed. In general these blocks represent components and logic employed to support communications over an unlicensed wireless link. For example these components are illustrative of components that may be employed to implement the IEEE 802.11 lower layers for an 802.11 link or Bluetooth lower layers for a Bluetooth link. The unlicensed interface logic e.g. a Up interface logic depending on the protocol used between the UE and the unlicensed system is used to provide the UE side Up interface functions and operations described herein. This includes generating and processing various messages as well as providing the various UP interface layers depicted described herein.

As shown client applications and access functionality provided by application through API . Once called through its API the application can perform one or more actions such as 1 performing an operation and returning a value 2 directing another application to perform an operation 3 accessing data storage 4 directing a peripheral device to perform an operation 5 communicating with another application or device through a particular protocol etc.

An API call can also be made to an application from a remote client application. illustrates an example of such a remote call. Specifically it illustrates an API call that is made to the application from the client application on the remote device through the network .

While the invention has been described with reference to numerous specific details one of ordinary skill in the art will recognize that the invention can be embodied in other specific forms without departing from the spirit of the invention. Thus one of ordinary skill in the art would understand that the invention is not to be limited by the foregoing illustrative details but rather is to be defined by the appended claims.

