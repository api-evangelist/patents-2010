---

title: Tiered storage interface
abstract: The cloud storage services are extended with a cloud storage service access protocol that enables users to specify a desired storage tier for each data stream. In response to receiving storage tier specifiers via the protocol, the cloud storage service performs storage operations to identify target storage devices having attributes matching those associated with the requested storage tier. The cloud storage service stores a data stream from the storage client in the identified target storage device associated with the desired storage tier. Storage tiers can be defined based on criteria including capacity costs; access latency; availability; activation state; bandwidth and/or transfer rates; and data replication. The cloud storage service protocol allows data streams to be transferred between storage tiers, storage devices to be activated or deactivated, and data streams to be prefetched and cached. The cloud storage services may charge storage clients based on storage tier use and associated operations.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08719362&OS=08719362&RS=08719362
owner: Riverbed Technology, Inc.
number: 08719362
owner_city: San Francisco
owner_country: US
publication_date: 20100909
---
The present invention relates generally to data storage systems and systems and methods to improve storage efficiency compactness performance reliability and compatibility. In general data storage systems receive and store all or portions of arbitrary sets or streams of data. Data storage systems also retrieve all or portions of arbitrary sets or streams of data. A data storage system provides data storage and retrieval to one or more storage clients such as user and server computers. Stored data may be referenced by unique identifiers and or addresses or indices. In some implementations the data storage system uses a file system to organize data streams into files. Files may be identified and accessed by a file system path which may include a file name and one or more hierarchical file system directories. In other embodiments data streams may be arbitrary sets of data that are not associated with any type of file system or other hierarchy.

Many data storage systems are tasked with handling enormous amounts of data. Additionally data storage systems often provide data access to large numbers of simultaneous users and software applications. Users and software applications may access the file system via local communications connections such as a high speed data bus within a single computer local area network connections such as an Ethernet networking or storage area network SAN connection and wide area network connections such as the Internet cellular data networks and other low bandwidth high latency data communications networks.

Cloud storage services are one type of data storage available via a wide area network. Cloud storage services provide storage to users in the form of a virtualized storage device available via a wide area network such as the Internet or a private WAN. In general users access cloud storage services to store and retrieve data using web services protocols such as REST SOAP or XML RPC. Cloud storage service providers manage the operation and maintenance of the physical data storage devices therefore users of cloud storage services can avoid the initial and ongoing costs associated with buying and maintaining storage devices. Users of cloud storage services also avoid the administrative complexity arising from configuring managing and maintaining their own data storage systems. Cloud storage services typically charge users for consumption of storage resources such as storage space and or transfer bandwidth on a marginal or subscription basis with little or no upfront costs. In addition to the cost and administrative advantages cloud storage services often provide dynamically scalable capacity to meet its users changing needs. However previous cloud storage services provide limited storage options for users.

An embodiment of the invention extends the utility of cloud storage services by allowing users to specify a desired storage tier for each data stream stored by the cloud storage service. A cloud storage service access protocol enable users to include one or more specifiers of a desired storage tier for a data stream. In response to receiving one or more storage tier specifiers from a storage client the cloud storage service performs one or more storage operations to identify at least one target storage device having attributes matching those associated with the requested storage tier. The cloud storage service then stores a data stream from the storage client in the identified target storage device associated with the desired storage tier. In a further embodiment if a storage client does not specify a desired storage tier for a specific data stream the cloud storage service may assign the data stream to a default storage tier previously specified by the storage client.

Embodiments of the invention may use a variety of criteria to define different storage tiers including the cost per unit of capacity of the storage devices latency in accessing storage devices the availability of typical uptime of storage devices the activation state of storage devices the bandwidth or transfer rate from and or to the storage devices and the degree and frequency of replication of the data storage at two or more different cloud storage service data centers.

In a further embodiment a storage client may also use the cloud storage service access protocol to move a data stream to a different storage tier. In association with this embodiment the cloud storage service access protocol may include functions to enable storage clients to identify the storage tiers associated with previously stored data streams.

In another embodiment storage clients may use the cloud storage service access protocol to specify an activation state of storage devices including a data stream. Deactivated storage devices reduce storage costs and activated storage devices are ready to provide data access to a storage client.

In still another embodiment an optional local storage tier includes storage devices at the same network location as the storage client. The cloud storage service protocol enables storage clients to request all or a portion of a data stream to be prefetched from the cloud storage service and cached in the local storage tier for rapid access by storage clients.

Embodiments of the invention enable cloud storage services to charge storage clients for storage usage based on storage tiers and associated operations such as transferring data between storage tiers activating storage devices and or prefetching and caching data in a local storage tier.

User network location may include a local area network LAN for facilitating communications between storage clients and cloud storage services. In a further embodiment user network location may include a storage area network instead of or in addition to the local area network . The local area network is connected with a wide area network WAN such as the internet or a private wide area network. Other network devices such as gateways firewalls and routers may be used to connect the local area network with wide area network .

Also connected with the wide area network is one or more cloud storage services. Each cloud storage service is implemented at one or more cloud storage service data centers such as cloud storage service data center . Cloud storage service data center includes a cloud storage service interface and two or more storage tiers each of which includes at least one data storage system . Cloud storage service interface receives data read and write requests using cloud storage protocols for example based on web services protocols such as XML RPC SOAP or REST and performs corresponding storage operations with the data storage devices . Cloud storage service interface may be connected with the data storage devices via local area networks and or storage area networks . Cloud storage service interface may access data storage devices using file system protocols such as CIFS or NFS and or block based storage protocols such as iSCSI or iFCP.

In a further embodiment storage clients can include a cloud storage interface device . Cloud storage interface device enables computers and other devices at the user network location to communicate with cloud storage services as if the service was a local storage device. In this embodiment cloud storage interface device presents computers or other devices one or more virtual storage devices. The cloud storage interface device may provide virtual storage devices using a file system protocol such as CIFS or NFS a block based storage protocols such as iSCSI or iFCP and or any other type of standard or proprietary storage device protocol. In a yet a further embodiment cloud storage interface device may optionally include a local storage tier including a local data storage device

As discussed above the cloud storage service includes two or more storage tiers . In an embodiment each of the storage tiers represents one or more storage devices having a specific set of storage performance attributes. For example the cloud storage service may include a low performance storage tier a medium performance storage tier and a high performance storage tier. In this example the low performance storage tier may include low speed or offline storage devices such removable tape and optical storage drives. The latency and transfer speed when accessing data storage devices in this tier may be slow. To compensate for this a cloud storage service may provide the low performance storage tier to users at a reduced cost. Similarly the medium performance storage tier may include higher speed storage devices such as hard drives or hard drive arrays. The high performance storage tier may include very high speed storage devices such as RAM and volatile memory storage and solid state storage devices. The cloud storage service in this example may charge substantially more to store and access data in the medium and high performance storage tiers.

A variety of criteria may be used to define different storage tiers including the cost per unit of capacity of the storage devices latency in accessing storage devices the availability of typical uptime of storage devices the bandwidth or transfer rate from and or to the storage devices and the degree and frequency of replication of the data storage at two or more different cloud storage service data centers.

Each of the data storage devices is associated with one or more of the storage tiers based on the attributes of the data storage devices. In one embodiment each of the storage devices is associated with only a single storage tier. For example storage devices with low availability and or high access latency may be associated with a low performance storage tier. In another embodiment a storage device may be associated with more than one storage tier. For example a high speed storage device with low availability may be associated with a high speed storage tier and a low availability storage tier. In embodiments of the invention cloud storage service providers may associate their storage devices with any arbitrary number and combination of storage tiers based on any type or combination of criteria and or network and storage device attributes.

An embodiment of the invention extends the utility of cloud storage services by allowing users to specify a desired storage tier for each data stream stored by the cloud storage service. In one implementation the cloud storage service access protocol for example using XML RPC SOAP or REST is extended to enable users to include one or more specifiers of a desired storage tier for a data stream. For example a storage client may indicate the desired storage tier for the data stream by including a specifier with its messages to the cloud storage system to initialize a new data stream. In response to receiving one or more of these specifiers from a storage client via the cloud storage service access protocol the cloud storage service interface performs one or more storage operations to identify a target storage device having attributes matching those associated with the requested storage tier. Upon receiving the data stream from the storage client via one or more messages using the cloud storage service access protocol the cloud storage service interface performs one or more storage operations to store the received data stream in the identified storage device in the desired storage tier.

In a further embodiment if a storage client does not specify a desired storage tier for a specific data stream the cloud storage service may assign the data stream to a default storage tier previously specified by the storage client. A storage client may specify the default storage tier to the cloud storage service in advance of transferring any data streams there.

In an embodiment a storage client may also use the cloud storage service access protocol to move a data stream to a different storage tier. In this embodiment a storage client may send one or more messages via the cloud storage service access protocol to indicate to the cloud storage service that one or more data streams specified by the storage client should be transferred to a different storage tier. In response to receiving one or more of these types of requests from a storage client via the cloud storage service access protocol the cloud storage service interface performs one or more storage operations to identify a target storage device having attributes matching those associated with the requested storage tier and to transfer the data stream from its current location to the identified storage device in the desired storage tier. In association with this embodiment the cloud storage service access protocol may include functions to enable storage clients to identify the storage tiers associated with previously stored data streams.

Some types of data storage devices may be placed in a deactivated state to reduce power consumption and wear or an activated state to facilitate data access. In an embodiment storage clients may use the cloud storage service access protocol to specify an activation state of storage devices including a data stream thereby reducing storage costs for deactivated storage devices or indicating that one or more data streams should be prepared by the cloud storage service for access by the storage client. For example a storage client may store a data stream in a low performance storage tier of a cloud storage service. In this storage tier the cloud storage service deactivates the storage devices and or takes data offline to reduce storage costs. For example the cloud storage service may spin down hard drives when not in use or remove tapes or optical media from their respective storage devices. Upon receiving a request to prepare a data stream for access via the cloud storage service access protocol the cloud storage service interface identifies one or more storage devices and or storage media required to access the desired data stream. The cloud storage service interface then performs any operations necessary to activate and prepare these storage devices for access such as spinning up hard drives or loading removable storage media into a storage device.

As described above a cloud storage interface device may optionally include a local storage tier that includes one or more local storage devices . In a further embodiment the cloud storage interface device may prefetch and cache all or a portion of a requested data stream from the cloud storage service to improve the performance of future accesses of this data by a user or application. A data stream may selected for prefetching and transferred to the local storage device using the cloud storage service access protocol. In this embodiment one or more cloud storage service access protocol messages from a user application storage client and or the cloud storage interface device itself to the cloud storage service may include a request to prefetch one or more data streams. In response to these messages the cloud storage service interface identifies the data storage including the requested data streams and performs one or more storage operations to transfer the data streams to the cloud storage interface device for storage in local storage device

In embodiments of the invention the tiered cloud storage service may charge storage customers based on the functions provided by the cloud storage service access protocols. For example a cloud storage service may charge storage customers different rates depending on the storage tier selected for a data stream. In another example a cloud storage service may charge storage customers for transferring a data stream from one storage tier to another storage tier. In still another example a cloud storage service may charge storage customers for activating and or deactivating storage devices for the amount of data that is on the activated storage device and or for the time duration that the storage devices are active. In yet another example a cloud storage service may charge storage customers for prefetching and caching data streams on a local storage device associated with the cloud storage service interface device for the amount of data that is prefetched and or cached and or for the time duration that the storage devices are active.

Computer system includes a central processing unit CPU for running software applications and optionally an operating system. CPU may be comprised of one or more processing cores. Memory stores applications and data for use by the CPU . Examples of memory include dynamic and static random access memory. Storage provides non volatile storage for applications and data and may include fixed or removable hard disk drives flash memory devices ROM memory and CD ROM DVD ROM Blu ray HD DVD or other magnetic optical or solid state storage devices.

In a further embodiment CPU may execute virtual machine software applications to create one or more virtual processors capable of executing additional software applications and optional additional operating systems. Virtual machine applications can include interpreters recompilers and just in time compilers to assist in executing software applications within virtual machines. Additionally one or more CPUs or associated processing cores can include virtualization specific hardware such as additional register sets memory address manipulation hardware additional virtualization specific processor instructions and virtual machine state maintenance and migration hardware.

Optional user input devices communicate user inputs from one or more users to the computer system examples of which may include keyboards mice joysticks digitizer tablets touch pads touch screens still or video cameras and or microphones. In an embodiment user input devices may be omitted and computer system may present a user interface to a user over a network for example using a web page or network management protocol and network management software applications.

Computer system includes one or more network interfaces that allow computer system to communicate with other computer systems via an electronic communications network and may include wired or wireless communication over local area networks and wide area networks such as the Internet. Computer system may support a variety of networking protocols at one or more levels of abstraction. For example computer system may support networking protocols at one or more layers of the seven layer OSI network model. An embodiment of network interface includes one or more wireless network interfaces adapted to communicate with wireless clients and with other wireless networking devices using radio waves for example using the 802.11 family of protocols such as 802.11a 802.11b 802.11g and 802.11n.

An embodiment of the computer system may also include one or more wired networking interfaces such as one or more Ethernet connections to communicate with other networking devices via local or wide area networks.

The components of computer system including CPU memory data storage user input devices and network interface are connected via one or more data buses . Additionally some or all of the components of computer system including CPU memory data storage user input devices and network interface may be integrated together into one or more integrated circuits or integrated circuit packages. Furthermore some or all of the components of computer system may be implemented as application specific integrated circuits ASICS and or programmable logic.

Further embodiments can be envisioned to one of ordinary skill in the art. In other embodiments combinations or sub combinations of the above disclosed invention can be advantageously made. The block diagrams of the architecture and flow charts are grouped for ease of understanding. However it should be understood that combinations of blocks additions of new blocks re arrangement of blocks and the like are contemplated in alternative embodiments of the present invention.

The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. It will however be evident that various modifications and changes may be made thereunto without departing from the broader spirit and scope of the invention as set forth in the claims.

