---

title: Resource search operations
abstract: Methods, systems, and apparatus, including computer programs encoded on a computer storage medium, for identifying query-relevant content in a resource identified by a search result in response to the query. In one aspect, a method includes identifying resource search tidbits for a resource, each resource search tidbit being eligible for a resource search operation for the resource. The resource search tidbits are provided with search results to a client device. In response to a user selecting a resource identified by a search result, the client device identifies text in the resource matching the query-relevant text of the resource search tidbit and performs a resource search operation on the resource if the identified text meets a search operation threshold condition.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08392449&OS=08392449&RS=08392449
owner: Google Inc.
number: 08392449
owner_city: Mountain View
owner_country: US
publication_date: 20100720
---
This application claims priority under 35 USC 119 e to U.S. patent application Ser. No. 61 267 681 filed on Dec. 8 2009 the entire disclosure of which is hereby incorporated by reference.

This specification relates to digital information retrieval and particularly to processing search results to facilitate search operations.

The Internet provides access to a wide variety of resources for example video files image files audio files or Web pages including content for particular subjects book articles or news articles. A search system can select one or more resources in response to receiving a search query. A search query is data that a user submits to a search engine to satisfy the user s informational needs. The search system selects and scores resources based on their relevance to the search query and on their importance relative to other resources to provide search results that link to the selected resources. The search results are typically ordered according to the scores and provided in a search results page.

The search results page displays a list of search results and each search result includes several lines of text a snippet that are intended to show how the page is relevant to the query. When a user clicks on a search result the user s client device requests the resource typically a web page that the search result references. When the page is received at the client device however the user may have to manually search the page to find the relevant content even if the snippet included the exact content they want. The users often must either scroll through the page to find the relevant content or perform a manual word search operation by use of a browser word search tool.

In general one innovative aspect of the subject matter described in this specification can be embodied in methods that include the actions of receiving a query the query including one or more query terms receiving for each of a plurality of resources identified as being relevant to the query one or more tidbits each tidbit being query relevant text extracted from the resource for each tidbit extracted from each resource determining whether the tidbit is eligible for a resource search operation that occurs in response to the resource being rendered on a client device and in response to determining that the tidbit is eligible for a resource search operation marking the tidbit as being a resource search tidbit and providing for each of the plurality of resources a corresponding search result responsive to the query each search result including a resource locator that specifies the location of the resource and wherein at least one search result includes a resource search tidbit. Other embodiments of this aspect include corresponding systems apparatus and computer programs configured to perform the actions of the methods encoded on computer storage devices.

Another aspect of the subject matter described in this specification can be embodied in methods that include the actions of receiving in response to a query including one or more query terms a search results page including search results responsive to the query each search result including a resource locator that specifies the location of a resource identified as being relevant to the query and wherein at least one search result includes a resource search tidbit the resource search tidbit being query relevant text extracted from the resource and eligible for a research search operation in response to the resource specified by the resource locator of the at least one search result being rendered on the client device receiving a selection of the at least one search result at the client device receiving in response to the selection the resource specified by the resource locator of the at least one search result rendering the resource at the client device identifying a portion of text in the resource that matches the query relevant text of the resource search tidbit and performing the resource search operation only if the identified portion of the text matching the query relevant text of the resource search tidbit meets a search operation threshold condition. Other embodiments of this aspect include corresponding systems apparatus and computer programs configured to perform the actions of the methods encoded on computer storage devices.

The details of one or more embodiments of the subject matter described in this specification are set forth in the accompanying drawings and the description below. Other features aspects and advantages of the subject matter will become apparent from the description the drawings and the claims.

A Website is one or more resources associated with a domain name and hosted by one or more servers. An example Website is a collection of Web pages formatted in hypertext markup language HTML that can contain text images multimedia content and programming elements e.g. scripts. Each Website is maintained by a publisher e.g. an entity that manages and or owns the Website.

A resource is any data that can be provided by a Website over the network and that is associated with a resource address. Resources include HTML pages word processing documents and portable document format PDF documents images video and feed sources to name just a few. The resources can include content e.g. words phrases images and sounds and may include embedded information e.g. meta information and hyperlinks and or embedded instructions e.g. JavaScript scripts .

A client device is an electronic device that is under control of a user and is capable of requesting and receiving resources over the network . Example client devices include personal computers mobile communication devices and other devices that can send and receive data over the network . A client device typically includes a user application e.g. a web browser to facilitate the sending and receiving of data over the network .

To facilitate searching of resources the search system identifies the resources by crawling and indexing the resources provided on Websites . Data about the resources can be indexed based on the resource to which the data corresponds. The indexed and optionally cached copies of the resources are stored in an indexed cache .

The client devices submit search queries to the search system . For instance any particular search query can include one or more terms consisting of words numbers or other characters. As an example the search query entered by the user can be pachinko 1975 Japan to search online for information regarding the Japanese upright pinball games. In response the search system accesses e.g. using a search engine the indexed cache to identify resources that are relevant to the search query . The search system identifies the resources generates search results that identify the resources and returns the search results to the client devices . For example the search results can include resources corresponding to Web hits related to 1975 Japanese pachinkos in response to the user s search query . A search result is data generated by the search system that identifies a resource that is responsive to a particular search query and includes a link to the resource . An example search result can include a Web page title a snippet of text or a portion of an image extracted from the Web page and the URL of the Web page.

For a search of textual content the search results are ranked based on scores related to the resources identified by the search results such as information retrieval IR scores and optionally a quality score of each resource relative to other resources. In some implementations the IR scores are computed from dot products of feature vectors corresponding to a search query and a resource and the ranking of the search results is based on initial relevance scores that are a combination of the IR scores and page quality scores. The search results are ordered according to these initial relevance scores and provided to the client device according to the order.

The client devices receive the search results e.g. in the form of one or more search result pages and render the search results for presentation to users. In response to the user selecting a link in a search result at a client device the client device requests the resource identified by the link. The Website hosting the resource receives the request for the resource from the client device and provides the resource to the requesting client device .

The search results include the identification of resources that are relevant to the user s search such as a set of query terms entered by the user into a Web browser on the client device . When the resources are identified as relevant to the user s search the search system identifies one or more tidbits and selects a subset of the tidbits for potential inclusion as a snippet. As used herein a tidbit is query relevant text that can be included in a snippet. A snippet can include one or more tidbits. Each snippet can include query relevant text extracted from the resource specified by the resource locator e.g. the resource s URL of the search result. Snippets can be rendered on the client device as part of the search result. In some implementations a tidbit is a portion of contiguous text in the resource such as a group of adjacent words in the search result displayed on the user s client device . The search results can also include one or more snippets each including one or more tidbits.

The search system can provide the query the resources or data identifying the resources and the tidbits for each of the resources to a tidbit processor . The tidbit processor which is described in more detail in determines for each tidbit whether the tidbit is eligible for a resource search operation that occurs in response to the resource being rendered on a client device . In response to determining that a particular tidbit is eligible for a resource search operation the tidbit processor marks the tidbit as a resource search tidbit RST . The use of resource search tidbits is described in more detail below. For each resource the tidbit processor informs the search system of the identified resource search tidbits if any.

Once a search results page is presented to the user displaying the search results the user can make a selection. For example the user can review the search results including examining the snippets displayed for each resource corresponding to each individual search result . Upon seeing a particular search result of interest for example the user can click the URL or other resource locator for the resource to display a page corresponding to the resource . The page can be for example the rendered resource corresponding to the news story product review home page advertisement or any other Web page selected by the user from the search results . If the information on the page is textual for example and does not fit entirely within the viewport of the client device one or more scroll bars within the user interface of the client device can be used to manage the display of the page . Upon initial navigation to a page because the first few or top paragraphs or sections of the Web site s information are displayed the scroll bar is scrolled to the top.

Sections of the Web site of most interest to the user e.g. the Web content portions that correspond to query relevant tidbits may not appear in the top or immediately viewable portion of the Web page. In other words the information does not fit entirely within the viewport of the client device or is difficult for the user to find on the screen.

To provide more convenient and faster access to the sections of interest a selection environment is displayed. The selection environment displays resource search tidbits for the resource each containing a portion of the query relevant text of the resource. For example the selection environment can include one or more resource search tidbits corresponding to text in the resource that matches the user s search terms e.g. pachinko 1975 Japan . The sections of text of most closely matching the user s search terms may be embedded in a portion of the resource that is not initially displayed on the client device . Using the selection environment the user can quickly identify and navigate to those corresponding passages of the resource . For example as depicted in the selection environment includes three user selectable lines each a resource search tidbit the second of which is highlighted to indicate selection by the user.

One advantage of the selection environment is to overcome the problem of limited viewports such as the viewport on the client device . Depending on the web page being displayed and the client device the resource may not be visible to a user of the device because the resource contains too much information to fit entirely within the device s viewport. For example because of the zoom level of the viewport e.g. the viewport is zoomed in the size of the viewport and or the dimensions of the web page not all of the web page s contents can be displayed in the viewport at the same time. For mobile devices displaying a web page such a scenario is a common occurrence because of the mobile device s relatively small viewport.

The query relevant text of a resource search tidbit included in the search result can be in some implementations a subset of the query relevant text of the snippet included in the search result. In some implementations the resource search tidbits are tidbits that need not necessarily be part of the snippet of the search result meaning that they are not rendered on the client device as part of the search results .

Upon selection of a particular resource search tidbit e.g. the second of three from the selection environment the state of information displayed in the page can change as indicated by the arrow . In the newly displayed state of the page the resource has scrolled to the section of page that corresponds to the resource search tidbit selected by the user. Moreover the query relevant text associated with the user selected resource search tidbit is shown highlighted e.g. highlighted in by using a box around the text . For example while the resource may describe Japan in general the query relevant text that is of interest to the user can be embedded much further down in the document and made more easily locatable using the user selectable resource search tidbits that are included in the selection environment .

Highlighting of query relevant text can be accomplished using colored highlighting behind the text. In some implementations highlighting can be accomplished by bolding the text using a different font family using a different text color or by various combinations thereof.

The tidbit processor receives as input the query a resource URL for each resource identified as being relevant to the query one or more tidbits e.g. tidbitthrough tidbit extracted that the search system has identified as including query relevant text and a resource identified by the URL and from which the tidbits are extracted. Depending on these inputs and relationships among them e.g. comparisons of tidbits with terms in the URL query terms within the query and portions of titles within the resource the tidbit processor can identify resource search tidbits RSTs in addition to the URLs provided to the client device for rendering the resources.

The query can include the one or more user defined query terms such as words numbers etc. that are input into the search query field of a Web browser executing on the user s client device . In some implementations the search system can generate one or more tidbits that correspond to each resource identified as being responsive to the query . Based on the other inputs it receives the tidbit processor can reduce the list of candidate tidbits to just those tidbits that are appropriate for use as resource search tidbits RSTs . For example while several e.g. several dozen tidbits related to 1975 Japanese pachinkos can be identified by the search system in response to the query pachinko 1975 Japan and provided to the tidbit processor only a handful e.g. one to ten may ultimately end up being used to generate resource search tidbits RSTs . Specifically the candidate tidbits not used for resource search tidbits RSTs can be those eliminated from consideration e.g. using eligibility rules by the tidbit processor when comparing the tidbits to the query the URL and the resource .

In some implementations rules can also be based on the use of word variants synonyms or edit distances. For example word variants or words based on word stems such as features and featured can trigger a match condition. Synonym matching when used in tidbit eligibility rules can include synonym pairs such as Eisenhower and Ike Bill Clinton and President Clinton or green and environmental. In some implementations synonym matching can depend on the context e.g. other text in the resource such as to avoid false matches for example of the color green versus the green environmental movement. Edit distances can measure for example the relative number of individual character edits required to change Word A into Word B and in a sense can be similar to word stemming.

Referring to Venn diagram illustrates the use of an example eligibility rule that results in the selection of a resource search tidbit RST . In this example a resource region within the Venn diagram includes query terms and meaning that the query terms and are included in the one or more features represented by the region e.g. the resource s title URL or both. A tidbitregion includes query terms and meaning that the query terms and are included in the tidbit. The overlap of the regions and is indicated by the intersection that includes the query term that occurs both in the resource feature s e.g. the title and or URL and in the tidbit. In this example because at least one query term e.g. the query term is not included in the resource the tidbit is deemed eligible for being a resource search tidbit e.g. the RST .

Referring to Venn diagram illustrates the use of an example eligibility rule that results in the selection of a resource search tidbit RST . In this example a resource region within the Venn diagram includes query terms and meaning that the query terms and are included in the one or more features represented by the region e.g. the resource s title URL or both. A tidbitregion includes query term meaning that the query term is included in the tidbit. The overlap of the regions and is the region itself as query terms and occur both in the resource feature s e.g. the resource s title and or URL and in the tidbit. In this example because at least one query term e.g. the query term is not included in the resource the tidbit is deemed eligible for being a resource search tidbit e.g. the RST .

Referring to Venn diagram illustrates the use of an example eligibility rule that results in not selecting a resource search tidbit RST . In this example a resource region within the Venn diagram includes query terms and meaning that the query terms and are included in the features represented by the region e.g. the resource s title URL or both. A tidbitregion includes query terms and meaning that the query terms and are included in the tidbit. The overlap of the regions and is the region itself as query terms and occur both in the resource feature s e.g. the title and or URL and in the tidbit. However in this example because no query terms included in the tidbitare absent from the resource feature s the tidbit is not eligible for being a resource search tidbit e.g. the RST . As a result the tidbit fails to meet eligibility requirements for example for being included in the selection environment described with reference to . In some implementations determining whether a tidbit is eligible for a resource search operation can result when all of the query terms are included in the tidbit.

A query that includes one or more query terms is received . As an example the tidbit processor can receive the query which can originate from the client device . For example a user can enter the query terms e.g. pachinko 1975 Japan of the query in a search box of a Web browser or other user application.

For each of a plurality of resources identified as being relevant to the query one or more tidbits are received each tidbit being query relevant text extracted from the resource . As an example the tidbit processor can receive the tidbits from the search system which can automatically send one or more tidbits with any resource that is responsive to the query processed by the search system . If the query for example is pachinko 1975 Japan then the tidbits can be query relevant text extracted from resources e.g. Web pages that correspond to the query entered by the user on the client device . For instance example tidbits can include in 1975 tens of thousands of Japanese pachinkos were replaced . . . or Japan sent boatloads of reconditioned pachinkos to the US in 1975 to name a few examples.

The tidbit from the resource is examined . Examination can include for example text in the tidbit to determine if query terms within the tidbit are contained in the title of the resource and or embedded within the resource s resource locator e.g. the resource s URL .

A determination is made whether the tidbit is eligible for a resource search operation . For instance the tidbit processor determines a tidbit to be eligible for a resource search operation if for example at least one query term in the tidbit is not contained in the resource title and or URL.

If the tidbit is eligible for a resource search operation then the tidbit is marked as being a resource search tidbit . For example the tidbit e.g. in 1975 tens of thousands of Japanese pachinkos were replaced . . . is marked as a resource search tidbit. As shown in the marking can occur when the tidbit processor outputs or otherwise identifies the tidbit as a resource search tidbit RST .

A determination is made whether more resources and tidbits remain to be processed . For instance the tidbit processor can process multiple tidbits for each or multiple resources .

In some implementations when the search system identifies a significant number of resources in response to the query the tidbits provided by the search system can be limited initially to only those tidbits that correspond to a subset of the resources such as only those resources on the first page of search results. Later if the user begins reviewing search results on a subsequent page the search system can provide tidbits for additional resources as needed.

For each of the plurality of resources a corresponding search result responsive to the query is provided with at least one search result including a resource search tidbit . At least one search result includes a resource search tidbit when at least one resource search tidbit is identified as being eligible for a resource search operation. For example for each resource the search system can provide a search result . If the resource search tidbit is for example part of the snippet of the search result the resource search tidbit can be marked by use of HTML tags. Other ways of marking a resource search tidbit can also be used.

Query terms in a resource region are identified . The resource region can include the resource itself and or specific portions of the resource and or the URL of the resource and or other features of the resource. For example a resource related to pachinkos can include one or more titles and subtitles within the text of the resource and can be identified by a corresponding URL. Individual query terms from the user s query can be identified in the title section and or the URL of the resource.

Query terms in the tidbit are identified . In some implementations the query terms identified in the tidbit e.g. one of the tidbits can already have been tagged by the search system . If not the query terms in the tidbit can be identified with reference to those query terms in the query .

Query terms in the tidbit are compared to query terms in the resource region . In some implementations synonyms can be used to match query terms to the title section such as Ike e.g. as a query term for Eisenhower e.g. as a word in the title section to name one example. Other term matching techniques can use word stems such as to match Japan with Japanese or featured with features to name a few examples. In some implementations query terms can also be compared to the resource locator e.g. URL .

A determination is made whether at least one query term exists in the tidbit that is not in the resource region . For example in some implementations of using eligibility rules for generating resource search tidbits RSTs an RST will not be created unless at least one query term e.g. from the query is absent from the corresponding resource . Specifically an RST is eligible to be created if the tidbit includes at least one query term that is not in the title section or the resource locator e.g. URL of the resource . In the current example an RST can be created by the tidbit processor if a pachinko related resource does not include all of pachinko 1975 Japan somewhere in the resource s title section and or URL. Again in some implementations including can include query term matching using synonyms word stemming and edit distances.

If at least one query term exists in the tidbit that is not in the resource region then the tidbit is marked as being eligible as a resource search tidbit . For example the tidbit processor after comparing one of the tidbits with the title section of the resource can output the tidbit as a resource search tidbit RST . Generation of the RST can include the tidbit itself plus any additional information needed to place the RST in the selection environment and to enable ultimate selection of the RST by the user and navigation to the corresponding query relevant text portion in the resource .

A determination is made whether more tidbits for the current resource remain to be processed . For example a resource can have more than one tidbit provided for it and the tidbit processor can process all of the tidbits for the resource to determine which tidbits if any are candidates for becoming eligible for becoming resource search tidbits RSTs .

In some implementations the tidbit processor can stop processing tidbits for a resource when a threshold number e.g. five RSTs have been identified so as not to overwhelm the user with too many RSTs in a selection environment of a resource search operation. In some implementations all tidbits for a resource can be processed by the tidbit processor and the best RSTs can be provided to the user discarding for example RSTs of lower quality as determined by a ranking algorithm. In some implementations the tidbit processor can generate at least one RST even if not all of the query terms are exact matches to query relevant text within the resource in order to have at least one RST that the user can use.

If more tidbits for the current resource remain to be processed then the next tidbit is obtained . Processing the next tidbit can resume at step of the process . For example query terms in the tidbit are identified and so on for the next tidbit and for each tidbit processed.

A determination is made whether more resources remain to be processed . For example in response to the query the search system can provide multiple resources . The tidbit processor can process each of the resources and their tidbits in order to determine RSTs .

If more resources remain to be processed then the next resource is obtained and processing the next resource can resume at step of the process . When all resources have been processed by the tidbit processor the process ends .

On the search results page the search results can be displayed as the individual search results . These search results correspond to the resources described with reference to . In the search result a resource title e.g. Product Review for Widget provides a title level description of the search result . In this case the resource title also includes one of the query terms of the search query namely Widget. The search result also includes a snippet of Our new widget has new features . . . . If you desire a new full featured widget . . . in which the query terms or likenesses thereof are bolded. For example the likenesses of the query terms of the search query can include synonyms word stems or variants e.g. full featured and words within a threshold edit distance. The search result further includes a resource locator in this case the URL www.example11.com business widget.php p 93 that can be used to access the resource . As an example the user can click on the URL to navigate to the web page associated with the resource locator

The other search results on the search results page namely the search results and each have their respective titles and snippets and and resource locators and . Within the snippets and terms in the snippets that match the query terms of the search query are also bolded. In some implementations words in titles snippets and resource locators can be highlighted in various ways such as with different colors of highlighting e.g. a different color for each query term shading different font colors different font families bolding italics or any other mechanism for providing a different visible look to the user. In some implementations hovering over or clicking on a query term can cause all instances of that query term to be highlighted in some way.

Resource search tidbit information which identifies resource search tidbits for each search result is also provided with the search results page. The resource search tidbit information need not be displayed as part of the page instead the information can be of the form of marked resource search tidbits for each search result. For example a resource search tidbit can be query relevant text that is independent of the query relevant text of a snippet for a search result i.e. the resource search tidbit may be a block of text that is not part of the snippet.

For instance the resource search tidbit information can include for each search result e.g. search results the search result s resource locator e.g. URL and associated resource search tidbit. For the search result the Web browser executing on the client device can process in response to a selection of the search result the two resource search tidbit as indicated by URL RST RST to determine whether a resource search operation is to be performed.

In some implementations the associations between resource search tidbits and resource locators can be stored for example by processing a document object model DOM representation of the search results page. Web browser applications can use various internal representations of the document such as a document object model DOM representation for managing and rendering documents to be displayed to the user. Any of the representations can be used for example to associate resource locators e.g. URLs with resource search tidbits RSTs such as will be described with respect to the process flow diagram .

The Web browser s rendering module e.g. part of the Web browser executing on the user s client device can translate a displayed markup language document using some type of translation such as to a DOM representation. The translation can analyze the internal representation of the current document extract text from the text nodes of the representation and send the text to a browser translation module for translation. The page translator module can receive the translated text from the browser translator module and updates the internal representation. The rendering component of the browser can then render the updated internal representation. In general the term web browser when used herein can refer to any web browser application any browser extension or any other program running on the client or server that facilitates browsing online content.

The DOM representation of a document is in the form a tree of node objects. Each node corresponds to a part of the document. Nodes can be various types including for example root nodes element nodes attribute nodes text nodes and script nodes. A text node is a node corresponding to text in the document and includes text stored in the node. An element node is a node corresponding to an annotation in the document such as tags or tags. An attribute node is a node corresponding to an attribute of an element node such as the source for an tag. A script node includes an executable script. A DOM representation can also include other types of nodes.

By traversing the DOM of the search results page the browser identifies the resource search tidbits that have been marked for each URL and stores the association in memory. The association is then accessed each time a page is requested by a selection of a search result and the web browser uses the association to determine which resource search tidbits to search for in a given page. Using the resource search tidbits for the page the web browser determines whether the resource search tidbits meet a resource search operation threshold condition.

The page can be rendered for example by a Web browser executing on the user s client device . When the page is rendered the Web page content is displayed including any graphics and text associated with the resource. Query relevant text may or may not be highlighted and if so the highlighted text passages and correspond to the resource search tidbits e.g. RSTand RST that are included in the resource search tidbit information and correspond to the resource locator e.g. the URL www.example11.com business widget.php p 93 . The Web browser on the client device can have the ability to highlight the query relevant text associated with the resource search tidbits if for example the associations between the resource locator e.g. the resource s URL and the resource search tidbits are accessible from document object models DOMs from the previous search results page stored in computer memory. In this example the page does not include a selection environment because in this example the query relevant text associated with resource search tidbits e.g. RSTand RST are near enough to the top of the Web page content e.g. above the fold so as not to warrant displaying a control that allows the user to quickly navigate significantly lower on the Web page.

The page can be rendered for example by a Web browser executing on the user s client device . When the page is rendered the Web page content is displayed including any graphics and text associated with the resource.

In this example the text corresponding to the resource search tidbits associated with the resource are positioned sufficiently lower within the content of the Web page so as not to be displayed when the Web page appears. Essentially the text of the resource search tidbits are scrolled off the page. However the browser executing on the client device for example can recognize the rendered location of the query relevant text and automatically display a selection environment . A best matches message included in the selection environment can echo the query terms e.g. new widget features that are included in the user s original search query as described with reference to . The selection environment can further include the resource search tidbits e.g. RSTand RST associated with the query relevant text passages in this case selection environment options and . Specifically the option can be selected by the user to navigate to the portion of the web content containing the text matching the resource search tidbit RST and the option to navigate to the text matching the resource search tidbit RST. The option is depicted in as containing the text RST in order to make clear the mapping of the RST to its corresponding query relevant text in the resource. However the option includes the tidbit several of our new featured widgets which matches the query relevant passage . In some implementations including the one depicted in query terms that appear in tidbits and query relevant text can be highlighted in any way e.g. shown here using bolding .

In this example depiction of the web page the query relevant passages and are displayed in a phantom region used here to indicate and extension of the web page beyond the active viewport.

The query relevant text is highlighted and the text passages and correspond to the resource search tidbits e.g. RSTand RST that are included in the resource search tidbit information and correspond to the resource locator e.g. the URL www.example11.com business widget.php p 93 . The Web browser on the client device has accesses associations between the resource locator e.g. the resource s URL and the resource search tidbits are accessible from data gathered from document object model DOM and stored in computer memory.

In response to a query including one or more query terms a search results page including search results responsive to the query is received . Each search result includes a resource locator that specifies the location of a resource identified as being relevant to the query. At least one search result includes a resource search tidbit. The resource search tidbit is query relevant text extracted from the resource. The resource search tidbit is eligible for a research search operation in response to the resource specified by the resource locator of the at least one search result being rendered on the client device. Referring to for example the search results page can be the web page that displays the search results provided by the search system . The search results can include snippets from and links to resources that the search system identifies as responsive to the user s query . The search results can be displayed or rendered within a graphical user interface on the screen of the user s client device . For example if the user s query is pachinko 1975 Japan then the search results page displayed as the web page can include Web or Internet hits related to the query. As result the user can see within each of the search results resource locators e.g. links or URLs for each resource and snippets that can contain some or all of the individual query terms from the query .

A selection of the at least one search result is received at the client device . For example from the search results displayed on the user s client device the user can select one of the individual search results . Continuing with the current example the user can select a particular search result such as a search result corresponding to the history of pachinko games in Japan. The user s selection of the particular search result for example can cause the Web browser application to obtain the URL or other resource locator that is associated with or embedded within the search result .

In response to the selection the resource specified by the resource locator of the at least one search result is received . For example using the URL of the selected search result the Web browser application can access the corresponding resource . Access can occur for example over the network using the URL of the resource .

The resource is rendered at the client device . As an example the resource can be displayed within the user s Web browser such as to display the Web page that provides a history of pachinko games in Japan.

A portion of text in the resource that matches the query relevant text of the resource search tidbit is identified . As an example referring to an application on the client device identifies query relevant text corresponding to the specific resource search tidbit .

The resource search operation is performed only if the identified portion of the text matching the query relevant text of the resource search tidbit meets a search operation threshold condition . For example in some implementations certain threshold conditions must exist before the resource search operation is performed. Specifically unless the query relevant text corresponding to a specific resource search tidbit appears below the fold e.g. a pre determined number of pixels from the top of the display or outside of the current view port the selection environment is not displayed.

In some implementations the selection environment can display all resource search tidbits no matter how many of the resource search tidbits corresponding query relevant text passages appear above or below the fold. In other implementations the selection environment displays only the resource search tidbits for which corresponding text passages are below the fold.

In some implementations the resources that are processed by the search system are cached resources and the resources may have been updated by administrators or users after the resource is stored in a cache of the search system . Accordingly the copy of the resource stored in the cache of the search system may not exactly match the copy of the resource that is provided by the website hosting the resource. Accordingly the client device in some implementations is configured to search for matching text based on an exact match and a closest match criteria.

A portion of text in the resource that exactly matches the query relevant text of the resource search tidbit is searched for . For example a Web browser application running on the client device can search for query relevant text in a resource that matches all of the text in the resource search tidbit.

A determination is made whether an exact match is found . If an exact match is found then the portion of text in the resource that exactly matches the text of the resource search tidbit is identified . The identification can be used to highlight the text on some way such as to highlight the query relevant text in the resource . The query relevant text in this case can contain all of the query terms e.g. all of the terms in pachinko 1975 Japan .

If no exact match is found then the portion of text in the resource that most closely matches the text of the resource search tidbit is identified . For example in this case the text identified in the resource can include exact matches to most of the terms in the query and close matches to the remaining terms. In some implementations a portion of text with a minimum edit distance from the query relevant text of the resource search tidbit relative to other portions of the text in the resource is identified as being the closest match. In some implementations prefix matching can be used such as to identify terms in the query relevant text having the longest prefix match to terms in the resource search tidbit. In other implementations postfix matching can be used such as to identify terms in the query relevant text having the longest postfix match to terms in the resource search tidbit. Other types of matching can also be used e.g. longest string matching etc.

A selection environment is displayed with the rendered resource the selection environment displaying the portion of text in the resource that matches the query relevant text of the resource search tidbit . For example referring to when the Web browser executing on the user s client device displays the page corresponding to the resource the selection environment can also be displayed. Specifically the page can be a web page related to pachinko games and the selection environment can include one or more resource search tidbits corresponding to query relevant text portions in the resource that are related to the query terms of the query e.g. pachinko 1975 Japan .

In response to receiving a selection of the displayed portion of the text navigation occurs to the portion of the resource that includes the portion of text in the resource that matches the query relevant text of the resource search tidbit . For example if the user selects a particular resource search tidbit such as one containing the tidbit Japan sent boatloads of reconditioned pachinkos to the US in 1975 then the user s Web browser can navigate to that portion of the resource that contains that text. Specifically the Web page can automatically scroll to the passage of interest as shown in and indicated by an updated display of the page and a new position of the scroll bars .

From a document object model of the search results page the resource search tidbit of the at least one search result is associated with the resource locator of the at least one search result . For example if the DOM representation of a search results page is in the form of a tree of node objects the nodes of the tree can include the association of the resource search tidbit to a resource locator in a search result.

The association is stored in a computer memory and the association is accessed in the computer memory in response to a selection of a search result from the search results page . For example when the user selects one of the search results from the Web page the Web browser executing on the user s client device can access the association of the resource search tidbits and the URL corresponding to the selected search result.

The portion of text in the resource that matches the query relevant text of the resource search tidbit associated with the resource locator of the at least one search result that matches the resource locator of the resource is identified .

In some implementations some of the processing described above as occurring at the client device can instead occur at the server. For example the search system can perform most or all of the processing needed to determine eligibility of resource search tidbits.

In some implementations the selection environment can always be displayed regardless of whether the query relevant text of the resource already appears on the screen.

In some implementations in order to manage large numbers of e.g. more than 1 to 5 resource search tidbits RSTs in the selection environment a scroll bar can be added to allow the user to position to an RST of interest such as one further down the list.

In some implementations additional tools can be added to the selection environment such as a tool to check off passages that have already been read. In some implementations the user can be provided with options to hide selected RSTs such a RSTs most associated with a specific query term in which the user is no longer interested in seeing associated RSTs. In some implementations user options can be provided to allow the RSTs to be sorted in specific ways e.g. by one or more query terms . In some implementations a search feature can be added to the selection environment that allows the user for example to search for specific text strings within the collection of RSTs.

In some implementations automatic highlighting can occur on the portions of text in a resource that match the text of the resource search tidbit regardless of whether the resource search tidbit meets a search operation threshold condition. For example the text can be highlighted in light yellow upon initial display of the resource. If a selection environment is displayed and if the user then selects the RST associated with the query relevant text the highlighting can be changed for example to a strong yellow.

In some implementations once a user is thought to have read or reviewed a particular passage highlighting can be changed to an off color such as by changing the initially highlighted in yellow text to violet or some other non yellow highlighting color. In this way the user can be informed of where he or she has already been on the Web page.

Although the examples above describe providing resource search tidbits that include query relevant text other types of data can be used to identify text for a resource search operation. For example in some implementations the server system can provide a byte offset and byte length tuple that identifies the distance from the start of the resource in bytes of a tidbit that is of a size equal to the byte length. Alternatively other offset references can also be used e.g. a paragraph number and or sentence number. In these implementations the matching operations at the client side can be changed accordingly.

In other implementations the client device can request resource search tidbits for a resource from the search system asynchronously e.g. in response to selecting a resource from a search result. The search system can then perform the resource search tidbit operations described above for only that resource and provide the identified resource search tidbits to the client device for processing. This implementation reduces processing load on the search system .

Although the system above is described in the context of a server and a client device in some implementations some of the server operations can be performed on the client device. For example when receiving search results the browser application can treat the snippet as a default resource search tidbit and can perform the eligibility operations matching operations highlighting operations and search environment related operations described above using the snippet as input.

Embodiments of the subject matter and the operations described in this specification can be implemented in digital electronic circuitry or in computer software firmware or hardware including the structures disclosed in this specification and their structural equivalents or in combinations of one or more of them. Embodiments of the subject matter described in this specification can be implemented as one or more computer programs i.e. one or more modules of computer program instructions encoded on computer storage medium for execution by or to control the operation of data processing apparatus. Alternatively or in addition the program instructions can be encoded on an artificially generated propagated signal e.g. a machine generated electrical optical or electromagnetic signal that is generated to encode information for transmission to suitable receiver apparatus for execution by a data processing apparatus. A computer storage medium can be or be included in a computer readable storage device a computer readable storage substrate a random or serial access memory array or device or a combination of one or more of them. Moreover while a computer storage medium is not a propagated signal a computer storage medium can be a source or destination of computer program instructions encoded in an artificially generated propagated signal. The computer storage medium can also be or be included in one or more separate physical components or media e.g. multiple CDs disks or other storage devices .

The operations described in this specification can be implemented as operations performed by a data processing apparatus on data stored on one or more computer readable storage devices or received from other sources.

The term data processing apparatus encompasses all kinds of apparatus devices and machines for processing data including by way of example a programmable processor a computer a system on a chip or multiple ones or combinations of the foregoing. The apparatus can include special purpose logic circuitry e.g. an FPGA field programmable gate array or an ASIC application specific integrated circuit . The apparatus can also include in addition to hardware code that creates an execution environment for the computer program in question e.g. code that constitutes processor firmware a protocol stack a database management system an operating system a cross platform runtime environment a virtual machine or a combination of one or more of them. The apparatus and execution environment can realize various different computing model infrastructures such as web services distributed computing and grid computing infrastructures.

A computer program also known as a program software software application script or code can be written in any form of programming language including compiled or interpreted languages declarative or procedural languages and it can be deployed in any form including as a stand alone program or as a module component subroutine object or other unit suitable for use in a computing environment. A computer program may but need not correspond to a file in a file system. A program can be stored in a portion of a file that holds other programs or data e.g. one or more scripts stored in a markup language document in a single file dedicated to the program in question or in multiple coordinated files e.g. files that store one or more modules sub programs or portions of code . A computer program can be deployed to be executed on one computer or on multiple computers that are located at one site or distributed across multiple sites and interconnected by a communication network.

The processes and logic flows described in this specification can be performed by one or more programmable processors executing one or more computer programs to perform actions by operating on input data and generating output. The processes and logic flows can also be performed by and apparatus can also be implemented as special purpose logic circuitry e.g. an FPGA field programmable gate array or an ASIC application specific integrated circuit .

Processors suitable for the execution of a computer program include by way of example both general and special purpose microprocessors and any one or more processors of any kind of digital computer. Generally a processor will receive instructions and data from a read only memory or a random access memory or both. The essential elements of a computer are a processor for performing actions in accordance with instructions and one or more memory devices for storing instructions and data. Generally a computer will also include or be operatively coupled to receive data from or transfer data to or both one or more mass storage devices for storing data e.g. magnetic magneto optical disks or optical disks. However a computer need not have such devices. Moreover a computer can be embedded in another device e.g. a mobile telephone a personal digital assistant PDA a mobile audio or video player a game console a Global Positioning System GPS receiver or a portable storage device e.g. a universal serial bus USB flash drive to name just a few. Devices suitable for storing computer program instructions and data include all forms of non volatile memory media and memory devices including by way of example semiconductor memory devices e.g. EPROM EEPROM and flash memory devices magnetic disks e.g. internal hard disks or removable disks magneto optical disks and CD ROM and DVD ROM disks. The processor and the memory can be supplemented by or incorporated in special purpose logic circuitry.

To provide for interaction with a user embodiments of the subject matter described in this specification can be implemented on a computer having a display device e.g. a CRT cathode ray tube or LCD liquid crystal display monitor for displaying information to the user and a keyboard and a pointing device e.g. a mouse or a trackball by which the user can provide input to the computer. Other kinds of devices can be used to provide for interaction with a user as well for example feedback provided to the user can be any form of sensory feedback e.g. visual feedback auditory feedback or tactile feedback and input from the user can be received in any form including acoustic speech or tactile input. In addition a computer can interact with a user by sending documents to and receiving documents from a device that is used by the user for example by sending web pages to a web browser on a user s client device in response to requests received from the web browser.

Embodiments of the subject matter described in this specification can be implemented in a computing system that includes a back end component e.g. as a data server or that includes a middleware component e.g. an application server or that includes a front end component e.g. a client computer having a graphical user interface or a Web browser through which a user can interact with an implementation of the subject matter described in this specification or any combination of one or more such back end middleware or front end components. The components of the system can be interconnected by any form or medium of digital data communication e.g. a communication network. Examples of communication networks include a local area network LAN and a wide area network WAN an inter network e.g. the Internet and peer to peer networks e.g. ad hoc peer to peer networks .

The computing system can include clients and servers. A client and server are generally remote from each other and typically interact through a communication network. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client server relationship to each other. In some embodiments a server transmits data e.g. an HTML page to a client device e.g. for purposes of displaying data to and receiving user input from a user interacting with the client device . Data generated at the client device e.g. a result of the user interaction can be received from the client device at the server.

While this specification contains many specific implementation details these should not be construed as limitations on the scope of any inventions or of what may be claimed but rather as descriptions of features specific to particular embodiments of particular inventions. Certain features that are described in this specification in the context of separate embodiments can also be implemented in combination in a single embodiment. Conversely various features that are described in the context of a single embodiment can also be implemented in multiple embodiments separately or in any suitable subcombination. Moreover although features may be described above as acting in certain combinations and even initially claimed as such one or more features from a claimed combination can in some cases be excised from the combination and the claimed combination may be directed to a subcombination or variation of a subcombination.

Similarly while operations are depicted in the drawings in a particular order this should not be understood as requiring that such operations be performed in the particular order shown or in sequential order or that all illustrated operations be performed to achieve desirable results. In certain circumstances multitasking and parallel processing may be advantageous. Moreover the separation of various system components in the embodiments described above should not be understood as requiring such separation in all embodiments and it should be understood that the described program components and systems can generally be integrated together in a single software product or packaged into multiple software products.

Thus particular embodiments of the subject matter have been described. Other embodiments are within the scope of the following claims. In some cases the actions recited in the claims can be performed in a different order and still achieve desirable results. In addition the processes depicted in the accompanying figures do not necessarily require the particular order shown or sequential order to achieve desirable results. In certain implementations multitasking and parallel processing may be advantageous.

