---

title: Bayesian approach to identifying sub-module failure
abstract: A diagnostic device identifies failed sub-modules within a larger system based on error codes received from the system. The device stores a likelihood matrix that correlates each sub-module with each possible error code and maintains a likelihood value corresponding to the probability of a failed sub-module generating a corresponding error code and stores a prior probability of failure associated with each sub-module based on prior observational data. In response to received error codes, the device calculates a posterior probability of failure for each of the plurality of sub-modules based on a product of the likelihood values corresponding to the received error codes and the prior probability of failure associated with each sub-module. Based on the calculated posterior probability, the device identifies the sub-module with the highest posterior probability of failure as the failed sub-module.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08458525&OS=08458525&RS=08458525
owner: Hamilton Sundstrand Space Systems International, Inc.
number: 08458525
owner_city: Windsor Locks
owner_country: US
publication_date: 20100319
---
The U.S. Government has a paid up license in this invention and the right in limited circumstances to require the patent owner to license others on reasonable terms as provided for by the terms of W911SR 09 D 0002 awarded by the Army.

The present invention is related to diagnostic tools and in particular to diagnostic tools for identifying failed sub modules in larger systems.

Complex systems are typically comprised of a plurality of sub modules. A failure in one or more of the sub modules may prevent or degrade the performance of system. However when a system fails it is not always clear which sub module is at fault. To diagnose failures each sub module may include a plurality of sensors e.g. sometimes many hundreds of sensors . Outputs from the sensors are collected by a Built in Test BIT system and in response to one or more of the sensor signals being out of range an error code EC specific to the detected failure is generated.

Based on the generated error code s a technician takes an If . . . . Then . . . . Else approach to diagnosing which sub module has failed. That is IF a specified error code is generated THEN the technician replaces tests a first sub module ELSE the technician replaces tests another sub module and continues until the failed sub module is detected. This is a time consuming and expensive process.

The present invention provides a method of identifying sub module failure within a system having a plurality of sub modules. The method includes receiving one or more error codes from the system. Based on the received error codes likelihood values corresponding to a probability of a failed sub module generating the received error code and prior probabilities of failure associated with each sub module are selected from a likelihood matrix. A posterior probability of failure is calculated for each of the plurality of sub modules based on the selected likelihood value and the prior probability of failure associated with each sub module. The failed sub module is identified based on the calculated posterior probabilities.

A diagnostic device for identifying failed sub modules within a system includes an input for receiving errors codes from the system a memory device and a processor. The memory stores a likelihood matrix that correlates each sub module with each possible error code and maintains a likelihood value corresponding to the probability of a failed sub module generating a corresponding error code and stores a prior probability of failure associated with each sub module based on prior observational data. The processor device executes an algorithm that calculates a posterior probability of failure for each of the plurality of sub modules based on a product of the likelihood values corresponding to the received error codes and the prior probability of failure associated with each sub module. Based on the posterior probabilities calculated with respect to each sub module the processor device generates an output identifying the sub module with the highest posterior probability of failure as the failed sub module.

The present invention provides a Bayesian approach to identifying failed sub modules. The Bayesian approach calculates probabilities of failure for each sub module i.e. posterior probabilities based on prior probabilities of failure and likelihood data correlating the probability of sub module failure generating a particular error code. In particular a lambda smoothing algorithm is employed to generate prior probabilities of failure given limited observed data.

Although based on inputs received from sensors local to various sub modules the error codes do not necessarily indicate the sub module that has failed. In the embodiment shown in external diagnostic tool includes an input for receiving error codes generated by BIT system . Communication between BIT system and external diagnostic tool may employ wireless and or wired communication protocols or may allow for error codes displayed by BIT system to be manually entered into diagnostic tool . In other embodiments rather than configuring diagnostic tool external to system diagnostic tool is included as part of system either as a stand alone module or as part of BIT system .

Diagnostic tool includes a combination of hardware and software for identifying failed sub modules including memory for storing likelihood matrix and algorithms associated with Bayesian calculator and a processor for executing the stored algorithms to identify the failed sub module. The memory can be any type of computer readable storage medium known in the art such as random access memory nonvolatile memory programmable read only memory a hard disk device and the like. The processor can be any type of processing circuitry capable of executing instructions such as a general purpose processor digital signal processor microcontroller programmable logic device application specific integrated circuit and the like. In one embodiment processor executes a Bayesian algorithm to generate posterior probabilities associated with failure of each sub module U Ubased on the ECs provided by BIT system and ultimately to provide an output identifying the likely failed sub module. In other embodiments the output provided by diagnostic tool prioritizes the likelihood of failure of each sub module U U e.g. a list ordered to indicate the most likely failed sub modules . The output provided by diagnostic tool may be provided in various forms including being provided on a display included on diagnostic tool as part of a print out provided by diagnostic tool or as an electronic communication provided by diagnostic tool to another system. Based on the identification of the likely failed sub module a technician will replace repair the identified sub module. The benefit of this approach is the technician is provided the identity of the sub module most likely to have failed thereby reducing the amount of time the technician must spend troubleshooting the failed system .

The final row in likelihood matrix represents the prior probabilities P U of failure associated with each sub module. For example with respect to sub module Uthe prior probability P U is equal to 0.07 meaning that seven percent of the time sub module Uhas been estimated as the cause of system failure. With respect to sub module Uthe prior probability P U is equal to 0.01 meaning that only one percent of the time has sub module Ubeen estimated as the cause of system failure.

Various methods exist for estimating prior probability values based on observational data. In each case additional observations improve the accuracy of prior probability values. In instances in which limited observational data is available estimation of prior probabilities may lead to either over estimating the probability of failure or under estimating the probability of failure. For example one method of estimating prior probabilities is based only on the number of times a particular sub module has been observed to fail and the total number of observed failure of system .

This problem can be remedied by simply adding one to the count of each sub module as provided in Equation 2 

Likelihood matrix therefore includes conditional probabilities P E U regarding the likelihood that a particular error code Eis generated when a given sub module Uhas failed as well as prior probabilities P U that estimate the likelihood that sub module Uis the cause of instrument failure. Given a set of error codes provided by BIT system conditional probabilities P E U corresponding to the provided error codes and prior probabilities P U stored by likelihood matrix are selected and provided to Bayesian calculator . Based on the selected conditional probabilities P E U and prior probabilities P U Bayesian calculator calculates posterior probabilities of failure P U E for each sub module. Based on the calculated posterior probabilities of failure P U E the sub module most likely to have failed is identified.

In one embodiment Bayesian calculator employs Bayes law to generate the posterior probability of failure for each sub module U Uof .

The term is the set of error codes EC received from BIT system . The set may include one or a plurality of error codes. The term argmax represents that the sub module having the highest i.e. maximum posterior probability is identified as the failed sub module. The term P is a normalization term where P P U P U . This term is the same for each sub module U U so it can be ignored for purposes of classifying which sub module is most likely to be the cause of the system failure given the set of observed error codes. The right hand side of Equation 4 is calculated by repeatedly applying Bayes law on the error code sequence as provided in Equation 5. Equation 5 Equation 5 provides that error codes can be correlated with one another. For example the bigram term P E U E represents the joint probability that two error codes are generated given the failure of a particular sub module. However employment of bigrams is only practical in applications in which a large amount of observable data is available to provide correlation between the presence of multiple error codes. In applications in which limited observable data is available unigram approximation is employed to improve the calculation of the posterior probability.

The following examples are provided to illustrate application of Equation 6 with respect to sub modules Uand U. For example assume that sub module Uhas failed and BIT system generates a single error code 2007 . Based on the provided error code likelihood matrix provides the following conditional probability P 2007 U 0.4 and prior probability of failure P U 0.07 with respect to sub module U. Based on Equation 6 the posterior probability of failure associated with sub module Uis calculated as the product of the conditional probability P 2007 U and the probability of failure P U or 0.07 0.4 0.028 i.e. 2.8 chance that sub module Uhas failed . Similarly with respect to sub module U likelihood matrix provides the conditional probability P 2007 U 1 and prior probability of failure P U 0.01. Based on Equation 6 the posterior probability of failure associated with sub module Uis calculated as the product of the conditional probability P 2007 U and the probability of failure P U or 1 0.01 0.01 i.e. 1 chance that sub module Uhas failed . In this example the posterior probability of failure of sub module U 2.8 is greater than the posterior probability of failure of sub module U 1 and diagnostic tool correctly identifies sub module Uas having failed.

Now assume that sub module Uhas failed and BIT system generates the set of error codes 2007 2008 6001. Based on the provided error codes likelihood matrix provides the following conditional probabilities P 2007 U 0.4 P 2008 U 0.4 and P 6001 U 0.2 and prior probability of failure P U 0.07 with respect to sub module U. Based on Equation 6 the posterior probability of failure associated with sub module Uis calculated as the product of the conditional probabilities P 2007 U P 2008 U P 6001 U and the probability of failure P U or 0.4 0.4 0.2 0.07 0.0022 i.e. 0.22 chance that sub module Uhas failed . Similarly with respect to sub module U likelihood matrix provides the conditional probability P 2007 U 1 P 2008 U 1 and P 6001 U 1 and prior probability of failure P U 0.01. Based on Equation 6 the posterior probability of failure associated with sub module Uis calculated as the product of the conditional probability P 2007 U P 2008 U and P 6001 U and the probability of failure P U or 1 1 1 0.01 0.01 i.e. 1 chance that sub module Uhas failed . In this example the posterior probability of failure of sub module U 1 is greater than the posterior probability of failure of sub module U 0.22 and diagnostic tool correctly identifies sub module Uas having failed.

In this way diagnostic tool provides an output identifying the sub module likely to have caused the failure. In other embodiments rather than identifying a single sub module likely to have failed diagnostic tool provides an output prioritizing the likelihood of failure associated with each sub module. In addition diagnostic tool may be updated as required including modifying the both the conditional probabilities and prior probabilities of failure stored by likelihood matrix based on the additional observation data. In addition likelihood matrix may be expanded to account for new sub modules. Because the Bayesian approach to calculating posterior probabilities relies on the product of the conditional probability and prior probability for each sub module new sub modules can be accommodated by adding additional columns to likelihood matrix .

While the invention has been described with reference to an exemplary embodiment s it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted for elements thereof without departing from the scope of the invention. In addition many modifications may be made to adapt a particular situation or material to the teachings of the invention without departing from the essential scope thereof. Therefore it is intended that the invention not be limited to the particular embodiment s disclosed but that the invention will include all embodiments falling within the scope of the appended claims.

