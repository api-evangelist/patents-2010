---

title: System and methods for carrier-centric mobile device data communications cost monitoring and control
abstract: Systems and methods for providing carrier-centric data communications cost monitoring and controls are provided. In an embodiment, the method operates by receiving a registration request associated with a subscriber session, determining current data usage associated with the subscriber, and receiving data usage thresholds. The method further comprises receiving quotas associated with the subscriber session and collecting data usage information associated with the subscriber session. The method sends a notification to the subscriber when a pre-determined quota is exceeded during the subscriber session and controls data usage. The cost monitoring and control system comprises a usage policy server and a usage policy application. The usage policy application allows a carrier to offer alterations to terms of a subscription. The usage policy application displays current data usage information on a per-network and per-application basis using subscriber profile information, subscriber session information, and prior subscriber usage history provided by the usage policy server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08577329&OS=08577329&RS=08577329
owner: Bridgewater Systems Corp.
number: 08577329
owner_city: Ontario
owner_country: CA
publication_date: 20100504
---
The present application claims priority to U.S. Provisional Patent Application No. 61 175 316 entitled System and Methods for Mobile Device Based Data Communications Cost Monitoring and Control filed on May 4 2009 by Momtahan et al.

The present application is also related to commonly owned U.S. patent application Ser. No. 12 186 831 entitled Usage Measurement Collection and Analysis to Dynamically Regulate Customer Network Usage filed on Aug. 6 2008 by Jones et al. which is hereby expressly incorporated by reference in its entirety.

The present application is also related to commonly owned co pending U.S. application Ser. No. 12 708 299 entitled Adaptive Window Size for Network Fair Usage Controls by Foottit et al. which is hereby expressly incorporated by reference in its entirety.

The present invention relates generally to communications networks more particularly to monitoring and controlling data communications costs within wireless communications networks.

Portable computing devices such as laptop computers personal data assistants PDAs smart phones and the like are in common usage many featuring data communications support powerful processors larger and more colorful displays and wireless networking and internet browsing capabilities. These advances in mobile technology have resulted in a dramatic increase in the volume of data communicated on wireless networks. These advances coupled with subscribers seeking expanded mobility will drive subscribers install and run data hungry applications on their mobile devices. Data traffic is growing due to a combination of increasing market share of data centric portable devices such as IPHONE and BLACKBERRY devices lower wireless data subscription costs higher wireless data throughput and easier mobile access to data intensive applications and rich content such as video. These trends are driving ever increasing demands for wireless data communications.

Typically users gain access to wireless data networks by purchasing a subscription plan from a service provider. In response to the explosive growth in mobile data traffic service providers currently offer a wide variety of wireless subscription plan features such as actual usage plans flat rate plans bandwidth caps that limit the amount of data per month for a mobile device pre paid and post paid data plans. These plans typically impose limits on subscriber bandwidth consumption often combined with additional fees for exceeding those limits. Bandwidth caps can alleviate network congestion by reducing overall mobile data traffic but these caps reduce the attractiveness of data service for subscribers.

In a flat rate subscription plan a subscriber pays a fee for a billing cycle and is entitled to a set amount of network usage i.e. a usage quota during the billing cycle. For example a subscriber may pay 30 for a month and be entitled to 500 minutes of network time. The usage quota can be specified as a time per billing cycle amount e.g. 500 minutes per month or as a data volume per billing cycle amount e.g. 40 Mega Bytes per month . In some flat rate subscription plans the usage quota is unlimited.

In an actual usage subscription plan a subscriber pays a set rate based on the actual amount of network usage during a billing cycle. For example a user may pay 1 per minute of network usage. Actual usage plans can have incentives penalties based on a subscriber s usage during a billing cycle. For example in a subscription plan a subscriber may pay 1 per Mega Byte MB for the first 50 MBs and 2 per Mega Byte MB for every MB used beyond 50 MBs during the billing cycle. Subscription plans can combine aspects of flat rate plans and usage plans. For example a subscriber may pay 30 per month for 40 MBs of wireless data usage and 1 per MB for every minute used after 40 MBs.

In the plans described above as well as other subscriber plans it is useful for a subscriber to be able to monitor his her usage against one or more quotas.

Given the increasing versatility of mobile devices it is helpful to implement a means by which these mobile devices can be used to monitor and control data communication costs and to improve the subscriber experience.

Previous methods for network data communications cost monitoring and control are largely provider centric leaving the user with limited options to control and monitor costs. For example a subscriber may be able to display cumulative consumption in MBs for the current month to determine if a monthly quota has been exceeded but the subscriber cannot dynamically control and manage data communications costs without permanently changing his her subscription plan. Provider centric systems monitor usage and may allow subscribers to access usage information via a provider s web server but they do not allow subscribers to set real time usage controls. For example provider centric systems do not allow subscribers to set data usage thresholds quotas or caps on their devices each day based upon prior usage. Prior network data control techniques result in extra charges i.e. due to roaming and surprise data charges for subscribers who exceed bandwidth caps.

In prior systems subscribers must rely on providers to monitor and control data usage. When a portable device moves to another provider network i.e. roam the amount of data usage information is limited to what the network the device is roaming in provides. For example subscribers may not know what data charges i.e. tariffs apply while roaming. Prior techniques can result in excessive fees for subscribers who have unknowingly exceeded their plan s data quotas or caps. Subscribers cannot dynamically manage and control data costs for current data connections from their portable devices. In prior systems subscribers only have data usage information in terms of overall volume of data used for all applications on a device rather than the amount of data user per application. This lack of device centric control and transparency limits the subscriber experience and causes subscribers to unnecessarily curtail their data usage.

What is therefore needed are systems and methods for providing device based data communications cost monitoring and controls on a per application basis. What is further needed are systems and methods to allow subscribers to monitor and control expenditures on data services by providing proactive notification when subscribers are approaching bandwidth caps. What is also needed are systems and methods to allow subscribers to modify their plans either temporarily or permanently depending on their needs by providing add on service availability i.e. the ability to dynamically raise a bandwidth cap temporarily .

Embodiments of the present invention provide systems and methods that improve data communication usage and cost monitoring operations. An embodiment of the invention includes a system for monitoring and control of the data usage that is based on a subscriber s device. Methods are disclosed that use a distributed system that runs on user equipment and mobile devices.

In an embodiment a system provides subscribers with access to real time information about data usage and are given warnings that they are close to reaching bandwidth caps. The system notifies subscribers when they are close to reaching bandwidth caps or quotas and offers subscribers an opportunity to upgrade to a next service tier.

The invention also provides a method for managing data usage by allowing subscribers to gradually reduce download speeds block some types of traffic redirect device connection to on portal applications or select a new Quality of Service QoS level in order to manage bandwidth consumption. In this way the invention makes different options available to subscribers and lets them decide how to best manage data usage according to their needs and priorities.

The invention additionally includes methods that use a distributed usage monitoring and control system that comprises applications that run on user devices.

Embodiments of the invention also include methods for performing cost monitoring and control on a per application basis.

In an embodiment the invention includes a centralized system for global monitoring and control of a plurality of mobile devices from a single cross provider i.e. global perspective.

Subscription data is used to calculate the likelihood of exceeding a quota i.e. a quota breach at a given time and this information is provided to a user of a mobile device. U.S. application Ser. No. 12 186 831 filed Aug. 6 2008 and entitled Usage Measurement Collection and Analysis to Dynamically Regulate Customer Network Usage describes methods and systems for calculating the likelihood of a quota breach. The present application includes the capabilities described therein. According to an embodiment of the present invention a notification is sent to a subscriber when it is determined that a quota breach is likely to occur. In a related embodiment subscribers are given the opportunity to change a service tier associated with their subscription in order to prevent a likely quota breach.

In an embodiment a service provider can present marketing offers i.e. special offers to a subscriber that provide the subscriber with an opportunity to change a service tier associated with their subscription. In further embodiments acceptance of marketing offers can change service tiers associated with a subscriber s home network or roamed networks. According to embodiments of the invention marketing offers can be sent to a subscriber by their home network service provider or roamed network service providers and are presented on the subscriber s mobile device.

In embodiments both dynamic and static subscriber characteristics relative to a current usage session can be used to allow a subscriber to proactively manage data usage. Dynamic characteristics can be dynamic relative to the start of a usage session or relative to the usage session generally. An example of a dynamic characteristic relative to the start of a usage session is the type of data requested and the mobile applications requesting data. An example of a dynamic characteristic relative to the usage session is the total amount of data usage.

In a further embodiment a subscriber characteristic used in data usage calculations includes knowledge of peak usage patterns e.g. on peak off peak weekdays .

It is an objective of the present invention that it may be incorporated into any mobile device capable of data communications.

In another embodiment when a subscriber is roaming and the roaming traffic is not routed through the subscriber s home service provider home agent router or network access gateway an interaction between the roamed service provider and home service provider occurs so that the home service provider has the information needed to control data usage in the roamed or visited network.

Another objective of the invention is to provide flexible policy descriptions for network service provider carrier charging plans. A further objective of the invention is to provide flexible tariff distribution. According to an embodiment of the invention distribution of flexible policy descriptions associated to network service provider charging plans is achieved by using a provider based architecture. In an embodiment a provider dependent i.e. carrier based architecture is also used to distribute tariffs associated with network service providers.

Further embodiments features and advantages of the invention as well as the structure and operation of the various embodiments of the invention are described in detail below with reference to accompanying present drawings.

The present invention will now be described with reference to the accompanying drawings. In the drawings like reference numbers can indicate identical or functionally similar elements. Additionally the left most digit s of a reference number may identify the drawing in which the reference number first appears.

User equipment is any device that provides a user access to one or more networks. User equipment can include but is not limited to a computer such as user equipment a personal digital assistant PDA such as user equipment a wireless phone such as user equipment a smart phone other wireless mobile devices and or wired communications devices.

Access network is a communications network that couples user equipment to a packet data network not shown . Access network may be a third generation partnership project 3GPP access network or a non 3GPP access network. Exemplary 3GPP access networks include the UMTS terrestrial radio access network UTRAN and the GSM EDGE radio access network RAN . Other access networks include but are not limited to WiFi WiMAX CDMA2000 GSM and UMTS.

Network access gateway provides an interface between access network and a packet data network not shown . In a 3GPP network network access gateway may be the Gateway General Packet Radio Service GPRS Support Node GGSN . Note that network access gateway may also act as a policy enforcement point.

Policy controller at a high level includes subscriber profiles and network policies needed to manage network resources such as bandwidth according to a subscriber session and or application. A service provider may apply a policy based on business rules associated with a variety of factors e.g. service tiers and or dynamic parameters such as time of day .

Policy controller includes a policy and charging rules function PCRF and a quota manager . For example in a 3GPP network PCRF acts as a decision point for policy and charging control of service data flows. PCRF is configured to select and provide the applicable policy and charging control decisions to the policy control enforcement point.

Usage policy server works in conjunction with policy controller to extend policy and charging control of service data flows to user equipment . These data flows may be monitored and controlled on a per subscriber per user equipment or per application basis. For example control and metering of data flows from applications hosted in application server farm to user equipment may be performed by usage policy server . Alternatively control and metering of data flows for a particular subscriber using user equipment may be performed by usage policy server without regard to the applications being invoked by the subscriber. Similarly control and metering of data flows between a pool of related subscribers i.e. subscribers in the same family organization or corporation using user equipment may be performed by usage policy sever regardless of the applications involved in the data flows. Although the exemplary environment depicts usage policy server as a separate server from policy controller as would be understood by those skilled in the relevant art s usage policy server may be implemented as software residing in policy controller . Conversely policy controller may comprise software residing on usage policy server

According to an embodiment of the invention a subscriber using user equipment can set usage limits in mobile usage policy application running on user equipment . For example a subscriber using user equipment can use mobile policy application to set total daily usage limits in Mega Bytes MBs which are communicated to usage policy server via access network network access gateway and policy controller . Subscribers can also set data usage notification and stop thresholds in mobile usage policy application . Upon reaching a notification threshold i.e. 400 MBs in the example embodiment depicted in a subscriber will receive a notification on user equipment . At that point the subscriber can optionally set a new higher usage limit in mobile usage policy application or choose to curtail data usage. Upon reaching a stop threshold i.e. 600 MBs in the example embodiment depicted in a subscriber will be unable to use additional data services on user equipment until a higher usage limit is set in mobile usage policy application or server side usage policy application .

Usage policy server provides usage policy data to policy controller . Quota manager is configured to collect data communications usage and cost data. Quota manager provides data communications cost monitoring and data to user equipment via network access gateway and access network . If the subscriber exceeds a data usage cap or threshold quota manager provides this information to user equipment and usage policy server . In an embodiment server side usage policy application running on usage policy server allows subscribers to set data usage controls via a web portal See . Data usage controls include but are not limited to total daily usage thresholds total hourly usage thresholds per application usage thresholds per device usage thresholds and thresholds based on data sources i.e. Uniform Resource Locator URL addresses or Internet Protocol IP addresses . In an alternative embodiment a mobile usage policy application running on user equipment allows subscribers using user equipment to set data usage controls such as but not limited to the thresholds mentioned above directly on user equipment .

Quota manager is configured to provide dynamic usage controls according to a variety of techniques including but not limited to using pre defined value or values calculating fair usage windows based on one or more formulas and or determining new usage windows based on how quickly previous windows were violated. These techniques are described in further detail in U.S. application Ser. No. 12 708 299 entitled Adaptive Window Size for Network Fair Usage Controls which is hereby expressly incorporated by reference in its entirety.

Policy controller is coupled to subscriber data repository . Subscriber data repository includes a subscriber profile database a subscriber state database and a subscriber usage database . Although depicted as three separate databases in a person of ordinary skill in the art will recognize that subscriber profile subscriber state and subscriber usage data may be stored in any number of databases.

Policy controller is further coupled to network access gateway . In an embodiment the interface between policy controller and network access gateway is a Gy interface.

Subscriber state database includes information that identifies and defines a subscriber s network session. Subscriber state information includes the subscriber identifier for the session. In embodiments of the invention subscriber identifiers may be one or more of a Mobile Subscriber ISDN Number MSISDN a Mobile Identification Number MIN a Private Identifier information about the network such as the IP address the subscriber is currently using and what network or networks to which the subscriber is currently connected device information such as the device being used and the version of the software location and roaming information and other unique state information.

When a subscriber connects to any network the core elements of the network assign an Internet Protocol IP address to the subscriber. At that time the subscriber session begins and subscriber state information is created derived and captured. For example state information is typically generated either through RADIUS accounting or through interactions with the dynamic host control protocol DHCP service on a network. The accounting message feeds are generated to a Remote Authentication Dial In User Service RADIUS engine or an authentication authorization and accounting AAA service from core network elements.

Subscriber profile database includes static information about the subscriber. This information may include the service tier e.g. gold silver bronze assigned to the subscriber. In an embodiment of the invention service tiers are associated with Quality of Service QoS levels.

Subscriber usage database includes static and dynamic information related to the subscriber s history. The subscriber s history includes but is not limited to the subscriber s data usage history. In embodiments of the present invention subscriber usage database may store information about the amount of data used on a per application basis by the subscriber s user equipment in previous sessions. Usage policy server uses the per application usage data from prior sessions to inform the subscriber about which applications running on user equipment have consumed the most bandwidth or data based on previous behavior patterns.

According to an embodiment of the invention a carrier or provider based infrastructure is used wherein the service provider infrastructure provides data metering and control. In this architecture usage policy server and server side usage policy application are used to control and meter data usage on user equipment .

In another embodiment a carrier independent infrastructure is used whereby metering and control is performed on user equipment using mobile usage policy application . In this embodiment some centralized functions are performed by policy controller and usage policy server such as controlling data usage policies across multiple user equipment . In this embodiment longer term historical storage of usage information occurs in subscriber usage database within subscriber data repository .

In an embodiment a hybrid architecture gathers usage data on user equipment but long term storage of the usage data occurs in subscriber usage database within subscriber data repository . In this way centralization is performed within a service provider infrastructure. This architecture is useful for the roaming scenario depicted in and described below.

Mobile data costs for a subscriber using user equipment may be based on data volume used within a period. For example a subscriber s subscription may entail a charge of 60 up to a 1 Giga Byte GB cap of data access each month with a 3 per MB charge after the 1 GB cap has been exceeded. Data costs also vary based on the home network service provider that user equipment is homed in or connected to. Typically data costs increase when user equipment is roaming in roamed network service provider . Due to these and other dynamic factors that can increase data costs embodiments of the present invention enable subscribers to monitor and control expenditure on data services on user equipment on a real time basis.

In accordance with a provider centric embodiment of the invention monitoring and control of usage and charging for data is performed by methods and systems that reside within home network service provider and remain under the control of home network service provider . In the provider centric embodiment home network access gateway and roamed network access gateway monitor and control packet traffic between user equipment and the Internet . Home network access gateway and roamed network access gateway generate usage accounting records that are input to off line or on line prepaid billing and reporting systems residing in base station subsystems and . Examples of home network access gateway and roamed network access gateway include but are not limited to gateway GPRS Support Node GGSN Packet Data Serving Node PDSN Deep Packet Inspection DPI and Evolved NodeB eNodeB .

Home network service provider and roamed network service provider may provide visibility of data usage records via a website user interface to subscribers that log in to check their account via web portals and .

According to an embodiment subscribers can monitor and control their data usage via web portals and . For example subscribers can select service extensions data usage boosts a lower bandwidth service or other alternatives via home network web portal and or roamed network web portal . These changes are then passed to usage policy server and propagated to server side usage policy application . In an alternative embodiment changes made via home network web portal and roamed network web portal are propagated to mobile usage policy application resident on user equipment .

In another embodiment when a subscriber is roaming and the roaming traffic is not routed through the subscriber s home service network provider home agent or home network access gateway an interaction between a usage policy server in roamed network service provider and a usage policy server in home network service provider is initiated. This interaction between the respective usage policy servers includes a request being sent from usage policy server in home network service provider to a usage policy server in roamed network service provider . According to an embodiment the request is for information that home network service provider needs in order to affect data usage controls for user equipment while it is accessing data in roamed network service provider .

In an embodiment to prevent unexpectedly high roaming charges from roamed network service provider a subscriber using user equipment may select using usage policy application to be barred from all or some data applications while roaming in the network of roamed network service provider . For instance a subscriber using a mobile device such as user equipment may wish to avoid the high cost of data services while they are outside the coverage area of home network service provider but retain the data service when they are not roaming.

According to an embodiment while user equipment is using roamed network service provider a subscriber may opt to have certain applications from application server farm blocked.

Operators of home network service provider and roamed network service provider can detect access to on or off portal applications and they typically choose to charge less or impose no data fees for access to on portal applications from user equipment . In an embodiment a subscriber may choose to select only on portal applications either in home network service provider or roamed network service provider in order to reduce data usage and costs.

In instances when access network depicted in becomes congested an embodiment of the invention provides real time traffic information from access network and more specifically from individual base station subsystems and which enables operators of home network service provider or roamed network service provider to identify areas of congestion within their respective access networks . Policy controller includes operator tools to contain congestion in real time by temporarily enforcing more stringent policies i.e. not allowing bursting behavior or assigning lower priority to subscribers with low tier service plans .

In an embodiment in order to prevent bill shock due to exceeding data quotas and in order to extend usage control to subscribers mobile usage policy application works in conjunction with policy controller to provide proactive notifications to user equipment when subscribers are nearing bandwidth usage thresholds or data roaming charge limits in roamed network service provider . Subscribers can then be given choices in real time in mobile usage policy application such as a service extension a data usage boost a lower bandwidth service or other alternatives. In addition operators of home network service provider or roamed network service provider can extend control to subscribers to set personalized usage caps that can be updated in real time based on personal financial limits or to boost roaming data usage while a subscriber is traveling.

In an embodiment monitoring and control of the data usage is based on user equipment using mobile usage policy application instead of within the infrastructure of home network service provider or roamed network service providers . This distributed system runs on user equipment and usage policy server . In system the charging cost monitoring and control can be performed down to the level of the individual applications running on user equipment . Applications may include but are not limited to games social networking applications Voice over Internet Protocol VOIP applications such as Skype and wireless access to data intensive web sites that host multimedia content such as video.

According to an embodiment a device usage control subsystem executes on user equipment and monitors data flows denoted as on user equipment . The device usage control subsystem comprises the following components local store application controller and mobile usage policy application . These components are described in the following paragraphs.

Application controller is installed to mediate between applications and communication stack of user equipment . In an embodiment communication stack is a Transmission Control Protocol TCP Internet Protocol TCP IP stack. Application controller presents a virtual socket layer to applications . Application controller also counts how many bytes each application sends and receives denoted as data flow . Application controller also stores the data usage on a per application basis in local store denoted as data flow . Application controller checks for application data usage threshold limits defined in the local store by the mobile usage policy application . In an alternative embodiment application controller checks for application data usage threshold limits defined in the global store by the server side usage policy application which can be accessed via calls to Application Programming Interface API .

In an embodiment data usage information for a single device is stored in a data store such as local store on user equipment . . Local store may use non volatile storage on user equipment to hold information such as but not limited to data usage for each application data budgets thresholds tariff information and statistics regarding highest budget applications . Each of these types of information is described below.

Each of the types of information described below may optionally be stored in local store on user equipment . The information described below may also be periodically imported from or exported information to global store residing on one or more usage policy servers .

Data budgets for applications or groups of applications can be set in mobile usage policy application or server side usage policy application . In an embodiment after reaching its budgeted allocation for a given period an application is capped or blocked from further data network usage. According to this embodiment until that period is elapsed or the budget is changed or over ridden by a subscriber application will be blocked from performing additional data transactions thereby allowing the subscriber to control data costs that may otherwise cause bill shock. 

Thresholds for applications are kept whereby the subscriber is notified that an application or group of applications if a subscriber has set a threshold of 75 for an application when that application has consumed 75 of its data budget the subscriber will receive a notification at user equipment .

Tariffs comprise information kept for each known potential roamed network service provider in which the subscriber can roam so that the user has control over which roamed network service provider would be most cost effective to use. Tariff information pertaining to a plurality of roamed network service providers may be stored in a local store on user equipment . Tariff data for each roamed network service provider may reside in a database or data store on usage policy server such as global store .

According to an embodiment local store may periodically import or export tariff information via data flows and respectively to global store residing on one or more usage policy servers associated with one or more roamed network service providers . Tariff information stored in global store and a plurality of local stores can be used to provide flexible tariff distribution. In an embodiment of the invention a carrier based architecture is used to distribute tariffs stored in global store and local stores .

Statistics regarding highest budget applications include cumulative data usage information kept in order to meter and display subscribers user equipment and or applications using highest budgeted amount of data for a give period. For example statistics may be kept on a single user equipment regarding applications on a particular user equipment which have used the largest amount of data. Statistics may also be compiled on usage policy server regarding data usage for a plurality of subscribers and or user equipment .

In accordance with an embodiment of the invention data usage pertaining to a plurality of subscribers is stored in a data store on usage policy server such as global store . According to an embodiment local store may periodically import or export information via data flows and respectively to global store residing on one or more usage policy servers associated with one or more network service providers.

According to an embodiment the types of data described in the following paragraphs are modeled by usage policy application and stored in a local store such as local store .

Usage entity data including but not limited to data identifying a network service provider such as home network service provider network type WiFi 3G etc. user equipment device type device group subscriber or user user group application and groups of applications may be stored in local store .

Quota information such as a quota expressed in MBs or GBs and cost for additional quota levels may be modeled by usage policy application and stored in a local store such as local store . Quotas may be modeled and stored on the network service provider level subscriber level subscriber group level for each application and for groups of applications .

Threshold information such as the percentage of a quota reached in a period i.e. monthly weekly and or daily may also be stored in local store . Thresholds may be modeled and stored on the network service provider level subscriber level subscriber group level for each application and for groups of applications .

In an embodiment upon the authorization of a session a usage breach probability is calculated by a breach probability calculation module not shown within quota manager . The usage breach probability represents the probability that the subscriber will breach his or her usage quota during the session. The usage breach probability can be based on any information and network usage statistics available at the time the session begins. For example usage breach probability can be based on but not limited to the following information and network usage statistics the current date the billing date the number of breaches for the subscriber the number of breaches for all subscribers when breaches have occurred in the past for the subscriber when breaches have occurred for all subscribers knowledge of peak usage patterns e.g. on peak off peak weekdays cumulative usage for the subscriber and usage quota for the subscriber. Further the following rules can be used to determine the usage breach probability the probability of a quota breach increases towards the end of the billing period the probability of a repeat offender subscriber breaching a quota is significantly higher than the general subscriber population a subscriber is more likely to breach at a time in the billing cycle when historic breaches have occurred and breaches are more likely to occur at peak usage periods.

The calculated usage breach probability is used by a usage update interval module not shown within policy controller to determine the interim interval for the session in that a higher usage breach probability would be associated with a shorter interim interval. Further in an embodiment where there are multiple subscribers each with active subscriber sessions occurring simultaneously the usage breach probability of the subscriber can be compared to the usage breach probability of other subscribers with active sessions to determine the interim interval for the subscriber. This allows resources to be optimized by using resources to monitor the subscribers most likely to breach. The interim interval is communicated externally via a network provider interface. In embodiments of the invention the network provider interface can be part of web portal for home network service provider or web portal for roamed network service provider .

Upon the lapse of the interim interval or an end of the subscriber session a usage update is collected and input to the breach probability calculation module. The breach probability calculation module updates the calculation of the usage breach probability using the information contained in the usage update. If the amount of usage in the current session is sufficiently high the usage breach probability may increase.

The breach analysis module also determines the degree the usage data should be analyzed. The degree to which the usage data should be analyzed is based on the updated usage breach probability. For example a new cumulative usage total may be calculated if the usage breach probability exceeds a first threshold and the new cumulative usage total may be evaluated against the subscriber s usage quota if the usage breach probability exceeds a second threshold. Further in an embodiment where there are multiple subscribers each with active sessions occurring simultaneously the usage breach probability of the subscriber can be compared to the usage breach probability of other subscribers with active sessions to optimize the level of analysis for all subscribers.

Should the second threshold be exceeded the cumulative usage total is evaluated against the subscriber s usage quota by the breach analysis module and a determination is made as to whether a usage breach has occurred. If a breach has occurred the appropriate breach action occurs. For example a notification message can be sent to the subscriber indicating the breach e.g. SMS subscriber traffic can be redirected the subscriber s session can terminate a billing record may be generated or any combination of the above actions can be performed. Further the subscriber s service profile can be updated accordingly.

If a breach has not occurred a determination is made by the breach analysis module as to whether the update is a final update as would be the case when a subscriber seeks to end a session. In the case of a final update a subscriber session is ended and information in the subscriber s service profile is updated accordingly.

In a further embodiment of the current invention system for providing data communications cost monitoring and controls may optionally generate a marketing response based on the analysis of the subscriber information available. For example a subscriber who initiates a request to view a video would be notified of the likelihood of an upcoming usage breach such that the subscriber could obtain additional usage quota to support the video request. Such a marketing notification would be based on a current usage breach probability and preferably would precede a usage breach event by sufficient time so as to add to the growth of the subscriber network provider relationship. Such a capability is embodied in the special offer interface described below with reference to whose coupling to the breach probability calculation module provides the current usage breach probability to the special offer interface . When the current usage breach probability exceeds a marketing threshold a message communicating a marketing offer i.e. a special offer may be initiated by the special offer interface as described below with reference to .

In accordance with an embodiment of the invention the ability to optimize usage collection and analysis takes advantage of the statistical correlation between various types of information and the usage breach probability of a particular subscriber. The statistical correlation can be captured in a variety of functional relationships. For example if the three breach factors of day of week designated as breach factor f cumulative usage f and usage quota f were particularly informative as to the likelihood of a subsequent breach a possible relationship may be captured as follows Usage breach probability 123

where A B and C are coefficients that have been developed so as to maximize the accuracy of the usage breach probability calculation. Various means may be used to determine these coefficients including regression analysis. Moreover the scope of this approach is not limited to linear relationships but encompasses non linear relationships discrete relationships and time varying relationships. Similar relationships can also be developed for the interim interval that can found to depend on such factors as usage breach probability and actual overall usage.

Information regarding data costs incurred may also be modeled by usage policy application and stored in a local store such as local store . Data costs may be modeled and stored on the network service provider level subscriber level subscriber group level for each application and for groups of applications .

Usage intervals may be stored be stored in local store on a daily weekly and monthly basis. Usage intervals pertaining to a plurality of subscribers and user equipment may also be stored in global store .

Tariff information for a plurality of networks regarding data prices i.e. expressed as cost per Byte MB or GB may also be stored in a local store such as local store . Tariff information is collected and stored on a network level.

With continued reference to in an embodiment mobile usage policy application provides the functionality described in the following paragraphs.

Mobile usage policy application provides a user interface for monitoring and control denoted as data flow . An exemplary user interface is provided in which are described in detail below.

Mobile usage policy application also defines the data and policies that application controller and local store require denoted as data flow in .

The following are the types of data usage policies defined by mobile usage policy application for application controller on user equipment .

Mobile usage policy application can set data usage quotas thresholds including alert and stop thresholds allowable maximum tariffs i.e. tariff limits expressed in terms of maximum acceptable costs per Byte MB or GB allowable network service providers i.e. allowed roamed network service providers for a given subscriber user equipment and or application and allowable network tariff minimums. For example mobile usage policy application may only allow a given subscriber user equipment or application to access a roamed network service provider tariff less than a certain currency amount per storage unit i.e. US dollars per MB or GB .

In an embodiment usage policy server hosts server side usage policy application global store a Global Policy Controller and web portal .

Global store optionally collects data usage information from local stores from a plurality of user equipment . In an embodiment global store comprises a database that provides rolled up or per user equipment per subscriber per application breakdowns or views of usage data within various contexts. These contexts may include but are not limited to corporations organizations i.e. departments and a subscriber. The level of granularity of data stored in global store allows subscribers and network administrators to run data queries and generate reports regarding data usage for a single subscriber single user equipment groups of subscribers and related sets of user equipment i.e. user equipment leased by an organization or corporations for a given period. In an embodiment these queries and reports can be accessed via web portal .

Global store on usage policy server optionally stores and distributes the per user equipment information. In this way usage policy server can be used to provide centralized provisioning of user equipment .

Global policy controller is an application on usage policy server that enables access to global store and drives global store to collect information from a plurality of user equipment denoted as data flow . Global policy controller also drives global store to provision information to a plurality of user equipment denoted as data flow .

In the embodiment of system the infrastructure of a network service provider provides data usage metering and control. Usage policy server provides interface to subscribers using user equipment to allow subscribers to monitor and control charging for data usage.

In an embodiment the data usage metering and control is web based and accessed via web portal . Alternatively data usage metering and control is device application based using interface invoked locally on user equipment . Interface allows the device to register with usage policy server denoted as data flow . After registration user equipment is synchronized with usage policy server and local store is updated denoted as data flow .

Usage policy server also allows subscribers and network administrators to access web interface via web portal to fetch values for data usage attributes denoted as data flow such as but not limited to thresholds and quotas on a per application home network service provider roamed network service provider or subscriber basis.

Usage policy server also stores usage data for all registered user equipment in subscriber usage database for a given period e.g. 2 months .

Usage policy server then registers with online and offline charging systems such as policy and charging rules function PCRF . In embodiments the charging systems may include AAA and other protocols capable of receiving data usage information for user equipment .

According to an embodiment PCRF receives a bulk registration request from usage policy server denoted as data flow . The bulk registration request comprises data usage information for a plurality of user equipment that has registered with usage policy server . The data usage information contains threshold and stoppage policies based on criteria such as data volume and the characteristics of roamed network service provider .

System can be used to provide flexible policy descriptions for a network service provider s charging plan. For example a network service provider can furnish its policy and charging rules from PCRF via usage policy server . The provider based architecture illustrated in enables distribution of flexible policy descriptions corresponding to network service provider charging plans via data flows between PCRF and usage policy server .

System and the provider based architecture depicted in can also be used to provide flexible tariff distribution. Tariffs comprise information kept for each known potential roamed network service provider in which a subscriber can roam. Access to this information on user equipment is useful when a subscriber wants to determine which potential roamed network service provider will be most cost effective to use. Tariff information pertaining to a plurality of roamed network service providers may reside in a database or data store on usage policy server to be distributed to a plurality of user equipment .

PCRF accesses usage information forwarded by one or more network access gateways . In an embodiment this usage information is received by network access gateway via a radio access network RAN . PCRF sends usage stream information comprising current data usage information for user equipment to usage policy server denoted as data flow .

Usage policy server requests that PCRF control usage i.e. affect bearer channel for user equipment once a stoppage decision is made by PCRF denoted as data flow .

In step a subscriber using interface on user equipment enters data needed to make an initial request to register user equipment . In another embodiment this step is performed by a subscriber accessing a web based user interface via web portal on usage policy server .

In step data from subscriber usage database is sent from usage policy server to user equipment in order to synchronize. In this step user equipment is synchronized with usage policy server and local store is updated.

In step a request to fetch values for data usage attributes is sent from user equipment to usage policy server . Attribute value pairs fetched in this step may include application subscriber and or network based thresholds and quotas.

In step a bulk registration request is sent from usage policy server to PCRF . In this step a bulk registration request from usage policy server comprising data usage information for a plurality of user equipment that has registered with usage policy server is forwarded to PCRF . In an embodiment the data usage information contains threshold and stoppage policies based on criteria such as data volume and the characteristics of a home network service provider or a roamed network service provider .

In step PCRF sends usage stream information comprising current data usage information for user equipment to usage policy server .

In step usage policy server sends a request to PCRF . In this step a request to control data usage for user equipment is sent based upon a stoppage decision made by PCRF .

In step a user equipment device registration request is sent to a usage policy server . In an embodiment this step is performed using interface on user equipment . In another embodiment this step is performed by a subscriber accessing a web based user interface via web portal on usage policy server .

In step user equipment is synchronized and updated using data from subscriber usage database sent from usage policy server . In this step local store is updated.

In step values for data usage thresholds and attributes are requested from user equipment . In an embodiment thresholds and attribute value pairs are tunable or editable on user equipment using interface . Attribute value pairs may include application subscriber and or network based thresholds and quotas. Thresholds may include percentage usage levels beyond which a notification is to be sent to a subscriber using user equipment .

In step bulk registration is performed. The bulk registration includes collecting data usage information for a plurality of user equipment that has registered with a usage policy server . The data usage information comprises threshold and stoppage policies based on criteria such as data volume and the characteristics of network service providers.

In step the usage stream for a subscriber is updated. In this step usage stream information comprising current data usage information for user equipment may be sent to a usage policy server .

In step a determination whether an attribute value obtained in step has been exceeded. In this step a determination is made whether any attribute value has been exceeded such as a daily MB cap a cap by an application running on user equipment a cap for user equipment and or an overall data cap for a subscriber

If an attribute has not been exceeded operation proceeds to step . If threshold has been exceeded operation proceeds to step .

In step a determination whether a threshold value obtained in step has been exceeded. In this step a determination is made whether any threshold has been exceeded such as a percentage threshold regarding daily usage in MBs has been reached.

If a threshold has been exceeded operation proceeds to step . If threshold has not been exceeded operation proceeds to step .

In step a notification is sent to subscriber. In this step a notification may comprise a prompt in interface an email message a Short Messaging Service SMS message a subscriber notification posted via web portal or any other notification capable of notifying a subscriber that a threshold has been exceeded.

In step after the notification sent in step has been received by a subscriber a determination is made whether a service characteristic has been changed. In this step a subscriber in response to the notification sent in step can optionally change a service tier associated with their subscription in order to alleviate either an exceeded threshold determined in step or an exceeded attribute determined in step . In this step an upgrade to a next service tier can be made when a subscriber is close to reaching bandwidth caps or thresholds.

If a service characteristic is modified operation proceeds to step . If a service characteristics are unchanged operation proceeds to step .

In step current total data usage is determined for user equipment . In this step data usage for applications running on user equipment may also be determined. After collection and calculation of data usage information is performed in this step control is passed back to step .

In step data usage is controlled on user equipment after a subscriber opted to not modify service characteristics in step and the method ends.

In an embodiment of the present invention mobile usage policy application may include the exemplary interface illustrated in . are described with continued reference to the embodiments illustrated in . However are not limited to those embodiments. Throughout displays are shown with various hyperlinks command regions turn wheels buttons slide bars and data entry fields which are used to initiate action invoke routines enter data view data or invoke other functionality. For brevity only the differences occurring within the figures as compared to previous or subsequent ones of the figures are described below.

A subscriber can set Notify and Stop limits by selecting using input device limits button . Similarly a subscriber can display and set tariffs by selecting using input device tariffs button . Interface also displays total data usage .

In an embodiment of the present invention the methods and systems of the present invention described herein are implemented using well known computers such as a computer shown in . The computer can be any commercially available and well known computer capable of performing the functions described herein such as computers available from International Business Machines Apple Sun HP Dell Cray etc.

Computer includes one or more processors also called central processing units or CPUs such as processor . Processor is connected to communication bus . Computer also includes a main or primary memory preferably random access memory RAM . Primary memory has stored therein control logic computer software and data.

Computer may also include one or more secondary storage devices . Secondary storage devices include for example hard disk drive and or removable storage device or drive . Removable storage drive represents a floppy disk drive a magnetic tape drive a compact disk drive an optical storage device tape backup ZIP drive JAZZ drive etc.

Removable storage drive interacts with removable storage unit . As will be appreciated removable storage drive includes a computer usable or readable storage medium having stored therein computer software control logic and or data. Removable storage drive reads from and or writes to the removable storage unit in a well known manner.

Removable storage unit also called a program storage device or a computer program product represents a floppy disk magnetic tape compact disk optical storage disk ZIP disk JAZZ disk tape or any other computer data storage device. Program storage devices or computer program products also include any device in which computer programs can be stored such as hard drives ROM or memory cards etc.

In an embodiment the present invention is directed to computer program products or program storage devices having software that enables computer or multiple computer s to perform any combination of the functions described herein

Computer programs also called computer control logic are stored in main memory and or the secondary storage devices . Such computer programs when executed direct computer to perform the functions of the present invention as discussed herein. In particular the computer programs when executed enable processor to perform the functions of the present invention. Accordingly such computer programs represent controllers of the computer .

Computer further includes a communication or network interface . Network interface enables computer to communicate with remote devices. For example network interface allows computer to communicate over communication networks such as LANs WANs the Internet etc. Network interface may interface with remote sites or networks via wired or wireless connections. Computer receives data and or computer programs via network interface . The electrical magnetic signals having contained therein data and or computer programs received or transmitted by the computer via network interface also represent computer program product s .

The invention can work with software hardware and operating system implementations other than those described herein. Any software hardware and operating system implementations suitable for performing the functions described herein can be used.

While various embodiments of the present invention have been described above it should be understood that they have been presented by way of example only and not limitation. It will be understood by those skilled in the relevant art s that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined in the appended claims. It should be understood that the invention is not limited to these examples. The invention is applicable to any elements operating as described herein. Accordingly the breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

