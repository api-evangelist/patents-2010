---

title: Secure coupon distribution
abstract: Systems and method are provided for ensuring secure and validated coupon generation and distribution, and the prevention of fraudulent coupon printing. A Uniform Resource Locator (URL) is provided to a consumer, where the URL points to a dynamic coupon webpage presentable to the consumer, and where the URL includes a link identifier indicative of a coupon contained on the dynamic coupon webpage to be printed. The URL may include a member identifier (MID) that uniquely identifies the consumer and provides security regarding the printing of the coupon by limiting the number of prints that the consumer can make of the coupon. Furthermore, a token may be utilized in conjunction with the MID for additional security regarding the printing of the coupon by preventing the printing of the coupon if the token is invalid or expired.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08775245&OS=08775245&RS=08775245
owner: News America Marketing Properties, LLC
number: 08775245
owner_city: New York
owner_country: US
publication_date: 20100211
---
Various embodiments relate generally to the field of coupon generation and distribution. More particularly various embodiments relate to secure and validated coupon generation and distribution and the prevention of fraudulent coupon printing.

This section is intended to provide a background or context to the invention that is recited in the claims. The description herein may include concepts that could be pursued but are not necessarily ones that have been previously conceived or pursued. Therefore unless otherwise indicated herein what is described in this section is not prior art to the description and claims in this application and is not admitted to be prior art by inclusion in this section.

Traditional marketing approaches have included the use of discount offers distributed to consumers in the form of paper or printed discount certificates commonly referred to as coupons. Such coupons are generally distributed via e.g. mailers or newspaper cutouts or presented to consumers at a retail location. These coupons typically contain transactional data describing a particular transaction enabled by the coupon such as a product s description the coupon s amount or value an expiration date etc. Additionally such coupons may contain certain identification data e.g. various numbers letters barcodes or other symbols sufficient to uniquely identify the coupon and or the product or service to be discounted. For example upon presentation of a coupon at a point of sale terminal the coupon could be scanned or otherwise identified and the requisite discount or value associated with the coupon could be applied to a purchased product.

With the advent of the Internet online shopping and advertising has become more prevalent. For example many retailers now maintain websites to allow consumers to shop online for products and or obtain certain information related to such products. Additionally many businesses now also provide coupons to consumers in an electronic format. That is coupons can be sent to consumers via email where the email contains a graphic representation of a coupon that can be printed by the consumer at his her local printer. The printed coupon can then be taken to a retail location and redeemed by the consumer.

Due to the nature of these conventional electronic coupons and the manner in which they are distributed it is easy to redistribute them to other consumers some or all of whom may not necessarily be authorized to take advantage of the associated discounts offers. For example retailers may require consumers to register at their website in order to receive coupons that are periodically sent via email. However the registered consumers may then forward the email to other consumers e.g. family or friends who have not registered with the retailer and thus are not authorized to receive and redeem the coupons. Additionally registered consumers may post Uniform Resource Locators URLs links to the electronic coupons on certain coupon websites or online blogs so that any visitor to the coupon website or blog can take advantage of any posted electronic coupon. Because the electronic coupons are being posted outside of a retailer s or coupon provider s control electronic coupons cannot be prevented from being fraudulently printed and redeemed.

One embodiment of the invention relates to a method and system comprising a server and memory where a location identifier is provided to a user and where the location identifier points to a discount certificate webpage and contains a link identifier indicative of one or more discount certificates to be printed. The discount certificate webpage is presented to the user as well as the coupon to be printed wherein the location identifier has appended thereto at least a user identifier associated with the user. The user identifier is verified and printing of the discount certificate is performed where any predetermined security regarding the printing of the discount certificate is applied based on at least the user identifier appended to the location identifier.

Another embodiment of the invention relates to a method and system where a first location identifier is provided to a user at a first webpage the first location identifier pointing to a second webpage and including a link identifier indicative of a discount certificate to be printed. A token request is received the token request comprising a second location identifier wherein the second location identifier includes the link identifier and a code and wherein the second location identifier has appended thereto at least a user identifier associated with the user. The code is verified and a token is generated in response to the token request. The time when the token was generated is determined wherein the token is generated based upon the user identifier. The token is passed back to the first webpage whereupon the token is appended to the first location identifier. A print request is then received for printing the discount certificate presented on the second webpage the print request comprising the first location identifier with the appended token. The user identifier is verified and the print request is authorized only if the first location identifier has appended thereto the same token that was generated in response to the token request and the token has not expired relative to the time when the token was generated.

Yet another embodiment of the invention relates to a method and system where a public location identifier to be provided to a user is generated. The public location identifier points to a dynamic discount certificate webpage presentable to the user where the public location identifier includes a link identifier indicative of a discount certificate presented on the dynamic discount certificate webpage to be printed. The method and system further comprise printing the discount certificate presented on the dynamic discount certificate webpage.

These and other advantages and features of various embodiments together with the organization and manner of operation thereof will become apparent from the following detailed description when taken in conjunction with the accompanying drawings wherein like elements have like numerals throughout the several drawings described below.

Various embodiments provide for electronic discount certification e.g. coupon generation and secure distribution and the prevention of fraudulent printing via a coupon system operated by a coupon distributor. illustrates an exemplary process flow in the lifecycle of an electronic coupon. As described above electronic coupons can be provided to a user e.g. consumer directly by an advertiser or even a product or service retailer. Alternatively product or service providers retailers or marketers may collaborate with a coupon distributor that operates a coupon system to provide coupon generation and or an online network or distribution channel for electronic coupons. With reference to an administrator of a coupon system is shown as setting up an advertiser at a partner at and or a coupon template at to allow the advertiser to include any relevant data or details regarding the coupon. That is the administrator obtains and enters relevant advertiser and partner information and configures the coupon system for use with the advertiser and or partner . As utilized herein the term advertiser may refer to a client of or relative to the coupon distributor and coupon system sponsoring offers e.g. a marketing entity or consumer packaged goods company. A partner can refer to a client of or relative to the coupon distributor and coupon system such as e.g. a network distribution partner of the coupon distributor that distribute products e.g. General Mills Coca Cola Procter Gamble etc. It should be noted that advertisers and partners may also be considered to be users of the coupon system e.g. when the advertiser creates coupons using a coupon template when the partner approves coupon association etc. as described in greater detail below . It should also be understood that illustrates single instances of the administrator the coupon distributor the advertiser and the partner merely for simplicity. However various embodiments contemplate the involvement of any number of combination or groups of these entities.

At the administrator associates or assigns the coupon template to the advertiser . At the advertiser uses the coupon template associated with or assigned to the advertiser and creates an offer while providing the relevant details associated with the coupon. At the advertiser associates the created offer with a partner . At the administrator validates and approves the offers created by the advertiser and at the partner verifies and approves any offers associated therewith.

At the approved offers are published online. Examples of online publishing include but are not limited to displaying the offer on a website provided via the coupon system at displaying the offer at one or more partner websites at and sending the offer to a Direct to card D2C partner in a feed file at using e.g. a file transfer protocol ftp . A D2C partner can refer to a retailer or other entity that offers loyalty cards where the coupon system can send the offer or coupon directly to a retail loyalty card associated with a particular consumer.

From a consumer perspective a consumer may select one or more desired coupons for printing. That is from either the coupon system website or a partner website the consumer may access one or more coupons and print them locally at a printer. Alternatively at and in accordance with the D2C scenario the consumer may select the one or more desired coupons to be added to his her retail loyalty card. At the coupon system sends the consumer loyalty card number and the selected coupons data in a feed file to the D2C partner via FTP. Thereafter at the coupon system receives and processes a redemption data feed file obtained from the D2C partner.

The coupon system further includes a database server that is common to the integrated CMS application and the coupon system website. It should be noted that the coupon system website is effectuated by a website application for performing the requisite processes described in greater detail below. Additionally it should be noted that both the integrated CMS application and the website application can have their own independent schemas and respectively. That is offer setup data flows into both the schemas and from the integrated CMS application and is used by the website application for display and integration with partner sites.

The website application provides a public facing website that hosts one or more webpages containing electronic coupons for display and printing by consumers. The website application fetches electronic coupons from the common database server between the website application and the integrated CMS application and displays the electronic coupons. Thus a consumer may visit the coupon system website and browse or access one or more desired offers and print coupons for the desired offers. The website application also provides options for integration with partners. Further still the website application hosts e.g. a Real Simple Syndication RSS feed which is open to the public allowing consumers to subscribe to the RSS feed to receive electronic coupon data on a frequently updated basis. It should be noted that other types of web syndication or data aggregator technology may be utilized in accordance with various embodiments.

As described above various embodiments provide the ability for a coupon distributor to send an offer or coupon directly to a retail loyalty card associated with a particular consumer via D2C partner integration. The D2C partner integration is done using a batch process component hosted in a server that hosts the coupon system website where the batch process component periodically creates a flat feed file containing the offer setup data. The file is transmitted to an ftp server to be picked up by the D2C partner headquarters HQ . The batch process component also creates and transmits consumer coupon data to the D2C partners as well as imports and processes the redemption data feed file from the D2C partners transmitted via the ftp server .

Partner sites such as partner sites and illustrated in are integrated with the website application using various methods. In accordance with a first method the website application exposes one or more web services that provide the coupon data for a particular partner. The partner can consume the web services by giving out their partner ID to get coupon details. Additionally the partner if they so desire can apply their own rendering logic to display the coupon on their own partner site .

In accordance with another method partner site integration involves presenting the coupon system website as a microsite on the partner site . For example the partner may include an iframe inside their own partner site website where the source will point to the coupon system website that hosts displays the coupon data.

Further still a method of site hosting may be utilized to effectuate partner site integration. In accordance with this method partner site integration begins with partner site setup in the integrated CMS application as described above. Once a partner site is setup in the integrated CMS application the website application via a hosted site module retrieves the data to display coupon data on a webpage whose look and feel will be the same as that of the partner site . It should be noted that this entire webpage can be hosted by one or more servers hosting the coupon system website or alternatively dedicated web servers.

The User Logon module is configured to handle various aspects of user access and identification. For example the User Logon module controls user login processes change password and forgotten password functionalities as well as a footer functionality in the integrated CMS application. It should be noted that all users of the integrated CMS system including e.g. any administrators advertisers and or partners may access these features for their respective purposes e.g. providing consumer access requirements data for accessing a partner site or the coupon system website etc.

The Master Data Setup module deals with any master data setup related functionalities. Such functionalities include but are not limited to the following advertiser setup e.g. loading advertiser information into the coupon system coupon template setup e.g. setting up coupon template layouts offer information to be rendered etc. user setup e.g. setting up username and password for authorization creating privileges and roles assigning roles to users etc. clearinghouse setup e.g. maintaining an agency company responsible for settling trading accounts collecting and maintaining marginal monies bringing together seekers and providers of goods etc. member identifier MID setup e.g. setting up a client s unique identifier for each member registered consumer partner setup e.g. setting up one or more partners e.g. retailers or network distribution partners display category setup setting up display categories or product types that are specified when an offer is setup for filtering or grouping offers for consumers partner type setup e.g. setting up partners based on whether the partner is e.g. a registration required partner partner site setup e.g. setting up micrositing information such as whether or not a microsite will contain iframes other visual attributes etc. and user email registration setup e.g. setting up a user registration process for the required registration type . All of these features are functionally a part of the integrated CMS application and can be accessed by an administrator.

The Offer Setup module is configured to group certain functionalities including but not limited to the following associating offers e.g. associating offers or disassociating offers with partner sites offer print group setup e.g. setting effective coupon dates setting offer group print limits etc. sweepstake form lead generation setup offer setup e.g. setting up offers specifying a type of offer provided and other related information offer approval setting up the ability for partners to approve advertiser submitted created offers and print URL setup generating print URLs associated with offers promoted by e.g. a partner at a partner site setting print limits etc. With regard to the aforementioned sweepstake form lead generation setup it should be noted that the coupon system may be used not only for coupon generation and distribution but for sweepstakes purposes as well. That is forms may be created and used for sweepstake and lead generation where when a consumer clicks on a link to a sweepstake lead generation form the consumer information entered into the form is recorded an passed on to the client holding the sweepstake promotion. The Offer Setup module is also a part of the integrated CMS application and is primarily accessed by advertisers.

Before an offer is set up a Letter of Commitment LOC should be created. The LOC is specific to a single advertiser although multiple offer programs can exist for one or more brands of an advertiser in a single LOC and the LOC can be associated with D2C or printable coupon distribution. Moreover a single LOC can cater to multiple timelines and multiple distribution channels. There are different types of LOCs including for example a time based LOC where an offer is valid only for a contracted time period a print based LOC where an offer is valid only until a predetermined print limit is reached and a partnership based LOC which is similar to the print based LOC but also includes a new coupon alert spotlight a solo page and a web link. Additional LOC types include a coupon tech LOC which refers to a contract between the coupon distributor and an advertiser where the advertiser purchases e.g. a print URL. It should be noted that in certain instances a print URL may be considered to be an advertiser function and hence the advertiser may be setup as a partner. Yet another LOC type includes an account specific LOC used for coupon programs distributed at a limited number of retail network sites instead of on the coupon distributor network network channels.

It should be further noted that a LOC may only be created by e.g. an administrator of the coupon distributor and once the requisite information is submitted regarding the LOC the LOC can be generated in a pdf format or Word format. Thereafter the LOC is sent to the advertiser and to a finance division of the coupon distributor for approval. Various change rules and fees can be applied to LOC creation as appropriate. Additionally brand category exclusivity can be applied to LOCs and are valid for specific time period.

The Batch Process module is a part of the website application and handles offer coupon publishing and sending offer coupon and consumer data to D2C partner which occurs in as a background process es without any direct human user interaction. For example a plurality of offers coupons may be collected into a set or batch and processed together for publication on e.g. a partner site. Moreover sending consumer data to the D2C partner functionality involves the previously described D2C partner integration where the consumer data e.g. retailer loyalty card number and any attached coupons are written into a flat file and transmitted to the D2C partner via ftp or some other appropriate file transfer method or protocol.

The Consumer Access module like the Batch Process module is part of the website application and contains features which are available to consumers through the coupon system website. Such features which are available to the public include but are not limited to offer coupon display offer coupon print user profile management email subscription and sweepstake lead generation display .

The Presentation tier includes the integrated CMS application a consumer access component and a D2C partner integration component . The integrated CMS application of the Presentation tier utilizes JavaServer Faces JSF pages a Java based web application user interface UI development framework to implement UI properties backing beans for defining UI components methods that perform UI component functions and UI components . JSF differs from some other Model View Controller MVC frameworks in that JSF is a component oriented and event driven framework. JSF includes among other features a set of application programming interfaces APIs for displaying user GUI components and managing their state handling events and input validation page navigation using Extensible Markup Language XML etc. tag libraries to access JSF components predefined default UI components and server side event handling. Additionally the coupon system utilizes MyFaces and RichFaces implementations of the JSF specifications. MyFaces is a particular JSF implementation promulgated by the Apache Software Foundation. RichFaces refers to a component library for JSF built on the Ajax framework and includes Ajax components. Furthermore the coupon system utilizes various custom JSF components apart from the standard JSF components. It should be noted that other frameworks or development platforms may be utilized in accordance with various embodiments.

Moreover the integrated CMS application includes a TinyMCE tool to create coupon templates. TinyMCE is a JavaScript based tool that provides rich text editing capabilities and allows saving a template in HTML format. This enables seamless integration of the coupon templates with the offer setup process. Custom visual as well as non visual components may be created using the TinyMCE API to implement system specific functionalities for the coupon template design process. For example users such as advertisers may require the ability to add an image to a coupon template resize it and or place the image in any position within the coupon template.

The Consumer Access component of the Presentation tier also utilizes JSF pages to implement a print at home feature and support beans . Additionally the Consumer Access component includes an offers web services feature where the coupon system provides an integration option for partners through web services as described above. For example the coupon system exposes a web service which provides coupon information for specific partners requesting it. The web service is hosted at the website application server and any end point information may be given to those partners wishing to consume it. The partners use web services description language WSDL generated to consume the web service and provide their details in the request. Any coupons published for the partner are returned in a response to the partner request which is then rendered at the partner site using their own rendering logic.

A coupon RSS feed feature is also provided in the Consumer Access component . Coupon data that will be available at the coupon system website may also be published as an RSS feed for consumers. Consumers may subscribe to this RSS feed and use a viewer tool to view coupon information at e.g. their personal computer. This enables consumers to get updates regarding coupon information automatically at a computer without logging into the coupon system website.

The print at home component that allows electronic coupons to be printed by a consumer may be embedded in the JSP and implemented using e.g. an ActiveX and Java Applet client for MS Windows and Apple Mac based clients respectively. Such client components are preferably lightweight and can be used to get device IDs e.g. the MAC address of a client machine. Obtaining a device ID allows the coupon system to effectuate sending the coupon to a printer to be printed. Additionally capturing the MAC address allows the coupon system for example to verify actual printing of a coupon. That is the system can verify whether or not a print request job is being sent to an actual printer device rather than just some sort of data capture such as a print to file request. Actual coupon generation will happen on the website server side using Hypertext Markup Language HTML to Portable Document Format PDF transformation. The generated PDF is sent to the client for printing using embedded JavaScript. Additionally JSP pages will also be utilized to implement the offer display component for displaying offers coupons on e.g. the third party coupon distributor website.

Further still the Presentation tier includes a D2C partner integration component which as described above involves writing consumer data e.g. retailer loyalty card number and any attached coupons into a flat file and transmitting it to the D2C partner via ftp.

The Business tier follows a Service Oriented Architecture SOA pattern. That is all business logic is accessible through a set of services. These services are entry points to the business logic layer and to access any business components.

Spring is a flexible framework for the Java platform with convenient features including at least the following flexible bean management aspect oriented programming AOP support web MVC framework integration with other frameworks scheduling support email utility Java EE Connector Architecture JCA support Java Management Extensions JMX support Java Message Service JMS support web services Object Relational O R tool integration and declarative transaction management. Spring also provides a high degree of abstraction and uses inversion of control resulting in increased decoupling configurability and management. Spring is used for managing the backing bean business service business objects EJBProxy not shown and data access objects DAO . Spring components such as the following are utilized Spring Core for implementing Dependency Injection and managing bean life cycle of business services and business objects Spring Object Relational Mapping ORM for providing a template for the iBATIS persistence framework Spring AOP for declarative transaction management and Spring AOP for Message Driven Bean MDB .

Business service component follows an Application Service pattern and is an entry point for any business related operation. Again it follows the standard SOA pattern and uses the required business objects and if necessary calls a transaction manager to mark a transaction boundary in order to provide a service to the Presentation tier . The business object component holds the business logic. If the business logic involves e.g. database access the business logic invokes appropriate DAOs of the Integration Tier to perform various database operations involved in accomplishing the functionality.

The Business tier further includes a batch component which receives any feed files from the D2C partner integration component using ftp. That is information such as offer data coupons selected by a consumer etc. are sent to the batch component for batch processing as described above and redemption information from partners may be received from partners. Offer publishing as also described above is yet another function that can be implemented as a batch process which will be triggered using e.g. a CRON job scheduler utility.

In terms of transaction management Spring s declarative transaction will be utilized. That is a business service component may initiate some transaction and the transaction context will automatically propagate to the business objects by the transaction manager component of Spring. The business services component may also be responsible for the overall management of transactions by starting committing and marking the boundary of the transactions based upon e.g. client requests and providing necessary transactional contexts to all business objects .

As described above the TinyCME tool is used to create coupon templates. An actual coupon may then be generated using a coupon generation component from an existing coupon template. Any associated offer details are fed into a selected coupon template and a new HTML coupon file is generated which may then be printed via e.g. the print at home function . The Coupon HTML file is converted to XML using an HTML Tidy tool which in turn is converted to a Transform Formatting object XMLFO using e.g. XML transformer or some similar document file transforming tool. From the Formatting object and standard Extensible Stylesheet Language XSL a PDF file is generated and saved in the website server. An Acrobat script embedded in the PDF using iText enables PDF document printing in silent mode.

The Data Access tier is used as the integration junction of the integrated CMS application and the coupon system website website application with the data tier. DAOs are deployed in this tier where DAO classes generally relate to specific business functionality and integrate the business tier with data tier. The Data Access tier also aids in connecting relational database management systems RDBMS using a standard Java Database Connectivity JDBC API or an ORM tool to keep the Business tier isolated from any underlying persistence mechanism. iBATIS refers to a Data Mapper Framework that in contrast to the traditional JDBC approach that constitutes many operations other than writing Standard Query Language SQL queries reduces the amount of requisite Java code. That is the iBATIS SQLMap framework significantly reduces the amount of Java code normally needed to access a relational database. Moreover iBATIS effectively eliminates the mixing of Java code with SQL Code. DAO classes may extend and use base custom DAO classes provided by the third party coupon distributor.

A Persistence tier represents one or more databases and their constituents. In the example application architecture illustrated in two data stores are shown as being utilized. A first database is utilized for maintaining any integrated CMS application data. A second database is utilized to store data from the coupon system website. The integrated CMS application may be responsible for pushing data from its own database to the second database . For example once an offer is verified the offer is pushed to the coupon system website database . The Data Access tier uses JDBC to connect to the database and iBATIS uses the JDBC connection to perform various SQL operations to achieve data persistence.

A Pervasive Utility layer is also part of the application architecture . A framework includes a Logging component a Mail Service component and an Exception Handling component . The Logging component internally uses log 4j for tracking the exceptions errors in the system. It should be noted that other logging utilities may be utilized other than the Java based log 4j. Logging is provided as a default for all critical errors and logging levels may be made configurable as needed. With log 4j it is possible to enable logging at runtime without modifying the application binary where statements can remain in shipped code without incurring a heavy performance cost. Further still logging behavior can be controlled by editing a configuration file without touching the application binary.

The Mail Service component is a wrapper over the Java Mail API used to send receive mail. The coupon system utilizes this API to send system generated email notifications to e.g. an administrator or consumer. Exception handling component defines different types of exceptions relevant to each application tier. Various exceptions defined in the Framework include but are not limited to DAO Exception Business Exception and Presentation Exception. Every layer tier catches any potential run time exceptions and converts them into layer specific exceptions where all exceptions may be logged with an easy to customize declarative mechanism. Meaningful error messages can be generated for display to a user such as an administrator or advertiser.

With regard to security illustrated as a Security component various embodiments utilize a user to role mapping mechanism. The role performs certain functionalities and users pertaining to the role will inherit all the behaviors of a particular role. Security with respect to the integrated CMS application involves a two level authentication mechanism due to its use by internal and external users. That is active directory authentication is provided for internal users such as administrators of the coupon system and database driven authentication is provided for external users such as partners or advertisers. It should be noted that the active directory and or the authentication database for external users may be configured as e.g. one or more data repositories that are separate from but accessible by or from the coupon system.

The Pervasive Utility layer may further include an Auditing component . Auditing can allow for maintaining an audit trail or a journaling function for e.g. required database tables. Data administrators or database users can query a journal history table to measure changes if any that may have occurred over some particular period of time for a particular database table.

Once a user s identity has been confirmed the coupon system retrieves the accessible resources for the logged in user based on Role Based Access Control RBAC from the database. Authorization is implemented using e.g. URL based web security and programmatic security. URL based web security is performed by the website application server and is defined in web configuration files where a virtual path is defined for each user group. Each virtual path is mapped to a security role which is mapped to one or more groups. For example a collections path is defined for the collection department of the third party coupon generator distributor while a sales path is defined for sales users. Programmatic Security operates as follows. If a particular screen such as a setup screen is shared across multiple roles e.g. one role is used to create an option and another role is used to approve it the programmatic security framework will display an approve button only for its corresponding role. This is accomplished by associating the visibility and editability properties of the JSF components with the appropriate user privileges.

Security with regard to consumer access at the coupons system website will be made to be Secure Sockets Layer SSL enabled by signing the coupon system website server with e.g. an RSA signed certificate from any trusted Certificate Authority CA e.g. VeriSign Thawte Comodo etc. although other security methods may be utilized. The coupons system website may also be configured not to accept any request on any non secure ports to ensure that all communications to and from the website are secure. Enabling SSL ensures data security as it provides data encryption. Because the coupons system website is a publicly accessible website available for consumers to access and print coupons pertaining to various offers consumers need not necessarily register themselves to access print coupons. Hence no authentication is needed for consumers.

However certain partners may require registration and for whom registration data is captured in coupon system. For such partners a database authentication process is provided which will authenticate users i.e. partners using a user id and password captured during the registration process. Given that all users from a consumer access perspective are considered to be external users there is no active directory authentication. Additionally authorization is not needed for accessing the public facing coupon system website.

Web services are secured using authentication data encryption and non repudiation. With regard to authentication web service clients will need to provide a user id and password for authentication in order to invoke a desired web service such as provides coupon information for specific partners. A Servlet Filter is used to capture and intercept a request for the described web service and initiate the authentication process. This filter may be configured with AxisServlet which handles all Simple Object Access Protocol SOAP requests. Additionally the Servlet Filter will communicate with an authentication module to complete the authentication process. It should be noted that the authentication module implemented within the integrated CMS application can be reused for this purpose. User credentials will be sent from a client via an HTTP request. Data encryption and non repudiation will be implemented using a Transport Layer Security mechanism configured by enabling SSL in the transport layer and installing an RSA signed certificate for the communication. There is no specific need for implementing authorization for accessing data via RSS feeds.

As indicated above authorization is unnecessary for accessing data via RSS feeds. However any coupon data published through RSS feeds will be secured by using SSL encryption. RSS Feeds are published via the coupon system website only where the coupon system website will allow communication only through HTTPS. Thus any RSS feeds will automatically be secured by the same secure channel. There is no specific need for implementing authentication or authorization for accessing coupon data via the RSS feeds.

As further illustrated in multiple application servers and are deployed in the application tier and it should be noted that any number of application servers may be deployed in the coupon system in accordance with various embodiments. Such web servers may be implemented using e.g. Oracle WebLogic Application Server 10.0 hosted in a Solaris environment. Clustering the application servers and provide a way to achieve load balancing and failover. However if server clustering e.g. Oracle Weblogic Server clustering is not feasible a pseudo clustered environment can be utilized by using a hardware based load balancer . The load balancer may be configured to be an entry point to the website application where the load balancer acts to balance the load across all web servers e.g. web servers and . Additionally application servers and provide business tier components related to the integrated CMS application and the website application. Moreover another firewall may be implemented between the web servers and and the application servers and . That is all the requests from the web tier will be routed via the firewall where the firewall is configured to allow communication from the internal IP addresses of the web servers and and the ftp server only. Application servers and can communicate with the database tier using JDBC connections which in turn will use an underlying Transmission Control Protocol Internet Protocol TCP IP . Communications to an LDAP Server are effectuated using an LDAP specific custom protocol over TCP IP protocol through a firewall .

It should be noted that the aforementioned web servers and and application servers and can refer to a physical hardware apparatus such as a computer or processor upon which software for performing such processes is stored and executed. Alternatively such servers may refer to the software itself which by its nature requires some physical hardware apparatus for execution thereof. It should be further noted that the web servers and and the application servers and may be implemented in co located servers or a single hardware apparatus server.

Again batch processing is performed via a batch processing component implemented in the Solaris environment. Any job scheduling will be performed using the Solaris CRON utility discussed previously. Batch jobs will communicate with the database tier using JDBC over TCP IP protocol.

The database tier as illustrated in shows two database servers and and the website database and the integrated CMS application database . The databases servers and may be implemented using Oracle Database servers that are load balanced using an Oracle Real Application Clusters RAC environment . The application tier components communicate with the RAC for connecting to one or more of the requisite databases instead of connecting to any specific server within the RAC . This substantially ensures failover management and proper load balancing by the RAC . Data is stored in an Oracle storage area network SAN . In accordance with one embodiment only one copy of any data is maintained in the SAN so that all of the database servers and within the RAC share the same copy to the data. Alternatively other data storage redundancy schemes may be used if desired. Again more or less database servers and or databases may be utilized to accommodate a desired amount of data to be stored.

As described above the coupon system in accordance with various embodiments may provide for coupon distribution in the form of online printable coupons placed on a partner s microsite or dynamic coupon page direct access downloading and printing via the coupon system website or utilizing the D2C feature where an offer can be linked to a loyalty card. Alternatively still and in accordance with yet another embodiment the coupon system may provide offers in the form of e.g. stand alone print URLs. That is instead of converting electronic coupons represented by HTML visual representations into PDF documents for printing at home or some local printer the offers are distributed as actual URLS or links on a partner website or via e mail or otherwise indicated as for example through banner placements on one or more websites whether partner related coupon system related or third party related etc. It should be noted that each offer may be set up for distribution from more than one of these locations. Upon selection of the offer one or more electronic coupons associated with the offer can be printed.

If offers are distributed via a partner microsite a print URL is created to access the appropriate coupon page i.e. microsite hosted by the coupon system website where one or more coupons associated with the offer may be displayed. The print URL may be provided on a partner s own website which a consumer may click or select bringing the consumer to the partner microsite hosted on the coupon system website. Alternatively the print URL may be provided to a consumer via email or banner placement on one or more websites whether partner related coupon system related or third party related or placement in some other type or form of communication or advertising marketing vehicle. Again the print URL provides information to the coupon system regarding what page to display on the coupon system website and e.g. a particular coupon associated with the offer. The consumer may then click on e.g. the displayed coupon or pop up button or similar mechanism associated with the particular coupon to initiate printing.

In accordance with one embodiment registration may be required of the consumer where a MID associated with the particular consumer that requested printing of the electronic coupon is appended to the print URL and sent to the coupon system for verification validation. Alternatively and in accordance with another embodiment no registration may be required in which case printing is performed without any authentication. Moreover the print URL may provide in addition to a MID information used to customize the printed electronic coupon as well as information used to track where the consumer accessed the print URL e.g. a partner site a banner on the coupon system website or another website etc. More than one print URL may be created to access the partner microsite should the partner desire to track e.g. advertising and or marketing performance from more than one access point. For example a partner may have a parent company website and specific brand websites where print URLs to a particular discount offer or coupon can be provided on both websites.

Print URLs may vary depending on distribution points tracking goals and other coupon program elements. Exemplary print URLS or links provided below indicate the possibility to include nearly any parameter information or data that is meaningful to the advertiser product or service provider or partner. It should be noted that such information or data may be meaningful to the advertiser product or service provider or partner but not necessarily meaningful to the coupon distributor or coupon system. In fact the coupon system need not necessarily even understand this data or information included in the print URL. This ability to include meaningful information in the print URL is achieved through the use of the MID. As discussed above a MID refers to a member identifier that uniquely identifies a user consumer or other entity that has registered at e.g. a partner site. Alternatively and in accordance with various embodiments the MID may be assigned to some user or entity registered with the coupon distributor directly or registered with the coupon distributor in addition to the partner site. Hence such embodiments may be implemented in a couponing environment including only a user and the coupon distributor without involving or including a partner partner site. Preferably the MID is assigned at the point of consumer registration based for example on an algorithm that randomly generates a fixed length string of characters. For example a unique series of numbers letters or a combination of both may be used although any appropriate identifier that results in uniquely identifying a consumer that may be sent with appended to a URL may be used. For example the MID may simply be appended to a URL or included in e.g. a hidden form field or indicated in or with the URL by some associative mechanism.

The MID serves a plurality of purposes. First the MID provides security by preventing the consumer associated with the MID from printing the electronic coupon more than the allotted numbers of times. For example high value coupons often have a pre determined number of redemption opportunities per consumer. Use of the MID allows for such security measures to be achieved. Second the MID enables the coupon system advertiser and or partner to determine if a consumer has actually printed the coupon. Third and as described below the MID data can be joined with redemption data to determine if the consumer that printed the coupon actually purchased the product or service associated with the coupon.

The following are examples of print URLs links that contain a MID along with coupon information that is meaningful to the advertiser partner or product or service provider.

Table 1 below provides exemplary parameters that may be populated with coupon or coupon related information and appended to a print URL. In practice other than the MID and Link parameters the coupon information supplied via these parameters falls under the discretion of the product or service provider advertiser and or partner. That is the parameters described below other than Link and MID are customizable and or useable by the client e.g. partner advertiser service provider etc. to include identify any coupon information that the client desires. That is although a parameter r as described in Table 1 is described as referring to a Refcode the client is free to utilize the parameter r to mean some other desired information identity. Moreover additional parameters parameter identifiers may be utilized in accordance with various embodiments.

The variables indicated by aaa are supplied by the coupon system in the print URL when the print URL is provided to a client e.g. the partner. For example a link value aaa is indicative of e.g. a particular coupon associated with the offer presented in the print URL. The variables indicated by xxx are populated by the partner and are representative of the MID and any of the aforementioned meaningful information or data. It should be noted that some variables may be populated dynamically with unique information for each consumer who clicks the print URL while other variables may be static and associated with all consumers.

Any data passed by the partner to the coupon system via a print URL may be captured by the coupon system and returned to the partner via an assigned ftp location. For allowed prints this parameter recovery involves utilizing an identifier such as a PIN included in the data returned to the partner that is generated by the coupon system. The PIN enables the partner to join print data to any redemption data received by the partner.

The path Internet address identified in the location identifier points to a partner microsite coupon system website etc. where the discount certificates are presented. The location identifier may be provided to the user at e.g. a partner site or embedded within an email implemented as a banner advertisement etc. as described above. At the discount certificate webpage i.e. appropriate dynamic coupon page or microsite is presented to the user as well as the discount certificate to be printed wherein the location identifier has appended thereto at least a user identifier associated with the user. The user identifier may for example be dynamically appended at the partner site when the location identifier print URL is selected by the user. That is the user is redirected sent to the dynamic coupon page microsite whose path is identified in the location identifier. At the user identifier is validated verified by the coupon system. At printing of the discount certificate is performed where a predetermined security regarding the printing of the coupon is applied based on at least the user identifier appended to the location identifier. For example if only a set number of prints are allowed for a particular coupon the coupon system may track or count the number of times a print request is received with the same user identifier preventing printing of the particular coupon beyond the allowed number of times.

Optionally and in accordance with another embodiment the coupon system may utilize token technology to prevent fraudulent or otherwise unauthorized printing of an electronic coupon. This token technology can be utilized in conjunction with the MID based security described above. As with any conventional URL a print URL or link could be posted in areas outside of the control of the coupon distributor. For example the print URL could be posted on a blog or coupon website where consumers post links or copies of electronic coupons for other consumer to take advantage of or redeem for themselves. Although preventing a print URL from being posted is not feasible the token technology can prevent printing of the electronic coupon.

During setup the print URL to be created is designated as a token type print URL where the print URL passed to the coupon system for printing must include a valid token or a print will not occur as indicated in Table 1. The token is an encrypted alphanumeric string or other appropriate code supplied to e.g. a partner or other website web server via a server side process. In accordance with this embodiment two URLs are provided to e.g. a partner. A first URL is a consumer facing print URL. A second URL is a secret or non public URL that the partner or other website web server may use to obtain the token from the coupon system. Each time a consumer attempts to print a coupon by e.g. clicking on the first URL displayed on a partner site for example a partner server or website at which the token type print URL was accessed will contact a server of the coupon system and request a token via the second URL. That token is then passed back to the partner website etc. where the token is appended to the first URL. The partner or website web server then passes the first URL including the appended token to the coupon system for validation and processing. It should be noted that consumers may still be subject to the consumer level MID and device level limits regarding e.g. the allowed number of prints.

It should be noted that as alluded to above various embodiments can be implemented in environments that only involve the coupon distributor operating the coupon system and a user. For example and as alluded to above both the consumer facing print URL and the secret URL may be embedded or otherwise associated with e.g. an email that may be sent to a user or a banner advertisement hosted on a website web server. Thus the coupon distributor itself may operate host more than one website where an initial or entrance website may be presented to and accessed by a user via e.g. the banner advertisement and a location on or indicative of another website accessed for token generation as described in greater detail below.

The AgentServer then returns the consumer facing token type print URL by way of a returnPrintURL with the token appended thereto to the consumer where e.g. a runPrintURLApplet generates a banner advertisement or pop up button for the consumer to click to initiate printing. A printCoupons token MID Link ID message is sent to the coupon system print component where the token is validated regarding the token itself and with regard to duration. That is the coupon system print component determines in conjunction with the coupon system database whether the correct token has been appended to the consumer facing URL validateToken by sending a readToken MID Link ID message to the coupon system database . It should be noted that the MID is also validated to avoid fraudulent print attempts where potentially a different MID is appended to the consumer facing print URL with the same token. Additionally token duration is validated by sending a readTokenGenerationTime message to the coupon system database where it is determined if the amount of time that has expired between token generation and token receipt exceeds a predetermined threshold. For example a consumer may have e.g. 5 minutes in which to initiate printing of a coupon. If the printCoupons token MID Link ID message is not received at the coupon system print component within the allotted period of time the token is deemed to be expired and printing is prohibited. If the token has not yet expired printing is allowed by sending a print message back to the consumer to allow the consumer to print the coupon at e.g. a local printer. It should be noted that an intermediate level of security may be achieved where token validation need not involve determining whether the token receipt has exceeded a predetermined threshold but rather only whether the correct token has been appended to the consumer facing URL.

Various embodiments are described herein with reference to drawings. These drawings illustrate certain details of specific embodiments that implement the systems and methods and programs of the present invention. However describing the invention with drawings should not be construed as imposing on the invention any limitations that may be present in the drawings. Various embodiments contemplate methods systems and program products on any machine readable media for accomplishing its operations. The embodiments of the present invention may be implemented using an existing computer processor or by a special purpose computer processor incorporated for this or another purpose or by a hardwired system.

As noted above various embodiments include computer program products embodied or encoded on e.g. a non transitory computer machine readable media e.g. memory for carrying or having machine executable instructions or data structures stored thereon. Such computer machine readable media can be any available media which can be accessed by a general purpose or special purpose computer server or other machine with a processor or controller. By way of example such computer machine readable media can comprise RAM ROM EPROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium which can be used to carry or store desired program code in the form of machine executable instructions or data structures. When information is transferred or provided over a network or another communications connection either hardwired wireless or a combination of hardwired or wireless to a machine the machine properly views the connection as e.g. a transitory computer machine readable medium. Combinations of the above are also included within the scope of computer machine readable media. Machine executable instructions comprise for example instructions and data which cause a general purpose computer special purpose computer or special purpose processing machines to perform a certain function or group of functions.

Various embodiments are also described in the general context of method processes which may be implemented in one embodiment by a program product including machine executable instructions such as program code for example in the form of program modules executed by machines in networked environments. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. Machine executable instructions associated data structures and program modules represent examples of program code for executing processes of the methods disclosed herein. The particular sequence of such executable instructions or associated data structures represent examples of corresponding acts for implementing the functions described in such processes and it is understood that the order of these processes may differ from what is depicted. Also two or more processes may be performed concurrently or with partial concurrence. Such variation will depend on the software and hardware systems chosen and on designer choice. It is understood that all such variations are within the scope of the invention. Likewise software and web implementations of the present invention could be accomplished with standard programming techniques with rule based logic and other logic to accomplish the various database searching processes correlation processes comparison processes and decision processes. It should also be noted that the words component and module as used herein and or in the claims is intended to encompass implementations using one or more lines of software code and or hardware implementations and or equipment for receiving manual inputs.

Embodiments of the present invention may be practiced in a networked environment using logical connections to one or more remote computers having processors. Logical connections may include a local area network LAN and a wide area network WAN that are presented here by way of example and not limitation. Such networking environments are commonplace in office wide or enterprise wide computer networks intranets and the Internet and may use a wide variety of different communication protocols. Those skilled in the art will appreciate that such network computing environments will typically encompass many types of computer system configurations including personal computers hand held devices multi processor systems microprocessor based or programmable consumer electronics network PCs minicomputers mainframe computers and the like. Embodiments of the invention may also be practiced in distributed computing environments where tasks are performed by local and remote processing devices that are linked either by hardwired links wireless links or by a combination of hardwired or wireless links through a communications network. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

The foregoing description of embodiments of the invention has been presented for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. The embodiments were chosen and described in order to explain the principals of the invention and its practical application to enable one skilled in the art to utilize the invention in various embodiments and with various modifications as are suited to the particular use contemplated. Other substitutions modifications changes and omissions may be made in the design operating conditions and arrangements of the preferred and other exemplary embodiments without departing from the spirit of the present invention.

