---

title: Method, apparatus, and system for mass audio notification field
abstract: A mass audio notification system is provided, comprising a network, a plurality of speakers connected to the network, and at least one server connected to the network. The server can send audio data to at least one of the plurality of speakers via a transport link, and the server can send control commands to at least one of the plurality of speakers. The transport link can include a first protocol based on internet protocol.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09344820&OS=09344820&RS=09344820
owner: Benbria Corporation
number: 09344820
owner_city: Kanata
owner_country: CA
publication_date: 20100430
---
The specification relates generally to notification and specifically to a method apparatus and system for mass audio notification.

The use of speakers for mass audio notification has traditionally been achieved through self contained analogue systems. The speaker output is either driven in real time by an announcer or by a pre recorded message which may be automatically created by a computer system manually recorded by the announcer or both. These standalone speaker systems while usually reliable for day to day operation present a number of difficulties when an attempt is made to turn them into an integral part of a full mass audio notification system. These problems include cumbersome maintenance due to the presence of two separated management and configuration systems one for the digital notification system and one for the standalone analogue system lack of scalability since the analogue speakers are usually constrained to operate within a concentrated geographical area under power restricted budgets and cable length limitations limited selective notification options since the standalone systems only support notify all speakers or intercom like operations limited or non existent centralized configuration options for speaker operation and lack of intelligent pro active reporting from the analogue speakers of their current states.

In addition existing mass audio notification systems do not allow for batch configuration of several speakers.

According to an aspect of the specification a mass audio notification system is provided comprising an internet protocol network a plurality of speakers connected to the internet protocol network and at least one server connected to the internet protocol network the at least one server configured to send audio data to at least one of the plurality of speakers via a transport link the server further configured to send control commands to at least one of the plurality of speakers wherein the transport link includes a first protocol based on internet protocol.

According to a further aspect of the specification a method implemented on a speaker for outputting audio on the speaker from a server is provided the speaker interconnected with the server via an internet protocol network the method comprising registering the speaker with the server via a connectivity link the connectivity link including a first protocol based on internet protocol receiving audio data from the server via a transport link the transport link including a second protocol based on internet protocol and outputting the audio data on the speaker.

According to another aspect of the specification a method for outputting audio data from a server on a plurality of speakers is provided. The server is interconnected with the plurality of speakers via an internet protocol network in a mass audio notification system. The method comprises registering at least one of the plurality of speakers and sending audio data to the at least one of the plurality of speakers to cause the at least one of the plurality of the speakers to output the audio data.

According to yet another aspect of the specification a method for configuring a plurality of speakers is provided the method comprising receiving a selection of a group of one or more speakers receiving updated parameters to be applied to each of the one or more speakers retrieving a respective speaker profile for each of the one or more speakers and writing the updated parameters to the respective speaker profile.

Referring to a block diagram of certain applications executable by the MNMC is shown. The MNMC includes a control module an audio module and a persistent storage module which may include a database . It will be understood that persistent storage module can control the various storage hardware devices of MNMC such as hard disc drives and the like. It will also be understood that the various modules can be implemented as separate physical servers. For example an audio server and a control server can be provided each based on known server computing environments. The control module performs non audio related management tasks such as configuring the speakers registering the speakers and accepting commands from the client devices . The control module includes an interface application a speaker manager a user manager and a scheduler . The interface application manages a web interface see and a telephone interface not shown to enable the client devices to access the MNMC . As will now be apparent to those skilled in the art control module can include various server environments such as a Private Branch Exchange PBX a media server and the like. Persistent storage module provides storage for information such as pre recorded audio messages that are to be broadcasted pre configured instructions on how to broadcast certain messages user security information and the like. As will now be apparent to those skilled in the art database can include one or more relational databases one or more collections of flat files or any suitable combination of the above. The database is accessible by the control module either directly or indirectly through the interface application the speaker manager or the user manager . The scheduler executes scheduled broadcasts. The audio module performs audio related tasks such as transmitting audio data to the speakers . It will now be appreciated that the control module and the audio module can reside together on one server or separately on separate interconnected servers and that the MNMC can be one MNMC or a network of MNMCs. MNMC can be based on a well known server environment comprising one or more central processing units CPU volatile and non volatile memory and communication interfaces housed within an enclosure. In an active standby multiple server setup the persistent storage module on an active server is mirrored on one or more standby or backup servers providing an additional layer of redundancy. The standby servers can be physically away from the active server to provide resiliency in case of a regional failure affecting one server. In some embodiments the standby servers replicate all data from the active server in real time. A heartbeat process is in place to keep track of both active and backup servers correct operations. The moment the active server fails to perform its operations for any reason the second server comes online and services the request to reduce overall system down time.

Additionally the persistent storage module can be backed up on a daily weekly and or monthly rotation allowing system to be restored to any saved data copy safeguarding against data corruption or accidental data deletion.

Referring to a block diagram of certain applications executable by the speaker is shown. The speaker includes a control module a diagnostic application a low level status manager and an audio hardware driver . Control module is responsible for coordinating the activity of the other various components of speaker and for detecting event triggers represented schematically at . Such event triggers can be requests or commands received from MNMC for example or environmental events local to speaker . Speaker further includes a connectivity manager a signalling manager and a transport manager . The audio hardware driver controls speaker to play audio data. It will now be apparent to those skilled in the art that such audio data can be received from the MNMC or can be stored locally by speaker and played in response to commands received from MNMC . Audio data received from MNMC can originate from any user device . For example audio data can originate from a telephone a mobile electronic device or a personal computer. It will now be apparent that audio hardware driver can also be responsible for converting audio data into a suitable format for playing at speaker . Each of the low level status manager the connectivity manager the signalling manager and the transport manager manage traffic over respective links between the speaker and the MNMC as will be discussed below in connection with . The diagnostic application conducts low level and high level diagnostics of the speaker . For example diagnostic application can conduct self tests at speaker and report the results of such tests to MNMC as will be discussed in greater detail below. Low level status manager also has diagnostic capabilities. In particular low level status manager can be configured to start up earlier than the other applications of speaker and to log any errors that occur during the startup of other applications. Low level status manager can also be configured to transmit a report of any such errors over a low level status link when network connectivity is available. If no connectivity is available the report can be stored locally at speaker .

Referring to a block diagram of certain components within the speaker is shown. The speaker includes a processor interconnected with a read only memory ROM that stores for example a Basic Input Output System BIOS for execution when the speaker is turned on. The processor is also connected to a random access memory unit RAM and a persistent storage device which are responsible for various storage functions of the speaker . Persistent storage device can comprise a flash memory for storing among other data the computer readable instructions implementing the applications of . In some embodiments persistent storage device can also comprise a hard disk or any other suitable computer readable storage medium. The processor can receive input data indicative of button presses from an input panel . Input panel can comprise a plurality of push buttons or other input devices for controlling various aspects of speaker . For example processor can receive input data from input panel for changing volume levels reciting the IP address of speaker resetting speaker and the like. As further examples input panel can include an auxiliary power connector for supplying speaker with electricity from an adapter rather than from Power over Ethernet. Input panel can also include a connector for a custom button module including various additional inputs. For instance such a custom button module can include inputs enabling speaker to place outbound Session Initiation Protocol SIP calls to one or more predefined extensions thus allowing the system to function bidirectionally as an intercom. Processor can also be interconnected with a network adapter for communicating over a network not shown with other computing devices such as MNMC . It will now be appreciated that speaker via network adapter can also communicate with Internet Protocol IP or SIP capable devices other than MNMC . The processor is also interconnected with an electroacoustic transducer i.e. loudspeaker and a microphone via an audio adapter . The audio adapter includes a digital to analog converter DAC and an audio amplifier . The DAC converts digital signals received from the processor to analog signals to be output to the audio amplifier and on to the electroacoustic transducer . Audio amplifier increases the strength of the signal from the DAC so that the electroacoustic transducer can be driven at higher volumes. The audio adapter also includes an analog to digital converter ADC and a microphone pre amplifier . Acoustic audio signals are captured and translated into electrical signals by microphone . The resulting electrical signals are transmitted to pre amplifier . The microphone preamplifier increases the strength of the signals received from microphone and transmits the amplified signals to ADC . ADC in turn converts the analog signal from the pre amplifier into a digital signal which is sent to processor . It will now be appreciated that in some embodiments speaker can be an analogue speaker adapted with a SIP or IP gateway. The speaker can also be configured to optionally convert the audio data into text or receive a text message and display the converted audio data in a readable form on a screen . The speaker can optionally include a motion detector and be programmed to output specific audio or text data based on detected motion events. Speakers can optionally be equipped with a location detection device such as a GPS system to determine the location automatically.

The mass audio notification system enables the users via client devices to broadcast audio messages through the speakers . Referring to the MNMC provides a web interface via the interface application to enable the users to use the client devices to administer the system and broadcast messages. It will now be appreciated that the client devices can be any device that is capable of accessing the network and providing browser functionalities to enable the users to access the web interface provided by the MNMC . It will also be appreciated that the client devices interface provided by interface application can also be used by client devices to administer system and broadcast messages. When the client devices interface is being used a client device can be any client device capable of telephony such as a landline telephone a mobile telephone a personal computer executing a telephony application and the like. Any such telephony capable client device can call a predetermined telephone number in order to be connected to for example an Interactive Voice Response system maintained by MNMC in order to broadcast messages to speakers and to manage system . In some embodiments interface application can also provide an Application Programming Interface API capable of receiving commands from various applications executing on client devices and other external systems.

The MNMC via the user manager maintains three levels of users the levels include regular users administrators and super administrators. A regular user can log into the MNMC and access all base functionalities which include creating and managing notification and notification templates and viewing reports. An administrator is a user with administrative privileges and has access to the admin features of the MNMC . An administrator can create edit and manage users. In addition to having access to the functionalities available to a regular user an administrator can also add and configure the speakers . A Super Administrator is a special administrator account that cannot be deleted from the MNMC . This account is created during the initialization of the MNMC and through this account administrator accounts can be created and revoked. Only the super administrator can delete administrators. There is only one super administrator account. Only the super administrator has access to advanced system level configuration and maintenance functions.

The speakers can be administered via the admin interface of the web interface provided by the interface application . depicts an exemplary admin interface of the present embodiment. The user must login as an administrator to access the admin interface . The interface application provides maps of the locations of the speakers . Different types of maps are provided. depicts an exemplary geographical map and a floor plan of a building .

The speaker manager maintains a profile of each speaker known to the mass audio notification system . depicts an exemplary speaker profile . The speaker profile can include a speaker ID a firmware version indicating the version number of speaker s firmware firmware upgrades can be initiated and managed from MNMC a description one or more location IDs it will be appreciated that a given speaker may belong to multiple zones maps and the like and may thus have a different location ID for each zone or map to which it belongs an IP address and one or more zone IDs . The profile also includes operational parameters also referred to herein as associated environment parameters associated with the normal operation of the speaker such as a Media Access Control MAC Address a volume activity indicators and SIP parameters . Volume can be a numerical value specifying the default output volume for the speaker . Volume can be dynamically overridden by MNMC . Activity indicators can include indicators of call state for example whether speaker is on or off hook registration state recording indication and the like. SIP parameters can include an extension ID and a port ID . Other exemplary SIP parameters not shown include user name registrar and codecs. SIP parameters are employed by MNMC to communicate with speakers via the phone interface. More specifically MNMC can patch a client device such as a telephone through to one or more speakers by using SIP parameters . It will now be apparent that MNMC can also connect other client devices to speakers using SIP parameters such as a personal computer using the web interface.

The speaker ID is an alphanumeric identifier of the speaker associated with the speaker profile . The speaker ID is unique to each speaker within system . The description is an alphanumeric description of the speaker associated with the speaker profile . Description can be a free form field for containing various items of information considered to be relevant for the given speaker . The location ID is an alphanumeric description of the location of the speaker associated with the speaker profile . In particular location ID identifies a map that the speaker is assigned to. For instance an exemplary location ID can be 3floor. It will now be apparent that multiple location IDs may be assigned to a single speaker . For instance another map of a portion of the above mentioned third floor could also include speaker . Thus a second location ID can be used for example 3floor East wing . The IP address as will be apparent to those skilled in the art can be a 32 bit or 128 bit number displayed for example in a dot or semi colon delimited notation such as 192.168.0.1 . Other variations on the above formats will also occur to those skilled in the art. In general IP address identifies speaker in a network. The zone ID is an alphanumeric identifier identifying the zone that the speaker has been assigned to. As mentioned earlier each speaker can be assigned to a single zone or to a plurality of zones. A zone ID can be used by MNMC to access a certain predetermined group of speakers in order to broadcast a message to that group. In some embodiments zone ID can include a zone extension not shown allowing MNMC to transmit a telephonic broadcast to a group of speakers following the receipt of input data at interface application for example from web interface a telephone interface or an API call . When a new speaker is added to the MNMC the MNMC creates a speaker profile for the new speaker .

At step the speaker configures its network parameters. For example the speaker initializes its IP address. Depending on the configuration the speaker can either retrieve a static IP address from a file maintained within persistent storage of speaker or request an IP address from a Dynamic Host Configuration Protocol DHCP server not shown .

At step speaker searches for MNMC . When speaker and MNMC reside on a common local area network LAN speaker can find MNMC using any zero configuration networking protocols such as Service Location Protocol SLP defined by RFC 2608 multicast Dynamic Name Server DNS Dynamic Name Server Service Discovery DNS SD IPv4 Local Link addresses defined by RFC 3927 and IPv6 autoconfiguration defined by RFC 4862 . When speaker and MNMC do not reside on a common LAN speaker can retrieve a network address of MNMC from for example a pre configured parameter from a configuration file maintained in persistent storage . In other embodiments speaker can retrieve a network address for MNMC from a DHCP server not shown . It will be appreciated that a DHCP server can be used to obtain a network address for MNMC regardless of whether MNMC and speaker reside on a common LAN. Once speaker has discovered a network address for MNMC as discussed above speaker can initiate communications with MNMC .

At step speaker having identified MNMC connects to MNMC to establish the network links described above i.e. connectivity link transport link signalling link and low level status link . Connectivity link can be based on SIP transport link can be based on Real time Transport Protocol RTP Real time Transport Control Protocol RTCP or both signalling link can be based on Extensible Messaging and Presence Protocol XMPP and low level status link can be based on Syslog. Other suitable protocols may also occur to those skilled in the art.

At step the speaker configures the parameters for the connectivity link . The connectivity link can be based on SIP as defined by Request For Comments RFCs 2543 and 3261 which in turn is based on the Internet Protocol. Values for the relevant SIP parameters can be retrieved from persistent storage . SIP parameters can also be received from MNMC during signalling link setup at step .

At step the MNMC registers via the speaker manager the speaker . The speaker manager searches for the speaker profile associated with the speaker that is requesting to register with the MNMC . If speaker manager fails to locate the speaker profile associated with the speaker that is requesting to register with the MNMC speaker manager rejects the registration request by sending a deny message to the speaker containing the appropriate error code. Speaker manager can also notify one or more client devices so that one or more users can take action to remedy the rejection. For example the rejected speaker may be a newly installed speaker that must be enabled at MNMC . In some embodiments speaker manager can be configured to automatically grant any registration request. In such embodiments if a profile is not located for a speaker a new profile is created and provided to the newly registered speaker . When speaker manager locates the speaker profile associated with the speaker that is requesting registration with the MNMC the speaker manager requests operational parameters from the speaker in order to ensure synchronization between the operational parameters stored within speaker profile and the parameters stored within speaker . Speaker manager can also as part of the performance of step determine whether any update of the configuration parameters is necessary. Such a determination can be made by comparing firmware version to a current firmware version number maintained by speaker manager . In some embodiments if version is lower than the current firmware version speaker manager can initiate a firmware update with speaker . In other embodiments speaker manager can maintain a current firmware version and a minimum firmware version and an update can be initiated only when version is lower than the minimum version number. If the speaker manager determines that updates are needed the speaker manager can issue update commands to the speaker via the signalling link . After step the speaker is ready to receive instructions or audio data from the MNMC .

At step the diagnostic application outputs tones via audio adapter and electroacoustic transducer . The tones can be pre recorded tones stored in the persistent storage At step the diagnostic application records via the microphone the tones outputted by the electroacoustic transducer . At step the diagnostic application via the processor analyzes the recorded tones. In the present embodiment the diagnostic application uses a discrete Fourier transform to compare the recorded tones to the ambient noise level around the speaker to verify that the speaker is operating properly. At step the diagnostic application via the processor generates a report to diarize the results of the test. At step the diagnostic application via the network adaptor sends the report to the MNMC via the signalling link .

The diagnostic application can also detect malfunctions such as input panel failure. When the diagnostic application detects a malfunction the diagnostic application logs the malfunction via the signalling link and optionally initiate alarms.

Upon receipt of the tone from MNMC at speaker method proceeds to block . At block speaker plays the tone at transducer via audio adapter . Proceeding to block audio adapter receives via microphone the output of transducer . Next at block speaker transmits the recorded output of transducer to MNMC via network adapter . At block MNMC receives the recorded speaker output and analyzes it for example by Fourier transform as discussed above . Once the analysis at block is complete MNMC can report the results of the test to for example a client device for instance an administrator terminal . In some embodiments the analysis can be performed on the speaker and only the results can be sent to the MNMC as described in conjunction with .

Proceeding to block MNMC can determine if the broadcast is to be created using a pre configured broadcast. The determination can be made on the basis of input data received at MNMC . Interface application can receive input data from a client device for example via web interface indicating that a pre configured broadcast is not to be used and that a new broadcast is therefore to be created. Method can then proceed to block in order to begin creating a new broadcast.

At block MNMC can receive a recorded message. It will now be apparent to those skilled in the art that the recorded message received at block can be received in a variety of ways. In some embodiments a message can be maintained in a memory of client device and uploaded to MNMC from client device . In other embodiments input data can be received from a client device indicating that a message is to be provided to MNMC via a telephone interface. In such embodiments MNMC can receive contact information such as a telephone number for client device via web interface . Following receipt of the contact information interface application of MNMC can be configured to connect to client device by initiating a telephone call using the contact information. Once a connection is established between MNMC and client device a message can be recorded via the telephone interface of interface application .

Once the recorded message is received at block and stored in persistent storage module method proceeds to block . At block MNMC can receive a selection of speakers to which the recorded message is to be delivered. The speaker selection can be received at interface application from client device via web interface or other interfaces as discussed above. depicts an exemplary floor plan presented to client device via web interface for receiving speaker selections. Floor plan illustrates two unselected speaker markers and three selected speaker markers . Selected speaker markers can be differentiated visually from unselected speaker markers by for example a highlight. It will now be apparent that while selections of individual speakers can be received at MNMC selections of groups of speakers can also be received. For example a list of zones can be presented to client device . MNMC can therefore receive a selection of a zone ID and determine that all speakers having the selected zone ID in their profiles have been selected for the broadcast at block .

Proceeding to block MNMC can receive schedule selections for the broadcast. A broadcast can be scheduled to play at a certain time in the future or to repeat at a given frequency or at certain specified times. Schedule selections can be received from client devices via interface application . It will be appreciated that performance of block can be omitted when no scheduling is desired for the broadcast.

Method then proceeds to block . At block MNMC can receive a command to transmit the broadcast to the ones of speakers selected at block . It will be understood that the command received at block can be received from a client device or from MNMC itself if scheduling data was received at block . Following receipt of the send command at block MNMC is configured to transmit the broadcast over transport link to the selected ones of speakers .

Method can then proceed to block at which the sent broadcast is stored in database of MNMC as a pre configured broadcast.

A wide variety of pre configured broadcasts can be maintained in database for use if the determination at block is affirmative. Pre configured broadcasts can contain previously recorded messages speaker selections and scheduling data. Such pre configured broadcasts can be used for example in emergency situations. For instance if the mass audio notification system is installed at a location that stores dangerous chemicals a pre configured broadcast can be stored in database which contains a recorded message advising people at the location to evacuate because of a chemical spill. In the event that such a spill is detected a user could then issue a command to transmit the pre configured broadcast.

If the determination is affirmative that is if MNMC receives input data indicating that a pre configured broadcast should be used to create the broadcast method proceeds to block instead of as described above. At block MNMC can receive a selection of one of the plurality of pre configured broadcasts stored within database . Such selection can be received from a client device for example via web interface . Following selection of a pre configured broadcast at block MNMC retrieves the selected broadcast from database .

Proceeding to block MNMC can receive a command to send the broadcast and in response send the broadcast as discussed above in regards to block . Following transmission of the broadcast MNMC can be configured to determine at block whether changes were made to the pre configured broadcast prior to transmission. It will now be apparent to those skilled in the art that block can include the reception of recorded messages speaker selections and scheduling data as in blocks and . In other words block can include the editing of the pre configured broadcast by a user . If the determination at block is affirmative the edited version of the pre configured broadcast selected at block is stored in database as a new pre configured broadcast. If the determination at block is negative there is no need to store a new pre configured broadcast and method ends at block .

It will be understood that in some performances of method the receipt of a send command by MNMC at block or block can be omitted. In such embodiments method can proceed from the configuration of the broadcast directly to storing the broadcast as a new pre configured broadcast for later use at block .

Referring now to a method of configuring speakers is shown. Method can be conducted by control module of MNMC and allows for a one or a plurality of speakers to be remotely configured substantially simultaneously.

Method begins with the performance of block in which a selection of a zone is received at MNMC . The selection of the zone can be received at interface application from a client device . Such a selection can be made at client device by for example entering a number corresponding to the zone at a telephone or selecting the zone from a floor plan displayed at client device or via an API call.

Method then proceeds to block at which MNMC receives via interface application updated parameters from client device . The updated parameters can be any or all of the parameters discussed above in connection with speaker profiles .

Proceeding to block MNMC retrieves from database a speaker profile having a zone ID which matches the zone selection received at block . MNMC then performs block in which the updated parameters for example a new volume setting received at block are written to the retrieved speaker profile .

MNMC then determines at block whether any profiles remain to be updated. MNMC can therefore be configured to search database for additional profiles which have zone IDs matching the zone selection received at block . As long as the determination at block is affirmative that is as long as there remain speaker profiles belonging to the selected zone method loops through blocks and . When the determination at block is negative indicating that no speaker profiles remain in the selected zone to be updated method ends at block .

It will now be apparent that method can also be adapted to instruct multiple speakers to simultaneously or substantially simultaneously begin self tests as discussed above in regards to .

It will now be apparent that the steps of the above methods can be varied and likewise that various specific design choices can be made relative to how to implement various steps in the methods.

A portion of the disclosure of this document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by any one the patent document or patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyrights whatsoever.

Persons skilled in the art will appreciate that there are yet more alternative implementations and modifications possible for implementing the embodiments and that the above implementations and examples are only illustrations of one or more embodiments. The scope therefore is only to be limited by the claims appended hereto.

