---

title: System and method for alternating between in-band and out-of-band communication path
abstract: Systems, methods and devices are disclosed useful for enabling wireless signals representing control messages to be sent between a wireless handheld telephony device and a call control server during an ongoing communication session when an out-of-band path becomes unavailable, the communication session being controlled by the call control server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08452291&OS=08452291&RS=08452291
owner: Research In Motion Limited
number: 08452291
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20100705
---
The present application claims priority from U.S. provisional patent application No. 61 300 617 filed Feb. 2 2010 the entirety of which is hereby incorporated by reference.

The present application relates generally to mobile communication devices and more particularly to systems and methods for alternating between in band and out of band communications paths during communication sessions.

Technology exists for routing communications made from a wireless handheld telephony device through a server such as an enterprise or other type of call control server. This can be done for example to make it appear as if a communication originated from a user s place of business or to prevent a party receiving the communication from accessing the wireless user s wireless number. Using some protocols such as the Dual Mode Transfer DTM protocol wireless communications may use multiple communications paths including for example both an audio voice path for relaying a voice communication and a data path for sending data such as for example control information between the server and the wireless handheld telephony device.

For example a server may send a control command to a wireless handheld telephony device informing it of an incoming communication intended for delivery to the wireless device. Similarly the wireless handheld telephony device may send a control command to the server for example indicating that an incoming communication should be accepted or requesting that a current communication process be put on hold. Communication which is sent using the same path as voice communications for example an audio path may be referred to as in band communication. Communication through some other means such as through a data path may be referred to as out of band communication.

A data path or channel may be faster and more reliable than an audio path or channel. For this reason data such as control commands would normally be sent via the data path when a data path is available. In some situations however the data connection between the wireless handheld telephony device and the server may be lost during an ongoing communication. For example wireless handheld telephony device may roam to a tower of a wireless network which does support a dual path protocol i.e. a protocol involving both a data and non data or audio path such as 3G protocols e.g. CDMA2000 1x EV DO or UTMS to a tower of a wireless network which does not support the dual path protocol such as 2G protocols without DTM e.g. GSM GPRS . It is also possible for a data path which was previously lost or unavailable to become available for example if the wireless handheld telephony device roams to tower or network which supports the dual path protocol.

In some aspects the present application provides a wireless handheld telephony device comprising at least one wireless signal receiver at least one wireless signal transmitter and at least one data processor configured to send and receive wireless signals representing control messages to and from a call control server by in response to a determination that an out of band path to the call control server is available sending the wireless signals representing control messages through the at least one wireless signal transmitter to the call control server using the out of band path and receiving the wireless signals representing control messages through the at least one wireless signal receiver from the call control server using the out of band path in response to a determination that the out of band path to the call control server is unavailable initiating in band communication with the call control server using an in band path sending the wireless signals representing control messages through the at least one wireless signal transmitter to the call control server using the in band path and receiving the wireless signals representing control messages through the at least one wireless signal receiver from the call control server using the in band path.

In some aspects the present application provides a method of enabling a wireless handheld telephony device to send and receive wireless signals representing control messages to and from a call control server the wireless handheld telephony device comprising at least one wireless signal receiver at least one wireless signal transmitter at least one data processor and media readable by the at least one data processor comprising coded program instructions the method comprising in response to a determination that an out of band path to the call control server is available sending the wireless signals representing control messages through the at least one wireless signal transmitter to the call control server using the out of band path and receiving the wireless signals representing control messages through the at least one wireless signal receiver from the call control server using the out of band path in response to a determination that the out of band path to the call control server is unavailable initiating in band communication with the call control server using an in band path sending the wireless signals representing control messages through the at least one wireless signal transmitter to the call control server using the in band path and receiving the wireless signals representing control messages through the at least one wireless signal receiver from the call control server using the in band path.

In some aspects the present application provides a system configured to enable wireless signals representing control messages to be sent and received from a wireless handheld telephony device the system comprising a data processor media readable by the data processor and a communications subsystem the communications subsystem adapted to process signals representing communications by and between the wireless handheld telephony device the second telephony device and the processor and the media readable by the data processor comprising coded program instructions adapted to cause the processor to when an out of band path to the wireless handheld telephony device is available send the wireless signals representing control messages through the at least one wireless signal transmitter to the wireless handheld telephony device using the out of band path and receive the wireless signals representing control messages through the at least one wireless signal receiver from the wireless handheld telephony device using the out of band path when the out of band path to the wireless handheld telephony device is unavailable receive an initiation signal from the wireless handheld telephony device indicating that the out of band path is unavailable send the wireless signals representing control messages through the at least one wireless signal transmitter to the wireless handheld telephony device using the in band path and receive the wireless signals representing control messages through the at least one wireless signal receiver from the wireless handheld telephony device using the in band path.

Other aspects of the present application will be apparent to those of ordinary skill in the art from a review of the following detailed description in conjunction with the drawings.

Embodiments of the present application are not limited to any particular operating system wireless handheld telephony device architecture server architecture or computer programming language.

Reference is now made to which shows in block diagram form an example of a system generally designated for the control and management of communications suitable for use in implementing the systems and methods disclosed herein. System includes an enterprise or business communications system which may include a local area network LAN . In the description below the enterprise or business system may be referred to as an enterprise network . It will be appreciated that the enterprise network may include more than one network and may be located in multiple geographic areas in some embodiments.

Enterprise network may be connected for example through a firewall to a wide area network WAN such as the Internet. The enterprise network may also be connected to a public switched telephone network PSTN via direct inward dialing DID trunks or primary rate interface PRI trunks.

Enterprise network may also communicate with a public land mobile network PLMN which may also be referred to as a wireless wide area network WWAN or in some cases a cellular network. Connection with the PLMN may be made via a relay as known in the art.

Enterprise network may also provide one or more wireless local area networks WLANs featuring wireless access points. Other WLANs may exist outside the enterprise network . For example WLAN may be connected to WAN .

System may include and or interact with a number of enterprise associated mobile devices only one shown . Mobile device s may include devices equipped for cellular communication through the PLMN mobile devices equipped for Wi Fi communications over one of the WLANs and or dual mode devices capable of both cellular and WLAN communications. WLANs may be configured in accordance with one of the IEEE 802.11 specifications.

It will be understood that the mobile devices include one or more radio transceivers and associated processing hardware and software to enable wireless communications with the PLMN and or one of the WLANs . In various embodiments the PLMN and mobile devices may be configured to operate in compliance with any one or more of a number of wireless protocols including GSM GPRS CDMA EDGE UMTS EvDO HSPA 3GPP or a variety of others. It will be appreciated that the mobile device may roam within the PLMN and across PLMNs in for example any of a variety of known manners as the user moves. Different PLMNs may have different capabilities and or support different wireless protocols. For example some PLMNs may support a dual path protocol such as DTM whereas others may not.

In some instances dual mode mobile devices and or enterprise network s may advantageously be configured to facilitate roaming between the PLMN and a WLAN and thus capable of seamlessly transferring sessions such as voice calls from a connection with the cellular interface of the dual mode device to the WLAN interface of the dual mode device and vice versa. A WLAN connection will generally include a data path though the data rate i.e. the throughput or bandwidth may vary from a minimum to a maximum supported data rate.

Enterprise network typically includes a number of networked servers computers and other devices. For example the enterprise network may connect one or more desktop or laptop computers one shown . The connection may be wired or wireless in some embodiments. The enterprise network may also connect to one or more digital telephone sets one shown .

Enterprise network may include one or more mail servers such as mail server for coordinating the transmission storage and receipt of electronic messages for client devices operating within the enterprise network . Typical mail servers include the Microsoft Exchange Server and the IBM Lotus Domino server. Each user within the enterprise typically has at least one user account within the enterprise network . Associated with each user account is message address information such as an e mail address. Messages addressed to a user message address are stored on the enterprise network in the mail server . The messages may be retrieved by the user using a messaging application such as an e mail client application. The messaging application may be operating on a user s computer connected to the enterprise network within the enterprise. In some embodiments the user may be permitted to access stored messages using a remote computer for example at another location via the WAN using a VPN connection. Using the messaging application the user may also compose and send messages addressed to others within or outside the enterprise network . The messaging application causes the mail server to send a composed message to the addressee often via the WAN .

Relay serves to route messages received over the PLMN from the mobile device to the corresponding enterprise network . The relay also pushes messages from the enterprise network to the mobile device via the PLMN .

In the embodiment shown enterprise network includes an enterprise server . Together with relay enterprise server can function to redirect copy or relay incoming e mail messages addressed to a user s e mail address within enterprise network to the user s mobile device and to relay incoming e mail messages composed and sent via the mobile device out to the intended recipients within the WAN and or elsewhere. Among other functions enterprise server and relay together can facilitate push e mail service for the mobile device enabling the user to send and receive e mail messages using the mobile device as though the user were connected to an e mail client within the enterprise network using the user s enterprise related e mail address for example on computer .

As is typical in many enterprises the enterprise network can include one or more Private Branch eXchanges although in various embodiments the PBX s may be standard PBX s or IP PBX s for simplicity the description below uses the term PBX to refer to both having a connection with the PSTN for routing incoming and outgoing voice calls to and from digital and or analog telephones or other telephony devices for the enterprise. The PBX is connected to the PSTN via DID enabled ISDN PRI trunks for example. Direct inward dialing DID also called direct dial in DDI is a feature offered by telephone companies for use with their customers private branch exchange PBX systems. In DID service a service proviser such as a telephone company may provide one or more trunk lines to a customer for connection to the customer s PBX and may allocate a range of telephone numbers to this line or group of lines and forward all calls to such numbers via the trunk. As calls are presented to the PBX the dialed destination number DNIS may be transmitted possibly partially e.g. last four digits so that the PBX can route the call directly to the desired telephone extension within the organization without the need for an operator or attendant. The service allows direct inward call routing to each extension while maintaining only a limited number of subscriber lines to satisfy the average concurrent usage of the customer.

The PBX may use ISDN signaling protocols for setting up and tearing down circuit switched connections through the PSTN and related signaling and communications. In some embodiments the PBX may be connected to one or more conventional analog telephones . The PBX may also be connected to the enterprise network and through it to telephone terminal devices such as digital telephone sets softphones operating on computers etc. Within the enterprise each individual may have an associated extension number sometimes referred to as a PNP private numbering plan or direct dial phone number. Calls outgoing from the PBX to the PSTN or incoming from the PSTN to the PBX are typically circuit switched calls. Within the enterprise e.g. between the PBX and terminal devices voice calls are often packet switched calls for example Voice over IP VoIP calls.

Enterprise network may include a Service Management Platform SMP for performing aspects of messaging or session control such as call control and advanced call processing features. The SMP may in some cases also perform some media handling. Collectively the SMP and PBX may be referred to as the enterprise communications platform generally designated . It will be appreciated that the enterprise communications platform and in particular the SMP is implemented on one or more servers having suitable communications interfaces for connecting to and communicating with the PBX and or DID PRI trunks. Although the SMP may be implemented on a stand alone server it will be appreciated that it may be implemented into an existing control agent server as a logical software component. As will be described below the SMP may be implemented as a multi layer platform.

For devices such as telephony devices controlled by or otherwise associated with it enterprise communications platform can implement functions such as switching to connect session legs and may provide conversion between for example a circuit switched call and a VoIP call or connect legs of other media sessions. Such calls sessions may be set up and modified on behalf of devices and any desired telephony devices within or outside enterprise network including for example devices connected to PSTN . In some embodiments in the context of voice calls the enterprise communications platform provides a number of additional functions including automated attendant interactive voice response call forwarding voice mail etc. It may also implement certain usage restrictions on enterprise users such as blocking international calls or 1 900 calls. In many embodiments Session Initiation Protocol SIP may be used to set up manage and terminate media sessions for voice calls. Other protocols may also be employed by the enterprise communications platform for example H.323 Web Services Computer Telephony Integration CTI protocol Session Initiation Protocol for Instant Messaging and Presence Leveraging Extensions SIMPLE and various custom Application Programming Interfaces APIs as will be described in greater detail below.

One of the capabilities of enterprise communications platform is to extend the features of enterprise telephony to mobile device s . For example enterprise communications platform may allow mobile device s to perform functions akin to those normally available on a standard office telephone such as the digital telephone set or analog telephone set . Example features may include direct extension dialing enterprise voice mail conferencing call transfer call park etc. As further described elsewhere herein enterprise communications platform can further provide functions such as transfer of corresponding ends of existing communications sessions from one or more mobile devices to wired telephony devices associated with platform .

Reference is now made to which show example embodiments of the enterprise communications system . Although references are made below to calls or call centric features it will be appreciated that the architectures and systems depicted and described are applicable to session based e.g. voice communications in general and in some instances to text image or other messaging based communications.

In this embodiment the SMP assumes control over both call processing and the media itself. This architecture may be referred to as First Party Call Control . Many of the media handling functions normally implemented by the PBX are handled by the SMP in this architecture. Incoming calls addressed to any extension or direct dial number within the enterprise for example are always first routed to the SMP . Thereafter a call leg is established from the SMP to the called party within the enterprise and the two legs are bridged. Accordingly the SMP includes a digital trunk interface and a digital signal processing DSP conferencing bridge . The DSP conferencing bridge performs the bridging of calls for implementation of various call features such as but not limited to conferencing call transfer etc. The digital trunk interface may be implemented as a plurality of telephonic cards e.g. Intel Dialogic cards interconnected by a bus and operating under the control of a processor. The digital trunk interface may also be partly implemented using a processor module such as for example a Host Media Processing HMP processor.

SMP may include various scripts for managing call processing. The scripts are implemented as software modules routines functions etc. stored in non volatile memory and executed by the processor of the SMP . The scripts may implement call flow logic business logic user preferences call service processes and various feature applications.

Call control server is coupled to PBX for example through a LAN enabling packet based communications and more specifically IP based communications. In one embodiment communications between the PBX and the call control server are carried out in accordance with SIP. In other words the call control server uses SIP based communications to manage the set up tear down and control of media handled by the PBX . In one example embodiment the call control server may employ a communications protocol conforming to the ECMA 269 or ECMA 323 standards for Computer Supported Telecommunications Applications CSTA .

The SIP server interacts with the media server using SIP based media handling commands. For example the SIP server and media server may communicate using Media Server Markup Language MSML as defined in IETF document Saleem A. Media Server Markup Language Internet Draft draft saleem msml 07 Aug. 7 2008. The media server may be configured to perform Host Media Processing HMP . In some embodiments PBX may be used as a media server .

Other architectures or configurations for the enterprise communications system will be appreciated by those ordinarily skilled in the art.

Reference is now made to which shows a block diagram illustrating a wireless handheld telephony device suitable for use in the system described above in relation to .

In an example embodiment the wireless handheld telephony device is a two way mobile communication device having at least voice and data communication capabilities including the capability to communicate with other computer systems. Depending on the functionality provided by the wireless handheld telephony device it may be referred to as a data messaging device a two way pager a cellular telephone with data messaging capabilities a wireless Internet appliance a data communication device with or without telephony capabilities a clamshell device or a flip phone. The wireless handheld telephony device may communicate with any one of a plurality of fixed transceiver stations within its geographic coverage area.

A wireless handheld telephony device may incorporate a communication subsystem which includes one or more receivers one or more transmitters and associated components such as one or more antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . In an embodiment the antenna elements and may be embedded or internal to the wireless handheld telephony device . As will be apparent to those skilled in the field of communications the particular design of the communication subsystem depends on the system s such as enterprise network the PLMN and or the WLANs with which the wireless handheld telephony device is intended to communicate.

Wireless handheld telephony device may for example comprise multiple transmitters and receivers for processing various types of wireless communications data as described herein. For example a wireless device may comprise one or more transmitters and receivers for processing wireless radio microwave and or optical signals according to any of a wide variety of possible protocols unknown and hereafter to be developed.

Wireless handheld telephony device may send and receive communication signals to and from the enterprise server through for example the PLMN and or one of the WLANs . Signals received by the antenna may be input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection etc. as well as analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission via the antenna . The DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

Network access may be controlled or facilitated on the basis of or otherwise associated with individual subscribers or users of wireless handheld telephony device s via the use of memory modules such as a memory module which may be a Subscriber Identity Module SIM card for use in a GSM network or a Universal Subscriber Identity Module USIM card for use in a Universal Mobile Telecommunication System UMTS . The SIM card is inserted in or connected to an interface of the wireless handheld telephony device . Alternatively the wireless handheld telephony device may have an integrated identity module for use with systems such as Code Division Multiple Access CDMA systems.

A wireless handheld telephony device may also include a battery interface for receiving one or more rechargeable batteries . A battery provides electrical power to at least some of the electrical circuitry in the wireless handheld telephony device and the battery interface provides a mechanical and electrical connection for the battery . The battery interface is coupled to a regulator not shown which provides power V to the circuitry of the wireless handheld telephony device .

Wireless handheld telephony device s can include one or more microprocessors which control the overall operation of the wireless handheld telephony device . Communication functions including at least data and voice communications may be performed through the communication subsystem . Microprocessor s can also interact with additional device subsystems such as modem s primary display s optional secondary display s flash memory ies random access memory ies RAM s read only memory ies ROM s auxiliary input output I O subsystems data ports such as Universal Serial Bus USB port one or more keyboards and or keypads speaker s or audio port s for connecting to for example headphones or earpieces microphone s clickable thumbwheel s open close sensor s short range communications subsystem s and or any other desirable or suitable device subsystems generally designated as .

Some of the subsystems shown in perform communication related functions whereas others may provide resident or on device functions. Notably for example some subsystems such as keypad s primary display s secondary display s and thumbwheel s for example may be used for both communication related functions such as displaying notifications or entering a text message for transmission through for example the PLMN and or one of the WLANs and executing device resident functions such as a clock a calculator or a task list.

Operating system software used by microprocessor s may be stored in persistent memory such as the flash memory which may alternatively include ROM or similar storage element s . Those skilled in the relevant arts will appreciate that the operating system specific device applications or parts thereof may be temporarily loaded into a volatile store such as the RAM .

Microprocessor s in addition to its operating system functions can enable execution of software applications on the wireless handheld telephony device . A predetermined set of applications that control basic device operations including data and voice communication applications will normally be installed on the wireless handheld telephony device during or after manufacture. The wireless handheld telephony device may include a personal information manager PIM application having the ability to organize and manage data items relating to a user such as but not limited to instant messaging email calendar events voice mails appointments and task items. One or more memory stores may be available on the wireless handheld telephony device to facilitate storage of information such as the flash memory the RAM the ROM the memory module or other types of memory storage devices or FLASH memory cards represented by the other device subsystems such as Secure Digital SD cards or mini SD cards etc.

PIM and or media applications have the ability to send and receive data items via the PLMN and or one of the WLANs or via a link to a computer system. The link to the computer system may be via the serial port or the short range communications subsystem . In an embodiment PIM and or media data items are seamlessly combined synchronized and updated for example through the PLMN and or one of the WLANs with the wireless handheld telephony device user s corresponding data items stored and or associated with a host computer system thereby creating a mirrored or partially mirrored host computer on the wireless handheld telephony device with respect to such items. This may be advantageous where the host computer system is the wireless handheld telephony device user s office computer system. Additional applications may also be loaded onto the wireless handheld telephony device through for example the PLMN and or one of the WLANs the auxiliary I O subsystem the serial port the short range communications subsystem or any other suitable subsystem and installed by a user in the RAM or a non volatile store such as the ROM for execution by the microprocessor . Such flexibility in application installation increases the functionality of the wireless handheld telephony device and may provide enhanced on device functions communication related functions or both. For example secure communication applications may enable electronic commerce functions and other such financial transactions to be performed using the wireless handheld telephony device .

In a data communication mode a received data signal representing information such as a text message an email message a media file to be transferred or Web page download will be processed by the communication subsystem and input to the microprocessor s . The microprocessor s will further process the signal for output to the primary display secondary display or alternatively to the auxiliary I O device . A user of the wireless handheld telephony device may also compose data items such as email messages for example using the keypad and or the clickable thumbwheel in conjunction with the primary display and possibly the auxiliary I O device . The keypad maybe either a complete alphanumeric keypad or telephone type keypad. These composed items may be transmitted through the communication subsystem or via the short range communication subsystem .

For voice communications the overall operation of a wireless handheld telephony device can be similar except that the received signals are typically output to the speaker s or audio port s and signals for transmission are generated by a transducer such as the microphone . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on the wireless handheld telephony device . Although voice or audio signal output is typically accomplished primarily through the speaker or audio port the primary display or the secondary display may also be used to provide an indication of the identity of a calling party or the communication type duration of a voice call or other voice call related information. Stereo headphones or an earpiece may also be used in place of the speaker . Call control functions and audio or other content processing may as noted herein be executed using the same or separate communications paths or channels which may comprise for example the sending of different types of data signals on different frequencies or otherwise according to differing protocols.

USB port is normally implemented in a personal digital assistant PDA type communication device for which synchronization with a user s computer is a desirable albeit optional component. The USB port enables a user to set preferences through an external device or software application and extends the capabilities of the wireless handheld telephony device by providing for information or software downloads to the wireless handheld telephony device other than through the PLMN and or one of the WLANs . The alternate download path may for example be used to load software or data files onto the wireless handheld telephony device through a direct reliable and trusted connection.

Short range communications subsystem is an additional optional component which provides for communication between the wireless handheld telephony device and different systems or devices which need not necessarily be similar devices. For example the subsystem may include an infrared device and associated circuits and components or a wireless bus protocol compliant communication mechanism such as a Bluetooth communication module to provide for communication with similarly enabled systems and devices Bluetooth is a registered trademark of Bluetooth SIG Inc. . In another embodiment the short range communications subsystem may be a wireless networking communications subsystem conforming to IEEE 802.11 standards such as one or more of 802.11b 802.11g and or 802.11n.

Reference will now be made to which shows in block diagram form an example system for managing wireless telephony communications. In the example shown system comprises a wireless handheld telephony device which may be engaged in an established or ongoing communication session with any one or more other telephony devices such as any of devices of via one or more wireless communication systems A B and one or more of networks of . A call control server which may for example include components such as PBX SMP and or enterprise server of may be employed to facilitate and control the communication session by for example controlling call set up and other functions for device . Call control server may for example form a part of an enterprise server of for example the call control server may be the same as the call control server of .

In some embodiments PBX may be connect to PSTN by means of a PSTN GW if PBX does not natively support PSTN functionality.

A plurality of wireless communication systems A and B may use various wireless technologies and or form parts of different wireless networks. For example the two wireless communication systems A and B may be parts of or otherwise associated with different PLMNs . As such wireless communication systems A and B may provide different capabilities and impose different requirements such as those supported or imposed by different communication protocols. For example a wireless communication system A may support one or more dual path protocols such as protocols using DTMF or other sound or tone based signaling whereas a second wireless communication system B may only support single path protocols.

Moreover a single wireless system A B may comprise multiple signal towers one or more of which provide different functionalities. For example a single wireless system A B may comprise towers which support dual band communications and individual towers which do not provide dual band facilities.

While only two wireless communication systems A B are shown each with a single tower it will be understood by those skilled in the art that the system may include any numbers of communication systems each comprising any number of towers.

In either setting up or maintaining an ongoing call session a wireless handheld telephony device and or call control server will typically communicate with a single one of wireless communications systems A B at a time. The system A B to be utilized may be established according to pre defined criteria. For example the wireless handheld telephony device may communicate using a wireless communication system A B which has a tower closest to it or which otherwise provides a strongest wireless signal path or which currently has the lightest load within a certain proximity. In some situations the wireless handheld telephony device may switch from one wireless communication system A B to another wireless communication system A B during an ongoing communication session. This may occur for example when the wireless handheld communication device moves out of effective proximity of one wireless communication system A B and into the proximity of a different wireless communication system A B.

As mentioned above some wireless communication systems A B may not support dual path communication. If a leg of an ongoing communication session associated with a device is transferred to such a system from a system which supports dual path communication a data path between the call control server controlling device s call and the wireless handheld telephony device may cease to be available. Without a data path data representing control and other types of messages to be transmitted to and from the wireless handheld telephony device such as for example in call feature execution instruction must be transmitted by some other means if the ongoing call session is to be maintained and or such features are to be enabled. Thus in accordance with this disclosure when an out of band path is not available the system may use an in band communication method such as dual tone multi frequency DTMF signalling to provide a communication channel between the call control server and the wireless handheld telephony device while a voice communication session is in progress.

DTMF signaling is a type of in band signaling which may be used for telecommunication signaling over communication lines including analog telephone lines in the voice frequency band between telephony devices such as the wireless handheld telephony device and other systems such as the call control server . In some embodiments the DTMF system may use a plurality such as eight different frequency signals which may be transmitted in pairs to represent for example sixteen different numbers symbols and or letters. These signals or pairs of signals can be combined to transmit data such as control messages. Other examples of types of in band communication include modem signals SMS messages and SMS USSD messages.

Similarly if an out of band path is unavailable but becomes available during a communication session for example when the handheld telephony device moves from effective proximity of a wireless communication system A B that does not support dual path communication and into the proximity of a different wireless communication system A B that does support dual path communication the system may switch or switch back to using the out of band path for data sent between the wireless handheld telephony device and the call control server .

The switch between in band and out of band communication or vice versa can be coordinated as described herein.

Reference is next made to which shows a flow diagram representing an example of a method for alternating between an in band and an out of band communication path for communications between a call control server and a wireless handheld telephony device engaged in an ongoing communication session. Method is suitable for use for example in conjunction with systems of and or and wireless handheld telephony device of in implementing the disclosure herein.

A method in accordance with this aspect of the disclosure can be considered to begin at where a voice communication has previously been established between a wireless handheld telephony device and another telephony device through a first wireless communication system A which supports dual band communication. Thus an out of band path e.g. data path is available between the wireless handheld telephony device and the call control server for transmitting signals for call control functions etc.

Since an out of band path is available at signals representing control and other data messages between the call control server and the wireless handheld telephony device may be sent using an out of band path through the first wireless communication system A. Such messages may for example include control messages sent by the call control server to the wireless handheld telephony device or vice versa.

At the out of band path is lost between the call control server and the wireless handheld telephony device . As explained above this may occur for example where the communication session between the wireless handheld telephony device and at least one second telephony device has been transferred from a first wireless communication system A which supports dual band communication to a second wireless communication system B through which dual band communication is not available. When the out of band path has been lost an in band path may be used to send messages between the call control servers and the wireless handheld telephony device through the second wireless communication system B. This may be done for example using DTMF signaling. The wireless handheld telephony device may immediately or almost immediately determine or be aware that the out of band path has been lost at . This may be because the wireless handheld telephony device may be in direct contact with the wireless communication system A B. For example in some embodiments the wireless handheld telephony device may constantly monitor a status of the wireless connection to a cellular network and once the connection or some of the services on the connection become unavailable the device may report this failure to the upper application layers of the wireless handheld telephony device thus determining the loss of the out of band path.

It is possible for a call control server to determine when an out of band path has been lost by for example monitoring the out of band path through the wireless communication system A B. For example the call control server can periodically send test data messages such as heartbeat or ping messages on the out of band path and wait for a response. If a response were not received within a certain period of time the call control server could assume that the out of band path is no longer available. However this could be unreasonably complicated expensive resource intensive and or unreliable. It may be faster cheaper more reliable or otherwise more efficient for the wireless handheld telephony device to monitor the out of band path connection and inform the call control server when the out of band path has been lost e.g. by sending signals indicating that the out of band path is not available or by initiating in band communication as described below .

Upon determination that an out of band path has been lost at the use of the in band communication path between the call control server and the wireless handheld telephony device may be initiated. In band communication may be initiated by the wireless handheld telephony device by for example sending an in band initiation signal to the call control server through the second wireless communication system B to indicate that the out of band path has been lost. This initiation signal may be sent using in band communication such as for example DTMF signaling. In some embodiments an initiation signal or signal set may be prefixed with a specific signal to distinguish it. For example an initiation signal comprising DTMF tones may be prefixed with for example a tone normally associated with activation of a or other designated key on a standard telephony keyboard to distinguish it from regular DTMF tones. Once the call control server has received the initiation signal from the wireless handheld telephony device at any future control messages between the call control server and the wireless handheld telephony device may be sent using in band communications methods such as the DTMF signaling.

At use of an out of band communication path may be re established. This may occur for example where the leg of a communications session associated with the wireless handheld telephony device is transferred from a second wireless communication system B which does not support dual band communication to a third wireless communication system not shown which does support dual band communication note that the third wireless communication tower may or may not be the same as the first wireless communication system A . As explained above since the wireless handheld telephony device may be continually attempt to establish direct data communication with the wireless communication system A B it may immediately or almost immediately determine e.g. based on received signals indicating that the out of band path is available or be aware that an out of band communication path is available and may so inform the corresponding call control server . The call control server as explained above may not otherwise receive any other information or be aware that the out of band path has been re established.

At use of an out of band communication path between the call control server and the wireless handheld telephony device for control and other data messages may be re initiated. Out of band communication may be re initiated by the wireless handheld telephony device by sending an in band or out of band initiation signal to the call control server through the wireless communication system B to indicate that the out of band path has been re established. Once the call control server has received the initiation signal from the wireless handheld telephony device at any future data messages between the call control server and the wireless handheld telephony device may be sent using the out of band communications path.

While the steps of method are shown as occurring in a particular order it will be appreciated by those skilled in the relevant arts that many of the process steps and portions thereof are interchangeable and may occur in different orders that that shown without materially affecting the end results of the method . It will further be appreciated by such persons that not all of such steps are required in order to accomplish the purposes disclosed herein and that further steps may be optionally implemented. For example although the method describes an out of band path being first available then unavailable and then available again it should be understood that certain steps of the method may be omitted or repeated or reordered in the example case where the out of band path is initially unavailable then available and then unavailable again. Other such variations are possible where the out of band path alternates between being available and being unavailable.

Reference is now made to which shows an example of command signal interchange operations of a system in alternating between an in band and out of band communication path for communications between a call control server and a wireless handheld telephony device engaged in an ongoing communication session. In signals sent via in band communication e.g. an audio path are depicted using dashed lines and signals via out of band path e.g. a data path are depicted using solid lines.

At a communication session is established between the wireless handheld telephony device and at least one second telephony device through a first wireless communication system A which supports dual band communication such that an out of band path e.g. data path is available between the wireless handheld telephony device and the call control server .

At signals representing a data message such as a call control message is sent from the call control server to the first wireless communication system A. The message is relayed to the wireless handheld telephony device at . This message may for example indicate that an incoming communication has been received for the wireless handheld telephony device .

At signals representing a data message are sent from the wireless handheld telephony device to the first wireless communication system A. The data message may for example comprise a control message which is in reply to the control message which was sent to the wireless handheld telephony device at . For example the reply control message sent at may be an indication of whether the user of the wireless handheld telephony device is willing to accept an incoming communication. At the first wireless communication system A relays the reply control message to the call control server . Since an out of band communication path is now available the control message and reply control messages are sent via the out of band communication path.

At the ongoing communication session between the wireless handheld telephony device and the at least one second telephony device is transferred to a second wireless system B which does not support dual band communication. In other words the out of band communication path is no longer available. The switch between the first wireless communication system A and the second wireless communication system B may occur for example where the wireless device moves into the proximity of the second wireless communication system B and out of the proximity of the first wireless communication system A. Systems and methods for facilitating such a switch between wireless communication towers are well known in the art.

Signals indicating that the out of band path is unavailable may be generated and received within the handheld telephone device when the out of band communication path is unavailable. The unavailability of the out of band communication path may be determined by the handheld telephony device for example based on monitoring a status of the wireless connection to a cellular network. When the connection or some of the services on the connection is detected to be unavailable a signal indicating this failure may be sent to the upper application layers of the wireless handheld telephony device .

In some embodiments in response to the determination that the out of band communication path is unavailable at the wireless handheld communication device sends an in band signal to the call control server through the second wireless communication system B indicating that the out of band communication path has been lost. This signal may include an initiation signal for an in band communication. This signal is relayed by the second wireless communication system B to the call control server at . The signal may be sent using an in band communication method such as DTMF signaling. Data messages between the call control server and the wireless handheld telephony device will then be sent using an in band path such as the audio communication path.

At a data message such as a call control message is sent from the call control server to the second wireless communication system B to be relayed at to the wireless handheld telephony device . Again this message may for example be a call control message such as a message indicating the second incoming communication has been received for the wireless communication telephony device . At a data message such as a reply control message is sent from the wireless handheld telephony device to the second wireless communication system B using an in band communication path. At the reply control message is relayed from the second wireless communication system B to the call control server . The reply control message may comprise signals which may for example indicate that the user of the wireless handheld telephony device wishes to accept an incoming communication.

It should be understood that the signal interchange operations of may be varied in the case where the out of band communication path is first unavailable then available.

While the invention has been described and illustrated in connection with specific presently preferred embodiments many variations and modifications may be made without departing from the spirit and scope of the invention. The invention is therefore not to be limited to the exact components or details of methodology or construction set forth above. Except to the extent necessary or inherent in the processes themselves no particular order to steps or stages of methods or processes described in this disclosure including the Figures is intended or implied. In many cases the order of process steps may be varied without changing the purpose effect or import of the methods described. The scope of the claims is to be defined solely by the appended claims giving due consideration to the doctrine of equivalents and related doctrines.

