---

title: Image processing apparatus, control method for image processing apparatus, and program
abstract: An image processing apparatus connected to a Web server and including a Web browser for displaying an operation screen provided by the Web server and a processing unit that, when requested to execute image processing by the Web server based on access from the Web browser, executes the requested image processing, where it is determined, depending on a destination of access by the Web browser, whether or not to supply information about the image processing apparatus to the destination of access, and if it is determined that the information about the image processing apparatus should be supplied, the information about the image processing apparatus is supplied to the destination of access made by the Web browser.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08326989&OS=08326989&RS=08326989
owner: Canon Kabushiki Kaisha
number: 08326989
owner_city: Tokyo
owner_country: JP
publication_date: 20100603
---
This application is a National Stage application under 35 U.S.C. 371 of International Application No. PCT JP2010 059805 filed on Jun. 3 2010 which claims priority to Japanese Application No. 2009 149053 filed on Jun. 23 2009 the contents of each of the foregoing applications being incorporated by reference herein.

The present invention relates to an image processing apparatus connected to a Web server and having a Web browser for displaying an operation screen provided by the Web server a control method for the image processing apparatus and a program for causing a computer to perform the control method.

It is a known technique to connect an information processing apparatus such as a PC personal computer to a Web server on a network and display an operation screen provided by the Web server on a Web browser included in the image processing apparatus.

In such a case the Web browser of the image processing apparatus requests an operation screen from the Web server in response to which a Web application in the Web server sends an HTML Hyper Text Markup Language file for displaying the operation screen on the Web browser to the image processing apparatus. The Web browser of the image processing apparatus analyzes the HTML file received and displays an operation screen based on description in the HTML file.

Further when a user inputs an instruction via the operation screen displayed on the Web browser the instruction is passed to the Web server from the Web browser. Upon receiving the instruction the Web application of the Web server executes processing according to the instruction.

Today some image processing apparatuses such as MFPs Multi Function Peripherals having a scanner and or a printer also include a Web browser as mentioned above. Such an image processing apparatus displays an operation screen provided by a Web server on the Web browser using the above described process to accept various instructions from users.

Still further such a technique as one disclosed by Japanese Patent Application Laid Open No. 2005 242994 is also proposed. According to descriptions of Japanese Patent Application Laid Open No. 2005 242994 a Web server provides an operation screen for entering instructions for utilizing various features services of an image processing apparatus. That is the user of the image processing apparatus accordingly enters an instruction to the image processing apparatus via the operation screen displayed on a Web browser. The instruction is then passed to the Web server by the Web browser of the image processing apparatus.

Upon receiving the instruction the Web server requests the image processing apparatus to carry out any of various types of processing according to the contents of the instruction input by the user. The image processing apparatus having received this request then executes the requested processing or provides a service . This eliminates the necessity to maintain all menu data required for operating the image processing apparatus within the image processing apparatus and also facilitates modifications to the menu data on the Web server.

When a Web server provides an operation screen for the user of an image processing apparatus to enter instructions and the Web server requests the image processing apparatus to perform processing it is necessary to fixedly register information about services provided by the image processing apparatus with the Web server in advance.

However an image processing apparatus generally provides a number of services and besides the ability and or version of the services dynamically change with update to the services or additional installation of optional functions. Also there can be a number of options for utilizing the services such as a protocol and connection address information which is used for utilizing the services. These factors make it difficult to fixedly register information about service provided by an image processing apparatus with a Web server in advance.

To address this problem Japanese Patent Application Laid Open No. 2005 242994 discloses a technique to notify a Web server of a URL Uniform Resource Locator which is one of pieces of information relating to services provided by an image processing apparatus or service connection information by the image processing apparatus.

However the technique of Japanese Patent Application Laid Open No. 2005 242994 merely supplies information about services provided by the image processing on demand from the Web server and does not switch between notification and non notification or change the contents of information to be supplied depending on the timing of notification and or notified entity. Therefore depending on the timing of notification and or notified entity information will be supplied even when supply of the information is unnecessary in itself.

That is to say when information on all services is supplied on every notification regardless of timing of notification and or a notified entity for example the amount of data exchanged between the image processing apparatus and the Web server will increase. In addition continuous supply of service related information without regard to notified entity may cause leakage of sensitive information to outsiders.

The present invention has been made in view of these problems and an object thereof is to provide a mechanism for determining depending on which entity a Web browser accesses whether to supply information about an image processing apparatus to the accessed entity or not before supplying the information.

Another object of the invention is to provide a mechanism to select information to be supplied to an entity which the Web browser accesses among pieces of information relating to each of multiple processing units and supplying the selected information.

To achieve the above described objects according to the present invention there is provided an image processing apparatus connected to a Web server and including a Web browser for displaying an operation screen provided by the Web server the image processing apparatus comprising a processing unit that when requested to execute image processing by the Web server based on access from the Web browser executes the requested image processing a determination unit that determines depending on a destination of access made by the Web browser whether or not to supply information about the image processing apparatus to the destination of access and a notification unit that supplies information about the image processing apparatus to the destination of access made by the Web browser if the determination unit determines that information about the image processing apparatus should be supplied.

Further objects and features of the present invention will become apparent from the following description of the exemplary embodiments with reference to the attached drawings.

Hereinafter embodiments of the present invention will be described in detail with reference to the attached drawings. Here the embodiments described below are not intended to limit the invention as defined in the claims and not all of combinations of features shown in the embodiments are essential to the solution of the invention.

An operation unit I F interface connects an operation unit with the control unit . The operation unit has a liquid crystal display unit having touch screen panel functions a keyboard and the like. The MFP has Web browser functions described later. A Web browser included in the MFP analyzes an HTML file received from the Web server and displays an operation screen based on description in the HTML file on the operation unit .

A printer I F connects a printer with the control unit . Image data to be printed on the printer is transferred from the control unit to the printer via the printer I F and printed on a recording medium by the printer .

A scanner I F connects a scanner with the control unit . The scanner reads an image on an original to generate image data and inputs the image data to the control unit via the scanner I F .

A network I F connects the control unit the MFP with the LAN . The network I F transmits image data and or information to an external apparatus on the LAN e.g. the file server the Web server or receives various types of information from an external apparatus on the LAN .

A control unit including a CPU controls the operation of the entire Web server . The CPU reads a control program stored in ROM and executes various sorts of control processing. An RAM is used as a temporary storage area such as main memory and a work area for the CPU . An HDD stores image data various programs or various information tables described below.

A network I F connects the control unit the Web server with the LAN . The network I F sends and receives various types of information to and from other apparatus on the LAN .

The MFP includes a login application a Web browser a service provider framework including a number of service providers a job device information recording unit an image processing management unit and an image processing control unit . The MFP also includes a service repository unit a URI information storage unit a login context management unit a preference information storage unit an access control information storage unit and an option constitution management unit .

The login application includes a screen display section and an authentication processing section . The screen display section displays an authentication screen on the operation unit for prompting a user to input authentication information required for authentication processing executed by the authentication processing section . This authentication screen is not provided by the Web server but is displayed by reading information maintained within the MFP by the login application . A screen that is thus displayed based on information prestored in the MFP will be called a native screen.

When authentication information is entered from the authentication screen displayed by the screen display section the authentication processing section performs processing for user authentication using the authentication information entered.

When performing an authentication process the authentication processing section compares the authentication information input via the authentication screen displayed by the screen display section with authentication information stored in the HDD . According to the result of the comparison use of the MFP by the user is permitted.

The Web browser includes a communication section an analysis section and a screen display section . The communication section communicates with a presentation section of the Web application by the HTTP protocol. More specifically the communication section sends a GET or POST HTTP request for a resource of the Web application identified by a URI. That is to say the Web browser makes an access to the specified URI. Then as an HTTP response to the HTTP request the Web browser obtains an operation screen written in HTML or the like for display on the Web browser from the Web application . The Web browser also passes instructions from the user which are entered into an HTML form or the like displayed on the Web browser to the Web application via an HTTP request.

The analysis section analyzes an HTML file received from the Web application . The HTML file contains description representing contents of the operation screen to be displayed on the Web browser.

The screen display section displays an operation screen on the operation unit based on the result of analysis by the analysis section . A screen that is thus displayed based on information an HTML file received from the Web server will be called a Web browser screen.

The file server includes a file management unit and a file storage unit . The file storage unit stores various data files including files of image data scanned in by the MFP . The file management unit manages files stored in the file storage unit .

The Web server includes the Web application and a log recording unit . Further the Web application includes the presentation section and a logic section . The Web application performs processing in the logic section according to an HTTP request received. The presentation section generates data such as HTML and sends the data to the Web browser as an HTTP response.

The presentation section communicates with communication section and sends an operation screen to the MFP for display on the Web browser of the MFP on demand from the MFP . The presentation section also receives instructions from the user input via the operation screen displayed on the Web browser of the MFP from the MFP as an HTTP request.

Having received the user s instruction as an HTTP request the Web application executes various sorts of processing as appropriate for the instruction and also requests the MFP to execute processing. To be specific the Web application requests execution of printing on the printer of the MFP scanning by the scanner or transmission via the network I F . The Web application also requests accumulation or retrieval of a document in the HDD facsimile transmission reception over a facsimile line not shown or the like.

To request the MFP to execute processing in this way the logic section communicates with the communication section of the service providers included in the MFP . The result of processing executed by the MFP is recorded in the log recording unit . In the log recording unit results of authentication executed on the Web server are also recorded.

The service provider framework manages multiple service providers . With the service provider framework it is possible to manage the life cycle of the service providers i.e. installation uninstallation update activation and deactivation. The service provider framework also provides an interface connecting between the service providers and other software.

The service providers each include a communication section a function interface section and a screen display section . The communication section accepts a processing request from the logic section of the Web application . When execution of processing is requested by the Web application the function interface section executes processing as appropriate for the requested processing.

When any of the service providers is requested to execute an image processing function for example the function interface section generates a job for that function and executes the job utilizing the image processing management unit . The service providers also perform job control such as pause resumption cancel or change of priority of jobs and or management such as job monitoring utilizing the image processing management unit . The service providers further reference or update history counter or setting information stored in the job device information recording unit . The service providers further make reference to service provider information stored in the service repository unit to learn types of services that can be provided by the MFP their version and or a connection method for utilizing the services.

Further the service providers send data to the file storage unit and receive data from the file storage unit through communication between the communication section and the file management unit of the file server . Specifically there are a service provider that uploads image data read by the scanner to the file server and a service provider that receives printing data from the file server and prints the data on the printer .

The screen display section displays an operation screen on the operation unit that is necessary for executing any of the service providers . That is to say the screen display section displays an operation screen on the operation unit for checking or configuring parameters for job execution monitoring job execution recovering from an error such as a jam that occurs during execution of a job or managing job status such as interruption and cancel of a job. The result of job execution is recorded in the job device information recording unit as a log.

Incidentally in the job device information recording unit history and the like of a job that is activated by a requestor other than the service providers e.g. the operation unit and executed by the image processing management unit is also recorded. The results of authentication executed by the login application and or history of communication with the Web server are also recorded in the job device information recording unit .

The job device information recording unit also summarizes and records various kinds of statistical information for a job execution. The statistical information includes counters for the number of paper sheets input and output the number of pages on which image processing has been executed the capacity of memory the usage amount of functional modules and the like for example.

The job device information recording unit also stores status information for running jobs. The job device information recording unit also records status and or configuration information for managing the apparatus units of the MFP such as the operation unit printer scanner and control unit .

The image processing management unit manages the image processing control unit and executes an image processing job in response to a request from a requestor such as the function interface section . The image processing control unit controls various units of the MFP such as the operation unit printer scanner control unit for executing an image processing job. The image processing management unit also performs job management such as monitoring pause resumption cancel and change of priority for running jobs.

The service repository unit stores information about the service providers managed by the service provider framework . The Web browser can reference or update information stored in the service repository unit .

The URI information storage unit manages Uniform Resource Identifier URI information as means for identifying resources on the Web. The notion of Uniform Resource Locator URL is included in URI. The URI information storage unit manages a URL a homepage URL identifying a Web page that is automatically retrieved by the Web browser at the time of startup for example. The URI information storage unit also manages URLs identifying Web pages that can be displayed on the Web browser in one pass such as by operating a button on the operation unit e.g. URLs of bookmarks and a site specific browser . The URI information storage unit also manages pattern matching rules for retrieving service information associated with a pattern of a URI from the service repository unit based on the pattern.

The login context management unit manages session information relating to a user who is using the operation unit . The operation of various functions of the MFP is personalized according to the session information. Specifically operation parameters preferred by the user is given a higher priority the information stored in the preference information storage unit . The login context management unit also prohibits or continues an operation according to an authority level given to the user as stored in the access control information storage unit . Operations activated by the service providers are also subject to such personalization.

The preference information storage unit stores preference information for representing various preferences about operation of the MFP for each individual user who uses the MFP . Preference information refers to such information that a user prefers black white processing to color processing prefers letter size to A4 as paper size prefers transmission in a short procedure omitting a checking step to transmission after checking a preview of a scanned in image or like information. Preference information can be preset in the preference information storage unit by the user and or administrator. Preference information could also be automatically determined from a user s past operation history and automatically set in the preference information storage unit .

The access control information storage unit stores access control information for controlling access such as execution readout and write to various functions and resources provided by the MFP for each of multiple users who use the MFP . Access control information refers to information that color processing is prohibited and black white processing is permitted one sided printing is prohibited and double sided printing is permitted transmission of documents is prohibited and copying is permitted change to configured parameters for the administrator is prohibited and change to those for a general user is permitted or like information. Access control information can be preset in the access control information storage unit by the system administrator. Also an ACL access control list or the like stored and managed on an external server could be configured to be utilized via a network.

The option constitution management unit manages configuration of option units that are selectively attached to the MFP and or option functions that can be utilized by selectively installing an add in application or a license. Option constitutions managed by the option constitution management unit include device configuration information indicating presence absence of a scanner unit and or a facsimile unit accessory configuration information indicating the attachment condition or type of a paper feeder unit a paper ejector finisher a stacker of the printer or a document feeder of the scanner attachment condition information for a user authentication device such a biometric authentication device and an IC card reader or an optional device for USB connection such as a keyboard and a pointing device information indicating installation condition of optional functions such as whether an add in document management function is present or not and information about whether additional features for various functions are made active by a license such as encrypted transmission feature for a transmitted document and a searchable document transmission feature for subjecting an image read by a scanner to OCR optical character recognition and sending the image with searchable text.

When the user starts operation of the MFP user authentication is required of the user. On the operation screen of the operation unit a login to operation unit screen D displayed by the login application appears. When the user performs authentication operations a user authentication process is performed by the login application and the authentication processing section . When the user authentication succeeds a login process takes place and the login application sets user authentication information in an operation unit session management data structure of the login context management unit . The operation screen on the operation unit changes to a Web browser screen registered as an initial screen after login screen transition T . At the same time user authentication information and a login event are passed from the login application to the Web browser .

When displayed in the initial state the Web browser sends an HTTP GET request to a predetermined URI according to preset homepage setting. When the designated URI specifies secure HTTP communication an HTTPS GET request is transmitted by the HTTPS protocol over SSL Secure Socket Layer . In the HTTPS GET request user authentication information based on the user authentication performed by the login application is also transmitted.

Upon receiving the HTTPS GET request the Web server selects a Web application that should be executed and its processing logic based on the specified URI and executes the application. Suppose the URI is https www.example.com for example. When the Web application of the Web server is configured to require user authentication as a Web server the user is redirected to a URI at which user authentication is executed regardless of the specified URI. That is to say even when the specified URI is a URI representing retrieval of a function selection screen D the user is redirected to a URI corresponding to the login screen D. As a result the Web server generates an HTML document corresponding to the login screen D and sends the HTML document data in an HTTPS GET response . When the Web application is configured not to require user authentication or configured to trust user authentication already completed on the MFP as indicated in an HTTP request the sending back of the login screen D may be omitted. That is to say HTML data representing the function selection screen D is returned as a response as specified by the HTTPS GET request .

Upon receiving the HTTPS GET response the Web browser displays the login screen D based on the HTML received. The login screen D is designed as an HTML form. The user enters information asserting that the user is a legitimate user on the login screen D and submits the information. Then an HTTP request containing the information entered by the user as a query character string is transmitted to a URI that is embedded in Action attribute of Form element in the HTML form. If Method attribute of the Form element in the form is set to post the information is sent as an HTTPS POST request . If Method attribute is set to get here the information is sent as an HTTPS GET request in which the query character string is embedded in a portion of the URI.

Upon receiving the HTTPS GET request the Web server performs user authentication. When the user authentication succeeds the Web server generates HTML corresponding to the function selection screen D based on the path section of the URI that is originally requested https www.example.com and sends an HTTPS POST response .

Upon receiving the HTTPS POST response the Web browser displays the function selection screen D based on the HTML received.

The screen of is designed as an HTML form. When the user selects an execution button the form is submitted. When https www.example.com scan to ftp start is set in Action attribute of the HTML form as shown in processing is executed in the following manner. An HTTPS POST request in which the path scan to ftp start is specified is transmitted to the Web server https www.example.com . Scan settings such as an image format selected by the user and transmission settings such as file name are sent to the Web server in the HTTPS POST request as data of a main body or an entity of the HTTP request.

The Web server executes a Web application to process the request. Specifically the Web server first checks whether image processing parameters received such as scan and transmission settings are appropriate. If the parameters are appropriate the Web server generates an HTML document corresponding to an in process screen D for indicating to the user that processing is currently being executed and sends the document as an HTTPS POST response . The Web server further requests a Scan To FTP service provider to execute processing for conducting scanning and FTP transmission utilizing services provided by the image processing apparatus. A mechanism to identify a method to request processing will be described later. In a SOAP request image processing parameters including the scan and transmission settings received from the Web browser are passed. A URI corresponding to a screen that should be displayed on the Web browser when a service of a service provider is completed here https www.example.com scan to ftp complete is also provided as a recovery URI.

Upon receiving the SOAP request the service provider executes scanning of a document image in the image processing management unit and returns a SOAP response . The service provider requests a window management function of the operation unit to change the screen so that a preview screen D is displayed at a position visible to the user screen transition T .

If an error such as a jam occurs during image processing operation such as scanning the service provider transitions to a jam recovery etc. screen D screen transition T . On the screen D the service provider interacts with the user and or the image processing management unit to recover from the error and returns to the preview screen D screen transition T .

When the user chooses the OK button scanned in image data is uploaded by FTP with a predetermined file name to a predetermined directory of the file server that is specified in the transmission setting passed in the SOAP request .

When processing requested in the SOAP request is complete the service provider notifies the Web browser of the recovery URI specified by the Web server recovery URI so as to display the screen on the Web browser screen transition T .

The Web browser sends an HTTPS GET request for the recovery URI to the Web server . The Web server runs the Web application generates an HTML document corresponding to a completion screen D and sends the document to the Web browser as an HTTPS GET response .

The Web browser interprets the HTML document received and displays the HTML document on the operation unit as the completion screen D. When the user chooses a button to return to the menu the Web browser sends an HTTPS GET request to a URI corresponding to the function selection screen D https www.example.com . The Web server receiving the request returns the function selection screen D as with the HTTPS POST response and subsequently this sequence is repeated.

At step S a request relating to management of the service providers is accepted. At the following step S it is determined whether the request accepted is for installation of a new service provider or not. If it is determined that the request accepted is for installation of a new service provider the flow proceeds to step S and if not to step S.

At step S a service provider is added by carrying out installation of the service provider . Then at step S information about the newly installed service provider is added to the service repository unit .

At step S it is determined whether the request accepted is for uninstallation of a service provider or not. If it is determined that the request accepted is for uninstallation of a service provider the flow proceeds to step S and if not to step S.

At step S a service provider is deleted by carrying out uninstallation of the service provider . Then at step S information about the uninstalled service provider is deleted from the service repository unit .

At step S it is determined whether the request accepted is for update of a service provider . If it is determined that the request accepted is for update of a service provider the flow proceeds to step S and if not to step S.

At step S a service provider is updated by carrying out update of the service provider . Then at step S information about the updated service provider is updated in the service repository unit .

At step S it is determined whether the request accepted is for activation or change of state of a service provider or not. If it is determined that the request accepted is for activation or change of state of a service provider the flow proceeds to step S and if not the processing is terminated. At step S the state of an updated service provider managed in the service repository unit is changed.

A service ID is an identifier that identifies each one of the service providers . Version is the version of each of the service providers . State indicates whether each of the service providers is active or inactive. Connection indicates a connection method for use when the logic section of the Web application utilizes a service provided by any of the service providers . A connection URI location URI indicates a URI that identifies a location to which connection should be made for utilizing a service provided by any of the service providers .

A service pattern is a pattern used for searching for service providers . The service pattern represents a pattern for performing pattern patching against records stored in the service repository unit . By arranging the patterns of service IDs a corresponding one of the service providers can be extracted. When a list is empty information on the service providers is not supplied. As the pattern of a service ID a pattern including an arbitrary number of wildcards can be specified. A wildcard is represented by the character matching any character string. Pattern matching with regular expression of a higher level may be performed.

When accessing or sending an HTTP request to a URI that matches any of the URI patterns shown in the Web browser passes information on a service provider matching the service pattern of the corresponding record to the Web application .

At step S a URI as the destination of access is analyzed. And at step S pattern matching between the URI and URI information stored in the URI information storage unit is performed.

At step S it is determined whether the URI from which an operation screen is requested i.e. the other party of communication which the Web browser is accessing matches any of pieces of URI information stored in the URI information storage unit . If it is determined that the URI matches a piece of URI information the flow proceeds to step S and if not the flow proceeds to step S.

At step S information corresponding to the matching pattern is selected from pieces of service repository information stored in the service repository unit and service description information to be supplied to the Web application is generated at step S.

At step S the generated service description information is stored in the header section of HTTP request data which is transmitted at step S. If it is determined at step S that the URI does not match any URI information HTTP request data in which no service description information is stored is transmitted at step S.

By the Web application receiving information on utilization of services provided by the MFP in the HTTP request header it is possible to realize a distributed system that can flexibly accommodate functions of the MFP for example.

That is to say if the MFP provides a reading checking service with a scan preview display of a preview and checking by the user are made be performed on the MFP and the Web application can acquire image data for which preview checking is already done. Meanwhile if the MFP does not provide such a service the Web application once acquires scanned in image data and generation of a preview image its display on the browser and checking by the user s can be performed as server side processing of the Web application . Alternatively the user may be prompted to install a service provider that provides a scan preview checking service.

Further if the MFP includes an OCR function option document data that has been converted into a PDF file with character codes resulting from OCR added can be obtained on the MFP and if the MFP does not have such an option the Web application could be configured to generate such a PDF file.

Or if the MFP is capable of generating a certain image format the MFP can acquire a file created in the specified format and if the MFP is not the Web application may be configured to convert a file into the format.

Or if the MFP has facsimile transmission function the Web application has the MFP send data by fax and if the MFP does not the Web application may be configured to request the MFP to send data by a file transfer protocol such as FTP and SMB Server Message Block to the Web server and the Web server may be configured to send the data by fax.

The MFP may also include a Service Discovery service provider for the Web server to reference service provider information stored in the service repository unit . The Service Discovery service can be configured as a service similar to UDDI Universal Description Discovery and Integration a known technique. In that case the Web application first accesses the Service Discovery service to inquire about information for acquiring more detailed provided service description information.

While the present embodiment configures the Web server to utilize services provided by the MFP with a so called Web service technique known as SOAP or REST the technique may also be replaced with other techniques or some techniques may be combined. For instance an interface for accessing a function of the image processing apparatus may be extended by extending DOM Document Object Model and the function may be utilized from a script language that operates in the Web browser such as Java Script.

In this case functions for acquiring information about available services may be provided as the interface to the expanded DOM. In other words it is easy to have an interface for a script to learn the types and or ability of services provided by the image processing apparatus or a connection method for utilizing the services. In this case the script and an HTML FORM element are combined within content to be returned to the Web browser from the Web server. When an HTTP request based on the content is sent from the Web browser to the Web server service description information can be included in the transmitted HTTP request. In such a configuration however service description information cannot be provided in the initial HTTP request from the Web browser to the Web application.

As described above in the present embodiment when the Web browser of the MFP requests an operation screen from the Web server the Web browser sends provided service description information in the HTTP request. Provided service description information includes types of services provided by the service providers their version state a method or destination of connection for utilizing the services. The provided service description information also reflects and indicates option constitutions possessed by the MFP .

Also depending on where the Web browser accesses whether to supply provided service description information or not or contents of provided service description information to be supplied is changed.

This enables the Web application to learn services that can be currently provided by the MFP and change processing according to the ability of provided services. Also when one Web server and a number of MFPs constitute a distributed system a Web application that varies processing according to the ability of the individual MFPs can be implemented.

In addition the logic section of the Web application is allowed to reliably learn a method and or destination of connection for utilizing a service provided by the MFP in the course of HTTP request processing. This facilitates implementation of a Web application that utilizes services without fail.

Also by not supplying provided service description information when it is determined that supply of provided service description information is not necessary unnecessary information is not supplied to a Web server that does not constitute the distributed system.

Also provided service description information to be supplied can be changed to the pattern of a URI to which the Web browser sends an HTTP request. In general the Web server groups Web applications or functions based on URI path hierarchy. Therefore this enables only appropriate provided service description information to be selectively supplied according to functions provided by the Web application .

In addition while the descriptions above illustrates supply of information about the service providers as information relating to the image processing apparatus the MFP other information may be supplied in a similar manner. For example a serial number production number for uniquely identifying the MFP a user ID that indicates the user who is currently logged into the MFP or information about options attached to the MFP can be applied for supply to the Web server. Information about processing jobs now being executed on the MFP or information about a failure occurring on the MFP itself may be applied for supply to the Web server.

Aspects of the present invention can also be realized by a computer of a system or apparatus or devices such as a CPU or MPU that reads out and executes a program recorded on a memory device to perform the functions of the above described embodiment and by a method the steps of which are performed by a computer of a system or apparatus by for example reading out and executing a program recorded on a memory device to perform the functions of the above described embodiment. For this purpose the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device e.g. computer readable medium .

While the present invention has been described with reference to exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.

This application claims the benefit of Japanese Patent Application No. 2009 149053 filed on Jun. 23 2009 which is hereby incorporated by reference herein in its entirety.

