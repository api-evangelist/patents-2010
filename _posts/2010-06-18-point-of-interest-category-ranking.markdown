---

title: Point of interest category ranking
abstract: Methods, systems, and apparatus, including computer programs encoded on one or more computer storage devices, for ranking categories of points of interest. In one aspect, a method includes receiving at a current time a location of a user's electronic device and retrieving data identifying multiple points of interest. Each point of interest is within a predetermined distance to the location and is associated with a category. Each of the points of interest is scored based on proximity of the point of interest to the location. Each of the categories is ranked based on the scores of the points of interest included in the categories and on the probability of receiving a query from a user relating to the subject matter of the category at the current time in the location. Data identifying points of interest is provided to the electronic device based on the ranking and the scoring.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09194716&OS=09194716&RS=09194716
owner: GOOGLE INC.
number: 09194716
owner_city: Mountain View
owner_country: US
publication_date: 20100618
---
This specification relates to selecting information to present to a user of an electronic device based on the user s current location.

The use of mobile electronic devices with Internet connectivity has increased significantly over the past few years as the availability and speed of wireless Internet service has improved. Search queries that may have in the past been input by a user sitting at a home or office computer are now often input on the fly while the user is at a location relevant to his or her particular query. For example as a user is leaving his office he may search for nearby restaurants on a mobile telephone. Later as the user is leaving a restaurant the user may use the mobile telephone to search for telephone numbers for taxi cab companies. Users often rely on their mobile electronic devices to retrieve a map of a current location and search for businesses or other points of interest in their surroundings. The volume of this type of information now available over the Internet has at least in some densely populated areas become overwhelming. Users can end up being presented with too much information a lot of which is not relevant to them in their current context.

This specification describes technologies relating to selecting points of interest or categories of information to present to a user based on the user s current location as indicated by a mobile device or system that determines a location of a mobile device. In general one innovative aspect of the subject matter described in this specification can be embodied in methods that include the actions of receiving multiple queries each query associated with a location that relates to the query and a time at which the query was input by a user. The queries are grouped into multiple categories based on subject matter of the queries. For each of multiple locations probabilities of receiving a query in each category at multiple different times are determined. Determining the probabilities includes for each of the locations determining a correlation of the frequency of queries being received in each category to the different times and determining the probabilities based on the correlation. Other embodiments of this aspect include corresponding systems apparatus and computer programs configured to perform the actions of the methods encoded on computer storage devices.

These and other embodiments can each optionally include one or more of the following features. The multiple locations each can be a country or a city. The multiple different times each can be a time of day which can be for a particular day of the week.

In general another aspect of the subject matter described in this specification can be embodied in methods that include the actions of receiving at a current time a current location of a user s electronic device and retrieving data identifying multiple points of interest. Each point of interest is within a predetermined distance to the current location and is associated with a category of multiple categories differentiated by subject matter. Each of the points of interest is scored where the score for a point of interest is based at least in part on a proximity of the point of interest to the current location. Each of the categories is ranked based on the scores of the points of interest included in the categories and based on the probability of receiving a query from a user relating to the subject matter of the category at the current time in the current location. Data identifying one or more points of interest is provided to the user s electronic device based on the ranking and the scoring. Other embodiments of this aspect include corresponding systems apparatus and computer programs configured to perform the actions of the methods encoded on computer storage devices.

These and other embodiments can each optionally include one or more of the following features. The score for a point of interest can be further based on a density of points of interest within the associated category at the current location. Providing data identifying one or more of the points of interest to the user s electronic device can include providing the one or more points of interest as suggested search queries. Providing data identifying one or more of the points of interest to the user s electronic device can include retrieving a portion of a map that includes the current location and the one or more points of interest and providing the portion of the map to the electronic device for presentation to a user on a display. The map is overlaid with one or more graphical elements representing the one or more points of interest which are overlaid on the map in proximity to locations corresponding to the points of interest represented by the graphical elements.

In general another aspect of the subject matter described in this specification can be embodied in methods that include the actions of receiving a current location of a user s electronic device and retrieving data identifying multiple points of interest. Each point of interest is within a predetermined distance to the current location and is associated with a category of multiple categories differentiated by subject matter. Each of the points of interest is scored where the score for a point of interest based at least in part on the proximity of the point of interest to the current location and on a density of points of interest within the associated category at the current location. Data identifying one or more points of interest is provided to the user s electronic device based on the scoring. Providing data identifying one or more of the points of interest to the user s electronic device can include providing the one or more points of interest as suggested search queries. Other embodiments of this aspect include corresponding systems apparatus and computer programs configured to perform the actions of the methods encoded on computer storage devices.

These and other embodiments can each optionally include one or more of the following features. Providing data identifying one or more of the points of interest to the user s electronic device can include retrieving a portion of a map that includes the current location and the one or more points of interest and providing the portion of the map to the electronic device for presentation to a user on a display of the electronic device. The map is overlaid with one or more graphical elements representing the one or more points of interest which are overlaid on the map in proximity to locations corresponding to the points of interest represented by the graphical elements.

Particular embodiments of the subject matter described in this specification can be implemented so as to realize one or more of the following advantages. A user can be provided with selected information that is relevant to a current location of the user. The selected information can be filtered to provide information about points of interest relevant not only to the current location but the current time. For example if a user is a member of an online social network the user can receive information about points of interest in the user s surroundings that is relevant to mobile updates recently posted by others in the social network. The user can end up receiving fresh information relevant to the user s current surroundings and own network of friends within the social network as compared to an overwhelming volume of largely irrelevant unfiltered information. By taking into account the current time a system can further filter the information presented to the user such that categories of information relevant at that current time are presented to the user and largely irrelevant categories are not presented. This can be particularly important when display screen area is limited such as on a mobile electronic device.

The details of one or more embodiments of the subject matter described in this specification are set forth in the accompanying drawings and the description below. Other features aspects and advantages of the subject matter will become apparent from the description the drawings and the claims.

The point of interest information can be provided to a user of a mobile electronic device for example user of device or to a user of a non mobile device such as a home computer for example user of computer . The point of interest information can be provided as one or more suggested queries that the user can select to submit the query to a search engine . In response the search engine can search one or more bodies of information and provide results to the user s electronic device. In another example the point of interest information can be provided as one or more graphical elements displayed on a map that shows the user s current location where each graphical element represents a point of interest. In another example the point of interest information can be presented to the user along with metadata such as a telephone number the user can select to initiate a telephone call to the point of interest e.g. to call a restaurant for a reservation a link to a website for the point of interest or links to website with other information e.g. reviews about the point of interest. The point of interest information can be presented to the user in other formats and the above are but a few examples.

The server system includes a point of interest system that is configured to determine one or more points of interest to present to the user s electronic device that are relevant to the user s current location. The user s current location may be within a relatively close proximity to many points of interest and presenting all of them to the user may be overwhelming and simply not helpful. Techniques and systems are described here to filter the points of interest in close proximity to the user so that a subset of the total number of points of interest can be selected to present to the user based on indicia that the selected points of interest would be interesting to a user at that current location and in some instances at the particular current time.

The server system can also receive mobile updates provided by network users . A mobile update is data which can be about a point of interest that a user inputs into an online social network. By way of illustrative example Google Buzz for mobile allows a user to post updates and tag locations on the go and to read buzz updates authored by other people. A mobile update can be snapped to a location by the author particularly if the subject matter of the update relates to the location. A location can be a point of interest for example a restaurant. An author may snap an update to the restaurant providing his or her comments about the restaurant or to let other users of the social network know that he or she is at the restaurant or headed there. A mobile updates interface can be included in the server system to receive updates posted by users.

Multiple points of interest within a predetermined distance to the current location are retrieved Step . In some implementations the predetermined distance is a fixed distance for example a one kilometer radius around the current location. In other implementations the value of the predetermined distance can vary based on the density of points of interest in proximity to the current location.

In one example the value of the radius R can be calculated using the following formula R M D. In this example M is a constant that can be empirically determined and in one particular example is 30 000. The variable D represents the density of points of interest in a region that includes the current location. The density D can be determined using various techniques. In some implementations the surface of the Earth or a portion thereof is divided into square cells forming a grid. By reference to a database of points of interest indexed by location the density of points of interest in each cell can be calculated.

The point of interest database can include a listing of points of interest associated with locations e.g. geographical coordinates. The point of interest database can be used to calculate the density D of points of interest per cell and the calculated densities can be stored in the density database . For a given current location the density D of points of interest in the cell that includes the current location can be retrieved from the density database . The points of interest database can be periodically updated to add or remove points of interest. The density database can also be periodically updated either at the same frequency or less often to account for removals from and additions to the points of interest database .

In the above formula n is an integer representing the number of points of interest that are desired to be found within the calculated radius R . D is the density of points of interest per area e.g. per square kilometer in a cell that includes the current location.

The multiple points of interest retrieved from the points of interest database using either a fixed distance from the current location or a radius calculated based on the density of points of interest in proximity to the current location are ranked Step . For each point of interest the ranking is based at least in part on the proximity of the point of interest to the current location and on one or more time related attributes. One or more of the points of interest are provided to the user s electronic device based on the ranking Step .

With respect to ranking the points of interests based on proximity the point of interest database can include the points of interest mapped to corresponding geographic coordinates e.g. GPS coordinates. The distance between two locations i.e. the point of interest location and the current location can then be computed by known methods. The closer in proximity the point of interest to the current location the higher the ranking generally.

With respect to ranking the points of interest based on one or more time related attributes a time related attribute describes a characteristic of the point of interest that is dependent on time or time sensitive. An example of a time related attribute of a point of interest is whether or not the point of interest is open i.e. the hours of operation of the point of interest. For example if the point of interest has hours of operation e.g. a restaurant museum gas station and the hours of operation are known then the current time i.e. the time at which the current location was received can be compared to the hours of operation to determine if the point of interest is currently open. If the point of interest is currently open then the higher the ranking. Metadata that includes the time related attribute i.e. the hours of operation for a point of interest can be associated with the point of interest in the point of interest database or stored in a separate database. The metadata can be obtained from various sources. For example web pages relating to a point of interest can be crawled and the hours of operation extracted from information included in the web pages. In other examples an operator of a point of interest or a third party aggregator of business listings data can provide the information.

In another example of a time related attribute relevancy can be determined as a function of time. For example a relevant time window can be associated with a particular type or category of point of interest. For example if the point of interest is a restaurant then if the current time falls within blocks of time surrounding typical meal times the ranking can be boosted. In another example if the point of interest is a coffee shop then if the current time falls within the early morning hours the ranking can be boosted since coffee shops are often most busy during this time of day. In another example if the point of interest is a night club then if the current time falls within the late evening hours the ranking can be boosted since that is when night clubs are typically most busy. In other implementations the relevancy can vary throughout the time window and the ranking can be dynamically boosted depending on the actual time as compared to the relevancy of the category or a particular business at that time. These are a few examples of time related business attributes although different or additional ones can be used.

To implement the above each point of interest can be associated with one or more categories. Categories can be differentiated by subject matter. For example points of interest can be categorized into the following subject matter categories restaurants entertainment museums geographic features etc. Differing granularity levels of categories can exist for example in addition to the broad restaurant category there can also be sub categories such as Mexican restaurants French restaurants family restaurants fast food restaurants etc. At least some of the categories can be associated with a time related attribute for example as described above. If the point of interest is associated with a category that is associated with a time related attribute then the ranking can be based at least in part on the time related attribute.

The point of interest database can include data linking the associated one or more categories with the points of interest. A time related attribute database can be provided that includes time related attribute information organized by the point of interest categories. That is include a selection of categories can be included in the time related attribute database and for each category time related attribute information can be provided. For example the time related attribute database can include the category restaurant and include time related attribute information being the times of day that can boost a ranking of a point of interest included in the restaurant category e.g. 6 00 9 00 am 11 30 1 30 pm and 5 00 8 00 pm. Therefore when a point of interest is retrieved from the point of interest database that is associated with the restaurant category the time related attribute database can be checked to see if the restaurant category is associated with a time related business attribute. When the restaurant category is found in the time related attribute database the times at which the time related business attribute can boost the ranking of the point of interest can be compared to the current time i.e. the time at which the current location was received and if there is a match the ranking can be boosted accordingly. In some implementations the actual time can be compared to the relevancy at the particular time which can vary through the relevant time window. That is the boost can be different at 6 00 am as compared to 7 15 am as compared to 8 30 am in one example.

Multiple points of interest within a predetermined distance to the current location are retrieved Step . As described above in some implementations the predetermined distance is a fixed distance and in other implementations the value of the predetermined distance can vary based on the density of points of interest in proximity to the current location. In some implementations the distance is a straight line distance. In other implementations the distance is a time based distance. That is the amount of time a user may travel from their current location and an estimated rate of travel is used to determine the distance. The rate of travel can be based on foot travel car travel or otherwise. In other implementations the distance is a route distance as compared to a straight line distance. The points of interest can be retrieved from the point of interest database .

Each of the multiple points of interest is ranked based at least in part on the proximity of the point of interest to the current location. Additionally the points of interest are ranked based on one or more updates associated with the points of interest should the updates exist Step as is described further below. As described above an update is data about the point of interest input by an author other than the user into an online social network which network preferably includes the user. One or more points of interest are provided to the user s electronic device based on the ranking Step .

As discussed above the points of interest can be provided to the user in a various formats for example as suggested search queries or as items displayed on a map that also includes the user s current location. If updates are associated with the points of interest the updates can also be provided to the user. For example the content of one or more of the updates can be displayed to the user or an icon or other indicator can be displayed together with the point of interest to indicate that one or more updates exist relating to the point of interest. The user can select the icon or other indicator in order to view the content of the update e.g. in a pop up box.

Shown in a mobile updates database is a store of mobile updates associated with points of interest. shows example authors of mobile updates and . The authors and communicate their updates using their mobile electronic devices through the network to the server system for example through the mobile updates interface . The updates can be accumulated and stored in the mobile updates database and can be indexed by location. If a mobile update is snapped to a location that corresponds to the location of a point of interest the mobile update can be associated with the point of interest in the mobile updates database .

Preferably the authors of updates belong to an online social network accessible over the internet. For example before being permitted to input an update a user may be required to provide at least some personal information to register in a social network. Once registered the user can then author updates and snap them to locations including locations corresponding to points of interest. The user can also view the content of updates authored by other users. A user of the social network may be permitted to include privacy controls on who may view the content of updates he or she authors. For example the user may be permitted to designate one or more friends in the social network that are permitted to view the user s updates which can be kept private from anyone not designated as a friend. Alternatively although a user may be permitted to designate one or more friends he or she may choose to have his or her updates available to everyone on the social network including those not identified as friends.

As noted above the ranking of a point of interest can be based on updates associated with the point of interest Step . In one example the ranking of a point of interest that is associated with one or more updates is based on the proximity in the social network of the authors of the updates to the user. For example if a designated friend of the user is the author of an update associated with a point of interest the ranking of the point of interest can be boosted as compared to if the author had no relation to the user in the social network. If the author is a designated friend of a designated friend of the user i.e. a friend of a friend then the ranking of the point of interest can be boosted although perhaps not as much as if the author is a designated friend of the user. In other examples the ranking can be based on the freshness of the updates i.e. the amount of time since they were created the volume of updates associated with the point of interest the identity of the author or other attributes of the updates.

Multiple updates associated with multiple points of interest are retrieved Step . The updates are authored by users of a social network that includes the user of the electronic device and can be retrieved from the mobile updates database . The updates retrieved are associated with points of interest within a predetermined distance to the current location. The predetermined distance can be either a fixed distance from the current location or a radius calculated based on the density of points of interest in proximity to the current location as described above. Additionally the updates can be retrieved based on their creation time. That is preferably the updates retrieved have a certain level of freshness that can be determined by comparing their creation time to the current time. Filtering the retrieved updates by freshness can limit the number of updates retrieved and ensure a higher degree of relevance at the current time. The freshness window can be a few hours a few days or otherwise. For example if the frequency of updates being received with respect to a particular point of interest is high then updates created within the past 24 hours may be retrieved as compared to a point of interest that only occasionally is associated with updates in which instance the freshness window may be a month or longer.

The points of interest associated with the retrieved updates are ranked based on the proximity of the authors of the points of interest to the user in the social network Step . For example as discussed above if the author of an update is a friend of the user in the social network then the associated point of interest can be boosted in the ranking.

One or more points of interest are provided to the user s electronic device based on the ranking Step . The updates themselves can be presented to the user along with the points of interest or optionally a link or other indicator can be provided that the user can select to view the content of the updates. In the process the points of interest provided to the user are associated with at least one update meeting the freshness criteria.

In some implementations ranking points of interest based on updates can be selectively applied to users that are at a current location they frequent often. If the user is in an unfamiliar location e.g. is a tourist then applying different ranking criteria may yield more relevant results for that particular user. is a flowchart showing an example process that takes into account the user s familiarity with the current location when ranking points of interest. For illustrative purposes the process will be described in reference to the systems and shown in although it should be understood that differently configured systems can be used to implement the process .

A current location of the user s electronic device is received Step . The current location can be received from the location determination module and can be determined as described above. Multiple points of interest within a predetermined distance to the current location are retrieved Step . As described above in some implementations the predetermined distance is a fixed distance and in other implementations the value of the predetermined distance can vary based on the density of points of interest in proximity to the current location.

A familiarity score is calculated based on how often the user frequents the current location Step . In some implementations the familiarity score is calculated using the following formula Familiarity Count Locations within of Current Location Count All locations 

In the above formula the Count Locations within X of Current Location refers to the number of distinct current locations identified in a location history for the user that are within a predefined distance i.e. X to the user s current location. The Count All locations refers to the total number of current locations reported for the user in the location history which can optionally be limited to a certain time period. For example a historical set of reported current locations for the user can be stored optionally with timestamps in a store of location history indexed by user. The value for Count All locations can be obtained from the store of location history. In some implementations the familiarity score can be calculated by a familiarity scoring module included in the point of interest system . The users location histories can be stored in and retrieved from a location history database .

Consider the following illustrative example the user s current location is a coffee shop a block from his office and the predefined distance X is 1 kilometer. The Count All locations value for the user is 100 locations. The Count Locations within 1 km of current location is 55 locations. That is in the last 100 reported current locations of this particular user 55 times he was within 1 kilometer of his current location. His current location is a block i.e. less than 1 kilometer from his office where he likely spends a lot of time so in this instance he is in a relatively familiar location. The familiarity score is therefore 55 100 or 0.55 out of a maximum score of 1.0 i.e. if every location in the history store was within 1 km of his current location . Later the user is 5 kilometers away from his office and the Count Locations within 1 km of current location is only 10 locations. The familiarity score is therefore 10 100 or 0.1 i.e. considerably lower. This formula can therefore be used to determine how often the user is in the vicinity of his current location with the presumption being that the more often he is there the more familiar he is with the current location. By contrast a tourist is likely to have a very low familiarity score since it may be the first time he or she has visited the current location.

A threshold value for the familiarity score can be determined where a score above the threshold value is deemed to indicate that the user is familiar with the current location and a score below the threshold value is deemed to indicate that the user is somewhat unfamiliar with the current location. The threshold value can be selected as any value between 0 and 1.0. The value selected for the distance X also influences the familiarity score since the smaller the value of X the lower the number of locations within the user s location history that will be included in the Count numerator in the above formula. In one example the threshold value is selected as 0.5 for a value of X being 1 kilometer. That is if at least 50 of the reported locations for the user in the user s location history store are within 1 kilometer to the current location the user is deemed to be familiar with the current location. Other values can be used and these are just one illustrative example.

In response to determining that the familiarity score exceeds a threshold value i.e. that the user is familiar with the current location the points of interest are ranked based on their proximity to the current location and on one or more updates associated with the points of interest Step . One or more of the points of interest are provided to the user based on the ranking Step . The content of the updates or a mechanism for the user to select to view the updates can be provided along with the points of interest.

In some implementations ranking a point of interest based on one or more associated updates includes determining how recent the update was input i.e. determining the freshness and boosting the ranking of recently input updates. In some implementations ranking a point of interest includes for each associated update determining the proximity of the author of the update to the user in a social network. For example as discussed above if the author of an update is a friend of the user in the social network then the associated point of interest can be boosted in the ranking.

If the familiarity score does not exceed the threshold value i.e. if the user is deemed to be somewhat unfamiliar with the current location then a different technique for ranking the retrieved points of interest can be applied. For example the points of interest can be ranking based just on proximity of the corresponding locations to the current location. In other implementations the points of interest can be ranked following the place ranks approach described in U.S. Patent Publication No. 2007 0143345 entitled Entity Display Priority in a Distributed Geographic Information System to Jones et al. filed on Oct. 11 2006 and assigned to Google Inc. the entire contents of which are hereby incorporated herein by reference. That is the points of interest can be ranked based on the weighted contributions of various non cartographic meta attributes about a point of interest. Rather than directly measuring a characteristic of a physical place such as its population these attributes reflect traits of abstractions or representations associated with the point of interest. Examples of such attributes include the description of the point of interest e.g. if the point of interest is described in an online forum the amount of detail in the description or the number of times a description has been viewed an indicator of the popularity of the point of interest e.g. the number of views or clicks on a placemark e.g. in a map application associated with the point of interest and the relationship of a point of interest to its context such as the category to which the point of interest belongs all of which are described further in the above referenced patent publication.

In some implementations the scoring function set out below can be used to assign a score to each retrieved point of interest. The assigned scores can be used as a basis for ranking the points of interest. Score sum update for each update distance current location point of interest location distance independent score 

In the above function A B and C are multipliers whose value can be determined empirically and provide a weighted function where different factors can be weighted differently. The multiplier A is multiplied by the sum of values assigned to each update based on the freshness of the update i.e. how recently it was input and or based on the proximity of the author of the update to the user in the social network. The multiplier B is multiplied by the distance between the user s current location and the location of the point of interest. The multiplier C is multiplied by a score that can be assigned to the point of interest based on distance independent criteria. For example a score that could have been assigned to the point of interest using the place rank approach described above can be used in this scoring function weighted by the value of C.

In some implementations providing a user with a subset of categories of points of interest may be desirable. The user can then select one of the categories and in response be provided with a subset of points of interest within the category. For example a typical mobile electronic device e.g. mobile telephone has limited screen space. For such devices the information selected to be provided to the user should be carefully selected since only limited information can be displayed. In some implementations rather than providing the user with a selection of points of interest e.g. as a set of suggested search queries or a display of a number of points of interest on a map the user is provided with a set of categories from which the user can make a selection e.g. restaurants entertainment shopping.

Determining which categories to provide to the user can be based on the current time. The current time can be a time of day or a day of week or even a season. That is some categories of points of interest may be more relevant to the user at one time than at a different time which was discussed above. For example a category for coffee shops may be more relevant in the morning than in the evening. The determination of which categories to select can be further determined by the current location. That is a particular district in a city may be very popular for shopping during the day and then in the evening and night very popular for entertainment e.g. night clubs or lounges. If the current location of the user s electronic device is within the region during day presenting the shopping category may be more useful than if the current time was 10 00 pm when all the shops are closed and at which time it is more likely the user is in that location for entertainment purposes.

A set of categories can be stored in association with information that indicates for each category the probability that at a given time in a given location that category of points of interest will be relevant to a user. The set of categories and information can be stored in the time related attribute database . The time related attribute database was discussed above and can include categories associated with times at which the points of interest in the category are most relevant. The categories can be further mapped to locations. That is given a particular location and time one or more categories can be fetched from the time related attribute database that are most likely to be relevant to the user.

In some implementations an indicator of whether a user would find a point of interest in the category relevant is determined based on search activity. That is the frequency that search queries are submitted to a search engine by users where the search queries relate to the subject matter of the category at a given location is used to estimate the categories relevance to a user. In some implementations click data can also be used as an indicator of whether a user would find a point of interest in a category relevant. Click data refers to data about the search results users clicked on when presented with responses to search queries. For example if a particular query is found to relate to a restaurant category and in response to the search query the user clicked on two different results relating to two different restaurants the results that were clicked are indicated by the click data as relating to the particular query.

For example if the query is for EMPIRE STATE BUILDING then the query location can be the location of the Empire State Building in New York City e.g. expressed as the geographical coordinates of the building itself. Depending on the level of granularity desired for the query location the location can be the city where the building is located e.g. New York City. In some implementations more than one query location relating to more than one level of granularity can be determined and associated with the query e.g. a first query location can be the geographical coordinates of the building itself while a second query location associated with this query can be the geographical coordinates for New York City which can be the coordinates for the approximate center of the city or can be the city boundaries .

Various techniques can be used for determining a query location that is related to the subject matter of the query. In some implementations each term included in the query can be checked against a collection of terms predetermined to identify locations and if a match is found that term s can be identified as the query location. For example the location of San Francisco can be extracted from a query for RESTAURANTS SAN FRANCISCO. In some implementations the collection of terms is a database of location terms that can include administrative areas e.g. streets cities districts states provinces countries and points of interest e.g. geographical features e.g. mountains rivers lakes landmarks e.g. important buildings monuments and venues e.g. parks stadiums stores . Each location can have a corresponding latitude and longitude and may also include a shape or extent. Other techniques for determining a location that is related to the query can be used. For example if the query is input into a search field in a map application the user s interaction with a map displayed by the map application can be used to determine a location relating to the query. By way of illustration if a map of the United Kingdom was displayed to the user and the user zoomed in on the map to London and then input a search query COFFEE SHOPS then the query location can be determined to be London even though London was not a term in the query. In some implementations for example queries from which a location cannot be extracted or otherwise determined that is related to the subject matter of the query the location of the user at the time he or she submitted the query can be used as a default if known.

As mentioned above multiple queries are received from various users that are associated with query locations and time stamped Step . The queries are grouped into multiple categories based on the subject matter of the queries Step . In some implementations one query can be grouped into more than one category. Different categories can have differing levels of granularity or categories can be divided into sub categories. For example a query for TIM HORTONS may be grouped into a restaurant category a coffee shop category and a fast food category. Determining which category or categories into which to place a query can be accomplished in a variety of ways. In one example the term or terms forming the query can be compared to a collection of terms that are associated with categories and if a match is found then the query can be associated with the corresponding category or categories. For example if the query includes the term CAFE and the collection of terms includes the term cafe associated with a restaurant category then the query is grouped into the restaurant category. In another example if the query includes the term CINEPLEX and the collection of terms includes the term cineplex associated with a movie theatre category and an entertainment category then the query can be grouped into the movie theatre and entertainment categories.

With the queries grouped into categories the frequency of queries being received into those categories can be correlated to different times. For example queries may be received with a relatively high degree of frequency into the restaurant category in the late afternoon as people are preparing to head to dinner. Queries may be received in the entertainment category in the evening and night with a high frequency as compared to in the morning. The queries are associated with query locations and can therefore be further correlated by location. For each of multiple locations a probability can be determined of receiving a query in each category at multiple different times Step . That is a statistical analysis of the correlated query data can be used as a basis for determining a probability of receiving a query in a particular category at a particular time. The probability can be used as an estimate of the probability that a point of interest within the category is interesting to a user at a given time in a given location. As mentioned above in some implementations click data can also be categorized and used to estimate the probability. In some implementations where queries originating from mobile electronic devices can be distinguished from queries originating from non mobile devices the queries can be weighted differently when using them to estimate the probability. For example queries originating from mobile electronic devices can be weighted more heavily than queries originating from non mobile devices. In other implementations only queries originating from mobile electronic devices are used as a basis for making the probability estimation.

The multiple locations can have a high or a low degree of granularity. For example the probabilities can be determined on a country by country basis that is each of the multiple locations is a country. In another example the probabilities can be determined on a city by city basis. In yet another example the probabilities can be determined on a district by district basis at least for large cities having multiple and potentially diverse districts. In yet another example the probabilities can be determined for arbitrary divisions of the Earth s surface for example into cells of a given area. In one illustrative example a collection of queries was analyzed on a country by country basis and peak times for receiving queries in different categories were identified. For example in the taxi category approximately 7 00 pm was the time associated with the highest frequency of taxi related queries. Approximately 5 00 pm was the time associated with the highest frequency of restaurant related queries in North American countries but approximately 7 00 pm was the time in several European countries. That is depending on the location the peak time for receiving queries in the restaurant category varied.

In a system with a continuously growing query database the analysis can be run periodically or continuously to further refine the results. The time can be time of day but can be further refined by time of day on a particular day e.g. user search activity may be different on Friday as compared to Sunday. The time of year can also be factored in since people tend to partake in more outdoor activities in the warmer seasons as compared to the colder seasons.

Multiple categorized points of interest within a predetermined distance to the current location are retrieved Step . As described above in some implementations the predetermined distance is a fixed distance and in other implementations the value of the predetermined distance can vary based on the density of points of interest in proximity to the current location. For use in this process the point of interest database can associate one or more categories with each point of interest included in the database.

A score for each of the points of interest retrieved is determined. The score is based at least in part on the proximity of the point of interest to the current location Step . That is a distance between a geographical location of the point of interest and the current location is calculated and the closer the point of interest to the current location the higher the score. The point of interest ranking module can be used to determine the score for each point of interest that is retrieved from the point of interest database .

The categories associated with the retrieved and scored points of interest are ranked. The ranking for a category is based on the scores of the points of interest included in the category and based on the probability of receiving a query from a user relating to the subject matter of the category at the current time in the current location Step . That is a category that includes points of interest that have scored highly i.e. are close in proximity to the current location is boosted in the ranking. Additionally a category that is probably relevant to a user at the particular current time and location is also boosted in the ranking. The probability of receiving a query relating to the category at the particular current time and location is used as an indicator of the how relevant the category probably is to a user.

The category ranking module can be used to rank the categories associated with the retrieved points of interest. The category ranking module can retrieve the probability information from the time related attribute database for the categories.

In some implementations the score for a point of interest can be further based on the uniqueness of the type of point of interest to the current location. That is if in a close proximity to the current location there are two museums and 20 restaurants then a point of interest that falls within the museum category is more unique i.e. more exceptional to that particular current location than a point of interest that is a restaurant. The uniqueness of the museum point of interest to that current location can boost the score of the point of interest.

In some implementations the uniqueness of a type of point of interest can be estimated as follows. Determining a density of points of interest within a particular area was described above and in the example system in the density information is stored in the density database . The density of points of interest can be determined on a category by category basis. That is for a given area e.g. a square kilometer the total number of restaurants within the area can be divided by the area to give the density of restaurants per square kilometer. The geographical areas can be divided into a grid of cells and the density of points of interest on a category by category basis can be determined for the cells. Depending on the subject matter of the category it may be desirable to only calculate the category densities for certain categories for certain cells. That is the category density for every category for every cell does not necessarily have to be determined. Similarly the category density may be determined for only high level categories. For example the restaurant category can be a parent category to various children categories e.g. the Italian restaurant category Mexican restaurant category Chinese restaurant category family restaurant category and so on. The category densities can be stored in the uniqueness database .

Multiple categorized points of interest within a predetermined distance to the current location are retrieved Step . As described above in some implementations the predetermined distance is a fixed distance and in other implementations the value of the predetermined distance can vary based on the density of points of interest in proximity to the current location. Each point of interest is associated with one or more categories which are differentiated from each other by subject matter. The points of interest are scored based at least in part on their proximity to the current location and on their uniqueness to the current location Step . As described above their uniqueness to the current location can be estimated based on the category density for the category corresponding to the point of interest. If the point of interest is included in more than one category and more than one category density is available the category density values can be averaged the medium value can be selected either the highest or lowest value can be selected or some other function of the values can be used. One or more points of interest are provided to the user s electronic device based on the scoring Step .

By way of summary the server system can receive mobile updates from various users . The server system can also receive search queries from various users . The search queries can be time stamped so that the time of day during which particular search queries are received can be determined. For example some queries are received during the day from a desktop computer which queries might be quite different in subject matter than queries received in the evening from a mobile telephone. Information about the location or from which a location can be determined of an electronic device can be received from electronic devices. Based on the locations and potentially one or more other factors as discussed above data identifying one or more points of interest can be provided to the electronic devices from the server system . A point of interest system can determine which one or more points of interest to provide to an electronic device as was described above in reference to and . In some implementations one or more categories are provided to the electronic device and a user of the electronic device can select a category in response to which one or more points of interest relating to the category can be provided to the user. Category selection and point of interest selection can be depend on the time the information is requested or provided. For example even if at the same location a user who is at the location during the day may receive different point of interest information from the server system than a user who is at the location during the evening.

Process shown in describes calculating a familiarity score and when the familiarity score exceeds a threshold value the points of interest are ranked based on proximity and updates. In some implementations process can be combined with other processes described herein. For example the familiarity score can be calculated and when the familiarity score exceeds a threshold value then each point of interest can be ranked based on proximity time related attributes updates uniqueness e.g. see process and or the ranking of a category that includes the point of interest e.g. see process . Process shown in describes scoring categorized points of interest and ranking the categories. One or more points of interest are provided to the user based on the scoring of the points of interest and the ranking of the categories. The process can be combined with other processes described herein. For example scoring the points of interest can be based on proximity time related attributes updates and or uniqueness. Process shown in describes scoring points of interest based on proximity and uniqueness. Similarly process can be combined with other processes described herein. For example scoring the points of interest can be further based on time related attributes and or updates. Other combinations and subcombinations are possible and contemplated by this description.

Computing device includes a processor memory a storage device a high speed interface connecting to memory and high speed expansion ports and a low speed interface connecting to low speed bus and storage device . Each of the components and are interconnected using various buses and may be mounted on a common motherboard or in other manners as appropriate. The processor may process instructions for execution within the computing device including instructions stored in the memory or on the storage device to display graphical information for a GUI on an external input output device such as display coupled to high speed interface . In other implementations multiple processors and or multiple buses may be used as appropriate along with multiple memories and types of memory. Also multiple computing devices may be connected with each device providing portions of the necessary operations e.g. as a server bank a group of blade servers or a multi processor system .

The memory stores information within the computing device . In one implementation the memory is a volatile memory unit or units. In another implementation the memory is a non volatile memory unit or units. The memory may also be another form of computer readable medium such as a magnetic or optical disk.

The storage device is capable of providing mass storage for the computing device . In one implementation the storage device may be or contain a computer readable medium such as a floppy disk device a hard disk device an optical disk device or a tape device a flash memory or other similar solid state memory device or an array of devices including devices in a storage area network or other configurations. A computer program product may be tangibly embodied in an information carrier. The computer program product may also contain instructions that when executed perform one or more methods such as those described above. The information carrier is a computer or machine readable medium the memory the storage device memory on processor or a propagated signal.

The high speed controller manages bandwidth intensive operations for the computing device while the low speed controller manages lower bandwidth intensive operations. Such allocation of functions is exemplary only. In one implementation the high speed controller is coupled to memory display e.g. through a graphics processor or accelerator and to high speed expansion ports which may accept various expansion cards not shown . In the implementation low speed controller is coupled to storage device and low speed expansion port . The low speed expansion port which may include various communication ports e.g. USB Bluetooth Ethernet wireless Ethernet may be coupled to one or more input output devices such as a keyboard a pointing device a scanner or a networking device such as a switch or router e.g. through a network adapter.

The computing device may be implemented in a number of different forms as shown in the figure. For example it may be implemented as a standard server or multiple times in a group of such servers. It may also be implemented as part of a rack server system . In addition it may be implemented in a personal computer such as a laptop computer . Alternatively components from computing device may be combined with other components in a mobile device not shown such as device . Each of such devices may contain one or more of computing device and an entire system may be made up of multiple computing devices communicating with each other.

Computing device includes a processor memory an input output device such as a display a communication interface and a transceiver among other components. The device may also be provided with a storage device such as a microdrive or other device to provide additional storage. Each of the components and are interconnected using various buses and several of the components may be mounted on a common motherboard or in other manners as appropriate.

The processor may execute instructions within the computing device including instructions stored in the memory . The processor may be implemented as a chipset of chips that include separate and multiple analog and digital processors. The processor may provide for example for coordination of the other components of the device such as control of user interfaces applications run by device and wireless communication by device .

Processor may communicate with a user through control interface and display interface coupled to a display . The display may be for example a TFT LCD Thin Film Transistor Liquid Crystal Display or an OLED Organic Light Emitting Diode display or other appropriate display technology. The display interface may comprise appropriate circuitry for driving the display to present graphical and other information to a user. The control interface may receive commands from a user and convert them for submission to the processor . In addition an external interface may be provide in communication with processor so as to enable near area communication of device with other devices. External interface may provide for example for wired communication in some implementations or for wireless communication in other implementations and multiple interfaces may also be used.

The memory stores information within the computing device . The memory may be implemented as one or more of a computer readable medium or media a volatile memory unit or units or a non volatile memory unit or units. Expansion memory may also be provided and connected to device through expansion interface which may include for instance a SIMM Single In Line Memory Module card interface. Such expansion memory may provide extra storage space for device or may also store applications or other information for device . Specifically expansion memory may include instructions to carry out or supplement the processes described above and may include secure information also. Thus for example expansion memory may be provide as a security module for device and may be programmed with instructions that permit secure use of device . In addition secure applications may be provided via the SIMM cards along with additional information such as placing identifying information on the SIMM card in a non hackable manner.

The memory may include for example flash memory and or NVRAM memory as discussed below. In one implementation a computer program product is tangibly embodied in an information carrier. The computer program product contains instructions that when executed perform one or more methods such as those described above. The information carrier is a computer or machine readable medium the memory expansion memory memory on processor or a propagated signal that may be received for example over transceiver or external interface .

Device may communicate wirelessly through communication interface which may include digital signal processing circuitry where necessary. Communication interface may provide for communications under various modes or protocols such as GSM voice calls SMS EMS or MMS messaging CDMA TDMA PDC WCDMA CDMA2000 or GPRS among others. Such communication may occur for example through radio frequency transceiver . In addition short range communication may occur such as using a Bluetooth WiFi or other such transceiver not shown . In addition GPS Global Positioning System receiver module may provide additional navigation and location related wireless data to device which may be used as appropriate by applications running on device .

Device may also communicate audibly using audio codec which may receive spoken information from a user and convert it to usable digital information. Audio codec may likewise generate audible sound for a user such as through a speaker e.g. in a handset of device . Such sound may include sound from voice telephone calls may include recorded sound e.g. voice messages music files etc. and may also include sound generated by applications operating on device .

The computing device may be implemented in a number of different forms as shown in the figure. For example it may be implemented as a cellular telephone . It may also be implemented as part of a smartphone personal digital assistant or other similar mobile device.

Device may also include one or more different devices that are capable of sensing motion. Examples include but are not limited to accelerometers and compasses. Accelerometers and compasses or other devices that are capable of detecting motion or position are available from any number of vendors and may sense motion in a variety of ways. For example accelerometers may detect changes in acceleration while compasses may detect changes in orientation respective to the magnetic North or South Pole. These changes in motion may be detected by the device and used to update the display of the respective devices according to processes and techniques described herein.

Various implementations of the systems and techniques described here may be realized in digital electronic circuitry integrated circuitry specially designed ASICs application specific integrated circuits computer hardware firmware software and or combinations thereof. These various implementations may include implementation in one or more computer programs that are executable and or interpretable on a programmable system including at least one programmable processor which may be special or general purpose coupled to receive data and instructions from and to transmit data and instructions to a storage system at least one input device and at least one output device.

These computer programs also known as programs software software applications or code include machine instructions for a programmable processor and may be implemented in a high level procedural and or object oriented programming language and or in assembly machine language. As used herein the terms machine readable medium computer readable medium refers to any computer program product apparatus and or device e.g. magnetic discs optical disks memory Programmable Logic Devices PLDs used to provide machine instructions and or data to a programmable processor including a machine readable medium that receives machine instructions as a machine readable signal. The term machine readable signal refers to any signal used to provide machine instructions and or data to a programmable processor.

To provide for interaction with a user the systems and techniques described here may be implemented on a computer having a display device e.g. a CRT cathode ray tube or LCD liquid crystal display monitor for displaying information to the user and a keyboard and a pointing device e.g. a mouse or a trackball by which the user may provide input to the computer. Other kinds of devices may be used to provide for interaction with a user as well for example feedback provided to the user may be any form of sensory feedback e.g. visual feedback auditory feedback or tactile feedback and input from the user may be received in any form including acoustic speech or tactile input.

The systems and techniques described here may be implemented in a computing system that includes a back end component e.g. as a data server or that includes a middleware component e.g. an application server or that includes a front end component e.g. a client computer having a graphical user interface or a Web browser through which a user may interact with an implementation of the systems and techniques described here or any combination of such back end middleware or front end components. The components of the system may be interconnected by any form or medium of digital data communication e.g. a communication network . Examples of communication networks include a local area network LAN a wide area network WAN and the Internet.

The computing system may include clients and servers. A client and server are generally remote from each other and typically interact through a communication network. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client server relationship to each other.

While this specification contains many specific implementation details these should not be construed as limitations on the scope of any invention or of what may be claimed but rather as descriptions of features that may be specific to particular embodiments of particular inventions. Certain features that are described in this specification in the context of separate embodiments can also be implemented in combination in a single embodiment. Conversely various features that are described in the context of a single embodiment can also be implemented in multiple embodiments separately or in any suitable subcombination. Moreover although features may be described above as acting in certain combinations and even initially claimed as such one or more features from a claimed combination can in some cases be excised from the combination and the claimed combination may be directed to a subcombination or variation of a subcombination.

Similarly while operations are depicted in the drawings in a particular order this should not be understood as requiring that such operations be performed in the particular order shown or in sequential order or that all illustrated operations be performed to achieve desirable results. In certain circumstances multitasking and parallel processing may be advantageous. Moreover the separation of various system components in the embodiments described above should not be understood as requiring such separation in all embodiments and it should be understood that the described program components and systems can generally be integrated together in a single software product or packaged into multiple software products.

A number of embodiments have been described. Nevertheless it will be understood that various modifications may be made without departing from the spirit and scope of the invention.

In addition the logic flows depicted in the figures do not require the particular order shown or sequential order to achieve desirable results. In addition other steps may be provided or steps may be eliminated from the described flows and other components may be added to or removed from the described systems. Accordingly other embodiments are within the scope of the following claims.

