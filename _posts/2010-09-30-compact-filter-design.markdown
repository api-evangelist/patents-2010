---

title: Compact filter design
abstract: An apparatus and method for signal detection in which a digital sample stream is fed round robin into a plurality of buffers, which are sequentially compared with a reference signal to determine a match. A processor determines the chronological order of the samples in each bit of each buffer, and directs a bitwise comparison between the signal in each buffer with the reference to determine a match, e.g., by correlation. The apparatus and method are preferably implemented with a Field-Programmable Gate Array (FPGA). This scheme permits real time correlation of a data stream with a reference without use of shift registers, or a significant number of dedicated logic blocks.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08295412&OS=08295412&RS=08295412
owner: The United States of America as represented by the Secretary of the Navy
number: 08295412
owner_city: Washington
owner_country: US
publication_date: 20100930
---
The invention described herein may be manufactured and used by or for the Government of the United States of America for Governmental purposes without the payment of any royalties thereon or therefor.

The invention pertains generally to digital communication in particular to digital signal processing and signal detection in the presence of noise particularly using matched filters.

Several basic and often conflicting problems in signal detection are maximizing the signal to noise ratio of the detection process minimizing the amount of engineering resources necessary for detection and maximizing the speed of detection. A standard approach if one has a priori knowledge of an incoming signal is to detect the signal by correlating it with a matched filter i.e. a filter whose impulse response is the time reversed complex conjugate of the expected signal. Moreover if one has a priori knowledge of signal phase one can further increase signal to noise ratio by sampling the signal at the Nyquist rate and only in the frequency domain vicinity of expected signal peaks. If on the other hand one has no prior knowledge of signal phase one must asynchronously incoherently oversample the signal at higher than the Nyquist rate to increase the likelihood of sampling at or near optimum phase i.e. at or near peaks. This type of sampling requires more computing power more sample bits and larger sample bit sizes and more programmable logic blocks to implement the shift registers needed for real time correlation of incoming signals with reference signals. If one wishes to compare an incoming signal with a number of reference signals one must perform the comparison serially with each of the several reference signals an inherently slow process if one uses only one register for the incoming signal. Conversely if one feeds the incoming signal in parallel to plural registers each associated with one reference signal the process is faster but at the cost of significantly more dedicated registers and logic blocks.

A device commonly used in digital signal processing is the Field Programmable Gate Array FPGA which is an integrated circuit containing large arrays of configurable logic blocks and dedicated random access memory blocks. A configurable logic block typically contains programmable look up tables that can implement low level combinational logic. Configurable logic blocks are connectable to one another and can effect extremely complex combinational logic functions such as shift registers state machines and even microprocessors. FPGAs are easily reconfigurable and reprogrammable as desired thus making them ideal for development applications.

Accordingly an object of the invention is to permit comparison of digital signals including correlation of digital signals without use of shift registers.

Another object is comparing digital signals in a manner that increases signal to noise of such detections and thereby reduces the error rate of such detections.

Another object is to permit comparison of a digital signal to multiple other reference signals simultaneously without a corresponding multiplication of hardware necessary for the comparisons.

In accordance with these and other objects made apparent hereinafter the invention concerns an apparatus and method in which a processor receives a digital stream from a sampled signal and stores the samples in round robin fashion in a plurality of buffers. This is done in each buffer by overwriting the oldest of the digital samples stored there with the newest sample. A comparator performs a bitwise chronological comparison between a reference digital signal e.g. the digital impulse response of a preselected matched filer and each of the buffers. In this manner the samples are constantly shifted in a virtual manner so that the reference signal is compared constantly in real time to a chronologically ordered sample stream but without use of shift registers and with relatively few logic blocks. The processor is especially advantageously implemented in a Field Programmable Gate Array FPGA .

With reference to the drawing figures wherein like numbers indicate like parts throughout the several views shows a conventional way of comparing two digital signals for example as part of a correlation process. Buffer receives a continuous digital data stream m k m k 1 etc. from data source where k and i are integer indices and m k i represents a sample taken at system time stamp k i. The numerical values of the samples are preferably hard limited to be either 0 or 1 so that the bits of buffer constitute a simple binary number which is four bits long. The bit size is arbitrary so long as the number of bits in conjunction with the sampling rate and the spectral content of the analog signal being sampled satisfy the Nyquist criterion with sufficient oversampling to yield an acceptable bit error rate. The address of individual bits of buffer are identified as through as shown in . A shift register not shown moves the binary stream across buffer from right to left in where bit zero contains the oldest sample in buffer and bit the newest. The bits of buffer have bitwise connections to corresponding bits of a matching buffer which stores a fixed digital word FR FR FR FR where FR indicates filter replica and the argument through indicates the bit address. Use here of the term filter replica is to suggest that the digital data stored in matching buffer can be the impulse response of a matched filter sampled at the same rate as is the data stream traversing buffer and matched for example to an analog carrier frequency on which is modulated digital or analog information. At each time stamp bits through of buffer are compared to corresponding bits through of matching buffer to indicate bit matches for example by taking the exclusive NOR of each bit pair. Result buffer contains the output of the exclusive NORs which in the example of shows bits and matched between buffers and matching buffer and bits and not matched. Processor receives the output of result buffer and applies a preselected thresholding criterion such as whether a sufficient number of bits match to determine whether to deem binary data in buffers and a match and thereby subsequently annunciate a match or take other appropriate action in output . Because the data stream passes continually through buffer the data stream is continually tested for a match with the digital word in matching buffer .

The round robin accumulation of data in RAM is better seen in which tabulates data as stored in buffer indicated at at times k 1 through 21 shown in column . Buffer is again illustrated as having four bits with respective bit addresses through and RAM itself has four buffers n 4 not shown in of four bits each. Bit address is identified as bit address is identified as bit address is identified as and bit address is identified as . Beneath buffer in are seven lines each line having four entries each entry is located under a specific bit of buffer . Associated with each of these seven lines is a value of k indicating that the associated line represents the data stored in buffer after each corresponding kth sample.

Initially each bit of each of the buffers of RAM may have a value of digital zero. At time k 1 sampler begins generating digital samples m k where k 1 2 3 . . . . Sampler writes m into bit address of buffer and samples m through m in bit address of buffers through . At time k 5 the process repeats writing sample m in bit address of buffer and samples m through m in bit addresses of buffers through . After the k 13sample collectively lines in each bit of buffer contains a sample and after the k 16sample each bit of the remaining buffers do also . Thereafter as shown in group at k 17 the process repeats with sample m overwriting the oldest sample in buffer bit address sample m overwriting sample m in bit address etc. In this manner each new sample directed to buffer overwrites the oldest sample in the buffer and the same process occurs for each of the other three buffers beginning with k 18 for buffer k 19 for buffer and k 20 for buffer . This causes the samples in the buffers to stream through with the oldest sample dumped and the newest sample added but without using a shift register or otherwise moving samples from one buffer bit to another.

In operation processor is programmed to effect a bitwise comparison between a preselected four bit reference sample such as a four bit filter replica of the kind shown in . Because the samples in the buffers are not in chronological order processor is programmed to know which bit addresses to compare with which bit of the reference sample for each buffer at each time stamp k such that FR is compared to the oldest sample in the buffer FR the next oldest etc. For want of a better term this sort of comparison is denominated a chronological comparison. illustrates this for buffer immediately after k 21 line of . Buffer values are compared to filter replicas having reference values FR FR FR FR . Thus FR is compared to bit of buffer sample m FR with bit m FR with bit m and FR with bit m . Restating this as the samples age the processor provides bits in the correct order to the filter replica .

One can implement the scheme of in any digital computer or other processor which is programmable and contains writable and arbitrarily addressable memory. A Field Programmable Gate Array FPGA is uniquely suited to do so as it has the requisite memory and is programmable in the way of state machines to perform logic on data in its memory. For example the bit sequences of can be implemented in a FPGA using multiple state machines and combinational logic. In so doing such a processor uses a minimal amount of logic blocks and in particular no shift registers. This provides a simpler and lower resource device for performing the calculations performed in the prior art device of .

If one uses volatile storage the data in RAM are arbitrary upon initial power up. Thus at power up the values in the bits of the buffers cannot literally be characterized as varying from newest to oldest. For purposes of nomenclature such unwritten bits are considered oldest to newest in the order in which data is to be written into them. Thus in the scheme of at power up bit of each buffer is oldest in this sense and bit newest. This is consistent with the address sequencing in .

The choice of n 4 buffers and of four bits per buffer is arbitrary. One could use a buffer as small as two bits the minimum for generating statistically independent and hence detectable samples and as few as one buffer or a virtually unlimited number of buffers. However the larger the number of buffers and or bits the more computing resources one consumes the fewer the bits per buffer the smaller the likelihood of signal detection. In most cases an optimal system will have the number of bits in each buffer dictated by the specific signal one wishes to detect and will have the same number of buffers as the desired oversampling rate.

It will be understood that many additional changes in the details materials steps and arrangement of parts which have been herein described and illustrated in order to explain the nature of the invention may be made by those skilled in the art within the principle and scope of the invention as expressed in the appended claims. Accordingly the scope of the invention is to be discerned from reference to the appended claims wherein 

