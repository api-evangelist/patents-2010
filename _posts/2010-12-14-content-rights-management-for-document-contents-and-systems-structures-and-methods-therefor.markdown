---

title: Content rights management for document contents and systems, structures, and methods therefor
abstract: A document comprises a body having at least one defined portion therein, each defined portion being represented in the body of the document as a body object, each of the document and each body object therein being rights-managed as protected content based on license terms specified in a digital license. A recipient of the document can render the protected content of each of the document and each body object therein by acquiring the digital license and satisfying the license terms set forth in the digital license.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08458273&OS=08458273&RS=08458273
owner: Microsoft Corporation
number: 08458273
owner_city: Redmond
owner_country: US
publication_date: 20101214
---
The present application is a continuation of U.S. patent application Ser. No. 10 632 275 filed Aug. 1 2003 which is a continuation of U.S. patent application Ser. No. 10 607 898 filed Jun. 27 2003 and hereby incorporated herein by reference in its entirety.

The following U.S. patent applications disclose subject matter that is related to the subject matter of the present application and are hereby incorporated herein by reference in their entirety 

U.S. patent application Ser. No. 10 185 527 filed Jun. 28 2002 and entitled Obtaining a Signed Rights Label SRL for Digital Content and Obtaining a Digital License Corresponding to the Content Based on the SRL in a Digital Rights Management System 

U.S. patent application Ser. No. 10 185 278 filed Jun. 28 2002 and entitled Using a Rights Template to Obtain a Signed Rights Label SRL for Digital Content in a Digital Rights Management System 

U.S. patent application Ser. No. 10 185 511 filed Jun. 28 2002 and entitled Systems And Methods For Issuing Usage Licenses For Digital Content And Services 

U.S. patent application Ser. No. 10 364 627 filed Feb. 11 2003 and entitled Publishing Digital Content Within an Organization in Accordance with a Digital Rights Management RM System and

U.S. patent application Ser. No. 10 364 115 filed Feb. 11 2003 and entitled Publishing Digital Content Within an Organization in Accordance with a Digital Rights Management RM System.

This invention relates to a rights management RM system. More particularly the invention relates to employing an RM system to publish digital content in an organization such as an office or corporation or the like such that rendering and use of the content within the organization may be constrained according to corresponding use or license terms. Even more particularly the present invention relates to publishing and rendering and using rights managed content within the organization including documents databases electronic mail tables and presentations.

Rights management and enforcement is highly desirable in connection with digital content such as digital audio digital video digital text digital data digital multimedia etc. where such digital content is to be distributed to one or more users. Digital content could be static such as a text document for example or it could be streamed such as the streamed audio video of a live event. Typical modes of distribution include tangible devices such as a magnetic floppy disk a magnetic tape an optical compact disk CD etc. and intangible media such as an electronic bulletin board an electronic network the Internet etc. Upon being received by the user such user renders the digital content with the aid of appropriate rendering software such as an audio player a text displayer etc. on a personal computer or other hardware.

In one scenario a content owner or rights owner such as an author a publisher a broadcaster etc. wishes to distribute such digital content to each of many users or recipients in exchange for a license fee or some other consideration. In such scenario then the content may be an audio recording a multimedia presentation etc. and the purpose of the distribution is to generate the license fee. Such content owner given the choice would likely wish to restrict what the user can do with such distributed digital content. For example the content owner would like to restrict the user from copying and re distributing such content to a second user at least in a manner that denies the content owner a license fee from such second user.

In addition the content owner may wish to provide the user with the flexibility to purchase different types of use licenses at different license fees while at the same time holding the user to the terms of whatever type of license is in fact purchased. For example the content owner may wish to allow distributed digital content to be rendered only a limited number of times only for a certain total time only on a certain type of machine only on a certain type of rendering platform only by a certain type of user etc.

In another scenario a content developer such as an employee in or member of an organization wishes to distribute such digital content to one or more other employees or members in the organization or to other individuals outside the organization but would like to keep others from rendering the content. Here the distribution of the content is more akin to organization based content sharing in a confidential or restricted manner as opposed to broad based distribution in exchange for a license fee or some other consideration.

In such scenario then the content may be a document presentation spreadsheet database email or the like such as may be exchanged within an office setting and the content developer may wish to ensure that the content stays within the organization or office setting and is not rendered by non authorized individuals such as for example competitors or adversaries. Again such content developer wishes to restrict what a recipient can do with such distributed digital content. For example the content owner would like to restrict the user from copying and re distributing such content to a second user at least in a manner that exposes the content outside the bounds of individuals who should be allowed to render the content.

In addition the content developer may wish to provide various recipients with different levels of rendering rights. For example the content developer may wish to allow protected digital content to be viewable and not printable with respect to one class of individual and viewable and printable with respect to another class of individual.

However and in either scenario after distribution has occurred such content owner developer has very little if any control over the digital content. This is especially problematic in view of the fact that practically every personal computer includes the software and hardware necessary to make an exact digital copy of such digital content and to download such exact digital copy to a writeable magnetic or optical disk or to send such exact digital copy over a network such as the Internet to any destination.

Of course as part of a transaction wherein the content is distributed the content owner developer may require the user recipient of the digital content to promise not to re distribute such digital content in an unwelcome manner. However such a promise is easily made and easily broken. A content owner developer may attempt to prevent such re distribution through any of several known security devices usually involving encryption and decryption. However there is likely very little that prevents a mildly determined user from decrypting encrypted digital content saving such digital content in an un encrypted form and then re distributing same.

RM and enforcement architectures and methods have thus been provided to allow the controlled rendering of arbitrary forms of digital content where such control is flexible and definable by the content owner developer of such digital content. Examples of such architectures are set forth in the related applications set forth above among others. Such architectures allow and facilitate such controlled rendering especially in an office or organization environment or the like where documents are to be shared amongst a defined group of individuals or classes of individuals.

A need exists however for various systems structures and methods in connection with such architectures to effectuate various RM functions.

The aforementioned needs are satisfied at least in part by the present invention in which an email comprises a body having at least one related and previously sent email where each previously sent email is represented in the body of the email as a body object. Each of the email and each body object therein is rights managed as protected content whereby a recipient of the email can render the protected content of each of the email and each body object therein with a corresponding license if the recipient satisfies terms set forth in the license.

Although not required the invention can be implemented via an application programming interface API for use by a developer and or included within the network browsing software which will be described in the general context of computer executable instructions such as program modules being executed by one or more computers such as client workstations servers or other devices. Generally program modules include routines programs objects components data structures and the like that perform particular tasks or implement particular abstract data types. Typically the functionality of the program modules may be combined or distributed as desired in various embodiments. Moreover those skilled in the art will appreciate that the invention may be practiced with other computer system configurations. Other well known computing systems environments and or configurations that may be suitable for use with the invention include but are not limited to personal computers PCs automated teller machines server computers hand held or laptop devices multi processor systems microprocessor based systems programmable consumer electronics network PCs minicomputers mainframe computers and the like. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network or other data transmission medium. In a distributed computing environment program modules may be located in both local and remote computer storage media including memory storage devices.

With reference to an exemplary system for implementing the invention includes a general purpose computing device in the form of a computer . Components of computer may include but are not limited to a processing unit a system memory and a system bus that couples various system components including the system memory to the processing unit . The system bus may be any of several types of bus structures including a memory bus or memory controller a peripheral bus and a local bus using any of a variety of bus architectures. By way of example and not limitation such architectures include Industry Standard Architecture ISA bus Micro Channel Architecture MCA bus Enhanced ISA EISA bus Video Electronics Standards Association VESA local bus and Peripheral Component Interconnect PCI bus also known as Mezzanine bus .

Computer typically includes a variety of computer readable media. Computer readable media can be any available media that can be accessed by computer and includes both volatile and nonvolatile media removable and non removable media. By way of example and not limitation computer readable media may comprise computer storage media and communication media. Computer storage media includes both volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CDROM digital versatile disks DVD or other optical disk storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by computer . Communication media typically embodies computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media includes wired media such as a wired network or direct wired connection and wireless media such as acoustic RF infrared and other wireless media. Combinations of any of the above should also be included within the scope of computer readable media.

The system memory includes computer storage media in the form of volatile and or nonvolatile memory such as read only memory ROM and random access memory RAM . A basic input output system BIOS containing the basic routines that help to transfer information between elements within computer such as during start up is typically stored in ROM . RAM typically contains data and or program modules that are immediately accessible to and or presently being operated on by processing unit . By way of example and not limitation illustrates operating system application programs other program modules and program data .

The computer may also include other removable non removable volatile nonvolatile computer storage media. By way of example only illustrates a hard disk drive that reads from or writes to non removable nonvolatile magnetic media a magnetic disk drive that reads from or writes to a removable nonvolatile magnetic disk and an optical disk drive that reads from or writes to a removable nonvolatile optical disk such as a CD ROM or other optical media. Other removable non removable volatile nonvolatile computer storage media that can be used in the exemplary operating environment include but are not limited to magnetic tape cassettes flash memory cards digital versatile disks digital video tape solid state RAM solid state ROM and the like. The hard disk drive is typically connected to the system bus through a non removable memory interface such as interface and magnetic disk drive and optical disk drive are typically connected to the system bus by a removable memory interface such as interface .

The drives and their associated computer storage media discussed above and illustrated in provide storage of computer readable instructions data structures program modules and other data for the computer . In for example hard disk drive is illustrated as storing operating system application programs other program modules and program data . Note that these components can either be the same as or different from operating system application programs other program modules and program data . Operating system application programs other program modules and program data are given different numbers here to illustrate that at a minimum they are different copies. A user may enter commands and information into the computer through input devices such as a keyboard and pointing device commonly referred to as a mouse trackball or touch pad. Other input devices not shown may include a microphone joystick game pad satellite dish scanner or the like. These and other input devices are often connected to the processing unit through a user input interface that is coupled to the system bus but may be connected by other interface and bus structures such as a parallel port game port or a universal serial bus USB .

A monitor or other type of display device is also connected to the system bus via an interface such as a video interface . A graphics interface such as Northbridge may also be connected to the system bus . Northbridge is a chipset that communicates with the CPU or host processing unit and assumes responsibility for accelerated graphics port AGP communications. One or more graphics processing units GPUs may communicate with graphics interface . In this regard GPUs generally include on chip memory storage such as register storage and GPUs communicate with a video memory . GPUs however are but one example of a coprocessor and thus a variety of co processing devices may be included in computer . A monitor or other type of display device is also connected to the system bus via an interface such as a video interface which may in turn communicate with video memory . In addition to monitor computers may also include other peripheral output devices such as speakers and printer which may be connected through an output peripheral interface .

The computer may operate in a networked environment using logical connections to one or more remote computers such as a remote computer . The remote computer may be a personal computer a server a router a network PC a peer device or other common network node and typically includes many or all of the elements described above relative to the computer although only a memory storage device has been illustrated in . The logical connections depicted in include a local area network LAN and a wide area network WAN but may also include other networks. Such networking environments are commonplace in offices enterprise wide computer networks intranets and the Internet.

When used in a LAN networking environment the computer is connected to the LAN through a network interface or adapter . When used in a WAN networking environment the computer typically includes a modem or other means for establishing communications over the WAN such as the Internet. The modem which may be internal or external may be connected to the system bus via the user input interface or other appropriate mechanism. In a networked environment program modules depicted relative to the computer or portions thereof may be stored in the remote memory storage device. By way of example and not limitation illustrates remote application programs as residing on memory device . It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.

One of ordinary skill in the art can appreciate that a computer or other client device can be deployed as part of a computer network. In this regard the present invention pertains to any computer system having any number of memory or storage units and any number of applications and processes occurring across any number of storage units or volumes. The present invention may apply to an environment with server computers and client computers deployed in a network environment having remote or local storage. The present invention may also apply to a standalone computing device having programming language functionality interpretation and execution capabilities.

Distributed computing facilitates sharing of computer resources and services by direct exchange between computing devices and systems. These resources and services include the exchange of information cache storage and disk storage for files. Distributed computing takes advantage of network connectivity allowing clients to leverage their collective power to benefit the entire enterprise. In this regard a variety of devices may have applications objects or resources that may interact to implicate authentication techniques of the present invention for trusted graphics pipeline s .

It can also be appreciated that an object such as may be hosted on another computing device or . Thus although the physical environment depicted may show the connected devices as computers such illustration is merely exemplary and the physical environment may alternatively be depicted or described comprising various digital devices such as PDAs televisions MP3 players etc. software objects such as interfaces COM objects and the like.

There are a variety of systems components and network configurations that support distributed computing environments. For example computing systems may be connected together by wireline or wireless systems by local networks or widely distributed networks. Currently many of the networks are coupled to the Internet which provides the infrastructure for widely distributed computing and encompasses many different networks.

In home networking environments there are at least four disparate network transport media that may each support a unique protocol such as Power line data both wireless and wired voice e.g. telephone and entertainment media. Most home control devices such as light switches and appliances may use power line for connectivity. Data Services may enter the home as broadband e.g. either DSL or Cable modem and are accessible within the home using either wireless e.g. HomeRF or 802.11b or wired e.g. Home PNA Cat 5 even power line connectivity. Voice traffic may enter the home either as wired e.g. Cat 3 or wireless e.g. cell phones and may be distributed within the home using Cat 3 wiring. Entertainment media may enter the home either through satellite or cable and is typically distributed in the home using coaxial cable. IEEE 1394 and DVI are also emerging as digital interconnects for clusters of media devices. All of these network environments and others that may emerge as protocol standards may be interconnected to form an intranet that may be connected to the outside world by way of the Internet. In short a variety of disparate sources exist for the storage and transmission of data and consequently moving forward computing devices will require ways of protecting content at all portions of the data processing pipeline.

The Internet commonly refers to the collection of networks and gateways that utilize the TCP IP suite of protocols which are well known in the art of computer networking. TCP IP is an acronym for Transport Control Protocol Interface Program. The Internet can be described as a system of geographically distributed remote computer networks interconnected by computers executing networking protocols that allow users to interact and share information over the networks. Because of such wide spread information sharing remote networks such as the Internet have thus far generally evolved into an open system for which developers can design software applications for performing specialized operations or services essentially without restriction.

Thus the network infrastructure enables a host of network topologies such as client server peer to peer or hybrid architectures. The client is a member of a class or group that uses the services of another class or group to which it is not related. Thus in computing a client is a process i.e. roughly a set of instructions or tasks that requests a service provided by another program. The client process utilizes the requested service without having to know any working details about the other program or the service itself. In a client server architecture particularly a networked system a client is usually a computer that accesses shared network resources provided by another computer e.g. a server. In the example of computers etc. can be thought of as clients and computer etc. can be thought of as the server where server etc. maintains the data that is then replicated in the client computers etc.

A server is typically a remote computer system accessible over a remote network such as the Internet. The client process may be active in a first computer system and the server process may be active in a second computer system communicating with one another over a communications medium thus providing distributed functionality and allowing multiple clients to take advantage of the information gathering capabilities of the server.

Client and server communicate with one another utilizing the functionality provided by a protocol layer. For example Hypertext Transfer Protocol HTTP is a common protocol that is used in conjunction with the World Wide Web WWW . Typically a computer network address such as a Universal Resource Locator URL or an Internet Protocol IP address is used to identify the server or client computers to each other. The network address can be referred to as a Universal Resource Locator address. For example communication can be provided over a communications medium. In particular the client and server may be coupled to one another via TCP IP connections for high capacity communication.

Thus illustrates an exemplary networked or distributed environment with a server in communication with client computers via a network bus in which the present invention may be employed. In more detail a number of servers etc. are interconnected via a communications network bus which may be a LAN WAN intranet the Internet etc. with a number of client or remote computing devices etc. such as a portable computer handheld computer thin client networked appliance or other device such as a VCR TV oven light heater and the like in accordance with the present invention. It is thus contemplated that the present invention may apply to any computing device in connection with which it is desirable to process store or render secure content from a trusted source.

In a network environment in which the communications network bus is the Internet for example the servers can be Web servers with which the clients etc. communicate via any of a number of known protocols such as HTTP. Servers may also serve as clients as may be characteristic of a distributed computing environment. Communications may be wired or wireless where appropriate. Client devices may or may not communicate via communications network bus and may have independent communications associated therewith. For example in the case of a TV or VCR there may or may not be a networked aspect to the control thereof. Each client computer and server computer may be equipped with various application program modules or objects and with connections or access to various types of storage elements or objects across which files may be stored or to which portion s of files may be downloaded or migrated. Thus the present invention can be utilized in a computer network environment having client computers etc. that can access and interact with a computer network bus and server computers etc. that may interact with client computers etc. and other devices and databases .

As is known and referring now to rights management RM and enforcement is highly desirable in connection with digital content such as digital audio digital video digital text digital data digital multimedia etc. where such digital content is to be distributed to users. Upon being received by the user such user renders the digital content with the aid of an appropriate rendering device such as a media player text displayer etc. on a personal computer or the like.

Typically a content owner or developer hereinafter owner distributing such digital content wishes to restrict what the user can do with such distributed digital content . For example the content owner may wish to restrict the user from copying and re distributing such content to a second user or may wish to allow distributed digital content to be rendered only a limited number of times only for a certain total time only on a certain type of machine only on a certain type of rendering platform only by a certain type of user etc.

However after distribution has occurred such content owner has very little if any control over the digital content . An RM system then allows the controlled rendering of arbitrary forms of digital content where such control is flexible and definable by the content owner of such digital content. Typically content is distributed to the user in the form of a package by way of any appropriate distribution channel. The digital content package as distributed may include the digital content encrypted with a symmetric encryption decryption key KD i.e. KD CONTENT as well as other information identifying the content how to acquire a license for such content etc.

The trust based RM system allows an owner of digital content to specify license rules that must be satisfied before such digital content is allowed to be rendered on a user s computing device . Such license rules can include the aforementioned temporal requirement and may be embodied within a digital license or use document hereinafter license that the user user s computing device hereinafter such terms are interchangeable unless circumstances require otherwise must obtain from the content owner or an agent thereof. Such license also includes the decryption key KD for decrypting the digital content perhaps encrypted according to a key decryptable by the user s computing device . As seen in such encrypting key is a public key of the user s computing device PU BB and the user s computing device presumably has the corresponding private key PR BB by which PU BB KD may be decrypted.

The content owner for a piece of digital content must trust that the user s computing device will abide by the rules and requirements specified by such content owner in the license i.e. that the digital content will not be rendered unless the rules and requirements within the license are satisfied. Preferably then the user s computing device is provided with a trusted component or mechanism that will not render the digital content except according to the license rules embodied in the license associated with the digital content and obtained by the user.

The trusted component typically has a license evaluator that determines whether the license is valid reviews the license rules and requirements in such valid license and determines based on the reviewed license rules and requirements whether the requesting user has the right to render the requested digital content in the manner sought among other things. As should be understood the license evaluator is trusted in the RM system to carry out the wishes of the owner of the digital content according to the rules and requirements in the license and the user should not be able to easily alter such trusted element for any purpose nefarious or otherwise.

As should be understood the rules and requirements in the license can specify whether the user has rights to render the digital content based on any of several factors including who the user is where the user is located what type of computing device the user is using what rendering application is calling the RM system the date the time etc. In addition the rules and requirements of the license may limit the license to a pre determined number of renderings or pre determined rendering time for example. Thus the trusted component may need to refer to a clock on the computing device .

The rules and requirements may be specified in the license according to any appropriate language and syntax. For example the language may simply specify attributes and values that must be satisfied DATE must be later than X e.g. or may require the performance of functions according to a specified script IF DATE greater than X THEN DO . . . e.g. .

Upon the license evaluator determining that the license is valid and that the user satisfies the rules and requirements therein the digital content can then be rendered. In particular to render the content the decryption key KD is obtained from the license and is applied to KD CONTENT from the content package to result in the actual content and the actual content is then in fact rendered.

As may be appreciated especially within an organization it is desirable to apply rights management and enforcement to electronic communications between individuals within the organization such as for example electronic mail messages email between such individuals. Accordingly each individual in the organization that receives such an email and the content therein can in fact so render such content assuming that the individual obtains a license corresponding to the email content and that the rules and requirements of the obtained license in fact allow the individual to so render. Correspondingly an individual inside or outside the organization that receives such an email and the content therein cannot render such content if such individual cannot obtain a license corresponding to the email content or if the rules and requirements of the obtained license do not in fact allow the individual to so render.

In one embodiment of the present invention then an individual in an organization sending email can apply RM to protect the content of the email such that the protection travels with the email. Thus even if the email is forwarded from one recipient to another either inside or outside the organization the content of the email can only be rendered by a recipient that can obtain a license for the content where the license allows such recipient to in fact render the content of the email. It may be the case that only recipients within the organization can get such a license although it is to be appreciated that other recipients may be granted such a license without departing from the spirit and scope of the present invention. For example the protection traveling with the email may allow a non organization recipient to obtain a license as a guest or the like and the license may be for the guest recipient to read the content only.

As may be appreciated the license for the email content is typically obtained from an RM server operated by or on behalf of the organization. Such license may be sent with the email under at least some circumstances may be obtained upon opening the email may be obtained upon downloading the email may be obtained at the direction of the recipient and or the like all without departing from the spirit and scope of the present invention. Moreover such obtaining may be performed manually or automatically if circumstances allow again without departing from the spirit and scope of the present invention.

Significantly inasmuch as the email with the protected content may be received by an RM compliant individual with a trusted component and the like such email should be in a form amenable to such RM compliant individual. At the same time inasmuch as the email with the protected content may be received by a non RM compliant individual without a trusted component and the like such email should also be in a form amenable to such non RM compliant individual at least to the extent that the email is recognizable as such by the computing device of the non RM compliant individual informs the non compliant individual of the protected content therein and does not inappropriately affect the computing device of the non RM compliant individual. Put another way the email with the protected content should be in a more or less standard email form so as to be recognized as email but should also include within the standard form the protected content of the email along with all necessary RM related information.

Thus in one embodiment of the present invention the structure of an RM protected email message is consistent with a MIME or MAPI representation of an email message with an attachment. Further in such embodiment the attachment includes protected content of the email along with other RM related information. For the sake of simplicity a somewhat generalized MIME or MAPI structure for an email is set forth 

As may be appreciated the HEADER portion contains basic information relating to the email including a date any subject information the sender the recipient and or the like. The MAIN INFO portion contains the body of the email which may include text pictures links and or the like. Notably inasmuch as some recipients may have different email capabilities the MAIN INFO portion can include several alternative versions of the body of the email including the body AS PLAIN TEXT for a recipient that cannot handle anything more complex than plain text and the body AS HTML for a recipient that can handle more complex HTML Hyper Text Markup Language formatting. Of course other alternative versions of the body may also be included such as for example a version with the body in an XML eXtensible Markup Language format.

The ATTACHMENT portion can contain most any information that a sender wishes to attach to an email such as for example one or more files or one or more other pieces of information to be included with the email. In the latter category such other piece of information may for example include specific information that the sender wishes to send to the recipient but that does not fit elsewhere within the email.

In one embodiment of the present invention then and referring now to the aforementioned email structure is employed to send RM compliant email as follows. In particular and as seen in in the embodiment the email contains the protected content as being embedded within an attachment to the email and the trusted component and the email application on the computing device of an RM compliant individual are aware that such protected content is in the attachment .

Of course such protected content in the attachment is of no use to a non RM compliant individual and an email application thereof at a computing device thereof and accordingly the main info of the email may contain a message to the effect that the email is RM protected and therefore not viewable by the non RM compliant individual. Alternatively the main info of the email may have another message an advertisement a link for more information on RM compliant email etc. Note that in the case where the trusted component and the email application on the computing device of an RM compliant individual are aware that such protected content is in the attachment and can access such protected content it may be the case that the message in the main info of the email is bypassed entirely and is not displayed to the RM compliant individual. Instead the protected content in the attachment is displayed upon the approval of the trusted component and decryption of such protected content . The trusted component and the email application on the computing device of an RM compliant individual may become aware that the protected content is in the attachment in any appropriate manner without departing from the spirit and scope of the present invention. For example in examining the attachment of the email certain identifying indicia may be found.

In one embodiment of the present invention and as also seen in the attachment of the email with the protected content is organized in the following manner. In general the attachment has the protected content and also has rights data relating to the protected content . As may be appreciated the rights data may be defined by the sender of the email or may be defined by a template selected by the sender of the email and sets forth each individual or group of individuals that has rights with respect to the protected content and for each such individual or group of individuals a description of such rights. Thus and as an example the rights may specify that one particular individual can read print and forward the email and copy the contents of same for an unlimited duration but that a particular group of individuals may only read and reply to the email for the next seven days. Note that the individuals or groups of individuals set forth in the rights data may extend beyond the scope of the recipients of the email based on the assumption that such recipients may forward the email to other recipients.

Significantly and as was set forth above the protected content in the attachment of the email is encrypted according to a cryptographic key and the rights data may include a decryption key KD for decrypting the encrypted content . Of course such decryption key KD should itself be encrypted to prevent unauthorized use thereof. Accordingly in one embodiment of the present invention the decryption key KD in the rights data is encrypted according to a public key of the aforementioned RM server PU RM operated by or on behalf of the organization to result in PU RM KD . Alternatively the rights data is encrypted according to a public key of the sender PU SE to result in PU SE KD and only the aforementioned RM server can gain access to a corresponding private key of the sender PR SE . Thus only the RM server having the private key PR RM corresponding to PU RM or access to PR SE can apply same to PU RM KD or PU SE KD from the rights data to obtain KD . Alternatively only the sender having the private key PR SE corresponding to PU SE can apply same to PU SE KD from the rights data to obtain KD .

As may be appreciated the RM server in fact obtains KD from the rights data in the course of creating the aforementioned license for the protected content and places such KD into the license perhaps encrypted according to a key decryptable by the user s computing device . Alternatively the sender in fact obtains KD from the rights data in the course of creating the aforementioned license for the protected content and places such KD into the license perhaps encrypted according to a key decryptable by the user s computing device . As should be understood the sender should be able to create a license for itself without the aid of the RM server so that such sender can render its own protected content .

Still referring to it is seen that the protected content in the attachment of the email may actually comprise several alternative forms of the body of the email which again may include text pictures links and or the like. As before the alternative forms may be provided inasmuch as some recipients may have different email capabilities. As shown some of the alternative forms may include the body in plain text in HTML in XML in rich text format RTF in plain text as HTML etc. Of course other alternative versions of the body may also be included in the protected content without departing from the spirit and scope of the present invention. Note that the protected content may also include body information such as for example whether the body is included in plain text or in HTML and other body information.

Finally the protected content may also include attachments to the body of the email which inasmuch as the body of the email is itself part of the attachment will hereinafter be referred to as protected content attachments . As may be appreciated such protected content attachments may be organized in any particular manner without departing from the spirit and scope of the present invention. For example in one scenario the attachments may be organized into a list that also includes as a preface or the like the number of attachments and the name of each attachment and includes as a postscript or the like metadata relating to the addenda if any.

In one embodiment of the present invention the protected encrypted content of the email is compressed to reduce the overall size thereof. As may be appreciated the trusted component may decompress the encrypted and compressed content in the course of decrypting same. As may also be appreciated such compression provides a significant reduction in the overall size of the email having the protected content in the attachment thereof. Notably such compression is not presently found by default in existing email formats.

With the email created by a sender thereof as set forth herein and sent to a recipient then and turning now to the recipient upon receiving same step processes such email in the following manner.

In the case where the recipient and the computing device thereof are not enabled such recipient and the computing device thereof open the email step . In doing so and inasmuch as the non RM enabled recipient cannot access the protected content therein let alone recognize that the email has such protected content therein the main info of the email is displayed to the recipient where such main info is the message that the email is RM protected and that the recipient does not have rights to view the body of such email step . In addition the attachment is identified to the non RM enabled recipient even though such recipient would not be able to decrypt the protected content therein step . Thus the email as received by the non RM enabled recipient is handled in the same manner as any other email that would be received by such non RM enabled recipient except for the fact that the message delivered in the email is that the recipient cannot view the body of such email as is set forth in the protected content therein.

In the case where the recipient and the computing device thereof are in fact enabled such recipient and the computing device thereof also open the email step . Here though the RM enabled recipient in fact recognizes that the email has protected content therein step discounts the main info of the email step and instead examines the attachment of the email and proceeds based thereon to render the protected content for the RM compliant recipient step .

Any appropriate methods and mechanisms may be employed to render the protected content for the RM compliant recipient without departing from the spirit and scope of the present invention. For example and in one embodiment of the present invention and turning now to the rights data in the attachment of the email is retrieved and forwarded to the RM server step and such RM server determines that the RM compliant recipient is one of the individuals or in one of the groups of individuals listed in the rights data step and thereafter issues a license corresponding to the protected content to the recipient based on the rights data step where such license specifies the rights the recipient has with respect to the protected content as determined from the rights data and also includes from the rights data a decryption key KD for decrypting the encrypted content . As was set forth above such KD may be encrypted in a manner decryptable by the trusted component of the computing device of the recipient.

The trusted component of the computing device of the RM compliant recipient then reviews the issued license to determine that the recipient has the right to view the content step and thereafter retrieves KD from the license and the protected content from the email step decrypts the protected content with KD step and presents the decrypted content for rendering step . Note that based on the rights the recipient has with respect to the content as set forth in the license the trusted component may take other appropriate actions. For example if the recipient does not have the right to copy or print the content the trusted component would direct the email application to turn off such functions with respect to such content .

As should now be appreciated in the present invention rights management is applied to an email by way of a trusted component on a computing device of a RM compliant recipient and the email is in a form that is still recognizable to a non RM compliant recipient as email even though such non RM compliant recipient cannot access the protected content in such email . Moreover inasmuch as the protected content is rights managed such content can be compressed within the email and decompressed by the trusted component .

As may be appreciated although an email may now be RM protected for example in the manner set forth above such RM protection does not automatically extend to any attachments thereof. That is if an attachment of the email such as for example a word processing document is not itself RM protected the RM protection of the email does not automatically protect the attachment once the email has been rendered by a recipient thereof. Accordingly and without such RM protection the attachment may be freely and widely distributed in contravention of the goals and purposes of RM.

Thus and in one embodiment of the present invention each attachment of an email is RM protected upon RM protecting the email itself presuming that such attachment is capable of being RM protected and has not already been RM protected. That is each attachment is RM protected but only if such attachment is of a class of items that RM protection can be applied to. For example it may be that the trusted component of the computing device of the sender of the email can apply RM protection to a word processing document of a certain type but not to a word processing document of another type. If an attachment is already RM protected applying further RM protection is not done since to do so could remove more restrictive RM protection.

RM protection may be applied to an RM protectable item in any appropriate manner without departing from the spirit and scope of the present invention. In one embodiment of the present invention RM protection is applied by publishing the item. Such publishing may occur at any appropriate time such as when sending or saving the email with the item. Briefly to publish the item and turning now to the trusted component or another element on the computing device generates a content key KD that is used to encrypt the item step . The content key KD is typically a symmetric key although any key can be used to encrypt the digital content. As is known a symmetric key is employed by a symmetric key algorithm both to encrypt and decrypt. Accordingly KD should be well hidden when shared between a sender and a receiver.

Thereafter the item is encrypted with KD to form KD item step . Additionally rights data corresponding to KD item is generated step either by the publisher of the content or by another entity. Note that such rights data may be custom rights data or rights data as obtained from a pre defined template. As was discussed above the rights data can include a list of entities that will be entitled to consume the content the specific rights that each of the entities possesses with respect to the content and any conditions that may be imposed on those rights.

 KD item is then protected to the aforementioned RM server so that all license requests are directed to such RM server . In particular a public key of the RM server PU RM is employed to encrypt KD to result in PU RM KD step . Thus only the RM server with the corresponding private key PR RM can decrypt same to reveal KD . Additionally the rights data for the items may also be encrypted by KD or PU RM although such encrypted rights data may not be perceived as necessary in all cases.

Thereafter the rights data is submitted to the RM server for signing or can be self signed if permission to do so is given by the RM server step . As may be appreciated the signed rights data is tamper resistant in that any changes to the signed rights data will cause the corresponding signature to fail to verify.

Significantly and in one embodiment of the present invention the item is provided with a bind ID at some point in the process step and such bind ID may be included with the signed rights data step . Thus when the rights data is employed to obtain a license for the item as in such license also includes the bind ID and thus is tied or bound to such item thereby.

Once the signed rights data is obtained such signed rights data is concatenated with the corresponding KD item to form a package containing the RM protected item step . Thus a rendering application that is RM enabled can discover the signed rights data upon attempting to render the package and such discovery triggers the rendering application to initiate a license request against the RM server as in . Note that with regard to an RM protected email the package is in actuality the attachment of the email as shown in where the protected content of the attachment is KD item and where the rights data of the attachment is the signed rights data .

With the understanding then that an email may be RM protected in a manner such as that shown in and also that an attachment of such email may also be RM protected in a manner such as that shown in a method of propagating RM protection from an email to each RM protectable attachment thereof is set forth.

In particular and turning now to it is presumed that a sender has authored an email with an RM protectable attachment step but that RM protection has not as yet been applied to the email or to the attachment . Prior to sending or otherwise saving the email with the attachment then the sender selects rights data for the email either from a menu of rights data choices or from a menu available templates of such rights data step and actuates application of RM protection to the email step . Significantly in the course of actuating application of RM protection to the email a particular bind ID and a particular content decryption key KD are selected for the email and each RM protectable attachment thereof step .

In one embodiment of the present invention prior to applying RM protection to the email itself RM protection is first applied to each RM protectable and not already protected attachment of the email step where such RM protection is applied in a manner akin to that shown in . Accordingly each attachment is transformed into a package with a KD item based on the particular KD signed rights data and the particular item ID. Thereafter each such package is attached to the email as a corresponding attachment step and RM protection is then applied to the email itself step where such RM protection is again applied in a manner akin to that shown in . Accordingly the email with each attachment is transformed into a structure such as that shown in and has a KD item based on the particular KD signed rights data and the particular item ID.

Thus and significantly and in one embodiment of the present invention all of the RM protected attachments and the RM protected email itself share the same particular content decryption key KD and the same particular bind ID. Accordingly and as should be appreciated a license obtained for the email in the manner shown in will have the particular bind ID of the email and also of all of the RM protected attachments of the email and will also have the particular decryption key KD that decrypts the email and also of all of the RM protected attachments of the email.

As may now be appreciated by having all of the RM protected attachments and the RM protected email itself share the same particular content decryption key KD and the same particular bind ID a recipient of the email needs only a single license to render all of such RM protected attachments and such RM protected email itself presuming of course the single license delivers such rendering rights to such recipient. Moreover such single license has a single set of rights data that is applicable to the email and all of the RM protected attachments thereof and accordingly it can be said that the rights attached to the email as embodied in the corresponding single license have been propagated to each RM protected attachment of such email . It should of course be understood that only attachments protected as a result of being included in a protected e mail share the license . Previously protected attachments included in the email require an additional license .

Note though that the single license cannot be specific to any particular item from among the email and the attachments thereof such that the single license is not applicable to all of such items. Note too that in RM protecting each item as at steps and of only a single set of the rights data need be generated and submitted as at steps and of to result in a single set of signed rights data inasmuch as the single license is generated from the single set of rights data as is shown in . Nevertheless each item from among the email and the attachments thereof should be in a package with the single set of signed rights data inasmuch as any attachment within the email may potentially be separated from such email and redistributed to another recipient and such another recipient needs such signed rights data to obtain another license .

As was set forth above to render the protected content in an RM protected email such as that shown in where the protected content is encrypted according to a content key KD a recipient of the email must obtain a corresponding license with KD from the RM server satisfy the rights and conditions set forth in the license obtain KD from the license and apply KD to decrypt the protected content in such email all in a manner such as that shown in . However and significantly the RM server is likely only available to the recipient of the email by way of a network or the like and it can be the case that the recipient is not always connectively coupled to such RM server by way of such network. That is it may be the case that the recipient is connectively coupled to the network to receive the email and does not at such time obtain a corresponding license for the protected content in the email .

Thus it may be the situation that the recipient of the email is later out of network connectivity with the RM server and therefore cannot obtain the corresponding license with KD to render the protected content of the email . Accordingly and in one embodiment of the present invention the email application and the trusted component in combination work to automatically obtain a license for each email with protected content therein when such email is first received by the recipient and such recipient is connectively coupled to the network and to the RM server thereby.

In particular and turning now to in one embodiment of the present invention while connectively coupled to the network of the like the email application of the recipient receives an email step and recognizes that the received email has protected content therein step . As was set forth above the email application may determine that the email has protected content therein by way of any appropriate method or mechanism without departing from the spirit and scope of the present invention. Thereafter the email application and the trusted component work together to obtain a license for the protected content of the email from the RM server while the computing device of the trusted component is still remains connectively coupled to the network by which the RM server may be accessed step .

In one embodiment of the present invention the email application of the recipient may be presumed to be capable of receiving several emails at a time especially if the emails are received from an email server not shown that must be polled for such emails . Accordingly and in such embodiment the email application places each received email with protected content therein into a queue step and the trusted component retrieves the received email from the queue step and requests the license for the protected content of the retrieved email step preferably in an automatic manner in a manner transparent to the recipient and in a manner such as that shown in .

Note that it may be the case that the trusted component can be expected to request a license from any of one or more RM servers where a request is directed to a particular RM server based on RM server information in the corresponding content . In such situation and in appreciation of the fact that at various times each RM server may fail to respond to such a request for a license and in one embodiment of the present invention the trusted component may maintain a bad server list in which a non responding or bad RM server may be entered step .

Of course a bad RM server can be expected to be fixed within a reasonable period of time on the order of five to thirty minutes or so and accordingly the trusted component may include a process that removes each entered bad RM server from the list in a corresponding amount of time. Accordingly a request for a license is made to a particular RM server as at step but only if the RM server that the request is directed to is not on the bad server list . If such RM server is indeed on the bad server list the corresponding email may be placed back into the queue for later processing step on the presumption that the RM server will eventually be removed from the list or may be discarded from the queue and simply not be licensed by way of the queue step .

Note that in the case where RM protection has been propagated to attachments of email as is the case in connection with the license that has been obtained by the process of applies not only to the email but to all of the protected attachments thereof. Accordingly and again only one license request need be made per email .

Note too that the invention of has up until now been set forth in terms of obtaining a license when a corresponding email with protected content is obtained such invention is not limited to such email . Instead it should be appreciated that the invention of may also be employed to obtain a license when any protected content is obtained especially in the case where the protected content is received over a network and it is possible that the recipient may lose connectivity with such network.

As should now be appreciated in employing the method of the present invention as set forth in the trusted component of the computing device of the recipient automatically requests and hopefully obtains a license for protected content in an email or from any other network source when the trusted component is communicatively coupled to the network. Thus the trusted component as communicatively coupled to the network can automatically contact an appropriate RM server thereon in the course of requesting such license . As a result the license as automatically obtained is present on the computing device and may be employed to render the protected content even in the case where the computing device is out of communication with the network at some later time.

In a manner similar to an email and as may be appreciated it is especially desirable within an organization to apply rights management and enforcement to documents such as electronic word processing documents. Accordingly each individual in an organization that receives such a word processing document or other document with protected content therein can in fact so render such content again assuming that the individual obtains a license corresponding to the content and that the rules and requirements of the obtained license in fact allow the individual to so render. Correspondingly an individual inside or outside the organization that receives such a word processing document or other document and the content therein cannot render such content if such individual cannot obtain a license corresponding to the content or if the rules and requirements of the obtained license do not in fact allow the individual to so render.

In one embodiment of the present invention then an individual in an organization constructing such a word processing document or other document can apply RM to protect the content of the document such that the protection travels with the document. Thus even if the document is forwarded from one recipient to another either inside or outside the organization the content of the document can only be rendered by a recipient that can obtain a license for the document content where the license allows such recipient to in fact render the content of the document. It may be the case that only recipients within the organization can get such a license although it is to be appreciated that other recipients may be granted such a license without departing from the spirit and scope of the present invention. For example the protection traveling with the document may allow a non organization recipient to obtain a license as a guest or the like and the license may be for the guest recipient to read the content only.

As may be appreciated the license for the document content is typically obtained from an RM server operated by or on behalf of the organization. Such license may be sent with the document under at least some circumstances may be obtained upon opening the document may be obtained upon downloading the document may be obtained at the direction of the recipient and or the like all without departing from the spirit and scope of the present invention. Moreover such obtaining may be performed manually or automatically if circumstances allow again without departing from the spirit and scope of the present invention.

Significantly inasmuch as the document with the protected content may be received by an RM compliant individual with a trusted component and the like such document should be in a form amenable to such RM compliant individual. At the same time inasmuch as the document with the protected content may be received by a non RM compliant individual without a trusted component and the like such document should also be in a form amenable to such non RM compliant individual at least to the extent that the document is recognizable as such by the computing device of the non RM compliant individual informs the non compliant individual of the protected content therein and does not inappropriately affect the computing device of the non RM compliant individual. Put another way the document with the protected content should be in a more or less standard document form so as to be recognized as a document but should also include within the standard form the protected content of the email along with all necessary RM related information.

Thus in one embodiment of the present invention the structure of an RM protected document such as a word processing document is consistent with the structure of a non RM protected document with a custom data section therein. Further in such embodiment the custom data section includes protected content of the document along with other RM related information. For the sake of simplicity a somewhat generalized non RM protected document structure is set forth 

As may be appreciated the DOCUMENT PROPERTIES portion contains basic information relating to the document perhaps including an author a creation date and other parameters by which the document can be indexed. The CUSTOM PROPERTIES portion contains properties information that is not especially of interest to a user or the like and is not especially useful for indexing purposes but may be of use to another application. For example such custom properties information may comprise content tagged according to an XML format for use by the another application. The STORAGE portion contains the body of the document which may include text pictures links and or the like.

In a manner similar to email inasmuch as the document may be rendered by different document applications the document can include alternative versions of the body of the document. Here however the different versions are set forth within the CUSTOM DATA portion. More generally the CUSTOM DATA portion can contain most any kind of information that is or can be made available to another application that may wish to access the document. Thus the CUSTOM DATA portion may contain sections with alternative versions of the body of the document for such another application may contain sections with other information documentation content etc. for use by another application may contain sections with extra data for use by an extension of an application and or the like.

In one embodiment of the present invention then and referring now to the aforementioned document structure is employed to send and RM compliant document such as a word processing document as follows. In particular and as seen in in the embodiment the document contains the RM protected content as being embedded within a section of the custom data of the document and the trusted component and the document application on the computing device of an RM compliant individual are aware that such protected content is in the section of the custom data .

Of course such protected content in the custom data is of no use to a non RM compliant individual and a document application thereof at a computing device thereof and accordingly the storage of the document may contain a message to the effect that the document is RM protected and therefore not viewable by the non RM compliant individual. Alternatively the storage of the document may have another message an advertisement a link for more information on the RM compliant document etc. Note that the document application could be employed to alter the message in the storage unless such storage is password protected to in effect lock the message.

Note too that in the case where the trusted component and the document application on the computing device of an RM compliant individual are aware that such protected content is in the custom data and can access such protected content it may be the case that the message in the storage of the document is bypassed entirely and is not displayed to the RM compliant individual. Instead the protected content in the custom data is displayed upon the approval of the trusted component and decryption of such protected content . The trusted component and the document application on the computing device of an RM compliant individual may become aware that the protected content is in the custom data in any appropriate manner without departing from the spirit and scope of the present invention. For example in examining the section of the custom data of the document with the protected content certain identifying indicia may be found.

The protected content in the custom data may be in any particular format without departing from the spirit and scope of the present invention. For example the protected content may comprise encrypted data in a format specific to the document application or may comprise encrypted data in a format not specific to the document application . In the latter case such format may for example comprise HTML RTF or an XML based format. Note that with regard to HTML XML and the like a rights managed viewer application may be provided to allow an individual to view such protected content while at the same time making it more difficult to edit such protected content if indeed editing is even allowed.

In one embodiment of the present invention and as also seen in in addition to a section of the custom data of the document with the protected content therein the custom data has another section with rights data relating to the protected content . Similar to before the rights data may be defined by the author of the document or may be defined by a template selected by the author of the document and sets forth each individual or group of individuals that has rights with respect to the protected content and for each such individual or group of individuals a description of such rights. Thus and as an example the rights may specify that one particular individual can read and print the document and copy the contents of same for an unlimited duration but that a particular group of individuals may only read the document for the next seven days. Presumably then the document may be distributed and re distributed to any number of individuals.

As with email the protected content in the custom data of the document is encrypted according to a cryptographic key and the rights data may include a decryption key KD for decrypting the encrypted content . Of course such decryption key KD should itself be encrypted to prevent unauthorized use thereof. Accordingly in one embodiment of the present invention the decryption key KD in the rights data is encrypted according to a public key of the aforementioned RM server PU RM operated by or on behalf of the organization to result in PU RM KD . Alternatively the rights data is encrypted according to a public key of the author PU AU to result in PU AU KD and only the aforementioned RM server can gain access to a corresponding private key of the author PR AU . Thus only the RM server having the private key PR RM corresponding to PU RM or access to PR AU can apply same to PU RM KD or PU AU KD from the rights data to obtain KD . Alternatively only the author having the private key PR AU corresponding to PU AU can apply same to PU AU KD from the rights data to obtain KD .

As may be appreciated the RM server in fact obtains KD from the rights data in the course of creating the aforementioned license for the protected content and places such KD into the license perhaps encrypted according to a key decryptable by the user s computing device . Alternatively the sender in fact obtains KD from the rights data in the course of creating the aforementioned license for the protected content and places such KD into the license perhaps encrypted according to a key decryptable by the user s computing device . As should be understood the sender should be able to create a license for itself without the aid of the RM server so that such sender can render its own protected content .

In one embodiment of the present invention the protected encrypted content of the document is compressed to reduce the overall size thereof. As may be appreciated the trusted component may decompress the encrypted and compressed content in the course of decrypting same. As may also be appreciated such compression provides a significant reduction in the overall size of the document having the protected content in the custom data thereof. Notably such compression is not presently found by default in existing document formats.

With the document created by an author thereof as set forth herein and forwarded to another individual then and turning now to the receiving individual upon receiving same step processes such document in the following manner.

In the case where the recipient and the computing device thereof are not enabled such recipient and the computing device thereof open the document step . In doing so and inasmuch as the non RM enabled recipient cannot access the protected content therein let alone recognize that the document has such protected content therein the storage of the document is displayed to the recipient where such storage is the message that the document is RM protected and that the recipient does not have rights to view the protected content of such document step . Here the sections of the custom data of the document with the rights data and the protected content are not normally identified to the non RM enabled recipient although it is presumed that a determined recipient could find same. Nevertheless such determined recipient would not be able to decrypt the protected content therein. Thus the document as received by the non RM enabled recipient is handled in the same manner as any other document that would be received by such non RM enabled recipient except for the fact that the message in the storage of the document is that the recipient cannot view the protected content of such document as is set forth in the custom data therein.

In the case where the recipient and the computing device thereof are in fact enabled such recipient and the computing device thereof also open the document step . Here though the RM enabled recipient in fact recognizes that the document has protected content therein step discounts the storage of the document step and instead examines the sections of the custom data with the rights data and the protected content and proceeds based thereon to render the protected content for the RM compliant recipient step .

As before any appropriate methods and mechanisms may be employed to render the protected content for the RM compliant recipient without departing from the spirit and scope of the present invention. For example a method similar to that shown in may be employed.

In one embodiment of the present invention each license obtained for corresponding protected content in the custom data of the document is placed into the custom document in another section of the custom data . Thus each license travels with a corresponding piece of protected content in a document and the protected content in a document may travel with multiple licenses .

In one embodiment of the present invention the custom data has another section with transforms that specify to a document application or the like how to get at the protected content . In particular such transforms may have a RM part specifying each section of custom data that is encrypted and each section of custom data with a license by which a decryption key KD may be obtained. In addition such transforms may have a compression part specifying each section of custom data that is compressed and how the section is compressed. Of course the transforms may have other parts with other accessing information without departing from the spirit and scope of the present invention.

As should now be appreciated in the present invention rights management is applied to a document by way of a trusted component on a computing device of a RM compliant recipient and the document is in a form that is still recognizable to a non RM compliant recipient as a document even though such non RM compliant recipient cannot access the protected content in such document . Moreover inasmuch as the protected content is rights managed such content can be compressed within the document and decompressed by the trusted component .

RM protection has heretofore been discussed in terms of a particular individual within an organization or the like creating some sort of content and then protecting same prior to distributing the content to another individual within the organization. However it may also be the case that a particular individual within an organization or the like creates a document with some sort of content therein and then merely places the document in an unprotected form in a document store managed by or on behalf of the organization. In such a situation then and in one embodiment of the present invention the document store in response to a request for the document from an individual has the responsibility to respond to such request by determining that the requesting individual has the right to access such document by RM protecting the document and then by delivering the RM protected document to the requesting individual.

In connection with the document store of the present invention then and turning now to it may be presumed that such document store stores a plurality of documents in some sort of logical arrangement such as one or more folders and sub folders hereinafter folders or the like. Significantly and in one embodiment of the present invention for each folder the document store handles all documents within the folder in a like manner with respect to RM protection. Accordingly an individual defines the RM protection to be applied to a document by placing the document in a particular folder based on the particular folder having a predefined set of rights associated therewith. Again each document within a particular folder is not RM protected but RM protection is applied to a copy of the document by the document store when the copy of the document is delivered to a requesting individual.

Typically each folder has access controls associated therewith such as read only read write all rights and the like where the access controls are defined for each individual and or for each group of individuals that may access the contents of the folder . In one embodiment of the present invention such access controls as defined for a requesting individual are employed to define the RM protection that is to be applied to each copy of a document delivered to such requesting individual. Thus it may be the case that read only access would translate to view only RM protection rights read write access would translate to view edit save and copy RM protection rights and all rights would translate to view edit save copy print save locally and change or delete RM protection rights.

In another embodiment of the present invention in addition to or as an alternative to setting RM protection for the documents of a folder by way of the access controls for the folder RM protection may also be set by defining a specific rights template to be associated with the folder . Such rights template may have any particular rights defined therein without departing from the spirit and scope of the present invention and may for example be common to every document within the folder or may treat different types of documents within the folder differently. In the latter case for example the rights template for a particular folder may specify one set of rights for word processing documents and another set for spreadsheet documents may specify one set of rights for documents below a certain size and another set for documents above a certain size and or the like.

Note that in contrast with propagated RM protection in an email as set forth above in dynamically applying RM protection to a document in a folder in a document store each document is assigned a unique bind ID. Accordingly a license issued for a particular document with a particular bind ID cannot be employed in connection with any other document inasmuch all other documents have a different bind ID.

Note too that RM protection as set for a folder either by way of access controls or by way of a rights template may be changed from time to time by an administrator of the document store or the like. Accordingly it may be the case that an individual may request a document from a folder of the document store and receive such document with a first set of rights data and then some time later under identical circumstances may request the same document from the same folder of the document store and receive such document with a second set of rights data different from the first set.

Turning now to a method of using the document store is shown. In such method and as seen the process begins by an individual storing a document in a folder of the document store step . Presumptively the individual storing the document in the folder has access rights to do so as defined by the access controls for the folder or elsewhere. As was set forth above such document as stored in the document store need not be encrypted inasmuch as RM protection will be applied to a copy of the document by the document store when the copy is delivered to a requesting individual. Also the document store is presumptively secure against attacks by nefarious entities wishing to gain direct access to documents in such document store . Of course encryption may nevertheless be applied to the document when storing same without departing from the spirit and scope of the present invention. Note again that by storing a document in a particular folder of the document store the storing individual determines the RM protection that is to be applied to the document when retrieved from such particular folder of such document store .

At some time after the document is stored in the folder of the document store the document store receives a request for a copy of the requested document from an individual step . Note here that the requesting individual may be any individual who has access rights to make a request as defined by the access controls for the folder or elsewhere. Upon receiving the request the document store checks the access controls for the folder to determine whether the requesting individual has rights that allow the document store to deliver thereto a copy of the requested document . If not the request is denied and the process halts.

Otherwise the process continues by the document store mapping the access controls for the folder into RM rights that are to be defined in rights data for the copy of the requested document step . Such mapping may be performed in any appropriate manner without departing from the spirit and scope of the present invention. Performing such mapping is known or should be apparent to the relevant public and therefore need not be defined herein in any detail. Significantly in mapping the access controls RM rights are defined in rights data not only for the requesting individual but for all other individuals or groups of individuals specified in such access controls . Accordingly and as will be appreciated the copy of the requested document with the rights data attached thereto can be distributed and redistributed to such other individuals and each such other individual can employ the rights data to obtain a license to render the document .

In addition to or in the alternative to mapping the access controls for the folder into rights data for the copy of the requested document the document store also determines whether the folder also has any rights template associated therewith and if so the document store copies at least a portion of the rights template for the folder into the RM rights that are to be defined in rights data for the copy of the requested document step . Note that the document store may copy the entire rights template if deemed advisable or may copy only a portion of the rights template that is relevant to the copy of the requested document . For example if the document is a word processing document and the rights template specifies sets of rights for a number of kinds of documents including word processing documents only the word processing set of rights need be copied absent other considerations.

Once the rights data for the copy of the requested document have been defined the document store may then publish the copy of the requested document in a manner similar to that shown in . In particular the document store by way of a trusted component associated therewith generates a content key KD and encrypts the copy of the requested document with same to form KD copy step . KD copy is then protected to an RM server so that all license requests are directed to such RM server . In particular a public key of the RM server PU RM is employed to encrypt KD to result in PU RM KD step and the defined rights data with such PU RM KD is submitted to the RM server for signing or can be self signed if permission to do so is given by the RM server step .

Once the signed rights data is obtained such signed rights data is concatenated with the corresponding KD copy to form a package containing the RM protected copy of the requested document step and such package is then delivered to the requesting individual step . Thus a rendering application of the requesting individual that is RM enabled can discover the signed rights data upon attempting to render the package and such discovery triggers the rendering application to initiate a request for a corresponding license against the RM server based on the signed rights data as in . Alternatively the document store may obtain the license from the RM server on behalf of the requesting individual and deliver the obtained license to the requesting individual with the package step .

RM protection of an email has heretofore been discussed in terms of a single email and has not as yet taken into account that an email may be a originating email that is replied by the recipient to the sender and or may be forwarded by the recipient to another recipient. In either of such situations and as should be appreciated and as seen in it is oftentimes useful and or desirable to include a copy of the body of the originating email with the reply or forward email so that an email thread or conversation is developed. Thus the conversation may appear in an omega email and comprise therein a body and a plurality of previously sent and received emails that are available to a recipient of the omega email for easy reference. As may be appreciated the conversation within an email can extend back an indefinite number of links of originating emails to an alpha email that started the conversation .

However it is also to be appreciated as a dilemma that if an originating email within a conversation is RM protected such protected email should not be rendered in the conversation at least for a recipient of the conversation that does not have the right to render such protected email . One solution to the aforementioned dilemma is simply to not allow a conversation in an RM environment or at least to not include RM protected originating emails in conversations . Of course such a solution is overly broad and is not feasible for reasons that should be apparent not the least of which is that users typically want conversations to appear in their emails .

Accordingly in one embodiment of the present invention and as seen in each originating email in the conversation of an omega email appears in the body of the omega email as a body object that is rights managed according to the RM properties of such originating email . Note that such a body object may be any type of body object without departing from the spirit and scope of the present invention. Such a body object is known or should be apparent to the relevant public and therefore need not be described herein in any detail.

For example the body object for a particular originating email within an omega email may in essence be the corresponding originating email with the RM properties thereof except that the body of such originating email is set forth within the omega email and has its own rights data . Of course if such originating email itself contains a conversation of originating emails such conversation is stripped out and the originating emails thereof appear separately in the omega email at issue as other body objects thereof.

Thus a recipient of the omega email which is in turn rights managed can render each originating email in the conversation of the omega email but only if such recipient has rights to render the omega email and also rights to render the originating email at issue. As a result it may be the case that one recipient has rights to render some of the originating emails body objects but not others while another recipient has rights to render all of the originating emails body objects .

As should now be appreciated in the one embodiment of the present invention the body objects of originating emails appear serially in the omega email usually in reverse chronological order. In an alternative embodiment however the conversation of an omega email appears as a single body object therein and the body object of each originating email in the conversation is nested within a body object of a chronologically next originating email . In such case then a recipient of the omega email which is in turn rights managed can render each originating email in the conversation of the omega email but only if such recipient has rights to render the omega email and all intervening originating emails . As a result the lack of rights to render one originating email in the conversation prevents the recipient from rendering all earlier further nested originating emails in the conversation .

Note that the use of serial body objects has an advantage over nested body objects in that a serially appearing body object can in effect be split into two sub objects . Such splitting is especially useful in the case where a comment or note is to be inserted into a body object in an in line manner. Note too that the comment may itself be a body object that is RM protected.

Significantly although the use of a body object has heretofore been described in terms of an email such body object may also be employed in connection with any type of document including document of document of and the like as is shown in . Thus by using body objects within the body of a document the document may have RM protection and parts of the document may have further RM protection. Alternatively it may be the case that the document itself has no RM protection but that various sensitive parts of the document have RM protection.

Note that at least some of the body objects within an email a document or otherwise may share a common bind ID. Accordingly and as should be appreciated a license for one of the bind ID sharing body objects may also be employed for all other of the bind ID sharing body objects .

As should now be appreciated in a typical RM protection scheme as thus far disclosed herein protected content is encrypted according to a cryptographic key and the rights data for the protected content includes a decryption key KD for decrypting the encrypted content where KD is encrypted according to a public key of an RM server PU RM operated by or on behalf of the organization to result in PU RM KD . Thus only the RM server having the private key PR RM corresponding to PU RM can apply same to PU RM KD from the rights data to obtain KD and then deliver KD in the form of a license that is bound to the protected content .

A dilemma arises however in the situation where the RM server with PR RM is decommissioned so that such RM server no longer participates in creating and enforcing RM protection for protected content . As may be appreciated reasons for decommissioning an RM server are many and varied and can include a determination that the RM server being decommissioned is obsolete or otherwise no longer worthy of participating in the RM protection scheme a desire in general to no longer perform RM protection and enforcement and the like.

At any rate by decommissioning the RM server all protected content protected according to PU RM for the decommissioned RM server can no longer be licensed by such RM server . Without such license and KD for the protected content therein and as should be appreciated the protected content can not ever be decrypted by KD even for an individual who would have rights to render the protected content as determined by the rights data therefor.

Accordingly in one embodiment of the present invention when an RM server is decommissioned functionality is set into place to allow all content protected according to the decommissioned RM server to be permanently stripped of RM protection and to be saved in a decrypted or naked state. In particular and turning now to a method of stripping the RM protection from a piece of protected content based on the corresponding RM server being decommissioned is shown.

Preliminarily and as may be appreciated the RM server is in fact decommissioned by being set into a decommission mode step . Principally in such decommission mode the RM server no longer issues a license in response to a request therefor in connection with a piece of protected content . Instead the RM server issues a content key KD in response to a decommission request in connection with a piece of protected content . Moreover inasmuch as KD is to be employed to permanently strip the protected content of RM protection such KD need not even be sent to the requester in a protected form.

At or about the time the RM server is set into the decommission mode as at step each user is notified that the RM server has been decommissioned step and the user stores such notification in any appropriate location of the computing device thereof step such as for example a registry or other data store. Accordingly each time the individual attempts to render a piece of content step the piece of content is first examined to determine the RM server that can issue a license for such content step and the storage location of the computing device is then checked for any decommission notification for the determined RM server step . If no such decommission notification is found the rendering process continues in a manner such as that shown in where a license that allows such rendering is obtained from an RM server or is found on the computing device .

However if the decommission notification for the determined RM server is found the trusted component on the computing device makes the aforementioned decommission request to the RM server for the content step . As may be appreciated the decommission request is similar to a license request in that the RM server is sent the rights data corresponding to the protected content . Here though the RM server merely retrieves KD from the rights data step by applying PR RM to PU RM KD from the rights data and returns the retrieved KD to the requester step . Again such KD need not be protected although such protection may be applied without departing from the spirit and scope of the present invention. Upon receiving KD the requester applies same to the protected content to reveal the content in a naked form without any RM protection step and then may save the content in the naked and non protected form step .

Note that a nefarious user may cause a decommission request to be sent to a non decommissioned RM server in an attempt to obtain a KD . However the non decommissioned RM server should ignore such a decommission request because the non decommissioned RM server has not been set into decommission mode.

In an alternate embodiment of the present invention the user need not be notified that the RM server has been decommissioned as at step . Instead in response to a license request made to a decommissioned RM server the RM server merely retrieves and returns KD as at steps and . Of course without such a notification the user will continue to employ already obtained licenses from the decommissioned RM server .

The programming necessary to effectuate the processes performed in connection with the present invention is relatively straight forward and should be apparent to the relevant programming public. Accordingly such programming is not attached hereto. Any particular programming then may be employed to effectuate the present invention without departing from the spirit and scope thereof.

In the present invention a rights management RM and enforcement architecture and method allow the controlled rendering of arbitrary forms of digital content where such control is flexible and definable by the content owner developer of such digital content. The architecture allows and facilitates such controlled rendering especially in an office or organization environment or the like where documents are to be shared amongst a defined group of individuals or classes of individuals. Such architecture allows rights managed email propagating RM protection to attachments of RM protected email acquiring decryption keys for RM protected email rights managed documents dynamic application of RM protection to a document in a document store RM protected email conversations decommissioning an RM server and the like.

It should be appreciated that changes could be made to the embodiments described above without departing from the inventive concepts thereof. It should be understood therefore that this invention is not limited to the particular embodiments disclosed but it is intended to cover modifications within the spirit and scope of the present invention as defined by the appended claims.

