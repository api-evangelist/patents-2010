---

title: Regulating the scope of service geographically in wireless networks based on priority
abstract: A network communication entity (e.g., an access terminal, access network and/or application server) obtains a location associated with a given access terminal that is attempting to participate in a given communication service, obtains a priority level of the given access terminal, determines a given level of service restriction for the given access terminal's participation in the given communication service based on the obtained location and the obtained priority level and restricts the given access terminal's participation in the given communication service based on the given level of service restriction. In an example, the priority levels can be established such that low-priority access terminals obtain a first level of service restriction within a defined location region, and a second level of service restriction outside of the defined location region, whereas high-priority access terminals obtain the first level of service restriction both inside and outside of the defined location region.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08675553&OS=08675553&RS=08675553
owner: QUALCOMM Incorporated
number: 08675553
owner_city: San Diego
owner_country: US
publication_date: 20100319
---
The present Application for Patent claims priority to Provisional Application No. 61 163 840 entitled REGULATING THE SCOPE OF SERVICE GEOGRAPHICALLY IN WIRELESS NETWORKS BASED ON PRIORITY filed Mar. 26 2009 which is assigned to the assignee hereof and hereby expressly incorporated by reference herein in its entirety.

Embodiments of the present invention are directed to regulating the scope of service geographically in wireless networks.

Wireless communication systems have developed through various generations including a first generation analog wireless phone service 1G a second generation 2G digital wireless phone service including interim 2.5G and 2.75G networks and a third generation 3G high speed data Internet capable wireless service. There are presently many different types of wireless communication systems in use including Cellular and Personal Communications Service PCS systems. Examples of known cellular systems include the cellular Analog Advanced Mobile Phone System AMPS and digital cellular systems based on Code Division Multiple Access CDMA Frequency Division Multiple Access FDMA Time Division Multiple Access TDMA the Global System for Mobile access GSM variation of TDMA and newer hybrid digital communication systems using both TDMA and CDMA technologies.

The method for providing CDMA mobile communications was standardized in the United States by the Telecommunications Industry Association Electronic Industries Association in TIA EIA IS 95 A entitled Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System referred to herein as IS 95. Combined AMPS CDMA systems are described in TIA EIA Standard IS 98. Other communications systems are described in the IMT 2000 UM or International Mobile Telecommunications System 2000 Universal Mobile Telecommunications System standards covering what are referred to as wideband CDMA WCDMA CDMA2000 such as CDMA2000 1xEV DO standards for example or TD SCDMA.

In wireless communication systems mobile stations handsets or access terminals AT receive signals from fixed position base stations also referred to as cell sites or cells that support communication links or service within particular geographic regions adjacent to or surrounding the base stations. Base stations provide entry points to an access network AN radio access network RAN which is generally a packet data network using standard Internet Engineering Task Force IETF based protocols that support methods for differentiating traffic based on Quality of Service QoS requirements. Therefore the base stations generally interact with ATs through an over the air interface and with the AN through Internet Protocol IP network data packets.

In wireless telecommunication systems Push to talk PTT capabilities are becoming popular with service sectors and consumers. PTT can support a dispatch voice service that operates over standard commercial wireless infrastructures such as CDMA FDMA TDMA GSM etc. In a dispatch model communication between endpoints ATs occurs within virtual groups wherein the voice of one talker is transmitted to one or more listeners. A single instance of this type of communication is commonly referred to as a dispatch call or simply a PTT call. A PTT call is an instantiation of a group which defines the characteristics of a call. A group in essence is defined by a member list and associated information such as group name or group identification.

Conventionally data packets within a wireless communications network have been configured to be sent to a single destination or access terminal. A transmission of data to a single destination is referred to as unicast . As mobile communications have increased the ability to transmit given data concurrently to multiple access terminals has become more important. Accordingly protocols have been adopted to support concurrent data transmissions of the same packet or message to multiple destinations or target access terminals. A broadcast refers to a transmission of data packets to all destinations or access terminals e.g. within a given cell served by a given service provider etc. while a multicast refers to a transmission of data packets to a given group of destinations or access terminals. In an example the given group of destinations or multicast group may include more than one and less than all of possible destinations or access terminals e.g. within a given group served by a given service provider etc. . However it is at least possible in certain situations that the multicast group comprises only one access terminal similar to a unicast or alternatively that the multicast group comprises all access terminals e.g. within a cell or sector similar to a broadcast.

Broadcasts and or multicasts may be performed within wireless communication systems in a number of ways such as performing a plurality of sequential unicast operations to accommodate the multicast group allocating a unique broadcast multicast channel BCH for handling multiple data transmissions at the same time and the like. A conventional system using a broadcast channel for push to talk communications is described in United States Patent Application Publication No. 2007 0049314 dated Mar. 1 2007 and entitled Push To Talk Group Call System Using CDMA 1x EVDO Cellular Network the contents of which are incorporated herein by reference in its entirety. As described in Publication No. 2007 0049314 a broadcast channel can be used for push to talk calls using conventional signaling techniques. Although the use of a broadcast channel may improve bandwidth requirements over conventional unicast techniques the conventional signaling of the broadcast channel can still result in additional overhead and or delay and may degrade system performance.

The 3Generation Partnership Project 2 3GPP2 defines a broadcast multicast service BCMCS specification for supporting multicast communications in CDMA2000 networks. Accordingly a version of 3GPP2 s BCMCS specification entitled CDMA2000 High Rate Broadcast Multicast Packet Data Air Interface Specification dated Feb. 14 2006 Version 1.0 C.S0054 A is hereby incorporated by reference in its entirety.

A network communication entity e.g. an access terminal access network and or application server obtains a location associated with a given access terminal that is attempting to participate in a given communication service obtains a priority level of the given access terminal determines a given level of service restriction for the given access terminal s participation in the given communication service based on the obtained location and the obtained priority level and restricts the given access terminal s participation in the given communication service based on the given level of service restriction. In an example the priority levels can be established such that low priority access terminals obtain a first level of service restriction within a defined location region and a second level of service restriction outside of the defined location region whereas high priority access terminals obtain the first level of service restriction both inside and outside of the defined location region.

Aspects of the invention are disclosed in the following description and related drawings directed to specific embodiments of the invention. Alternate embodiments may be devised without departing from the scope of the invention. Additionally well known elements of the invention will not be described in detail or will be omitted so as not to obscure the relevant details of the invention.

The words exemplary and or example are used herein to mean serving as an example instance or illustration. Any embodiment described herein as exemplary and or example is not necessarily to be construed as preferred or advantageous over other embodiments. Likewise the term embodiments of the invention does not require that all embodiments of the invention include the discussed feature advantage or mode of operation.

Further many embodiments are described in terms of sequences of actions to be performed by for example elements of a computing device. It will be recognized that various actions described herein can be performed by specific circuits e.g. application specific integrated circuits ASICs by program instructions being executed by one or more processors or by a combination of both. Additionally these sequence of actions described herein can be considered to be embodied entirely within any form of computer readable storage medium having stored therein a corresponding set of computer instructions that upon execution would cause an associated processor to perform the functionality described herein. Thus the various aspects of the invention may be embodied in a number of different forms all of which have been contemplated to be within the scope of the claimed subject matter. In addition for each of the embodiments described herein the corresponding form of any such embodiments may be described herein as for example logic configured to perform the described action.

A High Data Rate HDR subscriber station referred to herein as an access terminal AT may be mobile or stationary and may communicate with one or more HDR base stations referred to herein as modem pool transceivers MPTs or base stations BS . An access terminal transmits and receives data packets through one or more modem pool transceivers to an HDR base station controller referred to as a modem pool controller MPC base station controller BSC and or packet control function PCF . Modem pool transceivers and modem pool controllers are parts of a network called an access network. An access network transports data packets between multiple access terminals.

The access network may be further connected to additional networks outside the access network such as a corporate intranet or the Internet and may transport data packets between each access terminal and such outside networks. An access terminal that has established an active traffic channel connection with one or more modem pool transceivers is called an active access terminal and is said to be in a traffic state. An access terminal that is in the process of establishing an active traffic channel connection with one or more modem pool transceivers is said to be in a connection setup state. An access terminal may be any data device that communicates through a wireless channel or through a wired channel for example using fiber optic or coaxial cables. An access terminal may further be any of a number of types of devices including but not limited to PC card compact flash external or internal modem or wireless or wireline phone. The communication link through which the access terminal sends signals to the modem pool transceiver is called a reverse link or traffic channel. The communication link through which a modem pool transceiver sends signals to an access terminal is called a forward link or traffic channel. As used herein the term traffic channel can refer to either a forward or reverse traffic channel.

Referring back to the components of the wireless network and interrelation of the elements of the exemplary embodiments of the invention are not limited to the configuration illustrated. System is merely exemplary and can include any system that allows remote access terminals such as wireless client computing devices to communicate over the air between and among each other and or between and among components connected via the air interface and RAN including without limitation carrier network the Internet and or other remote servers.

The RAN controls messages typically sent as data packets sent to a base station controller packet control function BSC PCF . The BSC PCF is responsible for signaling establishing and tearing down bearer channels i.e. data channels between a packet data service node PDSN and the access terminals . If link layer encryption is enabled the BSC PCF also encrypts the content before forwarding it over the air interface . The function of the BSC PCF is well known in the art and will not be discussed further for the sake of brevity. The carrier network may communicate with the BSC PCF by a network the Internet and or a public switched telephone network PSTN . Alternatively the BSC PCF may connect directly to the Internet or external network. Typically the network or Internet connection between the carrier network and the BSC PCF transfers data and the PSTN transfers voice information. The BSC PCF can be connected to multiple base stations BS or modem pool transceivers MPT . In a similar manner to the carrier network the BSC PCF is typically connected to the MPT BS by a network the Internet and or PSTN for data transfer and or voice information. The MPT BS can broadcast data messages wirelessly to the access terminals such as cellular telephone . The MPT BS BSC PCF and other components may form the RAN as is known in the art. However alternate configurations may also be used and the invention is not limited to the configuration illustrated. For example in another embodiment the functionality of the BSC PCF and one or more of the MPT BS may be collapsed into a single hybrid module having the functionality of both the BSC PCF and the MPT BS .

Referring to the broadcast serving node BSN may be configured to support multicast and broadcast services. The BSN will be described in greater detail below. The BSN communicates with the RAN e.g. the BSC PCF via a broadcast BC A10 connection and with the application server via the Internet . The BCA10 connection is used to transfer multicast and or broadcast messaging. Accordingly the application server sends unicast messaging to the PDSN via the Internet and sends multicast messaging to the BSN via the Internet .

Generally as will be described in greater detail below the RAN transmits multicast messages received from the BSN via the BCA10 connection over a broadcast channel BCH of the air interface to one or more access terminals .

Referring to an access terminal here a wireless device such as a cellular telephone has a platform that can receive and execute software applications data and or commands transmitted from the RAN that may ultimately come from the carrier network the Internet and or other remote servers and networks. The platform can include a transceiver operably coupled to an application specific integrated circuit ASIC or other processor microprocessor logic circuit or other data processing device. The ASIC or other processor executes the application programming interface API layer that interfaces with any resident programs in the memory of the wireless device. The memory can be comprised of read only or random access memory RAM and ROM EEPROM flash cards or any memory common to computer platforms. The platform also can include a local database that can hold applications not actively used in memory . The local database is typically a flash memory cell but can be any secondary storage device as known in the art such as magnetic media EEPROM optical media tape soft or hard disk or the like. The internal platform components can also be operably coupled to external devices such as antenna display push to talk button and keypad among other components as is known in the art.

Accordingly an embodiment of the invention can include an access terminal including the ability to perform the functions described herein. As will be appreciated by those skilled in the art the various logic elements can be embodied in discrete elements software modules executed on a processor or any combination of software and hardware to achieve the functionality disclosed herein. For example ASIC memory API and local database may all be used cooperatively to load store and execute the various functions disclosed herein and thus the logic to perform these functions may be distributed over various elements. Alternatively the functionality could be incorporated into one discrete component. Therefore the features of the access terminal in are to be considered merely illustrative and the invention is not limited to the illustrated features or arrangement.

The wireless communication between the access terminal and the RAN can be based on different technologies such as code division multiple access CDMA WCDMA time division multiple access TDMA frequency division multiple access FDMA Orthogonal Frequency Division Multiplexing OFDM the Global System for Mobile Communications GSM or other protocols that may be used in a wireless communications network or a data communications network. The data communication is typically between the client device MPT BS and BSC PCF . The BSC PCF can be connected to multiple data networks such as the carrier network PSTN the Internet a virtual private network and the like thus allowing the access terminal access to a broader communication network. As discussed in the foregoing and known in the art voice transmission and or data can be transmitted to the access terminals from the RAN using a variety of networks and configurations. Accordingly the illustrations provided herein are not intended to limit the embodiments of the invention and are merely to aid in the description of aspects of embodiments of the invention.

Referring to assume that AT receives the announce message and determines to accept the multicast call. Accordingly in AT responds to the announce message by sending an announce acknowledgment ACK message indicating acceptance of the multicast call on the reverse link access channel to the RAN which forwards the announce ACK acceptance message to the application server . While not shown in AT may also send a registration message e.g. a BCMCSFlowRegistration message to the RAN to register for the multicast session. Assuming that AT is a first responder to the announce message the application server sends a message instructing AT that the multicast session can begin. AT receives the message plays a tone to a user of AT indicating that he she can begin speaking and AT begins forwarding voice data to the application server for transmission to the multicast group . The application server forwards the voice data or multicast packets for transmission by the RAN to the multicast group members that have registered for the given multicast session and at least the registered multicast group members including AT monitor the given multicast session .

As will be appreciated by one of ordinary skill in the art while the application server may attempt to validate ATs that attempt to participate in a multicast session for example by checking whether the requesting ATs belong to a multicast group associated with the multicast session other information such as a physical location of the ATs is not known at the application server . Rather this type of information is known at the RAN or at the ATs themselves but is not accessible at the application server . Accordingly it is the RAN s function to figure out where ATs are located when the application server forwards messages intended for selected ATs or groups of ATs.

Accordingly because the application server is not typically aware of the location or position of multicast group members participating in an active multicast session it is difficult to enforce location based restrictions in multicast communications. An example will now be provided with respect to . illustrates an example of a multicasting service area that may be covered by the application server . As shown in the multicasting service area may include a plurality of PDSN service areas that are each managed by a different PDSN each PDSN service area in turn includes a plurality of subnets that are each managed by a different RNC and each subnet includes a plurality of sectors .

In an example assume that a network operator that controls the application server deems certain sectors subnets and or PDSN service areas within the multicasting service area not suitable for multicast service e.g. because the load in these service areas is high etc. . Conventionally the network operator is not able to restrict calls to particular service areas because as discussed above information related to multicast group member locations is known at the RAN but not at the application server .

In another example assume 100 hikers are part of a hiking multicast group but only 50 of those hikers are on a particular hiking expedition in a region serviced by a single subnet . If one of the hikers on the expedition wishes to talk only to other hikers on the expedition the multicast session would still be announced to all 100 hikers and would not be restricted to the 50 hikers on the expedition without manual instructions to the application server from the call initiator e.g. such as instructions to manually form a new multicast group only including the hikers known to be on the expedition which can be tedious to obtain an accurate headcount and enter to the system .

Accordingly embodiments of the invention are directed to determining whether a degree in which to restrict e.g. permit block a rate to charge etc. a communication session e.g. a group call serviced with multicast protocols a group call serviced with unicast protocols a non group call between two ATs serviced with unicast protocols a non call transport session etc. based on an access terminal s location within a wireless communications system. While embodiments of the invention described below are described generally to group calls serviced in accordance with multicast protocols it will be appreciated that other embodiments can be directed to restricting service to other types of communication sessions e.g. unicast calls transport sessions etc. . Also while embodiments are generally described with respect to a first area wherein calls are restricted and a second area wherein calls are not restricted it will be appreciated that the areas can alternatively be associated with different degrees of restriction instead of simply a permit or block type implementation. For example certain subnets may support group calls via multicast protocols wherein other subnets may support group calls via unicast or multicast protocols. In this case the subnets or other location regions that support group calls with fewer protocols or subnets that charge more for multicast service can be considered to have a higher degree of restriction.

The embodiments can be directed to an initiator of the multicast call or to a target of the multicast call and can be directed towards call set up and or already active call sessions within the system as will now be described in more detail with respect to . In particular are directed to location based multicast call restriction enforced at the application server whereas are directed to location based multicast call restriction enforced at individual access terminals.

Accordingly illustrates a multicasting process including location based multicast call restriction enforced at an application server according to an embodiment of the present invention. Referring to in a network operator at the application server defines a location region for multicast service restriction e.g. for one or more individual multicast groups or for all multicast groups associated with a particular type of multicast service such as QChat . In an example the defined location region can be for inclusion e.g. only allow participants that are within the defined location region or exclusion e.g. only allow participants that are not within the defined location region . Below while examples are provided primarily directed to the inclusion embodiment it will be appreciated that these examples can be configured for exclusion simply by inverting the result of the evaluation e.g. if an AT is within the defined location region for inclusion it is permitted to participate in the multicast call whereas the opposite is true for exclusion . The defined location region can also be established with a time parameter and or other triggering criteria such that the defined location region is only used for restriction when other conditions are also satisfied e.g. during normal work hours etc. . Further it will be appreciated that the defined location region establishes a first level of multicast service restriction for one or more ATs within the defined location region e.g. an unrestricted level of restriction and a second level of multicast service restriction for one or more ATs outside of the defined location region e.g. a denial of service level of restriction such that the service is disabled outside of the defined location region . It will be appreciated that other examples can be directed to other intervening levels of service restriction.

In a further example the defined location region can be multicast group specific such that only multicast calls for one or more particular multicast group are restricted based on the defined location region. Alternatively the defined location region can be global or universal such that all multicast groups serviced by the application server are affected by the location constraints or restrictions of the defined location region in . In another example the defined location region can be AT specific such that the defined location region only operates to restrict service to a particular AT or ATs.

The defined location region can be configured in any number of ways. For example in a 1xEV DO Rev. A network a 128 bit SectorID uniquely identifies a sector and is broadcast as part of a SectorParameters message which is transmitted from the RAN at a given interval within each sector of the wireless communication system . Thus in an example the defined location region can correspond to a list of SectorIDs e.g. or alternatively one or more of a BASE ID SID NID and or PZID . In this example the defined location region is at a sector level e.g. see sectors of . In an alternative example the defined location region can include one or more of a sector identifier e.g. the 128 bit SectorID a subnet identifier e.g. see of a PDSN serving region identifier e.g. see of and or an identifier of an entire multicasting service area e.g. see of . In a further example in a 3G 1x network the network operator can define location regions at the granularity of a BASE ID SID NID or PZID. For example in a 1xEV DO Rev. A network the network operator can define location regions at the granularity of a SectorID or a SubnetID which is derived from the SectorID e.g. where each subnet maps to a single RNC . Thus one or more identifiers corresponding to locations of service areas of different magnitudes can collectively define the defined location region in .

In an alternative example instead of configuring the defined location region by service region e.g. at a sector subnet PDSN and or multicast service area level the defined location region can be based on geographic coordinates such as longitude or latitude. Also as discussed below in more detail with respect to of the geographic region can correspond to a two dimensional 2 D e.g. a grid or three dimensional 3 D space e.g. a sphere such as the Earth .

In the example of assume that the application server retains the defined location region after it is generated in . At some point in time after of a given AT AT that belongs to the multicast group for which the location region is defined in determines whether to initiate a multicast call to the multicast group . In the example of assume that AT determines to initiate the multicast call.

Next in AT determines its location within the wireless communications system . The location determination of can be performed in a number of ways. For example in a 1xEV DO Rev. A network if AT determines its location based on which serving sector AT resides in within the system AT can determine the 128 bit SectorID of its serving sector to determine its location. The 128 bit SectorID can be determined based on a receipt of a SectorParameters message broadcast from the RAN in AT s sector and the SectorID can then be cached or stored in AT and fetched during of . Alternatively the 128 bit SectorID can be determined based on a periodic polling of the RAN by AT and the SectorID can then be cached or stored in AT and fetched from the local cache during of . In another alternative example because AT is the originator of the multicast call in the 128 bit SectorID can be requested on demand after AT determines to initiate the multicast call in . As will be appreciated the SectorID is kept more up to date if the SectorID is obtained more frequently e.g. via polling on demand queries and or waiting for a SectorParameters message or in 1x an ID similar to the SectorID conveyed via a SystemParameters message although the increased signaling may raise interference in AT s sector.

Alternatively if AT or system does not comply with 1xEV DO Rev. A AT can determine another type of identifier that identifies its sector or its current serving base station within system . For example in 1x the BASE ID field is 16 bits and defines AT s serving base station. The BASE ID taken in conjunction with the SID NID PZID may correspond to a unique identification of the sector in which AT is located which can be used as AT s determined location in of . This information may be obtained via polling on demand queries and or a signaling message such as a SystemParameters message in 1x as discussed above with respect to the 128 bit SectorID.

In another alternative example with respect to of AT can determine a geographic location as its determined location e.g. AT s position or a position or position range associated with AT s sector . For example the geographic location can be represented by longitude and latitude coordinates which may be obtained a satellite positioning system SPS such as GPS network trilateration a terrestrial signal based positioning process a network assisted positioning process etc. The determined geographic location can be for AT s specific location or can be coordinates for AT s serving base station or any point within AT s sector in an example.

After determining its location in AT configures a multicast call request message to request that the application server initiate a multicast session and also to convey to the application server AT s location. Alternatively AT can configure a separate message that conveys its location information to the application server such that the location information is not necessarily bundled with the multicast call request message. Thus a configured multicast call request message may actually correspond to two or more messages i.e. a call request message and separate message conveying location information . For example in 1xEV DO Rev. A the location information can be conveyed via an acknowledgment message e.g. a STATUS ACK message which may be separate from the call request message. Alternatively the location information can be conveyed via any other out of band message or can be included within the call request message itself in protocols other than 1xEV DO Rev. A in an example.

AT sends the configured multicast call request message to the application server via the RAN . Alternatively AT can send the multicast call request message and a separate message indicating AT s location to the application server in . In any case the application server receives the multicast call request message and obtains an indication of AT s reported location in and determines whether AT s reported location is within the defined location region from in .

In a first example of the determination of of if AT reports a service area identifier in e.g. of one or more sectors a subnet a PDSN service area and or a multicasting service area and the defined location region from is also based on service area identifiers the application server can compare the reported service area identifier with the defined location region to determine whether AT is within the defined location region. For example if AT reports SectorID the application server can check whether SectorID is listed in the set of SectorIDs that comprise the defined location region. Alternatively if the defined location region were to indicate a subnet identifier the application server first populates a list of SectorIDs from the designated subnet and then compares AT s reported SectorID with the populated SectorIDs from that subnet. Likewise a similar set of multicasting service area identifiers PDSN service region identifiers subnet identifiers and or sector identifiers can be populated in a similar fashion such that a comparison can be made between AT s reported location irrespective of its granularity and the defined location region.

In a second example it is possible that AT s reported location is formatted as a geographic set of coordinates whereas the defined location region is based on service area identifiers or alternatively where AT s reported location is one or more service area identifiers while the defined location region is based on a range of geographic coordinates. In either case the application server can either map the service area identifier to a known set of geographic coordinates or the geographic coordinates to a service area identifier such that the reported location can be compared with the defined location region for evaluation by the application server . Methodologies of handling geographic coordinate evaluations are described in more detail below.

Below additional examples are provided directed to determining whether AT s location falls within a 2 D geographic range although it will be readily apparent how the methodologies described below can be expanded or generalized to a 3 D space e.g. a sphere such as the surface of the Earth .

A third example of the determination of will now be described where the defined location region corresponds to a geographic range of coordinates and the reported position of AT also corresponds to a set of geographic coordinates e.g. or else corresponds to a service area identifier and is then mapped to the set of geographic coordinates . In this example assume the physical region from is defined by the edges e.g. or hyper planes in K dimensions joining the vertices e.g. N edges of the polygon by means of N linear inequalities as follows 1 

After establishing Equations 1 through 4 the application server can verify that A B satisfies each of the N inequalities. A fourth example of the determination of will now be described where the defined location region corresponds to a geographic range of coordinates and the reported position of AT also corresponds to a set of geographic coordinates e.g. or else corresponds to a service area identifier and is then mapped to the set of geographic coordinates . In particular in the fourth example i.e. a 3D coordinate example which will now be described the geographic coordinates correspond to latitude longitude positions on the surface of the Earth.

Referring to the fourth example for the determination of of the Earth can be modeled as a spheroid and with Req and Rpo as the equatorial and polar radii. The network operator of the application server provides N latitudes and longitudes in an ordered list such that successive points in the list have an edge that defines a boundary of the defined location region from .

The latitudes and longitudes for the N points on the earth s surface are . . . N N. These N points can be mapped to a 3 dimensional Cartesian coordinate system x y z as Xi Req cos i cos i Yi Req sin i cos i and Zi Rpo sin i Equation 5

Assuming that the N coordinates are provided in an ordered list a hyper plane can be defined as passing through 3 points namely the origin 0 0 0 and two points among the N points on the Earth s surface that are specified as an ordered list by the network operator of the application server . Each of these N hyper planes can be denoted by the following linear equations 1 

Let the location reported by AT be denoted by X at Y at Z at. With this assumption AT lies within the defined location region if AT s location satisfies the following equations i.e. AT s reported location lies within the bounding polyhedral generated by the set of half planes listed below 1 

Note that the last three constraints may automatically be satisfied i.e. Equations 16 through 18 and are specified to create a bounding polyhedral. While the hyper planes area are relatively easy to compute it is important to determine the half plane for each hyper plane in order to construct the inequalities Pi x y z 

In a fifth example for the determination of of it will be appreciated that the defined location region from can include both one or more service area identifiers and one or more geographic coordinate ranges. Thus AT s reported location from can be compared against both the service area identifiers and geographic coordinate ranges of the defined location region in this example using one of more of the first through fifth examples preceding the current example. A detailed example of evaluating this type of hybrid defined location region has been omitted for the sake of brevity.

Returning to of if the application server determines that AT s reported location is not within the defined location region the application server rejects the multicast call and or blocks the multicast call from being initiated. This can be accomplished in a number of ways. For example the application server can change the DNS entries to return an invalid valid IP address and Port for the registration handler e.g. RLS and call hosting component e.g. RD for multicast ATs or clients that perform service discovery. In an alternative example a network operator of the application server can shut down the registration handler e.g. CRH so that registrations are not received by the application server to disable new registrations e.g. in this example the multicast call requests from outside the defined location region are effectively blocked from ever arriving at the application server such that the determination of is built into the system at the RAN for example and is not performed as an actual evaluation at the application server . In an alternative example the application server can remove or de register an AT forcibly from one or more services e.g. multicast service supported by the application server . For example the application server can add an AT ID of the AT to a list of ATs that are to be denied the one or more services. Requests from a blocked AT may then result in a rejection message from the application server or the application server may simply ignore the request altogether.

In another example multicast service can be disabled across an entire PDSN service area by having each AT that moves into a new PDSN register for the multicast service. The RLS can determine the SectorID or SID NID PZID information that may be contained in a multicast registration message to the multicast service e.g. a QChat SIP REGISTER message for QChat in 1xEV DO Rev. A and or 3G 1x networks respectively and can determine which PDSN the AT is in. This function can instead be performed at the CRH.

Returning to of if AT s reported location is determined to be within the defined location region the application server generates an announce message for announcing the requested multicast session and forwards the announce message to the RAN e.g. via the PDSN or BSN for transmission to a plurality of access terminals belonging to the associated multicast group .

AT sends the configured multicast call accept message to the application server via the RAN . Alternatively AT can send the multicast call accept message and a separate message indicating AT s location to the application server in . In any case the application server receives the multicast call accept message and obtains an indication of AT s reported location in and determines whether AT s reported location is within the defined location region from in . AT s location evaluation in may be performed using any of the location evaluation methodologies described above with respect to AT in of and as such will not be described further for the sake of brevity.

Accordingly if AT s reported location is determined not to be within the defined location region AT is not permitted to join the announced multicast session in . Alternatively if AT s reported location is determined to be within the defined location region AT is permitted to join the announced multicast session in . Thus assuming AT is permitted to join the multicast session and is a first responder to the announce message the application server sends a message instructing AT that the multicast session can begin in . AT receives the message plays a tone to a user of AT indicating that he she can begin speaking and AT begins forwarding voice data e.g. or other data in a push to transfer PTX session to the application server for transmission to the multicast group . The application server forwards the voice data or multicast packets for transmission by the RAN to the multicast group members that have registered for the given multicast session and at least the registered multicast group members including AT monitor the given multicast session .

Thus after the multicast communication session begins with a data exchange between AT and at least AT in of the application server continues to relay data between a current floor holder of the multicast session e.g. which may or may not continue to be AT and one or more target ATs . Next each of ATs and e.g. and any other multicast group members periodically re determine their location e.g. as in of or of and send their updated location to the application server via the RAN e.g. as in of or of . The application server determines whether the reported AT location remains within the defined location region e.g. as in of or of . If the reported AT location remains within the defined location region the process returns to and the multicast session continues. Otherwise the AT associated with the reported location outside of the defined location region is dropped from the multicast session .

Turning to the AT side after sending their respective locations in each of ATs and determine whether they have been dropped from the multicast session . If not the process returns to and ATs and continue to generate and transmit periodic location updates to the application server . Otherwise if AT and or AT has been dropped from the call due to a location violation the process advances to .

In the dropped AT periodically re determines its location and the dropped AT transmits the location update to the application server . The rate at which the dropped AT re determines its location in need not be the same rate at which the location re determinations are made in . Alternatively the re determination can be event driven instead of periodic e.g. send a location update upon power up entry into a new subnet etc. . The application server checks the dropped AT s reported location and determines whether the dropped AT has re entered the defined location rejoin. If not the application server does not permit the dropped AT to rejoin the multicast session. Otherwise if the application server determines that the dropped AT has re entered the defined location region in the application server invites the dropped AT back into the multicast session . In the dropped AT determines whether it can rejoin the multicast session. If not the process returns to and repeats. Otherwise if the application server has indicated the dropped AT can rejoin the multicast session the dropped AT sends a request to re join the multicast session to the application server .

While embodiments of the present invention described with respect to FIGS. through have been directed to enforcing multicast location restrictions at the application server it will be appreciated that in other embodiments of the invention while not illustrated explicitly the restriction enforcement can be offloaded from the application server to the RAN . For example the application server is capable of enforcing location based restrictions because it is aware of the defined location region and is informed with regard to the locations of ATs participating in the group session e.g. via location reports as in of of and of etc. . The RAN on the other hand is typically aware of the locations of the ATs it serves but is not necessarily aware of the defined location region that is specified by the application server e.g. at of . Thus so long as the RAN is made aware of the defined location region for service restriction of the group session it will be appreciated that the operations related to enforcement of the location restriction in can be performed at the RAN instead of the application server in at least one embodiment. In a further example the application server can either inform the RAN of the defined location region directly or indirectly via one or more multicast group members participating in the group session. For example assume that one or more multicast group members are provisioned with the defined location region from the application server e.g. as in of described below in more detail . Thereafter when a given AT registers for a group session e.g. by sending a BCMCSFlowRegistration message the RAN can query the AT requesting registration with regard to whether the group session is associated with location restriction e.g. by sending a StorageBLOBRequest message configured to request location restriction information for the group session . The AT requesting registration can then respond to the RAN s query by conveying the defined location region e.g. within a StorageBLOBNotification message . Accordingly throughout this Specification it will be appreciated that any reference to an application server enforcing a location based restriction can alternatively be implemented at the RAN at least in the above described manner.

Further in a RAN implemented embodiment as described above it will be appreciated that the location reporting from multicast group members need not be performed because as noted above the RAN is already aware of the locations of the ATs being served e.g. at least on a sector by sector basis . Thus upon receiving a request to register to a multicast session at the RAN in an example the RAN could simply compare the sector from which the registration message is received against the defined location region to determine whether to restrict the call in one example.

Also while embodiments of the present invention described with respect to have been directed to enforcing multicast location restrictions at the application server or the RAN in other embodiments of the invention e.g. the enforcement can be offloaded from the application server and performed on the individual ATs that are requesting to participate in a given multicast session.

Accordingly illustrates a multicasting process including location based multicast call restriction according to an embodiment of the present invention where enforcement of the restriction occurs at individual ATs within the wireless communication system . Referring to in a network operator at the application server defines a location region for multicast session restriction e.g. for one or more specific multicast groups for all multicast service in a defined area etc. . of generally corresponds to of and as such a further description of how the defined physical region can be generated has been omitted for the sake of brevity.

At some point after generating the defined location region in the application server notifies each multicast group member e.g. belonging to a particular multicast group for the defined location region or to all members if the multicast restriction is for all multicast communications managed by the application server . For example the application server can notify ATs individually with regard to the defined location region during power up of the ATs when the ATs contact the application server to subscribe to a particular multicast group over a provisioning interface etc. Alternatively the notification of can be an update to a previous defined location region allocated to the multicast group members where the application server can notify all multicast group members that are currently participating in multicast sessions. As will be appreciated the defined location region can be provisioned to the AT along with the nature of the service to be restricted e.g. a TV channel multicast service etc. the time duration schedule of the restriction etc. The provisioning interface of can be via a carrier provisioning system CPS in an example and can be accomplished in an event driven manner e.g. upon power up upon service activation at the application server etc. via out of band signaling. This type of provisioning interface permits the application server to push information to the handset s in a well defined format to each individual user. Alternatively if the restriction is for multiple users in an example the application server can use group communication e.g. a multicast message such as BCMCS to inform a high number of ATs of the restriction which can increase an efficiency of the notification if a relatively large number of ATs require the notification. At the handset side the AT can then add the defined location region and associated restriction information to a coverage map so a user of the AT is aware of where particular services are available or where different degrees of restriction to services are present. In the example of for convenience of explanation assume that the notification of the defined location region to ATs and which belong to the same multicast group occurs at some point before AT attempts to initiate a multicast session with at least AT . Again while are directed to permit or block multicast restrictions other embodiments can restrict other types of communication sessions at varying degrees of restriction based on location.

At some point after receiving the notification of the defined location region that restricts at least AT s multicast group e.g. and possibly all other multicast service based on the defined location region AT determines whether to initiate a multicast call . For example if the multicast call corresponds to a PTT call a user of AT can press a PTT button in to initiate the multicast call attempt. In AT determines its location using any of the location determination methodologies described above with respect to of . After AT determines its location e.g. or SectorID a subnet identifier a geographic coordinate of AT and or AT s serving base station etc. instead of reporting the location to the application server along with a multicast call request AT evaluates its location determined at to determine whether AT is within the defined location region received at . In an example the location evaluation of of performed at AT may be performed using any of the location evaluation examples given above with respect to of e.g. a SectorID comparison a geographic coordinate checking algorithm etc. and as such a further description thereof has been omitted for the sake of brevity.

If AT determines that its location is not within the defined location region AT blocks the multicast call request from being transmitted in . A user of AT can be notified with regard to why the call was blocked in an example e.g. AT may display an Out of Location Range message . Conveying service restriction information to the AT is discussed in more detail below with respect to . Otherwise if AT determines that its location is within the defined location region the process advances to of .

AT receives the announce message and a user of AT determines whether to accept the multicast call . In this example assume that AT or the user of AT determines to accept the call. Accordingly AT determines its location within the wireless communications system in e.g. as in of . Next after AT determines its location e.g. or SectorID a subnet identifier a geographic coordinate of AT and or AT s serving base station etc. instead of reporting the location to the application server along with a multicast call accept message AT evaluates its location determined at to determine whether AT is within the defined location region received at . In an example the location evaluation of of performed at AT may be performed using any of the location evaluation examples given above with respect to of e.g. a SectorID comparison a geographic coordinate checking algorithm etc. and as such a further description thereof has been omitted for the sake of brevity.

If AT determines that its location is not within the defined location region AT blocks the multicast call accept message from being transmitted in . For example AT may block the call by ignoring the announce message altogether. Alternatively while not shown in AT may send an indication that the announce message has been rejected by AT to the application server e.g. an announce ACK reject message . A user of AT can be notified with regard to why the announced multicast call was blocked or rejected in an example e.g. AT may display an Out of Location Range message . Conveying service restriction information to the AT is discussed in more detail below with respect to . Otherwise if AT determines that its location is within the defined location region the process advances to of .

Assuming AT is a first responder to the announce message the application server sends a message instructing AT that the multicast session can begin in . AT receives the message plays a tone to a user of AT indicating that he she can begin speaking and AT begins forwarding voice data e.g. or other data in a PTX or other transport session to the application server for transmission to the multicast group . The application server forwards the voice data or multicast packets for transmission by the RAN to the multicast group members that have registered for the given multicast session and at least the registered multicast group members including AT monitor the given multicast session .

Returning to AT s side or the originator side AT continues to forward voice packets associated with the multicast session and periodically re determines its location . AT determines whether its re determined location from remains within the defined location region and continues the multicast session if AT is determined to remain within the defined location region at least until a next periodic location update in . Otherwise if AT determines that its location has moved outside of the defined location region AT drops the call in . As will be appreciated if AT is still the floor holder when its call is dropped one or more target ATs monitoring the given multicast session may also be affected by AT s call drop in although has been illustrated and described as if AT is not the floor holder at this point for the sake of convenience.

Turning back to AT s side or the target AT side AT continues to monitor the given multicast session in and periodically re determines its location e.g. similar to although AT s frequency of location checking need not correspond to AT s frequency . AT determines whether its re determined location from remains within the defined location region and the process returns to where AT continues to monitor the multicast session if AT is determined to remain within the defined location region at least until a next periodic location update in . Otherwise if AT determines that its location has moved outside of the defined location region AT drops the call in .

Returning to the originator side after AT drops the multicast call in AT continues to periodically re determine its location e.g. or alternatively as discussed with respect to of this re determination can be event driven instead of periodic and to check whether AT s updated location has returned to the defined location region . If not the process returns to and AT waits for a next periodic location update. Otherwise if AT determines its updated location has returned to the defined location region in AT sends a request to rejoin the multicast session to the application server via the RAN in . While not shown in AT can return to monitoring the given multicast session if the application server permits AT to rejoin the session.

Likewise at the target AT side after AT drops the multicast call in AT continues to periodically re determine its location and to check whether AT s updated location has returned to the defined location region . If not the process returns to and AT waits for a next periodic location update. Otherwise if AT determines its updated location has returned to the defined location region in AT sends a request to rejoin the multicast session to the application server via the RAN in . While not shown in AT can return to monitoring the given multicast session if the application server permits AT to rejoin the session.

Again while embodiments of the present invention have been directed to an inclusive implementation of the defined location region e.g. multicast or unicast calls are only permitted inside the defined location region other embodiments of the present invention can alternatively be directed towards an exclusive implementation of the defined location region e.g. multicast calls are only permitted outside the defined location region .

Further it will be appreciated that the defined location region can be established on a per group basis such that each multicast group can potentially be restricted from or to a different location region or alternatively can be established such that a particular type of multicast service e.g. BCMCS PTT PTX etc. or a particular protocol type such as QChat can be restricted from or to certain location regions which can potentially affect many e.g. all multicast groups attempting to operate inside or outside the defined location region.

In another example the defined location region for restriction can be established on a per user or per AT basis. As discussed above embodiments of the invention have generally been described with respect to group calls in part because restrictions related to group calls can be more difficult to enforce than non group calls or unicast calls. However it will be readily apparent how the embodiments can be modified to accommodate non group calls or unicast calls. Thus it will be appreciated that the defined location region for restriction can affect a given user s unicast calls group calls and or transport sessions which are not necessarily calls .

Further it will be appreciated that above described embodiments of the invention have generally described the defined location region as establishing explicit permit or deny zones such that a particular service for an AT group of ATs or all ATs is permitted or denied inside the defined location region with the opposite permission setting being in effect outside of the defined location region. However in another example the defined location region can correspond to one degree of restriction while areas outside the defined location region can correspond to a different degree of restriction. For example an area inside the defined location region can provide a given service e.g. a TV channel at a first billing or charging rate and areas outside the defined location region can provide the given service at a second billing or charging rate. It will be appreciated that in these examples the application server need not simply reject the call if the AT is determined not to be within the defined location region in of or of for example but can rather provide the more limited or restricted service level. Likewise instead of dropping the call altogether in of the application server can rather drop the AT to the more limited or restricted service level. Similarly at the handset side AT can request the more limited or restricted service in of or of instead of blocking the call altogether. Likewise at the handset side AT can drop the call to the more limited or restricted service level e.g. such as listen only mode as opposed to a mode that permits AT to talk or transmit as well as listen or receive which means AT does not necessarily require a dedicated TCH and or can be served via multicast instead of unicast that required that would require dedicated TCH in or of instead of dropping the call altogether. Again in these examples the different levels of restriction may correspond to any type of service differentiation including but not limited to different levels of guaranteed QoS resources different billing or charging rates at which subscribers are charged for the service different types of service e.g. group calls via unicast multicast etc. or for media a video only area an audio only area a txt only area a video and audio area push vs. pull email forwarding etc. etc.

Further it will be appreciated that the location restriction of is enforced at the handset or AT in automatic fashion such that the location based restriction is executed by the AT in accordance with the notification from the application server received at of . Thus it will be appreciated that the user of the AT is not in direct control over the manner in which the location restriction is enforced because for example the determination and decision steps of and of for example are performed automatically by the AT itself.

However it will be appreciated that assuming the user of the AT has the AT in his her possession the user is in control over where the AT is located. Accordingly a user interface UI for conveying potential restriction information to the user of the AT can permit the user to make informed decisions regarding how to obtain a desired level of service.

In an example referring to assume that the user of the given AT is driving across the country while also participating in a very important group call the user has plotted a navigation route to the user s destination on the given AT. The given AT in this example performs the determining step of by comparing the navigation route with the defined location region or regions for the user s multicast service e.g. where the defined location region was received in association with multicast service restriction in of . If the given AT determines that the multicast service is restricted at some point during the navigation route the given AT can inform the user e.g Cannot Guarantee Multicast Service On Current Route etc. and permit the user to request that a new navigation route be plotted where the restriction can be avoided or can simply offer the user a suggested alternative route. Alternatively the user can be informed by displaying a coverage map of where multicast service is available and also the current navigation route such that the user of the given AT can figure out where on the navigation route multicast service will be restricted.

In another example referring to assume that the user of the given AT is watching a program on a given media channel e.g. a TV channel and is approaching a boundary of the defined location region for the program service outside of which viewing of the program is in some way restricted. For example the given AT can determine it is near such a boundary if the given AT is engaged in soft handoff and less than all of the base stations in the given AT s active set support the program service. In another example the given AT can determine that the restriction is likely to affect the user s experience with the program service in based on the given AT s geographic proximity to the boundary possibly in conjunction with the given AT s current trajectory toward the boundary. Thus the given AT determines to inform the user in and warns the user in that the program service will be in some manner restricted if the user continues toward the boundary. Again this can be conveyed via a coverage map or via a simple text warning or audio alert. Thus the user of the AT can make his her own decision on how to proceed based on the importance of the service versus the nature of the restriction the geographical scope of the restriction etc. In the case of a program service e.g. a TV program a radio program etc. the restriction outside the defined location region can be for example a higher charge for the program service e.g. similar to a roaming service in conventional voice calls when an AT is out of network .

In yet another example referring to assume that the user actually travels outside of the defined location region with the given AT that the user had been using the associated service on the given AT prior to crossing the boundary and the given AT thereby enters a more restricted area. In this case the given AT determines that the user s experience with the service is affected based on the restriction determines to inform the user and informs the user . Thus if the restriction is cutting off the service altogether the process of in this example ensures that the user will not simply become confused and frustrated by the sudden service failure but rather knows that the service was dropped due to the location change. The user thereby has a chance to travel back to service range. The given AT can output a coverage map or otherwise provide directions to the user so that the given AT can be brought back within range. Alternatively if the restriction is a higher billing or charging rate for the service the process of ensures that the user will not receive an unexpectedly high bill as the user would be informed that the rate associated with the program service increased after crossing the boundary.

In another example for one reason or another the given AT can be configured to initiate handoff between different service types e.g. different carriers different types of service such as WiFi vs. 3G vs. a wired connection etc. if the given AT expects a service level to drop off. Accordingly as mentioned above and illustrated in the given AT can optionally engaged in handoff from a current service mechanism to another service mechanism wherein service mechanism is intended to be interpreted broadly as any manner of obtaining the service e.g. via a 3G cell phone network via a WiFi connection a wired Ethernet connection a Bluetooth connection group calls via unicast protocols group calls via multicast protocols etc. such that the service mechanism can be physical or can be different protocols over the same physical mechanism . In an example the expected service level drop off can be the determination of of wherein the given AT determines that the service used by the user of the given AT will be affected potentially by a service restriction e.g. the given AT is outside the defined location region or likely to soon be outside the defined location region . In another example the given AT can determine it is either in an area of weak coverage for supporting the service. In any case the given AT can attempt to handoff to another mechanism for supporting the user s service seamlessly e.g. ideally so that the user is not aware or at least not adversely affected by the switch . Thus in this case the given AT can initiate transmissions to the application server via alternate mechanisms such as use of Traffic Channels in the EV DO system or even physical technologies such as 1x WiFi etc. For example the given AT can determine that the quality of a link supporting a particular service is weak by measuring the packet loss rate and delay jitter at the application layer. Upon these metrics crossing a certain threshold that is application specific the AT can trigger handoff to an appropriate PHY layer that provides an associated grade of reliability of service. It will be appreciated that this handoff can be performed in parallel with or in addition to the processes of any of . For example if the handoff is performed in response to the determination of of the given AT can attempt to handoff to another mechanism for supporting the service and only if unsuccessful determine to inform the user of the restriction for the current service mechanism in . Alternatively the given AT can both perform the handoff and inform the user of the restriction and possibly the handoff as well in . Accordingly the aforementioned handoff at least in one example can be performed within the framework of at and as will be appreciated by one of ordinary skill in the art.

In another example assume that the AT is using a given communication service and enters a dead zone for the service where a location based restriction does not permit the AT to continue the given communication service over a given service mechanism e.g. such as a cell phone 3G network a WiFi network etc. . In this example assume that the levels of service restriction associated with the defined location region for the location based restriction are specific to particular service mechanisms for particular services instead of directed to the service in a general fashion e.g. permit group calls over unicast but not over multicast in Sector X such that group call service itself is not restricted but rather only the manner in which group calls are obtained . In this example even though the AT is outside the range that the service is provided the AT may tunnel or remotely log onto a computing device that is within the range e.g. via a VPN service . In this case the location of the computing device and not the AT is used for the location restriction. Thus even though the AT is outside the defined location region in this example the restriction applies to the remote computing device which is still within the defined location region such that service need not be cut off merely because the AT has exited the defined location region.

In another example it will be appreciated that embodiments of the invention can be directed to any type of service e.g. any multicast service such as QChat and or Yagatta .

Further while above described embodiments are generally directed to location based service restriction enforced either at the application server or alternatively at individual ATs within the system it will be appreciated that other embodiments can be directed towards enforcement at different network entities. In this case the application server or the AT itself can inform the other network entity of the restriction for enforcement in an example e.g. via notification of . For example the location based service restriction can be enforced at the RAN .

In above described embodiments of the invention the defined location region can be established for multicast service in an example such that ATs wishing to participate in a given multicast session can participate in the given multicast session inside or outside of the defined location region. Thus if an AT attempts to originate a multicast call outside of the defined location region the multicast call is restricted e.g. by the application server by the AT itself etc. .

Referring to the application server defines the location region for multicast service restriction A. AT determines to initiate a multicast call A AT determines its location A AT configures a multicast call request that reports its determined location A and AT sends the configured multicast call request message to the application server via the RAN A. The application server receives AT s reported location and determines whether AT is within the defined location region A. It will be appreciated that A through A of may generally correspond to through of .

If the application server e.g. or the RAN determines AT is within the defined location region the application server e.g. or the RAN sends an announce message on the downlink BCH or downlink CCH e.g. packaged in a DOS message to one or more ATs within the defined location region A. Otherwise if the application server determines AT is not within the defined location region the application server determines whether AT has a high enough authority to proceed as multicast call originator despite being outside of the defined location region A. For example certain ATs e.g. for CEOs of companies users that pay a premium for increased service quality etc. may be granted high priority status for participating in group sessions. Additionally it will be appreciated that in some instances all access terminals may be granted high priority status e.g. for emergency calls . If AT does not have a sufficient priority level the multicast call is not permitted to proceed i.e. no announce message is sent . Otherwise AT is granted permission to participate in the multicast call via IP unicasting A instead of IP multicasting e.g. which is reserved for ATs within the defined location region . The process then proceeds to A.

In a further example while not shown explicitly within in at least one embodiment if AT has a high priority the multicast call may be permitted to proceed irrespective of AT s position relative to the defined location region and AT may be supported via IP unicasting protocols e.g. as in A . Thus even if AT is actually within the defined location region where IP multicasting is supported AT may still be allocated IP unicasting resources for support of its group session. For example it will be appreciated that supporting AT via IP unicasting protocols reduces the chance that AT will drop the multicast call if AT moves out of the defined location region during the call. In an alternative embodiment high priority multicast call originators are allocated IP multicasting resources when the multicast call is originated from within the defined location region and are only allocated IP unicasting resources when outside of the defined location region. While this increases the chance that AT will drop the call if AT roams outside of the defined location region this embodiment may decrease interference e.g. due to redundant messaging in the defined location region.

Accordingly referring to the application server obtains a list of high priority multicast group members for the multicast call B and the application server sends individually addressed versions of the announce message to each high priority multicast group member of the multicast call B irrespective of whether the high priority multicast group members are inside of or outside of the defined location region e.g. in contrast to the announce message from A which is potentially sent to multiple ATs at the same time . Accordingly each high priority multicast group member has a high likelihood of receiving the announce message although high priority multicast group members within the defined location region may receive multiple announce messages i.e. in A and B which can increase downlink traffic.

Referring to the application server obtains the list of high priority multicast group member for the multicast call C and waits a threshold period of time to receive responses to the announce message sent in A. One or more announce acknowledgment messages are received in C. The application server determines after the threshold period of time has elapsed whether any high priority multicast group members for the multicast call have failed to respond to the announce message within the threshold period of time C. If so the application server sends individually addressed versions of the announce message only to the non responsive high priority multicast group members B irrespective of whether the non responsive high priority multicast group members are inside of or outside of the defined location region. Thus the amount of downlink traffic is potentially reduced in as compared to although high priority multicast group members outside of the defined location region will likely receive a delayed version of the announce message in i.e. delayed by the threshold period of time .

Referring to after B of C of or A of e.g. if and or C are not performed assume that one or more multicast group members ATs . . . N either inside or outside of the defined location region receive the announce message D and determine to accept the announced multicast session D. ATs . . . N determine their location D configure a multicast call accept message to convey their determined location D and transmit the configured multicast call accept message to the application server D. The application server receives the multicast call accept messages from ATs . . . N and determines whether ATs . . . N are within the defined location region D. For ATs that are within the defined location region the process advances to D and the application server notifies AT that the multicast session can begin e.g. that a user of AT can begin speaking after a first responder accepts the announced multicast session. Otherwise for ATs determined to be outside of the defined location region the application server determines whether the ATs have a high priority e.g. high enough to support a given level of multicast service outside of the defined location region D. If the application server determines that one or more ATs do not have a high priority in D their multicast call accept message is rejected and the one or more ATs are not permitted to participate in the multicast call. Otherwise if the application server determines that one or more ATs have a high priority in D their multicast call accept message is accepted and the application server determines to support multicast service to the high priority ATs via IP unicasting D. The process then advances to D where AT is notified that the session can begin.

In a further example while not shown explicitly within in at least one embodiment if ATs . . . N have a high priority then ATs . . . N may be permitted to join the group session irrespective of AT s position relative to the defined location region and ATs . . . N may be supported via IP unicasting protocols e.g. as in D . Thus even if ATs . . . N are actually within the defined location region where IP multicasting is supported ATs . . . N may still be allocated IP unicasting resources for support of its group session. For example it will be appreciated that supporting ATs . . . N via IP unicasting protocols reduces the chance that ATs . . . N will drop the multicast call if ATs . . . N move out of the defined location region during the call. In an alternative embodiment high priority target ATs such as ATs . . . N to a group session are allocated IP multicasting resources when the target ATs are located within the defined location region and are only allocated IP unicasting resources when outside of the defined location region. While this increases the chance that ATs . . . N will drop the call if ATs . . . N roam outside of the defined location region this embodiment may decrease interference e.g. due to redundant messaging in the defined location region.

In D AT plays a tone and a user of AT begins speaking and forwarding voice data to the application server which then forwards messages to the RAN for transmission to ATs that have registered to the session D. It will be appreciated that the application server may transmit the messages via IP multicast e.g. a single downlink media flow to multiple ATs on a downlink BCH or CCH within one or more sectors of the defined location region and may transmit the messages via IP unicast e.g. an individual message intended for one particular recipient to high priority multicast group members that have been permitted to register to the session e.g. either from inside or outside of the defined location region . Each AT that has registered for the session monitors the messages which can be transmitted via IP unicast or IP multicast protocols as described above D.

While have been described above with respect to exemptions of high priority multicast group members from location based service restriction enforced at the application server other embodiments can be directed to a RAN enforcement of the location based restriction as described above as will be described next with respect to .

Referring to the RAN obtains a defined location region for multicast service restriction E. For example the RAN may be provisioned with the defined location region by the application server or alternatively the RAN may be informed of the defined location region by one or more multicast group members. AT determines to initiate a multicast call E and sends a multicast call request message to the RAN to be forwarded to the application server E. The RAN receives the multicast call request message and determines AT s location E e.g. either from information contained within the multicast call request message or based on a current serving sector of AT .

If the RAN determines AT is within the defined location region E the RAN forwards the multicast call request message to the application server E which sends an announce message on the downlink BCH or downlink CCH e.g. packaged in a DOS message to one or more ATs within the defined location region E. Otherwise if the RAN determines AT is not within the defined location region the RAN determines whether AT has a high enough priority to proceed as multicast call originator despite being outside of the defined location region E. For example certain ATs e.g. for CEOs of companies users that pay a premium for increased service quality etc. may be granted high priority status for participating in group sessions. If AT does not have a sufficient priority level the multicast call is not permitted to proceed i.e. the multicast call request message is not forwarded to the application server and no announce message is sent . In this embodiment assume that the RAN is either pre provisioned with the AT priority information or AT has the ability of authenticating itself as having a high priority. Accordingly The RAN grants AT permission to participate in the multicast call via IP unicasting E instead of IP multicasting e.g. which is reserved for ATs within the defined location region . The process then proceeds to E. In this embodiment assume that the RAN can configure the multicast call request message forwarded to the application server with a flag e.g. in a DSCP value that indicates whether to support AT with IP multicasting or IP unicasting protocols.

In a further example while not shown explicitly within in at least one embodiment if AT has a high priority the multicast call may be permitted to proceed irrespective of AT s position relative to the defined location region and AT may be supported via IP unicasting protocols e.g. as in E . Thus even if AT is actually within the defined location region where IP multicasting is supported AT may still be allocated IP unicasting resources for support of its group session. For example it will be appreciated that supporting AT via IP unicasting protocols reduces the chance that AT will drop the multicast call if AT moves out of the defined location region during the call. In an alternative embodiment high priority multicast call originators are allocated IP multicasting resources when the multicast call is originated from within the defined location region and are only allocated IP unicasting resources when outside of the defined location region. While this increases the chance that AT will drop the call if AT roams outside of the defined location region this embodiment may decrease interference e.g. due to redundant messaging in the defined location region.

Referring to after B of C of or E of e.g. if and or C are not performed assume that one or more multicast group members ATs . . . N either inside or outside of the defined location region receive the announce message F and determine to accept the announced multicast session F. ATs . . . N transmit a multicast call accept message to the RAN F. For example the multicast call accept message may include an announce ACK accept message intended for the application server and a multicast registration request message intended for the RAN .

The RAN receives the multicast call accept messages from ATs . . . N determines the locations of ATs . . . N F e.g. based on information contained in the multicast call accept messages or based on a current serving sector of ATs . . . N and determines whether ATs . . . N are within the defined location region F.

For ATs that are within the defined location region the process advances to F and the RAN forwards the announce ACK accept messages to the application server which then notifies AT that the multicast session can begin e.g. that a user of AT can begin speaking because a first responder has accepted the announced multicast session. Otherwise for ATs determined to be outside of the defined location region the RAN determines whether the ATs have a high priority e.g. high enough to support a given level of multicast service outside of the defined location region as in it is assumed that the RAN is provisioned with the priorities of ATs . . . N or that ATs . . . N can convey their priority levels to the RAN F. If the RAN determines that one or more ATs do not have a high priority in E their multicast call accept message is rejected and the one or more ATs are not permitted to participate in the multicast call. Otherwise if the RAN determines that one or more ATs have a high priority in F the RAN forwards their announce ACK accept messages to the application server with a flag indicating to support those AT s via IP unicasting F F. The process then advances to F where AT is notified that the session can begin.

In a further example while not shown explicitly within in at least one embodiment if ATs . . . N have a high priority then ATs . . . N may be permitted to join the group session irrespective of AT s position relative to the defined location region and ATs . . . N may be supported via IP unicasting protocols e.g. as in F . Thus even if ATs . . . N are actually within the defined location region where IP multicasting is supported ATs . . . N may still be allocated IP unicasting resources for support of its group session. For example it will be appreciated that supporting ATs . . . N via IP unicasting protocols reduces the chance that ATs . . . N will drop the multicast call if ATs . . . N move out of the defined location region during the call. In an alternative embodiment high priority target ATs such as ATs . . . N to a group session are allocated IP multicasting resources when the target ATs are located within the defined location region and are only allocated IP unicasting resources when outside of the defined location region. While this increases the chance that ATs . . . N will drop the call if ATs . . . N roam outside of the defined location region this embodiment may decrease interference e.g. due to redundant messaging in the defined location region.

In F AT plays a tone and a user of AT begins speaking and forwarding voice data to the application server which then forwards messages to the RAN for transmission to ATs that have registered to the session F e.g. via IP unicasting or IP multicasting based on the determination of the RAN from F . Accordingly it will be appreciated that the application server may transmit the messages via IP multicast e.g. a single downlink media flow to multiple ATs on a downlink BCH or CCH within one or more sectors of the defined location region and may transmit the messages via IP unicast e.g. an individual message intended for one particular recipient to high priority multicast group members that have been permitted to register to the multicast session e.g. either from inside or outside of the defined location region . Each AT that has registered for the session monitors the messages which can be transmitted via IP unicast or IP multicast protocols as described above F.

Also other embodiments can be directed to exemptions of high priority multicast group members from location based service restriction enforced at the individual ATs as will now be described with respect to .

Accordingly the application server defines a location region for service restriction e.g. in this example multicast service restriction A and the application server notifies each multicast group member e.g. of a particular group affected by the defined location region of all multicast groups etc. of the defined location region and associated service restriction A. At some point after receiving the defined location region AT determines to initiate a multicast call A determines its location A and determines whether AT is within the defined location region A. In A if AT determines its location is within the defined location region the process advances to A and AT transmits a multicast call request message to establish a multicast call to be supported based on IP multicasting protocols. Otherwise in A if AT determines its location is not within the defined location region AT determines whether AT has a high enough priority to warrant supporting its requested multicast session outside of the defined location region e.g. via IP unicasting protocols A. In A if AT determines its priority is not sufficient for supporting its requested multicast session when AT is outside of the defined location region the requested multicast session is blocked in A and no multicast call request is transmitted e.g. optionally a user notification with regard to why the multicast call session is blocked may be provided as discussed above . Otherwise in A if AT determines its priority is sufficient for supporting its requested multicast session via IP unicasting protocols AT determines to support its requested multicast session via IP unicasting protocols A and sends a multicast call request message to the application server A. The application server receives the multicast call request message and sends an announce message announcing the multicast session on a downlink shared channel e.g. the downlink BCH CCH etc. in one or more sectors within the defined location region A.

After A the application server may also announce the multicast session to high priority ATs outside of the defined location region in accordance with either and or . After B of or C of assume that one or more multicast group members ATs . . . N either inside or outside of the defined location region receive the announce message B and determine to accept the announced multicast session B. ATs . . . N determine their location B and determine whether their respective location is within the defined location region . For ATs that are within the defined location region the process advances to B and a request to join the announced multicast session i.e. a multicast call request message is sent to the application server via IP multicasting protocols. Otherwise for ATs determined to be outside of the defined location region the ATs further determine whether the ATs have a high priority e.g. high enough to support a given level of multicast service outside of the defined location region B. In B for ATs self determining an insufficient priority for participating in the multicast session outside of the defined location region the process advances to of and the request to join the multicast session is blocked. In B for ATs self determining a sufficient priority for participating in the multicast session outside of the defined location region the ATs determine to support the multicast session via IP unicasting protocols B and the ATs send a multicast call accept message to the application server B.

In B after receiving a first multicast call accept message the application server informs AT that the multicast session can begin and AT plays a tone and a user of AT begins speaking and forwarding voice data to the application server B which then forwards multicast messages to the RAN for transmission to ATs that have registered to the multicast session B. It will be appreciated that the application server may transmit the multicast messages via IP multicast e.g. a single downlink media flow on a downlink BCH within one or more sectors of the defined location region and may transmit the multicast messages via IP unicast e.g. an individual message intended for one particular recipient to high priority multicast group members that have been permitted to register to the multicast session from outside of the defined location region. Each AT that has registered for the multicast session monitors the multicast messages B.

In an alternative embodiment of the invention while and A B illustrate the decision block for determining whether an AT is within the defined location region before determining whether the AT has a high priority it will be appreciated that these steps can be reversed such that high priority ATs always support the multicast session e.g. either as a target AT or call originator via IP unicasting protocols irrespective of whether the AT is inside or outside of the defined location region.

In yet another example if high priority ATs are not configured to always support the multicast session via IP unicasting protocols irrespective of a relationship to the defined location region high priority ATs that are initially outside of the defined location region and are initially configured to support the multicast session via IP unicasting may switch to IP multicasting once moving inside of the defined location region. Likewise high priority ATs that are initially inside of the defined location region and are initially configured to support the multicast session via IP multicasting may switch to IP unicasting once moving outside of the defined location region. This protocol switching may occur in a manner similar to that illustrated in or with respect to lower priority ATs except a switch between IP multicasting and IP unicasting occurs instead of dropping the call and re joining the call when moving into or out of the defined location region.

Assuming that the AT determines that its priority is high in C then the AT makes a selection in C as to whether to support its participation in the group session via IP unicasting or IP multicasting protocols. For example even though the AT is within the defined location region if the AT is located in a boundary sector e.g. a sector in the defined location region that borders a sector that is not in the defined location region the AT may selects IP unicasting in C to decrease a likelihood of dropping the call if the AT moves outside of the defined location region. In another example the AT may select IP unicasting if the AT expects its mobility to be high such that there it is possible that the AT will roam outside of the defined location region during the call. Alternatively the AT may select IP unicasting even where its mobility expectation is not high simply because IP unicasting can be in some instances a premium service for group sessions that the AT has already paid for. Thus is intended to show that even if the group session is supported via IP multicasting in the defined location region certain high priority ATs may still have the option of supporting the group session via IP unicasting in the defined location region as well as outside of the defined location region.

After selecting IP unicasting or IP multicasting in C the process then advances either to A of or to B of where the call request or call join request message is configured to convey the IP unicast or multicast selection to the RAN and or to the application server which can then support the call in the indicated manner.

It will further be appreciated while not shown explicitly within that the selection of C need not only be performed when a group session is originated or joined but can also occur after a given group member is already participating in a group session. For example if a high priority AT selects IP unicasting in C or A or B and participates in the group session for a given amount of time via IP unicasting it is possible that channel conditions for the AT can deteriorate such that IP unicasting can no longer sufficiently support the AT s group session signaling. In this case the high priority AT may select to switch to another protocol for supporting the group session if available. For example if the high priority AT is supported by IP unicasting protocols and is within the defined location region it will be appreciated that the high priority AT can alternatively be supported via IP multicasting protocols. Thus if IP unicasting becomes less desirable than IP multicasting the high priority AT that initially selected IP unicasting can switch to IP multicasting in an embodiment. Likewise if the high priority AT initially selects IP multicasting and the high priority AT determines that IP multicasting is no longer a desirable protocol for supporting the group session e.g. if the AT detects that it is near a boundary region for the defined location region etc. the high priority AT can switch to IP multicasting in another embodiment.

Further the location based service restriction enforced by the application server and or the RAN has been described above as corresponding to multicast service that is supported either by IP multicasting protocols or IP unicasting protocols for different of the ATs e.g. ATs outside of the defined location region with a high priority are supported by IP unicast ATs inside of the defined location region with a low priority are supported by IP multicast etc. . In at least one other embodiment to reduce issues related to scalability the application server or RAN based enforcement embodiments may support all multicast group members via IP unicast. It will still be appreciated that the application server or RAN based enforcement embodiments can use a combination of IP unicasting and IP multicasting where appropriate it is simply noted that scalability issues may arise in these embodiments e.g. due to increased messaging between ATs and the RAN and or the application server as more ATs join the communication session .

As described above in at least one embodiment of the invention high priority multicast call targets can be configured to have their multicast communication sessions supported via IP unicasting protocols irrespective of their location. In other embodiments also described above high priority multicast call targets are allocated IP multicasting resources when the multicast call target is within the defined location region and are only allocated IP unicasting resources when outside of the defined location region. A more detailed example of this scenario is illustrated in with respect to a multicast call target.

Referring to assume that a given AT AT is a high priority multicast call target that AT is located within the defined location region and that AT is listening to the multicast communication session via IP multicasting protocols. Next in AT either moves out of the defined location region or is expected to soon move out of the defined location region sets up a TCH with the RAN e.g. by sending a ConnectionRequest message and receiving a TCH assignment message and then sends a message to the application server via the R TCH to request that the application server transition its support of AT for the multicast communication session from IP multicasting to IP unicasting . The application server receives the IP unicasting support request from AT sends a message indicating its acceptance of the IP unicasting support request to AT and then begins sending multicasting data or media for the multicast communication session to AT via IP unicasting .

Next AT moves back into the defined location region and sends a message to the application server via the R TCH to request that the application server transition its support of AT for the multicast communication session from IP unicasting back to IP multicasting . The application server receives the IP multicasting support request from AT and sends a message indicating its acceptance of the IP multicasting support request to AT . After receiving the accept message from the application server AT releases or tears down the TCH with the RAN and tunes to a downlink broadcast channel TCH or other shared channel as indicated by a BOM in AT s sector. The RAN then begins or continues sending multicasting data or media forwarded from the application server in within AT s sector for the multicast communication session to AT via IP multicasting protocols. AT continues to monitor the multicast communication session from within the defined location region and periodically re determines whether AT has again moved outside of the defined location region or is likely to soon move out of the defined location region . When AT determines that its location has again moved outside the defined location region the process returns to and repeats.

While the embodiment of has been described with respect to a location based restriction process enforced at the handset or AT it will be readily appreciated how can be modified to accommodate toggling between IP unicast and IP multicast in the RAN based location restriction enforcement and or application server based location restriction enforcement scenarios. Specific call flows to these embodiments have been omitted but should be readily apparent in view of the numerous figures and description of embodiments provided above.

Those of skill in the art will appreciate that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Further those of skill in the art will appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention.

The various illustrative logical blocks modules and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The methods sequences and or algorithms described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal e.g. access terminal . In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary embodiments the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

While the foregoing disclosure shows illustrative embodiments of the invention it should be noted that various changes and modifications could be made herein without departing from the scope of the invention as defined by the appended claims. The functions steps and or actions of the method claims in accordance with the embodiments of the invention described herein need not be performed in any particular order. Furthermore although elements of the invention may be described or claimed in the singular the plural is contemplated unless limitation to the singular is explicitly stated.

