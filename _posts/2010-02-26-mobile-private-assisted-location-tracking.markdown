---

title: Mobile private assisted location tracking
abstract: Systems and methods are disclosed for providing private location tracking. In general, a location-aware mobile device includes a location broker. Over time, as a location of the mobile device changes, the location broker generates a number of route fragments each defining the location of the mobile device over a corresponding period of time. The location broker obfuscates the route fragments and sends the obfuscated route fragments to a remote server for storage. At some point, the location broker receives a location tracking request from a requestor. In response, the location broker processes the location tracking request such that one or more obfuscated route fragments that are relevant to the location tracking request are obtained from the remote server and de-obfuscated to recover the corresponding route fragments. The recovered route fragments may then be utilized by the requestor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09082077&OS=09082077&RS=09082077
owner: Waldeck Technology, LLC
number: 09082077
owner_city: Wilmington
owner_country: US
publication_date: 20100226
---
This application claims the benefit of provisional patent application Ser. No. 61 163 091 filed Mar. 25 2009 the disclosure of which is hereby incorporated herein by reference in its entirety.

Many smartphones have location Application Programming Interfaces APIs that are accessible to applications running on the smartphones and hence Location Based Services LBSs on the network. Although it is relatively straightforward to retrieve and store a user s location via these APIs processing historical location of the user usually means sending a string of current locations in time to a LBS over the network. The LBS stores and processes the historical location of the user to provide some service. Storage of the historical location of the user by the LBS ultimately sacrifices some level of user privacy. As such there is a need for a system and method that enables private location tracking.

Systems and methods are disclosed for providing private location tracking. In general a location aware mobile device includes a location broker. Over time as a location of the mobile device changes the location broker generates a number of route fragments each defining the location of the mobile device over a corresponding period of time. The location broker obfuscates the route fragments and sends the obfuscated route fragments to a remote server for storage. At some point the location broker receives a location tracking request from a requestor. In response the location broker processes the location tracking request such that one or more obfuscated route fragments that are relevant to the location tracking request are obtained from the remote server and de obfuscated to recover the corresponding route fragments. The recovered route fragments may then be utilized by the requestor.

In one embodiment the location broker of the mobile device receives a location tracking request from a requesting device. In response the location broker obtains one or more obfuscated route fragments that are relevant to the location tracking request from the remote server. In one embodiment the location tracking request identifies a desired time window or a desired time window is otherwise determined for the location tracking request and the obfuscated route fragments that are relevant to the location tracking request are one or more obfuscated route fragments that are relevant to the desired time window for the location tracking request. The location broker then returns the obfuscated route fragments and one or more obfuscation values needed to de obfuscate the obfuscated route fragments to the requesting device. The requesting device is then enabled to de obfuscate the obfuscated route fragments using the obfuscation values to recover the corresponding route fragments that define a location history or route of the user of the mobile device.

In another embodiment the location broker of the mobile device receives a location tracking request from a requesting device. In response the location broker obtains one or more obfuscation values needed to de obfuscate one or more obfuscated route fragments that are relevant to the location tracking request. In one embodiment the location tracking request identifies a desired time window or a desired time window is otherwise determined for the location tracking request and the obfuscated route fragments that are relevant to the location tracking request are one or more obfuscated route fragments that are relevant to the desired time window for the location tracking request. The location broker of the mobile device then returns the obfuscation values and optionally authorization data to the requesting device. The requesting device then obtains the obfuscated route fragments that are relevant to the location tracking request from the remote server. The requesting device de obfuscates the obfuscated route fragments using the obfuscation values received from the mobile device to recover the corresponding route fragments that define a location history or route of the user of the mobile device.

In yet another embodiment the location broker of the mobile device receives a location tracking request from a user of the mobile device or another application running on the mobile device. In response the location broker of the mobile device obtains one or more obfuscated route fragments from the remote server that are relevant to the location tracking request. The location broker of the mobile device then de obfuscates the obfuscated route fragments to recover the corresponding route fragments that define a location history or route of the user of the mobile device.

Those skilled in the art will appreciate the scope of the present invention and realize additional aspects thereof after reading the following detailed description of the preferred embodiments in association with the accompanying drawing figures.

The embodiments set forth below represent the necessary information to enable those skilled in the art to practice the invention and illustrate the best mode of practicing the invention. Upon reading the following description in light of the accompanying drawing figures those skilled in the art will understand the concepts of the invention and will recognize applications of these concepts not particularly addressed herein. It should be understood that these concepts and applications fall within the scope of the disclosure and the accompanying claims.

The server is a physical server and includes a route fragment storage function an obfuscated route fragment repository and a request processing function . The route fragment storage function is preferably implemented in software but is not limited thereto. In general as discussed below the route fragment storage function operates to obtain obfuscated route fragments from the mobile device and store the obfuscated route fragments in the obfuscated route fragment repository . Note that while only the mobile device is illustrated for clarity and ease of discussion it should be appreciated that the system may include any number of mobile devices for which the route fragment storage function obtains obfuscated route fragments and stores those obfuscated route fragments in the obfuscated route fragment repository . As used herein a route fragment is data that defines the location of a user or mobile device over a defined period of time. As further used herein an obfuscated route fragment is a route fragment that has been obfuscated. As discussed below obfuscation of a route fragment may be provided by for example applying a transformation e.g. a linear transform to the route fragment encrypting the route fragment using a desired cryptography technique e.g. asymmetric key cryptography or the like. By storing only the obfuscated route fragments at the server privacy is maintained with respect to the location of the user . Specifically since the server cannot de obfuscate the obfuscated route fragments the server or any entity that legally or illegally gains access to the server cannot use the obfuscated route fragments to track the location of the user .

The request processing function of the server is also preferably implemented in software but is not limited thereto. In general the request processing function operates to process requests for obfuscated route fragments from the mobile device the requesting device or both. More specifically upon receiving a request for obfuscated route fragments for a desired time window the request processing function obtains obfuscated route fragments for the user that are relevant to a desired time window from the obfuscated route fragment repository and returns those obfuscated route fragments to the requestor.

The mobile device is physical device such as for example a mobile smartphone e.g. an APPLE IPHONE a tablet computer e.g. an APPLE IPAD or similar location aware portable device. The mobile device generally includes a location determination function and a location broker . The location determination function may be implemented in hardware software or a combination thereof. In general the location determination function operates to determine or otherwise obtain the location of the mobile device . For example the location determination function may be or include a Global Positioning System GPS receiver that operates to determine the location of the mobile device . As another example the mobile device may be connected to a cellular telecommunications network and the location determination function may obtain the location of the mobile device from the cellular telecommunications network.

The location broker of the mobile device is preferably implemented in software but is not limited thereto. In general the location broker operates to process the location of the mobile device as determined by the location determination function over time to create route fragments that define the location of the user over corresponding periods of time. More specifically in the preferred embodiment the location broker creates a route fragment every N minutes where N may be for example 5 minutes 10 minutes 15 minutes 30 minutes 60 minutes or the like. For example the location broker may create a route fragment every thirty 30 minutes that defines the location of the user during the corresponding thirty 30 minute period. The location broker obfuscates the route fragments and sends the obfuscated route fragments to the server where they are stored in the obfuscated route fragment repository .

In addition the location broker processes location tracking requests from the requesting device and in some embodiments the user . More specifically in one embodiment the location broker receives a location tracking request from the requesting device and then obtains obfuscated route fragments that are relevant to the location tracking request from the server . The location broker then de obfuscates the obfuscated route fragments to provide the corresponding route fragments and then returns the route fragments to the requesting device . In another embodiment the location broker receives a location tracking request from the requesting device . The location broker then returns obfuscation values to the requesting device for obfuscated route fragments that are relevant to the location tracking request. The requesting device obtains the obfuscated route fragments from the server and de obfuscates the obfuscated route fragments using the obfuscation values to recover the route fragments relevant to the location tracking request.

The requesting device is a physical device such as for example a personal computer another mobile device a server or the like. As illustrated the requesting device includes a location based application which is preferably but not necessarily implemented in software. In operation the location based application issues a location tracking request to the mobile device . In one embodiment in response to the request the location based application receives the route fragments that are relevant to the location tracking request from the mobile device . In another embodiment in response to the request the location based application receives one or more obfuscation values for obfuscated route fragments that are relevant to the location tracking request from the mobile device . The location based application then obtains the obfuscated route fragments from the server and de obfuscates the obfuscated route fragments using the one or more obfuscation values received from the mobile device . In either embodiment once the route fragments are obtained the location based application may utilize the route fragments as a location history or route of the location of the user . For example the location based application may be a social networking application that enables the user to track the location of other users in a social network of the user such as in this example the user . As another example the location based application may be a targeted advertising application that provides targeted advertisements to the user based on locations that the user has visited. Note however that these examples are not intended to limit the scope of the present disclosure.

For example graphically illustrates two such route fragments and . The route fragment includes sub fragments and . The sub fragment is defined by a start location a stop location and a start time identifying when the user was located at the start location of the sub fragment . Likewise the sub fragment is defined by a start location that is the same as the stop location of the sub fragment a stop location and a start time identifying when the user was located at the start location of the sub fragment . Note that the start time of the sub fragment is also referred to herein as a start time of the route fragment . In a similar manner the route fragment includes sub fragments and . The sub fragment is defined by a start location which is the same as the stop location of the sub fragment of the route fragment a stop location and a start time identifying when the user was at the start location . The sub fragment is defined by a start location which is the same as the stop location of the sub fragment a stop location and a start time identifying when the user was at the start location . Lastly the sub fragment is defined by a start location which is the same as the stop location of the sub fragment a stop location and a start time identifying when the user was at the start location of the sub fragment .

In another embodiment the route fragment may be defined by a list of two or more locations including a start location for the route fragment and a stop location for the route fragment. In addition the route fragment may include a start time and or stop time for the route fragment. Alternatively the route fragment may include a timestamp for each of the locations in the list of locations for the route fragment where each timestamp defines a time at which the user was at the corresponding location.

Returning to once the route fragment is generated the location broker obfuscates the route fragment step . In general any suitable technique for obfuscating the route fragment may be used. In one embodiment a private unique identifier ID of the mobile device and the start time for the route fragment are used to compute or otherwise obtain an obfuscation value. The obfuscation value may then be used to obfuscate the route fragment. In one embodiment obfuscation may be performed by applying the obfuscation value to the locations defining the route fragment e.g. the start and stop locations for each sub fragment in the route fragment as a linear transform. In another embodiment the locations defining the route fragment may be encrypted using a suitable a cryptography technique e.g. asymmetric key cryptography where the obfuscation value is used as the encryption key. Note that other techniques for obfuscating the route fragment may be used and are to be considered with the scope of the present disclosure. Further while in the preferred embodiment the start time of the route fragment is not obfuscated the present disclosure is not limited thereto.

Next the location broker sends the obfuscated route fragment to the server step . In response the route fragment storage function stores the obfuscated route fragment in the obfuscated route fragment repository step . Note that the obfuscated route fragment is identified as an obfuscated route fragment of the user . For example the obfuscated route fragment may be stored in association with a public identifier ID of the user . The public ID of the user may be for instance a name of the user a telephone number of the mobile device of the user an identifier derived from the International Mobile Subscriber Identity IMSI or International Mobile Equipment Identity IMEI of the mobile device or the like.

At this point the process is repeated such that the location broker generates another route fragment obfuscates the route fragment and sends the obfuscated route fragment to the server where the obfuscated route fragment is stored in the obfuscated route fragment repository steps . This process is repeated such that over time new route fragments continue to be generated obfuscated and sent to the server for storage.

At some point the location broker of the mobile device receives a location tracking request from the location based application of the requesting device step . The location tracking request preferably identifies a desired time window for the location tracking request. For example the desired time window may be relative to the current time e.g. past day past 2 days past week or the like or absolute e.g. Jan. 29 2010 through Jan. 31 2010 today from noon until 5 P.M. or the like . Further the time window may be discrete or reoccurring e.g. Last Monday through Friday from 8 AM to 9 PM . While not illustrated the location broker may perform an authorization process to determine whether the location based application and or the user is authorized to access the route fragments of the user and even more specifically the route fragments of the user relevant to the desired time window for the location tracking request. Authorization may require the location based application and or the user to provide appropriate credentials such as for example a predetermined password. Note that while in the embodiments discussed herein the desired time window is preferably identified in the location tracking request the present disclosure is not limited thereto. In another embodiment the time window for the location tracking request is determined by the location broker using for example system defined or user defined criteria. For example the user may be enabled define time windows that are to be accessible to individual users or groups classes of users.

In response to receiving the location tracking request and optionally authorization of the location based application and or the user the location broker of the mobile device sends a request to the server for obfuscated route fragments that are relevant to the desired time window for the location tracking request step . In one embodiment the obfuscated route fragments that are relevant to the desired time window for the tracking request are obfuscated route fragments that are stored for the user and that have start times within the desired time window for the tracking request. The request processing function of the server then obtains the obfuscated route fragments stored for the user that are relevant to the desired time window for the location tracking request from the obfuscated route fragment repository and returns those obfuscated route fragments to the location broker of the mobile device steps and .

The location broker then de obfuscates the obfuscated route fragments returned by the server to provide the corresponding route fragments and returns the route fragments to the requesting device steps and . The location based application of the requesting device then utilizes the route fragments step . For instance the route fragments may be combined by the location based application to provide a location history or route of the user during the desired time window for the location tracking request. The route of the user may then be presented to the user at the requesting device used to provide an automated service such as targeted advertising or the like.

If it is time to create a new route fragment the location broker gets the current location of the mobile device from the location determination function step . In addition if it has not already done so for step the location broker gets the current time step . If the location determination function is a GPS receiver the location broker may get the current time from the location determination function . However the current time may be obtained using any suitable technique. Next the location broker creates a route fragment with a first sub fragment having a start location set to the current location and a start time set to the current time step .

The location broker also determines whether there is a previous route fragment step . In other words the location broker determines whether the route fragment created in step is the first route fragment created. If there is not a previous route fragment the process returns to step and is repeated. However if there is a previous route fragment the location broker sets a stop location of the last sub fragment of the previous route fragment i.e. the immediately preceding route fragment to the current location thereby completing the previous route fragment step . The process then returns to step and is repeated.

Returning to step if it is not time to create a new route fragment the location broker determines whether it is time to create a new sub fragment for the current route fragment step . More specifically in one embodiment route fragments are created at the predefined absolute times. Between these predefined absolute times the location broker may create a number of sub fragments in response to triggering events. The triggering events may be for example detecting that the user has moved to and remained at a particular location for at least a threshold amount of time e.g. 5 minutes expiration of a predefined time interval for a sub fragment e.g. 5 minutes initiation by the user directly or indirectly e.g. via initiation of a location based Internet search or the like. If it is not time to create a new sub fragment then the process returns to step and is repeated.

If it is time to create a new sub fragment the location broker gets the current location of the mobile device and the current time steps and . The location broker then creates a sub fragment for the current route fragment having a start location set to the current location and a start time set to the current time step . In addition the location broker sets a stop location of a previous or immediately preceding sub fragment for the current route fragment to the current location thereby completing the previous sub fragment step . At this point the process returns to step and is repeated.

The location broker then retrieves the next sub fragment for the route fragment which for the first iteration is the first sub fragment for the route fragment step . The location broker then applies the obfuscation value as a linear transform on the sub fragment step . More specifically in this embodiment the sub fragment includes a start location defined by a latitude and longitude coordinate pair and a stop location defined by another latitude and longitude coordinate pair. The location broker then applies the obfuscation value to the sub fragment as a linear transform by adding the obfuscation value to both of the latitude and longitude coordinates for the start location and the latitude and longitude coordinates for the stop location of the sub fragment. Note that while a linear transform is discussed herein other types of transforms e.g. non linear transforms may be used. Also note that other types of obfuscation techniques may be used such as for example asymmetric key cryptography. Next the location broker determines whether all sub fragments for the route fragment have been processed step . If not the process returns to step and is repeated. Once all of the sub fragments of the route fragment have been processed or obfuscated the process ends.

In response to receiving the location tracking request and optionally authorization of the location based application and or the user the location broker of the mobile device obtains the obfuscation values used to obfuscate route fragments that are relevant to the time window for the location tracking request step . More specifically in the embodiment route fragments are created at predetermined absolute times e.g. 8 00 AM 8 30 AM etc. . Further each route fragment is obfuscated using an obfuscation value computed using a secure hash of the private unique identifier of the mobile device and the start time for route fragment. As such the location broker first determines the predetermined absolute times at which route fragments were created that are within the time window for the location tracking request. The identified predetermined absolute times correspond to the start times for the route fragments that are relevant to the time window for the location tracking request. Then the location broker computes the obfuscation values for the route fragments using the secure hash of the start times for the route fragments and the private unique identifier of the mobile device . Alternatively if the start times of the route fragments are not known the location broker may first query the server for the start times of the obfuscated route fragments for the user that are within the time window for the location tracking request. The location broker may then compute the obfuscation values using a secure hash of the start times and the private unique identifier of the mobile device .

Next the location broker returns the obfuscation values and optionally authorization data to the location based application of the requesting device step . The authorization data may be for example a token or credentials enabling the location based application to request the obfuscated route fragments relevant to the location tracking request from the server . For instance the authorization data may be a one time password generated using a One Time Password OTP technology such as Initiative for Open Authorization OATH technology. Using such technology authorization can be rescinded after an authorized transaction has taken place thereby increasing the security of the system .

In this embodiment the location based application of the requesting device sends a request for the obfuscated route fragments relevant to the location tracking request to the server step . The request includes the time window for the location tracking request and optionally the authorization data received from the location broker of the mobile device . In response to the request the request processing function of the server performs an authorization process to determine whether the location based application is authorized to access the obfuscated route fragments step . For example the request processing function may authorize the location based application if the appropriate token or credentials are provided in the request. Once authorization is complete the request processing function obtains the obfuscated route fragments for the user that are relevant to the time window provided in the request from the obfuscated route fragment repository step . The request processing function then returns the obfuscated route fragments to the requesting device step .

The location based application of the requesting device then de obfuscates the obfuscated route fragments using the obfuscation values received from the location broker of the mobile device to recover the route fragments for the user that are relevant to the time window for the location tracking request step . More specifically in one embodiment obfuscation of a route fragment is performed by applying an obfuscation value to the route fragment using a linear transform wherein the obfuscation value is added to the latitude and longitude coordinates defining the start and stop locations for each sub fragment of the route fragment as discussed above. In this embodiment de obfuscation is performed for each of the obfuscated route fragments received from the server by subtracting the corresponding obfuscation value from the obfuscated latitude and longitude coordinates for each of the obfuscated sub fragments of the obfuscated route fragment. Once de obfuscation is complete the location based application of the requesting device utilizes the route fragments step . For instance the route fragments may be combined by the location based application to provide a location history or route of the user during the time window for the location tracking request. The route of the user may then be presented to the user at the requesting device used to provide an automated service such as targeted advertising or the like.

In response to receiving the location tracking request the location broker of the mobile device sends a request to the server for obfuscated route fragments of the user that are relevant to the location tracking request step . Preferably the request sent to the server includes the time window for the location tracking request. The request processing function then obtains the obfuscated route fragments relevant to the location tracking request from the obfuscated route fragment repository and returns those obfuscated route fragments to the mobile device steps and . In one embodiment the obfuscated route fragments relevant to the location tracking request are obfuscated route fragments for the user that have start times within the time window identified for the location tracking request.

Upon receiving the obfuscated route fragments the location broker of the mobile device de obfuscates the obfuscated route fragments step . More specifically for each of the obfuscated route fragments the location broker obtains the obfuscation value used to generate the obfuscated route fragment and then de obfuscates the obfuscated route fragment using the obfuscation value. Once de obfuscation is complete the mobile device utilizes the route fragments step . For instance the route fragments may be combined by the location broker or another application to provide a route of the user during the time window for the location tracking request. The route of the user may then be presented to the user at the mobile device used to provide an automated service such as targeted advertising or the like.

Those skilled in the art will recognize improvements and modifications to the preferred embodiments of the present invention. All such improvements and modifications are considered within the scope of the concepts disclosed herein and the claims that follow.

