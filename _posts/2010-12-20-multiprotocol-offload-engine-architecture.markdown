---

title: Multiprotocol offload engine architecture
abstract: A device and method in which data transmissions to and from host processors in accordance with various protocols (e.g., TCP, UDP, FTP) are translated to and from NACK-Oriented Reliable Multicast (NORM) protocol data transmissions. A Multiprotocol Offload Engine (MOE) software architecture may perform the translations within a Network Interface Card (NIC) or Network Blade (NB) hardware platform. Moving the protocol translation processing from the host processors to the MOE hardware unit removes the protocol processing load from the host processor and significantly increases performance of data transmission among sources and sinks across a network layer.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08619776&OS=08619776&RS=08619776
owner: Lockheed Martin Corporation
number: 08619776
owner_city: Bethesda
owner_country: US
publication_date: 20101220
---
The present invention relates generally to communication of data over networks and more particularly to offloading of data transmission protocol processing from a host processor.

Many existing Wide Area Network WAN architectures allow individual data packet streams to compete for bandwidth and time across long haul networks that are data restrictive and have bottlenecks or congestion. Standard long haul packet switching methods generally involve a source and one or more sinks attempting to transmit single or multi cast and receive data packets across often un reliable WANs. In this regard a number of protocols exist for the transmission of data among various source devices and sink devices over data networks. Source devices and sink devices may take various forms including for example a computer server or collection of computer servers a desktop computer a laptop computer a smart phone a personal digital assistant or the like. Source devices and sink devices may generally be referred to herein as sources and sinks Examples of protocols used in transmitting and receiving data over data networks include Transmission Control Protocol Internet Protocol TCP IP User Datagram Protocol UDP and File Transfer Protocol FTP .

Recently another protocol referred to as Negative Acknowledgment Reliable Multicast NORM Transport Protocol has been developed. One example of the NORM protocol is specified in a document released for comment in November 2009 by the Naval Research Laboratory referred to as RFC 5740 and entitled NACK Oriented Reliable Multicast NORM Transport Protocol the entire disclosure of which is hereby incorporated by reference herein. As described therein the NORM protocol provides end to end reliable transport of bulk data objects or stream over generic IP multicast routing and forwarding services.

While the NORM protocol can be implemented on the host processors of source and sink devices to handle NORM protocol data transmissions among the devices over a network layer doing so requires the host processors of the source and sink devices to devote processing time to the NORM protocol data transmissions thereby reducing the amount of processing time available to execute applications on the source and sink devices. Accordingly the present invention provides a system and method by which data transmission using various protocols e.g. TCP UDP FTP among source and sink devices over a network is facilitated and made more reliable by translating the data transmission into a NORM protocol data transmission transmitting the data over the network and translating the data transmission from the NORM protocol back to another protocol e.g. TCP UDP FTP . Such translations and communications may be performed by hardware units which offload protocol processing operations from the host processors of the source and sink devices and translate the data transmission to and from the NORM protocol. The hardware unit may be referred to herein as a Multiprotocol Offload Engine MOE and the MOE may include an MOE software architecture that implements the NORM protocol.

The MOE software architecture may apply the Naval Research Laboratory NACK Oriented Reliable Multicast NORM RFC 5740 within a Network Interface Card NIC or Network Blade NB hardware platform. Moving the protocol translation processing from the host processor to the hardware unit removes the protocol processing load from the host processor and significantly increases performance. Offloading the protocol translation processing onto hardware based multi core processors contained within a NIC or NB significantly increases the communications throughput and improves the reliability of host based unicast and multicast UDP TCP and FTP.

The MOE software architecture creates a very high speed flexible and configurable network device that multiplexes de multiplexes unicasts and multicasts UDP TCP or FTP protocol data streams or any combination of these protocol configurations across LAN and or WAN 10GE network infrastructures. The MOE may be architected to support full line rate of two 10GE interfaces or 40 Gbps bandwidth. The MOE software may be architected such that it can be applied to either network blades or workstation server base NICs. The flexibility of the software architecture provides a powerful and flexible MOE device capable of surpassing existing TCP offload engines and satisfying numerous communications needs. The MOE can simultaneously operate across Local Area Networks LAN and or Wide Area Networks WAN and support reliable unicast and or multicast 10 giga bit Ethernet data transmission. In addition the MOE can implement the NORM Packet Forward Error Correction PFEC that can correct for lost packets without requiring additional network latency of requesting a re transmission.

In one aspect a networking device comprises a hardware unit interposed between a host processor and a network layer. The hardware unit includes at least one processor. The networking device also includes computer program instructions executable by the processor of the hardware unit. The computer program instructions may for example be stored on at least one memory included in the hardware device. The computer program instructions include a TCP module a UDP module an FTP module and a NORM module. The TCP module implements a TCP specification to transmit and receive data to and from the host processor. The UDP module implements a UDP specification to transmit and receive data to and from the host processor. The FTP module implements a FTP specification to transmit and receive data to and from the host processor. The NORM module implements a NORM protocol specification to transmit and receive data to and from the network layer. The NORM module further translates at least one of TCP UDP and FTP data transmissions into NORM data transmissions and also further translates NORM data transmissions into at least one of TCP UDP and FTP data transmissions.

In another aspect a method for use in transmitting data between a host processor and a network layer includes the step of interposing a hardware unit in a communication path between the host processor and the network layer. The hardware unit may include at least one processor. The method also includes the step of executing computer program instructions with the at least one processor of the hardware unit. In this regard the method may also include storing at least a portion of the computer program instructions on at least one memory included in the hardware unit. Execution of the computer program instructions implements a TCP module to transmit and receive data to and from the host processor in accordance with a TCP specification implements a UDP module to transmit and receive data to and from the host processor in accordance with a UDP specification implements a FTP module to transmit and receive data to and from the host processor in accordance with a FTP specification and implements a negative acknowledgment oriented reliable multicast NORM stack module to transmit and receive data to and from the network layer in accordance with a NORM protocol specification. execution of the computer program instructions also translates at least one of TCP UDP and FTP data transmissions into NORM data transmissions and translates NORM data transmissions into at least one of TCP UDP and FTP data transmissions.

Various refinements exist of the features noted in relation to the various aspects of the present invention. Further features may also be incorporated in the various aspects of the present invention. These refinements and additional features may exist individually or in any combination and various features of the various aspects may be combined. These and other aspects and advantages of the present invention will be apparent upon review of the following Detailed Description when taken in conjunction with the accompanying figures.

The PCI slot connector permits installation of the MOE hardware device in a PCI slot of a source or sink device e.g. a computer server . The processor can thereby communicate with one or more processors in the source or sink device via a PCI system bus. Where the MOE hardware device comprises a network blade or other COTS and non COTS form the MOE hardware device may include an appropriate type of connector communicatively coupled with the processor to enable connection to source and sink devices and communication with one or processors in the source or sink devices.

The MOE hardware device includes computer program instructions executable by said processor . The computer program instructions may be referred to herein as the MOE integrated software application or just the MOE application . The MOE application may be stored on the memory of the MOE hardware device and loaded into the processor as needed prior to and or during execution by the processor . When executed by the processor the MOE application enables the processor to translate incoming data received from a network layer via the network cable connectors A B by the network communications transceivers A B from one protocol e.g. NORM TCP UDP FTP into another protocol e.g. e.g. NORM TCP UDP FTP . When executed by the processor the MOE application also enables the processor to process outgoing data received from one or more source or sink host processors via PCI slot connector for transmission by the transceivers A B to a network layer via the network cable connectors A B in accordance with a protocol e.g. NORM TCP UDP FTP .

The NORM stack module comprises computer program instructions executable by a processor such as processor of the MOE hardware device of . When executed the instructions of the NORM stack module enable the processor to implement a NORM protocol specification such as for example a NORM protocol specification as specified in RFC 5740 to transmit and receive data between a network layer and one or more host processors of a source or sink device. The instructions comprising the NORM stack module remain consistent from platform to platform e.g. PCI NIC network blade etc. .

The traffic shaper module traffic meter module traffic manager module and configuration manager module comprise computer program instructions executable by a processor such as processor of the MOE hardware device of . When executed the instructions of the traffic shaper module enable the processor to control bandwidth settings applicable to data transmissions from the hardware device . When executed the instructions of the traffic meter module enable the processor to buffer incoming transmissions from a network layer. When executed the instructions of the traffic manager module enable the processor to manage handling of incoming and outgoing data transmissions. When executed the instructions of the configuration manager module enable the processor to set configuration settings of the hardware device . When executed the instructions of the FTP API module enable the processor to implement a FTP protocol to transfer data files over a network layer from a source side data storage device to a sink side data storage device. The instructions comprising the traffic shaper module traffic meter module traffic manager module and configuration manager module may vary from platform to platform e.g. PCI NIC network blade etc. to enable the NORM stack module to remain consistent regardless of the platform on which it is executed.

The other COTS modules of the MOE software architecture the network management protocol module internet protocol module 10 gigabit Ethernet module TCP stack module and UDP stack module comprise computer program instructions executable by a processor such as processor of the MOE hardware device of . When executed the instructions comprising the network management protocols module internet protocol module and a 10 gigabit Ethernet module enable the processor to handle necessary network management receive and transmit data via internet protocol and communicate via a 10 gigabit Ethernet connection to a network layer respectively. When executed the instructions comprising the TCP stack module enable the processor to implement a TCP protocol to transmit and receive data between a network layer and one or more host processors of a source or sink device. When executed the instructions comprising the UDP stack module enable the processor to implement a UDP protocol to transmit and receive data between a network layer and one or more host processors of a source or sink device.

In step computer program instructions are stored on at least one memory included in the hardware unit. In this regard step may be performed before and or after step in which the hardware unit is interposed in the communication pathway between the host processor and the network layer.

In step the computer program instructions are executed with the at least one processor of the hardware unit to implement a TCP module to transmit and receive data to and from the host processor in accordance with a TCP specification a UDP module to transmit and receive data to and from the host processor in accordance with a UDP specification a FTP module to transmit and receive data to and from the host processor in accordance with a FTP specification and a NORM stack module to transmit and receive data to and from the network layer in accordance with a NORM protocol specification.

In step the computer program instructions are executed with the at least one processor of the hardware unit to translate at least one of TCP UDP and FTP data transmissions into NORM data transmissions and to translate NORM data transmissions into at least one of TCP UDP and FTP data transmissions.

In step the computer program instructions are executed with the at least one processor of the hardware unit to implement one or more modules e.g. a traffic shaper module a traffic meter module a traffic manager module and or a configuration manager module that adapt the TCP module UDP module FTP module and the NORM module to the specific hardware unit and source or sink. In step the computer program instructions are executed with the at least one processor of the hardware unit to implement one or more COTS modules e.g. a 10 giga bit Ethernet module an internet protocol IP module and or a network management protocol module . In step data translated into the NORM protocol specification is transmitted across the network layer in accordance with the NORM protocol specification.

While various embodiments of the present invention have been described in detail further modifications and adaptations of the invention may occur to those skilled in the art. However it is to be expressly understood that such modifications and adaptations are within the spirit and scope of the present invention.

