---

title: Managing sensor and actuator data for a processor and service processor located on a common socket
abstract: Illustrated is a system and method that includes a processor and service processor co-located on a common socket, the service processor to aggregate data from a distributed network of additional service processors and processors both of which are co-located on an additional common socket. The system and method also includes a first sensor to record the data from the processor. The system and method also includes a second sensor to record the data from a software stack. The system and method further includes a registry to store the data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08984257&OS=08984257&RS=08984257
owner: Hewlett-Packard Development Company, L.P.
number: 08984257
owner_city: Houston
owner_country: US
publication_date: 20100406
---
This is non provisional patent application related to U.S. patent application Ser. No. 12 243 111 titled Coordinated Management In Virtualized Systems Using Management Brokers And Management Channels that was filed on Oct. 1 2008 and which is incorporated by reference in its entirety.

Service processors are processors or other types of integrated circuits that are used to manage or co manage alongside or part of one or more general purpose processors specific functionality in a computer system. This functionality may include computer system diagnostics power resource management and remote computer system configuration and management. There is no direct communication between service processors that is the service processors are horizontally and or vertically silo ed. Some example service processors include Hewlett Packard Company s INTEGRATED LIGHTS OUT iLO series of service processors.

Vertically silo ed means that a separate infrastructure exists for monitoring the hardware virtualization and application stacks. Horizontal silo ed means that there is no direct communication among the peers as a result the aggregation and correlation is performed at a centralized location. A peer is a service processor. This central location may be a management computer system or management blade.

Monitoring may involve the use of various hardware HW and or Software SW stack sensor and actuators that monitor the functionality of the HW SW stacks. These sensors and actuators may be used in the aforementioned computer system diagnostics power resource management and remote computer system configuration and management.

Illustrated is a system and method for resource management for unified and automated monitoring across the hardware and software stacks in a distributed system. This system and method may be used to manage vertically and horizontally silo ed HW SW stacks. Manage as used herein includes recording and making available for display sensor and actuator data relating to the HW SW stacks. The overall system and method includes i federated registry and proxy services for automating the discovery of sensors and actuators across HW SW stacks and node boundaries and dynamic routing of queries to these sensors and actuators ii distributed brokers for executing monitoring correlation and aggregation policies in a scalable manner. The system and method is instantiated in the service processor and in a special virtual platform appliance on every node.

Further illustrated is the service processor helper that acts as a platform virtual appliance to allow the service processor to manage the HW SW stack of the CPU . Shown is the helper registry and proxy services that is responsible for the i auto discovery of sensors and actuators across the HW SW stack ii subsequent registration of the individual namespaces of these sensors and actuators and iii once registered doing a dynamic redirection of query calls i.e. proxy functionality to the appropriate sensors and actuators in the socket . On top of the helper registry and proxy services exists a helper broker responsible for executing monitoring correlation and aggregation policies in a scalable and coordinated manner. These policies relate to one or more of the guest VM . The helper broker and helper registry and proxy service are used to resolve vertical silos across the HW SW layer of the CPU i.e. a local domain through the monitoring of sensors and actuators within the management domain of the CPU . This registration process may be repeated periodically using a lease based mechanism so as to support dynamism occurring in the system e.g. VMs entry exit migrations HW upgrades etc. .

Additionally shown is the firmware that includes the console service processor broker service processor registry and proxy services and platform sensors and actuator . The console allows users of the system and method illustrated herein to monitor and manage the HW SW stack of for example the enclosures through the use of a dashboard GUI CLI internet browser or other suitable interface. This console facilitates this management capability through the use of a network connection that utilizes a protocol such as a Hyper Text Transfer Protocol HTTP . Also shown is a service processor broker responsible for executing monitoring correlation and aggregation policies in a scalable and coordinated manner. These policies relate to one of more hypervisors . Further shown is a service processor registry and proxy service module that is responsible for discovering and registering the sensors and actuators in the distributed system along with their meta data. This module is also responsible for dynamically proxy ing query calls to appropriate sensors and actuators in the distributed system through the use of the network connection . The network connection may be a logical or physical connection. Also shown is a platform sensors and actuators actuator that includes sensors and actuators used to monitor the service processor . The service processor broker and service processor registry and proxy service are used to resolve vertical and horizontal silos across the HW SW layer of the socket enclosures rack container and or the data center i.e. collectively remote domains through the monitoring of sensors and actuators within the various management domains of each of these aforementioned devices.

In some example embodiments the use of sensors and actuators in the management of the HW SW layer of these various domains is facilitated through the use of distributed registry functionality. Specifically a local registry table is maintained by the helper broker and helper registry and proxy services . This local registry table is federated or combined with other local registries tables from other service processors using a distributed overlay wherein the service processors are operatively connected via the network connection . Using the network connection the proxy functionality is provided in the system and method by dynamically routing queries in the distributed overlay and from for example the service processor to any CPU management domain on a socket node or enclosure via the service processor helper .

In one example embodiment a local registry table is built and maintained as part of a helper registry . The data that populates this helper registry may be metadata and or actual data that identifies management endpoints e.g. Dom guest VMs or platforms via a discovery protocol. This discovery protocol may be SLP Ping Sweep Web Service WS identify Domain Name Server Dynamic Host Control Protocol DNS DHCP or some other suitable protocol. This data is stored in the helper registry . Discovery of the management endpoints e.g. WS Man may be conducted using a SLP User Agent SLP UA that resides on the Dom and guest VM and which receives queries from an internal discovery service SLP SA that resides as part of the helper registry and proxy services . A multicast channel is assumed for the SLP based discovery of VMs and Dom. In order to limit the multicast message to the management domains in that node only a firewall rule may be introduced in Dom to drop the forwarding of the message outside of the node. Once the discovery of the management end points by the helper registry and proxy services occurs a namespace registration occurs using the namespace registration module to query the CIMOM of each WS Man endpoint . Where a namespace is established for each sensor and actuator the helper registry and proxy service module queries each WS Man endpoint for each CIMOM to retrieve the namespaces associated with a VM Dom platforms or other suitable devices and components. Additional processing e.g. filtering may be performed on the retrieved namespaces. Further the discovery of the management endpoints e.g. WS Man at the hardware platform layer is done by the service processor registry and proxy services . The helper registry and proxy services queries the service processor registry and proxy services to retrieve the hardware discovery information then to populate the helper registry with this discovered data.

In some example embodiments a query is received by the service processor broker . The service processor broken uses the service processor broker SDK and the service processor registry and proxy service to handle the query. The service processor broker SDK may be accessed using the following Application Programming Interfaces APIs 

The SATA port may interface with a persistent storage medium e.g. an optical storage devices or magnetic storage device that includes a machine readable medium on which is stored one or more sets of instructions and data structures e.g. software embodying or utilized by any one or more of the methodologies or functions illustrated herein. The software may also reside completely or at least partially within the SRAM and or within the CPU during execution thereof by the computer system . The instructions may further be transmitted or received over the 10 100 1000 ethernet port USB port or some other suitable port illustrated herein.

In some example embodiments a removable physical storage medium is shown to be a single medium and the term machine readable medium should be taken to include a single medium or multiple medium e.g. a centralized or distributed database and or associated caches and servers that store the one or more sets of instructions. The term machine readable medium shall also be taken to include any medium that is capable of storing encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any of the one or more of the methodologies illustrated herein. The term machine readable medium shall accordingly be taken to include but not be limited to solid state memories optical and magnetic medium and carrier wave signals.

Data and instructions of the software are stored in respective storage devices which are implemented as one or more computer readable or computer usable storage media or mediums. The storage media include different forms of memory including semiconductor memory devices such as DRAM or SRAM Erasable and Programmable Read Only Memories EPROMs Electrically Erasable and Programmable Read Only Memories EEPROMs and flash memories magnetic disks such as fixed floppy and removable disks other magnetic media including tape and optical media such as Compact Disks CDs or Digital Versatile Disks DVDs . Note that the instructions of the software discussed above can be provided on one computer readable or computer usable storage medium or alternatively can be provided on multiple computer readable or computer usable storage media distributed in a large system having possibly plural nodes. Such computer readable or computer usable storage medium or media is are considered to be part of an article or article of manufacture . An article or article of manufacture can refer to any manufactured single component or multiple components.

In the foregoing description numerous details are set forth to provide an understanding of the present invention. However it will be understood by those skilled in the art that the present invention may be practiced without these details. While the invention has been disclosed with respect to a limited number of embodiments those skilled in the art will appreciate numerous modifications and variations therefrom. It is intended that the appended claims cover such modifications and variations as fall within the true spirit and scope of the invention.

