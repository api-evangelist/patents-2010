---

title: System and method for temporarily enabling proprietary transit payments on a hotel room key
abstract: One embodiment of the invention is directed to a system comprising a database and a server computer coupled to the database, wherein the server computer comprises a processor and a computer-readable storage medium coupled to the processor, the computer readable storage medium comprising code executable by the processor for implementing a method comprising: receiving transit transaction data, determining a hotel based on the transit transaction data, and sending the transit transaction data to the hotel, wherein the hotel places a transit charge based on the transit transaction data onto a hotel folio. Another embodiment of the invention is directed to a method, the method comprising receiving transit transaction data, determining a hotel based on the transit transaction data, and sending the transit transaction data to the hotel, wherein the hotel places a transit charge based on the transit transaction data onto a hotel folio.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09098843&OS=09098843&RS=09098843
owner: Visa International Service Association
number: 09098843
owner_city: San Francisco
owner_country: US
publication_date: 20101111
---
This application claims benefit under 35 U.S.C. 119 e of U.S. provisional patent application No. 61 292 766 entitled System and Method for Temporarily Enabling Proprietary Transit Payments on a Hotel Key filed on Jan. 6 2010 the entire disclosure of which is incorporated herein by reference for all purposes.

Many people regularly use transit systems to commute to work and or to travel for a variety of purposes. In an effort to improve the convenience of transit travel many transit operators now offer riders the option of paying for trips through using fare media cards with embedded proprietary contactless payment applications.

While such fare media cards are convenient for regular riders the cards present several problems for out of town visitors. For example out of town visitors often must spend significant time effort and money simply learning how to purchase fare media cards. Out of town visitors are also frequently deterred from using fare media cards because many transit operators require each card to be preloaded with a minimum amount. Illustratively a transit operator may require a rider to prepay fifteen dollars before issuing a fare media card. If however an out of town visitor only requires five dollars worth of trips he or she may choose not to purchase a fare media card and may therefore not use the associated transit system.

What is needed is a system that can remove barriers to transit use for out of town visitors. It would further be desirable to make paying for transit fare more convenient by consolidating transit and non transit charges onto a single folio or bill. Embodiments of the present invention address these problems and other problems individually and collectively.

Embodiments of the present invention can relate to systems and methods for processing a transit transaction and sending transit transaction data to a hotel so that a transit charge may be included on a hotel customer s folio or bill. In some embodiments the processing of transit transactions and sending of transit transaction data may be accomplished through specialized processing linking and aliasing capabilities. In certain embodiments a hotel customer may perform a transit transaction e.g. purchasing transit fare by using a proprietary contactless payment application embedded in or on a hotel assigned portable device. For example a hotel customer may present a hotel assigned portable device e.g. a hotel room key card to a first access control device situated at the entrance of a local subway system. The first access control device may determine that the portable device is valid and allow the customer to access the subway system. At the conclusion of his or her trip the hotel customer may present his or her assigned portable device to a second access control device situated at an exit of the subway system. The second access control device may determine that the portable device is valid and allow the customer to exit the subway system. In some embodiments a transit fare amount may also be calculated for the customer s trip. Transit transaction data for the trip which includes the calculated fare amount may then be sent to a processing engine. Upon receiving the transit transaction data the processing engine may determine a hotel based on the transit transaction data. The processing engine may subsequently send the transit transaction data or a portion of the transit transaction data to the hotel associated with the portable device. Upon receiving the data from the processing engine the hotel may place a transit charge onto the hotel customer s bill or folio.

One embodiment of the invention is directed to a system comprising a processor and a computer readable medium coupled to the processor the computer readable medium comprising code executable by the processor for implementing a method comprising receiving transit transaction data determining a hotel based on the transit transaction data and sending the transit transaction data to the hotel wherein the hotel places a transit charge based on the transit transaction data onto a hotel folio.

Another embodiment of the invention is directed to a method the method comprising receiving transit transaction data determining a hotel based on the transit transaction data and sending the transit transaction data to the hotel wherein the hotel places a transit charge based on the transit transaction data onto a hotel folio.

One embodiment of the present invention is directed to a method. In the method a hotel via a hotel management system temporarily activates a payment application embedded in or on a portable device assigned to a customer. A portable device may be any suitable device such as a room key card payment card payroll card security card access card smart media transponder cellular phone personal digital assistant tablet device pager access device key fob and the like. During activation the portable device may be preloaded with a stored value. The stored value may represent a preloaded monetary amount or number of transit trips. The portable device may further include a maximum per period value. Upon activation of the payment application a customer may use the portable device to purchase a transit fare from a transit system during his or her hotel stay. More specifically a customer may present his or her assigned portable device to a first access control device situated at an entrance of the transit system. By presenting the portable device to the first access control device the customer may cause a first data transfer to be initiated. In particular data may be communicated from the portable device to the first access control device. Upon receiving the data from the portable device the first access control device may validate the portable device. For example the first access control device may determine whether the portable device is on a transit system blacklist. The first access control device may also determine if the portable device contains a sufficient amount of funds or number of rides. The first access control device may further determine if the portable device has been used to purchase fare or a number of rides that exceeds a maximum per period value. Upon a successful validation the first access control device allows the customer to enter the transit system. After finishing his or her trip the customer presents the portable device to a second access control device situated at an exit of the transit system. By presenting the portable device to the second access control device the customer may cause a second data transfer to be initiated. In particular data may be communicated from the portable device to the second access control device. Upon receiving the data from the portable device the second access control device may perform a second validation. Upon a successful validation the second access control device allows the customer to exit the transit system. A transit fare may additionally be determined for the customer s trip. Transit transaction data including the transit fare amount may be then sent to a processing engine. The processing engine processes the transit transaction data to determine a hotel associated with the portable device. The processing engine subsequently sends the transit transaction data or portion of the transit transaction data to the hotel associated with the portable device. Upon receiving the transit transaction data the hotel places a transit charge onto the customer s folio. Finally at check out or at some later time the customer settles his or her folio with the hotel.

Embodiments of the present invention provide several advantages. First embodiments permit various proprietary systems to communicate with one another. In particular hotel management systems and transit systems are often proprietary and do not have the ability to interact with one another. Embodiments can include various application programming interfaces APIs that can be utilized to facilitate communication between various systems.

Embodiments of the present invention additionally provide benefits to hotel customers hotels and transit operators. For instance hotel customers receive the convenience of being able to utilize local transit for the duration of their stay without having to waste time effort or money trying to learn how to purchase fare media cards. Additionally hotel customers benefit by having many of their transit related questions answered by hotel personnel. In particular hotel customers are frequently from other countries and may not speak the local language. Embodiments of the invention enable hotel clerks and concierge who are often fluent in a hotel customer s home country language to explain local transit systems. Embodiments also enable customers to use transit systems without having to prepay a certain minimum amount. As discussed many transit operators require that riders purchase prepaid fare media cards loaded with a minimum number of rides or fare. In many cases the minimum number of rides or fare exceeds the number of rides or fare that a hotel customer actually needs. Because embodiments do not require hotel customers to prepay a minimum amount transit usage by hotel customers may become more likely. Lastly embodiments permit hotel customers to conveniently pay for their transit and hotel related charges on a single folio or bill. By making it more convenient to pay for transit embodiments further promote transit usage among out of town visitors.

Embodiments of the present invention also provide advantages to hotels. In particular hotels benefit through being able to provide an added value service and convenience to their customers. Additionally embodiments enable hotels to earn commission from local transit operators for providing portable devices with payment applications to their customers. Hotels may also add a surcharge on a customer s hotel folio for the added convenience.

Likewise transit operators may benefit by increasing their potential ridership from out of town visitors. Such an increase may improve sales and asset utilization. Embodiments are particularly beneficial in the case of tourists who often ride at off peak times outside of rush hour. During these off peak times transit assets are normally under utilized. Transit operators also benefit from not needing to provision customer service to out of town visitors. Provisioning such services may be difficult and expensive particularly where out of town visitors do not speak the local language. Finally transit operators do not need to furnish out of town visitors with credentials or transit application fare media. For local transit operators furnishing such fare media to temporary riders is often not financially viable.

While embodiments described herein are directed to hotels and transit systems it should be appreciated that one of ordinary skill in the art could modify the invention to be directed to non hotel and non transit system contexts. Other contexts may include for example museums amusement parks concerts plays historical venues and the like. For instance embodiments of the invention may be modified without departing from the spirit and scope of the invention to enable museum admission charges to be placed onto a single hotel bill. As another example embodiments of the invention may be modified without departing from the spirit and scope of the invention to enable amusement park admission charges to be placed onto a travel concierge services bill.

Although one customer one customer payment card one hotel management system one transit payment system one portable device and one processing engine are shown there may be any suitable number of any of these entities in the portable device payment processing system .

The above described components can be in operative communication with each other and or may be operatively coupled to each other in any suitable manner. The transit payment system and the hotel management system can communicate through processing engine . In certain embodiments the various entities shown in may communicate through any suitable communication medium including networks such as the Internet.

Customer can refer to a hotel guest and or a transit system patron. The customer can also refer to a patron of other service providers such as a museum or amusement park.

Customer payment card can refer to a credit card debit card or prepaid card provided to the customer by an issuer. In other embodiments the customer payment card could alternatively be in a different form such as a phone or key fob.

Portable device can refer to any suitable device for communicating with an access control device. The portable device can be hand held and compact so that it can fit into a user s wallet and or pocket e.g. pocket sized . Examples of the portable device can include room key cards payment cards payroll cards security cards access cards smart media transponders cellular phones personal digital assistants tablet devices pagers access devices key fobs and the like. The portable device may interface with an access control device using any suitable mechanism including any suitable electrical magnetic or optical interfacing system. For example portable device may include a physical interface such as a magnetic stripe or set of contacts that enables communication with a magnetic stripe reader of an access control device. Specifically in order for the portable device to communicate with such an access control device the physical interface of the portable device must directly contact the magnetic stripe reader of the access control device. As a second example the portable device may communicate with an access control device via a contactless element. More specifically communication may occur between the portable device and the access control device by placing the portable device in proximity to the access control device. Communication may be facilitated using near field or any similar short range communications technology. Near field communications technology may include ISO standard 14443 Bluetooth RFID or other radio frequency RF technologies.

In certain embodiments the portable device may include both a physical interface for communicating with an access control device via direct contact and a contactless element for communicating with an access control device without the need for direct contact. For example the portable device may include a magnetic stripe for direct contact communication with an access control device situated on or near the entrance of a hotel room. The portable device may additionally include a contactless element for communicating using RF technology. Illustratively the portable device may include a contactless element for communicating with an access control device situated at the entrance of a transit system. In some embodiments the portable device may include either only one type of interface e.g. either a physical interface or contactless element .

In some embodiments the portable device may include any suitable volatile and or non volatile memory to store data such as hotel data transit data customer data application data portable device data and the like.

In some embodiments the portable device may include a microprocessor. The microprocessor may perform certain functions such as changing updating resetting or otherwise manipulating data stored in the portable device s memory.

In certain embodiments the portable device may include multiple applications capable of performing one or more functions. For example the portable device may include a hotel room key application for opening a hotel room. The portable device may additionally include a payment application for use with a transit system. As another example the portable device may include two different payment applications for use with two different transit systems. In certain embodiments an application may be any suitable computer program. In some embodiments the various applications may be proprietary and not capable of communicating with one another. In certain embodiments an application may use a communications interface and any suitable data for performing an application function. For example a payment application may use a contactless element for interfacing with a transit payment system. The payment application may further include identification data for use in purchasing transit fare. In some embodiments different applications may share the same communications interface. The data for each application however may be separated from the data of other applications.

The portable device may additionally include a magnetic stripe for physically interfacing with access control devices. The magnetic stripe may be embedded in or on the plastic substrate . The exemplary portable device may also comprise a microprocessor not shown coupled to a data storage element .

Hotel management system can refer to any suitable entity or entities that can manage hotel reservations portable devices and hotel folios. In some embodiments the hotel management system may include a hotel reservation module a customer hotel bill management module and a room key card management module each not shown . Hotel management system may further include a hotel management server computer not shown . The hotel management server computer may be a powerful computer or cluster of computers. For example the hotel management server computer can be a large mainframe a minicomputer cluster or a group of servers functioning as a unit. In one example the server computer may be a database server coupled to a web server. The hotel management server computer may be configured to temporarily activate portable devices. For example the hotel management server computer may activate the portable device to allow the portable device to perform transit fare purchases. The hotel management server computer may further be configured to cancel or reconfigure portable devices for new customers. For instance when a customer checks out a hotel may reassign the portable device to another customer. The hotel management server computer may further receive data from the processing engine and place associated transit charges onto the hotel folio or bill of a customer.

Processing engine can refer to any suitable entity or entities that can track and manage the linkage and activation of portable devices. The processing engine can further refer to any suitable entity or entities that can receive transit transaction data process transit transaction data and transmit the transaction data or a portion of the transaction data to a hotel. In some embodiments the processing engine may manage interfaces to a multitude of different hotel management and transit payment systems. The processing engine may further be configured to process transit transactions in a variety of currencies and transit payment schemes. The processing engine may further be configured to govern any charges and commissions related to a transit transaction. The processing engine may additionally be configured to track and reconcile any fee income generated in order to facilitate billing and reporting functions.

In some embodiments the processing engine may have or operate a server computer and may include a database.

In some embodiments the processing engine may be hosted within a payment processing network. As used herein a payment processing network can refer to a network of suitable entities that support and deliver authorization services exception file services and clearing and settlement services for transactions. An exemplary payment processing network may include VisaNet . Payment processing networks such as VisaNet are able to process credit card transactions debit card transactions prepaid card transactions and other types of commercial transactions. VisaNet in particular includes a VIP system Visa Integrated Payments system which processes authorization requests. VisaNet further includes a Base II system which performs clearing and settlement services.

Transit payment system can refer to any suitable entity or entities that process transit transactions for and control access to a transit system. Transit transactions may include for example the purchase of transit fare. Transit systems may include for example subway systems train systems ferry systems bus systems and the like. In some embodiments the transit payment system may be a transit proprietary closed loop clearing system. The transit payment system may include a transit server computer and one or more access control devices.

In certain embodiments transit payment system may include the access control devices and and the transit server computer .

Access control devices and can refer to any suitable devices that control access to a transit system. In some embodiments the access control devices and may be situated respectively at an entrance gate and an exit gate of a transit system. In certain embodiments first access control device may validate the portable device prior to allowing a customer to enter the transit system. In some embodiments second access control device may validate the portable device prior to allowing a customer to exit the transit system. Access control devices and may each include a portable device reader a processor and a computer readable medium. The portable device reader may include any suitable contact or contactless mode of operation. For example in some embodiments each of the access control devices and may include a magnetic stripe reader to read a magnetic stripe on the portable device . In another example each of the access control devices and may include a contactless portable device reader with a radio frequency RF antenna for communicating with the portable device using RF technology e.g. RFID .

Transit server computer can refer to a powerful computer or cluster of computers. For example the transit server computer can be a large mainframe a minicomputer cluster or a group of servers functioning as a unit. In one example the transit server computer may be a database server coupled to a web server. The transit server computer can include a computer readable medium CRM and a processor both not shown coupled to the CRM.

In certain embodiments processing engine may include the server computer the database and the application programming interfaces and .

Server computer can refer to a powerful computer or cluster of computers. For example the server computer can be a large mainframe a minicomputer cluster or a group of servers functioning as a unit. In one example the server computer may be a database server coupled to a web server. The server computer includes a computer readable medium CRM and a processor coupled to the CRM both not shown .

Database can refer to one or more server computers for storage of data. It can also refer to one or more electronic storage units e.g. stand alone hard drives capable of storing electronic data.

Application programming interface API can refer to an interface that facilitates communication between a transit payment system and a processing engine. The application programming interface may include suitable specifications for communication protocols routines and data structures.

Application programming interface API can refer to an interface that facilitates communication between a hotel management system and a processing engine. The application programming interface may include suitable specifications for communication protocols routines and data structures.

As shown in the hotel activates the portable device using hotel management system step . Next the customer presents the portable device to the first access control device which is situated at an entrance of a transit system step . Upon being presented with the portable device the first access control device receives data from the portable device via a first data transfer step . The received data is used to validate the portable device and or the customer step . If the portable device and or the customer are validated the customer is granted access to the transit system and may begin using the system steps and . After customer finishes using the transit system he or she exits the system by presenting the portable device to the second access control device which is situated at an exit of the transit system step . Data is received from the portable device via a second data transfer and a second validation process is initiated steps and . If the portable device and or the customer are validated the customer is permitted to exit the transit system step . A transit fare amount for the customer s transit trip is additionally determined step . After the transit fare amount is determined transit transaction data is sent to the processing engine . Upon receiving the transit transaction data step the processing engine determines a hotel associated with the portable device based on the transit transaction data step . Next the processing engine sends the transit transaction data or a portion of the transit transaction data to a hotel management system i.e. the hotel management system associated with the hotel step . Upon receiving the data from the processing engine the hotel management system determines a customer s folio i.e. customer s folio based on the received data step . A transit charge is then placed on the customer s hotel folio step . Finally the customer settles the charges on the customer s folio which may include both transit and hotel related charges step .

Embodiments can include any suitable combination of the steps discussed or shown in . For example some embodiments can be directed to a method including steps and without the other illustrated steps. 

Typically the customer begins by checking in at a hotel. As part of the check in process the hotel via hotel management system provisions the portable device so that the device can be used to access a hotel room assigned to the customer . The portable device may be for example a hotel room key card. During the provisioning process a processor which executes code on a computer readable medium in the hotel management system may provision the portable device in any suitable manner. For example the portable device may include a magnetic stripe. The hotel management system may encode information onto the magnetic stripe so that the customer can enter his or her assigned hotel room by swiping the portable device at an access control device near or attached to his or her hotel room door. In other embodiments the hotel management system may simply store hotel room access information on a server computer without encoding new information on the portable device . In such embodiments the server computer may simply indicate that a particular portable device identifier e.g. number is granted access to a particular room in the hotel and the access control device e.g. lock to that room may be correspondingly notified or changed without writing new information to the portable device .

During check in or at a later time the customer may additionally indicate that he or she wishes to use the portable device to purchase transit fare for a transit system associated with the transit payment system . In some embodiments the hotel via hotel management system may subsequently activate the portable device so that the device can be used to purchase transit fare from the transit payment system step of . Activation of the portable device may include activating a payment application embedded in or on the portable device . The payment application may be configured for use with the transit payment system . For example a room key card issued at a London hotel may include a proprietary contactless payment application for use with the Transport for London s proprietary transit payment system.

In some embodiments as part of activation the customer may additionally provide the customer payment card to the hotel to cover any transit charges that are incurred during the customer s stay. The customer payment card may be for example a credit debit or prepaid card.

In certain embodiments the hotel initiates a preauthorization process to place a hold on an account associated with the customer payment card . The hold may be in an amount for the estimated transit charges that the customer might incur during his or her hotel stay. In certain embodiments the preauthorization hold amount may be determined based on various factors including the transit system type e.g. subway ferry bus etc. customer type tourist business etc. the amount the customer incurred during previous hotel stays standard operating procedures for the hotel and the like. In certain embodiments the preauthorization hold amount may include other estimated charges. For example the preauthorization hold amount may include an estimate for the customer s total incidental charges.

The preauthorization process may include sending a preauthorization request. For example a preauthorization request message including the hold amount may be sent to an issuer of the payment card at a POS terminal operated by the hotel and a response to that preauthorization request message may be received at the POS terminal operated by the hotel. In such cases the preauthorization request message may contain information that is in a typical payment card authorization request message such as an expiration date for the payment card a CVV or card verification value an account number including a bank identification number a service code and a merchant category code.

In certain embodiments the hotel via the hotel management system may set an initial stored value for the payment application embedded in or on the portable device . In some embodiments the stored value may be stored on the memory embedded in or on the portable device . In other embodiments the stored value may be stored on a central server computer without encoding any new information onto the portable device . For example the initial stored value may be sent to the transit server computer of the transit payment system . The transit server computer may then simply perform processing based on the stored value without writing new information to the portable device .

The stored value may represent any suitable value. In some embodiments the stored value may be a monetary value. In certain embodiments the stored value may be any suitable portion of the total preauthorization amount. For instance if the preauthorization amount is 100 dollars the stored value may be 20 dollars. As another example if the preauthorization amount is 20 dollars the stored value may also be 20 dollars.

In certain embodiments the stored value may represent a total number of transit trips. For example the stored value may indicate that the customer may make 10 total transit trips.

In certain embodiments the hotel via the hotel management system may additionally set a maximum per period value for the payment application embedded in or on the portable device . For example if the maximum per period value is set to 100 dollars then the portable device cannot be used to purchase in excess of 100 dollars in transit fare each period. In this way if the portable device is lost or stolen the amount of any fraudulent purchases can be limited. A maximum per period value may be set for any suitable period. For instance a maximum per period value may be set on a daily hourly monthly or yearly basis. The maximum per period value may also be of any suitable value such as a monetary value or a value representing a number of transit trips. In some embodiments the maximum per period value may be stored on the memory embedded in or on the portable device . In other embodiments the maximum per period value may be stored on a central server computer without encoding any new information onto the portable device . For example the maximum per period value may be sent to the transit server computer of the transit payment system . The transit server computer may then perform processing based on the maximum per period value without writing new information to the portable device .

In some embodiments the hotel via the hotel management system may reset change or update the stored value and or maximum per period value at a later time. For example the customer may subsequently request that the stored value be raised so that he or she can make additional transit trips. In response the hotel via hotel management system may update the stored value accordingly.

In some embodiments activation of the portable device may be an online process. More specifically the hotel management system may send an activation request to the processing engine . An activation request may include any relevant data including hotel identifiers portable device identifiers payment application identifiers stored values maximum per period values transit system identifiers and or the like. For instance an activation request may include a multi byte payment application identifier such as the 7 byte UID used in MiFare based contactless payment systems. The activation request may further be formatted to the specifications of the application programming interface associated with the processing engine and or the hotel management system . For example the activation request may be required to be formatted in extensible markup language XML .

Upon receiving the activation request a processor which executes code on a computer readable medium in the server computer of the processing engine may begin a process of activating the portable device for use with a transit system.

In some embodiments the server computer may associate the portable device with the requesting hotel based on the data included in the activation request. For example the server computer may associate identification data for the portable device e.g. identifier for the portable device and or identifier for a payment application embedded in or on portable device with the requesting hotel. In other embodiments an association between the portable device and the requesting hotel may have been previously established. For example an association may have been established if the portable device was preregistered with the processing engine at an earlier time.

In some embodiments the server computer may additionally identify a transit system for which the portable device is to be activated. In some embodiments the server computer may identify the transit system based on the data included in the activation request. For instance the server computer may determine based on a transit system identifier that the portable device is to be activated for use with a local subway system. The processing engine may subsequently send relevant data to a transit payment system e.g. transit payment system associated with the subway system so that the portable device can be activated for purchasing transit fare. The sent data may be formatted to the specifications of the application programming interface associated with the processing engine and or the transit payment system . For example the data may be required to be formatted in XML.

In some embodiments the server computer may store the data associated with the activation of the portable device in database . For example the server computer may cause the database to store a record including data associating the portable device with a transit system and a hotel.

In certain embodiments activation may occur in an offline manner. In particular the hotel management system may activate the portable device without communicating with the processing engine . For example the hotel management system may set an activation value for a payment application embedded in or on the portable device . The activation value may indicate that the payment application is currently active and that the portable device may be used to purchase transit fare.

After activation of the portable device either online or offline the customer may use the portable device to purchase transit fare and access a transit system.

In some embodiments the portable device may additionally include other applications for other non hotel services and transit operators. In some embodiments multiple applications may be active at the same time. For example the portable device may include a payment application for a local subway system and another payment application for a local bus system. Both payment applications may be active at the same time so that the customer can use the portable device can be activated for purchasing fare for both the subway and bus systems.

In certain embodiments the portable device payment processing system may enable the customer to purchase transit fare using the portable device . In some embodiments the purchase of transit fare may include a first data transfer and first validation a second data transfer and second validation and a calculation of a transit fare amount.

In a typical scenario the customer presents portable device to the first access control device of the transit payment system prior to entering a transit system step of . The first access control device may be situated at the entrance gate of the transit system. The portable device may be presented to the first access control device by being swiped waved passed nearby momentarily placed in contact with e.g. tapped against or simply placed in close proximity to the first access control device . Presenting the portable device to the first access control device initiates a first data transfer between the portable device and the first access control device . For example presenting the portable device may cause a proprietary contactless payment application embedded in or on the portable device to initiate a data transfer via a near field communications technology. More specifically the contactless payment application may use a contactless element to initiate the data transfer. In some embodiments data may be sent by the portable device and received by the first access control device step of . Data received from the portable device may include a unique identifier for the payment application embedded in or on the portable device a unique identifier for the portable device a unique identifier for the hotel associated with the portable device a current stored value a maximum per period value and or the like. Data received from the portable device may further include authentication information. Authentication information may include for example certain bits of information such as encrypted authentication keys.

In certain embodiments the transfer of data between the portable device and the first access control device may initiate a validation process step of . In some embodiments the validation process may be an offline process that is performed by the transit payment system . For example validation may be performed by the first access control device or the transit sever computer of the transit payment system . In other embodiments the validation process may be an online process in which data received from the portable device is sent to the server computer of the processing engine . The server computer may then validate the portable device based on the received data.

During validation the portable device may be authenticated. In some embodiments authentication may include determining whether the portable device is genuine or authentic. For example in certain embodiments the first access control device may check that some characteristic of the portable device such as an encrypted authentication key has a desired value or is present. Authentication may further involve determining whether the portable device is on a blacklist i.e. not acceptable to use for purchasing transit fare . For example the portable device may currently be on a blacklist because the customer did not previously activate the portable device. As another example the portable device may have been stolen or lost and thereafter placed on a blacklist to prevent fraudulent transit transactions.

In certain embodiments validation may further include determining whether the stored value for the payment application embedded in or on the portable device is equal to or greater than a threshold value. In some embodiments the threshold value may represent the minimum cost of a trip on the transit system. For example if the minimum cost of transit fare is 3 dollars the threshold value may accordingly be set to 3 dollars. Thus if the portable device only has a stored value of 2 dollars the portable device is considered not to be valid. In certain embodiments the threshold value may represent the maximum cost of a trip on the transit system.

In other embodiments validation may include determining whether the stored value for the payment application embedded in or on the portable device is a number greater than zero. In particular the stored value may represent a number of remaining transit trips. In such embodiments a stored value greater than zero would indicate that the portable device can be used to purchase transit fare.

In certain embodiments validation may further include determining whether the portable device has been used to make fare or ride purchases in excess of a maximum per period value. For example the payment application embedded in or on portable device may be limited to 100 dollars of purchases per day. During validation the first access control device may determine that the portable device has been used to purchase in excess of 100 dollars in fare. As a result the portable device is not validated. As a second example the portable device may be limited to 10 transit trips per day. During validation the first access control device may determine that the portable device has already been used to purchase 10 rides for the day. As a result the portable device is not validated. In some embodiments information providing a fare purchase history or aggregate purchase value may be used to compare against the maximum per period value. For example a purchase history may be accessed from a central server computer such as the transit server computer to determine the value of fare purchases made using the portable device for a given period ending at the time of validation. As another example an aggregate purchase value may be received from the portable device to determine the aggregate value of fare purchases made using the portable device for a given period ending at the time of validation.

In certain embodiments the stored and maximum per period values may be provided as discussed above by the data received from the portable device . In other embodiments the stored and maximum per period values may be accessed from a central server computer such as the transit server computer . For example based on the portable device s identifier and or payment application identifier the stored and maximum per period values may be retrieved by the transit server computer .

If validation of the portable device is unsuccessful the customer is denied access to the transit system and may be advised to request assistance in resolving the problem from a representative of the transit system. If validation of the portable device is successful the customer is permitted to access the transit system step of . In some embodiments the first access control device communicates with the transit server computer to inform the transit server computer that the portable device has entered the transit system. In particular the first access control device may provide to the transit server computer an identifier for the portable device and or an identifier for the payment application embedded in or on the portable device .

After entering the transit system the customer may begin using the system such as by boarding a transit vehicle e.g. a bus train trolley ferry and or the like step of .

At step the customer completes his or her use of the transit system and prepares to exit the system by presenting the portable device to the second access control device of the transit payment system . The second access control device may be situated at an exit of the transit system. As was the case upon entry to the transit system the portable device may be presented to the second access control device by being swiped waved passed nearby momentarily placed in contact with e.g. tapped against or simply placed in close proximity to the second access control device . Presenting the portable device to the second access control device initiates a second data transfer between the portable device and the second access control device . In particular the second access control device may receive data from the portable device step of .

After receiving data from the portable device the second access control device may perform a second validation operation step of . This is done to ensure that portable device is still valid e.g. it has not been deactivated because of being reported stolen suspected of being fraudulent and or the like . In some embodiments the second validation process may be an offline process that is performed by transit payment system . In particular validation may be performed by the second access control device or the transit sever computer of the transit payment system . In other embodiments the second validation process may be an online process in which data received from the portable device is sent to the server computer of the processing engine . The server computer may then validate the portable device based on the data.

If validation of the portable device is unsuccessful the customer is not permitted to exit the transit system and may be advised to request assistance in resolving the problem from a representative of the transit system. If validation of the portable device is successful the customer is permitted to exit the transit system step of .

In certain embodiments the presentation of the portable device to the second access control device may additionally cause the determination of a fare for the customer s trip step of . For example the second access control device may send data received from the portable device to the transit server computer . The data may include an identifier for the portable device and or an identifier for the payment application embedded in or on the portable device . Upon receiving the data the transit server computer may determine the fare for the customer s trip by determining that the identification data provided by the second access control device was first provided by the first access control device . Based on the transit system entrance gate and transit system exit gate the transit server computer can apply relevant fare schedules discounts and the like to calculate a fare amount for the customer s trip.

In some embodiments the stored value for the payment application embedded in or on portable device may additionally be changed updated or reset. For instance the stored value may currently be 20 dollars. If the calculated transit fare is 5 dollars the stored value may be reduced to 15 dollars. As another example the stored value may currently indicate 5 remaining transit trips. Upon exiting the transit system the stored value may be changed to indicate 4 remaining transit trips. In some embodiments an updated stored value may be written to the memory embedded in or on the portable device . In other embodiments an updated stored value may be recorded by a central server computer such as the transit server computer . As a result the updated stored value may not be written to the memory embedded in or on the portable device .

Upon determination of a transit fare the transit payment system may send transit transaction data to the processing engine . In certain embodiments the transit payment system may save or log the transit transaction.

In some embodiments the portable device payment processing system may process the transit transaction data. In certain embodiments the processing engine may perform processing of the transit transaction data. Processing may include receiving the transit transaction data. Processing may further include determining a hotel based on the transit transaction data and sending the transit transaction data or a portion of the transit transaction data to a hotel management system associated with the hotel.

At step the processing engine receives transit transaction data for the customer s transit trip from the processing engine . In some embodiments the processing engine may receive transit transaction data in substantially real time to the time the customer presents the portable device to the second access control device . In other embodiments the processing engine may receive the transit transaction data in a batch file at a later time. The transit transaction data may include any relevant data for placing a transit charge onto the folio of the customer . For example the transit transaction data may include the total fare amount for the customer s transit trip. The transit transaction data may further include data received from the portable device . Data received from the portable device may include an identifier for the payment application embedded in or on the portable device an identifier for the portable device an identifier for the transit payment system an identifier for an associated hotel and the like. The transit transaction data may further be received according to the specifications of the application programming interface associated with the processing engine and or the transit payment system . For example the application programming interface may require that any data received by the processing engine from the transit payment system be formatted in XML.

After receiving the transit transaction data the processing engine may determine a hotel based on the transit transaction data step of . The processing engine may determine a hotel through any suitable manner. For instance in some embodiments a processor which executes code on a computer readable medium in the server computer may access the database to determine a hotel associated with the identification data for the portable device e.g. portable device identifier and or payment application identifier included in the transit transaction data. Illustratively the server computer may locate a record stored in the database with a value matching a payment application identifier provided by the transit transaction data. The located record may include a hotel identifier for a hotel associated with the payment application identifier. In certain embodiments the transit transaction data may already include a hotel identifier. As a result determining a hotel through accessing the database may not be necessary. The hotel identifier may be in any suitable format and of any suitable value. For example the hotel identifier may be a unique numerical code that can be used to identify a hotel. As another example the hotel identifier may be an internet protocol address that corresponds to the internet protocol address of a hotel management system associated with a hotel.

In some embodiments the server computer may additionally calculate any commissions that might apply based on the transit transaction data. For example a commission may be calculated based on the identified hotel. More specifically the server computer may calculate a commission for the hotel using a preset commission percentage associated with the hotel. The commission may be based on any suitable commission percentage or fixed amount.

In some embodiments the server computer may further save log or record the transaction in database in order support and or provide related services. For example transaction data may be used to track and reconcile the total fee income generated for all entities e.g. hotels and transit systems . Such tracking and reconciling may be further used to facilitate billing and reporting functions.

The processing engine may additionally send the transit transaction data or a portion of the transit transaction data to the hotel management system i.e. the hotel management system of the hotel associated with the portable device step of . The data may be sent according to the specifications of the application programming interface associated with the processing engine and or the hotel management system . For example the application programming interface may require that any data sent from the processing engine to the hotel management system be formatted in XML.

Upon receiving the data from the processing engine the hotel management system may automatically determine a customer s folio i.e. the customer s folio on which a transit charge is to be placed step of . The hotel management system for example may determine based on identification data e.g. portable device identifier and or payment application identifier included in the data provided by the processing engine that the portable device is currently assigned to the customer . As a result the hotel management system may place a transit charge onto the folio of the customer step of . shows an exemplary hotel folio according to embodiments of the present invention. The folio shown in includes charges for hotel purchases e.g. room service in room movie and transit fare purchases e.g. subway and hotel fare .

At or after the end of the customer s stay the customer may initiate a check out process. During the check out process the customer may settle both his or her hotel related charges such as hotel restaurant bills room service charges and the like and transit charges at the same time step of . The customer may settle his or her charges using any suitable method. For example the customer may settle his or her charges with cash. As another example the customer may settle his or her charges with the customer payment card . In particular the customer may provide the customer payment card to the hotel. Upon being provided with the customer payment card the hotel may send an authorization request message to an acquirer e.g. bank associated with the hotel. The authorization request message may be sent by a POS terminal operated by the hotel. In such cases the authorization request message may contain information such as an expiration data for the customer payment card a CVV or card verification value an account number including a bank identification number a service code and a merchant category code. If the hotel previously placed a preauthorization hold on the account associated with the customer payment card the authorization request message may additionally indicate that the preauthorization hold be converted. Upon receiving the authorization request message the acquirer may in turn send the authorization request message to a payment processing network such as VisaNet . The payment processing network may then forward the authorization request message to the issuer e.g. bank of the customer payment card . After the issuer receives the authorization request message the issuer sends an authorization response message back to the payment processing network to indicate whether or not the current transaction is authorized. The payment processing network then forwards the authorization response message to the hotel via the hotel s acquirer. The hotel subsequently receives the authorization response message at a POS terminal operated by the hotel.

In some embodiments because the hotel management system obtains both payment card information hotel related purchase information and transit fare purchase information the hotel or any suitable third party may combine the loyalty points or rewards associated with any of these purchases in any suitable manner to provide benefits. For example in some embodiments the hotel may provide loyalty points for transit purchases and also for use of a particular payment card. Such points may be greater than what would be accrued if purchases were made separately. By allowing a hotel guest to combine points the hotel may encourage their guests to purchase transit system fare using a hotel assigned portable device.

In certain embodiments funds may be transferred among various entities in order to pay for the customer s transit trip.

In certain embodiments the processing engine may initiate a first transfer of funds to the transit system in order to pay for the customer s transit fare. In some embodiments the funds may be transferred from an account associated with the operator of the processing engine . The hotel may thereafter initiate a transfer of funds for the amount of the transit fare to the operator of the processing engine . For example the hotel may initiate the transfer of funds to the operator of the processing engine after the customer has settled his or her hotel folio.

In other embodiments the hotel may initiate a transfer of funds to pay for the customer s transit fare the transit fare directly to the transit system. For example the hotel may transfer funds to the transit system after settlement by the customer .

The transfer of funds may occur in any suitable manner. For example the processing engine may initiate a transfer of funds to the transit system via an original credit transfer. As another example the hotel may directly send a check to the transit system for the transit fare amount. Fund transfer may further occur at any suitable time. For example the transfer of funds may occur during a customer s transit ride at the time the customer exits the transit system at the time the customer settles his or her hotel folio or any time period thereafter.

The various participants and elements described herein with reference to may operate one or more computer apparatuses to facilitate the functions described herein. Any of the elements in including any servers or databases may use any suitable number of subsystems to facilitate the functions described herein.

Examples of such subsystems or components are shown in . The subsystems shown in are interconnected via a system bus . Additional subsystems such as a printer keyboard fixed disk or other memory comprising computer readable media monitor which is coupled to display adapter and others are shown. Peripherals and input output I O devices which couple to I O controller which can be a processor or other suitable controller can be connected to the computer system by any number of means known in the art such as serial port . For example serial port or external interface can be used to connect the computer apparatus to a wide area network such as the Internet a mouse input device or a scanner. The interconnection via system bus allows the central processor to communicate with each subsystem and to control the execution of instructions from system memory or the fixed disk as well as the exchange of information between subsystems. The system memory and or the fixed disk may embody a computer readable medium.

Embodiments of the invention are not limited to the above described embodiments. For example although separate functional blocks are shown for hotel management systems a processing engine and transit payment systems some entities perform all of these functions and may be included in embodiments of invention.

Specific details regarding some of the above described aspects are provided above. The specific details of the specific aspects may be combined in any suitable manner without departing from the spirit and scope of embodiments of the invention. For example data processing validation activation and other transactions may all be combined in some embodiments of the invention. However other embodiments of the invention may be directed to specific embodiments relating to each individual aspect or specific combinations of these individual aspects.

It should be understood that the present invention as described above can be implemented in the form of control logic using computer software stored in a tangible physical medium in a modular or integrated manner. Based on the disclosure and teachings provided herein a person of ordinary skill in the art will know and appreciate other ways and or methods to implement the present invention using hardware and a combination of hardware and software

Any of the software components or functions described in this application may be implemented as software code to be executed by a processor using any suitable computer language such as for example Java C or Perl using for example conventional or object oriented techniques. The software code may be stored as a series of instructions or commands on a computer readable medium such as a random access memory RAM a read only memory ROM a magnetic medium such as a hard drive or a floppy disk or an optical medium such as a CD ROM. Any such computer readable medium may reside on or within a single computational apparatus and may be present on or within different computational apparatuses within a system or network.

The above description is illustrative and is not restrictive. Many variations of the invention will become apparent to those skilled in the art upon review of the disclosure. The scope of the invention should therefore be determined not with reference to the above description but instead should be determined with reference to the pending claims along with their full scope or equivalents.

One or more features from any embodiment may be combined with one or more features of any other embodiment without departing from the scope of the invention.

A recitation of a an or the is intended to mean one or more unless specifically indicated to the contrary.

All patents patent applications publications and descriptions mentioned above are herein incorporated by reference in their entirety for all purposes. None is admitted to be prior art.

