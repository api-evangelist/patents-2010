---

title: Persisting file system information on mobile devices
abstract: A communication device and method are provided for storing and updating file system information for a network resource such as a content server or application server over a wireless connection. Data pertaining to a folder structure or content listing is received at the device and stored in persistent memory. Upon determination that the stored file system information has aged beyond a predetermined threshold and that a last modification time for the network resource is later than a time associated with the first file system information, a request is transmitted over a wireless connection for new file system information for the network resource. The request may be intercepted by a mobile data server that communicates with the network resource to provide the information to the communication device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08489725&OS=08489725&RS=08489725
owner: Research In Motion Limited
number: 08489725
owner_city: Waterloo
owner_country: CA
publication_date: 20101105
---
This application claims priority to U.S. Provisional Application No. 61 364 883 filed on 16 Jul. 2010 the entirety of which is incorporated herein by reference.

Mobile communication devices such as smartphones are increasingly used for productivity tasks beyond messaging and voice communication. For example users may be provided access via their mobile devices and a wireless network to corporate files and applications resident on content and application servers within the corporate local area network. Some communication of data between the mobile device and the corporate LAN however may sometimes be subject to delay due to message flow between the mobile device intermediary components in the corporate LAN other private or public network components and the content or application server.

The embodiments described herein provide a system method and a mobile device for managing and persisting cached file system information on a mobile communication device such as a smartphone. These embodiments will be described primarily in relation to a mobile wireless communication device such as a smartphone hereafter referred to as a communication device. It will be appreciated by those skilled in the art however that this description is not intended to limit the scope of the described embodiments to smartphones. The methods and systems described herein may be applied to any appropriate communication or data processing device adapted for communication over a network whether portable or not and whether adapted for voice communication or not including without limitation cellular phones smartphones wireless organizers personal digital assistants desktop computers terminals laptops tablets handheld wireless communication devices wirelessly enabled notebook computers and the like.

The embodiments described herein provide a communication device adapted to store and update file system information for a network resource the communication device comprising a wireless communication module a display a persistent memory and a processor in communication with the wireless communication module the display and the persistent memory the processor being configured to store in the persistent memory data comprising first file system information received via the wireless connection module for the network resource request using the wireless connection module new file system information for the network resource when it is determined that the first file system information has aged beyond a predetermined threshold and that a last modification time for the network resource is later than a time associated with the first file system information enable receiving data comprising the new file system information using the wireless connection module and store said data comprising the new file system information in the persistent memory. In a further aspect the request is carried out in response to a received refresh command.

In a further aspect the processor is further configured to enable receipt of a request for file system information at the network resource said request being associated with user credentials and wherein said user credentials are validated at the network resource prior to said receiving data comprising the new file system information.

In another aspect the processor is further configured to enable receipt of the last modification time for the network resource and to compare said last modification time with the time associated with the first file system information in response to a received request for file system information.

In still a further aspect the processor is further configured to enable display of at least a portion of the data comprising the new file system information at the communication device once received and alternatively or additionally to enable display of at least a portion of the stored data comprising the first file system information if it is determined that either the first file system information has not aged beyond the predetermined threshold or that the last modification time for the network resource is earlier than the time associated with the first file system information.

There is also provided a method for updating at a communication device file system information for a network resource the method comprising storing in persistent memory at the communication device data comprising first file system information received over a wireless connection for the network resource requesting over the wireless connection new file system information for the network resource when it is determined that the first file system information has aged beyond a predetermined threshold and that a last modification time for the network resource is later than a time associated with the first file system information receiving data comprising the new file system information over the wireless connection and storing said data comprising the new file system information in the persistent memory. In a further aspect the requesting is carried out in response to a received refresh command.

In a further aspect said requesting is carried out in response to a request at the communication device for file system information from the network resource the request being associated with user credentials and said user credentials are validated at the network resource prior to said receiving data comprising the new file system information.

In still a further aspect the communication device also receives the last modification time for the network resource and compares said last modification time with the time associated with the first file system information in response to a received request for file system information.

In yet a further aspect at least a portion of the data comprising the new file system information at the communication device is displayed once received. Alternatively or additionally at least a portion of the stored data comprising the first file system information is displayed if it is determined that either the first file system information has not aged beyond the predetermined threshold or that the last modification time for the network resource is earlier than the time associated with the first file system information.

In a further aspect of the above device and method the first file system information and the new file system information comprise at least one of an initial folder structure of the network resource and a content listing of the network resource.

In still a further aspect the network resource may be one of a content server a file server or an application server.

In yet a further aspect the data comprising the first file system information and the data comprising the new file system information may be received from a mobile data server in communication with the network resource. Further the mobile data server may receive file system information from the network resource in a first format and transmit the data comprising the first file system information and the data comprising the new file system information to the communication device in a second format.

There is also provided a computer readable medium comprising code executable by a processing device to carry out the foregoing method and variations.

The embodiments described herein may be implemented on a communication device such as that illustrated in . The communication device may communicate with other devices over a wireless communication system or enterprise system as illustrated in . The communication device may be a mobile device with two way communication and advanced data communication capabilities including the capability to communicate with other mobile devices or computer systems through a network of transceiver stations. The communication device can also have voice communication capabilities. Throughout the specification terms such as may and can are used interchangeably and use of any particular term should not be construed as limiting the scope or requiring experimentation to implement the claimed subject matter or embodiments described herein.

The communication subsystem receives messages from and sends messages to a wireless network . In this exemplary embodiment of the communication device the communication subsystem is configured in accordance with one or more of Global System for Mobile Communication GSM General Packet Radio Services GPRS standards Enhanced Data GSM Environment EDGE and Universal Mobile Telecommunications Service UMTS . New standards are still being defined but it is believed that they will have similarities to the network behavior described herein and it will also be understood by persons skilled in the art that the embodiments described herein are intended to use any other suitable standards that are developed in the future. The wireless link connecting the communication subsystem with the wireless network represents one or more different Radio Frequency RF channels operating according to defined protocols specified for GSM GPRS EDGE or UMTS and optionally other network communications. With newer network protocols these channels are capable of supporting both circuit switched voice communications and packet switched data communications.

Other wireless networks can also be associated with the communication device in variant implementations. The different types of wireless networks that can be employed include for example data centric wireless networks voice centric wireless networks and dual mode networks that can support both voice and data communications over the same physical base stations. Combined dual mode networks include but are not limited to Code Division Multiple Access CDMA or CDMA2000 networks GSM GPRS networks third generation 3G networks like EDGE HSPA HSPA EVDO and UMTS or fourth generation 4G networks such as LTE and LTE Advanced. Some other examples of data centric networks include WiFi 802.11 Mobitex and DataTAC network communication systems. Examples of other voice centric data networks include Personal Communication Systems PCS networks like GSM and Time Division Multiple Access TDMA systems. The mobile device may be provided with additional communication subsystems such as the wireless LAN WLAN communication subsystem also shown in . The WLAN communication subsystem may operate in accordance with a known network protocol such as one or more of the 802.11 family of standards developed by IEEE. The communication subsystem may be separate from or integrated with the communication subsystem or with the short range communications module . The main processor also interacts with additional subsystems such as a Random Access Memory RAM a flash memory a display an auxiliary input output I O subsystem a data port a keyboard a speaker a microphone the short range communications and other device subsystems .

Some of the subsystems of the communication device perform communication related functions whereas other subsystems can provide resident or on device functions. By way of example the display and the keyboard can be used for both communication related functions such as entering a text message for transmission over the network and device resident functions such as a calculator or task list.

A rendering circuit is included in the device . When a user specifies that a data file is to be viewed on the display the rendering circuit analyzes and processes the data file for visualization on the display . Rendering data files originally optimized or prepared for visualization on large screen displays on a portable electronic device display often requires additional processing prior to visualization on the small screen portable electronic device displays. This additional processing may be accomplished by the rendering engine . As will be appreciated by those of skill in the art the rendering engine can be implemented in hardware software or a combination thereof and can comprise a dedicated image processor and associated circuitry or can be implemented within main processor .

The communication device can send and receive communication signals over the wireless network after required network registration or activation procedures have been completed. Network access is associated with a subscriber or user of the communication device . To identify a subscriber the communication device requires a SIM RUIM card i.e. Subscriber Identity Module or a Removable User Identity Module to be inserted into a SIM RUIM interface in order to communicate with a network. The SIM RUIM card is one type of a conventional smart card that can be used to identify a subscriber of the communication device and to personalize the communication device among other things. Without the SIM RUIM card the communication device is not fully operational for communication with the wireless network . By inserting the SIM RUIM card into the SIM RUIM interface a subscriber can access all subscribed services. Services can include web browsing and messaging such as e mail voice mail Short Message Service SMS and Multimedia Messaging Services MMS . More advanced services can include point of sale field service and sales force automation. The SIM RUIM card includes a processor and memory for storing information. Once the SIM RUIM card is inserted into the SIM RUIM interface it is coupled to the main processor . In order to identify the subscriber the SIM RUIM card can include some user parameters such as an International Mobile Subscriber Identity IMSI . An advantage of using the SIM RUIM card is that a subscriber is not necessarily bound by any single physical mobile device. The SIM RUIM card can store additional subscriber information for a mobile device as well including datebook or calendar information and recent call information. Alternatively user identification information can also be programmed into the flash memory .

The communication device may be a battery powered device including a battery interface for receiving one or more rechargeable batteries . In at least some embodiments the battery can be a smart battery with an embedded microprocessor. The battery interface is coupled to a regulator not shown which assists the battery in providing power V to the communication device . Although current technology makes use of a battery future technologies such as micro fuel cells can provide the power to the communication device .

The communication device also includes an operating system and software components to which are described in more detail below. The operating system and the software components to that are executed by the main processor are typically stored in a persistent store such as the flash memory which can alternatively be a read only memory ROM or similar storage element not shown . Those skilled in the art will appreciate that portions of the operating system and the software components to such as specific device applications or parts thereof can be temporarily loaded into a volatile store such as the RAM . Other software components can also be included as is well known to those skilled in the art.

The subset of software applications that control basic device operations including data and voice communication applications will normally be installed on the communication device during its manufacture. Other software applications include a message application that can be any suitable software program that allows a user of the communication device to send and receive electronic messages. Various alternatives exist for the message application as is well known to those skilled in the art. Messages that have been sent or received by the user are typically stored in the flash memory of the communication device or some other suitable storage element in the communication device . In at least some embodiments some of the sent and received messages can be stored remotely from the device such as in a data store of an associated host system that the communication device communicates with.

The software applications can further include a device state module a Personal Information Manager PIM and other suitable modules not shown such as a file manager and explorer module. The device state module provides persistence i.e. the device state module ensures that important device data is stored in persistent memory such as the flash memory so that the data is not lost when the communication device is turned off or loses power.

The PIM includes functionality for organizing and managing data items of interest to the user such as but not limited to e mail contacts calendar events voice mails appointments and task items. A PIM application has the ability to send and receive data items via the wireless network . PIM data items can be seamlessly integrated synchronized and updated via the wireless network with the mobile device subscriber s corresponding data items stored and or associated with a host computer system. This functionality creates a mirrored host computer on the communication device with respect to such items. This can be particularly advantageous when the host computer system is the mobile device subscriber s office computer system.

The communication device also includes a connect module and an information technology IT policy module . The connect module implements the communication protocols that are required for the communication device to communicate with the wireless infrastructure and any host system such as an enterprise system that the communication device is authorized to interface with. Examples of a wireless infrastructure and an enterprise system are given in which are described in more detail below.

The connect module includes a set of Application Programming Interfaces APIs that can be integrated with the communication device to allow the communication device to use any number of services associated with the enterprise system. The connect module allows the communication device to establish an end to end secure authenticated communication pipe with the host system. A subset of applications for which access is provided by the connect module can be used to pass IT policy commands from the host system to the communication device . This can be done in a wireless or wired manner. These instructions can then be passed to the IT policy module to modify the configuration of the device . Alternatively in some cases the IT policy update can also be done over a wired connection.

Other types of software applications can also be installed on the communication device . These software applications can be third party applications which are added after the manufacture of the communication device . Examples of third party applications include games calculators utilities etc.

The additional applications can be loaded onto the communication device through at least one of the wireless network the auxiliary I O subsystem the data port the short range communications subsystem or any other suitable device subsystem . This flexibility in application installation increases the functionality of the communication device and can provide enhanced on device functions communication related functions or both. For example secure communication applications can enable electronic commerce functions and other such financial transactions to be performed using the communication device .

The data port enables a subscriber to set preferences through an external device or software application and extends the capabilities of the communication device by providing for information or software downloads to the communication device other than through a wireless communication network. The alternate download path can for example be used to load an encryption key onto the communication device through a direct and thus reliable and trusted connection to provide secure device communication. The data port can be any suitable port that enables data communication between the communication device and another computing device. The data port can be a serial or a parallel port. In some instances the data port can be a USB port that includes data lines for data transfer and a supply line that can provide a charging current to charge the battery of the communication device .

The short range communications subsystem provides for communication between the communication device and different systems or devices without the use of the wireless network . For example the subsystem can include an infrared device and associated circuits and components for short range communication. Examples of short range communication standards include standards developed by the Infrared Data Association IrDA Bluetooth and the 802.11 family of standards.

In use a received signal such as a text message an e mail message or web page download will be processed by the communication subsystem and input to the main processor . The main processor will then process the received signal for output to the display or alternatively to the auxiliary I O subsystem . A subscriber can also compose data items such as e mail messages for example using the keyboard in conjunction with the display and possibly the auxiliary I O subsystem . The auxiliary subsystem can include devices such as a touchscreen mouse track ball infrared fingerprint detector or a roller wheel with dynamic button pressing capability. The keyboard may be an alphanumeric keyboard and or telephone type keypad. However other types of keyboards can also be used. A composed item can be transmitted over the wireless network through the communication subsystem . It will be appreciated that if the display comprises a touchscreen then the auxiliary subsystem may still comprise one or more of the devices identified above.

For voice communications the overall operation of the communication device is substantially similar except that the received signals are output to the speaker and signals for transmission are generated by the microphone . Alternative voice or audio I O subsystems such as a voice message recording subsystem can also be implemented on the communication device . Although voice or audio signal output is accomplished primarily through the speaker the display can also be used to provide additional information such as the identity of a calling party duration of a voice call or other voice call related information.

Signals received by the antenna through the wireless network are input to the receiver which can perform such common receiver functions as signal amplification frequency down conversion filtering channel selection and analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission over the wireless network via the antenna . The DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter can be adaptively controlled through automatic gain control algorithms implemented in the DSP .

The wireless link between the communication device and the wireless network can contain one or more different channels typically different RF channels and associated protocols used between the communication device and the wireless network . An RF channel is a limited resource that should be conserved typically due to limits in overall bandwidth and limited battery power of the communication device . When the communication device is fully operational the transmitter is typically keyed or turned on only when it is transmitting to the wireless network and is otherwise turned off to conserve resources. Similarly the receiver is periodically turned off to conserve power until it is needed to receive signals or information if at all during designated time periods. Other communication subsystems such as the WLAN communication subsystem shown in may be provided with similar components as those described above configured for communication over the appropriate frequencies and using the appropriate protocols.

In a GSM network the MSC is coupled to the BSC and to a landline network such as a Public Switched Telephone Network PSTN to satisfy circuit switched requirements. The connection through the PCU the SGSN and the GGSN to a public or private network Internet also referred to herein generally as a shared network infrastructure represents the data path for GPRS capable mobile devices. In a GSM network extended with GPRS capabilities the BSC also contains the Packet Control Unit PCU that connects to the SGSN to control segmentation radio channel allocation and to satisfy packet switched requirements. To track the location of the communication device and availability for both circuit switched and packet switched management the HLR is shared between the MSC and the SGSN . Access to the VLR is controlled by the MSC .

The station is a fixed transceiver station and together with the BSC form fixed transceiver equipment. The fixed transceiver equipment provides wireless network coverage for a particular coverage area commonly referred to as a cell . The fixed transceiver equipment transmits communication signals to and receives communication signals from mobile devices within its cell via the station . The fixed transceiver equipment normally performs such functions as modulation and possibly encoding and or encryption of signals to be transmitted to the communication device in accordance with particular usually predetermined communication protocols and parameters under control of its controller. The fixed transceiver equipment similarly demodulates and possibly decodes and decrypts if necessary any communication signals received from the communication device within its cell. Communication protocols and parameters can vary between different nodes. For example one node can employ a different modulation scheme and operate at different frequencies than other nodes.

For all communication devices registered with a specific network permanent configuration data such as a user profile is stored in the HLR . The HLR also contains location information for each registered mobile device and can be queried to determine the current location of a mobile device. The MSC is responsible for a group of location areas and stores the data of the mobile devices currently in its area of responsibility in the VLR . Further the VLR also contains information on mobile devices that are visiting other networks. The information in the VLR includes part of the permanent mobile device data transmitted from the HLR to the VLR for faster access. By moving additional information from a remote HLR node to the VLR the amount of traffic between these nodes can be reduced so that voice and data services can be provided with faster response times and at the same time requiring less use of computing resources.

The SGSN and the GGSN are elements added for GPRS support namely packet switched data support within GSM. The SGSN and the MSC have similar responsibilities within the wireless network by keeping track of the location of each communication device . The SGSN also performs security functions and access control for data traffic on the wireless network . The GGSN provides internetworking connections with external packet switched networks and connects to one or more SGSNs via an Internet Protocol IP backbone network operated within the network . During normal operations a given communication device must perform a GPRS Attach to acquire an IP address and to access data services. This requirement is not present in circuit switched voice channels as Integrated Services Digital Network ISDN addresses are used for routing incoming and outgoing calls. Currently all GPRS capable networks use private dynamically assigned IP addresses thus requiring the DHCP server connected to the GGSN . There are many mechanisms for dynamic IP assignment including using a combination of a Remote Authentication Dial In User Service RADIUS server and a DHCP server. Once the GPRS Attach is complete a logical connection is established from a communication device through the PCU and the SGSN to an Access Point Node APN within the GGSN . The APN represents a logical end of an IP tunnel that can either access direct Internet compatible services or private network connections. The APN also represents a security mechanism for the network insofar as each communication device must be assigned to one or more APNs and communication devices cannot exchange data without first performing a GPRS Attach to an APN that it has been authorized to use. The APN can be considered to be similar to an Internet domain name such as myconnection.wireless.com .

Once the GPRS Attach operation is complete a tunnel is created and all traffic is exchanged within standard IP packets using any protocol that can be supported in IP packets. This includes tunneling methods such as IP over IP as in the case with some IPSecurity Ipsec connections used with Virtual Private Networks VPN . These tunnels are also referred to as Packet Data Protocol PDP Contexts and there are a limited number of these available in the network . To maximize use of the PDP Contexts the network will run an idle timer for each PDP Context to determine if there is a lack of activity. When a communication device is not using its PDP Context the PDP Context can be de allocated and the IP address returned to the IP address pool managed by the DHCP server .

In this exemplary embodiment the communication device communicates with the host system through node of the wireless network and a shared network infrastructure such as a service provider network or the public Internet. Access to the host system can be provided through one or more routers not shown and computing devices of the host system can operate from behind a firewall or proxy server shown in . The proxy server provides a secure node and a wireless internet gateway for the host system . The proxy server intelligently routes data to the correct destination server within the host system .

It will be understood by persons skilled in the art that the user computers are typically also connected to other peripheral devices such as printers etc. which are not explicitly shown in . Furthermore only a subset of network components of the host system are shown in for ease of exposition and it will be understood by persons skilled in the art that the host system will comprise additional components that are not explicitly shown in for this exemplary configuration. More generally the host system can represent a smaller part of a larger network not shown of the organization and can comprise different components and or be arranged in different topologies than that shown in the exemplary embodiment of .

To facilitate the operation of the communication device and the wireless communication of messages and message related data between the communication device and components of the host system a number of wireless communication support components can be provided. In some implementations the wireless communication support components can include a message management server a mobile data server a web server such as Hypertext Transfer Protocol HTTP server a contact server and a device manager module . HTTP servers can also be located outside the enterprise system as indicated by the HTTP server attached to the network . The device manager module includes an IT Policy editor and an IT user property editor as well as other software components for allowing an IT administrator to configure the communication devices . In an alternative embodiment there can be one editor that provides the functionality of both the IT policy editor and the IT user property editor . The support components also include a data store and an IT policy server . The IT policy server includes a processor a network interface and a memory unit . The processor controls the operation of the IT policy server and executes functions related to the standardized IT policy as described below. The network interface allows the IT policy server to communicate with the various components of the host system and the communication devices . The memory unit can store functions used in implementing the IT policy as well as related data. An attachment service may be provided for converting message attachments to formats optimized for viewing on the communication device . Those skilled in the art will know how to implement these various components. Other components can also be included as is well known to those skilled in the art. Further in some implementations the data store can be part of any one of the servers.

In some implementations the host system can include a wireless VPN router not shown to facilitate data exchange between the host system and the communication device . The wireless VPN router allows a VPN connection to be established directly through a specific wireless network to the communication device . The wireless VPN router can be used with the Internet Protocol IP Version 6 IPV6 and IP based wireless networks. This protocol can provide enough IP addresses so that each mobile device has a dedicated IP address making it possible to push information to a mobile device at any time. An advantage of using a wireless VPN router is that it can be an off the shelf VPN component and does not require a separate wireless gateway and separate wireless infrastructure. A VPN connection may be a Transmission Control Protocol TCP IP or User Datagram Protocol UDP IP connection for delivering the messages directly to the communication device in this alternative implementation.

Messages intended for a user of the communication device are initially received by a message server of the host system . Such messages can originate from any number of sources. For instance a message can have been sent by a sender from the computer within the host system from a different mobile device not shown connected to the wireless network or a different wireless network or from a different computing device or other device capable of sending messages via the shared network infrastructure possibly through an application service provider ASP or Internet service provider ISP for example.

The message server typically acts as the primary interface for the exchange of messages particularly e mail messages within the organization and over the shared network infrastructure . Each user in the organization that has been set up to send and receive messages is typically associated with a user account managed by the message server . Some exemplary implementations of the message server include a Microsoft Exchange server a Lotus Domino server a Novell Groupwise server or another suitable mail server installed in a corporate environment. In some implementations the host system can comprise multiple message servers . The message server can also be adapted to provide additional functions beyond message management including the management of data associated with calendars and task lists for example.

When messages are received by the message server they are typically stored in a data store associated with the message server . In at least some embodiments the data store can be a separate hardware unit such as data store with which the message server communicates. Messages can be subsequently retrieved and delivered to users by accessing the message server . For instance an e mail client application operating on a user s computer can request the e mail messages associated with that user s account stored on the data store associated with the message server . These messages are then retrieved from the data store and stored locally on the computer . The data store associated with the message server can store copies of each message that is locally stored on the communication device . Alternatively the data store associated with the message server can store all of the messages for the user of the communication device and only a smaller number of messages can be stored on the communication device to conserve memory. For instance the most recent messages i.e. those received in the past two to three months for example can be stored on the communication device .

When operating the communication device the user may wish to have e mail messages retrieved for delivery to the communication device . The message application operating on the communication device can also request messages associated with the user s account from the message server . The message application can be configured either by the user or by an administrator possibly in accordance with an organization s IT policy to make this request at the direction of the user at some pre defined time interval or upon the occurrence of some pre defined event. In some implementations the communication device is assigned its own e mail address and messages addressed specifically to the communication device are automatically redirected to the communication device as they are received by the message server .

The message management server can be used to specifically provide support for the management of messages such as e mail messages that are to be handled by mobile devices. Generally while messages are still stored on the message server the message management server can be used to control when if and how messages are sent to the communication device . The message management server also facilitates the handling of messages composed on the communication device which are sent to the message server for subsequent delivery.

For example the message management server can monitor the user s mailbox e.g. the message store associated with the user s account on the message server for new e mail messages and apply user definable filters to new messages to determine if and how the messages are relayed to the user s communication device . The message management server can also through an encoder not shown associated therewith compress message data using any suitable compression decompression technology e.g. YK compression JPEG MPEG x H.26x and other known techniques and encrypt messages e.g. using an encryption technique such as Data Encryption Standard DES Triple DES or Advanced Encryption Standard AES and push them to the communication device via the shared network infrastructure and the wireless network . The message management server can also receive messages composed on the communication device e.g. encrypted using Triple DES decrypt and decompress the composed messages re format the composed messages if desired so that they will appear to have originated from the user s computer and re route the composed messages to the message server for delivery.

Certain properties or restrictions associated with messages that are to be sent from and or received by the communication device can be defined e.g. by an administrator in accordance with IT policy and enforced by the message management server . These may include whether the communication device can receive encrypted and or signed messages minimum encryption key sizes whether outgoing messages must be encrypted and or signed and whether copies of all secure messages sent from the communication device are to be sent to a pre defined copy address for example.

The message management server can also be adapted to provide other control functions such as only pushing certain message information or pre defined portions e.g. blocks of a message stored on the message server to the communication device . For example in some cases when a message is initially retrieved by the communication device from the message server the message management server can push only the first part of a message to the communication device with the part being of a pre defined size e.g. 2 KB . The user can then request that more of the message be delivered in similar sized blocks by the message management server to the communication device possibly up to a maximum pre defined message size. Accordingly the message management server facilitates better control over the type of data and the amount of data that is communicated to the communication device and can help to minimize potential waste of bandwidth or other resources.

The mobile data server encompasses any other server that stores information that is relevant to the corporation. The mobile data server can include but is not limited to databases online data document repositories customer relationship management CRM systems or enterprise resource planning ERP applications although such applications and their data repositories may exist outside the mobile data server . The mobile data server can also connect to the Internet or other public network through HTTP server or other suitable web server such as a File Transfer Protocol FTP server to retrieve HTTP webpages and other data. Requests for webpages are typically routed through mobile data server and then to HTTP server through suitable firewalls and other protective mechanisms. The web server then retrieves the webpage over the Internet and returns it to mobile data server .

Similarly the communication device may be configured to permit access to network shares and other resources within the host system such as the content or file server or application server illustrated in via the mobile data server . For ease of reference a content or file server is used as an example of a network resource in this description. Requests for files from the communication device may be routed through the mobile data server to the appropriate server with the mobile data server initiating an appropriate data transfer protocol session on behalf of the device . Each user may be associated with an account provided with access to a file repository on the content or file server or to applications served from the application server . Content or applications may be associated with suitable permissions to provide the user to access the files which may be defined using the device manager module . Thus the user may be required to provide credentials prior to being granted access to the network resource. These credentials may be entered at the communication device and transmitted via the mobile data server to the resource for validation. Network shares to be made available to the communication device may be identified by service URL and associated with one or more user in the device manager module . A user interface element corresponding to the service entry point for the file manager or other application for accessing the network share may then be defined at the communication device . In this manner network resources may be accessed from the communication device without requiring a separate VPN connection via a host system access point or via a VPN connection from a remote access point to the host system over a public network.

As described above in relation to message management server mobile data server is typically provided or associated with an encoder that permits retrieved data such as retrieved webpages to be decompressed and compressed using any suitable compression technology e.g. YK compression JPEG MPEG x H.26x and other known techniques and encrypted e.g. using an encryption technique such as DES Triple DES or AES and then pushed to the communication device via the shared network infrastructure and the wireless network . While encoder is only shown for mobile data server it will be appreciated that each of message server message management server and HTTP servers and can also have an encoder associated therewith.

The contact server can provide information for a list of contacts for the user in a similar fashion as the address book on the communication device . Accordingly for a given contact the contact server can include the name phone number work address and e mail address of the contact among other information. The contact server can also provide a global address list that contains the contact information for all of the contacts associated with the host system .

It will be understood by persons skilled in the art that the message management server the mobile data server the HTTP server the contact server the device manager module the data store the attachment service and the IT policy server do not need to be implemented on separate physical servers within the host system . For example some or all of the functions associated with the message management server can be integrated with the message server or some other server in the host system . Alternatively the host system can comprise multiple message management servers particularly in variant implementations where a large number of mobile devices need to be supported.

The device manager module provides an IT administrator with a graphical user interface with which the IT administrator interacts to configure various settings for the communication devices . As mentioned the IT administrator can use IT policy rules to define behaviors of certain applications on the communication device that are permitted such as phone web browser or Instant Messenger use. The IT policy rules can also be used to set specific values for configuration settings that an organization requires on the communication devices such as auto signature text WLAN VoIP VPN configuration network shares security requirements e.g. encryption algorithms password rules etc. specifying themes or applications that are allowed to run on the communication device and the like.

As noted above access to network resources such as application servers and content servers within the host system may be provided at the communication device thus enabling a user to browse and access files stored in the corporate network. The user at the communication device may input a command to retrieve content from the content or file server within the corporate LAN. The communication device then transmits a request for the data to the host system . The request is forwarded to the mobile data server which may then create an HTTP session or a session using another suitable protocol to request and retrieve the requested content from the server . Upon receipt of the requested content the mobile data server may then convert the content to a format that is renderable or easily parsed at the communication device prior to transmitting the content to the device . Also as noted above the mobile data server may also compress or encrypt the data to be transmitted to the device . The communication device may then transmit an acknowledgment to the host system upon receipt of the content.

An application or other utility for or having the capability of browsing a network resource such as a file management application file viewer messaging application and the like may be provided on the communication device. This application may permit the user to browse content on the file server or other network resource via a user interface including a visual text based or graphics based user interface and to manipulate using the communication device content stored on the content server . The application thus requires file system information to be provided by the content server to the communication device . Thus with reference to a simplified illustration of message and data flow between the communication device the mobile data server and the content or file server is shown. An initial request is transmitted from the communication device to the mobile data server . This request may be generated at the communication device in response to a command received via a user interface for example a command to browse through the directory structure of the content server . The initial request may thus comprise a request for an initial folder structure and content listing from the content server .

The request is received at the mobile data server via the firewall or proxy server and through other components of the host system not shown in . The mobile data server on behalf of the communication device then initiates a session with the appropriate content server to request the information sought. The mobile data server thus operates like a gateway for the communication device . The initial request transmitted from the mobile data server to the content server may comprise a request for initial file system information. For example if the initial request identified a folder the request may be an initial query to determine that the folder does in fact exist on the content server . A response to this initial request is received as response . The mobile data server may then request folder details such information concerning the folder s attributes a contents listing for the folder and the like. The content server then responds with the further requested information . It will be appreciated by those skilled in the art that the requests and responses between the mobile data server and the content server may be executed according to any suitable protocol and that the format of responses from the content server may take any variety of appropriate formats.

The mobile data server may then aggregate filter and or convert the file system information to a format that can be processed by the communication device . For example the mobile data server may convert the file system information to an XML format. The converted data is then transmitted to the communication device in a response . An example of the file system information as it may be displayed at the communication device is shown in user interface of . illustrates a list of contents in a network share identified by the path hal users zoidberg and including both folders and files together with at least some metadata such as size or last modified date. The file system information can be displayed to the user in a file picker user interface such as that shown in . The file picker user interface permits a user to browse through and select one or more files listed in the user interface.

An example of file system information that may be received by the mobile data server from the content server is shown in . For convenience the information is depicted in an easily human readable flat file text form to illustrate that the file system information delivered to the mobile data server in response to the requests may include the last modified date for the network share represented by the specified path attribute information for each file or folder found in the network share or subdirectory thereof such as hidden read only system and archive attributes as well as optional ownership and permissions information for the user group and the public created last modified and last accessed dates shown in that order in and file size. Other attributes or metadata may also be included in the information provided by the content server to the mobile data server . illustrates an example of XML type data that may be generated by the mobile data server for provision to the communication device. The XML file may comprise substantially all of the same information provided by the content server . Conversion of the flat file information to XML will be understood by those skilled in the art.

Thus in response to the initial request transmitted from the communication device the host system generates a response for transmission to the communication device comprising the requested file system information. In the example described above the mobile data server obtains file system information from the content server or other target server and generates a new file comprising the requested file system information. The new file intended for delivery to the communication device can be in the XML format described above or in another appropriate format for presentation and storage at the device . The selection of format may depend on the data store at the communication device used to store the received file. For example storage in a record store in non volatile memory at the device may require the file system information to be serialized in a byte array format whereas if the information is stored in a persistent store allowing for file storage no additional conversion or formatting may be necessary. In some embodiments the conversion to a format storable and readable at the communication device is therefore carried out at the device rather than at the mobile data server . Regardless of the specific format of the data store at the device the file system information can be made available to other applications executable at the device .

It can be seen for a single request for file system information transmitted from the device a number of steps may be carried out by the mobile data server content server and other components of the host system prior to a response being received by the device . There may be a number of request response communications between the content server and the mobile data server before the response is constructed for the communication device . A number of these steps may contribute to delay in the communication device displaying the requested file system information to the user after receipt of the original command to view a folder s contents. Accordingly the file system information received at the device may be cached for subsequent reuse for example to populate a further file picker user interface for presentation to the user. However if the cached data is associated specifically with that instance of the application upon exiting the file manager application or other application that was executing at the device and accessing the file system information the cached information may be deleted particularly if the information is stored only in a runtime data store. As a result the next time the same command is invoked for example if the user wishes to view the same folder contents again or if another application invoked at the device attempts to access the same folder content information the communication device mobile data server and the content server must engage in the same steps potentially creating further delay at the communication device in responding to user commands.

Accordingly upon receipt of file system information from the mobile data server the communication device instead caches the data in non volatile memory such as flash memory and persists this cached information across both instances of the same application as well as across different applications. Further by storing the data in non volatile memory the cached information can survive resets or power outages at the device . To maintain the currency of the data the communication device may be configured to refresh the cached information in accordance with specific rules implemented at the device . In cases where the cached information is presented to the user a selectable menu option or command may be made available via a user interface to permit the user to override use of the cached information and to force the device to request updated file system information form the host system . For example if the user knows that the directory on the network share at the content server may have been changed but the file system information displayed at the device does not reflect the expected changes the user may then force an update of the file system information at the device by initiating a refresh command. Relying on the cached information in this manner reduces the number of requests transmitted from the device to the host system thus reducing latency in responding to a command at the device to display file system information from the content server .

A simple example is illustrated in . At a request for file system information for an identified folder or directory is transmitted from the communication device . This request as noted above may be initiated in response to a received command at the device for example by a file manager application. The instruction to retrieve file system information may be invoked in other contexts such as productivity messaging or entertainment applications invoking a file picker user interface to permit the user to select files to open edit or attach to messages. At the file system information is received from the host system and may be in a format converted by the mobile data server . At the received information is cached in non volatile memory at the communication device in association with a timestamp indicating the time of the caching. It may also be displayed at the communication device s display at although display of the file or directory listing may not be required depending on the purpose for which the information is retrieved for example if the application uses the file system information in order to execute a search of the file or directory listing on the communication device display of the received listing is not necessary . The timestamp associated with the received file system information may be a timestamp assigned by the communication device upon receipt of the file. In other embodiments the timestamp may be generated at the host system and specifically by the mobile data server in this example. If it is not generated or assigned at the communication device the timestamp can either be comprised within the file system information file transmitted to the communication device or transmitted separately. The timestamp may be stored with or separately from the file system information in the non volatile memory. The timestamp can be represented by a numeric or alphanumeric string or in any other suitable data format and as used herein includes datestamps times dates or other indicators of a relative age of the data. Subsequently the communication device receives a further request for the same file system information at . This request may be received during the same session or instance of the file manager application. Alternatively it may be received from another application executing on the device such as a messaging application. The messaging application may permit the user to attach files stored in the network share rather than at the device . Accordingly the messaging application can include an interface that permits the user to connect to the network share browse the files therein and select a file for attachment. The message together with an identifier of the file selected as an attachment can then be transmitted from the device without attachment to the host system where the message may be altered to attach the specified file. In this manner bandwidth is not consumed in retrieving the file from the network share and transmitting it again from the device .

Upon receipt of the new request at the communication device then determines at whether the request is a request to refresh the cache information already present at the device . If it is then the process returns to and a request for file system information is transmitted to the host system . If the request is not a refresh instruction then at the device determines whether the requested file system information was cached. If it was not then the device must transmit a request for the file system information and the process returns to . If however the requested information was already cached at the device then at the device determines whether the cached information has aged beyond a specified threshold. The threshold age may be specified at the communication device itself or in an IT policy configured at the host system and pushed to the device . For a network share whose contents may be altered reasonably frequently the default threshold time may be set at minutes. Thus at the device determines whether the difference between the current time and the timestamp stored with the cached information exceeds the threshold. If it does then again the process reverts to and new file system information is requested. If the cached information is newer than the specified threshold then the cached information may be displayed at . Thus a balance can be struck between freshness of the cached information and the delay incurred by refreshing the cached information as well as the consumption of device resources such as battery life and bandwidth .

In a further embodiment the device can proactively determine whether the folder of interest at the network share has been modified since the last caching. In at the request for file system information is transmitted from the communication device to the host system . At the device receives the requested information in a file from the host system . At the device then caches the file system information as described above in non volatile memory in association with a timestamp. Again the device may display the received file system information at . At when a new request for the file system information is received the device again determines whether the request is a refresh instruction at . If the instruction is a refresh instruction the cache is skipped and the process returns to to request new file system information from the host system . If it is not the device then determines whether the file system information is already cached in the non volatile memory at and if it is not the process returns to where the information is requested. If the information is already cached then at the device determines whether the cached information has aged beyond a predetermined threshold for example if the difference between the current time and the timestamp stored with the cached information exceeds a predetermined threshold. If it does not then the currently cached file system information is displayed at . If the cached information has aged beyond the predetermined threshold then the device transmits a request to the host system for the last modification date of the particular folder in the network share for which the request was received at . Once the response is received if the device determines at that the last modified date or time associated with the folder is later than the timestamp associated with the cached data then the process returns to and new file system information is requested since it is presumed that the currently cached data is out of date. Thus to determine whether the cached information should be refreshed a comparison is made of the last modification date or time of the source information the folder on the network share on the content server or other network resource and the timestamp associated with the file generated by the mobile data server and cached at the communication device or generated and cached at the communication device . An example of the message flow between the communication device the mobile data server and the content server in obtaining the last modification date is shown in . During block the communication device transmits a request for the last modified date of the identified folder to the host system . The mobile data server on behalf of the device transmits a request for the last modified date to the content server . The content server responds with the last modified date 770. The mobile data server then forwards a response with the last modified date information to the communication device optionally formatting and encoding the response for receipt and processing by the communication device.

Returning to if the last modified date is earlier than or the same as the cache timestamp then the device may proceed to display the cached information at . As explained above the user may be required to supply credentials prior to accessing the contents of the server . Accordingly each request for file system information may require the device to tender credentials on behalf of the user for validation by the host system . By requiring that a new request for the file system information be made upon expiry of the threshold time the communication device and host system ensure that the requestor of the file system info continues to be authorized.

A further embodiment of the process using credentials is illustrated in . At a request is transmitted for file system information from the communication device . This request may include the user s credentials such as a password. The password may be entered by the user in response to a prompt upon receipt of the command to view the contents of the network share. In other embodiments the user may not be required to enter the password or other credential each time the request is made at . In some cases the credentials may be obtained automatically by the device for example from a smart card in wireless or fixed communication with the communication device or from cached information at the device . While it may not be desirable for the user password to be cached at the device in some cases the password may be stored in a hashed or other obfuscated format or an authorization ticket or other token may be stored at the device for use in place of user entered credentials. The hashed or obfuscated password or the authorization ticket or token may be stored in volatile rather than non volatile memory and not persisted across device resets.

At it is determined whether the credentials are valid. This validity check may be performed at the host system . If the credentials are not valid a rejection response is transmitted to the communication device and the user may be prompted to provide new credentials at . Otherwise if the credentials are valid the file system information is obtained by the mobile data server as described above and transmitted to the communication device . At the information is received and cached in association with the timestamp as described above. At the information may be displayed at a display on the device . At the device receives a new request to retrieve the file system information and again at determines whether the request is a refresh command in which case the cache is skipped and the process returns to . Otherwise the device determines at whether the information is already cached. If it is not then the process returns to where the file system information is requested of the host system using the user s current credentials. If the information is already cached then at a determination is made whether the threshold time period has elapsed since the information was cached. If the cache had aged beyond the predetermined threshold then the process returns to where a new request is made for the information with the current credentials. If the cache has not aged past the threshold then the cached information may be displayed immediately at . If the cache has aged past the threshold then at the last modified date of the folder is requested from the host system . If it is then determined at that the last modified date is later than the timestamp of the cached file system information file then once again the process returns to . If the last modified date is earlier than or the same as the cache timestamp then the cached information is retrieved and displayed at . Thus in addition to balancing delay and the consumption of device resources with the need to maintain a current cache the process ensures that the applications or users accessing the cached network share information are likely authorized i.e. were authorized within the threshold period thus reducing the likelihood that unauthorized access to the cached information stored at the device will be granted.

The systems and methods disclosed herein are presented only by way of example and are not meant to limit the scope of the subject matter described herein. Other variations of the systems and methods described above will be apparent to those in the art and as such are considered to be within the scope of the subject matter described herein. For example it should be understood that steps and the order of the steps in the processing described herein may be altered modified and or augmented and still achieve the desired outcome. It will also be appreciated that although the embodiments herein have been directed generally to file system information and directory structures similar systems and methods may be carried out in respect of other types of data.

The systems and methods data may be stored in one or more data stores. The data stores can be of many different types of storage devices and programming constructs such as RAM ROM flash memory programming data structures programming variables etc. It is noted that data structures describe formats for use in organizing and storing data in databases programs memory or other computer readable media for use by a computer program.

Code adapted to provide the systems and methods described above may be provided on many different types of computer readable media including computer storage mechanisms e.g. CD ROM diskette RAM flash memory computer s hard drive etc. that contain instructions for use in execution by a processor to perform the methods operations and implement the systems described herein.

The computer components software modules functions and data structures described herein may be connected directly or indirectly to each other in order to allow the flow of data needed for their operations. It is also noted that a module or processor includes but is not limited to a unit of code that performs a software operation and can be implemented for example as a subroutine unit of code or as a software function unit of code or as an object as in an object oriented paradigm or as an applet or in a computer script language or as another type of computer code.

A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by any one of the patent document or patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyrights whatsoever.

