---

title: Virtual switching overlay for cloud computing
abstract: In one embodiment, a method includes receiving data at a virtual switch located at a network device in a cloud network. The data is received from an external network and destined for one or more virtual machines located in the cloud network and associated with the external network. The method further includes transmitting the data from the virtual switch to the virtual machines. The virtual switch operates as an access layer switch for the external network and creates a virtual switching overlay for secure communication between the virtual machines and the external network. Logic and an apparatus are also disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08345692&OS=08345692&RS=08345692
owner: Cisco Technology, Inc.
number: 08345692
owner_city: San Jose
owner_country: US
publication_date: 20100427
---
The present disclosure relates generally to communication networks and more particularly to cloud computing.

The number of applications and amount of data in enterprise data centers continue to grow. Cloud computing is being proposed as one possibility to meet the increasing demands. Cloud computing enables network access to a shared pool of configurable computing resources e.g. networks servers storage applications and services that can be rapidly provisioned and released with minimal management effort. Infrastructure as a Service IaaS is one area of cloud computing that has attracted a lot of interest. IaaS delivers computer infrastructure typically a platform virtualization environment as a service. Rather than purchasing servers software data center space or network equipment customers instead purchase these resources as an outsourced service. Most IaaS providers do not disclose how their infrastructures are handled internally since they often view this as their competitive advantage. As a result the enterprise has no visibility into the infrastructure within the cloud and is left with no assurance of security reliability or visibility. Even if the provider discloses how their internal operations are implemented there is still no way for the enterprise to monitor or verify the infrastructure.

Corresponding reference characters indicate corresponding parts throughout the several views of the drawings.

In one embodiment a method generally comprises receiving data at a virtual switch located at a network device in a cloud network. The data is received from an external network and destined for one or more virtual machines located in the cloud network and associated with the external network. The method further includes transmitting the data from the virtual switch to the virtual machine. The virtual switch operates as an access layer switch for the external network and creates a virtual switching overlay for secure communication between the virtual machines and the external network.

In another embodiment logic is encoded in one or more tangible media for execution and when executed operable to switch data between virtual machines located in a cloud network forward data to an external network perform access layer switch operations for the external network and create a virtual switching overlay for secure communication between the virtual machines and the external network.

The following description is presented to enable one of ordinary skill in the art to make and use the embodiments. Descriptions of specific embodiments and applications are provided only as examples and various modifications will be readily apparent to those skilled in the art. The general principles described herein may be applied to other applications without departing from the scope of the embodiments. Thus the embodiments are not to be limited to the embodiments shown but are to be accorded the widest scope consistent with the principles and features described herein. For purpose of clarity features relating to technical material that is known in the technical fields related to the embodiments have not been described in detail.

Cloud computing is a model that provides resources and services that are abstracted from an underlying infrastructure and provided on demand and at scale in a multi tenant environment. The clouds are typically accessed through web browsers or APIs Application Programming Interfaces and offer nearly unlimited capacity on demand but with limited customer control. One area of cloud computing is Infrastructure as a service IaaS in which computing network and storage services are delivered over the network on a pay as you go basis. A popular offering within IaaS is the Virtual Private Cloud VPC . The VPC is hosted on a public cloud therefore it is not truly a private cloud. The VPC includes a set of Virtual Machines VMs and networks that are connected to the enterprise and appear to be part of the enterprise i.e. associated with the enterprise network . With conventional implementations of virtual private clouds there are concerns about security reliability and visibility. The network administrator has to extend the enterprise network into an insecure environment and therefore loses visibility into what is happening within the cloud and control over security and enterprise class features. Also there is no consistent interface between all of the various cloud providers. Enterprises desire security service level guarantees and compliance control but with virtual private clouds the service providers are in control of these requisite capabilities. These drawbacks prevent many enterprises from adopting cloud computing.

The embodiments described herein address the above needs within the cloud computing environment. The embodiments provide a virtual switching overlay on top of the cloud infrastructure. This allows the network administrator to regain control of the network access layer within the virtual private cloud and provides full visibility into the cloud secure communication within the cloud and from the cloud to the enterprise and an interface to the cloud network that is independent of the service provider.

Referring now to the drawings and first to an example of a network that may implement embodiments described herein is shown. The embodiments operate in the context of a data communication network including multiple network elements. Some of the elements in a network that employs the system may be network devices such as servers switches routers or gateways. The network device may include for example a master central processing unit CPU interfaces and a bus. The CPU preferably includes memory and a processor. The network device may be implemented on a general purpose network machine such as described below with respect to . It is to be understood that the simplified network shown in is only one example and that the embodiments described herein may be employed in networks having different configurations and types of network devices.

The network shown in includes a customer network e.g. enterprise network in communication with a service provider network through a public network e.g. Internet . The customer network includes a plurality of end users at one or more locations. The service provider includes a cloud network e.g. virtual private cloud which is an isolated portion of the service provider network. The VPC may include any number of subnets . The subnet is a segment of the VPC s IP address range where the customer can place groups of isolated resources. The service provider network may include any number of virtual private clouds or subnets associated with the customer network or other customer networks. The customers are segmented within the virtual private cloud by the service provider. The customer end users communicate with the VPC over a connection e.g. Virtual Private Network VPN connection between a customer gateway and VPN gateway . The connection passes through the public network . The customer may also communicate outside of the VPN connection as shown at communication path . The customer network is located outside of the VPC and may be referred to as an external network as viewed from the VPC.

The VPC includes a plurality of servers which utilize virtualization technology. Virtualization allows one computer to do the job of multiple computers by sharing the resources of a single computer across multiple systems. Software is used to virtualize hardware resources of a computer including for example the CPU RAM hard disk and network controller to create a virtual machine that can run its own operating system and applications. Multiple virtual machines on each server share hardware resources without interfering with each other so that several operating systems and applications can be run at the same time. The virtual machines are deployed within the cloud on demand with the IP addresses of the VMs controlled by the enterprise.

As described in detail below a virtual switch is located in the VPC to provide a virtual switching overlay on top of the cloud. The virtual switch operates as an access layer switch for the customer so that the customer has control of the cloud network access layer.

The virtual switch transmits data received from the enterprise to virtual machines located within the VPC via encrypted links virtual secure wires . The VPC data center may also include more than one virtual switch with an encrypted link between the virtual switches. L2TPv3 over IPsec may be used to encrypt packets transmitted between the virtual switch and virtual machines . It is to be understood that L2TPv3 over IPsec is only one example and that other protocols may be used to transfer data between the virtual switch and virtual machines .

In one embodiment each virtual machine includes an agent . The agent may be a VPN client for example or other application loaded in the virtual machine by an enterprise server application administrator. The agent contains the IP address assigned by the service provider and port profile names. A port profile is used to define a common set of configuration policies attributes for multiple interfaces. The port profiles are associated with port configuration policies defined by the network administrator and applied to a large number of ports as they come online in a virtual environment.

The VPN connection may be used to signal VM MAC addresses back to the enterprise to prevent flooding across the VPN connection . Since traffic leaving the virtual private cloud is often billed by the provider stopping floods can reduce costs. The virtual switch at the enterprise may also proxy ARP Address Resolution Protocol requests on behalf of the VMs within the VPC . As shown in the enterprise virtual switch also has an unencrypted interface at link which connects to the rest of the enterprise network.

The servers are in communication with the network via switches e.g. hardware implemented network switches or other network devices configured to perform switching or routing functions . The switches may be in communication with a management station e.g. virtualization management platform such as VMware Virtual Center management station available from VMware of Palo Alto Calif. . The management station or one or more management functions may also be integrated into the switches .

In the embodiment shown in the virtual machines communicate with the network via a virtual switch such as NEXUS 1000V available from Cisco Systems Inc. of San Jose Calif. The virtual switch is located in the service provider network and includes components referred to as a Virtual Supervisor Module VSM and Virtual Ethernet Module VEM . The VSM may be located in a physical appliance e.g. server in communication with the servers and management station via physical switches . The VSM may also be a virtual appliance e.g. virtual machine installed at one of the servers or the VSM may be installed at one of the switches .

The VSM is configured to provide control management plane functionality for the virtual machines and control multiple VEMs . The VEM provides switching capability at the server and operates as a data plane associated with the control plane of the VSM . The VSM and VEM operate together to form a distributed virtual switch as viewed by the management station . The VSM and VEM may also be located together in a network device e.g. switch server or other network device in communication with the switches and servers .

It is to be understood that the network shown in is only one example and that the virtual switching overlay may be used in different networks having different network components. For example the virtual switching overlay may run on top of VMWare Xen hypervisor or any other hypervisor or platform virtualization model at the VPC . Thus the virtual switch VSM VEM is just one example of a virtualization model at the service provider network.

The virtual switch allows the enterprise to gain control of the cloud network access layer. All traffic entering or leaving the cloud e.g. VPC or subnet in VPC associated with the enterprise passes through the virtual switch . An administrator at the enterprise can access the virtual switch and view the virtual Ethernet ports interfaces configure ACLs Access Control Lists manage port profiles and perform other management functions typically performed at the access layer.

The VPC may include multiple virtual switches connected to a central management plane. The central management plane is assigned an elastic IP address and spawns off virtual switches as virtual Ethernet interfaces are created and limits at the virtual switch are reached. The port profiles may be configured in the central management plane with the virtual switches pulling port profiles on demand when the associated virtual Ethernet interfaces connect to the virtual switch. The virtual switches preferably create a full mesh of VPN tunnels to form a single logical switch to prevent loops and eliminate the need for spanning tree.

Network device interfaces with physical media via a plurality of linecards network interfaces . Linecards may incorporate Ethernet interfaces DSL interfaces Gigabit Ethernet interfaces 10 Gigabit Ethernet interfaces SONET interfaces etc. As packets are received processed and forwarded by network device they may be stored in a packet memory . To implement functionality according to the system linecards may incorporate processing and memory resources similar to those discussed above in connection with the network device as a whole. It is to be understood that the network device shown in and described above is only one example and that different configurations of network devices may be used.

Although the method and apparatus have been described in accordance with the embodiments shown one of ordinary skill in the art will readily recognize that there could be variations made without departing from the scope of the embodiments. Accordingly it is intended that all matter contained in the above description and shown in the accompanying drawings shall be interpreted as illustrative and not in a limiting sense.

