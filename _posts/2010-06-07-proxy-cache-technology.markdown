---

title: Proxy cache technology
abstract: Proxy cache technology, in which a system determines a subset of content files to include in a proxy cache maintained by a network service provider that provides network service to user downloader devices included in a content delivery network. The system controls the network service provider to store the subset of content files in the proxy cache. The system also controls the user downloader devices to attempt to use the proxy cache as a peer to download a content file prior to using an external peer.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08478836&OS=08478836&RS=08478836
owner: PurpleComm Inc.
number: 08478836
owner_city: Santa Clara
owner_country: US
publication_date: 20100607
---
Content viewers today are exposed to an overwhelming amount of information and are challenged by the degree of interaction and personalization needed to manage this massive amount of information. In an era of digital communications a user may be confused by an array of technology including traditional analog televisions DVRs Digital Video Recorders PVRs Personal Video Recorders media centers EPG Electronic Program Guide based systems Internet related content and traditional remote control devices.

In one aspect a method of controlling a downloader device to download content from a cache includes determining a subset of content files to include in a proxy cache maintained by a network service provider that provides network service to a user downloader device included in a content delivery network. The method also includes controlling the network service provider to store the subset of content files in the proxy cache. The method further includes controlling the user downloader device to attempt to use the proxy cache as a peer to download a content file prior to using an external peer accessible to the user downloader device on an external network through the network service provider.

Implementations may include one or more of the following features. For example the method may include monitoring download requests of multiple different user downloader devices serviced by the network service provider and based on the monitoring of the download requests of multiple different user downloader devices determining for each of multiple content files that have been downloaded an actual download score that is indicative of bandwidth being used in servicing download requests for the corresponding content file. In this example the method may include selecting a subset of one or more content files to include in the proxy cache based on the determined actual download scores.

In some implementations the method may include determining for each of the multiple content files that have been downloaded a download frequency of requests for the corresponding content file received from downloader devices and identifying for each of the multiple content files that have been downloaded a size of the corresponding content file. In these implementations the method may include determining for each of the multiple content files that have been downloaded an actual download score that is indicative of bandwidth being used in servicing download requests for the corresponding content file based on the determined download frequency and the identified size of the corresponding content file.

In some examples the method may include identifying for each of the multiple downloaded content files and from among download requests received from downloader devices serviced by multiple different network service providers download requests for the corresponding content file received from downloader devices serviced by a particular network service provider and determining for each of the multiple downloaded content files a download frequency of the identified download requests for the corresponding content file received from downloader devices serviced by the particular network service provider. In these examples the method may include determining for each of the multiple downloaded content files an actual download score that is indicative of bandwidth being used by the particular network service provider in servicing download requests for the corresponding content file based on the determined download frequency of the identified download requests and the identified size of the corresponding content file.

In addition the method may include determining for each of the identified download requests a type of peer handling the corresponding download request. The type of peer may include at least one of an internal peer that is within a network of the particular network service provider and an external peer that is outside of the network of the particular network service provider. The method also may include determining for each of the multiple downloaded content files an external download frequency of the identified download requests for the corresponding content file received from downloader devices serviced by the particular network service provider based on the identified download requests and the determination of the type of peer handling each of the identified download requests. The determination of the external download frequency may place a higher value on download requests for which the type of peer handling the corresponding download request was determined to be an external peer than download requests for which the type of peer handling the corresponding download request was determined to be an internal peer.

In some implementations the method may include monitoring additions of content files to channels offered by the content delivery network and based on the monitoring of the additions of content files to channels offered by the content delivery network determining for each of multiple content files added to a channel an anticipated download score indicative of bandwidth anticipated to be used in servicing download requests for the corresponding content file. In these implementations the method may include selecting a subset of one or more content files to include in the proxy cache based on the determined anticipated download scores.

In some examples the method may include identifying for each of the multiple content files added to a channel subscribers that are serviced by a particular network service provider and that subscribe to a channel to which the corresponding content file has been added and identifying for each of the multiple content files added to a channel a size of the corresponding content file. In these examples the method may include determining for each of the multiple content files added to a channel an anticipated download score that is indicative of bandwidth anticipated to be used by the particular network service provider in servicing download requests for the corresponding content file based on the identified subscribers that subscribe to the channel to which the corresponding content file has been added and the identified size of the corresponding content file.

Further the method may include determining for each of the multiple content files that have been added to a channel a metric indicative of anticipated download availability of the corresponding content file from a peer that is within a network of the particular network service provider and determining for each of the multiple content files added to a channel an anticipated download score that is indicative of bandwidth anticipated to be used by the particular network service provider in servicing download requests for the corresponding content file based on the identified subscribers that subscribe to the channel to which the corresponding content file has been added the identified size of the corresponding content file and the determined metric indicative of anticipated download availability of the corresponding content file from a peer that is within a network of the particular network service provider.

In some implementations the method may include monitoring download requests of multiple different user downloader devices serviced by the network service provider and based on the monitoring of the download requests of the multiple different user downloader devices serviced by the network service provider determining for each of multiple downloaded content files an actual download score that is indicative of bandwidth being used in servicing download requests for the corresponding content file. In these implementations the method may include monitoring additions of content files to channels offered by the content delivery network and based on the monitoring of the additions of content files to channels offered by the content delivery network determining for each of multiple content files that have been added to a channel an anticipated download score that is indicative of bandwidth anticipated to be used in servicing download requests for the corresponding content file. In these implementations the method may include determining for each of multiple content files a cache benefit score based on the actual download score for the corresponding content file and the anticipated download score for the corresponding content file and selecting a subset of one or more content files to include in the proxy cache maintained by the network service provider based on the determined cache benefit scores.

In some examples the method may include accessing from electronic storage a threshold cache benefit score and comparing each of the determined cache benefit scores to the accessed threshold cache benefit score. In these examples the method may include determining whether each of the determined cache benefit scores indicates a cache benefit that exceeds a cache benefit indicated by the accessed threshold cache benefit score and based on determination results selecting one or more content files having a cache benefit score that indicates a cache benefit that exceeds a cache benefit indicated by the accessed threshold cache benefit score. The method may include identifying from among the multiple content files for which a cache benefit score was determined a threshold number of content files having cache benefit scores that indicate a highest cache benefit and selecting the threshold number of content files having cache benefit scores that indicate a highest cache benefit.

Further the method may include monitoring actual and anticipated download information across multiple different network service providers and grouping the monitored actual and anticipated download information by network service provider. The method may include determining for each of the multiple different network service providers cache benefit scores for content files based on the grouped actual and anticipated download information for the corresponding network service provider and selecting for each of the multiple different network service providers content files to include in the proxy cache based on the determined cache benefit scores. The selected content files may be different among the multiple different network service providers with content files selected for a first network service provider being different than content files selected for a second network service provider.

In some implementations the method may include identifying one or more new content files to include in the proxy cache determining a storage size of the one or more new content files to include in the proxy cache and determining an amount of storage space available in the proxy cache. In these implementations the method may include comparing the determined storage size of the one or more new content files to the determined amount of storage space available in the proxy cache and determining whether storage space is available in the proxy cache to accommodate the one or more new content files. In response to a determination that storage space is available in the proxy cache to accommodate the one or more new content files the one or more new content files may be stored in the proxy cache without removing content files previously stored in the proxy cache. In response to a determination that storage space is not available in the proxy cache to accommodate the one or more new content files one or more content files previously stored in proxy cache may be selected to remove and the one or more selected content files previously stored in proxy cache may be replaced in the proxy cache with the one or more new content files.

In addition the method may include determining a cache benefit of maintaining one or more previously stored content files in the proxy cache and selecting one or more content files previously stored in the proxy cache to remove based on the determined cache benefit of maintaining one or more previously stored content files in the proxy cache. Further the method may include determining a size of one or more previously stored content files relative to the size of the one or more new content files and selecting one or more content files previously stored in proxy cache to remove based on the determined cache benefit of maintaining one or more previously stored content files in the proxy cache and the determined size of one or more previously stored content files relative to the size of the one or more new content files.

In some examples identifying peers in a same block of a network of the network service provider as a user downloader device attempting to download the content file from the identified peers in the same block of the network of the network service provider and determining whether the attempt to download the content file from the identified peers in the same block of the network of the network service provider was successful. In response to a determination that the attempt to download the content file from the identified peers in the same block of the network was unsuccessful attempting to download the content file using the proxy cache as a peer.

The method may include determining whether the attempt to download the content file using the proxy cache as a peer was successful and in response to a determination that the attempt to download the content file using the proxy cache as a peer was unsuccessful downloading the content file from an external peer that is outside of the network of the network service provider. The method also may include in response to downloading the content file from the external peer that is outside of the network of the network service provider determining whether to cache the content file downloaded from the external peer in the proxy cache.

In another aspect a system includes at least one computer and at least one computer readable medium coupled to the at least one computer having instructions stored thereon which when executed by the at least one computer causes the at least one computer to perform operations. The operations include determining a subset of content files to include in a proxy cache maintained by a network service provider that provides network service to user downloader devices included in a content delivery network. The operations also include controlling the network service provider to store the subset of content files in the proxy cache. The operations further include controlling the user downloader devices to attempt to use the proxy cache as a peer to download a content file prior to using an external peer accessible to the user downloader devices on an external network through the network service provider.

In yet another aspect at least one computer readable storage medium is encoded with at least one computer program comprising instructions that when executed operate to cause a computer to perform operations. The operations include determining a subset of content files to include in a proxy cache maintained by a network service provider that provides network service to user downloader devices included in a content delivery network. The operations also include controlling the network service provider to store the subset of content files in the proxy cache. The operations further include controlling the user downloader devices to attempt to use the proxy cache as a peer to download a content file prior to using an external peer accessible to the user downloader devices on an external network through the network service provider.

The details of one or more implementations are set forth in the accompanying drawings and the description below. Other potential features and advantages of the disclosure will be apparent from the description and drawings and from the claims.

Multiple types of content such as audio e.g. music podcasts video and still images e.g. photographs may be made available over the content delivery network . Licensed and license free content may be made available. For example licensed content may be acquired from a content owner .

Content may be made available from a variety of sources. For example Internet content may be accessed from an Internet link e.g. URL Uniform Resource Locator . Content may also be accessed from peer to peer networks. For example content may be accessed from one or more BitTorrent clients which are part of one or more BitTorrent swarms . Content may be accessed from other sources such as from a television broadcast e.g. MSO Multiple System Operator cable satellite local or from content e.g. photographs audio previously recorded video available from devices e.g. DVR stereo computer DVD Digital Video Disc player connected to a user s home network and or located in a user s home.

Content curators may use a content curator portal to define custom channels which may be made available for subscription by end users . The content curators may be commissioned to search for select and organize multiple types of content from various sources into channels. Content curators may for example organize channels by topic or genre. Content curators may for example select licensed content license free content BitTorrent content or content from their private collection to name a few examples.

Channels may be offered for free to end users or end users may subscribe to channels on a fee basis. Users may rate or rank channels or content curators based for example on programming selection sequencing and quality. Content curators may be promoted for example based on popularity.

Content owners may be compensated for the use of licensed content that they own which is used in channels defined by content curators . For example the system may provide support for digital rights management DRM . By allowing access to their licensed content content owners may experience increased distribution and revenue and targeted exposure in focused channels. Multiple revenue agreements may be possible such as per use agreements subscription revenue sharing and advertisement revenue sharing.

A content curator may work with one or more advertisers such as an ad agency to include advertisements on a channel. For example an advertisement may be displayed if a user switches a channel or when a program finishes. As another example advertisements may be displayed on the display of a remote control device such as while a program is being displayed on a television. Content curators advertisers and content owners may share advertising revenue. Sharing in advertising revenue may provide an incentive for content curators to create interesting and popular channels. A content curator may work with one or more advertisers to create one or more advertisements which are customized and targeted for one or more particular channels. End users may customize advertisement viewing preferences such as by specifying preferred topics preferred or excluded companies region preferences etc.

Advertisers may use an advertiser portal to upload advertisements and to control advertisement publication. Advertisers may define and apply advertisement insertion rules to particular advertisements and or may allow a content curator to decide when and how to insert the advertisements into channels defined by the content curator . APIs Application Programming Interfaces may be provided which allow advertisers to enable the system to interface with standard advertisement inventory management systems to allow for control and management of advertisements . Various advertisement pricing plans may be supported such as individually priced ads or bulk pricing. Other advertising features may be included such as online purchasing of items or providing customer contact options.

Advertisers content curators and content owners may access user viewing behavior data. Advertisers may access user viewing behavior data such as viewed channels viewed content viewed advertisements advertisement display frequency advertisement viewed length user actions during advertisement display user characteristics advertisement and content view times advertisement and content view counts and hosting channel information to monitor reach and performance of advertising campaigns. Advertisements may be targeted to specific users based on recorded user viewing behavior data. Content curators may access user viewing behavior data to learn about behaviors of end users who subscribe to their channels. Content owners may access user viewing behavior data to learn about their fan base such as accessing information about user demographics time of day of access and user actions during content display. Content presentation and playback may be customized and personalized for a particular end user based specifically on recorded user viewing behavior of the particular end user and generally on recorded user viewing behavior of all users.

User viewing behavior data may be captured for example by a media player and or a downloader device . The media player and or the downloader device may play content included or ordered on a channel defined by a content curator . In some implementations the media player may play content downloaded from the content delivery network by the downloader device . In some implementations the media player and the downloader device are different logical functions of the same physical device. In other implementations the media player and the downloader device are different physical devices. In some implementations the media player is a software application which may be executed for example on a computing device such as a desktop or laptop computer.

The media player and or the downloader device may be connected to external media storage devices respectively. The external media storage devices may be for example USB Universal Serial Bus drives. The external media storage devices may be used for example to transfer data to from the media player or the downloader device respectively such as to transfer data to from a computing device.

The media player and or the downloader device may communicate wirelessly with one or more remote control devices . The end user may navigate through channels and perform other functions using the remote control device . The remote control device may communicate e.g. using Infrared IR technology of radio frequency RF technology with the television the media player and or the downloader device . The remote control device also may communicate over a network with the media player and or the downloader device to control functions of the media player or the downloader device . The remote control device may include a small display screen that displays preview content and or advertisements.

The media player and or the downloader device may download content from the content delivery network without consuming resources of a computing device owned by the end user . For example content may be downloaded into the home of an end user without using resources of a personal computer owned by the end user . The media player and the downloader device may use less electricity than a personal computer thus reducing the electric bill of the end user . The media player and or the downloader device may connect to other computing devices connected on a user s home network. The media player and or the downloader device may include built in functionality to communicate with and download information from a peer to peer network such as the BitTorrent swarm .

The end user may search for and subscribe to content using an end user content search portal . For example the end user content search portal may provide a directory listing of available defined channels. The directory listing may be organized in a hierarchy of categories and sub categories. A particular channel may appear in one or more categories or sub categories. The end user content search portal may also provide a search function to allow end users to search for available defined channels based on a keyword search. As another example users may search for channels based on other criteria such as sorting channels based on channel or content curator popularity or ranking. An end user may subscribe to a defined channel for example by selecting a channel link displayed in a directory listing or in a list of search results.

The end user may also search for and initiate download of individual content items to the downloader device using a partner site such as a BitTorrent search engine . As another example the end user may send an email which includes a content link to an email address associated with their downloader device to initiate an automatic download to the downloader device of the content linked to by the content link. The content link may refer to a content file available on the Internet and may be a reference to a video resource available from a streaming video website. The end user may send an email with an attachment to an email address associated with the downloader device to initiate a download of the attachment to the downloader device . The end user may use an end user content download portal to search for and to select content to download to the downloader device .

The content and directory database stores information about content and also information about defined channels. Content curators may use a content curator portal to define channels and to manage defined channels. The content curator portal may display a listing of licensed and license free content available in the content and directory database . The content curator portal may also provide a search function which allows the content curator to search for content available in the content and directory database and to also search for content included in the private collection of the content curator or content available on the Internet such as content available from peer to peer networks such as BitTorrent .

The content curator portal may communicate with a content curator server . For example a channel definition defined using the content curator portal may be sent to the content curator server which may communicate with the server system to request that the channel definition be stored in the content and directory database . As another example information for existing channel definitions associated with a particular content curator may be retrieved from the content and directory database and sent from the content curator portal server to the content curator portal for display.

In some implementations the content curator portal server is one physical server computing device and in other implementations the content curator portal server includes multiple physical server computing devices. Similarly in some implementations the server system is one physical server computing device and in other implementations the server system includes multiple physical server computing devices. In some implementations multiple physical server computing devices are used with some or all server computing devices implementing both the content curator portal server and the server system . In some implementations one physical server computing device is used with the one physical server device implementing both the content curator portal server and the server system .

The network may be one or more public or private wired or wireless networks such as the Internet or may be a Session Initiated Protocol SIP network such as the PsipTNT network offered by TelTel . The network may include for example one or more of the Internet Wide Area Networks WANs Local Area Networks LANs analog or digital wired and wireless telephone networks e.g. a PSTN Integrated Services Digital Network ISDN and Digital Subscriber Line xDSL radio television cable satellite and or any other delivery or tunneling mechanism for carrying data services. The network may include multiple networks or subnetworks each of which may include for example a wired or wireless data pathway.

Content may be downloaded to one or more user media player downloader devices . For example content corresponding to a user subscribed channel may be automatically downloaded to the media player downloader device in response to a user selection of a corresponding channel. Content may be downloaded to a media player downloader device for example from a proxy cache included in a network service provider system or from another media player downloader device included in the same network block of the network service provider system . As another example a user may search for and download content to the media player downloader device . A user may using a remote user device monitor and manage user initiated downloads. The remote user device may be any type of electronic device configured to exchange communications with the server system over a network. The remote user device may be a general purpose computer e.g. a desktop personal computer a workstation or a laptop computer a mobile or wireless device or a device designed for a specific function e.g. a cell phone a smart phone a tablet PC a personal digital assistant PDA etc. .

A content curator may define content to include in a channel. Channel content may include among other content Internet content and licensed content . Channel content may be stored in a content and directory database . Content may be delivered to end users using the content delivery network and a network service provider e.g. Internet Service Provider ISP architecture .

To reduce bandwidth strain on the network service provider architecture content may be cached to a proxy cache included in the network service provider architecture . A cache loader may determine a subset of content files to cache in the proxy cache . In response to a content download request from a user media player downloader device an attempt may be made to download content from a peer media player downloader device located in the same network block of the network service provider architecture as the user media player downloader device e.g. requests may be downloaded from an internal peer . If the attempt to download the requested content from the internal peer is unsuccessful an attempt may be made to download the requested content from the proxy cache . Or as another example an attempt may be made to download the requested content from the database e.g. using HTTP Hyper Text Transfer Protocol . If the attempt to download the requested content from the proxy cache is unsuccessful the requested content may be downloaded from an external peer.

The system determines a subset of content files to include in a proxy cache maintained by a network service provider that provides network service to user media player downloader devices included in a content delivery network . For instance in the example of the cache loader may determine a subset of content files stored in the content and directory database to include in the proxy cache . Determining a subset of content files is described in more detail below with respect to .

The system monitors download requests of multiple different user media player downloader devices serviced by a network service provider . For example a request to download content may correspond to delivery of content to a media player downloader device of a subscriber when the subscriber watches a channel which includes the content file. The download request may be in response to the subscriber switching to the channel which includes the content file or in some implementations content may be pre downloaded to a subscriber s media player downloader device e.g. before the subscriber watches the channel . As another example a download request may be in response to an end user requesting a download of a content file to their media player downloader device. For example an end user may select a content file to download from a download website or may request a download by submitting an electronic communication to a server system of the content delivery network where the electronic communication includes a link to the content a link related to the content e.g. a link to a BitTorrent torrent file a file related to the content file as an attachment to the electronic communication e.g. a torrent file attachment or the content file as an attachment to the electronic communication.

The system determines for each of multiple content files that have been downloaded an actual download score that is indicative of bandwidth being used in servicing download requests for the corresponding content file . The actual download score may be based on the monitoring of the download requests of multiple different user media player downloader devices and may be based for example on a determined download frequency of requests for and a size of the corresponding content file. Determining an actual download score is described in more detail below with respect to .

The system identifies download requests for a content file received from media player downloader devices serviced by a particular network service provider . For example a request to download content may correspond to delivery of content to a media player downloader device of a subscriber who is subscribed to a channel which includes the content file. As another example a download request may be in response to an end user requesting a download of a content file to their media player downloader device such as by selecting a content file to download from a download website or by submitting an electronic communication to a server system of the content delivery network where the electronic communication includes a link to the content a link related to the content e.g. a link to a BitTorrent torrent file a file related to the content file as an attachment to the electronic communication e.g. a torrent file attachment or the content as an attachment to the electronic communication.

The system determines a type of peer handling the identified download requests . For example a request may be handled by an internal peer that is within the particular network service provider s network or by an external peer that is outside of the particular network service provider s network. In this example the system determines whether the request is handled by an internal peer or an external peer.

The system determines an external download frequency for the content file from media player downloader devices serviced by the particular network service provider based on the identified download requests and the determination of the type s of peers handling the download requests . In determining the external download frequency the system may place a higher value on download requests for which the type of peer handling the corresponding download request was determined to be an external peer than download requests for which the type of peer handling the corresponding download request was determined to be an internal peer.

The external download frequency may be determined for example by calculating a ratio of requests for the content file handled by external peers to the total number of requests for the content file. For example if there are a total of ten thousand requests for a particular content file and if six thousand of those requests are handled by external peers then the external download frequency may be calculated as six thousand divided by ten thousand or a value of sixty percent. As another example the external download frequency may be calculated as a frequency of requests for a particular content file handled by external peers during a given time period. For example there may be five thousand requests for a particular content file in a given one month period. The external download frequency may be calculated as an average frequency. For example based on monitoring of download requests over time the average number of requests per month for a particular content file may be for example five thousand.

The system identifies a size of the content file . The size of a content file may be the size that the content file occupies in storage. The size may be determined for example by querying metadata associated with the file. The size may also be determined by querying a database system for the size of database content associated with the content file or by querying a file system for a file attribute which indicates the size of the content file. As another example the size of the content file may be computed by processing the file.

The system determines for the content file an actual download score that is indicative of bandwidth being used by the particular network service provider in servicing download requests for the content file based on the determined external download frequency and the identified size of the content file . For example an actual download score for a content file with a small size and a low external download frequency may be smaller than an actual download score for a content file with a relatively larger size and or a relatively higher external download frequency. In some implementations when determining an actual download score a weight associated with the external download frequency is the same as a weight associated with the identified size. In some implementations a weight associated with the external download frequency may be higher than a weight associated with the identified size and in other implementations a weight associated with the identified size may be higher than a weight associated with the external download frequency.

Returning to the system monitors additions to channels offered by the content delivery network . For example the system may monitor modifications to channel content made by a content curator and may identify when a content curator adds a new content file to a channel.

The system determines for each of multiple content files that have been added to a channel an anticipated download score that is indicative of bandwidth anticipated to be used in servicing download requests for the corresponding content file . Determining an anticipated download score is described in more detail below with respect to .

The system identifies subscribers that are serviced by a particular network service provider and that subscribe to a channel to which a content file has been added . For example for a particular network service provider a count of the total number of subscribers serviced by that network service provider and a count of the number of those subscribers who subscribe to a channel to which a content file has been added may be determined.

A content file may have been added to a regional channel. That is some channels may have a mostly local or regional audience e.g. the content for such a channel may be intended for subscribers of a particular region . For such a regional channel a network service provider which services end users living in that region may have a higher subscriber count of subscribers who subscribe to the regional channel than a network service provider which does not serve end users living in that region.

The system determines a metric indicative of anticipated availability of the content file from peers within the particular network service provider s network . For example the metric may be determined based on querying historical logs which may indicate a percentage of download requests for the content file that were serviced from peers within the particular network service providers network e.g. as compared to requests serviced from a proxy cache an external peer or a content and directory database e.g. direct downloads from the content and directory database .

The system identifies a size of the content file . The size of a content file may be the size that the content file occupies in storage. The size may be determined for example by querying metadata associated with the file. The size may also be determined by querying a database system for the size of database content associated with the content file or by querying a file system for a file attribute which indicates the size of the content file. As another example the size of the content file may be computed by processing the file.

The system determines for the content file an anticipated download score that is indicative of bandwidth anticipated to be used by the particular network service provider in servicing download requests for the content file based on the identified subscribers the determined metric and the identified size of the content file . As an example suppose that the content file has been added to a regional channel and that a first network service provider services end users living in a region associated with the regional channel and a second network service provider does not service end users living in the region associated with the regional channel. The number of users e.g. ten thousand serviced by the first network service provider who subscribe to the channel which includes the content file may be higher than the number of users e.g. two hundred serviced by the second network service provider who subscribe to the channel which includes the content file. In this example the anticipated download score for the first network service provider may be higher than the anticipated download score for the second network service provider.

In general the anticipated download score for the content file and a particular network service provider increases as the anticipated number of subscribers serviced by that particular network service provider and who subscribe to the channel which includes that content file increases. Similarly the anticipated download score for a content file may increase as the size of the file increases. In contrast an anticipated download score for the content file and a particular network service provider may decrease as the metric indicative of anticipated availability of the content file from peers within the particular network service provider s network increases. In other words the more likely a content file is to be serviced from a peer media player downloader device within the particular network service provider s network the less likely the download request for the content file will increase bandwidth usage on the network service provider s network e.g. as compared to bandwidth usage incurred if the request is serviced by a proxy cache by retrieving the content file from an external peer or by downloading the content file from a content and directory database e.g. the content and directory database .

An anticipated download score for a content file may be based on other factors. For example attributes of a channel to which the content file has been added and or attributes of the content curator who defined the channel may be considered when determining an anticipated download score. For example anticipated download scores for content files included in popular channels or in channels defined by popular content curators e.g. even if the channel is a newly created channel may be higher than anticipated download scores for content files included in unpopular channels. A channel or content curator may be considered a popular channel for example based on a total number of subscribers. As another example an anticipated download score for a content file may be based on a subscriber ranking of the channel the content file is included in and or a subscriber ranking of the content curator who defined the channel with content files associated with higher channel or content curator rankings having higher anticipated download scores than content files associated with lower channel or content curator user rankings.

Returning to the system determines for each of multiple content files a cache benefit score based on the actual download score for the corresponding content file and or the anticipated download score for the corresponding content file . In some implementations when determining a cache benefit score for a content file a weight associated with an actual download score associated with the content file is the same as a weight associated with an anticipated download score associated with the content file. In some implementations a weight associated with the actual download score for a content file may be higher than a weight associated with the anticipated download score for a content file and in other implementations a weight associated with the anticipated download score for a content file may be higher than a weight associated with the actual download score for a content file. In other words in some implementations a cache benefit score may be calculated as a simple sum of a corresponding actual download score and a corresponding anticipated download score. In other implementations a calculation more complex than a simple sum may be performed. In some implementations cache benefit scores may be periodically updated. For example cache benefit scores for content files may be calculated or recalculated on a hourly daily or weekly basis. The cache benefit scores also may be updated when relatively high periods of download activity are detected. The cache benefit scores further may be updated in as to close real time as possible so that the cache is constantly updating to store the most relevant content to facilitate the best performance.

The system selects content files to include in the proxy cache based on the determined cache benefit scores . For example the system may access from electronic storage a threshold cache benefit score and may compare each of the determined cache benefit scores to the accessed threshold cache benefit score. The system may determine whether each of the determined cache benefit scores indicates a cache benefit that exceeds a cache benefit indicated by the accessed threshold cache benefit score and may select one or more content files having a cache benefit score that indicates a cache benefit that exceeds a cache benefit indicated by the accessed threshold cache benefit score. As another example the system may identify from among the multiple content files for which a cache benefit score was determined a threshold number of content files e.g. one hundred having cache benefit scores that indicate a highest cache benefit and may select the threshold number of content files having cache benefit scores that indicate a highest cache benefit.

The system monitors actual and or anticipated download information across multiple different network service providers . As mentioned above a network service provider may be associated with or may serve subscribers in a particular region. A particular region may be serviced by more than one network service provider. Some network service providers may service multiple regions or may service all of multiple regions included in an area serviced by a content delivery network. For each network service provider associated with a content delivery network actual and or anticipated download information may be monitored and may be stored for example in a database of a network server system.

For example illustrates an example system which includes multiple network service providers. The system includes a content delivery network through which content is delivered to subscribers. Subscribers may subscribe to one or more channels. Channel information such as channel definitions and supplementary channel information may be stored in a content curator and channel database . Channel content may include among other content Internet content and licensed content . Channel content may be stored in a content and directory database .

Content may be delivered to end users using the content delivery network and one of multiple network service providers e.g. ISP one ISP two ISP N . Each network service provider includes a respective proxy cache . A cache loader may send content to the proxy caches and .

Returning to the system groups the monitored actual and or anticipated download information by network service provider . For example the monitored actual and or anticipated download information may be grouped by a network service provider identifier field in a database system. For instance in the example of actual and or anticipated download information for the network service providers may be grouped by a network service provider identifier database field and stored in the content and directory database and or in the cache loader .

The system determines for each of the multiple different network service providers cache benefit scores for content files based on the grouped actual and or anticipated download information for the network service provider . For instance in the example of for each content file included in the content and directory database the cache loader may determine a cache benefit score for the content file for each of the network service providers and may store the determined cache benefit scores in the content and directory database and or in the cache loader .

The system selects for each of the multiple different network service providers content files to include in the proxy cache based on the determined cache benefit scores the selected content files being different among the multiple different network service providers . For example the system may access from electronic storage a threshold cache benefit score and may compare each of the determined cache benefit scores to the accessed threshold cache benefit score where each of the determined cache benefit scores is associated with a content file and with a network service provider. The system may determine whether each of the determined cache benefit scores indicates a cache benefit that exceeds a cache benefit indicated by the accessed threshold cache benefit score. If a cache benefit score indicates a cache benefit that exceeds a cache benefit indicated by the accessed threshold cache benefit score the content file associated with the cache benefit score may be stored in a proxy cache of the network service provider associated with the cache benefit score.

For instance in the example of a content file File is included in the proxy cache of the network service provider but is not included in the proxy caches of the network service providers which may be because a cache benefit score associated with the content file File and the network service provider exceeded a threshold while cache benefit scores associated with the content file File and the network service provider or did not exceed a threshold. For example the content file File may be included in a regional channel where a majority of subscribers subscribing to the regional channel live in an area serviced by the network service provider . The network service providers for example might not service users who live in the region associated with the regional channel. The network service provider may service a relatively large number of subscribers who subscribe to the channel which includes the content file File so actual and anticipated download scores for the content file File may be higher for the network service provider than for the network service providers who have a smaller number of subscribers possibly zero for the channel which includes the content file File .

A content file may be included in the proxy cache of more than one network service provider. For example the content files File and File are each included in both the proxy cache of the network service provider and in the proxy cache of the network service provider . As another example the content file File is included in both the proxy cache of the network service provider and in the proxy cache of the network service provider . Although the example of illustrates three content files included in each proxy cache the number of content files in each proxy cache may be different for each proxy cache and may be a much higher number of content files.

In some examples a threshold number of content files may be included in each proxy cache. For example a threshold number e.g. one hundred may be accessed from electronic storage. For each network service provider the top threshold number of cache benefit scores indicating the highest cache benefit may be determined and the content files associated with each of the determined cache benefit scores may be stored in the proxy cache of the network service provider. For instance in the example of a threshold number of three content files may have been determined resulting in three content files stored in each of the proxy caches . For example the top three cache benefit scores for the network service provider may be associated with content files File File and File while the top three cache benefit scores for the network service provider may be associated with content files File File and File and the top three cache benefit scores for the network service provider may be associated with content files File File and File .

Returning to the system controls the network service provider to store the subset of content files in the proxy cache . For instance in the example of the cache loader may retrieve the subset of content files from the content and directory database and may send the subset to the proxy cache over the content delivery network or over another network such as the Internet.

Returning to the system controls the user media player downloader devices to attempt to use the proxy cache as a peer to download a content file prior to using an external peer accessible to the user media player downloader devices on an external network through the network service provider . In some implementations an internal peer may be used prior to using the proxy cache or an external peer. Downloading from internal peers proxy caches and external peers is described in more detail below with respect to .

The system identifies peers in a same block of a network service provider s network as a media player downloader device attempting to download a content file . For example illustrates a system which includes a network service provider network . A media player downloader device is in the same block of the network service provider as media player downloader device peers and .

Returning to the system attempts to download the content file from the identified peers in the same block of the network service provider s network . For instance in the example of the media player downloader device may attempt to download a content file from either the peer media player downloader device or the peer media player downloader device .

The system determines whether the download of the content file from the identified peers in the same block of the network service provider s network was successful . For instance in the example of the media player downloader device may determine that the download of the content file from a peer is unsuccessful if for example the content file is unavailable from both the media player downloader device and the media player downloader device . As another example the media player downloader device may determine that an attempt to download the content file from the peer media player downloader device or the peer media player downloader device was unsuccessful e.g. due to a communications failure . As yet another example the media player downloader device may determine that an attempt to download the content file from either the peer media player downloader device or the peer media player downloader device was successful e.g. due to an indication of a successful file transfer .

If the download of the content file from the identified peers in the same block of the network service provider s network was successful the process ends . If the download of the content file from the identified peers in the same block of the network service provider s network was not successful the system attempts to download the content file using a proxy cache maintained by the network service provider as a peer . For instance in the example of the media player downloader device may attempt to download the content file from a proxy cache associated with the network service provider .

The system determines whether the download of the content file using a proxy cache maintained by the network service provider as a peer was successful . For instance in the example of a cache loader server may inform the media player downloader device whether the content file is available in the proxy cache . As another example the media player downloader device may determine whether a download of the content file from the proxy cache was successful.

If the download of the content file using a proxy cache maintained by the network service provider as a peer was successful the process ends . If the download of the content file using a proxy cache maintained by the network service provider as a peer was not successful the system downloads the content file from an external peer . For instance in the example of the content file may be downloaded over the Internet from an external BitTorrent client included in a BitTorrent swarm where the BitTorrent client is outside of the network serviced by the network service provider .

The system determines whether to cache the downloaded content file in the proxy cache . For example a cache benefit score associated with the content file and with the network service provider may be determined and if the determined cache benefit score is greater than a threshold cache benefit score the content file may be stored in the proxy cache so that future download requests for the content file may be serviced from the proxy cache rather than the BitTorrent client .

The system identifies one or more new content files to include in a proxy cache . For example one or more content files may be identified in response to determined cache benefit scores associated with the content file s being greater than a threshold.

The system determines the size of the one or more new content files and storage space available in the proxy cache . The size of a content file may be the size that the content file occupies in storage. The size may be determined for example by querying metadata associated with the file. The size may also be determined by querying a database system for the size of database content associated with the content file or by querying a file system for a file attribute which indicates the size of the content file. As another example the size of the content file may be computed by processing the file. The storage space available in the proxy cache may be determined for example by querying a space available setting which is maintained as content files are added and removed from the proxy cache. As another example the storage space available in the proxy cache may be determined by determining the amount of space occupied by the content files currently in the cache and subtracting that amount from the total storage capacity of the proxy cache.

The system determines whether space is available in the proxy cache to accommodate the one or more content files . For example the system may compare the determined storage size of the one or more content files to the determined amount of storage space available in the proxy cache. If the determined storage size of the one or more content files is less than or equal to the amount of storage space available in the proxy cache the system may determine that space is available in the proxy cache to accommodate the one or more content files. If the determined storage size of the one or more content files is greater than the amount of storage space available in the proxy cache the system may determine that space is not available to store some or all of the one or more content files.

If space is available in the proxy cache the system stores the one or more new content files in the proxy cache without removing previously stored content files . For example a cache loader server may transfer the one or more content files to the proxy cache.

If space is not available in the proxy cache the system determines the cache benefit of maintaining previously stored content files in the proxy cache . For example illustrates an example proxy cache and a content file to add to the proxy cache . The cache benefit associated with adding the content file to the proxy cache has been determined to be high. The proxy cache includes previously stored content files . The cache benefit of maintaining content files in the proxy cache has been determined to be high while the cache benefit of maintaining content files has been determined to be medium and the cache benefit of maintaining the content file has been determined to be low.

Returning to the system determines the size of previously stored content files relative to the size of the one or more new content files . For example as illustrated in the previously stored content file is larger than the new content file and the previously stored content files are each smaller than the new content file .

The system selects one or more of the previously stored content files to remove based on the determined cache benefit and the determined relative size . For instance in the example of a consideration may be made to remove the content file since it has a lower cache benefit score than the new content file . However removing the previously stored content file does not create enough space to make room for the new content file . One approach may be to remove both the previously stored content files and . Another approach may be to remove only the previously stored content file e.g. since the content file is larger than the new content file . It may be determined that removing one content file with a medium cache benefit e.g. content file is preferred over removing two smaller content files e.g. content files . Specifically the cache benefit of maintaining both the content files and may outweigh the cache benefit of maintaining the content file alone.

The system replaces the one or more selected content files with the one or more new content files . For instance in the example of a modified proxy cache is shown which illustrates the effects of removing the content file from the proxy cache and adding the content file to the proxy cache . Content files and from the proxy cache are maintained in the modified proxy cache as illustrated by content files . The new content file has been added to the proxy cache as illustrated by content file . The proxy cache includes excess space e.g. accounting for the difference in size between the new content file and the removed content file . The excess space may be used to store another content file in the proxy cache either by itself or in combination with removal of one of the content files stored in the proxy cache.

The system includes a processor a memory a storage device and an input output device . Each of the components and are interconnected using a system bus . The processor is capable of processing instructions for execution within the system . In one implementation the processor is a single threaded processor. In another implementation the processor is a multi threaded processor. The processor is capable of processing instructions stored in the memory or on the storage device to display graphical information for a user interface on the input output device .

The memory stores information within the system . In one implementation the memory is a computer readable medium. In one implementation the memory is a volatile memory unit. In another implementation the memory is a non volatile memory unit.

The storage device is capable of providing mass storage for the system . In one implementation the storage device is a computer readable medium. In various different implementations the storage device may be a floppy disk device a hard disk device an optical disk device or a tape device.

The input output device provides input output operations for the system . In one implementation the input output device includes a keyboard and or pointing device. In another implementation the input output device includes a display unit for displaying graphical user interfaces.

The features described can be implemented in digital electronic circuitry or in computer hardware firmware software or in combinations of them. The apparatus can be implemented in a computer program product tangibly embodied in an information carrier e.g. in a machine readable storage device for execution by a programmable processor and method steps can be performed by a programmable processor executing a program of instructions to perform functions of the described implementations by operating on input data and generating output. The described features can be implemented advantageously in one or more computer programs that are executable on a programmable system including at least one programmable processor coupled to receive data and instructions from and to transmit data and instructions to a data storage system at least one input device and at least one output device. A computer program is a set of instructions that can be used directly or indirectly in a computer to perform a certain activity or bring about a certain result. A computer program can be written in any form of programming language including compiled or interpreted languages and it can be deployed in any form including as a stand alone program or as a module component subroutine or other unit suitable for use in a computing environment.

Suitable processors for the execution of a program of instructions include by way of example both general and special purpose microprocessors and the sole processor or one of multiple processors of any kind of computer. Generally a processor will receive instructions and data from a read only memory or a random access memory or both. The elements of a computer may include a processor for executing instructions and one or more memories for storing instructions and data. Generally a computer will also include or be operatively coupled to communicate with one or more mass storage devices for storing data files such devices include magnetic disks such as internal hard disks and removable disks magneto optical disks and optical disks. Storage devices suitable for tangibly embodying computer program instructions and data include all forms of non volatile memory including by way of example semiconductor memory devices such as EPROM EEPROM and flash memory devices magnetic disks such as internal hard disks and removable disks magneto optical disks and CD ROM and DVD ROM disks. The processor and the memory can be supplemented by or incorporated in ASICs application specific integrated circuits .

To provide for interaction with a user the features can be implemented on a computer having a display device such as a CRT cathode ray tube or LCD liquid crystal display monitor for displaying information to the user and a keyboard and a pointing device such as a mouse or a trackball by which the user can provide input to the computer.

The features can be implemented in a computer system that includes a back end component such as a data server or that includes a middleware component such as an application server or an Internet server or that includes a front end component such as a client computer having a graphical user interface or an Internet browser or any combination of them. The components of the system can be connected by any form or medium of digital data communication such as a communication network. Examples of communication networks include e.g. a LAN a WAN and the computers and networks forming the Internet.

The computer system can include clients and servers. A client and server are generally remote from each other and typically interact through a network such as the described one. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client server relationship to each other.

A number of implementations have been described. Nevertheless it will be understood that various modifications may be made without departing from the spirit and scope of the disclosure. Accordingly other implementations are within the scope of the following claims.

