---

title: Method and system providing compatibility between two different controllers
abstract: Techniques for providing compatibility between two different game controllers are disclosed. When a new or more advanced controller is introduced, it is important that such a new controller works with a system originally configured for an existing or old controller. The new controller may provide more functionalities than the old one does. In some cases, the new controller provides more sensing signals than the old one does. The new controller is configured to work with the system to transform the sensing signals therefrom to masquerade as though they were coming from the old controller. The transforming of the sensing signals comprises: replicating operational characteristics of the old controller, and relocating virtually the sensing signals to appear as though the sensing signals were generated from inertial sensors located in a certain location in the new controller responsive to a certain location of the inertial sensors in the old controller.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08795078&OS=08795078&RS=08795078
owner: AiLive Inc.
number: 08795078
owner_city: Sunnyvale
owner_country: US
publication_date: 20101024
---
This is a continuation in part of co pending U.S. application Ser. No. 12 020 431 entitled Self Contained Inertial Navigation System for Interactive Control Using Movable Controllers filed Jan. 25 2008 which claims the priority of the following applications U.S. application Ser. No. 11 486 997 entitled Generating Motion Recognizers for Arbitrary Motions filed Jul. 14 2006 now U.S. Pat. No. 7 702 608 U.S. application Ser. No. 11 820 207 entitled Generating Motion Recognizers for Arbitrary Motions filed Jun. 18 2007 now U.S. Pat. No. 7 636 645 and U.S. application Ser. No. 12 709 523 entitled Systems and methods for utilizing personalized motion control in virtual environment filed Feb. 22 2010 and U.S. Provisional Application 61 333 749 entitled Long Term Controlled Tracking of Motion Sensing Devices filed May 11 2010.

The invention generally is related to the area of computer video gaming and more particularly related to game controllers with full functionalities where a game controller as designed is preferably independently operable in one hand and fully functions without any attachments or dongles. In one application two game controllers as designed may be used respectively in two hands the present invention is further related to techniques for distinguishing which hand is holding which controller when two of the controllers are being held by a user. The use of two controllers may be applied to a classic control by one user one or two handed freeform motion control by one user or a one handed freeform motion control by two users. To allow the controller to work with existing game systems techniques are also provided for the compatibility between two different controllers.

A game controller is a user interactive controlling device to control a playable character or object or otherwise provide input in a video game or an entertainment. Such a controller is typically connected to a game console or computer by means of a wire cord or nowadays by means of wireless connection. Controllers which have been classified as games controllers are keyboards mice game pads joysticks etc. Special purpose devices such as steering wheels for driving games and light guns for shooting games are also game controllers.

The Nintendo Wii Remote wireless controller and the Playstation Move controller are examples of the most recent state of the art in user interactive controllers for computer display game systems. They are movable wireless remote controllers to be held in hands of users. They both come with other peripheral attachments and controllers that help correct for control deficiencies. The Wii Remote uses built in accelerometers to sense and measure movements of the hand of a player. It includes an infrared sensitive camera which can be pointed at an LED sensor bar placed near a TV to obtain some positional information in a 3D space. This design allows users to control a game using physical gestures pointing and traditional button presses. The controller connects to a console using Bluetooth and features a rumble pack that can cause the controller to vibrate as well as an internal speaker to generate various sounds. As a user moves the controller in reacting to a display the controller transmits sensor data to the console via conventional short range wireless RF transmissions. One expansion device for the Wii Remote is the Wii Motion Plus. The Motion Plus adds a gyroscope sensor to the Wii Remote giving a total of six independent sources of position and orientation information. The Playstation Move is similar in many regards to the Wii Remote plus Wii Motion Plus.

These types of controllers however are limited in the functionality they provide. The Wii and Playstation3 game systems may have recognized the strong value in providing players with an analog stick for more natural control of movement or camera pointing. However neither system seems to have surmounted the challenges involved with providing this functionality for their independently operable motion controller. So both systems are being shipped with an additional controller with an analog stick. These additional devices are wired or externally attached to the primary controller. For the Nintendo Wii this additional device is called Nunchuk. For the Sony Playstation3 this additional device is called Sub. More broadly players today either have access to a one handed limited freeform motion game control modality or a dual analog stick classic control modality like the Playstation 2 dual shock controller or similar controllers for the Gamecube or the Xbox or a highly constrained non freeform i.e. wired mix of the two approaches.

There are at least two key challenges in providing game controllers that are fully functional freeform controllers meaning that they are independently operable motion sensitive able to support motion recognition and motion tracking for one or both hands and carry a full complement of buttons triggers and analog sticks.

First both children and adults with child or adult sized hands must be able to comfortably hold and operate the control affordances available on the controller with either the left or the right hand.

Second the system must make it hard or impossible to confuse which controllers are in which hands or with which people to avoid frequent player frustration. For example if a player is holding two identical controllers one in each hand and puts them down for a moment how often will they pick up the wrong controller when they come back to the game If the wrong hand picks up the wrong controller the motion control results would be subtly wrong since for example the inertial data corresponding to a left handed motion will not match that for a corresponding right handed motion. The resulting frustration would be analogous to having a TV remote control that works incorrectly half the time you pick it up. Although most game controllers today make it clear which controller is connected to which port with an LED on the controller none solves the significant technical problem of automatically detecting and displaying which hand is operating which controller in real time without user intervention.

The teachings in the present invention resolve the technical hurdles and detail the first fully functional free form motion controllers for games. Players have the full freedom to use both hands independently for motion control games with no constraints between them. The same controllers allow any form of one handed operation and also support two handed Halo style classic controls. The system can automatically detect which controller belongs to which player and which hand and report that to the player. There is significant value in providing new control interfaces for the video gaming industry and other areas requiring interactive controls.

This section is for the purpose of summarizing some aspects of the present invention and to briefly introduce some preferred embodiments. Simplifications or omissions in this section as well as in the abstract may be made to avoid obscuring the purpose of this section and the abstract. Such simplifications or omissions are not intended to limit the scope of the present invention.

The present invention generally pertains to a controller with full functionalities in a sense that the controller does not need any attachment and is operable with one hand to fully control an interactive environment being shown. The sensing signals from the controller are sufficient to derive orientations and positions of the controller in six degrees of freedom. According to one aspect of the present invention when two of such controllers are being used by one user one embodiment of the present invention is able to distinguish which hand is holding which controller without the intervention of the user. To allow the controller to work with existing game systems another aspect of the present invention is to provide the compatibility of the controller to an old controller.

Depending on implementation the present invention may be implemented as a method an apparatus or part of a system. According to one embodiment it is a method for movement based controller disambiguation the method comprises receiving in a processing unit a first motion sensing stream and a second motion sensing stream from a first controller and a second controller respectively when both the first and second controllers are moved by a user in response to a virtual interactive environment being displayed each of the first and second motion sensing streams being sufficient to derive estimated positions and orientations of the first or the second controller in six degrees of freedom over time computing in real time the estimated positions and orientations of each of the first and second controllers and determining a mapping from each of the first and second controllers with a corresponding one of the first and second motion sensing streams to locations in a world frame of reference relative to a display of the virtual interactive environment.

According to another embodiment it is a system for movement based controller disambiguation the system comprises at least a first controller and a second controller respectively producing first and second sensing data streams when both of the first and second controllers are moved by a user in response to a virtual interactive environment being displayed each of the first and second motion sensing data streams being sufficient to derive estimated positions and orientations of the first or the second controller in six degrees of freedom over time and a processing unit receiving wirelessly the first and second sensing data streams configured to compute in real time the estimated positions and orientations of each of the first and second controllers and determine a mapping from each of the first and second controllers with a corresponding one of the first and second motion sensing streams to locations in a world frame of reference relative to a display of the virtual interactive environment.

According to still another embodiment it is a method for providing compatibility of a first controller to a second controller the method comprises receiving inertial sensor data from the first controller and transforming the inertial sensor data to masquerade as though the inertial sensor data were coming from a set of inertial sensors in the second controller. The transforming of the inertial sensor data comprises replicating operational characteristics of the inertial sensor data of the second controller and relocating virtually the inertial sensor data to appear as though the inertial sensor data were generated from inertial sensors located in a certain location in the first controller responsive to a certain location of the inertial sensors in the second controller. Depending on implementation the operation of the transforming is executed in a driver for the first controller or a software module running on a processing unit configured to work with the second controller and the transformed inertial sensor data from the first controller works robustly with motion recognizers and motion trackers built for the second controller.

According to still another embodiment it is a personal control mechanism comprising the personal control mechanism comprises pair of controllers each of the controllers including a housing having at least a forward end a top surface and a bottom surface the forward end including an emitter emitting light to be captured by a receiver remotely located the top surface including a number of buttons and a joystick operable by a finger of one hand the bottom surface including a trigger operable by another finger of the hand the housing sized comfortably to fit into either hand and having a holding portion designed in a way that the trigger the buttons and the joystick are readily operated when the holding portion is being held in either hand and a plurality of inertial sensors producing sensing signals that are sufficient to derive relative positions and orientation in six degrees of freedom. The sensing signals of each of the controllers are received in a processing unit configured to generate a virtual interactive environment in which at least one of objects is responsive to the sensing signals of either one of the controllers. The sensing signals from the two controllers are processed in such a way that the two controllers are functioning to provide a classic control by one user one or two handed freeform motion control by one user or a one handed freeform motion control by two users.

According to yet another embodiment it is a personal control mechanism for a user the personal control mechanism comprises a housing having at least a forward end a rearward end a top surface and a bottom surface the forward end including an emitter emitting a light beam to be captured by a receiver remotely located the rearward end including a socket to allow the handheld controller to be charged when the socket is plugged with a power charger the top surface including a number of buttons and a joystick operable by a finger of the hand the bottom surface including a trigger operable by another finger of the hand the housing sized comfortably to fit into the hand and having a holding portion designed in a way that the buttons and the joystick are readily operated by the finger when the holding portion is being held in the hand a plurality of inertial sensors producing sensing signals that are sufficiently to derive relative positions and orientation in six degrees of freedom a processor provided to process the sensing signals and an action signal from one of the buttons and the joystick when the one of the buttons and the joystick is operated and a wireless module coupled to the processor to transmit the sensing signals and the action signal to a base unit remotely located the base unit configured to derive the positions and orientation in six degrees of freedom from the processed sensing signals and producing a virtual environment in which at least one object being controlled by the handheld controller moves according to the relative positions and orientation and reacts according to the action signal.

One of the objects features and advantages of the present invention is to provide a lot of flexibility in controlling a virtual environment. The use of the controllers as designed is applicable to a classic control by one user one or two handed freeform motion control by one user or a one handed freeform motion control by two users.

Other objects features benefits and advantages together with the foregoing are attained in the exercise of the invention in the following description and resulting in the embodiment illustrated in the accompanying drawings.

The detailed description of the invention is presented largely in terms of procedures steps logic blocks processing and other symbolic representations that directly or indirectly resemble the operations of data processing devices coupled to networks. These process descriptions and representations are typically used by those skilled in the art to most effectively convey the substance of their work to others skilled in the art.

Reference herein to one embodiment or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment can be included in at least one embodiment of the invention. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment nor are separate or alternative embodiments mutually exclusive of other embodiments. Further the order of blocks in process flowcharts or diagrams representing one or more embodiments of the invention do not inherently indicate any particular order nor imply any limitations in the invention.

Referring now to the drawings in which like numerals refer to like parts throughout the several views. shows an exemplary configuration of a controller according to one embodiment of the current invention and shows a side view of the controller . The controller resembles a handheld device operable by a single hand. The controller includes a housing made of a light material e.g. plastic or the like . The housing has a generally parallelepiped shape extending in a longitudinal direction from front to rear. The overall size of the housing is small enough to be held by one hand of an adult or a child.

The housing includes at least four sides a forward end a rearward end not visible a top surface and a bottom surface not visible . The forward end includes at least one emitter designed to emit one or more signals. According to one embodiment the emitter includes an infrared LED emitting infrared light that may be received by an image sensor providing information that constrains where the controller is pointing at.

Depending on implementation besides a mechanism for a wrist strap attached thereto the rearward end may include a socket to allow the controller to be charged when the socket is plugged with a power charger. The socket may be also designed to communicate with another device. For example the socket may be in form of a USB socket the controller can thus communicate with a computing device through a USB cable to get updates or exchange data with a device that is Internet enabled. Optionally the housing provides an opening to accommodate a readable medium e.g. a flash memory card or microSD to transport data in or out the controller .

Near the front part of the top surface there are a number of operation or action buttons a joystick e.g. analog stick or analog joystick a status button a speaker and two hand indicators . Each of the action buttons is configured per a game to be played. The joystick is a control affordance comprising a stick that pivots on a base and reports its direction or angle and force. Depending on implementation the joystick may be implemented in different forms but primarily to be operated by a finger e.g. a thumb of a hand holding the controller . In one application through an operation on the joystick a user of the controller can instruct a direction in which a character or the like appearing in a virtual game world is to move or a direction in which a cursor is to move.

According to one embodiment the housing of the controller is sized comfortably to fit into one hand and designed to have a holding portion in a way that the buttons and the analog stick or joystick are readily operated by a thumb when the holding portion is being held in the hand and another finger is on a trigger . Depending on a game being played the trigger may be used as a gun trigger in a shooting game or a gas pedal in a driving game or a means to indicate grabbing. To facilitate a child s ability to comfortably reach the buttons analog stick and trigger the neck of the forward part of the housing is made as thin as possible and the undersurface of the housing under the joystick and buttons is deeply grooved to provide easy access for a finger. In one embodiment the buttons are small in a diamond formation and placed as close to the joystick as is feasible for a large handed adult to accurately access all. The grooves on the undersurface are symmetric along the longitudinal axis of the controller so that both the left and right hands have easy access to the trigger . The centerline of the joystick is lined up with the buttons so that both left and right hands of a person have equal access to the stick and the buttons .

The start button is provided to assist the user to start games to pause them and for other common interactions with electronic video games.

The speaker is provided to generate sounds e.g. the sound of a ball hitting a tennis racquet . The two hand indicators are provided but only one will be turned on to indicate whether the controller is being held by a left or right hand. There are other buttons each of which has a top surface thereof buried in the top surface so as not to be inadvertently pressed by the user.

One of the important features advantages or benefits provided by the controller is that it supports all classic control mechanisms that one would expect when playing a non motion sensitive computer video game where the player holds one of these controllers in each hand and has access to the dual analog stick dual trigger and multiple button control mechanics that were popularized by games like Halo. This includes control modalities that are comfortably operable by one hand of the person holding the controller.

Additionally because the controllers are independently operable in either hand and each controller is capable of generating inertial sensor signals sufficient to derive relative orientations and positions in six degrees of freedom the player may engage in free form motion control with both hands physically moving and generating motion sensitive control signals independently. Unless specifically stated a 6D location or locations of a controller includes 3 translational data and 3 angular data a position positions a location and locations are interchangeably used herein. Optionally with an external imaging device an optical signal emitted from each controller is captured and analyzed to help determine drift free orientations and positions in six degrees of freedom relative to the external imaging device in conjunction with the inertial sensor signals.

According to one embodiment there are at least three linear sensors and three rotation sensors each producing a signal when the controller is caused to move from one position to another position. The signals from the inertia sensors are coupled to a processor via interfaces to send the signals to a base unit not shown via one of the communication ports . Depending on implementation the communication port for transmitting the inertia sensor signals to the base unit may be based on Bluetooth or wireless data communication e.g. WiFi .

In operation an action signal is generated when one of the buttons and the joystick is manipulated. The action signal is also coupled to the processor via the interfaces . According to one embodiment the processor is configured by a module stored in memory to package the action signal together with the inertia sensor signals for transmission to the base unit.

In addition the processor is configured to drive one or more outputs depending on the action signal s and or the inertia sensor signals in conjunction with the virtual environment being displayed at the moment. Different from any controllers in the prior art and critical to the viability of a full featured control system including independently operable motion sensing controllers the processor is configured to indicate which hand is holding the controller by turning on one of the two indicators on the top surface of the controller in .

Unless specifically stated the base unit as used herein may mean any one of a dedicated videogame console a generic computer or a portable device. In reality the base unit does not have to be in the vicinity of the display and may communicate with the display via a wired or wireless network. For example the base unit may be a virtual console running on a computing device communicating with the display wirelessly using a protocol such as wireless HDMI. According to one embodiment the base unit is a network capable box that receives various data e.g. image and sensor data and transports the data to a server. In return the base unit receives constantly updated display data from the server that is configured to integrate the data and create update a game space for a network game being played by a plurality of other participating base units.

In one embodiment the LED emitters emit in the infrared spectrum so as to be largely invisible to human eyes and have a wide half power angle to facilitate easy detection over gross player movement and the camera is equipped to filter out wavelengths that are not matched to the LED emitters.

In another embodiment the LED signals from the emitters are detected with sub pixel accuracy and tracked from frame to frame on an image map that is generated by the camera . The per frame LED locations on the image map are used to eliminate the drift and other errors stemming from pure inertial sensor based tracking of the absolute orientations and positions of the controllers.

Once initial calibration is complete in two threads are initiated one has to do with driving the inertial sensors in the controllers and computing the 6D positions and orientations. The second thread has to do with driving the camera to track the LED locations of the controllers as they show up in the recorded image of the camera e.g. an X Y location in the image plane . In the processing unit receives inertial sensor data from each of the two controllers. In one embodiment the inertial sensors include a three axis accelerometer and a three axis gyroscope. In another embodiment the inertial sensing is provided by a three axis accelerometer combined with a 3 axis magnetometer whose output can be transformed to provide angular velocity. The main requirement is to have enough inertial information to support computation of the 6D orientation and position of each of the controllers in real time.

In the new positions and orientations of each controller is computed based on the last known positions and orientations the inertial forces recorded in and possibly other state internal to the inertial tracker.

In the 6D relative position and orientation for each controller as determined in is updated and used in conjunction with the last estimated relative depth for each controller and the last estimated X Y pointing location of each controller on the camera s image plane to compute a new estimated INERTIAL XY from the pointing and relative depth estimate for each controller. INERTIAL XY refers to the X and Y component of a part e.g. a tip of the controller on an image plane as determined in part in from the inertial estimates of the positions and orientations of the controller and the relative depth with respect to the display. The INERTIAL XY values are stored in for subsequent updating by and use by . Initially the pointing and relative depth estimates with respect to the display may be quite poor especially on the first pass where these estimates are initialized in . The estimates improve significantly after the first full pass through this process . Once the new estimates are computed the control passes back to to wait for the next set of inputs from the controllers. Typically inertial sensors can be read communicated and processed at a much higher rate than the image data.

In one embodiment the inertial sensor based tracking solution described in and and whose INERTIAL XY data is stored in is updated continuously and will typically update many times before a single image frame is processed and control in one thread passes to . In one embodiment every controller has its own thread and its inertial sensors are processed asynchronously with respect to the other controllers and the camera.

In each camera image frame is processed asynchronously to detect and track all the LEDs that are in the viewing frustrum of the camera . The output is the X Y pixel location in the pixel map i.e. image frame representing the center of the excitation area for each LED signal that was detected. Not all controllers may be represented in an image frame since not all controllers may be pointing toward the display and the camera at every moment. In one embodiment the image is scanned periodically to detect new LEDs which are then in subsequent frames tracked by scanning the pixels local to the last known X Y coordinates of the center of the area of LED excitation. Depending on implementation various measures may be taken to minimize signal disturbance to the excited pixels representing the LEDs. For example a filter may be used to enhance the wavelengths of the LEDs with respect to others from ambient lighting sources so that it is easy to process an image frame to locate the areas containing the LED. In one embodiment a classifier is built based on several features and the classifier is used to differentiate real LED signatures from false locations resulting from other lighting. In another embodiment the LED location is tracked to sub pixel accuracy by using a modified center of mass calculation for the LED patterns which when the controllers are being moved take on a comet like appearance.

The process passes from once the LED tracking scan is completed for a given image frame. In a collection of error estimates are computed for each possible pairing of the LED XY positions computed in to INERTIAL XY positions stored and continuously updated in . There are several possible error estimates of merit. One is a simple output error estimate the root mean squared error between the two XY positions i.e. sqrt x1 x2 2 y1 y2 2 . Another one is analogous to a minimum edit error what is the smallest change in the estimated controller position needed to move the INERTIAL XY pointing location from the current position to the LED XY position. For example imagine the INERTIAL XY as the splash of light on a wall created by a candle fixed to the end of a stick and the LED XY as the target point the minimum edit error is a measure of how much the stick must be moved to match the splash of light with the target point. It can be useful to consider the component estimates change position only or orientation only of the minimum edit error separately as well. Still another one is a vector difference between a vector composed of the last few frames of LED XY data and the corresponding time frame vector of INERTIAL XY data derivative error . Yet another one is the INERTIAL XY difference with the controller that last frame was matched with the current LED XY stability error .

In one embodiment a predictor is constructed and uses a regression estimate of some or all of the above errors to compute a final error. In another embodiment an estimate of the probability of the pairing is created and computed as a Dirichlet probability over a fixed number of passes through the loop to determine if this pairing is a bad match i.e. is incorrect. In another embodiment the averaged normalized estimate of all of the estimates that agree are returned. There are many possible combinations of error estimates it should be clear to those skilled in the art that exactly how the estimate is chosen is not a matter of significant concern as long as it is rational and data driven.

In and the movement based disambiguation process is effectively providing a second independent estimate of the 6D orientation and position of each controller. It is not necessary for this independent estimate to provide 2 degrees of freedom i.e. the XY location on an image frame the approach extends to an independent estimate of anywhere from 1 to 6 degrees of information. Viable alternatives to this optically driven LED and camera approach include a sonar based emitter receiver pair and magnetometer based approaches where enough is known about the ambient field.

In the error estimates of each possible pairing between controller based INERTIAL XY and camera based LED XY is received from and a new assignment is made that maps each controller to 0 or 1 LED XY points. In one embodiment this decision is not strictly based on the current minimal error but rather on a function of the current error estimates the overall stability of recent assignments and the degree of clarity that a previous assignment needs to be modified.

In the controller to LED XY assignments from are received and used to provide a mapping to the left or the right hand of the player. In one embodiment the significant assumption is made that players will face the display without crossing their hands and so the hand assignment is rather trivial given the relative LED XY positions in the image plane of each controller. In one embodiment a face tracker is used to verify that a human face is detected. An important feature and benefit of this invention is that players never need to think about which controller am I supposed to hold in which hand eliminating a significant barrier to this form of fully functional free form motion control.

In another embodiment additional camera independent inputs are used in this decision one of which is an inertial only recognizer which is analyzing the motion stream and returning a series of probabilities that each stream is sourced from a controller which is in one of four situations in the right hand of a right handed person in the right hand of a left handed person in the left hand of a right handed person or in the left hand of a left handed person. On average at rest over a longer period of time humans tend to hold controllers in such a way that they are inner pointing this and other tendencies can be picked up by a classifier trained on features related to the inertial signals received from one controller compared to the other controller.

In the internal state of the inertial tracker for each controller used in and is updated. This inertial state includes the most recent estimated orientation of the controller an absolute depth from the display and so from the camera a relative location pointing XY on the image plane velocity vector and various error estimates. The inertial state is corrected to adjust the estimated inertial position and orientation so that the pointing INERTIAL XY matches the paired LED XY. In one embodiment this entire adjustment is made during every visit to . In another embodiment the adjustment is smoothed out and collected over several passes through to avoid the appearance of jerkiness in the virtual interactive environment being shown on the display.

An important feature and benefit of this process is the ability to map from a virtual environment being displayed on the display to the world frame in reference to the display and the player. The ability to detect and report a hand assignment to the player is just one useful benefit and there are many more forms of player interaction with the physical and virtual world that are enabled by having access to the relative depth of both controllers and to their relationship with the player especially as this methodology is generalized to multiple players and multiple controllers.

It shall be noted that the process in is not limited to being applied to two controllers and one player. Those skilled in the art shall understand from the description that the process is applicable to any number of controllers and players. In one embodiment the process facilitates to disambiguate a number of controllers in which at least one player holds two controllers in each of his her hands and or at least one player holds one controller in one hand. Additionally the controller disambiguation in maps results to the world frame of reference by assigning a left or a right hand to the player that has picked up the controllers. One of the important features and advantages is that the image plane provides a representation of the world frame of reference and the mapping from controller to LED track in provides a mapping from controllers to world frame of reference that can be reflected accurately and in more detail to players in many useful and interesting ways for example as a key enabling technology for augmented reality applications.

In a FPS game a virtual in game camera is roughly positioned behind the shoulder of the player or the main protagonist in the game so the virtual interactive environment is showing virtual hands of an avatar and the view in front of it on the display. For a classic Xbox like controller the control paradigm is to map Left Analog Stick to movement in the environment and Right Analog Stick to both looking with the head and to aiming the gun. For PS3 Move or Wii Remote like controllers the control paradigm is to map Left Analog Stick to movement in the environment and to map Right Pointing to both looking with the head and to aiming the gun. In both these cases overloading one control affordance with two major activities looking and aiming causes many difficulties. For example how can one tell if the player wants to aim at a bad guy on the right side of the screen or just wants to look there 

With a fully function freeform motion controller an entirely new control paradigm is possible that is much more natural and does not have the common overloaded control affordance issues. The new mapping is Left Analog Stick for movement in the environment Right Analog Stick for looking with the head and Right Pointing to aim. The three major functions are disconnected and can be controlled separately. Thus there are significant benefits and advantages to adding new control paradigms to the video gaming industry. After all good control mechanisms are central to importance to good games.

According to one embodiment a fixed application programming interface API e.g. a standard device independent motion data API is provided for applications. The API abstracts away from details of the controllers e.g. the controllers of that are providing the motion signals and provides a registration interface with which the manufacturer or distributer or user of a new device can inform the system of the sufficient statistics of the device. This is an essential element for application developers the less device fragmentation there is the broader the abstract platform for a given motion sensitive application. An end user is exposed only indirectly to the benefits of the API in that they can now use a broader range of input devices when interacting with their motion sensitive applications. Additionally the same techniques used for device independence can be applied to ensure the backwards compatibility of the controllers in the present invention with most previous motion sensing controllers on the market before it. There are many benefits and advantages in providing personal motion control solutions that will work with applications that were designed originally for other motion control devices.

As known to those skilled in the art there are many different inertial sensing devices with a wide range of specifications error characteristics and capabilities. Operating a device with inertial sensors in one location based on the operation e.g. algorithm code and settings for a different device with sensors in a different location can pose serious barriers in many cases.

In the inertial sensor data coming from a controller is received. In a transformation of the sensor data is carried out to masquerade as though the inertial sensor data were coming from a set of inertial sensors in an old controller. For example a controller designed per one embodiment of the present invention is being used to replace a prior art controller. Depending on implementation the transformation may be carried out either in a driver for the controller or a software module running on a processing unit for the old controller which helps ensure the backwards compatible nature of the controller.

For example for a wide range of accelerometers if the maximum sensitivities and ranges are known and the respective locations of the sensor within the rigid controller body are known the output of two different devices can be mapped to each other without enough information loss to affect motion recognition. In one embodiment if the other device or controller is not equipped with a gyroscope or other means of providing angular velocity the gyroscope output data for the controllers in the present invention can simply be ignored.

In another embodiment the controllers have a SD card like interface e.g. disposed underneath the battery cover that allows an end user to swap out an older generation of inertial sensors placed on a chip that fits into that interface with a newer generation of inertial sensors. In this embodiment the associated driver for the updated controllers is provided and allows the newer sensors to be backwards compatible with the older sensors by masquerading as the older sensors for applications that require it. In some cases this means artificially cutting off the sensitivity ranges of the new sensors to match the older ones.

Device independence and backwards compatibility must also apply to tracking in a general motion control environment. One exemplary task is to track the positions and orientations of some visible part of the device in part so that the tracking results can be used as an input to recognition. When tracking a known position on a known device with known sensor locations a standard approach is to track the location of the sensors over time then at the end when reporting the results to the user report the known visible point on the rigid body of the controller instead of reporting the actual sensor position. For example if the sensors are in the center of mass of the controller the position and orientation of the center of mass may be first tracked then the location of the visible point is computed as Pos orientation vecAcc where Pos is the tracked location of the inertial sensors in world frame orientation is the orientation of the controller and vecAcc is the location of the inertial sensors relative to the visible point that are being located.

A more beneficial but challenging problem is to continue using a set of motion recognizers of the old controllers when the device characteristics of the old controllers differ from a new device being recognized. In other words data from inertial sensors in a new controller and located in a specific position is transformed to act as though the data is being generated from the old sensors residing in a different location in the old controller. The naive approach to transforming the data fails in practice because inertial sensor noise is too strong.

According to one embodiment in the sensor noise is accounted for to allow device independent recognition of the controller using the motion recognizers provided for the old controller. The following methods of accounting for sensor noise allow device independent recognition through a standard motion data API. To facilitate the understanding of the approach the following pseudo code cutout shows the steps involved in correcting inertial readings from a sensor not located at the center of mass for which no corrections are needed for angular velocity data if the object is a rigid body and angular velocity data is used to estimate the readings that would have been measured at the center of mass as follows.

1 In practice it is noted that measuring angular acceleration over multiple periods of sensor data gave smoothed estimates that helped reduce the effect of noise on the calculated linear accelerations. The number of readings used varied according to the sampling rate and noise characteristics of the particular gyroscopes.

2 Angular acceleration was reduced when the corresponding angular velocity was small. Most acceleration was found to be a result of noise in this case 

Different embodiments of the present inventions have been described above. One skilled in the art will recognize that elements of the present invention may be implemented in software but can be implemented in hardware or a combination of hardware and software. The invention can also be embodied as computer readable code on a computer readable medium. The computer readable medium can be any data storage device that can store data which can be thereafter be read by a computer system. Examples of the computer readable medium may include but not be limited to read only memory random access memory CD ROMs DVDs magnetic tape hard disks optical data storage devices or carrier waves. The computer readable media can also be distributed over network coupled computer systems so that the computer readable code is stored and executed in a distributed fashion.

The present invention has been described in sufficient detail with a certain degree of particularity. It is understood to those skilled in the art that the present disclosure of embodiments has been made by way of examples only and that numerous changes in the arrangement and combination of parts may be resorted without departing from the spirit and scope of the invention as claimed. While the embodiments discussed herein may appear to include some limitations as to the presentation of the information units in terms of the format and arrangement the invention has applicability well beyond such embodiment which can be appreciated by those skilled in the art. Accordingly the scope of the present invention is defined by the appended claims rather than the forgoing description of embodiments.

