---

title: Targeted data collection for positioning systems
abstract: Selecting devices from which to receive data for adjusting the performance of a positioning system. The positioning system infers the location of the devices based on beacons observed by the devices. The performance of the positioning system is compared to performance targets. One or more of the devices are selected based on the comparison. Data collection from the devices is adjusted to affect performance of the positioning system (e.g., improved or reduced). For example, if the positioning system predicts positions poorly for a particular area, data collection from selected devices within the particular area may be increased.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08688396&OS=08688396&RS=08688396
owner: Microsoft Corporation
number: 08688396
owner_city: Redmond
owner_country: US
publication_date: 20100202
---
Some existing systems such as global positioning systems determine the location of devices using satellites. Other systems such as collaborative systems determine the location of the devices based on crowd sourced data. The crowd sourced data includes location data obtained from mobile devices such as laptops netbooks and cellular telephones. The quality and frequency of the obtained crowd sourced data varies based on for example device type location network operating system and other variables. While some existing systems are able to limit crowd sourcing to certain device types and operating systems the existing systems have limited ability to control collection of the crowd sourced data to exclude poor quality data to minimize the impact of data collection on the devices and to adjust performance of the positioning system. For example the user experience on the reporting devices may degrade based on the frequency and quantity of data collection such that battery life processing time and storage on the reporting devices may be negatively affected.

Embodiments of the disclosure enable selectively collecting data based on performance targets for a positioning system. A positioning system collects data from at least one of a plurality of devices. Performance of the positioning system is determined. Performance targets associated with the positioning system are accessed. One or more of the devices are selected based at least on the determined performance and the accessed performance targets. Data collection from the selected devices is adjusted to affect performance of the positioning system.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

Referring to the figures embodiments of the disclosure enable at least the selective targeting of devices for data collection based on projected returns for enhancing the performance of a positioning system . In some embodiments at any moment in time or at a regular interval a subset of the devices is dynamically selected to provide crowd sourced data. The devices are selected for a predefined period of time and the data to be collected represents a minimum amount of data to meet performance targets for the positioning system . Aspects of the disclosure enable the positioning system to prioritize data collection from devices whose data may improve performance greater than those devices whose data may provide less of a projected return. Additionally aspects of the disclosure prioritize data collection based on other factors such as location. For example in underperforming geographical areas aspects of the disclosure enable the positioning system to increase the collection of data from the devices that are average or under performing.

Referring again to an exemplary block diagram illustrates the positioning system inferring a location of a mobile device based on a beacon fingerprint provided by the mobile device . The mobile device e.g. a mobile telephone detects one or more beacons including cellular towers and wireless fidelity Wi Fi access points or other wireless access points WAPs . The detected beacons represent the beacon fingerprint. While aspects of the disclosure may be described with reference to beacons implementing protocols such as the 802.11 family of protocols embodiments of the disclosure are operable with any beacon for wireless communication. In the example of the mobile device detects the presence of beacons C C W and W.

The mobile device provides the detected beacon fingerprint to the positioning system via a network . The network includes a wireless cellular network in some embodiments but other types of networks such as Wi Fi and those providing Internet access are contemplated in other embodiments.

The positioning system stores or has access to data describing the approximate location of one or more of the beacons. The data is referred to as beacon reference data. The accuracy of the beacon reference data for a particular beacon varies based on the source of the beacon reference data for that particular beacon. For example for beacon reference data that is derived from crowd sourced data the accuracy of the beacon reference data is dependent on the quality of the crowd sourced data.

Using the approximate location of at least one of the beacons in the detected beacon fingerprint the positioning system operates to infer the position of the mobile device relative to the detected beacon fingerprint. The inferred position is provided to the mobile device .

Referring next to an exemplary block diagram illustrates a computing device selectively collecting data based on performance targets for the positioning system . The computing device collects data from one or more of the devices such as device through device N via the network . The positioning system communicates with the computing device to infer positions of one or more users upon request based on the collected data . The devices include for example mobile computing devices such as mobile device . However the devices may include any device executing instructions e.g. application programs to provide the data. The data includes beacon reference data or other data used to calculate the beacon reference data. For example other data may include a description of a landmark an intersection a historical description of a position and more. The devices may provide the data for collection at regular intervals e.g. with heartbeat messages upon request piggybacked on other messages from the devices upon geography changes or otherwise in accordance with a condition event or defined interval.

In some embodiments the devices include portable computing devices such as laptops netbooks gaming devices and or portable media players. Further each of the devices may represent a group of processing units or other computing devices.

Exemplary networks include wired and or wireless networks and may represent local area networks or global networks such as the Internet. In embodiments in which the network includes wireless networks the computing device and the devices may be enabled with technology such as BLUETOOTH brand wireless communication services secured or unsecured radio frequency identification RFID Wi Fi such as peer to peer Wi Fi ZIGBEE brand wireless communication services near field communication NFC and other technologies that enable short range or long range wireless communication.

The computing device has at least one processor and one or more computer readable media such as memory area . The processor includes any quantity of processing units and is programmed to execute computer executable instructions for implementing aspects of the disclosure. The instructions may be performed by the processor or by multiple processors executing within the computing device or performed by a processor external to the computing device e.g. by a cloud service . In some embodiments the processor is programmed to execute instructions such as those illustrated in the figures e.g. .

The memory area includes any quantity of media associated with or accessible to the computing device . The memory area may be internal to the computing device as shown in external to the computing device not shown or both not shown .

The memory area stores collected data received from the devices and creates and stores device attributes based on the collected data . The device attributes are created for each of the devices from which data was collected. The memory area further stores performance targets that represent goals for the positioning system user experience expectations or other performance related criteria. In some embodiments the performance targets include thresholds for metrics such as positional accuracy response time and coverage area.

The memory area further stores one or more computer executable components for implementing aspects of the disclosure. Exemplary components include a score component a target component a budget component and a source component . Operation of the components is discussed below with reference to .

At least a portion of the functionality of the various elements in is performed by other elements in or an entity e.g. processor web service server application program computing device etc. not shown in .

Referring next to an exemplary flow chart illustrates operation of the computing device to adjust data collection from devices based on a comparison between current performance of the positioning system and the performance targets . At the market is divided into a plurality of geographic areas. For example a city or other geographic region is subdivided into a plurality of smaller geographic regions such as in a two dimensional grid pattern having a predefined step size. The market may be divided according to any criteria including for example terrain zip code telephone area code or prefix population etc.

At the current performance of the positioning system is determined for each of the plurality of geographic areas. For example the current performance may be calculated e.g. a quality score may be calculated or measured. The current performance is determined based on the collected data and or device attributes . The device attributes represent characteristics of the devices . In some embodiments the device attributes are defined based at least in part on one or more of the following the collected data user profiles e.g. users of the devices data inferred from the devices or data inferred from the global positioning system GPS trails of the devices . For example the following attributes may be defined a device capability quality score primary geographic area secondary geographic area primary operational environment type secondary operational environment type and mobility pattern.

At the performance targets for the positioning system are accessed. Accessing the performance targets may include accessing one or more of the following a query success rate a time to fix value and a positional accuracy value. In some embodiments the performance targets are defined by an operator of the positioning system . In other embodiments the performance targets may be set by the users of the devices . For example the performance targets may be set based on feedback from the users or based on a subscription level of the users e.g. some users pay more for greater accuracy or response time . The performance targets are associated with the market such that different markets may have different performance targets . In some embodiments the performance targets are defined by location per application service user and or execution environment e.g. operating system executing on the devices .

At areas within the market where data collection is to be adjusted are identified. In some embodiments the current performance of the positioning system is compared to the performance targets to identify the areas where data collection is to be adjusted. If the current performance for a particular area does not meet the performance targets differs from the performance targets in excess of a pre defined amount or otherwise performs poorly the particular area is identified for data collection adjustment. For example the positioning system may be outperforming e.g. greater performance in particular areas while underperforming e.g. less performance in other areas. Data collection for the outperforming areas is scaled back limited or otherwise reduced while data collection for the underperforming areas is increased.

At the devices for which data collection is to be adjusted are selected. For example devices within the identified areas are selected based on the collected data and or device attributes . For example the device attributes may indicate that particular devices have a history of providing poor quality data or have a history of providing high quality data. At data collection from the selected devices is adjusted to affect performance of the positioning system . By adjusting the data collection embodiments of the disclosure operate to reduce the difference between the current performance and the performance targets . For example the quantity of devices from which data is collected may be increased or decreased. In another example for underperforming areas data from selected devices with a history of providing poor quality data is refused rejected or otherwise not stored. In some embodiments these selected devices are instructed to no longer provide the data e.g. blacklisted or to reduce the frequency of providing the data. Further the selected devices with a history of providing high quality data are white listed. Alternatively or in addition for outperforming areas the selected devices with a history of providing high quality data are adjusted to continue providing the data but at a reduced frequency e.g. only collect data when a predicted position is requested by those devices .

In some embodiments the devices are selected at based on a current battery level of the devices . In such embodiments at data collection from the devices with low battery levels is disabled or suspended for example. Similarly the devices may be selected based on other resources on the devices such as processor usage storage capacity network traffic and more.

Thus by execution of the operations at and aspects of the disclosure focus data collection on the devices that provide high quality data. By targeting particular devices to provide the data embodiments of the disclosure reduce the quantity of devices providing the data reduce the frequency of data collection and improve data quality. Further aspects of the disclosure enable the positioning system to adapt to changes in beacon presence e.g. addition or removal of cellular towers .

Adjusting the data collection may also include adjusting monetary incentives for participating in data collection. For example the devices that consistently provide high quality data may be offered a monetary or non monetary incentive to continue providing such data or to provide the data at an increased frequency.

In some embodiments the operations illustrated in are performed by the computing device . In other embodiments one or more of the operations illustrated in are performed by another computing device e.g. as a web service . For example the operations at and may be performed on each of the devices to enable self correction.

Further the operations illustrated in may be implemented as software instructions encoded on a computer readable medium in hardware programmed or designed to perform the operations or both. As an example the operations in may be implemented as computer executable components or other software such as in the components illustrated in . In such an example the score component when executed by the processor causes the processor to determine device attributes including one or more of a coverage value e.g. a query success rate an accuracy value e.g. an error radius value where a smaller value indicates greater accuracy and a response time value e.g. a time to fix value for each of the devices based on data collected from the devices . The target component when executed by the processor causes the processor to access the performance targets associated with the positioning system . The budget component when executed by the processor causes the processor to select one or more of the devices based at least on the device attributes determined by the score component and the performance targets accessed by the target component . The source component when executed by the processor causes the processor to adjust data collection from the devices selected by the budget component to affect performance of the positioning system . For example the source component adjusts the data collection by targeting the selected devices based on data density e.g. quantity of beacons within a particular area geographic area and or capabilities of the selected devices .

Referring next to an exemplary block diagram illustrates performance of the positioning system in different geographic areas of an exemplary market . In the example of the market has been divided into a grid pattern. Each of the areas within the market has been evaluated in accordance with the operations illustrated in . The result of performance of the operations is that particular areas in the market have been identified for data collection adjustment. In the example of the areas with the crosshatched patterns such as area represent the areas identified for data collection adjustment.

Referring next to an exemplary block diagram illustrates the location of devices within the various geographic areas of the market . To adjust data collection in the identified areas aspects of the disclosure select devices within the identified areas. In the example of devices D D D and D are selected. Devices D and D are in the same area and either or both of these devices may be selected for data collection adjustment. To illustrate the selection process device D is within an area that has not been identified for data collection adjustment and hence will not be selected.

Referring next to an exemplary block diagram illustrates collecting positioned beacon fingerprints to aid in inferring positions for unresolved beacon fingerprints. The system illustrated in represents an example of a location inference system or positioning system with adjustable data collection in accordance with aspects of the disclosure. However other systems elements and configurations are contemplated and within the scope of embodiments of the disclosure.

A mobile device provides a positioned beacon fingerprint to a data collector . The positioned beacon fingerprint or positioned beacon observation includes for example a beacon fingerprint e.g. a list of observed beacons along with associated position information such as from a GPS system. The data collector collects such data from a plurality of devices such as mobile device . The data collector also receives unresolved beacon fingerprints e.g. beacon fingerprints without position information from devices such as mobile device .

The data collector performs validation on the collected data and stores the validated positioned beacon fingerprints in a database . A refiner element performs data refining and model construction on the data stored in database and provides models to an inference engine . The inference engine receives the unresolved beacon fingerprints from devices such as the mobile device . The inference engine compares the unresolved beacon fingerprints to the models constructed by the refiner element to predict positions associated with the unresolved beacon fingerprints. The predicted position is returned to the devices e.g. mobile device . The inference engine may also compare the positioned beacon fingerprints with the predicted positions to calculate a prediction error measurement for the predicted positions.

In some embodiments the positioning system includes a plurality of methods for determining position information. For example the positioning system supports assisted GPS Wi Fi and cell identification Cell ID . The positioning system in these embodiments is able to switch between the methods to provide position information. In an example scenario a user with a mobile telephone obtains a GPS fix when entering a building and when exiting. While in the building the mobile telephone continues to collect beacon fingerprints. The position information corresponding to these unresolved beacon fingerprints is inferred from the obtained GPS fixes. In some embodiments the building layout and location of known WAPs within the building may also be used to make the inferences.

As an example the score for each area within a market M corresponds to a customer experience function represented by the following tuple or vector with three dimensions f f f M. The element frepresents a query success rate e.g. coverage as a percentage. The element frepresents a time to fix TTF value e.g. response time in milliseconds. The element frepresents an error radius e.g. positional accuracy in meters. An example tuple is 95 success rate 2 second time to fix 50 meter accuracy.

The customer experience function may be refined or modified as f f f M G to account for differing geographic environments G such as rural suburban dense urban and indoor. Further the customer experience function may be refined or modified as f f f M G A to account for differing application types A or service types . This accommodates applications with differing requirements such as just in time and just sufficient accuracy requirements.

Embodiments of the invention calculate each element of the tuple compare each calculated element to a performance target and adjust data collection as described herein. If the tuple is viewed in a three dimensional space an improvement in experience corresponds to moving from a lower positioned point to a higher positioned point. Given a starting point P with seed data and a target experience point P adjusting the data collection creates a trajectory from point Pto point P. There are many possible trajectories between the two points each representing improvements along the different dimensions. For example one trajectory may improve coverage faster while another may improve accuracy faster.

With regard to the market in the grid corresponds to a two dimensional grid of fixed step size e.g. s meters . The step size of the grid limits the accuracy and resolution of the system. Areas within the grid may be identified using an x y coordinate system. Using the tuple described above the customer experience function for a particular area at coordinate x y at time t is represented as f t f t f t M G A.

In some embodiments not shown the market may be represented as a three dimensional grid. Such a representation is useful in environments with differing elevations such as high rises parking structures above or below ground subways mountain resorts mines caves and the like.

Embodiments of the disclosure may target the devices based on one or more of the following device identifier round robin selection randomized selection over identified geographic areas quality of collected data e.g. higher quality may result in increased data collection data density e.g. lower density may result in increased data collection position query heat map e.g. more demand may result in increased data collection model quality e.g. large error distance or high query failure rate may result in increased data collection application quality of service agreements e.g. higher levels may result in increased data collection and device capability e.g. assisted GPS performance or indoor positioning performance .

While embodiments have been described with reference to data collected from users aspects of the disclosure provide notice to the users of the collection of data e.g. via a dialog box or preference setting and the opportunity to give or deny consent. The consent may take the form of opt in consent or opt out consent.

Exemplary computer readable media include flash memory drives digital versatile discs DVDs compact discs CDs floppy disks and tape cassettes. By way of example and not limitation computer readable media comprise computer storage media and communication media. Computer storage media store information such as computer readable instructions data structures program modules or other data. Communication media typically embody computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and include any information delivery media. Combinations of any of the above are also included within the scope of computer readable media.

Although described in connection with an exemplary computing system environment embodiments of the invention are operational with numerous other general purpose or special purpose computing system environments or configurations. Examples of well known computing systems environments and or configurations that may be suitable for use with aspects of the invention include but are not limited to mobile computing devices personal computers server computers hand held or laptop devices multiprocessor systems gaming consoles microprocessor based systems set top boxes programmable consumer electronics mobile telephones network PCs minicomputers mainframe computers distributed computing environments that include any of the above systems or devices and the like.

Embodiments of the invention may be described in the general context of computer executable instructions such as program modules executed by one or more computers or other devices. The computer executable instructions may be organized into one or more computer executable components or modules. Generally program modules include but are not limited to routines programs objects components and data structures that perform particular tasks or implement particular abstract data types. Aspects of the invention may be implemented with any number and organization of such components or modules. For example aspects of the invention are not limited to the specific computer executable instructions or the specific components or modules illustrated in the figures and described herein. Other embodiments of the invention may include different computer executable instructions or components having more or less functionality than illustrated and described herein.

Aspects of the invention transform a general purpose computer into a special purpose computing device when configured to execute the instructions described herein.

The embodiments illustrated and described herein as well as embodiments not specifically described herein but within the scope of aspects of the invention constitute exemplary means for selectively collecting the data based on the performance targets for the positioning system and exemplary means for selectively collecting the data based on predicted returns from the collected data .

The order of execution or performance of the operations in embodiments of the invention illustrated and described herein is not essential unless otherwise specified. That is the operations may be performed in any order unless otherwise specified and embodiments of the invention may include additional or fewer operations than those disclosed herein. For example it is contemplated that executing or performing a particular operation before contemporaneously with or after another operation is within the scope of aspects of the invention.

When introducing elements of aspects of the invention or the embodiments thereof the articles a an the and said are intended to mean that there are one or more of the elements. The terms comprising including and having are intended to be inclusive and mean that there may be additional elements other than the listed elements.

Having described aspects of the invention in detail it will be apparent that modifications and variations are possible without departing from the scope of aspects of the invention as defined in the appended claims. As various changes could be made in the above constructions products and methods without departing from the scope of aspects of the invention it is intended that all matter contained in the above description and shown in the accompanying drawings shall be interpreted as illustrative and not in a limiting sense.

