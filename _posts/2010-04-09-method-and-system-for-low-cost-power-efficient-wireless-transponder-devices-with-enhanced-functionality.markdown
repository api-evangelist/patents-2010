---

title: Method and system for low cost, power efficient, wireless transponder devices with enhanced functionality
abstract: A method and system for inventorying wireless transponders, specifically referred to as RFID transceiver devices. To provide higher functionality, a microcontroller is used in the RFID, along with a battery, but the clock frequency of the microcontroller is adjusted, based on external input, to minimize battery requirements. The RFID transceiver device includes at least one sensor coupled to the microcontroller. Data from the at least one sensor is stored in non-volatile memory of the microcontroller if the battery is at a predetermined low level, and is read later when the battery is at a higher level.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08390433&OS=08390433&RS=08390433
owner: Eigent Technologies Inc.
number: 08390433
owner_city: Holmdel
owner_country: US
publication_date: 20100409
---
The present invention provides a system and method for the development and implementation of low cost power efficient wireless transponder devices with enhanced functionality such as but not limited to sensors extended memory range and security that communicate with a reader interrogator such that the devices can be identified and additional information can be known.

The ability of actively powered battery assisted passive BAP and passive wireless transponders with enhanced functionality to acquire store and transmit additional data along with identifying data can have applicability to a wide variety of items. As such a new class of Radio Frequency Identification RFID devices with enhanced functionality is emerging to effectively address the needs of these products that include but are not limited to medical supply items pharmaceuticals certain sensitive equipment and machines chemicals ordnance and food. Much of the enhanced functionality and data capture involves the current or past environment of the items.

Purely passive wireless transponder devices when actively energized by a reader interrogator use the received source of electromagnetic EM energy to power themselves to enable the data reception to power other functional devices such as sensors and to backscatter or reflect their specific identification code and other data back to the interrogator. This type of wireless transponder device is capable of performing actions such as sensing only when the received source of energy is available.

U.S. Pat. No. 7 479 886 by Burr describes an RF harvesting that can be used to store energy into a capacitor such that the device can temporarily operate when the RF signal is no longer present. This patent has the limitation that its usage is quite limited since a large capacitor would be required to store enough energy to power other functions which would increase the overall size of the system. Additionally the amount of energy which can be stored in capacitors is significantly lower than the amount of energy that can be stored in batteries. BAP wireless transponder devices use batteries to enhance their radio frequency RF communication abilities and provide other processing capabilities and functions. Actively powered wireless transponder devices use batteries to acquire and store data on demand as well as to enhance the reception and transmission of their RF communications.

Purely passive wireless transponder devices work on the principle of RF harvesting in which the reader sends a high power continuous wave CW tone preamble that persists over a period of time and is followed by a modulated message carrying the signaling information. RF harvesting techniques have been described. U.S. Pat. No. 7 385 511 by Muchkaev describes a reader which generates and transmits coded sequences of short high power pulses repeatedly to a transponder which receives and stores the pulse energy. This patent has the shortcoming that such coded sequences are not commonly employed by the standard based systems. U.S. Pat. No. 7 400 253 by Cohen describes all forms of RF signals and EM energy not just those transmitted from or provided by an RFID reader interrogator are used to provide power to an RFID transponder or to charge the battery. This patent has the shortcoming that in a practical situation the energy available in all forms of RF signals is not sufficiently high to power an RF harvesting circuit. U.S. Pat. No. 6 970 089 by Carrender describes two antennas which are configured to receive ambient radiation and use this energy to reflect a modulated signal for writing and reading data to and from the devices in the system. This patent has the shortcoming that while two antennas can improve the signal reception and backscattering they also prohibitively increase the size of a transponder.

To receive a message from the reader a passive wireless transponder device requires two essential elements namely an antenna and an RF harvesting circuit. The antenna serves both as a transducer which converts the electromagnetic EM wave into an electrical waveform and as an impedance transformer which matches the free space impedance to the impedance of the frontend circuit in the wireless transponder device. The RF harvesting circuit on the other hand extracts energy from the signal and stores it in a storage element on the wireless transponder device. A typical realization of the RF harvesting circuit employs a Schottky diode to rectify the CW signal and store the energy as an electrical charge within one or more capacitors. The voltage across the storage capacitor is proportional to the amount of the electric charge. Once a sufficient charge is built up on the capacitor the capacitor is then able to power the receiver and the processing circuit of the wireless transponder device to demodulate and decode the message from reader. RF harvesting only provides a limited amount of energy. Circuits on the wireless transponder device can only operate in the presence of a reader signal and for a small additional persistence time after the end of reader signal.

Purely passive wireless transponder devices are able to send information to a reader by a process called backscattering . Backscattering is achieved by changing modulating the antenna impedance with the signaling waveform. When the antenna impedance is matched to an RF frontend circuit the RF signal impinged on the antenna is absorbed by the RF frontend circuit whereas when the coupling between the antenna and the RF frontend circuit is open or shorted a higher amount of RF signal impinged on the antenna is reflected back or backscattered to the reader. A control signal is used to create the matched or open or shorted circuit conditions based on the polarity of the signal. The reader detects the RF power level changes in the reflected or backscattered signal from the passive wireless transponder device and decodes the message.

To store certain information permanently a passive wireless transponder device incorporates a small amount of non volatile memory to retain information in the absence of the reader signal. A typical realization of such non volatile memory is a flash memory. Writing to the flash memory requires a higher voltage. A charge pump voltage multiplying circuit coupled to the RF harvesting circuit boosts the voltage high enough to allow the flash programming. Due to the limited available power only a limited memory capacity is available on the passive wireless transponder device. Simple information such as an ID and serial number is stored in the device.

With a purely passive wireless transponder device implementation no power supply or battery is required. This significantly simplifies the wireless transponder device complexity and reduces its cost as compared to the conventionally powered wireless transponder device. Typical commercial passive wireless transponder devices are implemented by attaching a silicon die containing the required circuitry to a printed antenna strip on a flexible substrate using a thin film material. The passive wireless transponder device can then be affixed onto merchandise in a similar way as conventional bar coded labels. In order to achieve a cost target approximating a bar coded label the available commercial passive wireless transponder devices are made with the minimum functionality that satisfies the current EPC global and or ISO specifications. The limited on chip processing capability is implemented with hard wired circuits which realistically cannot be altered without incurring a high non recoverable engineering NRE cost and long re design cycle. The construction is not flexible for expansion to include other functions as it does not provide any external interfaces for adaptation adding memory capacity or expansion in functionality. These restrictions make it difficult for the purely passive devices to be adapted to the specific needs of different customers and applications.

Actively powered wireless transponders or active transponders do provide the capability for adaptation adding memory capacity or expansion in functionality such as sensing. The onboard power also provides the means to significantly increase the communication range as compared to that of the purely passive transponder devices.

The typical implementation of active transponders consists of an analog circuit and a digital circuit. These devices need to be active at all times to monitor the environment and therefore need a constant power supply. From a circuit implementation perspective the power consumption of the analog circuit depends on the signal frequency. The higher the signal frequency the higher the power consumption that is required. Thus the RF transceiver analog circuit in an active transponder device consumes the most power. The power consumption of the digital logic circuit is proportional to the operational frequency of the logic gates i.e. how often the logic state is flipped or the polarity is changed . For active transponders the amount the power consumed by the digital logic circuit can often be controlled by adjusting its operating clock frequency. When active transponders are in either the receive or transmit mode the peak power consumption is several orders of magnitude higher than that of purely passive transponders powered by RF harvesting.

Battery supply voltage for an active transponder depends not only on its state of charge but also on the discharge current. This IR voltage drop is caused by discharge current I flowing through the internal resistance R of the battery. The voltage drop is higher at high currents and lower temperatures which exhibit increased resistance. When a battery is discharged the voltage gradually decreases until it reaches the minimal voltage acceptable for the device which is called the end of discharge voltage EDV or the voltage where continuing discharge causes damage to the battery and an accelerated drop in discharge voltage. To support high peak power active transponders large batteries with low internal resistance are required to prevent an excessive IR drop. The large batteries significantly increase the overall packaging size of the devices which in turn places severe constraints on the merchandise boxes or cargo to which the devices can be affixed.

To minimize the power consumption and thus the size of the power source the system design for active transponders often minimizes the duty cycle in which the transponders are active. As an example ISO 18000 7 active transponders used by the US Department of Defense DoD wake up for a duration of a few milliseconds every 2 seconds to achieve a low duty cycle in the standby mode. In order to wake up the active transponders the reader first sends a long wake up signal lasting more than 2 seconds. After all active transponders are in an awake state the reader can read the tag contents. Once in the awake state the duty cycle of the active transponders significantly increases to speed up the system response. After the reader interrogator has interrogated all active transponders within a session the reader interrogator issues a command to lower the duty cycle of all active transponders.

The low duty cycle long sleep period of an active transponder system severely limits the response time and the system level power management operation places constraints on the system design. Since the active transponders consume large amounts of power during their active state the number of probes or reads by readers interrogators affects how long a battery can last. Only very limited read write cycles are typically supported by the battery of the active transponders. The battery requirements severely limit the size and weight reduction possibilities of the active transponder devices which in turn places severe constraints on the merchandise boxes or cargo to which the devices can be affixed.

In additional to the problem of high power consumption active transponder systems suffer from significantly higher costs than passive wireless transponder systems due to their higher complexity. It is also often difficult for a conventional microcontroller to interface to a variety of sensors or other external data collection devices.

The ability to be able to use an off the shelf commercial reader interrogator with its back end logistics system could significantly shorten the time to implement a system when higher functionality is required by an application enabling a faster deployment as well as improving the reader interrogator infrastructure return on investment ROI .

It is desirable to provide a passive wireless transponder system which provides increased functionality higher memory capacity enhanced flexibility and configurability similar to that of actively powered wireless transponders or active transponders. Such a passive wireless transponder system can eliminate the need for a large battery and therefore provide a small product form factor which reduces the packaging complexity. Without the required active battery power saving operations such a wireless transponder system can respond to readers interrogators quickly without the need for a complex system level power management operation. To further reduce the cost and complexity of a wireless transponder the monitoring recording and storage of data must be executed in an efficient manner without occupying a large amount of memory but at the same time providing adequate data visibility to the end user.

It is desirable to allow the use of the same reader interrogator for both extremely low cost off the shelf purely passive wireless transponder devices and wireless transponder devices with enhanced functionality such as but not limited to added sensors extended memory extended range and enhanced security.

The present invention provides a method and system for inventorying wireless transponders referred to as RFID transceiver devices that have a higher functionality than typical passive RFIDs and yet are implemented with techniques that provide lower cost and battery requirements. The RFID transceiver devices can be certifiable by a recognized standards body such as EPCglobal or are compatible with recognized standards Backscatter techniques of conventional passive RFIDs are used in the present invention to keep cost and battery requirements low. To provide higher functionality a microcontroller is used in the RFID along with a battery but the clock frequency of the microcontroller is adjusted based on external input to minimize battery requirements. In one embodiment the microcontroller initially has a zero or near zero clock frequency. A comparator compares the received RF energy to a threshold and when the threshold is exceeded indicating the presence of a probe signal from an RFID reader the microcontroller clock frequency is immediately increased. The comparator threshold is also adjusted allowing for reliable detection of data on the probe signal which is input to the microcontroller. The clock frequency of the microcontroller can be further adjusted based on the received data.

In an alternate embodiment the clock frequency of the microcontroller can be further adjusted based on data from sensors in order to keep the clock speed at the proper speed to adequately process the data while minimizing the power requirement of the microcontroller and then create an input to modulate the backscattered signal to be transmitted by the RFID. The received data can also cause the microcontroller to request that sensors generate sensing data at a faster rate which in turn requires the microcontroller clock to increase to handle the increased sensor data. In an additional embodiment multiple sensors are multiplexed to provide a single input stream to the microcontroller reducing the microcontroller clock speed required along with the overall cost of the microcontroller and sensors. In another embodiment the interface between the sensors and the microcontroller contains logic circuitry to reduce the required microcontroller clock speed. In another embodiment the microcontroller clock is increased by a timer i.e. the microcontroller is turned on at a specific time or periodically to process sensor data or the clock speed is increased to handle additional sensor data at specific times.

Reference will now be made in greater detail to preferred and additional embodiments of the invention. Wherever possible the same reference numerals will be used throughout the drawings and the description to refer to the same or like parts.

RF detection and backscattering frontend employs a diode rectifying circuit to demodulate and recover the reader baseband modulating signal. shows an embodiment of this circuitry which includes comparator circuitry . Antenna is connected to diode RF choke inductor and inductor . The other end of inductor is connected to capacitor and resistor which receives input signal from microcontroller shown in . The other end of inductor is connected to capacitor and capacitor . A first pair of Schottky diodes and is used to rectify the RF signal from antenna and store the charge in capacitor . A second pair of Schottky diodes and is added to the first pair to increase the output voltage of RF signal RFIN which is stored in capacitor . These diodes provide rectifying with to charge capacitor on both the positive and negative swing of the received signal voltage. The output of the Schottky diodes and voltage of RF signal RFIN is connected to comparator circuitry for RF signal detection which uses low speed comparator to detect the presence of the RF probe signal by comparing voltage of RF signal RFIN to VCC voltage which is connected via resistor grounded through resistor to comparator . Low speed comparator consumes very low power such that it could be powered by an RF harvesting circuit. The output of comparator circuitry is interrupt signal as also shown in which is used to trigger the microcontroller shown in and turns on the receiver operation. The output of Schottky diodes and voltage of RF signal RFIN is also connected to slicer inside RF detection and backscattering frontend . Low pass filter which contains resistors and voltage and capacitor and couples to negative input of comparator provides the detecting reference level of slicer . Since low pass filter averages out the RF modulation reference level settles at the average level of the signal voltage of RF signal RFIN . This allows comparator to slice RF signal RFIN and provides a digital baseband signal at RF detection and backscattering frontend which is coupled to microcontroller . Slicer typically operates at a fast speed and consumes a higher amount of power. Accordingly slicer can be powered by battery . Comparator circuitry provides interrupt signal to connect the battery power to the slicer to activate its operation as shown in .

Pin diode provides an open or short connection to antenna and serves as the backscattering circuit. The open or short circuit control of pin diode is under the control of a microcontroller. RF detection and backscattering frontend adapts itself to different input RF signal levels powers and consumes no or extremely low power during the standby mode. The combination of the diode circuit with comparator to provide interrupt signal allows a close to zero power standby mode with a wake up in a sufficiently short amount of time for receiver operation. RF frontend circuit implementations fulfilling the same requirements could be used with the teachings of the present invention.

In one embodiment a software radio architecture is employed in which the recovered baseband waveform is sampled digitized and processed with a microcontroller. Microcontroller is in a standby mode when no RF signal is detected. In the standby mode microcontroller operates using clock at a very low frequency and consumes virtually no power. Microcontroller shuts off most of its internal circuits except for certain peripheral circuits that allow it to detect interrupt signals or timer circuits that can be programmed such that microcontroller wakes up at certain time intervals. Microcontroller requires little computing processing power during this low power state.

In order to detect the presence of an RF signal in RF signal RFIN from the RF detection circuitry is connected to comparator . Comparator is used to detect the rectified RF level against a threshold voltage. If the RF level exceeds the threshold voltage the presence of the RF signal is detected. Interrupt signal which is the output of comparator is used to interrupt microcontroller and allows microcontroller to transition from a standby mode to an active mode. Power consumption of comparator depends on its response time. For a slow response time on the order of hundreds of microseconds comparator can consume extremely low power less than a microamp. Comparator in comparator circuitry can be powered by either an onboard power source such as battery or an RF harvesting circuit as part of RF detection and backscattering frontend as shown in .

Once the presence of the RF signal is detected comparator generates interrupt signal for microcontroller . Microcontroller then transitions from a standby mode to an active mode to process the received waveform. In RF detection and backscattering frontend self biasing slicer is used to convert the analog baseband waveform into a hard limited signal consisting of high and low pulses which are sampled by microcontroller directly. Slicer is used to detect a binary digitally modulated AM signal which is commonly used in readers interrogators including readers conforming to EPCglobal ISO or other known standards. The preferred embodiment includes the use of a slicer but other embodiments may not. For other types of signals an analog to digital converter can be used to sample the analog baseband waveform coming out of the RF detection circuit. It is also possible for a microcontroller to directly sample the analog waveform of a binary digitally modulated AM signal as long as the analog baseband waveform resembles a digital stream with its high level close to the supply voltage its low level close to ground and a transition time from the high level to the low level that is short relative to the duration of the high or low level. Slicer can be turned off in the absence of an RF signal to conserve battery power. As soon as an RF signal is detected slicer can be turned on to convert the waveform.

Comparator performs essentially the same function as a slicer. In an alternate embodiment comparator in slicer and comparator in comparator circuitry can be the same comparator. Accordingly the comparator and the slicer are the same circuit with a different biasing current. The comparator biased with a low current is used to monitor for the presence of the RF signal. When the RF signal is detected the comparator is biased at an adequate current to support the faster speed of the AM modulated waveform.

In microcontroller the sampled baseband waveform is parsed to detect the preamble or frame sync and to detect the signaling data and message from RFID reader . In the preferred embodiment that supports the decoding of an EPCglobal C1G2 signal the preamble or frame sync starts with a delimiter. Following the delimiter a data0 symbol with a duration equal to Tari and an RTcal symbol with a duration equal to the sum of the duration of a data0 and a data1 symbol is detected. RTcal allows the tag to set the pivot duration equal to RTcal 2. The pivot duration is used for detection of a data0 and data1 symbol. Any symbol with a duration longer than the pivot is interpreted as data1 and any symbol with a duration shorter than a pivot is interpreted as data . For the preamble only a TRcal symbol follows the RTcal symbol. The TRcal symbol duration is used by the RFID transceiver device to set the backscattering link frequency. For the frame sync there is no TRcal symbol following the RTcal symbol. By detecting data0 and data  a digital stream carrying a message can be decoded following the EPCglobal C1G2 specification. The RFID transceiver device could be altered to decode other standard specifications.

In the preferred embodiment clock is derived from a low frequency clock oscillator using an internal phased locked loop. Clock can be configured to different frequencies. At a lower clock frequency microcontroller can operate at a lower supply voltage. It is desirable to operate at as low a clock frequency as possible such that microcontroller can still operate at a supply voltage close to the EDV end of discharge voltage of battery . The lower the clock frequency the greater the battery life and device operational temperature range provided by battery . The power consumption of microcontroller is proportional to its clock frequency. Accordingly another benefit of the lower clock speed is the reduction in the current consumption.

In RFID transceiver device the receiver function is handled in software by microcontroller . Typical microcontrollers are designed to handle serial processing operations. To perform parallel processing operations the clock frequency of the microcontroller needs to increase. A majority of microcontroller operations are designed to simultaneously handle multiple bits with bus widths typically equal to 8 16 32 or 64 bits. This operation represents a waste of power if the number of bits to be processed is less than the bus width. It is more power efficient to employ a special purpose logic circuit to handle the receiver operations that require a high clock speed. illustrates an alternative embodiment of the RFID transceiver device . RFID transceiver device employs special purpose logic circuit to provide the processing of the receiver functions such as for example the decoding of the preamble or the frame sync the detection of the bit duration and the decoding and generation of messages from and to a reader interrogator. Input and output lines and shown in are replaced by bidirectional lines and from special purpose logic circuit . This architecture lowers the overall power consumption by using special purpose logic circuit to handle the receiver function. The use of special purpose logic circuitry also allows microcontroller to operate at significantly lower clock speeds for sensor operation. The addition of the special purpose logic circuit only marginally increases the overall system cost.

The architecture of RFID transceiver device shown in also provides an enhanced capability to the transponders. Sensor and other external data collection device have digital interfaces and microcontroller can easily be programmed to provide signaling for serial or parallel interface . Sensor and other external data collection device have only analog interfaces and corresponding to sensor and other data collection device and microcontroller can control internal ADC to sample the outputs from analog interfaces and . Many low cost commercial microcontrollers are equipped with on chip ADCs. With on chip ADC multiplexer is used to provide multiplexed inputs from the analog interfaces and to ADC such that the single ADC can be used to sample the multiple external data collection devices and . Multiplexer can be further enhanced to be reconfigurable to handle a variety of sensors and different sets of sensors simultaneously. In another embodiment an external ADC can be used.

Most sensors other external data collection devices only need to be sampled at some time interval. For example a temperature sensor does not need to sample its environment at a frequency of several thousand times per second since the temperature typically does not change that fast. Another embodiment is the use of timer on microcontroller to schedule periodic sampling of sensors and and other external data collection devices and . Microcontroller can program timer with a sensing interval and then immediately enter a low power standby mode. As soon as timer expires timer generates interrupt signal for the microcontroller to enter an active state and process the sampling operation of sensors and and other external data collection devices and .

In an alternate embodiment a reader interrogator command signal from reader is used to change the reading frequency of sensors and and other external data collection devices and Sensor applications can require data collection over a period of for example one day with a sensing frequency of about once every half a minute while other applications need data collection over a period of months for example about three months with a sensing frequency of about once every 5 minutes. The use of timer allows sensors and and other external data collection devices and to be easily configured based on the application scenario.

Microcontroller can include two types of memory nonvolatile and volatile. The non volatile memory can be used to store critical information such as ID serial number label information or other data pertaining to for example merchandise to which RFID transceiver device is affixed. The information can survive an event such as when a battery becomes disabled or the wireless transponder device is unable to continue to operate under conditions such as extreme out of bound temperatures. The non volatile and volatile memory can provide increased storage capability for the processing and storage of sensor or other data. This allows more flexibility to configure the RFID transceiver device to suit different applications.

In ultralow power management the action of saving to flash on a microcontroller too frequently can be a drain on the battery. In order to lengthen the battery life in one embodiment data is saved in the volatile memory of microcontroller and is only saved to flash on microcontroller when microcontroller is awakened for other purposes.

In applications involving the use of a large volume of wireless transponder devices equipped with sensors or other added functionality the cost of wireless transponder device is critical. It is therefore important to include only the sensors or other added functionality needed for a specific application and to remove the sensors or other added functionalities which are not needed to reduce overall cost of the system. RFID transceiver device can be easily configured to do this and lower the overall cost. The application software can be configured to have different footprints depending on which sensors or other added functionalities are incorporated. A footprint corresponding to a smaller number of sensors or other added functionality results in reduced code memory and lower cost. Since multiplexed inputs to the ADC are employed to interface to multiple sensors or other added functionality the unwanted sensors or other added functionality can be removed without affecting other parts of the system operation to provide flexibility and configurability to adapt the RFID transceiver device to different applications with optimized cost.

In order to optimize power consumption microcontroller in is put in standby mode when not reading a sensor or processing other added functionality. A timer is used to alert microcontroller to read the sensor or process other added functionality at a given time interval. Sensors or other added functionality while powered can require some settling time before they reach a steady state condition. Since the sensor or other added functionality settling time could be quite long it is desirable to configure the clock speed of microcontroller to as low a clock speed as is sufficient to process the sensor reading or other added functionality operation to match the settling time of the sensor and thereby reduce the overall power consumption.

Since RFID transceiver device and can have a very long battery life periodic sensing of sensor or processing of other added functionality can create a huge amount of data. A preferred embodiment employs configurable thresholds to monitor for sensor reading data. In one embodiment for sensitive temperature shipments high and low temperature thresholds are programmed into microcontroller such that microcontroller monitors and records the events and the event durations for which the ambient temperature exceeds the thresholds. Microcontroller is programmed to record store only important conditions from the sensor or other added functionality devices which can cause critical merchandise breakdown. For example the events in which the temperature or shock of the merchandise exceeds a certain temperature or shock threshold can be stored. If the merchandise is damaged after a set number of events or a given duration of event or events microcontroller only records or stores that event data in its memory. Such threshold values are programmed either over the air or during initial microcontroller programming at the factory. If RFID transceiver device and samples at a regular interval there may not be enough granularity and some of the events might be missed. Thus in one embodiment if RFID transceiver device or detects that it is close to an out of bounds limit it reduces its sampling interval and samples more frequently. This action reduces the chance of missing some events. In the case of a shock sensor the typical shock event is normally preceded with vibration a free fall or high acceleration condition. The shock sensor is programmed to detect these conditions and issues interrupt signal to wake up microcontroller to activate the sensor operation. This increases battery life. An embodiment of the storage for sensor data is shown in Table 1.

Microcontroller can also be programmed to change the sensing or other added functionality processing interval based on the in situ conditions. Interval changes can be programmed either over the air or during initial microcontroller programming at the factory. In some applications it is important to monitor the sensors or other added functionality devices with a higher frequency as the data readings get closer to the thresholds. This provides the benefit that if an event could exceed a data threshold within the time of a standard wake sleep period the shortened interval reduces the chance that the data reading might miss such an event. In this case microcontroller can be configured to shorten its timer period to provide more frequent readings as the data readings approach the thresholds.

In some situations the battery voltage can drop below a level at which RFID transponder device ceases to be able to communicate effectively with RFID reader interrogator . This can be due to an ambient temperature drop that causes the supply voltage of the battery to drop accordingly or to a battery simply being discharged due to use. In this situation however the battery supply voltage might still be able to support data readings or other onboard functionality that only require a low clock frequency for microcontroller . In another embodiment recorded sensor data or other onboard functionality data is read and the stored in the non volatile memory of the microcontroller if the battery supply voltage is too low. As soon as the battery issue is resolved the recorded sensor or other onboard functionality data can be retrieved by a reader.

Since the processing of receiving and sending data to and from reader can drain battery more rapidly when low on battery in another embodiment the RFID transceiver device is put into a hibernating mode such that it only monitors and stores the sensor data while the battery can still sustain it without responding to any signals from RFID reader . This increases critical battery life. RFID transceiver device can subsequently be placed in a docking fixture to restore its battery power. The data stored can then be read from the battery in the docking station or over the air if the battery power allows.

In another embodiment a real time clock RTC on microcontroller is used to time tag the data in RFID transceiver device . The RTC starts in an arbitrary state and provides a time stamp to the sensor data using the free running RTC. When reader interrogator reads the data on RFID transceiver device it reads the RTC on RFID transceiver device and compares this RTC with its own RTC to find the offset. When RFID reader retrieves any data and the associated time stamp RFID reader adds the offset back to the timestamp to restore the real time clock reading. With this embodiment there is no need to initialize the RTC of RFID transceiver device .

In another embodiment the read and write commands in memory of RFID transceiver device that are specified in the EPCglobal ISO or another standard are modified so as to embed the protocol for sensor or other data reading. Predefined specific memory locations are used for passing read and write sensor or other data commands and storing sensor data. Specific memory locations are used as mailboxes for both commands as well as for the data. In order to provide a method to identify RFID transceiver device one or two unique words are stored in a certain memory location for identification. The unique words are unique patterns and are different from the EPC or Tag ID TID . Once RFID reader finds the unique words in specific memory locations it associates RFID transceiver device as a special RFID transceiver. Using this approach the sensor reading or other data processing operation is standards compliant and an off the shelf standards compliant reader can be used to read and write the sensor or other data in the higher functionality wireless transponder device. Another embodiment to identify a special type of RFID transceiver device is to store data in a high memory location which is not normally available in a passive RFID transceiver device. If the reader reads this memory location from an off the shelf passive RFID transceiver device it will yield an error code such as error code 00000011 memory overrun or unsupported C value. If the reader reads this memory location from a special RFID transceiver device it will yield a value and no error code.

In another embodiment scrambling of the data location is performed at RFID transceiver device . The address is common for all conventional reader and graphical user interface software which means that all readers can try to read the information at this address but only a special type of RFID transceiver device recognizes and translates the special address. Accordingly RFID reader can identify a special type of RFID transceiver device. The special type of RFID transceiver device replies with valid information but other conventional passive RFIDs will reply with error codes because this address does not exist in their memory.

In another embodiment a special type of RFID transceiver device is identified by using a false address which does not exist in any conventional passive RFID transceiver device. The false address could have 4 or 6 bytes the first two bytes could be the special RFID transceiver device signature. When the special RFID transceiver device receives this address it translates this false address into the address where the information is stored.

In another embodiment modulation and demodulation is implemented in software in microcontroller to further lower costs. The EPCglobal air interface defines a Tag to Interrogator interface using backscatter modulation with or without a subcarrier and an Interrogator to tag interface using double sideband amplitude shift keying DSB ASK with pulse interval PIE encoding. The low speed microcontroller with common peripherals such as a timer and serial peripheral interface SPI is used to implement the interfaces thus providing significant flexibility with low cost.

Implementing a modulator circuit using microcontroller requires the precise control of software timing. A serial communication interface can be used to output a precise timing modulation signal. The serial communication interface typically provides a buffer for loading multiple bits of data. Typical serial interfaces have buffers in multiple of 8 bits depending on the depth of the buffer. As long as the buffer is refilled before it is depleted a continuous and precise timing modulating signal can be output from the serial interface. This embodiment allows a much higher signaling rate to be achieved as compared to a conventional bit banging technique. It should be noted that the serial interface clock rate can be slaved to external or internal clock sources. An example of such a clock source is a conventional pulse width modulation PWM generator which can be used in microcontroller . The use of these clock sources allows the symbol time to be changed which provides a variable symbol rate.

For data encoding from the tag to the interrogator without the subcarrier data 0 and data 1 are encoded as shown in where a data 0 is encoded as positive pulse followed by negative pulse and a data 1 is encoded as two positive pulses and . In software data 0 is represented as 2 binary bits 10 and data 1 is represented by binary bits 11. shows a block diagram of the modulator. Software in microcontroller pre calculates the binary stream and uses buffer to transmit the binary stream with an 8 bit SPI interface using input signal to the RF modulator in the RF detection and backscattering frontend to transmit without interruption i.e. independent of interrupt from buffer . For EPCglobal the highest link frequency is 640 kHz and thus interrupt of buffer empty will be generated every 4 data bits 8 binary bits which is 6.25 s. During this period microcontroller loads the next 8 bits for transmitting.

For data encoding from the tag to the interrogator with the subcarrier the baseband signal is Miller modulated by a subcarrier. In this embodiment the reversal of the baseband signals for data 0 and data 1 as in is used where data 0 is two positive pulses and data 1 is a positive pulse followed by a negative pulse. The frequency of the subcarrier is 2 4 or 8 times of the data rate which corresponds to a Miller rate of 2 4 and 8. shows the waveforms for data 0 and data 1 for a Miller rate of 2. A data 0 is encoded as positive pulse followed by negative pulse followed by positive pulse and followed by negative pulse . Data 1 is encoded as positive pulse followed by two negative pulses and and followed by positive pulse . Accordingly data 0 is encoded as 1010 and data 1 is 1001.

If there is not enough memory an alternative embodiment is to add an exclusive or XOR gate to modulate the baseband signal. This has the additional benefit of also slowing down the SPI interrupt rate on interrupt . shows the process of modulating data 1 onto a subcarrier with a Miller rate of 2. Data 1 which is positive pulse followed by negative pulse is XOR ed with a subcarrier with positive negative positive and negative pulse sequence to generate a modulated data 1 with positive two negative and and positive pulse sequence as shown in .

An embodiment to enable the subcarrier to have the same phase as the data is shown in . Since most conventional peripheral timers with a Pulse Width Modulator PWM can generate a 50 duty cycle waveform PWM timer is used as a subcarrier generator for input into XOR along with SPI data output . SPI clock output is used to interrupt microcontroller for phase information which adjusts the PWM phase to align with SPI data output . For different Miller modulation rates the PWM frequency is changed.

An embodiment of the data demodulator is shown in which uses a capture function of the hardware timer for accurate measurements. Output signal from RF detection and backscattering frontend is fed into latch register which uses timer counter and rising edge of output signal is used also as interrupt signal for microcontroller . Upon an interrupt signal microcontroller reads the latch time from latch register to decode the data.

A man machine interface MMI or programming application interface API can be provided for the user which can control RFID reader for inventory sensor data reading and the configuration of the tag. The preferred embodiment is to include middleware which deals with the lower layer operation of RFID reader the on the air protocol and retrieving and writing of data to and from specific locations in the tag memory while presenting a high application level interface to the MMI or API. The programming API has similar command and response messages to the command and response in the MMI. The middleware resides in a host device and can communicate with RFID reader using a reader specific API. This allows users to adapt and integrate RFID reader and tags into their operation quickly. This also allows users not to have to deal with different readers having different APIs. One example use is to retrieve the sensor out of bound indicators. In this example a simple API controls RFID reader to find the specific tag or a number of tags and retrieve the sensor out of bound indicators from a specific memory location.

It is to be understood that the above described embodiments are illustrative of only a few of the many possible specific embodiments which can represent applications of the principles of the invention. Numerous and varied other arrangements can be readily devised in accordance with these principles by those skilled in the art without departing from the spirit and scope of the invention.

