---

title: Method and apparatus for performing position determination with pre-session action
abstract: A network sends to a user equipment (UE) an indication (e.g., a request for permission) to perform a position fix for the UE. The network also selectively sends to the UE a pre-session command for an action related to position determination. For example, the command may direct the UE to (1) clear all or a portion of location-related data at the UE prior to performing the position fix, (2) send back a position estimate for the UE, if available, or (3) apply a time offset and/or a position offset in performing the position fix. The UE sends to the network an acknowledgment (e.g., a grant of permission) to perform the position fix. The UE also performs the action indicated by the command (if any) received from the network prior to or in conjunction with performing the position fix. The network and UE perform the position fix for the UE.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08768375&OS=08768375&RS=08768375
owner: QUALCOMM Incorporated
number: 08768375
owner_city: San Diego
owner_country: US
publication_date: 20100628
---
The present application for patent is a continuation of U.S. application Ser. No. 11 050 575 now U.S. Pat. No. 7 747 258 entitled METHOD AND APPARATUS FOR PERFORMING POSITION DETERMINATION WITH PRE SESSION ACTION filed Feb. 4 2005 and assigned to the assignee hereof and expressly incorporated herein by reference.

The present invention relates generally to communication and more specifically to a method and apparatus for performing position determination.

It is often desirable and sometimes necessary to know the position of a wireless device in a network. For example a wireless user may utilize the wireless device to browse through a website and may click on location sensitive content. The web server would then query the network for the position of the wireless device. The network would initiate location processing with the wireless device in order to perform a position fix and ascertain the position of the wireless device. The network would then return a position estimate for the wireless device to the web server which uses this position estimate to provide appropriate content to the wireless user. There are many other scenarios in which location information is useful or necessary. In the following description the terms location and position are synonymous and are used interchangeably.

To perform a position fix the wireless device makes measurements for satellites and or base stations that are observable by the wireless device. The wireless device typically makes measurements for satellites in accordance with a predetermined procedure and using assistance data that can narrow the search for observable satellites. In certain scenarios it is desirable to reset the wireless device to a known state prior to performing the position fix as described below.

There is therefore a need in the art for a method and apparatus to flexibly perform position determination.

A method and apparatus for flexibly performing position determination for a wireless device which is also called a user equipment UE is described herein. In one embodiment of the method and apparatus a network sends to the UE an indication e.g. a request for permission to perform a position fix for the UE. The network also selectively or optionally sends to the UE a pre session command for an action related to position determination typically along with the indication. For example the command may direct the UE to 1 clear all or a portion of location related data at the UE prior to performing the position fix 2 send back a position estimate for the UE if available or 3 apply a time offset and or a position offset in performing the position fix. The UE sends to the network an acknowledgment e.g. a grant of permission to perform the position fix. The UE also performs the action indicated by the command if any received from the network prior to or in conjunction with performing the position fix. This action can reset the UE to a known state which may be desirable for various scenarios. The network and UE then perform the position fix for the UE.

The word exemplary is used herein to mean serving as an example instance or illustration. Any embodiment or design described herein as exemplary is not necessarily to be construed as preferred or advantageous over other embodiments or designs.

Wireless network may be a Code Division Multiple Access CDMA network a Time Division Multiple Access TDMA network a Frequency Division Multiple Access FDMA network an Orthogonal Frequency Division Multiple Access OFDMA network or some other multiple access network. A CDMA network may implement one or more CDMA radio access technologies RATs such as Wideband CDMA W CDMA and cdma2000. cdma2000 covers IS 2000 IS 856 and IS 95 standards. A TDMA network may implement one or more TDMA RATs such as Global System for Mobile Communications GSM . These various RATs and standards are well known in the art. W CDMA and GSM are described in documents from a consortium named 3rd Generation Partnership Project 3GPP and are parts of Universal Mobile Telecommunication System UMTS . cdma2000 is described in documents from a consortium named 3rd Generation Partnership Project 2 3GPP2 . 3GPP and 3GPP2 documents are publicly available. For clarity certain aspects are specifically described below for UMTS. Wireless device is called UE 3GPP terminology in the following description.

In network a location services LCS client is a function or an entity that requests location information for LCS targets. An LCS target is a UE whose position is being sought. In general an LCS client may reside in a network entity or a UE. An LCS manager communicates with wireless network LCS client a positioning server and a Push Proxy Gateway PPG . LCS manager provides various services such as subscriber privacy authorization authentication billing and so on. Positioning server provides position determination services and supports UE based and UE assisted positioning modes. In the UE based positioning mode the position of a UE is determined by the UE possibly with assistance data from positioning server . In the UE assisted positioning mode the position of a UE is determined by positioning server with assistance e.g. measurements from the UE. PPG is a network entity that creates a standard Application Programming Interface API for pushing content via a network and performs adaptation for different air interfaces.

For simplicity mainly shows network entities that are pertinent for position determination. These network entities may also be referred to by other names. For example LCS manager may also called be an LCS server a location server a mobile positioning center MPC a gateway mobile location center GMLC and so on. Positioning server may also be called a position determination entity PDE a serving mobile location center SMLC and so on. In general a network may include any collection of network entities that can provide any range of services.

Network may utilize a user plane or a control plane to support position determination. A user plane is a mechanism for carrying data for higher layer applications and employs a user plane bearer which is typically implemented with various protocols such as User Datagram Protocol UDP Transmission Control Protocol TCP and Internet Protocol IP all of which are well known in the art. A control plane which is also commonly called a signaling plane is another mechanism for carrying data for higher layer applications and may be implemented with network specific protocols and signaling messages.

UE may also receive signal from various satellites such as satellites in a Global Positioning System GPS . GPS is a constellation of 24 active and some spare satellites that circle the earth in well spaced orbits. UE may measure signals from GPS satellites and obtain pseudo range measurements for these satellites. These measurements may be used to compute a precise position estimate for the UE.

The position of UE may be requested by 1 applications Apps running at the UE which results in UE initiated position determination and 2 applications running at LCS client which results in network initiated position determination. In general network initiated and UE initiated position determination may be triggered by various entities applications and events. For clarity some exemplary call flows for network initiated and UE initiated position determination are described below.

A wireless user at UE executes a Wireless Application Protocol WAP application or some other browser application browses a website and requests location sensitive content by sending a WAP Hyper Text Transfer Protocol HTTP Request to LCS client via wireless network step A . Step A may or may not be present for network initiated position determination. In general position determination may be initiated on the network side by various entities and or in response to various events.

LCS client receives the WAP HTTP Request and determines that the position of UE is needed in order to provide the appropriate content. LCS client then sends a Mobile Location Protocol MLP Location Immediate Request SLIR message to LCS manager to request for a position fix for UE step B . MLP is one signaling protocol that may be used for the communication between LCS client and LCS manager and other signaling protocols may also be used for this interface. The MLP SLIR message may contain for example an identifier for UE msid an identifier for LCS client lcs client id a location quality of service qos and so on. The qos indicates the required accuracy for the position fix for the target UE.

LCS manager receives the MLP SLIR message authenticates LCS client based on the lcs client id and determines if LCS client is authorized for the requested service also step B . LCS manager may perform a subscriber privacy check to determine whether a position fix is permitted for the UE also step B . This check may be performed based on 1 the lcs client id msid qos and so on included in the received MLP SLIR message and 2 a profile or a subscription for a subscriber which is typically the wireless user at the UE. If the subscriber privacy check passes then the remaining steps for call flow continue as described below. Otherwise if the subscriber privacy check fails then LCS manager does not authorize LCS client for the requested service call flow terminates early and jumps to step M and LCS manager returns an applicable MLP return code.

If all of the applicable checks pass in step B then LCS manager initiates location processing with UE by sending an LCSINIT message to the UE step C . The LCSINIT message may contain for example a session identifier sessionid a notification a positioning mode posmode an address for LCS manager lcs manager address and so on. The session identifier is used to unambiguously identify the communication between the network and the UE for the location request. The notification indicates whether to perform 1 notification to inform the wireless user of the location request and 2 verification to obtain consent from the wireless user for the location request. The notification parameter typically includes some pertinent text for notification. The positioning mode indicates which mode to use for position determination e.g. UE based or UE assisted positioning mode. The LCSINIT message may optionally include a pre session command that directs the UE to perform a particular action related to position determination. For example the pre session command may direct the UE to 1 clear all or a portion of the location related data stored at the UE 2 send a position estimate for the UE if available back to LCS manager 3 apply a position and or time offset in computing a new position estimate for the UE and so on. The LCSINIT message is implemented as a WAP PUSH trigger to start the location processing. The location processing includes appropriate signaling exchanges and processing to obtain location information for the target UE. LCS manager starts a timer LT upon sending the LCSINIT message also step C . The LT timer is used to timeout the location processing if a response is not received from UE prior to expiration of the timer.

UE receives the LCSINIT message from LCS manager . If a pre session command is received in the LCSINIT message then UE performs the action indicated by the command e.g. upon receiving the LCSINIT message or at a later time. If notification or verification is required as indicated by the notification parameter in the LCSINIT message then UE provides popup text or some other display to notify the wireless user of the entity requesting location information for the UE. If verification is required then the wireless user is queried to either grant or deny the location request.

If the wireless user grants the location request then UE prepares for location processing by retrieving various types of information that are pertinent for position determination such as for example the current cell information cellinfo and the UE capabilities UEcap . The cell information may be used to provide appropriate assistance data for the UE. The UE capabilities may be used to determine which positioning mode to use to perform a position fix for the UE. UE then sends a Start Location Request SLREQ message to LCS manager to initiate a location session with the LCS manager step D . This SLREQ message may contain for example the sessionid the cell information the selected positioning mode the UE capabilities and so on. The SLREQ message optionally includes a position estimate for UE e.g. if this position estimate is available and meets all criteria if any imposed by the network and or the UE. UE may have obtained this position estimate for example by performing a position fix for a prior location request which may have been initiated by the network or the UE. UE starts a timer UT upon sending the SLREQ message also step D . This timer is used to timeout the location processing if a response is not received from LCS manager prior to expiration of the timer.

If the wireless user denies the location request then UE sends a Start Location Reject SLREJ message to LCS manager not shown in . The SLREJ message may contain a denial indication and or other parameters. The SLREJ message ends the communication between UE and LCS manager for this location request. The description below assumes that UE sends an SLREQ message.

LCS manager receives the SLREQ message from UE and stops the LT timer upon receiving this message also step D . LCS manager extracts the parameters included in the received SLREQ message. If the position estimate for UE is included in the SLREQ message and LCS manager decides to use this position estimate then call flow performs step G and then proceeds to step M. Otherwise LCS manager initiates location processing for UE by sending a Position Request PREQ message to positioning server step E . This PREQ message may contain for example the sessionid the posmode the cellinfo and so on. LCS manager starts a timer LT upon sending the PREQ message also step E . The LT timer is used to timeout the communication with positioning server if a response is not received from the positioning server prior to expiration of the timer.

Positioning server receives the PREQ message from LCS manager and sends back a Position Response PRESP message step F . The PRESP message may contain for example the sessionid. The PRESP message confirms to LCS manager that positioning server is ready to process the location request identified by the sessionid. Positioning server starts a timer PT upon sending the PRESP message also step F . The PT timer is used to timeout the position determination for this sessionid if a message is not received from target UE prior to expiration of the timer.

LCS manager receives the PRESP message from positioning server and stops the LT timer also step F . LCS manager then sends a Start Location Response SLRESP message to UE to initiate a positioning procedure step G . The positioning procedure includes appropriate signaling exchanges and pertinent processing to obtain a position estimate for the target UE. The SLRESP message may contain for example the sessionid and possibly other information e.g. a pre session command to direct UE to perform certain action related to position determination if this command was not sent in step C . The SLRESP message informs UE that positioning server is ready to perform a position fix for the UE. LCS manager starts a timer LT upon sending the SLRESP message also step G . The LT timer is used to timeout the communication with positioning server if a response is not received from the positioning server prior to expiration of this timer.

UE receives the SLRESP message from LCS manager and stops the UT timer also step G . UE then starts the positioning procedure by sending a Position Determination Initiation PDINIT message to LCS manager which forwards the message to positioning server step H . This PDINIT message may contain for example the sessionid the cellinfo e.g. the identifier of the cell in which UE is located request for assistance data ad a coarse position estimate for the UE and so on. UE starts a timer UT upon sending the PDINIT message also step H . The UT timer is used to timeout the communication with positioning server if a response is not received from the positioning server prior to expiration of this timer.

Positioning server receives the PDINIT message from UE and stops the PT timer also step H . Positioning server may then start a precise position determination procedure by sending a Position Determination Messaging PDMESS message that contains a Radio Resource LCS Protocol RRLP Measure Position Request message step I . RRLP is one of multiple assisted Global Positioning System A GPS protocols that are available to perform a position fix with measurements for GPS satellites. The RRLP Measure Position Request message may contain for example a request for a position fix assistance data and possibly other information e.g. a pre session command to direct UE to perform certain action related to position determination.

UE receives the PDMESS message from positioning server and stops the UT timer also step I . If UE has cleared GPS assistance data stored at the UE as directed by a pre session command received from the network then UE may request for new assistance data from the network or may obtain new assistance data directly from GPS satellites. For example UE may send to positioning server an RRLP Measure Position Response message containing an error code and a request for assistance data not shown in . Positioning server may then send another RRLP Measure Position Request message containing the assistance data requested by UE also not shown in .

After obtaining all of the pertinent assistance data if any UE performs measurements appropriate for the selected positioning mode. For example UE may obtain 1 pseudo range and or time measurements for GPS satellites for an A GPS position fix 2 pseudo range and or time measurements for base stations for a terrestrial position fix 3 measurements for both satellites and base stations for a hybrid position fix 4 cell identifiers for a cell ID based position fix and so on. The measurements for GPS satellites are made with the assistance data available at UE which may have just been downloaded from the network or GPS satellites. For the UE based positioning mode UE further computes a position estimate based on the measurements. UE then sends a PDMESS message that contains an RRLP Measure Position Response message to LCS manager which forwards the message to positioning server step J . The RRLP Measure Position Response message may contain the measurements made by the UE the position estimate computed by the UE and or request for more assistance data. For the UE assisted positioning mode UE starts a timer UT upon sending the PDMESS message also step J . The UT timer is used to timeout the communication with positioning server if a response is not received from the positioning server prior to expiration of this timer.

Positioning server receives the PDMESS message from UE also step J . For the UE based positioning mode positioning server uses the position estimate included in the received RRLP Measure Position Response message. For the UE assisted positioning mode positioning server computes a position estimate for UE based on the measurements included in the RRLP Measure Position Response message. For the UE assisted positioning mode positioning server sends a Position Determination Report PDRPT message to UE step K . Positioning server does not send a PDRPT message to UE for the UE based positioning mode. Positioning server also sends a Position Report PRPT message to LCS manager step L . This PRPT message may contain for example the sessionid location information for UE error code cause if applicable and so on.

LCS manager receives the PRPT message from positioning server and stops the LT timer also step L . LCS manager extracts the location information for UE from the received PRPT message and sends an MLP Location Immediate Acknowledgment SLIA message to LCS client step M . This MLP SLIA message contains the requested position estimate for UE posresult and possibly other pertinent information. LCS client receives the MLP SLIA message and uses the position estimate for UE to retrieve the location sensitive content requested by the wireless user. LCS client then sends to UE a WAP HTTP Response message containing this location sensitive content step N . Steps A and N are present for a WAP call e.g. to download location sensitive content and may not be present for other instances of network initiated position determination.

UE may store various types of location related data. The location related data may include for example GPS assistance data a position estimate for the UE a cell ID database and so on. Table 1 lists some types of location related data and their short description.

The GPS assistance data is used to narrow the search for GPS satellites and may include for example an almanac an ephemeris time information ionospheric information UTC and so on. Each GPS satellite transmits an almanac that may be used to calculate the coarse positions of all active GPS satellites in the constellation. Each GPS satellite also transmits an ephemeris that may be used to calculate an accurate position of itself in the constellation. The timing of each GPS satellite which is often referred to as GPS time may be obtained from the signals transmitted by the satellite. Each GPS satellite also transmits its UTC time offset and ionospheric information.

UE can make measurements for GPS satellites more quickly with the assistance data which can narrow the search for observable satellites. UE may obtain the assistance data from the network and or download the data directly from the satellites. UE typically stores the assistance data until it becomes stale at which time the UE may request new assistance data from the network or download this data from the satellites.

UE may already have a position estimate for itself when a location request is received from the network. This position estimate may have been obtained by performing a position fix for a prior location request. This position estimate may include for example a latitude a longitude an altitude for a 3 D position estimate for the estimated position of the UE an uncertainty in the position estimate and a confidence in the position estimate being within the uncertainty.

UE may also store a cell ID database that contains position estimates previously computed for the UE in different cells. The cell ID database may be updated whenever a position fix is performed for the UE. The cell ID database may be used to obtain an initial position estimate for the UE e.g. when the UE is first powered on or to limit the search range for satellites.

In certain scenarios it is desirable to clear all or a portion of the location related data stored at UE . For example in order to perform UE performance testing it may be desirable or necessary to clear all or certain portion of the location related data at the UE and force the UE to obtain new location related data. As another example a recovery mechanism may be needed in order to force the UE to clear certain location related data that is known to be bad e.g. an almanac for a time period that is too far in the future.

In an embodiment the network may send a pre session command to direct the UE to clear all or a portion of the location related data stored at the UE. This pre session command can reset the UE to a known state for position determination. For example pre session command may direct the UE to 1 clear all or some of the assistance data to force the UE to update its assistance data 2 clear the current position estimate for the UE to force the UE to compute a new position estimate or 3 clear the cell ID database to purge old position history for the UE e.g. if the UE has moved to a new city.

In another embodiment the network may send a pre session command to direct the UE to perform certain action prior to or in conjunction with performing a position fix for the UE. For example the pre session command may direct the UE to 1 apply a time offset to the UE s clock estimate in making pseudo range measurements for GPS satellites or 2 apply a position offset to an initiate position estimate for the UE in computing a position estimate for the UE. The network may also send other pre session commands to direct the UE to perform other actions prior to or in conjunction with performing a position fix for the UE.

In general a pre session command may be sent by various network entities e.g. LCS manager and or positioning server in network and at various steps in a call flow for position determination e.g. in step C G or I in call flow in . A pre session command may also be sent in various fields of messages sent by the network to the UE. In an embodiment a pre session command may selectively or optionally be sent in the sessionid. The sessionid is composed of various fields such as for example a Server SessionID field and a UE SessionID field. The Server SessionID field contains the part of the session ID that is assigned by network and is unique among all LCS managers and positioning servers in the network. The UE SessionID field contains the part of the session ID that is assigned by UE .

For network originated call flow in LCS manager sets the Server SessionID field of the sessionid to an assigned value and sets the UE SessionID field to a selected value. LCS manager includes the sessionid in the LCSINIT message sent to UE in step C of call flow in . UE assigns a value to the UE session ID upon receiving the LCSINIT message. The sessionid is formed by the network assigned value for the Server SessionID field and the UE assigned value for the UE SessionID field. All subsequent messages should contain this sessionid.

In an embodiment LCS manager sets the UE SessionID field to one of multiple possible values to indicate the desired action if any to be performed by UE . Table 2 lists various clear actions and the corresponding commands for a specific embodiment. A value of 00000000b for the UE SessionID field indicates a normal mode with no pre session command being sent. Each of the other values for the UE SessionID field is for a different pre session command that corresponds to a specific action to be performed by the UE.

For the embodiment shown in Table 2 the UE SessionID field includes 8 bits and is set to all zeros for the normal mode. The UE SessionID field is set to different values for different pre session commands. Each pre session command corresponds to a clear or purge of all or a portion of the location related data at the UE prior to performing a position fix. For the embodiment shown in Table 2 each bit of the UE SessionID field is mapped to a specific type of location related data. Each type of location related data may be cleared by setting the associated bit to 1 . For example the almanac and ephemeris may be cleared by setting the UE SessionID field to 00000110b. This encoding scheme allows the UE to quickly ascertain which type of location related data to clear if any by examining each bit in the UE SessionID field.

For simplicity Table 2 only shows pre session commands for clearing location related data. Other pre session commands for other actions e.g. to apply an offset in performing a position fix may also be encoded. In general any encoding scheme may be used for any set of pre session commands supported by the network.

The network may send a pre session command in the UE SessionID field of the sessionid as described above. In general the network may send a pre session command in any designated field of any message.

If UE is able to calculate the position fix locally without any interaction with the network then call flow proceeds to step M and the API call is returned immediately. Otherwise if UE needs network assistance to compute a position fix then the UE initiates a location session with LCS manager by sending an SLREQ message step D . Steps D through L in call flow generally correspond to steps D through L in call flow . LCS manager may send a pre session command in a SLRESP message in step G. Positioning server may also send a pre session command in an RRLP Measure Position Request message in step I. If a pre session command is received then UE performs the action indicated by the received command prior to or in conjunction with performing the position fix. After performing the position fix the UE API returns the position estimate to the application step M . For WAP applications the WAP browser at UE re requests the content and includes the position estimate in the request step N . For WAP applications LCS client downloads the requested content step O .

For call flow LCS client requests the current position of target UE from GMLC step I . GMLC verifies the identity of LCS client authenticates the LCS client and determines whether the LCS client is authorized for the requested LCS service. If LCS client is authorized then GMLC derives an identifier of target UE and determines the LCS QoS from either subscription data for the subscriber of UE or data supplied by LCS client . The UE identifier may be a Mobile Subscriber ISDN MSISDN which is a dialable number or an International Mobile Subscriber Identity IMSI which is a non dialable number. GMLC then sends to HLR a Mobile Application Part MAP Send Routing Info for LCS message that contains the identifier of UE step .

HLR verifies that GMLC is authorized to request location information for UE . HLR then returns to GMLC a MAP Send Routing Info for LCS Ack message that contains the address of 3G VMSC and the identifier of UE step . If GMLC already knows both the 3G VMSC address and the UE identifier e.g. from a previous location request then steps and may be skipped.

GMLC then sends a MAP Provide Subscriber Location message to 3G VMSC using the address provided by HLR step . This message contains the type of location information requested e.g. the current position the UE identifier the LCS QoS e.g. required accuracy and response time an indication of whether LCS client has override capability and possibly other information.

3G VMSC may authenticate GMLC and verify that the location request is allowed also step . If the location request is allowed then 3G VMSC may invoke the wireless network to perform paging authentication and ciphering of UE step . UE may provide its capabilities e.g. the UE based and or UE assisted positioning modes supported by the UE also step .

3G VMSC sends an LCS Location Notification Invoke message to UE step . This message indicates the type of location request e.g. the current position the identity of LCS client and whether privacy verification is required step . This message may also include a pre session command that indicates whether a particular action related to position determination is to be performed by the UE. UE notifies the wireless user of the location request. If privacy verification was requested then UE queries the wireless user regarding the location request and waits for the user to grant or deny permission. UE then sends an LCS Location Notification Return Result message to 3G VMSC step . This message indicates whether permission is granted or denied and optionally includes a position estimate for UE . If permission is granted then UE performs the action indicated by the pre session command if any received from the network.

3G VMSC sends a Radio Access Network Application Part RANAP Reporting Control message to SRNC step . This message contains the type of location information requested the UE capabilities and the LCS QoS. SRNC selects an appropriate positioning mode to use based on the location request the required accuracy and the UE capabilities. SRNC then initiates an appropriate message sequence for the selected positioning mode step . For example the message sequence may include steps H through K in for an A GPS positioning procedure. A message in the sequence may include a pre session command e.g. if one was not sent in step to direct UE to perform a desired action related to position determination. UE performs the required measurements and reports either the measurements obtained by the UE or a position estimate computed by the UE based on the measurements. SRNC receives the report from UE and for the UE assisted positioning mode computes a position estimate for the UE based on the received measurements. SRNC then sends to 3G VMSC an RANAP Location Report message that contains the position estimate for UE step . 3G VMSC then sends to GMLC a MAP Provide Subscriber Location Ack message that contains the position estimate for UE and possibly other pertinent information step . GMLC then sends to LCS client an LCS Service Response message that contains the position estimate for UE step .

Call flow is described in detail in documents 3GPP TS 23.171 and 3GPP TS 23.271 both of which are publicly available.

For clarity specific call flows with specific steps and messages have been described above in . In general call flows for network initiated and UE initiated position determination may include any number of steps which may be different from the steps shown in . Furthermore the call flows may use any messages which may be different from the messages shown in . The network may issue a pre session command in any message and at any step in a given call flow.

On the forward link base station transmits data signaling and pilot to the UEs within its coverage area. These various types of data are processed e.g. encoded modulated filtered amplified quadrature modulated and upconverted by a modulator transmitter Mod TMTR to generate a forward link modulated signal which is transmitted via an antenna . At UE an antenna receives the forward link modulated signals from base station and possibly other base stations and provides a receiver input signal to a receiver demodulator RCVR Demod . The receiver input signal may include received signals for base stations and possibly satellites. RCVR Demod processes the receiver input signal in a manner complementary to the processing performed by the transmitter s and provides various types of information that may be used for position determination. For example RCVR Demod may provide the time of arrival of received signals which may be used for position determination decoded messages used for the call flows described above assistance data from satellites and so on. A processor performs processing for UE . A memory unit stores program codes and data for processor .

On the reverse link UE may transmit data signaling and pilot to base station . These various types of data are processed by a modulator transmitter Mod TMTR to generate a reverse link modulated signal which is transmitted via antenna . At base station antenna receives the reverse link modulated signal from UE and provides a receiver input signal to a receiver demodulator RCVR Demod . RCVR Demod processes the receiver input signal in a manner complementary to the processing performed by the UEs and provides various types of information to a processor . Processor performs processing for base station . A memory unit stores program codes and data for processor . A communication Comm unit allows base station to exchange data with other network entities.

Within network entity a communication unit allows network entity to communicate with other network entities. A processor performs processing for network entity . A memory unit stores program codes and data for processor . A database stores information pertinent for network entity e.g. subscriber information location information GPS assistance data and so on .

The method and apparatus described herein may be implemented by various means. For example the method and apparatus may be implemented in hardware software or a combination thereof. For a hardware implementation the units used to perform the processing described above may be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSPDs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers micro controllers microprocessors other electronic units designed to perform the functions described herein or a combination thereof.

For a software implementation the method may be implemented with modules e.g. procedures functions and so on that perform the functions described herein. The software codes may be stored in a memory unit e.g. memory unit or in and executed by a processor e.g. processor or . The memory unit may be implemented within the processor or external to the processor.

The previous description of the disclosed embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

