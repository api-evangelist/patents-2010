---

title: Query independent quality signals
abstract: Methods, systems, and apparatus, including computer programs encoded on a computer storage medium, for processing video searches using query-independent quality scores.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08903812&OS=08903812&RS=08903812
owner: Google Inc.
number: 08903812
owner_city: Mountain View
owner_country: US
publication_date: 20101111
---
Under 35 U.S.C. 119 this application claims benefit of U.S. Provisional Application Ser. No. 61 293 109 filed Jan. 7 2010 the entire contents of which are hereby incorporated by reference.

This specification relates to digital information retrieval and particularly to processing video resources to facilitate search operations.

Internet search engines provide information about Internet accessible resources e.g. Web pages images sounds text documents multimedia content and other content that are responsive to a user s search query by returning a set of search results in response to the query. A search result includes for example a Uniform Resource Locator URL and a snippet of information for resources responsive to a query. The search results can be ranked i.e. put in an order according to scores assigned to the search results by a scoring function. The scoring function ranks the search results according to various signals for example where and how often query terms appear in the search results and how common the query terms are in the search results indexed by the search engine.

In general one innovative aspect of the subject matter described in this specification can be embodied in methods that include the actions of deriving a plurality of functions based on correlations between different data sets each representative of user interactions with different resources over a period of time evaluating the functions for a specific resource and combining weighted results of the evaluations to create a quality signal for the resource providing the quality signal to a ranking process for the resource when the resource is a search result for a query and wherein deriving evaluating and providing are performed by one or more data processing apparatus. Other embodiments of this aspect include corresponding systems apparatus and computer programs.

These and other aspects can optionally include one or more of the following features. A resource can be a video. A function in the plurality of functions can be a correlation between user ratings of the resources and watch times for the resources. A function in the plurality of functions can be a correlation between view counts for the resources and user ratings of the resources. A function in the plurality of functions can be a correlation between rankings of the resources and user ratings of the resources. The combining can produce a weighted sum. A function in the functions can be a sigmoid function. A weight in the weights can be calculated from a sigmoid function of one of the data sets wherein a data set comprises one of user ratings watch times view counts and rankings. The deriving can comprise fitting a curve to a correlation between two different data sets.

Particular embodiments of the subject matter described in this specification can be implemented to realize one or more of the following advantages. The quality of a video as determined by feature analysis and user feedback is used to limit the number of videos that are selected for scoring for a search operation and thus fewer processing resources are required to process a search operation. The quality of the video can also be used to adjust a relevance score of the video that is used to determine a ranking of a corresponding search for the video relative to search results to other videos and thus separate quality scores for selecting the videos for scoring and for scoring the videos are not required. A validation process validates a predictor model based on a positive correlation of quality score to user feedback thus ensuring the predictor model correlates with the subjective tastes of the users. A quality function is derived that determines a query independent quality signal for a video or other content based on noisy input signals. Input signals to the quality function can be based on user feedback and can include false data such as spam . The quality function suppresses noise and spam and can also be derived based on small sample data sets.

The details of one or more embodiments of the subject matter described in this specification are set forth in the accompanying drawings and the description below. Other features aspects and advantages of the subject matter will become apparent from the description the drawings and the claims.

Each search result can include summary information such as a representative frame from the video e.g. frame the video s title e.g. title a textual summary e.g. synopsis the running time of the video e.g. time data and a Uniform Resource Locator URL or other identifier specifying the location of the video e.g. identifier . In some implementations time data includes duration and the date on which the video was uploaded. Other search result information is possible. A video may be stored at the location e.g. identifier in a portion of a file that holds other content in a single file dedicated to the video in question or in multiple coordinated files. A video may but need not correspond to a file. A user can select a search result e.g. frame or identifier with a mouse click a finger gesture on a touch sensitive surface a speech command to a microphone or by way of another input device for example in order to play the video identified by the search result.

Search results can be ranked according to traditional techniques for determining an information retrieval IR score for indexed resources that contain videos in view of a given query. The relevance of a particular resource with respect to a particular search term or other provided information may be determined by any appropriate scoring technique.

In various implementations a system described below with reference to maintains user ratings watch times and view counts for videos. Each time a user rates a video the rating is logged as a rating for the video. Each time a user watches a video the amount of time that the video was played is logged as a watch time for the video. In some implementations the watch time for a video is the total time users spent watching the video. In further implementations the watch time for a video is accumulated regardless of whether the users watched portions of the video out of sequence skipped portions or viewed a portion more than once. If the watch time for a video is not known e.g. because the video is not hosted by a system that keeps track of user watch times the watch time can be estimated based on when users navigate off of the web page for the video. For example a web browser plug in or other software can monitor when users navigate off of web pages and record this information. If the system hosting the video does not programmatically provide a view count for the video e.g. through an application programming interface the view count can be detected by a plug in or other software that analyzes the web page for text indicating the view count for example.

In some implementations the system can also determine a query independent rank for a video. For example the world wide web s link structure can be used to determine a video s rank. A link e.g. hyperlink from resource A to resource B which contains a video is interpreted as a vote by resource A for resource B. In addition to the volume of votes or links a resource receives the resource that casts the vote is also considered. Votes cast by resources that are themselves important weigh more heavily and help to make other resources important . If the pointing resources are in turn the targets of links from other important resources they can be considered more important and the first resource can be considered particularly important because it is the target of important or even highly relevant resources. Such a technique may be the determinant of a resource s importance or one of multiple determinants. Appropriate techniques can also be taken to identify and eliminate attempts to cast false votes so as to artificially drive up the importance of a video.

Signals such as user ratings watch times view counts ranks for videos and other signals can be used to derive a query independent quality signal Q for video. In various implementations Q is calculated as a weighted sum 

In various implementations the predictor function P is a general sigmoid predictor function for an input signal s e.g. average user rating watch time view count or rank which fits a correlation of the input signal s to another signal referred to as a ground truth 

By way of illustration the predictor function P can be used to fit the correlations between data sets depicted in . In some implementations results from different videos in bins within the same range of the x axis are clustered and represented as one point with the average or median x value of the bin and the average or median of the clustered results y axis values are plotted in . is an example plot correlating the average user ratings in each bin to the natural logarithm of median average watch times in each bin for a set of videos. is an example plot correlating the natural logarithm of median user watch times in each bin to average user ratings in each bin for a set of videos. is an example plot correlating the natural logarithm of view counts in each bin to average user ratings in each bin for a set of videos. And is an example plot correlating average ranks in each bin to an average user ratings in each bin for a set of videos. Others correlations are possible such as video length to average user rating and so on.

The voting function V measures the overall variance of the predictor function P. In some implementations V is defined as a general sigmoid function 

In further implementations other input signals are possible. For example a raters per view signal is calculated as the number of users who have rated a video divided by the number of times a video has been viewed. If raters per view is too large e.g. 1 400 this implies that there is potentially spam activity e.g. click spam which artificially raises the rating of a video . In order to counteract the effects of spam the number of raters can be artificially reduced. In some implementations the following formula can be used to reduce the number of raters 

Another possible signal is provider credit which is the average rating of all videos uploaded by a provider excluding top ratings e.g. 5 star ratings . In order to counteract the effects of spam for this signal the video ratings can be weighted by the raters per view anti spam technique described above. A further technique for counteracting spam is to ignore ratings where the corresponding watch time is short.

In further implementations Q P and V functions can be derived for resources other than videos where user ratings and user behavior towards the resource content e.g. time spent with the content come into play. For example other resources can include audio content e.g. music newscasts podcasts sports events shows audio books streamed television or other video content electronic games and web pages.

A user interacts with the system through a client device or other device. For example the client device can be a computer terminal within a local area network LAN or wide area network WAN . The client device generally includes a random access memory RAM or other memory and or a storage device and a processor . The processor is structured to process instructions on the client device . The processor is a single or multi threaded processor having one or more processor cores for example. The processor is structured to process instructions stored in the RAM or other memory and or a storage device included with the client device to display graphical information for a user interface.

The RAM on the client device includes a tracker software program for keeping count of views watch times and user ratings of videos on the client device . The tracker can send the tracked data as a client side signal into the network e.g. the Internet or other network . The data is forwarded to an analysis system as a server side signal . The analysis system generally includes a RAM or other memory and or a storage device and a processor . The processor is structured to process instructions on the analysis system . The processor is a single or multi threaded processor having one or more processor cores for example. The RAM includes an analyzer software program for analyzing the tracking data in order to derive or update predictor and voting functions. The tracking data can be stored in one or more tracking logs which are used to record the collected information for multiple users and videos. In various implementations the recorded information includes log entries that indicate the IP Internet Protocol address of the client which transmitted the information the type of data e.g. view count watch time user rating and a value for the data.

A user connects to the search engine within a server system to submit a query . When the user submits the query through an input device attached to a client device a client side query signal is sent into the network and is forwarded to the server system as a server side query signal . Server system can be one or more server devices in one or more locations. A server device includes a memory device which can include the search engine loaded therein. A processor is structured to process instructions within the device . These instructions can implement one or more components of the search engine . The processor can be a single or multi threaded processor and can include multiple processing cores. The processor can process instructions stored in the memory related to the search engine and can send information to the client devices through the network to create a graphical presentation in a user interface of the client device e.g. a search results web page displayed in a web browser .

The server side query signal is received by the search engine . The search engine uses the information within the user query e.g. query terms to find relevant resources e.g. videos . The search engine can include an indexing engine that actively searches a corpus e.g. web pages on the Internet to index the resources found in that corpus and the index information for the resources in the corpus can be stored in an index database . This index database can be accessed to identify resources related to the user query . Note that an electronic resource which for brevity will simply be referred to as a resource does not necessarily correspond to a file. A resource can be stored in a portion of a file that holds other resources in a single file dedicated to the resource in question or in multiple coordinated files. Moreover a resource can be stored in a memory without having first been stored in file.

The search engine includes a ranking engine to rank the resources related to the user query using a scoring or ranking function. The ranking of the resources can be performed using traditional techniques for determining an information retrieval IR score for indexed resources in view of a given query for example. The relevance of a particular resource with respect to a particular search term or to other provided information may be determined by any appropriate technique.

To further improve such traditional resource ranking techniques the ranking engine receives quality signals from a quality signal engine to assist in determining an appropriate ranking for video search results. In some implementations the quality signal engine calculates the quality signal on the fly using the predictor and voting functions derived by the analyzer . Alternatively the quality signal can be calculated for videos ahead of time so that the quality signal engine only needs to look up the value for a given video.

The search engine forwards the final ranked result list within a server side search results signal through the network . Exiting the network a client side search results signal is received by the client device where the results are stored within the RAM and or used by the processor to display the results on an output device for the user . The server system may also maintain one or more user search histories based on the queries the server system receives from a user and from results that a user selected after a search was performed.

The components shown in can be combined in various manners and implemented in various system configurations. For example the analyzer and the quality signal engine can be combined into a single component on the analysis system or the server system . The quality signal engine and the ranking engine can also be merged and in general a ranking engine includes any software component that generates a ranking of video results after a query. Moreover a ranking engine can be included in a client system in addition to or rather than in a server system.

Each module runs as part of the operating system on the server runs as an application on the server or runs as part of the operating system and part of an application on the server for instance. Although several software modules are illustrated there may be fewer or more software modules. Moreover the software modules can be distributed on one or more data processing apparatus connected by one or more networks or other suitable communication mediums.

The server also includes hardware or firmware devices including one or more processors one or more additional devices a computer readable medium a communication interface and one or more user interface devices . Each processor is capable of processing instructions for execution within the server . In some implementations the processor is a single or multi threaded processor. Each processor is capable of processing instructions stored on the computer readable medium or on a storage device such as one of the additional devices . The server uses its communication interface to communicate with one or more computers for example over a network . Examples of user interface devices include a display a camera a speaker a microphone a tactile feedback device a keyboard and a mouse. The server can store instructions that implement operations associated with the modules described above for example on the computer readable medium or one or more additional devices for example one or more of a floppy disk device a hard disk device an optical disk device or a tape device.

Embodiments of the subject matter and the operations described in this specification can be implemented in digital electronic circuitry or in computer software firmware or hardware including the structures disclosed in this specification and their structural equivalents or in combinations of one or more of them. Embodiments of the subject matter described in this specification can be implemented as one or more computer programs i.e. one or more modules of computer program instructions encoded on computer storage medium for execution by or to control the operation of data processing apparatus. Alternatively or in addition the program instructions can be encoded on an artificially generated propagated signal e.g. a machine generated electrical optical or electromagnetic signal that is generated to encode information for transmission to suitable receiver apparatus for execution by a data processing apparatus. A computer storage medium can be or be included in a computer readable storage device a computer readable storage substrate a random or serial access memory array or device or a combination of one or more of them. Moreover while a computer storage medium is not a propagated signal a computer storage medium can be a source or destination of computer program instructions encoded in an artificially generated propagated signal. The computer storage medium can also be or be included in one or more separate physical components or media e.g. multiple CDs disks or other storage devices .

The operations described in this specification can be implemented as operations performed by a data processing apparatus on data stored on one or more computer readable storage devices or received from other sources.

The term data processing apparatus encompasses all kinds of apparatus devices and machines for processing data including by way of example a programmable processor a computer a system on a chip or multiple ones or combinations of the foregoing The apparatus can include special purpose logic circuitry e.g. an FPGA field programmable gate array or an ASIC application specific integrated circuit . The apparatus can also include in addition to hardware code that creates an execution environment for the computer program in question e.g. code that constitutes processor firmware a protocol stack a database management system an operating system a cross platform runtime environment a virtual machine or a combination of one or more of them. The apparatus and execution environment can realize various different computing model infrastructures such as web services distributed computing and grid computing infrastructures.

A computer program also known as a program software software application script or code can be written in any form of programming language including compiled or interpreted languages declarative or procedural languages and it can be deployed in any form including as a stand alone program or as a module component subroutine object or other unit suitable for use in a computing environment. A computer program may but need not correspond to a file in a file system. A program can be stored in a portion of a file that holds other programs or data e.g. one or more scripts stored in a markup language resource in a single file dedicated to the program in question or in multiple coordinated files e.g. files that store one or more modules sub programs or portions of code . A computer program can be deployed to be executed on one computer or on multiple computers that are located at one site or distributed across multiple sites and interconnected by a communication network.

The processes and logic flows described in this specification can be performed by one or more programmable processors executing one or more computer programs to perform actions by operating on input data and generating output. The processes and logic flows can also be performed by and apparatus can also be implemented as special purpose logic circuitry e.g. an FPGA field programmable gate array or an ASIC application specific integrated circuit .

Processors suitable for the execution of a computer program include by way of example both general and special purpose microprocessors and any one or more processors of any kind of digital computer. Generally a processor will receive instructions and data from a read only memory or a random access memory or both. The essential elements of a computer are a processor for performing actions in accordance with instructions and one or more memory devices for storing instructions and data. Generally a computer will also include or be operatively coupled to receive data from or transfer data to or both one or more mass storage devices for storing data e.g. magnetic magneto optical disks or optical disks. However a computer need not have such devices. Moreover a computer can be embedded in another device e.g. a mobile telephone a personal digital assistant PDA a mobile audio or video player a game console a Global Positioning System GPS receiver or a portable storage device e.g. a universal serial bus USB flash drive to name just a few. Devices suitable for storing computer program instructions and data include all forms of non volatile memory media and memory devices including by way of example semiconductor memory devices e.g. EPROM EEPROM and flash memory devices magnetic disks e.g. internal hard disks or removable disks magneto optical disks and CD ROM and DVD ROM disks. The processor and the memory can be supplemented by or incorporated in special purpose logic circuitry.

To provide for interaction with a user embodiments of the subject matter described in this specification can be implemented on a computer having a display device e.g. a CRT cathode ray tube or LCD liquid crystal display monitor for displaying information to the user and a keyboard and a pointing device e.g. a mouse or a trackball by which the user can provide input to the computer. Other kinds of devices can be used to provide for interaction with a user as well for example feedback provided to the user can be any form of sensory feedback e.g. visual feedback auditory feedback or tactile feedback and input from the user can be received in any form including acoustic speech or tactile input. In addition a computer can interact with a user by sending resources to and receiving resources from a device that is used by the user for example by sending web pages to a web browser on a user s client device in response to requests received from the web browser.

Embodiments of the subject matter described in this specification can be implemented in a computing system that includes a back end component e.g. as a data server or that includes a middleware component e.g. an application server or that includes a front end component e.g. a client computer having a graphical user interface or a Web browser through which a user can interact with an implementation of the subject matter described in this specification or any combination of one or more such back end middleware or front end components. The components of the system can be interconnected by any form or medium of digital data communication e.g. a communication network. Examples of communication networks include a local area network LAN and a wide area network WAN an inter network e.g. the Internet and peer to peer networks e.g. ad hoc peer to peer networks .

The computing system can include clients and servers. A client and server are generally remote from each other and typically interact through a communication network. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client server relationship to each other. In some embodiments a server transmits data e.g. an HTML page to a client device e.g. for purposes of displaying data to and receiving user input from a user interacting with the client device . Data generated at the client device e.g. a result of the user interaction can be received from the client device at the server.

While this specification contains many specific implementation details these should not be construed as limitations on the scope of any inventions or of what may be claimed but rather as descriptions of features specific to particular embodiments of particular inventions. Certain features that are described in this specification in the context of separate embodiments can also be implemented in combination in a single embodiment. Conversely various features that are described in the context of a single embodiment can also be implemented in multiple embodiments separately or in any suitable subcombination. Moreover although features may be described above as acting in certain combinations and even initially claimed as such one or more features from a claimed combination can in some cases be excised from the combination and the claimed combination may be directed to a subcombination or variation of a subcombination.

Similarly while operations are depicted in the drawings in a particular order this should not be understood as requiring that such operations be performed in the particular order shown or in sequential order or that all illustrated operations be performed to achieve desirable results. In certain circumstances multitasking and parallel processing may be advantageous. Moreover the separation of various system components in the embodiments described above should not be understood as requiring such separation in all embodiments and it should be understood that the described program components and systems can generally be integrated together in a single software product or packaged into multiple software products.

Thus particular embodiments of the subject matter have been described. Other embodiments are within the scope of the following claims. In some cases the actions recited in the claims can be performed in a different order and still achieve desirable results. In addition the processes depicted in the accompanying figures do not necessarily require the particular order shown or sequential order to achieve desirable results. In certain implementations multitasking and parallel processing may be advantageous.

