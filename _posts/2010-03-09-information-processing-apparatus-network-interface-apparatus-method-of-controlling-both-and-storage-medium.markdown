---

title: Information processing apparatus, network interface apparatus, method of controlling both, and storage medium
abstract: An apparatus includes a storage unit configured to store information which is acquired by a negotiation with an external apparatus and is for communication via a network, a detection unit configured to detect that conditions are satisfied for switching to a power saving mode in which power consumption is smaller than in a normal power mode while the normal power mode is operating, and a notification unit configured to notify a network interface of the stored information when the conditions for switching to the power saving mode are satisfied.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08914654&OS=08914654&RS=08914654
owner: Canon Kabushiki Kaisha
number: 08914654
owner_city: Tokyo
owner_country: JP
publication_date: 20100309
---
The present invention relates to an information processing apparatus which is connected to a network via a network interface and communicable with an external apparatus.

Conventionally an information processing system which has a power saving mode for minimizing power consumption on standby has been known. As an example of such an information processing system there is a communication system including an information processing apparatus on the main body side provided with a main central processing unit CPU and a network interface card NIC apparatus provided with a sub CPU. In general such a communication system brings the information processing apparatus on the main body side into a power saving mode during the power saving mode and each module of the NIC apparatus which uses less power stands by while being supplied with a normal electric power.

Japanese Patent Application Laid Open No. 2006 259906 discusses that when a normal power mode is transferred to a power saving mode to stop supplying the main CPU with electric power the main CPU notifies the sub CPU of an address of a multicast packet to be responded. This allows the sub CPU to respond instead of the main CPU when the sub CPU receives a multicast packet when the supply of the electric power to the main CPU stopped which eliminates need for starting the main CPU. In other words a stoppage in supplying the electric power to the main CPU can be continued longer to increase an effect of power saving.

In recent years as a technique for encrypting a network path in order to protect confidential information an encryption system such as Internet protocol security IPSec and secure socket layer SSL has been known. The use of these techniques can transfer data via a network with data encrypted and prevent leakage of information.

As a standard for authentication used in the connection of a system to a local area network LAN an 802.1X is known. The 802.1X limits connection by authentication to prevent a terminal device other than a predetermined terminal device from connecting a system to a computer network.

As described above information about a packet to be responded when the information processing apparatus on the main body side is brought into a power saving mode is registered into the NIC apparatus to allow the NIC apparatus to respond to a received packet instead of the information processing apparatus on the main body side.

When the NIC apparatus responds instead of the information processing apparatus on the main body side if a packet transmitted via the network is encrypted the NIC apparatus may not be able to adequately respond.

In other words when the NIC apparatus is caused to respond instead of the information processing apparatus on the main body side a pattern of the packet to be responded by the NIC apparatus and a packet to be transmitted as a response to the packet matching with the pattern are registered into the NIC apparatus. This means that the NIC apparatus which receives the packet matching with the registered pattern transmits the packet corresponding to the pattern. If the packet received by the NIC apparatus is encrypted and then the encrypted packet is compared with the registered pattern it is determined that the content does not match with the registered pattern even if the content of the packet matches with the registered pattern.

In this case the information processing apparatus on the main body side is returned from the power saving mode to the normal power mode and the packet received by the NIC apparatus is to be transferred to the information processing apparatus on the main body side. Thus this increases the number of times that the information processing apparatus on the main body side is returned from the power saving mode to the normal power mode and the effect of saving power is lessened.

The NIC apparatus may include a configuration for encryption and decryption processing similar to the information processing apparatus on the main body side which however may cause the following situation.

When the information processing apparatus on the main body side executes an encrypted communication the information processing apparatus on the main body side previously performs negotiation with an external apparatus which is the other party for the encrypted communication to acquire and store information to execute the encrypted communication. The stored information is used when the information processing apparatus on the main body side executes the encrypted communication.

However if the information processing apparatus on the main body side is switched to the power saving mode and the NIC apparatus executes the encrypted communication with an external apparatus the NIC apparatus is to perform again the negotiation with the external apparatus. Such processing may cause a situation in that both the NIC and the external apparatus are subjected to an unnecessary load and a time consuming negotiation decreases communication efficiency.

Further a generally NIC apparatus is poorer in hardware configuration processing efficiency of CPU and memory capacity than the information processing apparatus on the main body side. Therefore it may be difficult for the NIC apparatus to be equipped with a configuration for performing the negotiation with the external apparatus as well as a configuration for performing the encryption and the decryption processing.

This applies to an authentication system such as 802.1X. If the information processing apparatus on the main body side is switched to the power saving mode and the NIC apparatus communicates with the external apparatus instead of the information processing apparatus on the main body side the negotiation is again to be performed between the NIC apparatus and the external apparatus.

According to an aspect of the present invention an apparatus includes a storage unit configured to store information which is acquired by a negotiation with an external apparatus and is for communication via a network a detection unit configured to detect that conditions are satisfied for switching to a power saving mode in which power consumption is smaller than in a normal power mode while the normal power mode is operating and a notification unit configured to notify a network interface of the stored information when the conditions for switching to the power saving mode are satisfied.

Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.

Various exemplary embodiments features and aspects of the invention will be described in detail below with reference to the drawings.

The following exemplary embodiments do not limit the invention according to the claims and all the combinations of characteristics described in the exemplary embodiments are not limited as means for solution of the invention.

A first exemplary embodiment describes processing in the case where a communication system executes an encrypted communication. As an example of the encrypted communication a case is described in which Internet protocol security IPSec is used to communicate.

The IPSec is a protocol for preventing data which flows on a network from being tapped or altered using a specific authentication algorithm or encryption algorithm. The IPSec includes two protocols of authentication header AH and encapsulations security payload ESP . The AH performs only authentication and the ESP performs authentication and encryption. It is determined which protocol is used and which type of the authentication algorithm or the encryption algorithm is used by negotiation before IPSec communication is started. It is defined that a key used in the authentication algorithm is exchanged between communication terminals using Internet key exchange IKE before IPSec communication is started. Request for comment RFC defines the detail of the IPSec and IKE including a packet format.

A CPU executes software program of the information processing apparatus to control the entire apparatus. A random access memory RAM is used for temporarily storing data when the CPU controls the apparatus. A read only memory ROM stores a boot program of the apparatus and fixed parameters.

A hard disk drive HDD is used for storing various pieces of data. A nonvolatile random access memory NVRAM stores various setting values of the information processing apparatus . An operation unit interface I F controls an operation unit causes a liquid crystal panel provided on the operation unit to display various operation screens and transmits a user s instruction inputted via the operation screen to the CPU .

A scanner I F controls a scanner . The scanner reads an image on a document to generate image data. A printer I F controls a printer . The printer prints an image based on the image data on a recording medium. An extension I F is connected to an extension I F on the NIC side and controls data communication with an external apparatus PC on the LAN via the NIC .

The CPU executes the software program of the NIC to control the entire apparatus. A RAM is used for temporarily storing data when the CPU controls the apparatus. A ROM stores a boot program of the apparatus and fixed parameters.

The extension I F is connected to the extension I F on the information processing apparatus side and controls data communication between the information processing apparatus and the NIC . A network I F is connected to the LAN and controls the data communication between the NIC the information processing apparatus and the communication system and the external apparatus PC on the LAN .

The information processing apparatus operates in either a normal power mode or a power saving mode in which power consumption is smaller than that in the normal power mode. When the information processing apparatus is switched from the normal power mode to the power saving mode the supply of electric power to the CPU the HDD the NVRAM and others is stopped. On the other hand the NIC is operated by an application specific integrated circuit ASIC which is different from that of the information processing apparatus . Therefore even when the information processing apparatus is switched to the power saving mode the supply of electric power to the NIC is continued to realize a proxy response function described later.

An IPSec control unit controls an IPSec processing unit and stores information for the IPSec processing unit to perform processing related to IPSec. A communication unit between CPUs transmits and receives data to and from the software which is operated on the NIC via the extension I F and the extension I F . A communication unit between CPUs transmits and receives data to and from the software which is operated on the information processing apparatus via the extension I F and the extension I F .

An IPSec processing unit performs encryption decryption processing of a packet transmitted to and received from the external apparatus. As is not the case with the IPSec processing unit the IPSec processing unit does not include a configuration for performing negotiation for acquiring information for executing IPSec communication however the IPSec processing unit may be similar to the IPSec processing unit in configuration. An IPSec control unit controls the IPSec processing unit and stores information for the IPSec processing unit to perform processing related to IPSec.

A network I F control unit controls the transmission and reception of the packet performed by the network I F . The network I F control unit monitors which mode the information processing apparatus operates in the normal power mode or the power saving mode. When the information processing apparatus is operated in the normal power mode the network I F control unit transfers the packet received from the LAN to the information processing apparatus . When the information processing apparatus is operated in the power saving mode the network I F control unit transfers the packet received from the LAN to the IPSec processing unit .

A proxy response processing unit receives the received packet which is transmitted from the IPSec processing unit . The IPSec processing unit receives the packet only while the information processing apparatus is being operated in the power saving mode so that the proxy response processing unit is also operated only in that case.

The proxy response processing unit classifies the received packets into three types a packet to be discarded a packet to be transferred to the information processing apparatus and a packet to be responded instead. The packet to be discarded refers to a negligible packet for example a packet is not destined for the NIC apparatus i.e. a packet to which no response is required . If the packets are classified into the packet to be discarded the received packet is discarded.

The packet to be transferred to the information processing apparatus refers to a received packet which uses to some processing but a processing cannot be provided only by the NIC . If such a packet is received the proxy response processing unit causes the information processing apparatus to return from the power saving mode to the normal power mode and transfers the received packet to the information processing apparatus .

The packet to be responded instead refers to a packet to which the NIC responds instead of the information processing apparatus . In this case the proxy response processing unit encrypts the packet to be transmitted as a response using an IPSec transmission processing library and then transmits the encrypted packet.

The IPSec transmission processing library is a module for supplying an application programming interface API and performs encryption processing on the packet delivered from the proxy response processing unit as an in parameter. The IPSec transmission processing library outputs the encrypted packet together with an API return value as an out parameter.

A security parameter index SPI is a value for identifying the SA. An encryption algorithm indicates a type of the encryption algorithm used in this traffic. An authentication algorithm indicates a type of the authentication algorithm used in the traffic. An encryption key indicates key information used for encrypting the traffic. An authentication key indicates key information used for authenticating the traffic. A lifetime type indicates which physical amount is used as an effective period of the SA time unit in second passed after the SA is generated or an amount of data unit in kilobyte to be transmitted. A lifetime indicates an actual value of SA lifetime.

An SA generation time indicates time in seconds passed after the start of the system when the SA is generated and is used for determining the effectiveness of the SA when time is set to the SA lifetime type . An amount of transmission data indicates an amount of data transmitted after the SA is generated and is used for determining the effectiveness of the SA when an amount of data is set to the SA lifetime type . A sequence number indicates a value for protecting the SA from replay attack is set to an IPSec header and incremented by one each time a packet is transmitted.

A transmission source address indicates a transmission source IP IPv6 address of the IPSec traffic associated with the SA. A transmission destination address indicates a transmission destination IP IPv6 address of the IPSec traffic associated with the SA. A transmission source port number indicates a transmission source port number of the IPSec traffic associated with the SA. A transmission destination port number indicates a transmission destination port number of the IPSec traffic associated with the SA. A protocol type indicates a protocol type of the IPSec traffic associated with the SA.

Each operation step illustrated in the flow charts of is realized by the CPU of the information processing apparatus executing a control program. Each operation step illustrated in the flow charts of is realized by the CPU of the NIC executing a control program.

The operation of the sleep control unit is described below with reference to . The sleep control unit executes each processing illustrated in the flowchart of when the sleep control unit detects that the information processing apparatus satisfies conditions for switching to the power saving mode.

In step S the sleep control unit inquires each of previously registered software modules of whether the information processing apparatus can be switched to sleep state to check whether the switching to the sleep state does not cause any issue. In the present exemplary embodiment the IPSec control unit is registered as an inquiry target as to whether the information processing apparatus can be switched to the sleep state. The information processing apparatus cannot be switched the sleep state while the IPSec processing unit is negotiating with the external apparatus for example.

As described above in the communication system the IPSec processing unit of the NIC does not include a configuration for negotiating with the external apparatus. This aims to minimize power consumption on standby by simplifying the configuration of the NIC because the supply of electric power to the NIC is continued even after the information processing apparatus is brought into the power saving mode.

In step S the sleep control unit determines whether the information processing apparatus can be switched to the sleep state based on a response to the inquiry as to whether the information processing apparatus can be switched to the sleep state. If the information processing apparatus can be switched to the sleep state YES in step S the processing proceeds to step S otherwise NO in step S the processing proceeds to step S. In step S the processing waits until a predetermined time period elapses and returns to the step S again.

In step S the sleep control unit notifies the IPSec control unit of the switching to the sleep state. In step S the sleep control unit stands by until the sleep control unit receives a response from a module the IPSec control unit notified of the switching to the sleep state. If the sleep control unit receives the response from the IPSec control unit YES in step S then in step S the information processing apparatus is switched to the sleep state power saving mode and the processing is ended.

The operation of the IPSec control unit is described below with reference to . In step S the IPSec control unit stands by until the sleep control unit notifies the IPSec control unit of the switching to the sleep state.

If the sleep control unit notifies the IPSec control unit of the switching to the sleep state YES in step S then the processing proceeds to step S an SAD updated flag is set to OFF. The SAD updated flag is stored in an area secured on the RAM . The IPSec processing unit refers to this flag and stops processing if the flag is set to OFF until it is turned to ON.

In step S the IPSec control unit acquires SA information stored in the RAM . In step S the IPSec control unit determines whether there is any effective SA information in the information acquired in step S. If there is any effective SA information YES in step S the processing proceeds to step S and the IPSec control unit notifies the NIC of the SA information via the communication unit between CPUs .

In step S the IPSec control unit transmits a response to the sleep control unit . Thereafter the information processing apparatus is brought into the sleep mode so that the IPSec control unit stops the operation.

In step S the IPSec control unit determines whether the information processing apparatus is returned to the normal power mode from the power saving mode. If the information processing apparatus is returned to the normal power mode YES in step S then in step S the IPSec control unit determines whether the SA information is received from the NIC.

If the information processing apparatus receives the SA information from the NIC YES in step S the processing proceeds to step S and the SA information stored in the RAM is updated using the received SA information. In step S the SAD updated flag indicating that the update of the SA information is completed is set to ON.

In step S the IPSec control unit waits to receive the SA information from the information processing apparatus . If the IPSec control unit receives the SA information YES instep S the processing proceeds to step S. The IPSec control unit secures an SAD area on the RAM and stores the received SA information therein. The processing proceeds to step S and the IPSec control unit sets the SA information reception flag set to OFF in step S to ON. Instep S the IPSec control unit stands by until it receives a request for transmitting the SA information.

The request for transmitting the SA information is transmitted by the network I F control unit which monitors the operation mode i.e. the normal power mode or the power saving mode of the information processing apparatus when the network I F control unit recognizes that the information processing apparatus is returned to the normal power mode. If the IPSec control unit determines that the request for transmitting the SA information is received YES instep S the processing proceeds to step S. In step S the IPSec control unit transmits the SA information stored in the RAM to the information processing apparatus via the communication unit between CPUs .

If it is determined that the received packet is not sent to the MAC address of the NIC apparatus NO in step S the processing proceeds to step S the received packet is discarded and the processing is ended.

On the other hand if the received packet is sent to the MAC address of the NIC apparatus YES in step S the processing proceeds to step S. In step S the IPSec processing unit determines whether the received packet is the IPSec packet or the received packet is encrypted based on whether a header next to the Ethernet frame is an IPSec header ESP header or AH header . If it is determined that the received packet is not the IPSec packet NO in step S then in step S the IPSec processing unit transfers the received packet to the proxy response processing unit and the processing is ended.

If the received packet is the IPSec packet YES in step S then in step S the IPSec processing unit determines whether the SA information is received with reference to the SA information reception flag on the RAM .

If the SA information is not received NO in step S then in step S the IPSec processing unit transfers the received packet to the proxy response processing unit and the processing is ended. Because of the absence of the SA information for the IPSec communication the IPSec is to perform negotiation however the NIC cannot executes the negotiation as described above because it does not support .

If it is determined that the SA information is received YES in step S in step S the IPSec packet is decrypted based on the SA information stored in the RAM . However if the AH header is provided for the IPSec packet as the IPSec header the IPSec packet is not encrypted so that the decryption processing is not required.

In step S the decrypted packet is subjected to authentication processing based on the SA information stored in the RAM . In step S a result of the authentication processing is determined. If the result of the processing is negative NO in step S it is determined that the received packet is false and the processing proceeds to step S. In step S the received packet is discarded and the processing is ended. If the result of the processing is acceptable YES in step S in step S a clear received packet in which the IPSec header and the authentication data are deleted is transferred to the proxy response processing unit and the processing is ended.

The above determination is made based on packet pattern information of which the information processing apparatus notified the NIC before the information processing apparatus is switched to the power saving mode. More specifically the information processing apparatus notifies the NIC of a reception packet pattern for identifying the packet to be responded by the NIC and a transmission packet to be transmitted as a response while the information processing apparatus is operating in the power saving mode and registers them. When the NIC receives the packet coinciding with the reception packet pattern the proxy response processing unit determines that the packet is the packet to be responded instead YES in step S and the processing proceeds to step S.

If the proxy response processing unit determines that the received packet is not the packet to be responded instead NO in step S the processing proceeds to step S and the proxy response processing unit determines whether the received packet is the packet to be transferred to the information processing apparatus . As is the case with the determination in step S the determination is made based on packet pattern information of which the information processing apparatus notified the NIC before the information processing apparatus is switched to the power saving mode.

If the proxy response processing unit determines that the received packet is the packet to be transferred to the information processing apparatus YES in step S the processing proceeds to step S and the received packet is transferred to the information processing apparatus . On the other hand if the proxy response processing unit determines that the received packet is not the packet to be transferred to the information processing apparatus NO in step S the processing proceeds to step S and the received packet is discarded.

In step S the proxy response processing unit generates a response packet to be transmitted as a response to the received packet. Then in step S the proxy response processing unit calls the IPSec transmission processing library and transfers the received packet thereto as an in parameter.

In step S the proxy response processing unit determines whether the API return value from the IPSec transmission processing library needs to be transferred. If the API return value needs to be transferred YES in step S the processing proceeds to step S and the received packet is transferred to the information processing apparatus . If the API return value does not need to be transferred NO in step S the processing proceeds to step S and the proxy response processing unit determines whether the API return value from the IPSec transmission processing library is OK i.e. acceptable .

If it is determined that the API return value is OK YES in step S in step S the response packet is transmitted to the external apparatus otherwise NO in step S the processing proceeds to step S and the received packet is discarded.

As described above the proxy response processing unit delivers the generated packet to the IPSec transmission processing library as the in parameter of the API to perform the IPSec processing of the response packet to encrypt the response packet .

In step S the IPSec transmission processing library determines whether the SA information corresponding to the transmission source address the transmission destination address the transmission source port number the transmission destination port number and the protocol type of the packet delivered as arguments of the API exists in the SAD on the RAM . If the corresponding SA information does not exist NO in step S in step S need to be transferred is set as the return value of the API and the API is ended. If the return value is acquired the proxy response processing unit causes the information processing apparatus to return from the power saving mode and transfers the received packet to the information processing apparatus .

If the corresponding SA information exists YES in step S then in step S the IPSec transmission processing library determines whether the SA information is effective. It is determined that the SA information is effective if the lifetime thereof does not expire.

If it is determined that the SA information is ineffective NO instep S the proceeding proceeds to step S and need to be transferred is set as the return value of the API and the API is ended. If it is determined that the SA information is effective YES instep S the proceeding proceeds to steps S and S and the IPSec transmission processing library executes encryption processing and authentication processing of the transmission packet according to the SA information and sets the packet as the out parameter of the API.

In step S the IPSec transmission processing library updates the SAD. The SAD information updated here is the amount of transmission data and the sequence number . In step S OK indicating that the IPSec processing is normally finished is set as the API return value and the API is ended. Although not illustrated in the flow chart if the IPSec processing is not normally finished OK is not set to the API return value.

As described above the information processing apparatus can notify the network interface apparatus NIC of the information used for communication SA information which is acquired by the information processing apparatus negotiating with the external apparatus PC when the information processing apparatus is brought into the power saving mode.

Therefore the received packet can be decrypted without the need for the NIC to negotiate again with the external apparatus even if the encrypted packet is transmitted from the external apparatus with the information processing apparatus brought into the power saving mode. In other words even though the received packet is encrypted the NIC can respond instead of the information processing apparatus without causing the information processing apparatus to return from the power saving mode.

A second exemplary embodiment of the present invention is described below. The second exemplary embodiment describes processing in the case where the communication system performs an authentication processing using the Institute of Electrical and Electronics Engineers Standards IEEE802.1X and connects with the LAN . Although 802.1X is described here as an example of an authentication system the present exemplary embodiment may be applied to the case where other authentication systems are used. The components similar to those in the first exemplary embodiment are denoted by the same reference numerals and characters and a detailed description thereof is omitted.

The IEEE802.1X operates through cooperation between three components a supplicant to be authenticated an authenticator for performing an access control of a terminal based on an authentication result and an authentication server RADIUS server for managing authentication information. In other words this is a security mechanism in which only the supplicant authenticated by the authentication server is allowed to communicate by the authenticator.

The communication system executes an IEEE802.1X authentication when it is connected to the LAN at a physical circuit level. The communication system is authenticated by the authentication server and allowed to communicate with the LAN switch . Even after an initial authentication the authentication server requests the communication system to execute the IEEE802.1X authentication again at a fixed time interval. The fixed time interval is based on a value which a manager sets to the authentication server .

A communication unit between CPUs transmits and receives data to and from the software which is operated on the NIC via the extension I F and the extension I F . A communication unit between CPUs transmits and receives data to and from the software which is operated on the information processing apparatus via the extension I F and the extension I F .

An IEEE802.1X processing unit negotiates with the authentication server to execute the IEEE802.1X authentication processing and acquires the authentication result. An IEEE802.1X control unit controls the IEEE802.1X processing unit .

A network I F control unit controls the transmission and reception of the packet performed by the network I F . The network I F control unit monitors which mode the information processing apparatus operates in the normal power mode or the power saving mode. When the information processing apparatus is operated in the normal power mode the network I F control unit transfers the packet received from the LAN to the information processing apparatus . When the information processing apparatus is operated in the power saving mode the network I F control unit transfers the packet received from the LAN to the IEEE802.1X processing unit .

A proxy response processing unit receives the received packet which is transferred from the IEEE802.1X processing unit . The IEEE802.1X processing unit receives the packet only while the information processing apparatus is being operated in the power saving mode so that the proxy response processing unit is also operated only in that case.

The proxy response processing unit classifies the received packets into three types a packet to be discarded a packet to be transferred to the information processing apparatus and a packet to be responded instead. The packet to be discarded the packet to be transferred to the information processing apparatus and the packet to be responded instead are the same as those described in the first exemplary embodiment.

Each operation step illustrated in the flow chart of is realized by the CPU of the information processing apparatus executing a control program. Each operation step illustrated in the flow charts of is realized by the CPU of the NIC executing a control program.

The sleep control unit of the information processing apparatus operates similarly to that described in for the first exemplary embodiment so that description thereof is omitted. However in step S of the sleep control unit inquires of the IPSec control unit whether the information processing apparatus can be switched to sleep state whereas the sleep control unit inquires of the IEEE802.1X control unit in the present exemplary embodiment. In step S of the sleep control unit notifies the IPSec control unit of the switching to the sleep state whereas the sleep control unit notifies the IEEE802.1X control unit in the present exemplary embodiment. In step S of the sleep control unit waits for a response from the IPSec control unit whereas the sleep control unit waits for a response from the IEEE802.1X control unit in the present exemplary embodiment.

If the sleep control unit notifies the IEEE802.1X control unit of the switching to the sleep state YES in step S the processing proceeds to step S and the IEEE802.1X control unit acquires the authentication information stored in the RAM . In step S the IEEE802.1X control unit notifies the NIC of the authentication information acquired in step S via the communication unit between CPUs .

In step S the IEEE802.1X control unit transmits a response to the sleep control unit . Thereafter the information processing apparatus is brought into the sleep mode so that the IEEE802.1X control unit stops operation.

Instep S the IEEE802.1X control unit waits to receive the authentication information from the information processing apparatus . If the IEEE802.1X control unit receives the authentication information YES in step S then in step S the IEEE802.1X control unit secures an area on the RAM to store the received authentication information therein. The processing proceeds to step S and the IEEE802.1X control unit sets the authentication information reception flag set to OFF in step S to ON.

If it is determined that the received packet is not sent to the MAC address of the NIC apparatus NO in step S the processing proceeds to step S the received packet is discarded and the processing is ended.

On the other hand if the received packet is sent to the MAC address of the NIC apparatus YES in step S the processing proceeds to step S and the IEEE802.1X processing unit determines whether the received packet is the IEEE802.1X re authentication request packet. If it is determined that the received packet is not the IEEE802.1X re authentication request packet NO in step S in step S the IEEE802.1X processing unit transfers the received packet to the proxy response processing unit and the processing is ended.

If the received packet is the IEEE802.1X re authentication request packet YES in step S the processing proceeds to step S and the IEEE802.1X processing unit determines whether the authentication information is received with reference to the authentication information reception flag on the RAM .

If the authentication information is not received NO in step S then in step S the IEEE802.1X processing unit transfers the received packet to the proxy response processing unit and the processing is ended.

If it is determined that the authentication information is received YES in step S then in step S the response packet is generated based on the authentication information stored in the RAM . In step S the generated response packet is transmitted and the processing is ended.

The above determination is made based on packet pattern information of which the information processing apparatus notified the NIC before the information processing apparatus is switched to the power saving mode. More specifically the information processing apparatus notifies the NIC of a reception packet pattern for identifying the packet to be responded by the NIC and a transmission packet to be transmitted as a response while the information processing apparatus is operating in the power saving mode and registers them. When the NIC receives the packet coinciding with the reception packet pattern the proxy response processing unit determines that the received packet is the packet to be responded instead YES in step S and the processing proceeds to step S.

If the proxy response processing unit determines that the received packet is not the packet to be responded instead NO in step S the processing proceeds to step S and the proxy response processing unit determines whether the received packet is the packet to be transferred to the information processing apparatus . As is the case with the determination in step S the determination is made based on packet pattern information of which the information processing apparatus notified the NIC before the information processing apparatus was switched to the power saving mode.

If the proxy response processing unit determines that the received packet is the packet to be transferred to the information processing apparatus YES in step S the processing proceeds to step S and the received packet is transferred to the information processing apparatus . On the other hand if the proxy response processing unit determines that the received packet is not the packet to be transferred to the information processing apparatus NO in step S the processing proceeds to step S and the received packet is discarded.

In step S the proxy response processing unit generates a response packet to be transmitted as a response to the received packet. The processing proceeds to step S the response packet is transmitted to the external apparatus and the processing is ended.

As described above the information processing apparatus can notify the network interface apparatus NIC of the information authentication information acquired by the information processing apparatus negotiating with the external apparatus the authentication server when the information processing apparatus is brought into the power saving mode.

Therefore the NIC can perform communication via a network without the need for the NIC to negotiate again with the external apparatus when the information processing apparatus is brought into the power saving mode.

Aspects of the present invention can also be realized by a computer of a system or apparatus or devices such as a CPU or MPU that reads out and executes a program recorded on a memory device to perform the functions of the above described embodiment s and by a method the steps of which are performed by a computer of a system or apparatus by for example reading out and executing a program recorded on a memory device to perform the functions of the above described embodiment s . For this purpose the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device e.g. computer readable medium .

While the present invention has been described with reference to exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications equivalent structures and functions.

This application claims priority from Japanese Patent Application No. 2009 060685 filed Mar. 13 2009 which is hereby incorporated by reference herein in its entirety.

