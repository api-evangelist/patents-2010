---

title: Camera device and image processing method
abstract: The invention provides a camera device. In one embodiment, the camera device comprises a sensor and a controller. The sensor detects an image to generate a first image signal with an RGB format. The controller comprises an image processor and a subsequent processor. The image processor converts the first image signal to a second image signal with a YUY2 format. The subsequent processor adjusts a plurality of luma components, a plurality of first chroma components, and a plurality of second chroma components of the second image signal to obtain a plurality of adjusted luma components, a plurality of first adjusted chroma components, and a plurality of second adjusted chroma components of a third image signal. A host receives the third image signal output by the camera, and uses a Direct Show module to convert the third image signal to a fourth image signal with an RGB format.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08199214&OS=08199214&RS=08199214
owner: Silicon Motion, Inc.
number: 08199214
owner_city: Jhubei, Hsinchu County
owner_country: TW
publication_date: 20100520
---
This Application claims priority of Taiwan Patent Application No. 98141474 filed on Dec. 4 2009 the entirety of which is incorporated by reference herein.

A Direct Show program is an application programming interface produced by Microsoft for software developers to perform various operations with media files or streams. A Windows system developer can use the Direct Show program to play or record media files. Ordinarily a Direct Show program is often used to receive video data generated by a camera and show the video data on a screen coupled to a host. In addition the Direct Show program is also a component program of a Windows Media Player for playing multi media files.

A host executing a Direct Show program receives video data of a variety of formats from a camera. Ordinarily a camera device can output video data of a YUV format or a motion joint photographic experts group MJPG format. According to the YUV format a pixel of an image is divided into a luma component and two chroma components. The YUV format is further divided into Y UV YUV YCbCr YPbPr and YUY2 formats the difference between which is the numbers of luma components and chroma components for representing a pixel. According to the MJPG format pixels of an image are compressed and encoded to reduce the data amount of the image. The host must therefore decode image data of the MJPG format before the host shows the image data of the MJPG format.

When the host shows the image data with the MJPG format on a screen the luminance and chrominance of the image data shown on the screen differ from those of an image of a YUY2 format. A screen generally can only receive image data with a RGB format. A host therefore must convert image data to the RGB format before the image data is shown on the screen. The Direct Show program provided by Microsoft however converts image data of a YUY2 format and an MJPG format to image data of a RGB format with different transform coefficients leading to difference of luminance and chrominance of the image data converted from the YUY2 format and the MJPG format. To make image data converted from the YUY2 format and the MJPG format have the same luminance and chrominance a camera device capable of adjusting the luminance and chrominance of output image data is therefore required.

The invention provides a camera device. In one embodiment the camera device is coupled to a host and comprises a sensor and a controller. The sensor detects an image to generate a first image signal with an RGB format. The controller comprises an image processor and a subsequent processor. The image processor converts the first image signal to a second image signal with a YUY2 format. The subsequent processor adjusts a plurality of luma components a plurality of first chroma components and a plurality of second chroma components of the second image signal to obtain a plurality of adjusted luma components a plurality of first adjusted chroma components and a plurality of second adjusted chroma components of a third image signal. The host receives the third image signal output by the camera uses a Direct Show module to convert the third image signal to a fourth image signal with an RGB format and outputs the fourth image signal to a screen.

The invention provides an image processing method. In one embodiment a camera device is coupled to a host. First an image is detected by a sensor to generate a first image signal with an RGB format. The first image signal is then converted by an image processor to a second image signal with a YUY2 format. A plurality of luma components a plurality of first chroma components and a plurality of second chroma components of the second image signal are then adjusted by a subsequent processor to obtain a plurality of adjusted luma components a plurality of first adjusted chroma components and a plurality of second adjusted chroma components of a third image signal. The third image signal is then transmitted to the host. The host receives the third image signal output by the camera uses a Direct Show module to convert the third image signal to a fourth image signal with an RGB format and outputs the fourth image signal to a screen.

A detailed description is given in the following embodiments with reference to the accompanying drawings.

The following description is of the best contemplated mode of carrying out the invention. This description is made for the purpose of illustrating the general principles of the invention and should not be taken in a limiting sense. The scope of the invention is best determined by reference to the appended claims.

Referring to a block diagram of a camera device generating an image signal of an MJPG format and a host receiving the image signal is shown. The camera device generates an image signal Sof an MJPG format. In one embodiment the camera device comprises a sensor and a controller . The sensor detects an image to generate an image signal Sof a RGB format. The controller comprises an image processor and an MJPG encoder . The image processor receives the image signal Sgenerated by the sensor and converts the image signal Sto an image signal Sof a YUV format. The MJPG encoder then receives the image signal Sgenerated by the image processor and then compresses the image signal Sto obtain an image signal Sof an MJPG format.

The camera device then transmits the image signal Sto a host . In one embodiment an universal serial bus USB is coupled between the host and the camera device for data transmission. The universal serial bus is driven by a USB video class driver of the host and the image signal Sis sent to the host via the universal serial bus. The host has a Windows operation system which comprises a Direct Show module for playing the image signal S. In one embodiment the Direct Show module comprises an MJPG decoder and a color converter . The MJPG decoder decodes the image signal Sof an MJPG format to generate an image signal Sof a YUV format. The color converter then converts the image signal Sto an image signal Sof a RGB format. Finally the host sends the image signal Sto a screen and the screen displays the image signal S.

Referring to a block diagram of a camera device generating an image signal of a YUY2 format and a host receiving the image signal is shown. The camera device generates an image signal Sof a YUY2 format. In one embodiment the camera device comprises a sensor and a controller . The sensor detects an image to generate an image signal Sof a RGB format. The controller comprises an image processor . The image processor receives the image signal Sgenerated by the sensor and converts the image signal Sto an image signal Sof a YUY2 format. The camera device then sends the image signal Sto the host .

Referring to a schematic diagram of a frame of an image signal of a YUY2 format is shown. A pixel of the frame of the YUY2 format is represented by a luma component Y a first chroma component U and a second chroma component V. The luma component Y indicates luminance of the pixel and the chrominance of the pixel is indicated by both the first chroma component U and the second chroma component V. If all pixels of the frame are represented by the luma component Y the first chroma component U and the second chroma component V the total data amount of the frame is massive. To reduce the total data amount of the frame each pixel of the frame of a YUY2 format comprises a luma component Y and a chroma component selected from U and V. For example a first pixel of the frame comprises a luma component Y and a first chroma component U and a second pixel of the frame comprises a luma component Y and a second chroma component V. When a frame of a YUY2 format is displayed the first chroma component U and the second chroma component V must be calculated according to an interpolation method.

In one embodiment an universal serial bus USB is coupled between the host and the camera device for data transmission. The universal serial bus is driven by a USB video class driver of the host and the image signal Sis sent to the host via the universal serial bus. The host has a Windows operation system which comprises a Direct Show module for playing the image signal S. In one embodiment the Direct Show module comprises a color converter which converts the image signal Sto an image signal Sof a RGB format. Finally the host sends the image signal Sto a screen and the screen displays the image signal S.

When the host shown in and the host shown in respectively display the image signal Sof an MJPG format and the image signal Sof a YUY2 format on the screens and the images shown on the screens and have different luminance and chrominance. Because the color converter of the Direct Show module and the color converter of the Direct Show module use different conversion coefficients to convert the image signals Sand Sof different formats to the image signals Sof the RGB format the image signals Soutput by the color converters and have different luminance and chrominance. The color converter converts the image signal Sto the image signal Saccording to the following algorithm 

To lower the intensity of the image signal Sconverted from the image signal Sof a YUY2 format the invention provides a camera device which can adjust the luminance and chrominance of the image signal Sof a YUY2 format before the image signal Sis output. Referring to a block diagram of a camera device outputting an image signal of a YUY2 format and a host receiving the image signal according to the invention is shown. Referring to a flowchart of a method for processing image signals of the camera device and the host shown in according to the invention is shown. In one embodiment the camera device comprises a sensor and a controller and the controller comprises an image processor and a subsequent processor . The host is identical to the host shown in and comprises a USB video class driver and a Direct Show module .

First the sensor detects an image to generate a first image signal Sof a RGB format step . The image processor of the controller then converts the first image signal Sto a second image signal Swith a YUY2 format step . The subsequent processor then adjusts luma components and chroma components of the second image signal Sgenerated by the image processor to obtain a third image signal S. First the subsequent processor adjusts a plurality of luma components of the second image signal Saccording to a first function to obtain a plurality of adjusted luma components of the third image signal S step . The subsequent processor then adjusts a plurality of first chroma components of the second image signal Saccording to a second function to obtain a plurality of first adjusted chroma components of the third image signal S step . The subsequent processor then adjusts a plurality of second chroma components of the second image signal Saccording to a third function to obtain a plurality of second adjusted chroma components of the third image signal S step . In one embodiment the first function is a linear function with variables of the luma components the second function is a linear function with variables of the first chroma components and the third function is a linear function with variables of the second chroma components. In one embodiment the subsequent processor adjusts the luma components and the chroma components of the second image signal Saccording to the following algorithm 

The camera device then transmits the third image signal S to the host step . In one embodiment a USB video class driver of the host drives a universal serial bus USB and the third image signal S is transmitted via the universal serial bus. The Direct Show module of the host then converts the third image signal S with a YUY2 format to a fourth image signal Swith a RGB format step . Because the subsequent processor has lowered the luminance and chrominance of the second image signal S according to the algorithm 3 the color converter can now convert the third image signal S according to the algorithm 2 to obtain a fourth image signal Scomprising a red primary color a green primary color and a blue primary color with a lower intensity. The host then transmits the fourth image signal Sto a screen step and the screen displays the fourth image signal S step . Because the subsequent processor has adjusted the luminance and chrominance of the third image signal S output by the camera device an image displayed on the screen has the same luminance and chrominance with an image derived from an image signal Swith the MJPG format shown in .

While the invention has been described by way of example and in terms of preferred embodiment it is to be understood that the invention is not limited thereto. To the contrary it is intended to cover various modifications and similar arrangements as would be apparent to those skilled in the art . Therefore the scope of the appended claims should be accorded the broadest interpretation so as to encompass all such modifications and similar arrangements.

