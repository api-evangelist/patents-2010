---

title: Automatically reclaiming memory space
abstract: A method, in one embodiment, can include determining whether an administrative task for a file system is to be performed within a thin storage memory array. Furthermore, if the administrative task for the file system is to be performed, a determination is made as to whether memory space is freed up while performing the administrative task. If memory space is freed up while performing the administrative task, a determination is made as to whether the freed up memory space satisfies a predefined contiguous memory space threshold. If the predefined contiguous memory space threshold is satisfied by the freed up memory space, a determination is made as to whether a memory space reclamation process is to be performed. If the memory space reclamation process is to be performed, the freed up memory space is reclaimed from the file system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08438362&OS=08438362&RS=08438362
owner: Symantec Corporation
number: 08438362
owner_city: Mountain View
owner_country: US
publication_date: 20100615
---
Within the conventional technology thin provisioning storage is utilized to increase the usage of storage devices. However there are disadvantages associated with this technique. For example within conventional thin storage that is implemented as a large system a free memory space reclaim operation can take a long amount of time just to determine the free memory spaces that can potentially be reclaimed from one or more file systems.

A method in one embodiment can include determining whether an administrative task for a file system is to be performed within a thin storage memory array. Furthermore if the administrative task for the file system is to be performed a determination is made as to whether memory space is freed up while performing the administrative task. If memory space is freed up while performing the administrative task a determination is made as to whether the freed up memory space satisfies a predefined contiguous memory space threshold. If the predefined contiguous memory space threshold is satisfied by the freed up memory space a determination is made as to whether a memory space reclamation process is to be performed. If the memory space reclamation process is to be performed the freed up memory space is reclaimed from the file system.

Additionally in one embodiment the method further comprising if the predefined contiguous memory space threshold is not satisfied by the freed up memory space determining whether the freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold. In an embodiment the method further comprising if the freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold relocating data stored in memory space located adjacent to the freed up memory space to satisfy the predefined contiguous memory space threshold. It is pointed out that in one embodiment the method further comprising if memory space is freed up while performing the administrative task determining whether there is a free memory space adjoining the freed up memory space. In an embodiment the method further comprising if there is a free memory space adjoining the freed up memory space including the adjoining free memory space with the freed up memory space. Additionally in one embodiment the administrative task can be selected from a group that includes resizing the file system defragmenting the file system removing a file from the file system removing a file set from the file system removing a clone from the file system removing a snapshot from the file system moving a file out of the file system within a Hierarchical Storage Management HSM environment and moving a file of the file system from a thin tier to a non thin tier within a Dynamic Storage Tiering DST environment. In addition in an embodiment the administrative task is selected from a group consisting of compressing a file of the file system and compacting a directory of the file system. Furthermore in one embodiment the file system can be a log structured file system and the administrative task can include running a garbage collector within the log structured file system.

In another embodiment a computer readable storage medium has stored thereon computer executable instructions that when executed by a computing device cause the computing device to perform a method. The method can include determining whether an administrative task for a file system is to be performed within a thin storage memory array. Moreover if the administrative task for the file system is to be performed a determination is made as to whether memory space is freed up while performing the administrative task. If memory space is freed up while performing the administrative task a determination is made as to whether the freed up memory space satisfies a predefined contiguous memory space threshold. If the predefined contiguous memory space threshold is satisfied by the freed up memory space a determination is made as to whether a memory space reclamation process is to be performed. If the memory space reclamation process is to be performed the freed up memory space is reclaimed from the file system.

It is noted that in one embodiment the method further comprising if the predefined contiguous memory space threshold is not satisfied by the freed up memory space determining whether the freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold. In an embodiment the method further comprising if the freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold relocating data stored in memory space located adjacent to the freed up memory space to satisfy the predefined contiguous memory space threshold. Note that in one embodiment the method further comprising if memory space is freed up while performing the administrative task determining whether there is a free memory space adjoining the freed up memory space. In an embodiment the method further comprising if there is a free memory space adjoining the freed up memory space including the adjoining free memory space with the freed up memory space. Additionally in one embodiment the administrative task can be selected from a group that includes resizing the file system defragmenting the file system removing a file from the file system removing a file set from the file system removing a clone from the file system removing a snapshot from the file system moving a file out of the file system within a HSM environment and moving a file of the file system from a thin tier to a non thin tier within a DST environment. Moreover in an embodiment the administrative task is selected from a group consisting of compressing a file of the file system and compacting a directory of the file system. Additionally in one embodiment the file system can be a log structured file system and the administrative task can include running a garbage collector within the log structured file system.

In yet another embodiment a computer system includes a processor and computer readable storage media coupled to the processor and having stored therein instructions that if executed by the computer system cause the computer system to execute a method. The method can include determining whether an administrative task for a file system is to be performed within a thin storage memory array. Additionally if the administrative task for the file system is to be performed a determination is made as to whether memory space is freed up while performing the administrative task. If memory space is freed up while performing the administrative task a determination is made as to whether the freed up memory space satisfies a predefined contiguous memory space threshold. If the predefined contiguous memory space threshold is satisfied by the freed up memory space a determination is made as to whether a memory space reclamation process is to be performed. If the memory space reclamation process is to be performed the freed up memory space is reclaimed from the file system.

It is pointed out that in an embodiment the method further comprising if the predefined contiguous memory space threshold is not satisfied by the freed up memory space determining whether the freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold. In an embodiment the method further comprising if the freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold relocating data stored in memory space located adjacent to the freed up memory space to satisfy the predefined contiguous memory space threshold. It is noted that in an embodiment the method further comprising if memory space is freed up while performing the administrative task determining whether there is a free memory space adjoining the freed up memory space. In an embodiment the method further comprising if there is a free memory space adjoining the freed up memory space including the adjoining free memory space with the freed up memory space. Additionally in one embodiment the administrative task can be selected from a group that includes resizing the file system defragmenting the file system removing a file from the file system removing a file set from the file system removing a clone from the file system removing a snapshot from the file system moving a file out of the file system within a HSM environment and moving a file of the file system from a thin tier to a non thin tier within a DST environment. Additionally in one embodiment the administrative task is selected from a group consisting of compressing a file of the file system and compacting a directory of the file system. Furthermore in one embodiment the file system can be a log structured file system and the administrative task can include running a garbage collector within the log structured file system.

While particular embodiments in accordance with the invention have been specifically described within this Summary it is noted that the invention and the claimed subject matter are not limited in any way by these embodiments.

Reference will now be made in detail to various embodiments in accordance with the invention examples of which are illustrated in the accompanying drawings. While the invention will be described in conjunction with various embodiments it will be understood that these various embodiments are not intended to limit the invention. On the contrary the invention is intended to cover alternatives modifications and equivalents which may be included within the scope of the invention as construed according to the appended Claims. Furthermore in the following detailed description of various embodiments in accordance with the invention numerous specific details are set forth in order to provide a thorough understanding of the invention. However it will be evident to one of ordinary skill in the art that the invention may be practiced without these specific details. In other instances well known methods procedures components and circuits have not been described in detail as not to unnecessarily obscure aspects of the invention.

Some portions of the detailed descriptions that follow are presented in terms of procedures logic blocks processing and other symbolic representations of operations on data bits within a computer memory. These descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. In the present application a procedure logic block process or the like is conceived to be a self consistent sequence of operations or steps or instructions leading to a desired result. The operations or steps are those utilizing physical manipulations of physical quantities. Usually although not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated in a computer system or computing device. It has proven convenient at times principally for reasons of common usage to refer to these signals as transactions bits values elements symbols characters samples pixels or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussions it is appreciated that throughout the present disclosure discussions utilizing terms such as determining performing removing reclaiming accessing moving selecting sending monitoring updating instructing or the like refer to actions and processes of a computer system or similar electronic computing device or processor. The computer system or similar electronic computing device manipulates and transforms data represented as physical electronic quantities within the computer system memories registers or other such information storage transmission or display devices.

It is appreciated present systems and methods can be implemented in a variety of architectures and configurations. For example present systems and methods can be implemented as part of a distributed computing environment a cloud computing environment a client server environment etc. Embodiments described herein may be discussed in the general context of computer executable instructions residing on some form of computer readable storage medium such as program modules executed by one or more computers computing devices or other devices. By way of example and not limitation computer readable storage media may comprise computer storage media and communication media. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. The functionality of the program modules may be combined or distributed as desired in various embodiments.

Computer storage media can include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media can include but is not limited to random access memory RAM read only memory ROM electrically erasable programmable ROM EEPROM flash memory or other memory technology compact disk ROM CD ROM digital versatile disks DVDs or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium that can be used to store the desired information and that can be accessed to retrieve that information.

Communication media can embody computer executable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media can include wired media such as a wired network or direct wired connection and wireless media such as acoustic radio frequency RF infrared and other wireless media. Combinations of any of the above can also be included within the scope of computer readable storage media.

In one embodiment within a thin storage memory array that allows free memory space reclamation there are some file system tasks or operations like defragmentation resize deleting large files and the like which potentially can free up or coalesce large amounts of free memory space. During these file system operations the file system has the knowledge of which memory areas are freed up. This file system information can be utilized by an embodiment in accordance with the present disclosure to intelligently issue a reclaim command on just the freed up memory areas. One of the benefits of this approach is the ability to reclaim a sizable portion of memory from the thin storage memory array within a relatively brief amount of time. In an embodiment in accordance with the present disclosure a user of the file system can specify whether he or she wants it to perform a reclamation operation or process after an administrative task.

Specifically method can include determining whether an administrative task is to be performed for a file system within a thin storage memory array. If not the determination can be repeated. However if it is determined that an administrative task is to be performed for a file system within the thin storage memory array a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If it is determine that no memory space was freed up while performing the administrative task method can repeat the determination of whether an administrative task is to be performed for a file system within the thin storage memory array. However if it is determined that memory space was freed up while performing the administrative task a determination can be made as to whether there are any free or available memory space adjoining any of the freed up memory space. If not a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. However if it is determined that there are free memory space adjoining any of the freed up memory space any adjoining free memory space can be incorporated or included with any of the freed up memory space. After which the determination can be made as to whether any freed up memory space satisfies the predefined contiguous memory space threshold. If not method can repeat the determination of whether an administrative task is to be performed for a file system within the thin storage memory array.

However if it is determined that any freed up memory space satisfies the predefined contiguous memory space threshold a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task. If not method can repeat the determination of whether an administrative task is to be performed for a file system within the thin storage memory array. However if it is determined that a memory space reclamation process is to be performed after the administrative task the freed up memory space that satisfied the predefined contiguous memory space threshold can be intelligently reclaimed from the file system within the thin storage memory array. In this manner freed up memory space can be automatically reclaimed after a file system administrative task in accordance with various embodiments of the present disclosure.

At operation of a determination can be made as to whether an administrative task or operation is to be performed for a file system within a thin storage memory array also known as a thin provisioning storage memory array . If not method proceeds to repeat operation . However if it is determined at operation that an administrative task or operation for a file system is to be performed within the thin storage memory array method can proceed to operation .

It is pointed out that operation can be implemented in a wide variety of ways. For example in one embodiment the administrative task or operation for the file system can include but is not limited to resizing the file system defragmenting the file system removing one or more files from the file system removing one or more file sets from the file system removing one or more clones from the file system removing one or more file snapshots from the file system removing one or more file system snapshots from the file system moving one or more files of the file system from a thin tier to a non thin tier within a Dynamic Storage Tiering DST environment moving one or more files out of the file system within a Hierarchical Storage Management HSM environment archiving one or more files of the file system within an archival environment compressing one or more files of the file system deduplication of one or more files of the file system compacting one or more directories of the file system and running a garbage collector within a log structured file system like ZFS by Sun Microsystems or Write Anywhere File Layout WAFL . Furthermore in one embodiment the file system can be a log structured file system as previously mentioned but not limited to such. Additionally note that the deletion of large files can free up a large amount of contiguous free memory space within the file system. In addition deletion of a large number of small files within the file system can also free up a large amount of contiguous free memory space which can be reclaimed by method . Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If not method can proceed to repeat operation . However if it is determined at operation that memory space was freed up while performing the administrative task method can proceed to operation . Note that the operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether there are any free or available memory space adjoining or adjacent to any of the freed up memory space. If not method can proceed to operation . However if it is determined at operation that there are free memory space adjoining any of the freed up memory space method can proceed to operation . It is noted that operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of any adjoining or adjacent free memory space can be incorporated or included with any of the freed up memory space. Note that operation can be implemented in a wide variety of ways. For example in one embodiment at operation any adjoining free or available memory space can be considered part of any of the freed up memory space. In an embodiment at operation any adjoining free memory space can be combined or summed with and considered part of any of the freed up memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. If not method can proceed to operation . However if it is determined at operation that any freed up memory space satisfies the predefined contiguous memory space threshold method can proceed to operation . It is pointed out that any of the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . It is noted that operation can be implemented in a wide variety of ways. For example in one embodiment the predefined contiguous memory space threshold can be established at any value of memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task or operation. If not method can proceed to operation . However if it is determined at operation that a memory space reclamation process is to be performed after the administrative task method can proceed to operation . It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment a computer system can produce and present an interface at operation to a user thereby enabling him or her to decide whether a memory space reclamation process is to be performed after the administrative task or operation.

For instance is a block diagram depicting an example graphical user interface GUI in accordance with various embodiments of the present disclosure that can be produced at operation . The graphical user interface can include and display but is not limited to the file system name associated with method the administrative task or operation associated with method along with the question that asks a user whether a memory space reclamation process is to be performed after the administrative task. In addition the graphical user interface can include and display but is not limited to a Yes button a No button and a Help button for receiving input from the user. It is pointed out that in one embodiment if the user selects the Help button more information associated with the question can be produced and displayed to the user. It is noted that operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of the freed up memory space that satisfies the predefined contiguous memory space threshold can be intelligently reclaimed from the file system within the thin storage memory array. It is pointed out that the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . Note that operation can be implemented in a wide variety of ways. For example in one embodiment at operation a reclaim command can be intelligently issued on just the freed up memory space or areas. In an embodiment at operation a disk area or storage Application Programming Interface API can be invoked to specifically reclaim the freed up memory space that satisfies the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such. After the completion of operation method can proceed to operation . In this manner freed up memory space can be automatically reclaimed after a file system administrative task in accordance with various embodiments of the present disclosure.

In one embodiment within a thin storage array that allows free memory space reclamation there are some volume manager operations like defragmentation resize deleting large files and the like which potentially can free up or coalesce large amounts of free memory space. During these volume manager operations the volume manager has the knowledge of which memory areas are freed up. This volume manager information can be utilized by an embodiment in accordance with the present disclosure to intelligently issue a reclaim command on just the freed up memory areas. One of the benefits of this approach is the ability to reclaim a sizable portion of memory from the thin storage array within a relatively brief amount of time. In an embodiment in accordance with the present disclosure a user of the volume manager can specify whether he or she wants it to perform a reclamation operation or process after an administrative task.

Specifically method can include determining whether an administrative task is to be performed for a volume within a thin storage memory array. If not the determination can be repeated. However if it is determined that an administrative task is to be performed for a volume within the thin storage memory array a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If it is determine that no memory space was freed up while performing the administrative task method can repeat the determination of whether an administrative task is to be performed for a volume within the thin storage memory array. However if it is determined that memory space was freed up while performing the administrative task a determination can be made as to whether there are any free or available memory space adjoining any of the freed up memory space. If not a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. However if it is determined that there are free memory space adjoining any of the freed up memory space any adjoining free memory space can be incorporated or included with any of the freed up memory space. After which the determination can be made as to whether any freed up memory space satisfies the predefined contiguous memory space threshold. If not method can repeat the determination of whether an administrative task is to be performed for a volume within the thin storage memory array.

However if it is determined that any freed up memory space satisfies the predefined contiguous memory space threshold a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task. If not method can repeat the determination of whether an administrative task is to be performed for a volume within the thin storage memory array. However if it is determined that a memory space reclamation process is to be performed after the administrative task the freed up memory space that satisfied the predefined contiguous memory space threshold can be intelligently reclaimed from the volume within the thin storage memory array. In this manner freed up memory space can be automatically reclaimed after a volume administrative task in accordance with various embodiments of the present disclosure.

At operation of a determination can be made as to whether an administrative task or operation is to be performed for a volume within a thin storage memory array also known as a thin provisioning storage memory array . If not method proceeds to repeat operation . However if it is determined at operation that an administrative task or operation for a volume is to be performed within the thin storage memory array method can proceed to operation .

It is pointed out that operation can be implemented in a wide variety of ways. For example in one embodiment the administrative task or operation for the volume can include but is not limited to resizing the volume deleting the volume removing one or more volume snapshots. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If not method can proceed to repeat operation . However if it is determined at operation that memory space was freed up while performing the administrative task method can proceed to operation . Note that the operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether there are any free or available memory space adjoining or adjacent to any of the freed up memory space. If not method can proceed to operation . However if it is determined at operation that there are free memory space adjoining any of the freed up memory space method can proceed to operation . Note that operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of any adjoining or adjacent free memory space can be incorporated or included with any of the freed up memory space. It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment at operation any adjoining free or available memory space can be considered part of any of the freed up memory space. In one embodiment at operation any adjoining free memory space can be combined or summed with and considered part of any of the freed up memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. If not method can proceed to operation . However if it is determined at operation that any freed up memory space satisfies the predefined contiguous memory space threshold method can proceed to operation . It is pointed out that any of the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment the predefined contiguous memory space threshold can be established at any value of memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task or operation. If not method can proceed to operation . However if it is determined at operation that a memory space reclamation process is to be performed after the administrative task method can proceed to operation . It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment a computer system can produce and present an interface at operation to a user thereby enabling him or her to decide whether a memory space reclamation process is to be performed after the administrative task or operation.

For instance is a block diagram depicting an example graphical user interface GUI in accordance with various embodiments of the present disclosure that can be produced at operation . The graphical user interface can include and display but is not limited to the volume identification ID associated with method the administrative task or operation associated with method along with the question that asks a user whether a memory space reclamation process is to be performed after the administrative task. In addition the graphical user interface can include and display but is not limited to a Yes button a No button and a Help button for receiving input from the user. It is pointed out that in one embodiment if the user selects the Help button more information associated with the question can be produced and displayed to the user. It is noted that operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of the freed up memory space that satisfies the predefined contiguous memory space threshold can be intelligently reclaimed from the volume within the thin storage memory array. It is pointed out that the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . Note that operation can be implemented in a wide variety of ways. For example in an embodiment at operation a reclaim command can be intelligently issued on just the freed up memory space or areas. In one embodiment at operation a disk area or storage Application Programming Interface API can be invoked to specifically reclaim the freed up memory space that satisfies the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such. After the completion of operation method can proceed to operation . In this manner freed up memory space can be automatically reclaimed after a volume administrative task in accordance with various embodiments of the present disclosure.

In one embodiment within a thin storage memory array that allows free memory space reclamation there are some file system tasks or operations like defragmentation resize deleting large files and the like which potentially can free up or coalesce large amounts of free memory space. During these file system operations the file system has the knowledge of which memory areas are freed up. This file system information can be utilized by an embodiment in accordance with the present disclosure to intelligently issue a reclaim command on just the freed up memory areas. One of the benefits of this approach is the ability to reclaim a sizable portion of memory from the thin storage memory array within a relatively brief amount of time. In an embodiment in accordance with the present disclosure a user of the file system can specify whether he or she wants it to perform a reclamation operation or process after an administrative task.

Specifically method can include determining whether an administrative task is to be performed for a file system within a thin storage memory array. If not the determination can be repeated. However if it is determined that an administrative task is to be performed for a file system within the thin storage memory array a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If it is determine that no memory space was freed up while performing the administrative task method can repeat the determination of whether an administrative task is to be performed for a file system within the thin storage memory array. However if it is determined that memory space was freed up while performing the administrative task a determination can be made as to whether there are any free or available memory space adjoining any of the freed up memory space. If not a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. However if it is determined that there are free memory space adjoining any of the freed up memory space any adjoining free memory space can be incorporated or included with any of the freed up memory space. After which the determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. If so a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task.

However if it is determined that no freed up memory space satisfies the predefined contiguous memory space threshold a determination can be made as to whether any freed up memory space is above a predefined percentage of the predefined contiguous memory space threshold. If not method can repeat the determination of whether an administrative task is to be performed for a file system within the thin storage memory array. However if it is determined that any freed up memory space is above the predefined percentage of the predefined contiguous memory space threshold the data present in occupied memory space near the freed up memory space can be relocated in order to satisfy the predefined contiguous memory space threshold. After which the determination can be made as to whether the memory space reclamation process is to be performed after the administrative task. If not method can repeat the determination of whether an administrative task is to be performed for a file system within the thin storage memory array. However if it is determined that a memory space reclamation process is to be performed after the administrative task the freed up memory space that satisfied the predefined contiguous memory space threshold can be intelligently reclaimed from the file system within the thin storage memory array. In this manner freed up memory space can be automatically reclaimed after a file system administrative task in accordance with various embodiments of the present disclosure.

At operation of a determination can be made as to whether an administrative task or operation is to be performed for a file system within a thin storage memory array also known as a thin provisioning storage memory array . If not method proceeds to repeat operation . However if it is determined at operation that an administrative task or operation is to be performed for a file system within the thin storage memory array method can proceed to operation . It is pointed out that operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If not method can proceed to repeat operation . However if it is determined at operation that memory space was freed up while performing the administrative task method can proceed to operation . Note that the operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made as to whether there are any memory space that are free or available that are adjoining or adjacent to any of the freed up memory space. If not method can proceed to operation . However if it is determined at operation that there are memory space that are free that are adjoining any of the freed up memory space method can proceed to operation . It is pointed out that operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation any adjoining or adjacent free memory space can be incorporated or included with any of the freed up memory space. It is pointed out that operation can be implemented in a wide variety of ways. For example in an embodiment at operation any adjoining free or available memory space can be considered part of any of the freed up memory space. In one embodiment at operation any adjoining free memory space can be combined or summed with and considered part of any of the freed up memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. If not method can proceed to operation . However if it is determined at operation that any freed up memory space satisfies the predefined contiguous memory space threshold method can proceed to operation . It is pointed out that any of the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . It is noted that operation can be implemented in a wide variety of ways. For example in one embodiment the predefined contiguous memory space threshold can be established at any value of memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether any freed up memory space is above a predefined percentage of the predefined contiguous memory space threshold. If not method can proceed to operation . However if it is determined at operation that any freed up memory space is above the predefined percentage of the predefined contiguous memory space threshold method can proceed to operation . It is noted that any of the freed up memory space that is above the predefined percentage of the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . Note that operation can be implemented in a wide variety of ways. For example in an embodiment the predefined percentage of the predefined contiguous memory space threshold can be established at any percentage value. In one embodiment at operation a determination can be made as to whether any freed up memory space is equal to or above a predefined percentage of the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of data present in occupied memory space near or adjoining or adjacent to the freed up memory space can be relocated in order to create enough contiguous freed up memory space that satisfies the predefined contiguous memory space threshold. It is pointed out that operation can be implemented in a wide variety of ways. For example in one embodiment at operation one or more data stored in one or more memory space located near or adjoining or adjacent to the freed up memory space can be relocated in order to satisfy the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task or operation. If not method can proceed to operation . However if it is determined at operation that a memory space reclamation process is to be performed after the administrative task method can proceed to operation . It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment a computer system can produce and present an interface at operation to a user thereby enabling him or her to decide whether a memory space reclamation process is to be performed after the administrative task or operation. Note that operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of the freed up memory space that satisfies the predefined contiguous memory space threshold can be intelligently reclaimed from the file system within the thin storage memory array. Note that the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include any memory space freed up during the performing of the administrative task any adjoining free memory space produced at operation any additional freed up memory space produced at operation or any combination thereof but is not limited to such. It is pointed out that operation can be implemented in a wide variety of ways. For example in an embodiment at operation a reclaim command can be intelligently issued on just the freed up memory space or areas. In one embodiment at operation a disk area or storage Application Programming Interface API can be invoked to specifically reclaim the freed up memory space that satisfies the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such. After the completion of operation method can proceed to operation . In this manner freed up memory space can be automatically reclaimed after a file system administrative task in accordance with various embodiments of the present disclosure.

In one embodiment within a thin storage array that allows free memory space reclamation there are some volume manager operations like defragmentation resize deleting large files and the like which potentially can free up or coalesce large amounts of free memory space. During these volume manager operations the volume manager has the knowledge of which memory areas are freed up. This volume manager information can be utilized by an embodiment in accordance with the present disclosure to intelligently issue a reclaim command on just the freed up memory areas. One of the benefits of this approach is the ability to reclaim a sizable portion of memory from the thin storage array within a relatively brief amount of time. In an embodiment in accordance with the present disclosure a user of the volume manager can specify whether he or she wants it to perform a reclamation operation or process after of an administrative task.

Specifically method can include determining whether an administrative task is to be performed for a volume within a thin storage memory array. If not the determination can be repeated. However if it is determined that an administrative task is to be performed for a volume within the thin storage memory array a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If it is determine that no memory space was freed up while performing the administrative task method can repeat the determination of whether an administrative task is to be performed for a volume within the thin storage memory array. However if it is determined that memory space was freed up while performing the administrative task a determination can be made as to whether there are any free or available memory space adjoining any of the freed up memory space. If not a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. However if it is determined that there are free memory space adjoining any of the freed up memory space any adjoining free memory space can be incorporated or included with any of the freed up memory space. After which the determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. If so a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task.

However if it is determined that no freed up memory space satisfies the predefined contiguous memory space threshold a determination can be made as to whether any freed up memory space is above a predefined percentage of the predefined contiguous memory space threshold. If not method can repeat the determination of whether an administrative task is to be performed for a volume within the thin storage memory array. However if it is determined that any freed up memory space is above the predefined percentage of the predefined contiguous memory space threshold the data present in occupied memory space near or adjacent to the freed up memory space can be relocated in order to satisfy the predefined contiguous memory space threshold. After which the determination can be made as to whether the memory space reclamation process is to be performed after the administrative task. If not method can repeat the determination of whether an administrative task is to be performed for a volume within the thin storage memory array. However if it is determined that a memory space reclamation process is to be performed after the administrative task the freed up memory space that satisfied the predefined contiguous memory space threshold can be intelligently reclaimed from the volume within the thin storage memory array. In this manner freed up memory space can be automatically reclaimed after a volume administrative task in accordance with various embodiments of the present disclosure.

At operation of a determination can be made as to whether an administrative task or operation is to be performed for a volume within a thin storage memory array also known as a thin provisioning storage memory array . If not method can proceed to repeat operation . However if it is determined at operation that an administrative task or operation is to be performed for a volume within the thin storage memory array method can proceed to operation . It is noted that operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made automatically as to whether memory space is freed up or coalesced while performing the administrative task. If not method can proceed to repeat operation . However if it is determined at operation that memory space was freed up while performing the administrative task method can proceed to operation . Note that the operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made as to whether there are any memory space that are free or available that are adjoining or adjacent to any of the freed up memory space. If not method can proceed to operation . However if it is determined at operation that there are memory space that are free that are adjoining any of the freed up memory space method can proceed to operation . Note that operation can be implemented in a wide variety of ways. For example operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation any adjoining or adjacent free memory space can be incorporated or included with any of the freed up memory space. It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment at operation any adjoining free or available memory space can be considered part of any of the freed up memory space. In an embodiment at operation any adjoining free memory space can be combined or summed with and considered part of any of the freed up memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of a determination can be made as to whether any freed up memory space satisfies a predefined contiguous memory space threshold. If not method can proceed to operation . However if it is determined at operation that any freed up memory space satisfies the predefined contiguous memory space threshold method can proceed to operation . Note that any of the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . It is noted that operation can be implemented in a wide variety of ways. For example in an embodiment the predefined contiguous memory space threshold can be established at any value of memory space. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether any freed up memory space is above a predefined percentage of the predefined contiguous memory space threshold. If not method can proceed to operation . However if it is determined at operation that any freed up memory space is above the predefined percentage of the predefined contiguous memory space threshold method can proceed to operation . It is noted that any of the freed up memory space that is above the predefined percentage of the predefined contiguous memory space threshold at operation may include adjoining free memory space that was included with any of the freed up memory space at operation . It is noted that operation can be implemented in a wide variety of ways. For example in one embodiment the predefined percentage of the predefined contiguous memory space threshold can be established at any percentage value. In an embodiment at operation a determination can be made as to whether any freed up memory space is equal to or above a predefined percentage of the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of data present in occupied memory space near or adjoining or adjacent to the freed up memory space can be relocated in order to create enough contiguous freed up memory space that satisfies the predefined contiguous memory space threshold. Note that operation can be implemented in a wide variety of ways. For example in an embodiment at operation one or more data stored in one or more memory space located near or adjoining or adjacent to the freed up memory space can be relocated in order to satisfy the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation a determination can be made as to whether a memory space reclamation process is to be performed after the administrative task or operation. If not method can proceed to operation . However if it is determined at operation that a memory space reclamation process is to be performed after the administrative task method can proceed to operation . It is pointed out that operation can be implemented in a wide variety of ways. For example in one embodiment a computer system can produce and present an interface at operation to a user thereby enabling him or her to decide whether a memory space reclamation process is to be performed after the administrative task or operation. It is noted that operation can be implemented in any manner similar to that described herein but is not limited to such.

At operation of the freed up memory space that satisfies the predefined contiguous memory space threshold can be intelligently reclaimed from the volume within the thin storage memory array. It is pointed out that the freed up memory space that satisfies the predefined contiguous memory space threshold at operation may include any memory space freed up during the performing of the administrative task any adjoining free memory space produced at operation any additional freed up memory space produced at operation or any combination thereof but is not limited to such. Note that operation can be implemented in a wide variety of ways. For example in one embodiment at operation a reclaim command can be intelligently issued on just the freed up memory space or areas. In an embodiment at operation a disk area or storage Application Programming Interface API can be invoked to specifically reclaim the freed up memory space that satisfies the predefined contiguous memory space threshold. Operation can be implemented in any manner similar to that described herein but is not limited to such. After the completion of operation method can proceed to operation . In this manner freed up memory space can be automatically reclaimed after a volume administrative task in accordance with various embodiments of the present disclosure.

With reference to computer system of modem network interface or some other method can be used to provide connectivity from each of client computer systems and to network . Client systems and are able to access information on storage server A or using for example a web browser or other client software not shown . Such a client allows client systems and to access data hosted by storage server A or or one of storage devices A N B N N or intelligent storage array . depicts the use of a network such as the Internet for exchanging data but the present disclosure is not limited to the Internet or any particular network based environment.

Within it is noted that one or more of the client systems and and storage servers A and B can include a reclamation module in accordance with various embodiments of the present disclosure. For example within the present embodiment the storage server A can include a reclamation module . In one embodiment the module can cause the storage server A to implement free space reclamation on one or more of the storage devices A N in any manner similar to that described herein but not limited to such. Furthermore in an embodiment the module can cause the storage server A to implement free space reclamation in one or more file systems or volumes on one or more thin storage arrays.

It is noted that the network architecture may not include all of the elements illustrated by . Additionally the network architecture can be implemented to include one or more elements not illustrated by . It is pointed out that the network architecture can be utilized or implemented in any manner similar to that described herein but is not limited to such.

In the example of the computer system includes a bus which interconnects major subsystems of the computer system . These subsystems can include but is not limited to one or more central processors a system memory an input output controller an external audio device such as a speaker system via an audio output interface an external device such as a display screen via display adapter serial ports and a keyboard interfaced with a keyboard controller a storage interface a floppy disk drive operative to receive a floppy disk a host bus adapter HBA interface card A operative to connect with a Fibre Channel network an HBA interface card B operative to connect to a Small Computer System Interface SCSI bus and an optical disk drive operative to receive an optical disk . Also included are a mouse or other point and click device coupled to bus via serial port a modem coupled to bus via serial port and a network interface coupled directly to bus . In one embodiment the modem network interface or some other method can be used to provide connectivity from each of the client computer systems and to the network of .

The bus of allows data communication between the central processor and system memory which may include non volatile memory e.g. read only memory ROM programmable ROM flash memory electrically erasable programmable read only memory EEPROM and the like or volatile memory e.g. random access memory RAM static RAM dynamic RAM and the like or some combination of non volatile memory and volatile memory. The volatile memory is generally the main memory into which the operating system and application programs are loaded. The non volatile memory can contain among other code the Basic Input Output System BIOS which controls basic hardware operation such as the interaction with peripheral components.

Applications resident within the computer system are generally stored on and accessed via a computer readable storage medium such as a hard disk drive e.g. the fixed disk an optical drive e.g. the optical drive a floppy disk unit or other storage medium. Applications can be in the form of electronic signals modulated in accordance with the application and data communication technology when accessed via network modem or interface .

Continuing with reference to storage interface as with the other storage interfaces of computer system can connect to a standard computer readable storage medium for storage and or retrieval of information such as a fixed disk drive . The fixed disk drive may be a part of the computer system or it may be separate and accessed through other interface systems. The modem may provide a direct connection to a remote server via a telephone link or to the Internet via an internet service provider ISP . The network interface may provide a direct connection to a remote server via a direct network link to the Internet via a POP point of presence . The network interface may provide such a connection using wireless techniques including digital cellular telephone connection Cellular Digital Packet Data CDPD connection digital satellite data connection or the like.

Many other devices or subsystems not shown in may be connected to the computer system in a similar manner e.g. document scanners digital cameras and the like . Conversely all of the devices shown in need not be present to practice the present disclosure. In addition it is noted that the devices and subsystems of the computer system can be interconnected in different ways from that shown in .

The operation of a computer system such as that shown in is readily known in the art and is not discussed in detail in this application. The operating system provided on the computer system may be MS DOS MS WINDOWS OS 2 UNIX Linux or another known operating system. Code to implement the present disclosure can be stored in computer readable storage media such as one or more of the system memory fixed disk optical disk or floppy disk . For example the system memory is shown storing a reclamation module in accordance with various embodiments of the present disclosure. However the reclamation module can also be stored in computer readable storage media such as one or more of the system memory fixed disk optical disk or floppy disk . It should further be noted that in an embodiment the computer system can have some most or all of its functionality supplanted by a distributed computer system having a large number of dispersed computing nodes as would be the case where the functionality of the computer system is partly or wholly executed using a cloud computing environment.

Moreover regarding the signals described herein those skilled in the art will recognize that a signal can be directly transmitted from a first block to a second block or a signal can be modified e.g. amplified attenuated delayed latched buffered inverted filtered or otherwise modified between the blocks. Although the signals of the above described embodiment are characterized as transmitted from one block to the next other embodiments of the present disclosure may include modified signals in place of such directly transmitted signals as long as the informational and or functional aspect of the signal is transmitted between blocks. To some extent a signal input at a second block can be conceptualized as a second signal derived from a first signal output from a first block due to physical limitations of the circuitry involved e.g. there will inevitably be some attenuation and delay . Therefore as used herein a second signal derived from a first signal includes the first signal or any modifications to the first signal whether due to circuit limitations or due to passage through other circuit elements which do not change the informational and or final functional aspect of the first signal.

Specifically the freed up memory module can include instructions for determining whether memory space is freed up while performing an administrative task e.g. operation or or or and the like . Additionally the freed up memory module can include instructions for determining whether there are any free or available memory space adjoining or adjacent to any of the freed up memory space e.g. operation or or or and the like . Also the freed up memory module can include instructions for incorporating or including any adjoining or adjacent free memory space with any of the freed up memory space e.g. operation or or or and the like . The threshold module can include instructions for determining whether any freed up memory space satisfies a predefined contiguous memory space threshold e.g. operation or or or and the like . Moreover the threshold module can include instructions for determining whether any freed up memory space is at or above a predefined percentage of the predefined contiguous memory space threshold e.g. operation or and the like . Furthermore the threshold module can include instructions for relocating data present in occupied memory space near or adjoining or adjacent to the freed up memory space to satisfy the predefined contiguous memory space threshold e.g. operation or and the like .

The reclaiming module of can include instructions for intelligently reclaiming freed up memory space that satisfies the predefined contiguous memory space threshold e.g. operation or or or and the like . The interface module can include instructions for producing an interface e.g. GUI to determine whether a memory space reclamation process is to be performed after the administrative task or operation e.g. operation or or or and the like . It is appreciated that the freed up memory module the threshold module the reclaiming module and the interface module can be implemented as part of a variety of environments. For example the freed up memory module the threshold module the reclaiming module and the interface module can be implemented as part of but not limited to a distributed computing environment a cloud computing environment a client server environment etc.

The foregoing description for purpose of explanation has been described with reference to specific embodiments. However the illustrative discussions above are not intended to be exhaustive or to limit the invention to the precise forms disclosed. Many modifications and variations are possible in view of the above teachings. The embodiments were chosen and described in order to best explain the principles of the invention and its practical applications to thereby enable others skilled in the art to best utilize the invention and various embodiments with various modifications as may be suited to the particular use contemplated.

