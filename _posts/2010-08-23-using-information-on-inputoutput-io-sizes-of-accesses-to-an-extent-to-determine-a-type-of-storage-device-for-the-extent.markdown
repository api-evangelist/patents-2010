---

title: Using information on input/output (I/O) sizes of accesses to an extent to determine a type of storage device for the extent
abstract: Provided are a method, system, and computer program product for using information on Input/Output (I/O) sizes of accesses to an extent to determine a type of storage device for the extent from a plurality of storage devices comprising at least one of a first storage type and a second storage type. Performance information is processed for a time period for Input/Output (I/O) operations with respect to an extent maintained in at least one of the storage devices of the first storage type, wherein the performance information indicates an I/O size of the I/O operations with respect to the extent. A determination is made as to whether characteristics of the I/O operations other than I/O size indicate that the extent is eligible for migration to at least one of the storage devices of the second storage type. A determination is made as to whether characteristics of the I/O sizes of the I/O operations. A determination is made as to whether the characteristics of the I/O sizes of the I/O operations indicate that the extent should be migrated from the at least one storage device of the first storage type to at least one of the storage devices of the second storage type. The extent is migrated from one of the storage devices of the first type to at least one of the storage devices of the second type in response in response to determining that the extent is eligible for migration and that the characteristics of the I/O sizes indicate that the extent should be migrated.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08230123&OS=08230123&RS=08230123
owner: International Business Machines Corporation
number: 08230123
owner_city: Armonk
owner_country: US
publication_date: 20100823
---
The present invention relates to a method system and computer program product for using information on Input Output I O sizes of accesses to an extent to determine a type of storage device for the extent.

To improve storage performance extents of tracks may be migrated between different types of storage devices such as hard disk drives solid state storage devices etc. depending on the characteristics of the Input Output I O requests directed to the extent. For instance more frequently accessed extents and or higher priority extents may be migrated to a faster access low latency storage device such as a Solid State Storage Device SSD from a slower access high latency storage device such as a hard disk drives HDD . Further less frequently accessed extents and or lower priority extents may be migrated from a higher performance low latency storage device to a lower performance high latency storage device.

There is a need in the art for improved techniques for determining when to migrate an extent between different types of storage devices depending on a variety of characteristics specific to the types of the storage devices.

Provided are a method system and computer program product for using information on Input Output I O sizes of accesses to an extent to determine a type of storage device for the extent from a plurality of storage devices comprising at least one of a first storage type and a second storage type. Performance information is processed for a time period for Input Output I O operations with respect to an extent maintained in at least one of the storage devices of the first storage type wherein the performance information indicates an I O size of the I O operations with respect to the extent. A determination is made as to whether characteristics of the I O operations other than I O size indicate that the extent is eligible for migration to at least one of the storage devices of the second storage type. A determination is made as to whether characteristics of the I O sizes of the I O operations. A determination is made as to whether the characteristics of the I O sizes of the I O operations indicate that the extent should be migrated from the at least one storage device of the first storage type to at least one of the storage devices of the second storage type. The extent is migrated from one of the storage devices of the first type to at least one of the storage devices of the second type in response in response to determining that the extent is eligible for migration and that the characteristics of the I O sizes indicate that the extent should be migrated.

The server includes a processor comprising one or more processor devices and a memory in which an operating system is loaded to be executed by the processor . The operating system includes a storage manager to manage the migration of an extent of tracks to different types of storage devices to optimize I O performance. Extent I O statistics comprise gathered performance information on I O requests for a measurement time period and the extent information includes extent metadata on the current storage device storing the extent. The extent information may provide a mapping of extent blocks to locations in one or more storage devices . A data set or logical volume is composed of extents which comprises a grouping of tracks or blocks of data.

The server may communicate with the first and second storage devices over a network via separate cables through a storage interface a bus interface in a loop architecture etc. The first and second storage devices may comprise different types of storage devices such as a solid state storage device SSD comprised of solid state electronics such as a EEPROM Electrically Erasable Programmable Read Only Memory flash memory flash disk Random Access Memory RAM drive storage class memory SCM etc. magnetic storage disk optical disk tape etc. The storage devices may be stored in one or more enclosures. The memory may comprise one or more volatile or non volatile memory devices. The storage manager code may alternatively be implemented as application code external to the operating system or may be implemented with hardware logic such as an Application Specific Integrated Circuit ASIC or as a programmable processor executing code in a computer readable storage medium.

In one embodiment the first and second storage devices may be grouped into storage device type groups in a hierarchical arrangement of storage devices where tiers define storage based on characteristics such as speed of their I O access profile redundancy etc. For instance the storage device type may comprise a high speed storage such as an SSD or RAM drive and the storage device type may comprise a slower access storage such as a hard disk drive or tape medium. The operating system may call the storage manager code to gather information on I O statistics and determine extents that are not frequently accessed and or having lower priority to migrate from first storage devices to second storage devices and migrate more frequently accessed and or higher priority extents of tracks from the second storage devices to the first storage devices .

In certain embodiments an extent may comprise tracks or data blocks that are stored contiguously which is advantageous in embodiments where the storage device may comprise a storage device that has improved read write access for tracks stored contiguously in the media such as a hard disk drive and a tape drive. However the data for the tracks in the extent may not be contiguously stored in a low latency storage device which may comprise a storage device that does not experience improved access for contiguously stored tracks such as the case with a solid state storage device SSD or Random Access Memory RAM drive. An extent is an atomic unit of storage. Volumes may be striped across multiple devices or stored redundantly. Individual extents can be on a single device or stored redundantly.

In the embodiment of any one of the determinations results in a determination of eligibility for migration from the high to low latency storage. However in alternative embodiments multiple of the tests at blocks and or additional tests may need to satisfy the threshold in order for the extent to be deemed eligible for migration from the high 10 to low 8 latency storage.

With respect to if at block the extent is not eligible for migration based on characteristics of I O operations other than I O size then control ends without migration. Otherwise if the extent is eligible from the Yes branch of block then the storage manager begins a series of operations at blocks in to classify the extent according to characteristics of the I O sizes of the measured I O operations such as the mean I O size and I O size standard deviation . The I O size classification as consistent or inconsistent and small or large I O sizes determines how and whether to migrate the extent . If at block the characteristics of the I O sizes indicate that the I O sizes are a consistent pattern of small I O sizes then the storage manager indicates to migrate at block the extent to a low latency storage device or as few low latency storage devices as possible because in certain embodiments the low latency storage device such as an SSD may provide higher performance for handling relatively smaller I Os. A consistent pattern of small I O sizes may be determined if the mean I O size is less than or less than or equal to an I O size threshold and the I O size standard deviation is less than or less than or equal to an I O size standard deviation threshold.

If at block the characteristics of the I O sizes indicate that the I O sizes are an inconsistent pattern of small I O sizes such as mostly small I O sizes with peaks of occasionally large I O sizes then the storage manager may indicate at block to migrate the extent to a plurality of low latency storage devices to allow the extent to be load balanced across multiple storage devices to provide improved performance for the occasional I O requests having higher I O sizes. The number of devices required for load balancing can be reduced by using time correlation of I O peaks to pack more extents into the same device. An inconsistent pattern of small I O sizes may be determined if the mean I O size is less than or less than or equal to the I O size threshold and if the I O size standard deviation is greater than or greater than or equal to the I O size standard deviation threshold.

If at block the characteristics of the I O sizes do not indicate that the I O sizes are an inconsistent pattern of small I O sizes then with respect to if at block the characteristics of the I O sizes indicate that the I O sizes are an inconsistent pattern of large I O sizes than the storage manage may migrate at block the extent to a plurality of low latency storage devices . The extent may be load balanced across multiple devices to handle the greater number of larger I O size requests. An inconsistent pattern of large I O sizes may be determined if the mean I O size is greater than or greater than or equal to the I O size threshold and if the I O size standard deviation is greater than or greater than or equal to the I O size standard deviation threshold. Alternatively if I O sizes are large then the storage manager may leave the extent on the higher latency device which in certain embodiments provides higher or more equivalent performance for I O requests having larger I O sizes.

If from the No branch of block the characteristics of the I O sizes indicate that the I O sizes are a consistent pattern of large I O sizes then the storage manager determines to maintain at block the extent on the current one or more high latency storage devices storing the extent. A consistent pattern of large I O sizes may be determined if the mean I O size is greater than or greater than or equal to the I O size threshold and the I O size standard deviation is less than or less than or equal to the I O size standard deviation threshold. Moreover in alternative embodiments instead of mean and standard deviation similar measures or other derived measures may be used such as exponential moving averages EMA MA median mode instead of mean and other measures of variability such as variance dispersion expected deviation etc.

With respect to if at block the current one or more storage devices storing the extent are higher performance low latency e.g. SSD then control proceeds at block to block in to determine whether to migrate the extent to one or more high latency storage devices e.g. hard disk drives. The storage manager performs the operations at blocks to to determine whether the extent is eligible for migration based on non I O size related characteristics and the classification of the I O size as having consistent or inconsistent and small or large I O sizes. At block the storage manager may determine whether the extent is eligible for migration to the higher latency device based on non I O size characteristics such as the I O frequency access pattern and read write ratio. In one embodiment one or more characteristics indicating a relatively lower I O frequency a sequential access pattern and a predominantly greater number of writes may indicate eligibility for migration from the low latency device such as an SSD which may not perform as well based on such non I O size characteristics to a higher latency device such as a hard disk drive which may provide better performance under such conditions. If at block the extent is not eligible for migration then control ends. If the extent is eligible from the Yes branch of block then the storage manager performs the operations at block to classify the I O size for the extent to determine whether to migrate.

If at block the characteristics of the I O sizes such as the mean and standard deviation indicate that the I O sizes are a consistent pattern of small I O sizes then the extent is retained at block in the low latency device which provides better performance for small I O sizes or may be migrated to as few high latency devices as possible. If at block the characteristics of the I O sizes indicate that the I O sizes are an inconsistent pattern of small I O sizes then the storage manager may migrate at block the extent to a high latency device or as few high latency devices as possible. Alternatively the storage manager may leave the extent on the low latency device for inconsistent small I O sizes. If at block the characteristics of the I O sizes indicate that the I O sizes are an inconsistent pattern of large I O sizes then the storage manager may migrate at block the extent to a high latency device or as few high latency devices as possible. Alternatively the storage manager may leave the extent on the low latency device for inconsistent small I O sizes. If from the No branch of block the characteristics of the I O sizes indicate that the I O sizes are a consistent pattern of large I O sizes then the storage manager may migrate at block the extent to a plurality of high latency storage devices which provide better or more equivalent performance for larger size I Os.

In the described embodiments the storage manager classifies extents according to the determined I O size category of the accesses during the measurement period which may be determined according to the mean and standard deviation of the I O. This classification is used to determine bottlenecks in the system and whether migration would optimize I O performance by transferring the extent to a storage device type better suited for handling the extent based on the I O size classification consistent or inconsistent and small or large I O sizes. In certain embodiments the statistics may be gathered at regular intervals to determine whether migration is required during such intervals that may occur during real time operations.

The described operations may be implemented as a method apparatus or computer program product using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof. Accordingly aspects of the embodiments may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects that may all generally be referred to herein as a circuit module or system. Furthermore aspects of the embodiments may take the form of a computer program product embodied in one or more computer readable medium s having computer readable program code embodied thereon.

Any combination of one or more computer readable medium s may be utilized. The computer readable medium may be a computer readable signal medium or a computer readable storage medium. A computer readable storage medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus or device or any suitable combination of the foregoing. More specific examples a non exhaustive list of the computer readable storage medium would include the following an electrical connection having one or more wires a portable computer diskette a hard disk a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or Flash memory an optical fiber a portable compact disc read only memory CD ROM an optical storage device a magnetic storage device or any suitable combination of the foregoing. In the context of this document a computer readable storage medium may be any tangible medium that can contain or store a program for use by or in connection with an instruction execution system apparatus or device.

A computer readable signal medium may include a propagated data signal with computer readable program code embodied therein for example in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms including but not limited to electro magnetic optical or any suitable combination thereof. A computer readable signal medium may be any computer readable medium that is not a computer readable storage medium and that can communicate propagate or transport a program for use by or in connection with an instruction execution system apparatus or device.

Program code embodied on a computer readable medium may be transmitted using any appropriate medium including but not limited to wireless wireline optical fiber cable RF etc. or any suitable combination of the foregoing.

Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language or similar programming languages. The program code may execute entirely on the user s computer partly on the user s computer as a stand alone software package partly on the user s computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario the remote computer may be connected to the user s computer through any type of network including a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

Aspects of the present invention are described below with reference to flowchart illustrations and or block diagrams of methods apparatus systems and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and or block diagrams and combinations of blocks in the flowchart illustrations and or block diagrams can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer special purpose computer or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus create means for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

These computer program instructions may also be stored in a computer readable medium that can direct a computer other programmable data processing apparatus or other devices to function in a particular manner such that the instructions stored in the computer readable medium produce an article of manufacture including instructions which implement the function act specified in the flowchart and or block diagram block or blocks.

The computer program instructions may also be loaded onto a computer other programmable data processing apparatus or other devices to cause a series of operational steps to be performed on the computer other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

In certain embodiments the server of may be implemented as a cloud component part in a cloud computing environment. In the cloud computing environment the systems architecture of the hardware and software components involved in the delivery of cloud computing may comprise a plurality of cloud components communicating with each other over a network such as the Internet. For example in certain embodiments the server of may provide clients and other servers and software and or hardware components in the networked cloud with storage and data processing services. The server may provide reliable storage services and access to the storages to meet quality of service requirements for customers in the cloud including clients requiring storage and other servers providing storage services to clients. The server may communicate with clients to provide storage services for the storages and through a web interface or other application programming interface.

The terms an embodiment embodiment embodiments the embodiment the embodiments one or more embodiments some embodiments and one embodiment mean one or more but not all embodiments of the present invention s unless expressly specified otherwise.

The terms including comprising having and variations thereof mean including but not limited to unless expressly specified otherwise.

The enumerated listing of items does not imply that any or all of the items are mutually exclusive unless expressly specified otherwise.

Devices that are in communication with each other need not be in continuous communication with each other unless expressly specified otherwise. In addition devices that are in communication with each other may communicate directly or indirectly through one or more intermediaries.

A description of an embodiment with several components in communication with each other does not imply that all such components are required. On the contrary a variety of optional components are described to illustrate the wide variety of possible embodiments of the present invention.

Further although process steps method steps algorithms or the like may be described in a sequential order such processes methods and algorithms may be configured to work in alternate orders. In other words any sequence or order of steps that may be described does not necessarily indicate a requirement that the steps be performed in that order. The steps of processes described herein may be performed in any order practical. Further some steps may be performed simultaneously.

When a single device or article is described herein it will be readily apparent that more than one device article whether or not they cooperate may be used in place of a single device article. Similarly where more than one device or article is described herein whether or not they cooperate it will be readily apparent that a single device article may be used in place of the more than one device or article or a different number of devices articles may be used instead of the shown number of devices or programs. The functionality and or the features of a device may be alternatively embodied by one or more other devices which are not explicitly described as having such functionality features. Thus other embodiments of the present invention need not include the device itself.

The illustrated operations of show certain events occurring in a certain order. In alternative embodiments certain operations may be performed in a different order modified or removed. Moreover steps may be added to the above described logic and still conform to the described embodiments. Further operations described herein may occur sequentially or certain operations may be processed in parallel. Yet further operations may be performed by a single processing unit or by distributed processing units.

The foregoing description of various embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto. The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended.

