---

title: Providing privacy within computer networks using anonymous cookies
abstract: In general, techniques are described for utilizing anonymous cookies within computer networks to protect customer identities. In particular, a network device is configured to communicate with an edge router of a service provider network that provides access to a public network having network destinations. The network device includes a control unit and an interface. The control unit executes a content delivery layer and a privacy services layer. The content delivery layer receives a network communication sent from one of the customer devices to the public network. The privacy services layer replaces a destination-specified cookie within the network communication with an anonymous cookie, each of which conform to an application layer protocol. The anonymous cookie also specifies a pseudonym for the one of the customer devices that originated the network communication. The at least one interface then forwards the network communication including the anonymous cookie to the network destination.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08468271&OS=08468271&RS=08468271
owner: Juniper Networks, Inc.
number: 08468271
owner_city: Sunnyvale
owner_country: US
publication_date: 20100202
---
This application claims the benefit of U.S. Provisional Application No. 61 183 090 filed Jun. 2 2009 the entire content of which is incorporated herein by reference.

The invention relates to computer networks and more particularly advertising within computer networks.

Online advertising generally refers to advertising within computer networks. In this form of advertising a potential purchaser typically direct a computing device such as a desktop computer a laptop computer a mobile phone or so called smart phone or any other device capable of accessing a computer network to access or otherwise browse a public network such as the Internet. While browsing one or more advertising networks or simply ad networks provide the online advertisements or online ads or simply ads to the potential purchaser s computing device. The potential purchaser may then click on or otherwise select the online advertisement to retrieve and view a website with which the customer may interact to view and or purchase a product e.g. an item good and or service offered by the selected advertisement. Electronic advertisements may also be presented to a potential purchaser using other media such as by presenting the advertisements commensurate with electronic mail email text messages digital multimedia Voice of the Internet VoIP telephony sessions and other formats.

The ad networks and the advertising agents or other customers that place the ads engage in various forms of fee structures. For example one form of a revenue model of an ad network is referred to as Cost Per thousand impressions CPM in which the ad network charges advertisers a set or variable price each time an advertisement placed by that advertiser is shown to i.e. makes an impression on potential purchaser one thousand times. In another form of online advertising an ad network uses a revenue model referred to as Cost Per Click CPC in which the ad network charges the advertiser a set or variable price each time an advertisement for that company s product is clicked or selected by a potential customer regardless of whether the potential customer actually purchased the product or took some other action. In yet another form of online advertising the ad network may utilize a revenue model referred to as Cost Per Action CPA in which the ad network charges the advertiser each time a potential customer clicks on the advertisement and subsequently completes an action or transaction such as purchasing a product offered in the advertisement or signing up for more information regarding the product. Currently CPA based online advertising is implemented in a limited per website basis where a content provider has the infrastructure to work intimately with an advertising network due to the difficulty in correlating customer clicks with subsequent customer actions.

In many cases ad networks attempt to garner information about the potential customer in order to select targeted ads and improve the likelihood of success of the ads. As one example a network based search engine may feed searches entered by the potential customers to an ad network which selects and returns ads based on the subject of the entered search. The advertisements are then presented to the potential customer along side the results of the search. Thus unlike conventional advertising where collection of data concerning customer behavior is limited as in radio or television advertising online advertising may facilitate more targeted advertising by way of dynamic and often real time collection of data regarding customer behavior.

In some cases an ad network may deploy more invasive means that seek to record the potential customer s actions over time. Often this data is recorded by use of cookies inserted onto the potential customer s device. Often without the knowledge of the potential customer the cookies are subsequently uploaded to a given search engine website or ad network the potential customer enters a search browses a website or retrieves an advertisement. The information recorded over time by way of the cookies may allow the ad network to determine the frequency with which the potential customer has entered various search terms and other metrics related to searching or browsing the public network such as behavior regarding selection of related advertisements.

Each of the different ad networks may deploy different technologies and attempt to compile their own information concerning the behavior of the potential customer with respect to domains serviced by that ad network. That is each ad networks may deploy its own cookies in an attempt to collect this potential customer information and the potential customer s computing device returns the ad network s cookie when the unsuspecting potential customer encounters that ad network s domain. In this respect a user s behavior and actions with respect the resources of a public network may be monitored by many different ad networks. As the cookies of the different ad networks are domain limited individual ad networks may be limited in their ability to compile a comprehensive view of any given potential customer across domains. However when viewed as a whole the ad networks may compile significant information regarding the network users behavior thereby compromising user privacy.

A number of different ad networks have developed various services with which network based media companies so called publishers may interact to traffic target deliver and report on their interactive online advertising campaigns. Each of these various ad networks may charge the advertisers different rates for each form of online advertising e.g. CPM CPC and CPA and service different scopes of the public network. These different scopes may translate into different audiences. In some cases a company or other enterprise operating a search engine may also own and operate its own ad network. In this case the search engine provides an interface for monitoring the behavior of potential customers and utilizes this information to drive its own ad network. In this business model search engines therefore compete with one another for ad revenue and typically exclude competing ad networks as this detracts from their own ad revenue.

Considering these varying scopes advertisers or advertisement agencies that place ads on behalf of their clients may be forced to contract with a number of these different ad networks and search engines to reach a wider audience. The ad agencies may attempt to select between the numerous ad networks and search engines based on its limited data and previous interactions with the ad networks. The ad agency may also consider cost and other factors when selecting these ad networks. In some cases an ad agency may be forced to contract with the ad network that captures the proportionally largest segment of the target audience regardless of cost.

Thus although online advertising provides a number of benefits over brick and mortar or conventional forms of advertising it currently suffers from many problems and disadvantages. For example the rather invasive means currently employed by the ad networks may lead to compromised privacy of the network users. Moreover from the perspective of the ad network current techniques allow any individual ad network to compile only a fragmented view of user behavior based on that user s interaction with the ad network s domain. Further advertising agencies or other clients placing the ads are forced with the difficult challenge of selecting between the numerous ad networks and search engines as well the various fee structures offered by the different ad networks.

In general techniques are described for performing last mile online advertising that ensures privacy of network users yet allows for improved advertising services. Last mile online advertising involves services deployed proximate a network user where the term last mile refers generally to infrastructure deployed at or in communication with one or more edge service provider networks. As one example rather than rely on domain specific cookies currently used by the numerous ad networks that are located at the first mile of the public network i.e. remote from the network users the last mile online advertising techniques described herein may enable information collection across domains. Once collected the information may be condensed into a customer profile that more accurately reflects customer interests actions and behavior as this information is not limited to a single ad network domain. Yet the information may be collected in such a way that customer privacy is maintained. With the rising sensitivity of customers to issues of privacy the last mile online advertising techniques described herein may alleviate these privacy concerns by masking or otherwise scrambling the customer identity associated with this information.

In operation an edge advertisement management system EAMS is deployed at or in communication with network infrastructure of a service provider network. One or more routers located within service provider network receive network communications from customer devices utilizing the service provider network to provide network access. The routers forward the communications or portions thereof to the EAMS which in turn removes any application layer cookies from the network communications to preserve the privacy of the customers of the service provider network. Often these cookies are first mile cookies set by an ad network search engine or other domain and the cookies frequently include information that allows for the positive identification of the customer or customer s device. The EAMS may replace any removed cookies with standardized application layer cookies that comply with a data format that excludes information identifying the customers that originated the network communication. This standardized cookie may be referred to herein as a last mile cookie to denote that the cookie was generated from information collected proximate to the customer devices and the service provider network.

For example the EAMS may parse the network communications from the router s of the service provider network to extract application layer information concerning the customer interests actions and or behavior and store this information to a history database. This information may be organized by customer and time in a manner that reflects a transaction log for each of the customers of the service provider network. From this history database the EAMS may generate a profile that forms the basis of the standardized application layer cookie that maintains user privacy yet more accurately describes the customer interests actions and or behavior based on interactions that span domains and content providers.

Notably various services traditionally offered over disparate networks such as telephone or voice services television or video services Internet or data services and mobile services have recently begun to be offered over a single packet switched or Internet Protocol IP based network. The network convergence within service provider networks may facilitate monitoring of network communications across these various services which also may be referred to as channels in this disclosure. Consequently the EAMS may monitor network communications across services and channels where previously such monitoring was not provided without specialized hardware. The last mile cookies of the EAMS that replaces the use of first mile cookies of the various ad networks may therefore include information concerning customer behavior that both spans network domains and media channels. As a result the EAMS may provide more visibility into a customer s behavior which may significantly improve an ad network s ability to target particular customers.

To maintain privacy the EAMS may generate temporary identities that represent pseudonyms for the customers of the service provider network. The EAMS generates this pseudonym by in one example performing a one way hash on a Media Access Control MAC address assigned to the customer device from which the network communication was originated. This one way hash may obscure the identity of the customer device and thereby mask or otherwise scramble the identity of the customer device for which the above profile was determined. The EAMS may then insert the above referenced application layer cookie into the network communication where this cookie specifies the profile and the untraceable pseudonym. Effectively the EAMS replaces the first mile cookie with a last mile cookie to provide more accurate information concerning a given customer s behavior while simultaneously addressing privacy concerns associated with cookies in general. The EAMS then forwards this network communication including the inserted application layer cookie from the service provider network to the network destination.

The network destination may comprise an online retailer search engine content publisher or any other destination within a public network. This network destination may generally be referred to herein as a content provider insomuch that an online retailer search engine and content publisher all serve content. The network destination may also comprise an ad network. Assuming the network destination comprises an ad network the ad network extracts the cookie and utilizes the cookie to select an ad that targets the customer for inclusion within the webpage. However the EAMS may generate a new or different pseudonym for the same customer for each request and thereby not permit the ad network to track or positively identify the customer. Conceptually the EAMS may randomly pull a pseudonym from an identity pool and use that identity for a short term basis to mask the actual customer identity e.g. Media Access Control MAC address.

Moreover the EAMS may in some instances encrypt this last mile cookie and only allow those ad networks and other domains that subscribe to the last mile advertisement service offered by the EAMS to decrypt the last mile cookie. This encryption may further protect customers from any unwanted privacy invasions. The EAMS may be configurable to enable or disable this encryption on a per customer basis as well as per website domain or other basis to accommodate a wide range of tolerances toward privacy concerns by customers.

The EAMS may provide these services in a manner that varies according to subscriptions levels. These various subscription levels may influence the profile data included within a given cookie by the EAMS. To illustrate a first ad network may subscribe to a premium level of the subscription services offered by the EAMS. In such a case the EAMS may include within communications directed from a customer of the service provider network to the first ad network cookies containing profile data of high granularity that accurately describes the recent behavior of that customer. This higher granularity data may enable more accurate targeted advertising by this first ad network. In contrast a second ad network may subscribe at a lower level of the subscription service such as a basic level and EAMS may determine profile data at a lower granularity that may more generally describes customer behavior over a more generalized geographical region or time period for example. Consequently the EAMS may generate last mile cookies that address a particular ad network s level of subscription which may facilitate various advertising goals of ad networks and cost structures for sourcing ads for ad agencies.

The EAMS may further leverage the profile and history databases to provide various services to ad networks and ad agencies in accordance with correlation and evaluation aspects of the last mile online advertising techniques described in this disclosure. As one example the EAMS may include Cost Per Action CPA infrastructure that correlates customer clicks or selections of advertisements with actions such as purchases of products e.g. goods items and or services offered in the advertisement signing up for additional information or any other typical online advertising action. As the EAMS may accurately track both clicks and actions across all domains due to the EAMS tracking at the last mile rather than the first mile the EAMS may substantially improve the correlations of clicks with actions. The EAMS may provide this click correlation service as an additional service to ad networks and ad agencies such that ad networks may improve revenue capture with respect to advertisements sourced or placed in accordance with the Cost Per Action CPA revenue model and the ad agencies may select between ad networks and fee structures with improve knowledge.

The EAMS may also by virtue of the increased visibility provided by the more comprehensive profile and history databases allow for the more accurate evaluation of the effectiveness of each of the ad networks with respect to ad placement. During the click correlation process the EAMS may correlate clicks with actions but in some instances the EAMS may additionally correlate clicks with past selections in general. As a result the EAMS may as one example identify when a customer does not select an advertisement which may be relevant when determining the effectiveness of ads placed under the CPC or CPA revenue models. Moreover the EAMS may monitor the presentation of all advertisements even those that are placed under the CPM revenue model and by virtue of the increased visibility more accurately correlate these advertisements with eventual actions. The EAMS may store this metadata to a metadata database and provide an interface by which ad agencies may interact with this metadata database. The EAMS may therefore provide a more accurate form of metadata by which ad agencies may evaluate the effectiveness of ad networks in placing various advertisements.

The EAMS may also leverage the profile history correlation and metadata databases to source ads and thereby operate as an interface point for ad networks at the last mile rather than the first mile. In some cases the EAMS may itself operate as a last mile ad network. In this ad sourcing aspect of the last mile online advertising techniques the EAMS may automate much of the ad sourcing procedure and thereby simplify ad sourcing on behalf of ad agencies. The agency interface described above may be extended to enable agencies to interface with the EAMS and upload edit delete and otherwise manage online advertisements. The EAMS may also provide an interface to enable content providers to upload edit delete and otherwise manage inventory e.g. available ad space . As the EAMS may access multiple channels or services this inventory may comprise inventory from video content providers voice content providers mobile content providers and data content providers. The EAMS may then dynamically source advertisements using the profile history and metadata databases to match advertisements to inventory for a particular customer.

Considering the improved visibility to customer behavior as described above the EAMS may match a particular one of the advertisements to inventory in a manner that may more accurately target the customer. Moreover as the EAMS may include inventory from numerous channels the EAMS may source ads across channels. Also the EAMS may utilize the metadata database in this instance to store metadata defining the effectiveness of inventory and in the aggregate content providers rather than ad networks. The EAMS may then automatically or without any user or operator input improve the matching based on the metadata stored to the metadata database. Furthermore the EAMS may leverage the correlation database to facilitate placement of ads under the CPA revenue model even though particular portions of various services may not offer a way to capture actions themselves.

In yet another aspect of the techniques described herein and referred to as the mass customizable advertisement aspect the EAMS may provide for mass customizable advertisements. These advertisements may include an advertisement template having at least one customizable template region. These advertisements may also comprise a plurality of template data each of which is associated with one or more keywords or tags. The EAMS may enable ad agencies to specify a mass customizable advertisement via the agency interface. Upon matching one of these advertisements to an inventory when receiving a request for an advertisement from a customer device the EAMS may select one of the plurality of template data to populate the customizable template region. The EAMS may base this selection on the tags associated with each of the template data and the profile associated with the customer device as well as other information. In this respect the EAMS may not only intelligently and automatically source ads to more effectively target a particular customer but may also intelligently and automatically adapt the content of ads to more further target this customer.

In one embodiment a method comprises with a network device coupled to a router located at an edge of a service provider network receiving a network communication sent from a customer device of the service provider network to a network destination of a public network with the network device removing at least one destination specified cookie from the network communication set by the network destination wherein the destination specified cookie conforms to an application layer protocol and with the network device generating a pseudonym for the customer device from which the network communication originated. The method further comprises with the network device inserting an anonymous cookie into the network communication wherein the inserted anonymous cookie specifies the pseudonym generated for the customer device and wherein the anonymous cookie conforms to an application layer protocol and with the network device forwarding the network communication including the inserted anonymous cookie to the network destination.

In another embodiment a network device is configured to communicate with a router located at an edge of a service provider network that provides a plurality of customer devices network access to a public network having network destinations. The network device comprises a control unit and at least one interface. A content delivery layer executes on the control unit where the content delivery layer is configured to receive a network communication sent from one of the customer devices of the service provider network to the public network. A privacy services layer also executes on the control unit where the privacy services layer is configured to replace a destination specified cookie within the network communication with a second anonymous cookie wherein the destination specified cookie and the anonymous cookie each conform to an application layer protocol and wherein the anonymous cookie specifies a pseudonym for the one of the customer devices that originated the network communication. The at least one interface forwards the network communication including the anonymous cookie to the network destination.

In another embodiment a system comprises a service provider network that provides a plurality of customers network access to a public network having network destinations wherein the service provider network includes a router located at an edge of the service provider network and a network device configured to communicate with the router of the service provider network. The network device comprises a content delivery layer configured to receive a network communication sent from one of the customers of the service provider network to the public network and a privacy services layer configured to replace a first destination specified cookie within the network communication with an anonymous cookie wherein the destination specified cookie and the anonymous cookie each conform to an application layer protocol and wherein the second application layer cookie specifies a pseudonym for the customer that originated the network communication. The network device also comprises at least one interface to forward the network communication including the anonymous cookie to the network destination.

In another embodiment a computer readable storage medium comprising instructions that cause a processor to with a network device coupled to a router located at an edge of a service provider network receive a network communication sent from a customer device of the service provider network to a network destination of a public network with the network device remove at least one destination specified cookie from the network communication set by the network destination wherein the destination specified cookie conforms to an application layer protocol with the network device generate a pseudonym for the customer device from which the network communication originated with the network device insert an anonymous cookie into the network communication wherein the inserted anonymous cookie specifies the pseudonym generated for the customer device and wherein the anonymous cookie conforms to an application layer protocol and with the network device forward the network communication including the inserted anonymous cookie to the network destination.

The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features objects and advantages of the invention will be apparent from the description and drawings and from the claims.

In the example of network system includes a service provider network that provides one or more services to a plurality of customer devices A N customer devices . The one or more services may include a digital television or TV service a data or Internet service a mobile service e.g. cellular telephone voice data and video services and a digital telephony service which may include Voice over Internet Protocol or VoIP service . These services may also be referred to as channels in that each service may comprise a different channel by which to provide content to consumers of this content e.g. customers operating customer devices .

Often the service provider offers two or more of these services packaged together at a reduced price. For example one package referred to as a triple play package provides television data and telephone services at a discount price. These packages came about due to convergence of past disparate networks to a single network that may emulate one or more other networks. For example the Internet and Plain Old Telephone Service POTS network converged with the Internet being adapted to provide telephone services in the form of the VoIP service. Similarly the broadcast television network has begun to converge with the Internet where the Internet is being adapted to provide video programming in the form of Internet Protocol Television IPTV and other video streams. A single network rather than three different networks that provides multiple services may significantly reduce costs associated with owning operating and maintaining a network. These lower costs continue to drive the convergence of these networks into a single network.

As a result a service provider may now maintain and operate a single service provider network such as service provider network capable of providing many different services or channels of data to customer devices . As a result customer devices may include any type of device capable of receiving and providing access to one or more of the services such as a laptop computer a desktop computer a workstation a mobile phone including so called smart phones a Set Top Box STB or other receiver a VoIP enabled telephone a Personal Digital Assistant PDA or any other device capable of receiving one or more of the above described services. In each service a layer three or network layer device such as a router may route the data for each of these services to customer devices . Router may therefore represent a device that implements a network layer protocol such as IP. Likewise service provider network may be referred to generally as a layer three network and more particularly as an IP network. As IP networks transmit the data in the form of packets and router actively switch or route these packets from a source device to a destination device service provider network may also be referred to as a packet switched network.

As further shown in the example of service provider network may couple to public network which represents a collection of one or more computer networks accessible by the public. Public network may like service provider network comprise a layer three packet switched network. One example of a public network is the Internet. Public network generally includes a plurality of computing and or networking devices that are generally referred to as content providers . Content providers may include one or more web servers application servers print servers file servers data servers routers switches hubs workstations laptop computers desktop computers mobile phones such as so called smart phones and any other device capable of accessing a network and serving content.

Public network may also couple to a number of other networks such as ad networks A N ad networks . In effect public network may include ad networks and ad networks are shown separate from public network in to facilitate discussion of these ad networks . Ad networks may represent a repository for advertisements and an interface by which to access those advertisements. Ad networks typically contract with one or more content providers to provide advertisements on behalf of advertisers to consumers of the content provided by content providers . For example one of content providers may operate a large online newspaper and may contract with one of ad networks such that this one of ad networks provides advertisements alongside articles and other content provided by this one of content providers .

Typically the consumers of the content which may also be referred to as customers of service provider network operate customer devices and direct customer devices to access content provided by content providers . Customer devices may access this content by issuing network communications that request content to content providers . With respect to data or Internet services the network communications may comprise HyperText Transfer Protocol HTTP communications. With respect to VoIP services and in some instances IPTV services the request may comprise a Session Initiation Protocol SIP communication and or a Realtime Transfer Protocol RTP communication. Generally network communications may refer to any form of communication via a network that requests content including communications to establish a service such as a VoIP call and accessing content such as a webpage. These network communications are shown in as network communications A N network communications .

In response to these network communications content providers may access the requested content and provide the requested content to the requesting one of customer devices . The requested content may specify additional content or resources that customer devices need to retrieve to properly render and then display the requested content. This additional content may comprise one or more of images video streams audio streams and advertisements. As one example content providers may generate or retrieve a document written in a HyperText Markup Language HTML which is generally referred to as a webpage that is identified by a Uniform Resource Locator URL . This webpage may include references to a number of additional resources including electronic advertisements. Customer device A may for example request this webpage and when rendering this webpage retrieve the identified additional resources from other locations or destination including one or more of ad networks . In this respect content providers may embed advertisements within webpages in a manner that causes these requesting one of customer devices to dynamically retrieve and load advertisements hosted by ad networks .

In accordance with the techniques described in this disclosure router may receive one of network communications from a respective one of customer devices . This one of network communications e.g. network communication A may be destined for a network destination such as one of content providers within public network . Router may forward this network communication to EAMS rather than forward the network communications directly to the network destination e.g. one of content providers . In this respect router may intercept network communications and shunt network communications or copies thereof to EAMS . In some instances router may intercept all of network communications both requests and responses and forward all or portions of these network communications to EAMS . In this respect EAMS may receive and apply one or more of the techniques set forth in this disclosure to each and every communication originated from and destined for customer devices . Accordingly EAMS may track each and every one of communications including communications across multiple channels or services with respect to each and every one of customer devices .

In some instances EAMS may be configured as a content proxy or otherwise provide content proxy services. In these instances EAMS may cache content from content providers locally within EAMS and serve this content to customer devices on behalf of content providers . For example customer device A may request content from one of content providers and EAMS may determine whether the requested content is cached locally within EAMS . If locally cached EAMS may serve the content on behalf of the one of content providers without forwarding the content request or other network communication to the intended destination of this communication e.g. the one of content providers . EAMS may therefore effectively act as a proxy content provider that terminates the session on behalf of the one of content providers .

If the requested content is not locally cached EAMS may establish a new session between EAMS and the one of content providers to download or otherwise retrieve the requested content. EAMS may then serve the requested content to customer device A. Again EAMS may act as a proxy content provider and effectively terminate a first session between customer device A and EAMS and terminate a second session between EAMS and the one of content providers . To effectively terminate a session may refer to instances where EAMS serves content on behalf of the intended destination which in this case is one of content providers . To terminate a session may refer to instances where EAMS requests content using its own address e.g. IP address and port number e.g. IP port number.

Thus rather than allow customer devices to establish a session between customer devices and content providers EAMS may segment the session into a first session and a second session where in the first session EAMS acts as a proxy for the content provider and uses the content providers address and port numbers to serve the requested content and in the second session EAMS requests content on behalf of customer devices using the address assigned to EAMS . EAMS may act as a proxy in this manner for reasons described in more detail below. However briefly EAMS may act as a content proxy to improve the speed with which content is served as EAMS lies closer to customer devices than content providers and obscure the identity of e.g. addresses assigned to customer devices so as to provide a higher level of privacy to customer devices .

Whether acting as a proxy or not EAMS receives network communications and analyzes these communications to construct a profile detailing one or more demographics interests actions and or behavior of those customers operating one or more of customer devices . EAMS may analyze various aspects of network communications including one or more headers of network communications and payload data.

In this example of EAMS includes a policy database privacy database in which to store data defining these policies. EAMS may also include a history database not shown in in which to store data defining history logs that track network communications from each of customer devices respectively. This data or information may be organized in the history log by customer and time in a manner that reflects a transaction log for each of the customers of the service provider network. In other words this history log may represent a transaction log that specifies temporal data for each of the requests. EAMS may analyze the history logs to determine a profile for each of costumer devices and possibly each of one or more customers who operate customer devices . EAMS may then store data defining these profiles and thereafter update this data to reflect changing interests actions and or behavior.

Notably this history log may track communications that span multiple services or channels including IPTV service mobile services VoIP services and data or Internet services. As a result of this data spanning multiple channels the history log may provide a more comprehensive data source by which to track customer behavior interests and actions across multiple services over most if not all other forms of data collection which are typically limited to particular domains in a data network and typically cannot span even a single network. Moreover because the profile is extracted from this history log the profile may too represent a composite view of a consumer s behavior interests and actions that spans multiple channels or services. The profile may therefore be referred to as a composite profile for this reason.

In any event EAMS may update this profile data in response to each one of network communications or may periodically update this profile data at set intervals. As an alternative EAMS may update this data in response to particular events such as selecting an advertisement selecting to purchase an item sign up for an email publication or perform a variety of other actions. Regardless of how the profile data is updated EAMS may generate a profile that more accurately describes the customer interests actions and or behavior from this history data. This profile may form the basis of a standardized application layer cookie that complies with a standard set forth by a standards body a proprietary standard or an open standard.

When analyzing these network communications EAMS may also determine whether or not network communications include any first mile cookies. A first mile cookie refers to cookies set by content providers and or ad networks where first mile refers to the typical location of content provider with respect to a session by which content is provided to consumers of the content e.g. customers operating customer devices . A first mile of a connection or session may therefore be characterized as the portion of a connection or session between content provider within public network and a service provider network such as service provider network . As these cookies relate to applications such as HTTP webpages these cookies may also be referred to as application layer cookies.

Commonly content providers and or ad networks insert these first mile cookies onto customer devices by specifying a set cookie portion of an HTTP header in HTTP responses delivered to the customer devices. For this reason these cookies may also be referred to as destination set cookies as a network destination that resides at the first mile may set these cookies. The set cookie portion indicates a domain that controls when the one of customer devices e.g. customer device A should return the respective cookie an expiration time at which the cookie expires and other aspects of a cookie such as information to log or otherwise store. Customers may enable or disable cookies or may otherwise limit how content providers and or ad networks set cookies within customer devices e.g. by limiting cookies to those of content provider and or ad networks that the consumer trusts. However often consumers are not aware of cookies let alone such features for disabling them or limiting these first mile cookies within customer devices .

As a result one or more of customer devices may be configured to store all cookies specified by content providers and or ad networks in this set cookie portion of the HTTP header of an HTTP response. Content providers and ad networks may utilize the cookies as structures for logging information concerning a wide variety of subjects such as web browsing history or webpages visited over time items in a virtual shopping cart addresses emails search terms demographic data previously entered by the customer security questions and answers and even financial information usernames and passwords. Consumers may however be completely unaware of this aspect of cookies and the sensitive and usually private information stored by these first mile cookies.

EAMS may remove these cookies from the network communications to preserve the privacy of the consumers with respect to this potentially private and sensitive information. EAMS may then generate a pseudonym for the customer device from which network communication A was originated. EAMS generates this pseudonym by in one example performing a one way hash on a Media Access Control MAC address assigned to one of customer devices e.g. customer device A from which this network communication A was originated. The seed for this one way hash may comprise a time of day or other determinable but changing value. This one way hash may obscure the identity of customer device A and thereby mask or otherwise scramble the identity of customer device A for which the above profile was determined. This scrambling may make the information in the profile in effect anonymous in that the profile information cannot be used to identity customer device A that originated network communication A.

To provide context a cookie may commonly include or define an address assigned to customer device A. Often this address may be statically assigned to customer device A such as a MAC address. Ad networks may then use this address as a fixed reference point by which to compile information concerning customers using customer device A. Some of this information may be Personally Identifiable Information PII such as telephone numbers mailing addresses email addresses names and possibly even social security numbers driver license numbers credit card numbers passwords and usernames. Ad networks may possibly also use this information to gather additional information or in some instances make portions of this information available for a price to other ad networks e.g. telemarketer spam or other more invasive ad networks . EAMS may prevent ad networks of learning this address by performing a one way hash on this address using a variable seed such that the same customer device may receive and operate under a continually changing series of pseudonyms.

To illustrate customer device A may generate and forward a first network communication A not shown explicitly in which router intercepts and forwards to EAMS . This first network communication A may request content from a first one of content providers and include information that identifies customer device A. EAMS may strip or otherwise remove this information and update profile data stored within profile database for customer device A. EAMS may then perform a one way hash using the current time as a seed on the MAC address assigned to customer device A and included within network communication A thereby assigning a first pseudonym to customer device A that replaces the actual identity assigned to customer device A. EAMS may forward this communication A to a destination device e.g. one of content providers .

EAMS may then receive another network communication A not shown explicitly in from customer device A via router . EAMS may also perform a one way hash using the current time which is different from the current time above to generate a second pseudonym. EAMS may again replace the actual identity assigned to customer device A with this second pseudonym that is different from the first pseudonym and forward this communication A to the same one of content providers . In this sense EAMS may maintain an identity pool that includes a plurality of pseudonyms that can be assigned to customer devices to preserve the actual identity assigned to customer devices . As different pseudonyms may be assigned for each request EAMS may prevent content providers from accurately tracking a particular one of customer devices based on the address included within cookies.

Yet the network communication in which the cookie is included may provide one or more of the addresses included within the cookie. Ad networks may to overcome this scrambled address in the cookie begin harvesting information from the network communication and compiling the information in a manner similar to that described above. To prevent this EAMS may provide the proxy functionality described above to obscure any of the addresses of customer devices including the static or fixed addresses by terminating the session at EAMS rather than allowing the session to terminate at customer devices . Consequently in combination with the proxy functionality EAMS may effectively block any attempt by ad networks to compile information on customer devices . As a result EAMS may provide an increased level of privacy to consumer devices .

EAMS may after scrambling or otherwise masking the identity assigned to customer device A then insert the above referenced application layer cookie into the network communication where this cookie specifies the profile and the pseudonym. Effectively EAMS replaces the first mile cookie with what may be referred to as a last mile cookie to provide more accurate information concerning a given customer s behavior while simultaneously addressing privacy concerns associated with cookies in general. This last mile cookie may also be referred to as an anonymous cookie in that the pseudonym effectively makes this last mile cookie anonymous. In some instances EAMS may encrypt this last mile cookie and only allow those of ad networks and other domains that subscribe to a last mile advertisement service offered by EAMS to decrypt the last mile cookie. In other words ad networks may subscribe to a last mile advertisement service offered by EAMS to receive a key by which to decrypt the last mile cookie. This encryption may further protect customers from any unwanted privacy invasions by reducing if not preventing data collection through cookies by ad networks . EAMS may be configurable to enable or disable this encryption on a per customer as well as per website domain or other basis to accommodate a wide range of tolerance toward privacy concerns by customers. These setting may be defined within profile data stored to profile database .

Upon inserting the application layer or last mile cookie into network communications A EAMS then forwards these network communications to either one of content providers and or ad networks . For this reason network communications are shown as going both to content providers and ad networks from router where those of network communications directed to content providers are shown in as network communications and those of network communications directed to ad networks are shown in as network communications . Considering again the example described above with respect to rendering webpages often customer device A inserts cookies when accessing the additional network resources such as advertisements hosted by ad networks via network communications . Below the techniques are described below for ease of illustration purposes with respect to network communications although the same techniques may be implemented with respect to network communications .

Typically ad networks set cookies to appropriately target the consumer within a given group and select an advertisement based on the targeted group. Targeting may involve collecting information concerning a consumer s habits interests actions disinterests behavior age sex or any other characteristic or metric by which to evaluate a potential subset or group of the population to which the consumer may belong. Then based on the determined targeted group ad networks may select an advertisement that has been shown in the past to be effective with respect to this group e.g. an advertisement that might lead to a potential action by a viewer of the advertisement with respect to the good item or service offered by the advertisement.

With respect to the techniques of this disclosure ad networks may receive an encrypted version of the last mile cookie. However ad networks may not be able to decrypt this last mile cookie unless the ad network subscribes to a subscription service offered by EAMS . This subscription may come in a variety of levels from a basic or bronze level to an upgrade or silver level and possibly to a premium or gold level. The varying plurality of subscription levels may each be associated with a particular level of granularity such that for example a bronze level subscriber may receive profile data having a county or state wide level of granularity where the profile describes an interests action and or behavior in the larger geographical scope of the state or county. The silver level subscriber may receive a profile data having a zip code or possibly street wide level of granularity. The gold level subscriber may receive profile data having to a city block or possibly an individual level of granularity. The varying levels may also differentiate between time horizons where the bronze level provides data generalized over the last month the silver level provides profile data generalized over the last month and the last two weeks and the gold level provides profile data generalized over the last year the last month the last two weeks and the last day.

In any event assuming a given one of ad networks subscribes to one of these levels EAMS includes profile data within the application layer cookie segmented according to the subscribed level of both granularity and time horizon which ad networks uses to target customer device A. Notably the profile data regardless of the level of subscription is more complete than first mile profile data collected by content providers and networks and may improve substantially the level of targeting achieved by ad networks when compared to most first mile profiling data. Thus the techniques may generally improve the level of targeting capable by ad networks which in turn may increase the ad revenues under most revenue models which may also be referred to as revenue models including the Click Per thousand impressions CPM Cost Per Click CPC and Cost Per Action CPA revenue models which are described below in more detail. This improved ability to target may more than make up for the increased costs of the subscription required to access this improved profile data.

Ad networks may therefore decrypt the last mile cookie extracted from network communications . Ad networks may then recover the profile data from each of these cookies to more accurately target the advertisement to the customer operating customer device A. After selecting an advertisement ad networks returns this advertisement to customer device A as response network communications causing the customer device to render the advertisement alongside the content requested from content providers and returned via response network communications . Router may forward responses and 29 network communications directly to the appropriate one of customer devices which in this instance may comprise customer device A or may once again intercept these communications and forward these communications through EAMS before forwarding communications to customer devices .

Router may intercept and forward these responses to EAMS for further analysis in that EAMS may further update the above describe history database with these responses . EAMS may use this additional historical data or transactional data of a temporal nature to provide further services and or data to a variety of other online advertising participants as described below in more detail. Alternatively in the instance where EAMS acts as a proxy router may route communications to EAMS because EAMS terminates each and every session on behalf of customer devices that is external to service provider network so as to preserve the identity and therefore privacy of customer devices .

Each of interfaces is coupled to control unit and may forward and receive network communications to control unit . Control unit may comprise any combination of hardware and software that implement the techniques described in this disclosure. Control unit may comprise one or more processors Application Specific Integrated Circuits ASICs integrated circuits or any other processing or control unit or element or combination thereof and a memory or storage device. In some instances the memory or storage device e.g. generally a computer readable storage medium may comprise the above described instruction that cause the programmable processor to perform the techniques described herein. These instructions may form a computer or software program or other executable module that the programmable processor executes to perform the functionality described herein including the functionality attributed to the techniques of this disclosure.

Control unit may be logically separated into layers A C. Layer A is referred to as content delivery layer A and components in this layer manage the delivery of and receipt of content across a plurality of services or channels. Content delivery layer A includes channels modules where example channel modules comprise an IPTV module A an IP module B a mobile module C and a VoIP module D. IPTV module A represents a hardware and or software module that manages the delivery and receipt of IPTV content. IP module B represents a hardware and or software module that manages the delivery and receipt of IP or data content. Mobile module C represents a hardware and or software module that manages the delivery and receipt of mobile content including mobile telephone or voice content data content such as text messages and Internet content and video content. VoIP module D represents a hardware and or software module that manages the delivery and receipt of VoIP content. Each of these modules may output IP packets or other discreet data units that include at least one header and a payload defining application content e.g. a video stream a webpage a mobile text message a VoIP stream.

Layer B is referred to as condensation layer B as components in this layer condense data received from channel modules . Condensation layer B includes a profiler module that maintains databases A C. For example profile module may store data defining the above described transaction log or history for each of customer devices within history database B history DB B . Profiler module may also store data defining a subscription including the level of subscription and current encryption decryption keys for each subscribing one of ad networks within subscriber database C subscriber DB C .

Profiler module may then condense the data defining each of the history or transaction logs stored in history database B to generate a comprehensive profile that corresponds to a highest best or most expensive subscription level. Profiler module may maintain this comprehensive profile to facilitate delivery of the profile to these high level subscribers in near real time. Moreover by maintaining the comprehensive profile profiler module may quickly reduce the granularity of these comprehensive profiles to generate a reduced profile that corresponds to lower subscription levels. Profiler module may store this data as profile data within profile database A profile DB A where profile data defines a profile for each one of customer devices . Profiler module also includes encryption module that may encrypt network communications.

Layer C is referred to as a privacy service layer C and components in this layer may provide privacy services to mask or otherwise scramble an actual user identity. Privacy service layer C includes a privacy module that in one embodiment maintains identity pool . In one example privacy module includes a hash module that defines identity pool as a set of hash values based on criteria specific to each of the customer and his or her customer device such as MAC address subnet VLAN zip code user name and the like. Hash module may perform the above described one way hash function by which pseudonyms are generated.

In general one or more ad networks subscribe to various levels of access to profile database A. In one example profiler module may provide an ad network interface which may represent an ad network Application Programmers Interface API by which these ad networks may request and receive online advertising services provided by EAMS . Subscriber management logic within profiler module updates subscriber database C to reflect the subscription by these subscribers by adding a new subscriber record to subscriber database C for each subscribing one of ad network .

EAMS receives an analyzes network communications shunted from service provider network . More particularly one of interfaces such as interface A may receives network communications originating from one of customer devices such as a network communication A from customer device A via inbound connection . Interface A forwards network communication A to channel modules of control unit where the appropriate one of modules A D receives network communications A in accordance with one or more protocols. Assuming for purposes of illustration that network communication A comprises an IP packet that defines an HTTP GET request requesting content from one of content providers IP module B may process this data packet and forward communication A to profiler module within condensation layer B for parsing and data extraction. Often HTTP GET requests include one or more application layer cookies which are referred to herein as first mile cookies for the reasons described above.

First mile cookies may comprise one of two general types of cookies first party cookies and third party cookies. First party cookies may represent cookies that are associated or set by a host domain e.g. domains operated by one of content publishers . Third party cookies may represent cookies from or set by any domain other than the host domain such as ad networks . To illustrate consider a customer that directs customer device A to request content from a domain identified by the Uniform Resource Locator URL www.example1.com and hosted by one of content providers . This customer may interface with a web browser application executing on customer device A and entering the URL www.example1.com in an address bar of the web browser. If ad networks have contracted with this one of content providers such that this one of content providers agrees to publish banner advertisements from ad network domains identified by URLs sample.example1.com www.example2.com and www.example1.net and all these advertisements each set a respective cookie as well as the host domain the cookies from www.example1.com and sample.example1.com are in the first party context while the cookies from www.example2.com and www.example1.net are in the third party context.

Typically third party cookies represent cookies that are most likely to present privacy concerns as these cookies may be set to actively log customer activity as the customer browses or otherwise traverses the web. First party cookies may enable virtual shopping carts persistent storage of preferences and other benefits that enhance or otherwise provide a fuller experience with respect to the host domain. Third party cookies may track customers across websites so long as the website includes a banner or other advertisement provided by a particular one of ad networks . That is ad networks may only set cookies such that customer devices return the cookies for this one of ad networks upon encountering another advertisement associated with this same one of ad networks .

For example ad networks A may typically host their own advertisements and require customer device A to access ad network A in order to render than then present a webpage. The webpage may provide an URL that customer device A accesses in order to retrieve the advertisements and moreover this one of ad networks A may specify that customer device A is to set a cookie that customer device A is to return upon encountering the domain of ad network A in this and any other websites. Customer device A may then set this cookie and upon encountering any other URLs associated with the domain of ad network A customer device A may return the cookie set by ad network A. In this manner ad networks may set persistent third party cookies and use these cookies to track customer devices as customer devices visits different websites.

This form of customer tracking may however as described above occur transparently to customers as customers seldom disable either first or third party cookies or in fact even know that cookies can be limited in this manner. Thus customers may casually browse public network e.g. the Internet with a web browser and unknown to the customer the web browser may update and forward countless cookies filled with private information to one or more ad networks and or content providers . As described above ad networks may use this information to positively identify a particular customer for purposes of targeting this customer and serving ads to maximize ad revenue. Also as described above ad networks may however also sell this information to other ad agencies for other forms of advertising which may further constitute privacy concerns especially if a customer has been positively identified by email address mailing address or phone number as the amount of spam email unsolicited mail advertisements and telemarketer calls may increase substantially once this information is sold to another party.

To increase privacy with respect to customers using customer device A profiler module may therefore remove first party third party or both first and third party cookies from communication A received from IP module B. Profiler module may also analyze communication A to collect application layer information about customer device A and store this information to history database B. Profiler module may then access subscriber database C to determine whether a subscriber is associated with any of these cookies. If no subscriber is associated with any of the domains and or URLs of these cookies profiler module may remove the cookie and forward network communication A on as profiled network communication B.

However if a subscriber is associated with one of the domains and or URLs of these first mile cookies profiler module may construct or otherwise update a comprehensive profile within profile database A in response to detecting this association. This comprehensive profile may as described above comprise a granular distillation of the history log stored to history database B that corresponds to the highest best or most expensive subscription level. As an alternative or in conjunction with the above techniques profiler module may store multiple profiles for each customer one for each level of subscription. Profiler module may store this data defining these comprehensive profiles in profile database A. Consequently profile database A may store data defining a single comprehensive profile for each one of customer devices . Profile data may define a plurality of marketing categories and preference data defining an interest or interest levels in each marketing category and in some instances demographic information as well. Note that interest levels may be used interchangeably in this disclosure with preference data.

Example marketing categories include sports shopping hobbies travel leisure entertainment dining and any other typical or atypical marketing category. Marketing categories may also include sub categories such as particular types of sports e.g. football soccer baseball and tennis particular types of shopping e.g. groceries clothing shoes and home improvement particular types of hobbies e.g. stamp collecting sport memorabilia and golf etc. Example demographic information may include a sex or gender of a customer a preferred time of day during which the customer tends to shop online a geographic location f the customer an average monetary spend value for online services and goods for the customer a number of family members in a household of the customer and an estimated age for the customer.

For these comprehensive profiles the profile data may define a plurality of marketing categories sub categories and niches within sub categories and the preference data may define an interest within each of these various subdivisions. When providing a profile for lower subscription levels profiler module may reduce the level of granularity of the comprehensive profiles stored to profile database A e.g. by applying filters or combining one or more profiles such as in the case of reducing the geographic granularity and return this reduced profile in place of the comprehensive profile. Profile module may maintain the comprehensive profiles in profile database A to facilitate updates to the profiles and speed delivery of information to the highest subscription level subscribers. In this manner profiler module may generate profiles according to the subscription levels of a particular subscriber to either narrow or expand the extent of the profile data much as described above.

Profiler module may then insert one or more cookies into communication A each of which specify the profiles associated with the one or more identified subscribers and forward this communication as modified network communication B to privacy module . Privacy module may receive modified network communication B and perform privacy services to obscure or otherwise mask an actual customer identity assigned to customer device A. As described above hash module of privacy module may effectively maintain identity pool and may perform a one way hash on a MAC address assigned to customer device A to thereby select a pseudonym for customer device A. Hash module may employ a hash function that uses a variable seed such as a current time in the day to randomly select this pseudonym. This masking disassociates the profile from a particular one of customer devices and effectively makes the profile anonymous. Privacy module may then forward this communication as privacy protected communication C to profiler module where encryption module of profiler module may encrypt the cookie defining the profile data using encryption keys stored for an associated one of the subscribers in subscriber database C. Profiler module may forward this communication as secure network communication D to channel modules .

One of channel modules e.g. IP module B receives the secure network communication D and prepares the communication D for transmission over the desired channel. Continuing the assumption above that network communication A comprised an IP packet IP module B may add necessary IP headers and perform other operations to ensure delivery to a desired destination. IP module B may then forward this communication with the application layer cookie defining the anonymous profile as network communication A where one of interfaces such as interface N in the instance of may forward this communication to an intended destination device e.g. ad network A.

In this manner EAMS may securely profile a customer without invading the customer s privacy while also ensuring that other third party network participants e.g. ad networks cannot identify the customer or otherwise compromise the customer s privacy. Yet simultaneous to preserving customers privacy EAMS may provide improved advertising services such as more accurately profiling customers and providing improved anonymous targeting marketing of customers. This may improve an ad network s ability to accurately target and then serve an advertisement to these customers thereby increasing the effectiveness of the advertising and reducing the amount of irrelevant information the customer views. In this sense EAMS may act as a trusted third party that provides this service to both facilitate better advertisement services through more comprehensive or complete profiling and ensure customer s privacy is maintained. Moreover as explained in further detail below advertising agencies or other clients placing ads may utilize EAMS to aid evaluation of and selection between the numerous ad networks as well the various fee structures offered by the different ad networks.

Regardless once deployed EAMS receives shunted network communications or copies thereof from service provider network . For example one of interfaces may receive a network communication originating from a customer device such as network communication A originating from customer device A . As described above this one of interfaces may forward the communication to control unit where one of channel modules of control unit may process network communication A and forward this processed communication to profiler module as processed communication A. Profiler module may update a history or transaction log associated with customer device A that originated communication A in history database B .

Table 1 illustrates a simple example of a history log for purposes of illustration and the techniques should not be limited to this example. For example the ULR may be much more descriptive and provide additional search terms other than just price and zip code as shown in the example above. Moreover the history log may track first mile cookies included within network communications sent by customer device A as well as actions with respect to particular advertisements or other links embedded within a given URL. That is a history log may comprise entries that include one or more of a timestamp specifying a date and time the one of the advertisements was presented to the customer a type of revenue model associated with the one of the advertisements the advertisement network that sourced the one of the advertisements the one of the network destinations accessed by the customer and the first action linked to the one of the advertisements. Profiler module may therefore store any characteristic or data point associated with a given network communication to a corresponding history log including each network communication in its entirety. Typically profile module parses communication A to extract and log data relevant to ad networks and updates to history log .

While parsing communication A profiler module may determine whether this communication A includes a first mile cookie . If communication A does not include a cookie NO profiler module may next determine whether a domain or URL specified in the communication A corresponds to a subscription with EAMS . If communication A however does include a cookie YES profiler module may remove this first mile cookie and determine whether the domain or URL specified in communication A to which this cookie corresponds has a subscription with EAMS . That is profiler module may access subscriber database C using the URL as one example as a key to locate a subscriber record stored within subscriber database C.

When no ad network or network content provider corresponds to the domain i.e. no subscriber record is associated with the URL NO profiler module may forward the communication back to channel modules which may prepare communication A for forwarding over the corresponding channel and forward this communication to a corresponding one of interfaces as communication A . This one of interfaces may then forward communication A to its intended destination device e.g. one of content providers . If however a subscriber record is located within subscriber database C that corresponds to the URL YES profiler module may generate a profile based on the history log and the subscription level defined within the located subscriber record . In effect profiler module may mine the history log associated with customer device and construct a profile for the subscriber that provides the level of granularity consistent with the subscription.

The following Table 2 represents an example of a subscriber record that profiler module may access in order to determine a subscription level for a particular subscriber 

The following Table 3A represents an example of a profile generated for customer device A based on mining the example history log shown in Table 1 above for a subscriber e.g. ad network A having a subscription level of bronze 

This profile represented above in Table 3A may also include demographic information which was also mined from the example history log shown in Table 1. The following Table 3B represents the demographic portion of the same profile 

Table 4A is provided to further illustrate generation of a profile in accordance with another level of subscription which may be referred to as the silver level based on the example history log shown in Table 1 

Table 4B which illustrates the demographic portion of the profile shown with respect to Table 4A above is also provided to further illustrate generation of a profile in accordance with the silver level based on the example history log shown in Table 1 

As yet another example of a profile the following Table 5 illustrates a profile that is defined in accordance with a metric referred to as RFM which stands for Recently Frequency and Magnitude or Monetary 

A profile determined in accordance with the RFM metric may provide valuable insight into the tendencies of a given customer and provide ad networks with a way of more accurately targeting a given customer. With respect to the example profile presented in Table 5 one of ad networks may determine that the customer has greatly reduced most of his online activities over the more recent months by comparing the frequency ratios over the various time spans. Moreover this one of ad networks may determine that the magnitude has also significantly decreased recently. Based on this assessment ad network may prefer to provide advertisements that are paid for on a CPM or impression basis rather than on a CPA or an action basis as the advertiser assumes the risk or loss of revenue with respect to a CPA cost or revenue model. Again these CPM CPC and CPA revenue models are discussed in more detail below.

Notably the history logs stored to history database C may be generated on a per customer basis to accurately track individual customer behavior interests and actions over time. However EAMS may not necessarily generate profile data in the same manner and may instead generate profile data to represent composite behavior for a cluster of a plurality of customers of service provider network . As one example EAMS may generate profile data that reflects customers located within a same geographical area such as a same zip code street city or state. The cluster may also be defined to reflect customers located within a common subnet of service provider network . This clustering of customers within profile data may further enhance the anonymity of individual customers. Much as the subscription level may control the level of granularity with respect to the accuracy of the profile data so too may the subscription level of a given subscriber reflect the relative size of the clusters. In other words a gold level subscriber may receive profile data reflective of individual customers while a basic level subscriber may receive profile data reflective of a group of customers located within the same state.

In any event profiler module may after generating the profile may generate a last mile cookie based on the profile as described above and pass this last mile cookie to privacy module . Privacy module may generate a pseudonym in the manner described above e.g. by employing hash module to perform a one way hash on the MAC address included within the last mile cookie . Privacy module may then forward the network communication with the last mile cookie as privacy network communication C back to profiler module which may include encryption module to encrypt the last mile cookie in accordance with the encryption keys stored to the corresponding subscriber record within subscriber database C . After encrypting the cookie profile module may insert the last mile cookie back into the communication and forward the communication back to channel modules which may prepare communication A for forwarding over the corresponding channel and forward this communication to a corresponding one of interfaces as communication A . This one of interfaces may then forward communication A to its intended destination device e.g. one of content providers .

The above techniques related to privacy and profiling may represent a paradigm shift in terms of online advertising. Rather than profile and target ads from the last mile the techniques facilitate advertising within computer networks at the last mile. These techniques may promote consumer customer privacy while simultaneously improving application layer information collection. The profile data stored to profile database may be leveraged in a number of ways to improve ad targeting as well as the accuracy and completeness of metadata. Various uses of this data as well as other features are described below with respect to .

EAMS may be similar to EAMS described with respect to . In some instances EAMS may implement one or more of the profiling and privacy aspects of the last mile online advertising techniques described above with respect to EAMS . In particular EAMS may maintain a profile database A profile DB A similar to profile database A and a history database B history DB B similar to history database B. EAMS may generate profile data in the manner described above from history data defining the above described history logs. Unlike EAMS however EAMS may further include a correlation database A correlation DB A that stores information correlating clicks by customer devices on advertisements to various actions such as filling out a form requesting more information for a service offered in an advertisement and purchasing a product featured in an advertisement. EAMS may also include an ad network interface which may be similar to ad network interface shown in only ad network interface may be extended to provide a standard interface by which ad networks may access profile database A history database B and correlation database A.

EAMS may also include a metadata database B metadata DB B that stores metadata generated by EAMS concerning the effectiveness of various ad networks . This metadata may provide various measures by which to evaluate a given one of ad networks . For example metadata may describe the effectiveness of an ad network to reach certain target audiences such as audiences ages 20 and under 21 to 30 31 to 40 41 to 50 51 to 60 61 and up or any other conceivable sub division of target audiences including target audiences of a combination of factors. Many of these factors may be related to the demographic information collected above.

In any event EAMS may further include an agency interface by which ad agencies such as ad agencies A N ad agencies may access metadata. Agency interface may comprise an API that provides a standard interface by which ad agencies may access metadata database B. Ad agencies may interface with metadata database B to view search or otherwise mine metadata stored to metadata database B. As one example ad agencies may interface with metadata database B via interface to view the metadata in accordance with the above described RFM model such that ad agencies who contract with ad networks may evaluate trends with respect to the effectiveness of these ad networks in serving advertisements.

To illustrate the correlation and evaluation aspects of the techniques described in this disclosure consider the example of where one of customer devices of a service provider network such as customer device A issues one of network communications requesting for example additional content e.g. an advertisement from one of ad networks A. This particular communication originating from customer device A is referred to below as communication A to facilitate discussion of various communications. It is further assumed for purposes of illustration that this communication A includes a first mile cookie.

Continuing the illustrating router may route this communication A in the manner described above through EAMS and EAMS may update history database B to track communication A in the manner described above. EAMS may replace the first mile cookie with a last mile cookie which again is consistent with the description of EAMS above. EAMS forwards this altered communication back to router as communication B which in turn forwards communication B to one of ad networks such as ad network A.

Ad network A may select an advertisement based on the last mile cookie included within communication B as described above. Alternatively ad network N may access profile database A via ad network interface to retrieve the profile data stored for customer device A. In these alternative embodiments EAMS may be acting as a proxy and may establish a session with ad network N on behalf of customer device A to request the advertisement. EAMS may use a unique port number for each of customer devices A and may map this port number to profiles stored to profile database A . Ad network A may then request a profile using the port number specified in network communication B and EAMS may return the profile associated with this port number to ad network A. EAMS may randomly assign this port number for each session it uses on behalf of customer device A and update its mapping to reflect the change in port number. This port mapping scheme may further mask an address or more generally identity statically assigned to customer device A. In any event ad network A may select an advertisement based on profile data either as defined by the last mile cookie included within communication B or as retrieved from profile database B via ad network interface .

Ad network A may then generate a response network communication C that includes the selected advertisement which router may again forward to EAMS . EAMS may track this communication C within history database B . EAMS may correlate this communication with customer device A again by way of the port number on which communication C was received. Thus history logs stored to history database B may also be mapped to port numbers. EAMS may then forward this response C back to customer device A via router . Customer device A may render the advertisement and a customer operating customer device A may click on or otherwise select the advertisement causing customer device A to issue a one of network communications that requests content associated with an advertiser sponsoring the advertisement e.g. one of content providers . As with network communications reference to individual ones of communications may be denoted as communications A B and so on for purposes of facilitating the discussion of these communications . Router once again forwards this one of communication communication A to EAMS which in turn updates history database B and profile database A . EAMS may further correlate the selection of the advertisement e.g. communication A to the response communication C that served the selected advertisement.

EAMS may then forward this communication A to router which in turn forwards communication A to the one of content providers that sponsored the advertisement. This one of content providers may return content regarding the subject of the advertisement such as an offer to buy a product e.g. an item good or service an offer to receive additional information or any other content that denotes a measurable action. This one of content providers may return the content via a response network communication B. EAMS may receive communication B from router and track this communication within history database B and possibly update profile database B to reflect the potential for an action by customer device A. EAMS may also update correlation database A to correlate this service of the content that may enable an action in response to an advertisement. EAMS may then forward communication B back to customer device A via router .

While described above as tracking each and every action with respect to a given customer device A EAMS may implement the techniques to track various types of network communications such as those network communications that indicate an ad has been selected and those network communications indicating an action has been taken e.g. a customer has directed customer device A to purchase a particular product. By reducing the scope of the tracking less storage space may be required within history database B . Moreover the reducing in the scope of the tracking may reduce use of computational resources required to track every single communication. EAMS may be configurable with respect to the scope time frame and granularity of the tracking where for example a network administrator may configure EAMS to track particular messages for select services over a set time frame such as a sliding one month or one year window.

Returning to the above illustration it is assumed again for purposes of illustration that the customer decides not to commit to any action with respect to this content and instead the customer directs customer device A to browse other sites looking possibly for a better deal or other advertisements regarding competing products goods or services to the products goods or services offered in the served advertisement. If at this point ad network A decided to source which may be used herein interchangeably with place this advertisement under a CPA revenue model ad network A only receives ad revenue if customer completes an action or transaction associated with product featured in the advertisement. If ad network A decided to service this advertisement under either a CPC or CPM revenue model ad network A would have received ad revenue for the customer directing customer device A to select or click the advertisement under the CPC revenue model or for merely placing the advertisement to be rendered by customer device A under the CPM revenue model .

Considering that commitment to an action by customer device A typically occurs much less than impressions and clicks and that such actions provide the most revenue for advertiser A N e.g. due to the customer actually purchasing the advertised product the advertisers typically pay a higher cost for ads sourced under the CPA revenue model. Moreover in the CPA model ad networks A assume the risk of a consumer choosing to ignore the advertisement and thus expect to be compensated more for assuming this risk. Thus improving the capture rate or effectiveness of placing advertisements under the CPA model may therefore greatly improve ad revenues for ad networks . Considering the more comprehensive information provided by profile data that details a customer s behavior interests and actions across varying channels time horizons and domains ad networks A may better gauge under which revenue model e.g. CPM CPC CPA to serve a particular advertisement. In this respect the techniques described in this disclosure may enable ad networks to increase ad revenue by more accurately gauging the amount and accuracy of profiling information for a given customer as well as where a customer lies with respect to his level of commitment to a particular product.

For example EAMS may correlate ad placements by ad networks with customers and determine a number of times a given customer has seen an advertisement for this product. EAMS may also analyze the profile data for this customer so as to identify any trends with respect to the customer s behavior interests and actions indicative of a level of interest. EAMS may locate where this interest lies with respect to an Awareness Intent Desire and Action AIDA model. EAMS may then update the profile for this customer or associated one of customer devices to be more precise to include this interest level as preference data. As the history log for this customer may more accurately track this customer s action across multiple channels or services EAMS may more accurately identify this interest level and its relationship to the AIDA model.

Based on this preference data defining the interest level ad networks may then more accurately determine in real time whether to source advertisements that are contracted under the CPM CPC or CPA revenue model. To illustrate in response to receiving a request having a cookie containing a profile that specifies preference data defining an interest level that suggests the customer is in the range of awareness in the AIDA model ad networks may select to source an advertisement under the CPM revenue model. In response to receiving a cookie from EAMS in which the profile data suggest an interest level as defined by preference data for the customer in the range of intent in the AIDA model ad networks may select to source an advertisement under the CPC revenue model. In response to receiving an interest level suggesting the customer is in the range of desire or action in the AIDA model ad networks may select to source an advertisement under the CPA revenue model. This level of interest with respect to the AIDA model may be updated with respect to each category sub category and niche if available to the particular subscriber within the profile data. The high level of visibility provided by history database B may therefore enable EAMS to more accurately identify this interest level and promote more efficient ad placement with respect to the various ad placement revenue models.

In some instances rather than include this interest level within the profile communicated in a cookie EAMS may perform the above data mining of profile and history databases A B in response to a request from one of ad network via ad network interface . EAMS may in addition to determining the interest level evaluate the interest with respect to various ad revenue models and recommend one of the ad revenue models with respect to a given advertisement this one of ad networks would like to serve or at least with respect to particular keywords or other references by which to evaluate the level of interest. Ad networks may then receive this recommendation and source a given advertisement based on this recommendation.

This correlation aspect of the technique may also enable ad networks to provide a CPA infrastructure to those of content providers where advertisements placed under the CPA revenue model are typically ineffective. For example any of content providers that lack or do not provide a check out or e commerce application may be unable to successfully track purchase actions. Consequently ad networks may not correlate advertisement clicks or selections with a purchase action when the advertisement is presented via these content providers even though the customer may purchase the item after clicking on the advertisement from a different content provider. As a result ad networks may not source CPA advertisements for these content providers .

Continuing the example above where the customer directed customer device A not to commit to the action to illustrate how the CPA infrastructure provided by EAMS may enable CPA for these content providers it is assumed that at some later point after the customer decided not to commit that the customer directed customer device A to traverse to a different one of content providers that provided the same product good or service offered in the advertisement. To illustrate why a customer may have elected not to commit consider that the advertisement may have offered the customer a 10 percent discount on a particular software product available for purchase at a first one of content providers . The consumer may have searched content providers to locate a competing merchant or reseller and purchased the same software product at an even lower discount from a second one of content providers operated by the competing merchant or reseller . Yet in this instance the advertiser most likely does not care whether the consumer purchased at the first or second one of content providers however this potential action may be lost to both the content provider that initially hosted the advertisement and the ad network that sourced the advertisement.

Unlike conventional first mile cookies that typically are not transferable between domains and therefore may be limited with respect to tracking actions that do not directly follow an ad click EAMS may track this purchase despite the potentially different domains and update history database B to reflect this action. EAMS may moreover correlate this purchase with the previous selection of the advertisement and inform ad network A of this action via ad network interface . As a result of overcoming this limitation of first mile cookies content providers that are typically not effective candidates for hosting CPA advertisements may host ads under the CPA revenue model and ad agencies may increase ad revenues by dispersing more ads under the CPA revenue model.

To restate this correlation aspect in other words router may receive a first network communication from customer device A where the communication includes a URL specifying one of the advertisements sourced by one of advertisement networks e.g. ad network A. Router forwards this first network communication to EAMS where profiler module logs this communication to a history log stored within history database B for customer device A to indicate that the particular advertisement has been sourced to the customer.

Router may then receive a second network communication from customer device A indicating that the previously received advertisement has now been selected by e.g. clicked on a customer operating customer device A. Since the customer has clicked on the advertisement this second network communication typically request content from one of the content providers referred to above e.g. a web page for purchasing a product. In other words this requested content sourced by the content provider typically includes description of the advertised product and allows the customer to take an action e.g. effect a purchase with respect to the product as required under a CPA revenue model. Router forwards this second network communication to EAMS where profiler module logs this communication to the same history log within history database B as before to indicate that the customer has been presented with the product description and content necessary for taking the requisite action.

In the event the customer chooses to complete the purchase of the advertised product after clicking on the advertisement EAMS receives communications indicative of the action and updates history database B accordingly. However the customer may choose not to perform the action at that time but rather may return at a subsequent time possible using a different communication session to view and purchase the product. In this case router may receive a third network communication at some subsequent time indicating that the customer committed to the action possibly using a different communication session with a different content provider. Consequently without EAMS and correlation layer C ad network A may not otherwise be able to collect any ad revenue through the presentation of the advertisement under the CPA ad revenue model considering that action i.e. purchase may not have been easily traceable to the presented advertisement.

However in accordance with the techniques described in this disclosure router forwards this third communication to EAMS where profiler module logs this communication to the same history log within history database B as before. EAMS then correlates the first second and third network communications to identify instances when the customer selects the one of the advertisements and does not immediately take the requisite action with respect to the product but instead commits to the action at some later time possibly using a different communication session with a different content provider. Thus this correlation aspect may allow ad networks to more accurately capture ad revenue.

Accordingly the correlation aspect of the last mile online advertising techniques may more effectively correlate customer actions with advertisements and may thereby improve the capture rate of CPA related revenues for ad networks . In effect this aspect of the techniques may reduce risk associated with ads served under the CPA revenue model by leveraging the increased visibility of customer actions provided through tracking customer actions at the last mile rather than the first mile.

This increased visibility provided by profile database A and history database B may also be leveraged to generate metadata defining the effectiveness of these various ad networks . EAMS may mine history database B and to expose various trends with respect to ad networks and then segment these trends into target groups using profile data stored to database A that defines demographic information. To then evaluate effectiveness of various advertisements within these groups EAMS may mine correlation database B to expose correlations between selection of an advertisement and a following action even if that actions spans domains e.g. website or in some instances channels as last mile data collection is not limited in these respects for the reasons described above.

Upon generating metadata in this nature and storing this metadata to metadata database B EAMS may expose agency interface to ad agencies . Ad agencies may develop an advertisement for a targeted group or audience and interface with metadata database B via agency interface to determine the most effective one of ad networks for placing the advertisement or particular versions of the advertisements to reach the targeted audience. For example ad agency A may develop a first version of an advertisement for CPC revenue models and a second version for a CPA revenue model. Ad agency A may then access metadata database B to determine which of ad networks are most effective in placing the first version with respect to a target group and most effective in placing the second version with respect to the target group as competing ad networks may employ different decision making processes with respect to serving or otherwise placing an advertisement for the CPC and CPA related advertisements. Given access to this information ad agencies A may more effectively pursue a cost benefit analysis to select one or more of ad networks with which to place various versions of the advertisements. In some instances EAMS may even perform this cost benefit analysis for ad agencies assuming costs are provided either by ad networks or ad agencies .

In both aspects of the last mile online advertising techniques EAMS leverages the improved visibility provided by profile and history databases A and B . By leveraging these databases in this manner EAMS may improve ad revenues for ad networks through more accurate correlation while also improving the accuracy of cost benefit analysis performed by ad agencies through more accurate evaluation of ad networks performance.

Control unit of EAMS similar to control unit includes a content delivery layer A and condensation layer B where condensation layer B includes a similar profiler module . Profiler module may update history database B to track selections of advertisements by customer devices and actions committed to or transactions completed by customer devices . Profiler module may also update profile data stored to profile database A as described above with respect to profiler module by mining history database B .

However unlike EAMS control unit of EAMS includes correlation layer D. Correlation layer D includes a click correlation module and an evaluation module . Correlation layer D may generally correlate network requests from customers to purchase goods or services from content providers with any of the electronic advertisements previously presented to the customers by ad networks . Correlation layer D may also generally evaluate the correlation to determine an effectiveness of each of these advertisements typically on the aggregate with respect to advertisements sourced by each of the different ones of ad networks .

Click correlation module may mine or otherwise traverse history database B to identify correlations between advertisement selections or clicks and successive actions. Correlation module may generate correlation data that defines these correlations and stores these correlations to correlation database A. Evaluation module may represent a module that evaluates the effectiveness of various advertisements sourced by ad networks . Evaluation module may store data defining this effectiveness to metadata database B. This evaluation or effectiveness data may be referred to as metadata insomuch that this metadata represent data concerning other data.

Next click correlation module determines whether this selection is associated with the selection of an advertisement by comparing the parsed URL with a URLs stored to the history log associated with customer device A in history database B . By traversing the history log in this manner click correlation module may in effect determine whether the parsed URL from the communication correlates with an URL provided by an advertisement. For example an advertisement for a product may provide a URL that links the advertisement to a webpage provided by one of content providers for that product. If an ad is selected e.g. the URL is correlated with another URL provided by the advertisement YES click correlation module updates the history log for the associated customer in history database B to reflect the selection of the ad and forwards this network communication to its intended destination e.g. one of content providers and or ad networks .

If not indicative of a selection of an advertisement e.g. click correlation module did not correlate the parsed URL with a URL provided by a previously presented advertisement NO click correlation module next correlates the URL associated with the selection to the history log to determine whether the URL is indicative of an action being monitored . Click correlation module may perform this correlation while attempting to correlate the URL to determine whether an ad was selected or may perform this correlation as a separate step. In any event click correlation module may for example determine whether the URL text identifies a purchase of a particular product as identified as a product code or serial number an email text entry field or any text indicative of an action.

If the communication does not indicate or otherwise relate to a monitored action NO click correlation module may forward this network communication to its intended destination e.g. one of content providers and or ad networks . Assuming that click correlation module determines that the URL does reflect a monitored action YES click correlation module may attempt to correlate this action with a previously presented ad based on the history log . By virtue of profiler module maintaining a comprehensive transactional record or log of at least each ad selection over time e.g. between different sessions between channels across domains click correlation module may determine correlation between ad selections and subsequent action that span time sessions channels and domains contrary to tracking enabled by conventional first mile cookies. Click correlation module may return as described above any previous ad selection that correlate with the current selection of the action and based on the results of this correlation evaluation module may determine whether the correlation was successful .

If for example no results are returned by click correlation module evaluation module may determine that the correlation was unsuccessful and forward the network communication to its intended destination NO . However if at least one result is returned indicating a correlation between an previously presented advertisement and the selection of an action evaluation module may update the history log stored in history database B for the one of customer devices A that originated the communication inform the one of ad networks that placed or sourced the advertisement of the ads success for billing purposes and update metadata stored to metadata database B for this one of ad networks to reflect the success of the advertisement . Evaluation module may then forward the network communication to its intended destination .

Evaluation module within control unit of EAMS shown in may receive this request and parse this request to extract the advertisement information . Evaluation module may then evaluate profile data stored within profile database B for this customer to assess a level of interest with respect to the advertisement information provided by way of the request . Evaluation module may identify the customer as one example by the customer s pseudonym or in the event EAMS acts as a content proxy by way of a port number which ad network A may specify in the request. In any event based on this evaluation of the customer s profile data versus the advertisement information evaluation module may determine in real time a level of interest and then as described above place this level of interest within the AIDA model . Evaluation module may then select one of a plurality of revenue models e.g. one of the CPM CPC or CPA revenue models based on the placement of the determined level of interest within the AIDA model .

After selecting this revenue model evaluation module may generate a response defining the selected revenue model and forward this response to ad network A via the API . Ad network A may receive this response via the API and source the advertisement selected in the manner described above under the revenue model defined by the response .

Notably the above process may be carried out dynamically and possibly in real time where real time may be defined as occurring in a span of time having low latency after the ad network has received a request to source an advertisement to a customer. In addition many if not all aspects of the techniques described in this disclosure may be implemented dynamically and possibly in real time including the above described profiling and privacy aspects the above described correlation and evaluation aspects and mass customization and ad sourcing aspects described below.

This recommendation may as described above result in the ad networks potentially realizing more ad revenue. As a part of providing this service the various parties or entities that enable or otherwise participate in this recommendation service may negotiation revenue splitting agreements by which to split this increased ad revenue. In one example the notation may result in splitting of revenue between an entity that maintains the service provider network an entity that maintains the EAMS to provide analytics and recommend the optimal revenue model in real time and the advertising network sourcing the electronic advertisements.

EAMS may include a content provider interface and an agency interface . Content provider interface may represent an Application Programmers Interface API with which content providers may interact to upload delete edit and otherwise manage inventory stored within an inventory database A inventory DB A . Inventory may refer to available advertisement space within content provided by content providers . Content providers may with respect to these aspects of the techniques comprise providers of a wide variety of content including data or Internet content such as webpages but also video content such as IPTV content that may be provided by traditional brick and mortar television companies e.g. National Broadcast Company or NBC voice content that may be provided via VoIP services from a VoIP content provider and mobile content e.g. text or Short Media Service SMS messages provided by mobile service providers e.g. AT T Corporation .

Inventory may therefore refer to ad space within any number of contexts. For example inventory may refer to an available ad slot in for example an IPTV video stream. Additionally inventory may refer to an available ad space within a webpage or on a web site. Inventory may further refer to available ad space within digital newspapers downloaded by electronic reading devices so called e readers . Inventory may also refer to available ad space or slots within VoIP applications video conferencing application where the ad space may be displayed by these applications during the voice call or alongside a video conference stream.

Agency interface may be similar to agency interface shown with respect to only extended to enable ad agencies to upload edit delete alter or otherwise manage advertisements stored within ad database B ad DB B . Ad agencies may contract with the owner and operator of EAMS to provide these advertisements and EAMS may match advertisements stored to ad database B with inventory stored to inventory database A. EAMS may leverage the above profiling privacy correlation and metadata aspects of the techniques described above to select suitable ads based on a customer s profile determining a suitable revenue model by which to place this selected ad and source the advertisement in response to requests from customer devices .

With respect to the metadata aspects EAMS may employ the same techniques to collect metadata as described above only evaluate the effectiveness for placement of various ads with respect to various inventory from content providers rather than ad networks . This shift in perspective from content providers to ad networks may occur as a result monitoring communications at the last mile rather than the first mile. In other words EAMS may monitor all operations of customer devices across both domains and even channels over various time horizons and correlate these actions to provide a comprehensive profile that is not limited to particular ad networks or domains. Consequently EAMS may generate metadata concerning the effectiveness of placing ads with respect to inventory from each of content providers and may adapt the matching of advertisements to inventory based on this metadata. This form of feedback based evaluation using metadata may enable EAMS to optimize ad placement to improve the effectiveness of advertisements for ad agencies and ultimately advertisers .

Moreover EAMS via agency interface may enable ad agencies to define mass customizable advertisements that comprise an advertisement template that can be dynamically populated by EAMS with template data to adapt the advertisement to more effectively target a particular customer. Ad agencies may define this advertisement template via agency interface and define customizable template regions. To define a customizable template region ad agencies may identify as one example a marketing category to which this customizable template region relates a type of advertisement that may be used to customize the template region e.g. an discount offer a brand impression and a limited time offer a list of products or services for which the advertiser wishes to advertise and any other type of factor that may be used to define a scope of the customizable template region. After defining this mass customizable advertisement as a form of advertisement template ad agencies may next specify the template data that may be inserted into the customizable template regions via agency interface . This template data may be tagged with keywords or other information to enable EAMS to properly populate customizable template regions. Ad database B may store this mass customizable advertisement as both the advertisement template and the associated template data.

Upon matching one of these mass customizable advertisements to a particular inventory in response to a request for an advertisement from customer device A EAMS may dynamically select one of the various template data based on profile data and history logs stored to profile database A and history database B respectively. EAMS may for example inspect the tags associated with each of the various template data associated with the advertisement template and select one of these template data whose associated tags correspond with a high interest category within the profile data for this one of customer devices . EAMS may then populate the one or more customizable template regions with the selected one or more of the template data and return this customized advertisement to the requesting one of customer devices . In this sense EAMS may customize the content of advertisements to fit rather than merely select an advertisement that fits an determined targeted group in which the requesting one of customer devices resides.

Agency interface may further enable ad agencies to source advertisements across channels or services through a single interface. Due to the convergence of networks described above EAMS may access a plurality of channels and provide more comprehensive profiling as a result. As a result of this access EAMS may also source advertisement across these channels to potentially provide an increase in advertising opportunities. Moreover the single interface may reduce much of the overhead ad agencies s maintain with respect to managing multiple ad networks and content providers. Instead ad agencies may interface with a single agency interface to place advertisements across channels.

As a further result of this cross channel access EAMS source ads in a variety of different ways not typically achieved in first mile advertising. For example EAMS may monitor customer behavior via a profile and set triggers or other levels within the profile. These triggers may trigger when a particular level of interest in any one category rises above a set level such as a level associated with the intent range or action range within the AIDA model. Upon activation of this trigger EAMS may correlate the trigger with the history log for this customer to generate correlation data and evaluate this correlation data to identify various products items services or goods that may have gave rise to the activation of the trigger. EAMS may then automatically without any user or other operator input source an offer advertisement via a text message to the customer s mobile phone which may be represented as customer device B. As an aside EAMS may source this ad under one of the CPA revenue model as this trigger may identify the intent or action level of interest that translates to the CPA revenue model.

In some instances this advertisement text message may include a barcode that the customer may use when purchasing the product good item or service from a physical store. Scanning the barcode may trigger this one of content providers to upload the action to EAMS via content provider interface as the barcode may identify the advertisement network that sourced the ad which in this case is the advertising network maintained by EAMS .

As another way in which EAMS may source advertisements EAMS may source advertisements by way of an email to a customer s email address in response to a trigger. As yet another way EAMS may indirectly source advertisements by communicating the trigger to agency interface which may then decide to issue a mail advertisement to the particular customer if the customer s address is known or via telemarketing if the customer s phone number is known . The actions with respect to email advertisements may be captured by EAMS as EAMS monitors online communications. If the customer prints the email such as the case may be when the email comprises a coupon or in response to mail advertisements content providers may report the use of the coupon via content provider interface and thereby permit EAMS to capture this action for billing purposes.

Notably these forms of more invasive advertising may require authorization from the customer before being permitted. In some instances EAMS may provide for granular authorization which may enable the customer to tailor advertising to meet the customer s privacy tolerance levels. Often this tolerance is set by service provider network through contractual obligations. In any event EAMS may provide for tailored authorization such that as one example the forms of more invasive advertising are only allowed when interest levels reach a very high level or if the user has opted into or otherwise joined special programs offered by the service provider network where tolerance of these forms of more invasive advertising are rewarded with reduced payments or other incentives with regard to the services provided by service provider network as just a couple of examples.

Control unit of EAMS includes a similar content delivery layer A and condensation layer B to those of control unit of EAMS where condensation layer B may include a similar profiler module which is not shown in for ease of illustration purposes . Profiler module may update history database B to track selections of advertisements by customer devices and actions committed to or transaction completed by customer devices . Profiler module may also update profile data stored to profile database A as described above by mining history database B .

Control unit may also include a correlation layer D which although not shown in for ease of illustration purposes may include a similar correlation module and a similar evaluation module as correlation layer D shown in . These two modules and 102 may maintain similar correlation database A and metadata database B .

However unlike EAMS or for that matter EAMS control unit of EAMS also includes an ad services layer E. Ad services layer E includes an inventory management module an ad management module and an ad sourcing module . Ad services layer E may generally provide ad services by which content providers may define and manage inventory and ad agencies may define and manage advertisements. Ad services layer E may also evaluate the correlation to determine an effectiveness of each of these advertisements typically on the aggregate with respect to content providers . Ad services layer E may further provide for the automated and adaptive placement of advertisements through ad to inventory matching that leverages profile database A history database C correlation database A and metadata database B .

Inventory management module may represent a hardware and or software module that provides content provider interface which is shown as interface in by which content providers may interface with inventory database A. Ad management module may represent a hardware and or software module that provides agency interface by which ad agencies may interface with ad database B. Ad sourcing module may represent a hardware and or software module that sources ads by in some instances matching ads to inventory and in other instances responding to triggers set within profile database to source advertisements possibly in a cross channel manner as described above.

Meanwhile an ad management module of control unit may receive input via agency interface another API which is represented in as agency interface where this input defines a mass customizable advertisement in the manner described above . Ad management module may store data defining this entered mass customizable advertisement to ad database B. This form of advertisement may be referred to as mass customizable in that the advertisement template for this form of advertisement may comprise customizable template regions that ad placement module may customize in a large number of ways to suit a large number of target customers.

After storing inventory and at least this mass customizable advertisement EAMS may receive via one of network interfaces a network communication requesting an advertisement as EAMS is acting as a last mile ad network in this example . A last mile ad network may provide advertisements with lower latency while also more accurately profiling customer devices in the manner described above. In any event ad sourcing module within control unit of EAMS may receive this communication and adaptively match an advertisement stored to ad database B to the inventory identified in the advertisement request .

For example customer device A may request a webpage for example from content provider A that includes a reference to an available ad space. This available ad space may be assigned a unique identifier by inventory management module when storing this inventory to inventory database A. Inventory management module may return this identifier to content provider A which may then embed this identifier in the webpage such that a web browser executing on customer device A may pass this identifier corresponding to this inventory to the ad network or in this case EAMS . Ad sourcing module may receive this identifier access the inventory identified by this identifier in inventory database A and retrieve any keywords or other context information concnering the identified inventory. Ad sourcing module may utilize these keywords as well as access a profile for customer device A within profile database A and adaptively select one of advertisements for this particular inventory based on the keywords and other profile data. In this manner ad sourcing module may adaptively match an advertisement to inventory identified in the communication .

Ad sourcing module may further determine whether the selected advertisement is customizable or comprises a mass customizable advertisement . Mass customizable advertisements may be denoted within advertisement database with a flag or other distinguishing mark. If customizable YES ad sourcing module may select template data associated with the mass customizable advertisement based on the retrieved profile data for customer device A as described above . Ad sourcing module may then generate an advertisement from the advertisement template of the mass customizable advertisement by populating the customizable template regions of the advertisement template with the selected template data again as described above .

Whether customizable or not NO ad sourcing module may then in some instances determine a type of placement for the advertisement . That is ad sourcing module may determine under what revenue model to place or source the advertisement typically by selecting between the CPM CPC and CPA revenue module based on a level of interest with respect to the various regions of the AIDA model as described above. After selecting this type of placement or ad revenue model ad sourcing module may return the matched advertisement under the determined placement or revenue model .

Profile module may in this instance continue to distill or otherwise consolidate history logs into profiles to monitor an interest of customers operating customer devices in various categories as described above. When updating these profiles profile module compare this interest level in each category to the triggers which may represent benchmark levels of interest to determine if the trigger has been triggered . If the interest level does not exceed the trigger NO profile module may continue monitoring customer devices interest levels with respect to the above described categories and determining whether the triggers have been triggered . If the level of interest for a particular category and possibly within a set duration e.g. a week exceeds a trigger level profile module may determine the trigger is triggered YES which may cause profile module to forward the communication that triggered the trigger to correlation module included within correlation layer D of control unit but not shown in for ease of illustration purposes.

Correlation module may determine correlation data for the trigger by determining a correlation between the last communication that caused the trigger and subsequent communications that may be correlated with this last communication . Correlation module may store this information to correlation database A or otherwise make this information available to ad sourcing module . Ad sourcing module may also then access this correlation information for the trigger within correlation database B and identify a nexus of interest based on this correlation information . For example ad sourcing module may parse the correlation data looking for repeated references in the correlation data to similar product names product types serial numbers product numbers price ranges categories or any other identifiable characteristic for which an advertisement may be targeted. Ad sourcing module may identify one or more of these nexuses of interest.

Ad sourcing module may then determine an advertisement that targets the one or more nexuses of interest . Ad sourcing module may next source the determined advertisement by forwarding the advertisement to the associated one of customer devices for which the trigger was triggered . Often ad sourcing module may source the advertisement across channels in that ad sourcing module may detect this interest via a number of different channels although primarily through a first channel such as a data channel but then source the advertisement through a channel other than the first channel such as a mobile channel or email channel or even a standard mail channel as described above. This form of cross channel advertising is enabled as a result of EAMS being located at the last mile rather than the first mile.

As further shown in the example of network system includes a plurality of EAMS A N EAMSes where each of EAMSes couples to a respective one of routers . Each of EAMSes also includes a cache . In this instance EAMSes are each assumed to operate as content proxies that cache content to respective ones of caches in the manner described above. Moreover EAMSes may operate caches as a large distributive cache in that EAMSes may only cache content not cached to any other one of caches . When a request for content is received by one of EAMSes this one of EAMSes may first determine whether the content is cached locally in its cache . If not cached locally this one of EAMSes may issue a query requesting the content from those of EAMSes proximate to the one of EAMSes issuing the request those of EAMSes that this one of EAMSes has learned as having the fastest response times to the query or all of EAMSes . Typically distributive caches like that provided by EAMSes may return content faster than a query to content providers for the content. Commonly when caching content EAMSes are also acting as content proxies and therefore EAMSes are shown in as including proxy modules proxies . Proxy modules may perform the proxy functionality described above.

In any event network system may also include a plurality of Data Management Systems DMS A N DMSes located remote from service provider networks . DMSes manage the databases described above with respect to the various embodiments of EAMS and 12 . In effect DMSes provide a central repository that is accessible by ad networks ad agencies A N ad agencies and content providers . EAMSes may in this distributive version of the last mile online advertising techniques may parse the network communications over the various channels between customer devices and content providers ad networks . However EAMSes in this distributive instance may then forward the parsed information as history streams A N history streams to DMSes which may store this information to a history database similar to those described above. DMSes may also include a profiler module similar to the profiler modules described above to condense the history logs formed from history streams N.

In effect distributed EAMSes may act as probes that provide last mile monitoring and data collection for upload as history steams to DMSes . DMSes may then profile large numbers of customers by monitoring the actions of customer devices thereby enabling ad networks and ad agencies to determine trends among different geographical areas. Moreover the large set of data may provide for more accurate targeting with less error due to the size of the sample. In any event DMSes may implement many of the aspects of the techniques described above with respect to EAMSes although EAMSes may still strip first mile cookies from the communications to preserve the identity of customer devices .

For example DMSes may distill or otherwise condense the history logs maintained for each of customer devices into profiles. To retrieve a profile ad networks may interface with one or more of DMSes to retrieve the profile in the manner described above with respect to EAMS . DMSes may also correlate clicks within the history logs with actions so as to support the CPA infrastructure and enable ad networks to offer this CPA revenue model to ad agencies even though content providers may not support e commerce or other action tracking mechanisms again as described above with respect to EAMS . DMSes may maintain a correlation database to store data related to these correlations much as described above with respect to EAMS . DMSes may also generate metadata from this correlation data and maintain a metadata database similar to that described above with respect to EAMS . DMSes may expose an API similar to interface described with respect to EAMS with which ad agencies may interface to access this metadata. DMSes may also provide recommendations to ad networks recommending a particular ad revenue model under which to place an ad in response to a request for the ad by one of customer devices . DMSes may further as another example act as a large automated ad network that dynamically performs many of the above aspects to automatically serve advertisements on behalf of ad agencies as described above with respect to EAMS .

In some instances DMSes may support additional services such as real time feeds of customer traffic. While any single one of EAMSes may offer this same service the smaller scale of a single EAMS providing data concerning a small number of customer devices may not be as useful. DMSes may provide this real time streaming feed by correlating history streams and providing this as a single stream to subscribers. DMSes may offer this subscriptions at varying levels where in one example the levels provide real time level feeds similar to real time level stock feeds or 15 minute delayed feeds. In another example these levels may vary by geographic location. In this respect DMSes may act as a Content Mediation Center CMC that mediates the delivery of information from sources to destinations.

With respect to the example of the combination of EAMSes and DMSes may represent a service provider of service providers. That is EAMSes may operate to provide privacy for customers of a number of service provides thereby acting as a privacy service provider for service providers. In addition this combination may also act as a service provider for ad networks content providers and ad agencies as well as acting as a stand alone ad network comparable to and possibly more effective than ad networks as this combination may more accurately profile and thereby target customers. Moreover given that EAMSes may be inserted anywhere within the network this combination may easily scale to encompass customer devices on a global scale enabling a comprehensive profiling of every data consumer. This level of profiling may facilitate targeted advertising on an individual device basis while also enabling global consumer trend analysis.

As shown in router includes a control unit that comprises a routing engine and a forwarding engine . Control unit may comprise one or more processors Application Specific Integrated Circuits ASICs integrated circuits or any other processing or control unit or element or combination thereof and a memory or storage device. In some instances the memory or storage device e.g. generally a computer readable storage medium may comprise the above described instruction that cause the programmable processor to perform the functions described below.

Routing engine may generally update routing information or link information stored within a database shown in as Routing Information Base RIB to accurately reflect the topology of the network and other entities. In accordance with routing information stored in RIB forwarding engine may maintain forwarding information within FIB that associates network destinations with specific next hops and corresponding interfaces ports. Routing engine may install the determined path in forwarding engine such that forwarding engine may maintain FIB in this manner.

Router further includes a set of interface cards IFCs A N IFCs for communicating packets via inbound links A N inbound links and outbound links A N outbound links . Router may also include an Edge advertisment management system EAMS service card EAMS service card . Each of IFCs and EAMS service card couple to and communicate with control unit via switch . Switch may comprise any communication medium capable of communicatively coupling one or more endpoints e.g. IFCs control unit and security card . Forwarding engine may receive packets forwarded via switch from IFCs and forward those packets via switch and IFCs on outbound links according to forwarding information stored to FIB . In this manner forwarding engine provides the forwarding functionality of router . EAMS service card may represent a blade or other card that when coupled to control unit may implement the various aspects of the techniques described above with respect to EAMSes and one of EAMSes .

To illustrate router may receive the packets or more generally network traffic arriving via incoming links whereupon IFCs may forward those packets via switch to forwarding engine . Routing engine may flag within FIB all routes or only a portion of those routes corresponding to all of the traffic or only a portion of this traffic for interception and subsequent forwarding by forwarding engine . Forwarding engine may therefore maintain information requiring that packets associated with particular flows as one example should be first sent to EAMS service card prior to forwarding those packets via IFCs and a corresponding one of outbound links .

Forwarding engine may then forward these packets to EAMS service card for processing or servicing in the manner described above. After servicing EAMS service card may forward the packets back to forwarding engine via switch whereupon forwarding engine forwards the packets via one of IFCs and a corresponding one of outbound links associated with the determined path.

EAMS service card may therefore comprise any card or other removable processing unit that may be inserted into a slot. EAMS service card may once inserted into the slot interface with switch whereby EAMS service card may receive service e.g. implement one or more of the above described aspects of the last mile online advertising techniques described above and forward packets. In this manner any network device may implement the last mile online advertising techniques described herein.

Various embodiments of the invention have been described. These and other embodiments are within the scope of the following claims.

