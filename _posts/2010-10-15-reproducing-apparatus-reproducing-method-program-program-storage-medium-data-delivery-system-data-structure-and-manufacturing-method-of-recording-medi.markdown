---

title: Reproducing apparatus, reproducing method, program, program storage medium, data delivery system, data structure, and manufacturing method of recording medium
abstract: The present invention relates to a reproducing apparatus, a reproducing method, a program, a program storage medium, a data delivery system, a data structure, and a manufacturing method of a recording medium for easily handling a content file recorded on a disk and an update file recorded on a local storage. Downloaded data can be handled with a file having a path name and a file name on the local storage being different from a file having a path name and a file name on a virtual file system based on a path name specified by an src_file_name field of and a path name specified by a dst_file_name field of a manifest ( ) section. The present invention is applicable to reproducing apparatuses.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08768987&OS=08768987&RS=08768987
owner: Sony Corporation
number: 08768987
owner_city: Tokyo
owner_country: JP
publication_date: 20101015
---
This application is a Continuation of and is based upon and claims the benefit of priority under 35 U.S.C. 120 for U.S. Ser. No. 11 587 094 filed Oct. 20 2006 which is a National Stage of PCT JP06 305395 filed Mar. 17 2006.

The present invention relates to a reproducing apparatus a reproducing method a program a program storage medium a data delivery system a data structure and a manufacturing method of a recording medium. More specifically the present invention relates to a reproducing apparatus a reproducing method a program a program storage medium a data delivery system a data structure and a manufacturing method of a recording medium for appropriately downloading an update file of a content already recorded on a recording medium.

DVD digital versatile disk video format is one of playback only standards of digital versatile disks DVDs . In the DVD video format content data such as video and audio is multiplexed with data of a variety of sub pictures including caption and is recorded in a program stream on a disk. Navigation data is also recorded on the disk to reproduce interactively the stream.

In interactive reproduction data is reproduced at a desired position or in a desired order. In the interactive reproduction users can use a variety of functions of DVD. The available functions include a multi angle function in which videos captured at various angles are reproduced a multi language function in which data is reproduced in a desired language selected from a plurality of languages a parental control function in which a particular scene such as a scene of violence is prevented from being reproduced.

A program stream can be produced by multiplexing a plurality of audio streams and a plurality of caption data streams. If data of different languages is thus recorded for one video content such as a movie on a single disk a user can select voice and caption of a desirable language at the beginning of or during video reproduction.

Patent Document 1 discloses a system that allows a user to easily download a content as a video work including sound effects moving image and still image. Patent Document 2 discloses a technique that allows a portion of entire music data to be replaced with another data.

For example if a disk having a movie content with English caption only is purchased the user can display the English caption pre recorded on the disk. To view the same movie content with another desired language different from the pre recorded language the user needs to purchase a different disk with caption information of the other desired language.

To sell disks of a movie content in countries of different languages a seller of the disks need to prepare disks with different caption information or a plurality of types of disks such as disks of English language disks of Japanese language and the like.

For example when a bonus track is added or when caption and voice are partially modified instead of the modification of an entire content a disk with the bonus track added thereon and a disk with the caption and voice partially modified must be newly prepared for re distribution.

The present invention has been developed in view of the above described problem and it is an object of the present invention to allow an update file of a content recorded on a disk to be downloaded or to be distributed in a removable recording medium to easily handle a content file recorded on the disk and the update file.

In accordance with a first aspect of the present invention a reproducing apparatus for acquiring a first data group and a second data group and reproducing an AV stream using the acquired first and second data groups includes detecting means for detecting a file system of the first data group and virtual file system generating means for generating a virtual file system containing at least a portion of each of the first data group and the second data group based on the file system of the first data group detected by the detecting means and attribute information containing first information indicating a recording position of the second data group and second information indicating a path in the virtual file system of the second data group.

A directory structure of the virtual file system may include at least a portion of a directory structure in the file system of the first data group detected by the detecting means.

The virtual file system may include a directory containing a play list file managing reproduction of the AV stream a directory containing a clip information file managing the AV stream and a directory storing the AV steam.

The second data group may be stored on one of a semiconductor memory and a magnetic disk and the first information may indicate a path in a file system in the one of the semiconductor memory and the magnetic disk.

The reproducing apparatus may further include reproduction control means for controlling reproduction of the AV stream by controlling reading of the first data group and the second data group based on the virtual file system generated by the virtual file system generating means.

The reproducing apparatus may further include storage means for storing the acquired second data group and management means for managing the file system of the second data group in the storage means wherein the reproduction control means controls the reproduction by reading the second data group stored on the storage means based on the first information and the second information contained in the attribute information the virtual file system and the file system of the second data group managed by the management means.

The reproducing apparatus may further include storage means for storing the acquired second data group wherein the second data group is stored on the storage means and also on another device connected to the reproducing apparatus via a network or a recording medium loaded on the reproducing apparatus wherein the first information indicates a path of the second data group in the file system of the storage means and wherein the reproduction control means further controls acquisition of data to be read out of the second data group stored on the other device or the recording medium if the data to be read out of the second data group is not present in the path indicated by the first information of the storage means.

The first data group may be stored on one of an optical disk a semiconductor memory and a magnetic disk.

The reproducing apparatus may further include acquisition means for acquiring the second data group from outside the reproducing apparatus storage means for storing the second data group acquired by the acquisition means and reading means for reading the first data group from a predetermined recording medium loaded on the reproducing apparatus wherein the reading means acquires the first data group by reading the first data group from the predetermined recording medium loaded on the reproducing apparatus or by reading the first data group from the storage means the storage means having stored in an area different from the area where the second data group has been stored the first data group read by the reading means from the predetermined recording medium.

The reproducing apparatus may further include first acquisition means for acquiring the first data group and second acquisition means for acquiring a third data group as an update file of the second data group wherein the second acquisition means acquires the third data group in a state that the first acquisition means has acquired the first data group acquired and wherein the virtual file system generating means generates the virtual file system containing at least a portion of each of the first data group and the third data group based on the file system of the first data group detected by the detecting means and attribute information containing third information indicating a recording position of the third data group and fourth information indicating a path in the virtual file system of the third data group.

The reproducing apparatus may further include first acquisition means for acquiring the first data group and second acquisition means for acquiring a third data group as an update file of the second data group wherein the second acquisition means acquires the third data group in a state that the first acquisition means has not yet acquired the first data group and wherein the virtual file system generating means generates the virtual file system containing at least a portion of each of the first data group and the third data group based on the file system of the first data group detected by the detecting means and attribute information containing third information indicating a recording position of the third data group and fourth information indicating a path in the virtual file system of the third data group.

The reproducing apparatus may further include storage means for storing a third data group as an update file of the second data group and storage control means for controlling storage of the third data group onto the storage means wherein one of the first data group and the third data group contains third information indicating a combination of the second data group and the third data group the combination of the second data group and the third data group being capable of reproducing all data contained in the second data group and the third data group when the third data group is stored on the storage means and wherein the storage control means determines based on the third information what data of the second data group cannot be reproduced due to the controlling of the storage of the third data group onto the storage means.

The reproducing apparatus may further include notification means for outputting a notification to a user wherein when the storage control means determines that predetermined data contained in the second data group cannot be reproduced due to the controlling of the storage of the third data group onto the storage means the notification means issues a warning message to the user.

Each of the second data group and the third data group may contain first control information for controlling a variety of stream data and reproduction of the stream data wherein when the storage control means determines that at least a portion of the stream data contained in the second data group cannot be reproduced due to the controlling of the storage of the third data group onto the storage means the storage control means generates second control information capable of reproducing all stream data contained in the second data group and the third data group and controls the storage of the second control information onto the storage means.

The first control information and the second control information may contain the first information and the second information.

The reproducing may further include notification means for outputting a notification to a user wherein each of the second data group and the third data group contains reproduction control information for controlling a variety of stream data and reproduction of the stream data wherein when the storage control means determines that at least a portion of the stream data contained in the second data group cannot be reproduced due to the controlling of the storage of the third data group onto the storage means the storage control means acquires identification information uniquely identifying the reproduction control information contained in the second data group and the notification means notifies the user of the identification information.

The reproducing apparatus may include storage means for storing the second data group data storage management means for managing storage or deletion of the second data group on the storage means and operation input acquisition means for acquiring an operation input from a user wherein the data storage management means deletes at least a portion of data contained in the second data group stored on the storage means in response to an operation input by the user and acquired by the operation input means and wherein the virtual file system generating means re generates the virtual file system based on the attribute information when the data storage management means deletes at least the portion of the data contained in the second data group.

The reproducing apparatus may further include communication means for exchanging information with a predetermined information processing apparatus via a network and information display control means for controlling display of information assisting the user in operation wherein when the operation input acquisition means acquires a command to delete data contained in the second data group stored on the storage means the data storage management means transmits to the predetermined information processing apparatus via the communication means information indicating a state of the virtual file system generated by the virtual file system generating means the communication means receives from the predetermined information processing apparatus information indicating a list of deletable data out of data contained in the second data group stored on the storage means the information display control means controls display of the information indicating the list of deletable data received via the communication means and the data storage management means deletes at least a portion of the data contained in the second data group stored on the storage means based on the operation input of the user who references the list of the deletable data displayed under the control of the information display control means the operation input acquired by the operation input acquisition means.

The reproducing apparatus may further include communication means for exchanging information with a predetermined information processing apparatus via a network wherein the virtual file system generating means determines whether a malfunction is likely to occur as a result of deletion of data in the virtual file system after at least the portion of the data contained in the second data group stored on the storage means is deleted and if it is determined that the malfunction is likely to occur as a result of data deletion extracts data required to correct the malfunction and requests the predetermined information processing apparatus via the communication means to transmit data required to correct the malfunction and the communication means receives the data required to correct the malfunction from the predetermined information processing apparatus and

the data storage management means controls storage of the data required to correct the malfunction and received via the communication means onto the storage means.

In accordance with the first aspect of the present invention a reproducing method of a reproducing apparatus for reproducing an AV stream using a first data group and a second data group includes steps of detecting a file system of the first data group acquiring attribute information containing first information indicating a recording position of the second data group and second information indicating a path in a virtual file system of the second data group and generating the virtual file system containing at least a portion of each of the first data group and the second data group based on the detected file system of the first data group and the acquired attribute information.

The reproducing method may further include steps of acquiring a third data group as an update file of the second data group acquiring from one of the first data group and the third data group third information indicating a combination of the second data group and the third data group the combination of the second data group and the third data group being capable of reproducing all data contained in the second data group and the third data group when the third data group is stored on a predetermined storage section and determining based on the third information whether any of data contained in the second data group cannot be reproduced when the third data group is stored onto the storage section.

In accordance with the first aspect of the present invention a program for causing a computer to reproduce an AV stream using a first data group and a second data group includes steps of detecting a file system of the first data group acquiring attribute information containing first information indicating a recording position of the second data group and second information indicating a path in a virtual file system of the second data group and generating the virtual file system containing at least a portion of each of the first data group and the second data group based on the detected file system of the first data group and the acquired attribute information.

In accordance with the first aspect of the present invention the file system of the first data group is detected to reproduce the AV stream using the first data group and the second data group. The virtual file system containing at least a portion of each of the first data group and the second data group is generated based on the detected file system of the first data group and the attribute information containing the first information indicating the recording position of the second data group and the second information indicating the path in the virtual file system of the second data group.

In accordance with a second aspect of the present invention a data structure of third data to be supplied to a reproducing apparatus so that first data and second data supplied to the reproducing apparatus are reproduced with the first and second data associated with each other includes first information indicating a path in a file system of a recording section storing the first data in the reproducing apparatus and second information indicating a path of the first data in a virtual file system of the reproducing apparatus the virtual file system including at least a portion of each of the first data and the second data.

In accordance with the second aspect of the present invention a manufacturing method of a recording medium the recording medium storing third data to be supplied to a reproducing apparatus so that first data and second data supplied to the reproducing apparatus are reproduced with the first and second data associated with each other includes steps of generating data having a data structure including first information indicating a path in a file system of a recording section storing the first data in the reproducing apparatus second information indicating a path of the first data in a virtual file system of the reproducing apparatus the virtual file system including at least a portion of each of the first data and the second data and recording the generated data onto the recording medium.

In accordance with the second aspect of the present invention the data having the data structure containing the first information and the second information is provided so that the first data and the second data supplied to the reproducing apparatus are reproduced with the first and second data associated with each other. The first information indicates the path in the file system of the recording section storing the first data in the reproducing apparatus and the second information indicates the path of the first data in a virtual file system of the reproducing apparatus the virtual file system including at least a portion of each of the first data and the second data.

In accordance with a third aspect of the present invention a reproducing apparatus for reproducing an AV stream using a first data group and a second data group includes first acquisition means for acquiring the first data group second acquisition means for acquiring the second data group that is to be reproduced along with the first data group storage means for storing the second data group acquired by the second acquisition means extracting means for extracting from the second data group stored on the storage means first information indicating a path in the second data group in a file system of the storage means and second information indicating a path in a virtual file system of the second data group detecting means for detecting a file system of the first data group virtual file system generating means for generating the virtual file system containing at least a portion of each of the first data group and the second data group based on the file system of the first data group detected by the detecting means and the first information and the second information extracted by the extracting means and reproducing means for reproducing the AV stream by reading the acquired first data group and second data group based on the virtual file system.

In accordance with the third aspect of the present invention a reproducing method of a reproducing apparatus for reproducing an AV stream using a first data group and a second data group includes steps of acquiring the second data group along with the first data group storing the acquired second data group onto a storage section extracting from the second data group stored on the storage section first information indicating a path in the second data group in a file system of the storage section and second information indicating a path in a virtual file system of the second data group detecting a file system of the first data group generating the virtual file system containing at least a portion of each of the first data group and the second data group based on the detected file system of the first data group and the extracted first information and second information and reproducing the AV stream by reading the first data group and the second data group based on the virtual file system.

In accordance with the third aspect of the present invention a program for causing a computer to reproduce an AV stream using a first data group and a second data group includes steps of acquiring the second data group along with the first data group storing the acquired second data group onto a storage section extracting from the second data group stored on the storage section first information indicating a path in the second data group in a file system of the storage section and second information indicating a path in a virtual file system of the second data group detecting a file system of the first data group generating the virtual file system containing at least a portion of each of the first data group and the second data group based on the detected file system of the first data group and the extracted first information and second information and reproducing the AV stream by reading the first data group and the second data group based on the virtual file system.

In accordance with the third aspect of the present invention the second data group to be reproduced along with the first data group is acquired to reproduce the AV stream using the first data group and the second data group. The acquired second data group is stored. The first information and the second information are extracted from the second data group. The first information indicates the path in the second data group in the file system of the storage section and the second information indicates the path in the virtual file system of the second data group. The file system of the first data group is detected. The virtual file system containing at least a portion of each of the first data group and the second data group is generated based on the detected file system of the first data group and the extracted first information and second information. The AV stream is then reproduced by reading the first data group and the second data group based on the virtual file system.

In accordance with a fourth aspect of the present invention a data delivery system includes a reproducing apparatus for reproducing an AV stream based on information recorded on a removable recording medium and a data delivery apparatus for delivering data to the reproducing apparatus. The reproducing apparatus includes detecting means for detecting a file system of a first data group recorded on the recording medium data acquisition means for acquiring a second data group delivered from the data delivery apparatus first storage means for storing the second data group acquired by the data acquisition means and virtual file system generating means for generating a virtual file system containing at least a portion of each of the first data group and the second data group based on a file system of the first data group detected by the detecting means and attribute information containing first information indicating a path in a file system of the second data group on the storage means and second information indicating a path in the virtual file system of the second data group. The data deliver apparatus includes second storage means for storing a plurality of second data groups schedule management means for managing a delivery schedule of the second data group to the reproducing apparatus and selecting means for selecting any of the plurality second data groups deliverable to the reproducing apparatus from among the plurality second data groups stored on the second storage means based on the schedule managed by the schedule management means.

In accordance with the fourth aspect of the present invention in the reproducing apparatus the file system of the first data group recorded on the recording medium is detected the second data group delivered from the data delivery apparatus is acquired the acquired second data group is stored and the virtual file system containing at least a portion of each of the first data group and the second data group is generated based on the file system of the first data group detected by the detecting means and the attribute information containing the first information indicating the path in the file system of the second data group on the storage means and the second information indicating the path in the virtual file system of the second data group. In the data delivery apparatus the plurality of second data groups are stored the delivery schedule of the second data group to the reproducing apparatus is managed and any of the plurality second data groups deliverable to the reproducing apparatus from among the plurality second data groups stored on the second storage means is selected based on the schedule managed by the schedule management means.

Since the virtual file system is generated in accordance with one aspect of the present invention the AV stream is reproduced using the first data group and the second data group based on the virtual file system.

In accordance with another aspect of the invention information required to perform reproduction with the first data group and the second data group supplied to the reproducing apparatus being associated with each other is provided.

In accordance with yet another aspect of the invention the virtual file system is created and data group contained in the virtual file system is delivered according to a predetermined schedule.

A controller executes a prepared control program. The controller also reads a navigation program to be discussed later recorded on an optical disk by controlling a optical disk drive and expands the navigation program on a memory to execute the navigation program. The controller thus generally controls the reproducing apparatus . When the optical disk is loaded the controller causes a predetermined menu screen to be displayed on an external display device.

Under the control of the controller the optical disk drive reads data from the optical disk and outputs the read data to one of the controller the memory and a decoder . If information read from the optical disk by the optical disk drive is one of a navigation program and PlayList the read information is supplied to one of the controller and the memory . If the information read from the optical disk by the optical disk drive is one of an AV stream and text data the read information is output to the decoder .

The application format contains two layers of PlayList and Clip for managing an AV audio visual stream. A pair of one AV stream or text data and clip information accompanying the AV stream or the text data is handled as one object and referred to as a clip. A data file of the AV stream is referred to as an AV stream file. A data file of the clip information is referred to as a clip information file.

Files used by computers are generally handled as byte strings. A content of an AV stream file is expanded along time axis and an access point of the clip is typically specified by a timestamp in PlayList.

When the access point in the clip is specified by a timestamp in the PlayList the clip information file is used to find from the timestamp address information at which decoding of the AV stream file is to be started.

The PlayList is a set of information indicating a reproduction period of the AV stream. Information indicating one reproduction period in the AV stream is referred to as PlayItem. PlayItem is represented by a pair of an IN point reproduction start point and an OUT point reproduction end point of the reproduction period along time axis. PlayList is composed at least one PlayItem as shown in .

As shown in a first PlayList shown on the leftmost portion is composed of two PlayItems. The two PlayItems reference a first portion and a second portion of the AV stream contained in a first clip on the leftmost portion. A second PlayList from the left is composed of a single PlayItem. The PlayItem references the entire second clip shown on the right side. A third PlayList shown on a third position from the left is composed of two PlayItems. The two PlayItems reference a predetermined portion of the AV stream contained in the first clip and a predetermined portion of the AV stream contained in the second clip shown on the right side.

Navigation program is a program for causing the controller to control the order of reproduction of PlayList and interactive reproduction of the PlayList. The navigation program has also a function to display a menus screen on which a user enters a command to execute reproduction. The navigation program is described in programming language such as Java registered trademark and recorded on a recording medium such as the optical disk . The controller now executes the navigation program. If the first PlayItem contained in the first PlayList shown on the leftmost portion of is specified as information indicating a reproduction position the first portion of the AV stream contained in the first clip shown on the leftmost portion referenced by the first PlayItem is reproduced.

In addition to a main path specified by the PlayItem sub path information specified by a sub play item of can be contained in the PlayList of . With the SubPlayItem defined a separate data stream not multiplexed with a clip such as an MPEG 2 transport stream specified by PlayItem can be reproduced in synchronization with the AV stream.

Caption related information including a caption text file and a font file required for rendering and SubPlayItem specifying a reproduction period of the caption related information are prepared in association with a clip AV stream of the main path specified by PlayItem. The clip AV stream is reproduced while a caption corresponding to data described in the caption text file is displayed on a display device in a display font based on the font data written in the font file. For example dubbed in voice data of a different language and SubPlayItem corresponding to the dubbed in voice data are prepared in association with the clip AV stream of the main path specified by PlayItem. The clip AV stream is thus reproduced while the dubbed in voice data of the different language is reproduced and output at the same time.

The SubPlayItem and the corresponding data clip may be recorded on the optical disk or may be downloaded from the server via the network as additional data update data or may be acquired in a removable medium such as a removable medium to be discussed later . A method of downloading the additional data from the server will be described in detail later with reference to .

The memory stores data the controller requires to execute a variety of processes. A local storage is an HDD hard disk drive for example. The local storage may be a semiconductor memory instead of the HDD. The local storage composed of the semiconductor memory may be removably mounted on the reproducing apparatus .

An Internet interface is connected to the network in a wired fashion or a wireless fashion. Under the control of the controller the Internet interface communicates with the server via the network and supplies data downloaded from the server to the local storage . The server downloads a content that updates the data discussed with reference to and recorded on the optical disk loaded on the reproducing apparatus . The local storage records the content downloaded from the server via the network .

The decoder decodes the AV stream or text data supplied from one of the optical disk drive and the local storage and outputs the resulting video signal and audio signal to the external display device. In response to the decoded signals from the decoder the display device outputs the content of the optical disk i.e. displaying a video and outputting an audio .

The operation input unit includes an input device including buttons keys touchpanel jogdial and the like and a receiver receiving an infrared signal transmitted from a predetermined remote commander. The operation input unit receives an operation input from a user and supplies the operation input to the controller .

The controller is connected to the drive as necessary. A removable medium is loaded on the drive . The removable medium may include one of a magnetic disk including a floppy disk an optical disk such as compact disk read only memory CD ROM or DVD a magneto optical disk such as Mini Disk MD registered trademark and a semiconductor memory.

Data recorded on the optical disk loaded on the reproducing apparatus and data stored on the local storage are reproduced as described below.

The reproducing apparatus includes the local storage such as HDD Hard Disk Drive . The reproducing apparatus connected to the network in a wired fashion or a wireless fashion stores on the local storage the content downloaded from the server via the network . The server downloads the data that updates the content such as a movie recorded on the optical disk loaded on the reproducing apparatus .

When the operation input unit is commanded to reproduce the content recorded on the optical disk with the downloaded content recorded on the local storage the controller associates the content recorded on the optical disk with the content recorded on the local storage and performs a reproduction process of the content.

The content on the optical disk and the content on the local storage are reproduced in association with each other as described with reference to .

For example the optical disk of may be a medium sold in package and record a movie content. Only an English caption text file for example may be recorded on the optical disk as a caption data file that can be displayed superimposed on the video of the movie content.

The AV stream of clip recorded on the optical disk and referenced by the PlayItem of the PlayList as shown in is a stream for displaying the video of the movie content and reproducing the corresponding audio. Caption related information of Clip referenced by the SubPlayItem of the PlayList is a caption text file for displaying an English caption to be superimposed on the video.

A user for example might want to view the movie content recorded on the optical disk with a caption of a language different from English. The optical disk has no recorded caption of the language different from English. In this condition the user cannot view the movie with the caption data of the language different from English.

The user then downloads a caption text file of the desired language of the movie recorded on the optical disk from the server via the network or retrieves the caption text file from the removable medium . The caption text file of Arabic for example might be downloaded or copied from the removable medium to the local storage .

When the user issues an instruction to download the caption text file of Arabic corresponding to the PlayList pre recorded on the optical disk the reproducing apparatus accesses the server and then downloads a file prepared on the server for updating the content recorded on the optical disk .

With reference to there are shown clip composed of an Arabic caption text file caption related information and a clip information file attached thereto a PlayList file updated PlayList file enabled to control reproduction and displaying of caption data of clip in addition to the video clip and the audio clip AV stream data and the English caption text file pre recorded on the optical disk and a new navigation program file updated from the navigation program file stored on the optical disk . These pieces of information are downloaded and stored on the local storage .

The updated PlayList includes SubPlayItem and SubPlayItem each representing a sub path in addition to PlayItem representing a main path. The PlayItem of the updated PlayList is used to reference clip containing the AV stream recorded on the optical disk . SubPlayItem is used to reference clip containing caption related information recorded on the optical disk . SubPlayItem is used to reference clip downloaded from the server together with the updated PlayList containing caption related information as the Arabic caption text file.

The new navigation program file of specifies one of SubPlayItem and SubPlayItem together with PlayItem of the updated PlayList as a reproduction period. A desired video is associated with audio data. With this arrangement the user can display one of the English caption defined by the English caption text file pre recorded on the optical disk and the Arabic caption defined by the Arabic caption text file not pre recoded on the optical disk whichever is desired.

When downloading from the server copying from the removable medium is performed the reproducing apparatus can reproduce and display any of clip as the English caption text file and clip as the Arabic caption text file not pre recoded on the optical disk . More specifically the user selects a desired language from caption languages displayable on a menu screen presented on the display device. The user can thus view the movie on any of English caption and Arabic caption.

The AV stream recorded on the optical disk includes a moving picture experts group MPEG 2 transport stream as shown in . Each MPEG 2 transport stream contains an integer number of aligned units. The aligned unit has a size of 6144 bytes 2048 3 bytes and starts with a first byte of a source packet. The source packet is 192 bytes long. One source packet contains TP extra header and a transport packet. TP extra header is 4 bytes long and the transport packet is 188 bytes long. One aligned unit is composed of 32 source packets. Data of a video stream or an audio stream is packetized into MPEG 2 PES packetized elementary stream and a PES packet is packetized into transport packets.

The functions of are executed when the controller performs a prepared control program or when the controller performs a navigation program recorded on the optical disk .

A menu screen display controller causes the external display device to display a menu screen. The menu screen shows buttons operated for the user to select the audio of the content recorded on the optical disk the language of the caption the angle of the video and buttons operated for the user to select an update file to be downloaded and a file to be deleted.

An operation input acquisition unit acquires a signal indicating a operation input entered by the user via the operation input unit and outputs the signal indicating the user operation input to any corresponding one of the menu screen display controller a data acquisition unit a local storage directory manager and a reproduction controller .

The data acquisition unit controls communications performed on the Internet interface of and information exchange with the removable medium on the drive . For example the data acquisition unit downloads the update file indicated by the user from the server and outputs the acquired file to the local storage directory manager . Upon receiving information indicating a required file from the file system merge processor to be discussed later the data acquisition unit acquires the required file from the server through downloading and outputs the acquired file to the local storage directory manager .

The local storage directory manager manages directories on the local storage controls writing of data onto the local storage reading of data from the local storage and deleting of data from the local storage . The PlayList read from the local storage under the control of the local storage directory manager is output to the memory . The audio data and the video data of the AV stream and text data of the caption text file read from the local storage are output to the decoder . When the file system merge processor merges a file system on the optical disk with a file system on the local storage the local storage directory manager outputs information relating to the file system on the local storage to the file system merge processor .

The optical disk directory manager manages directories of the optical disk and controls reading of data from the optical disk . The optical disk has author id and disc id as identification information set thereon. The identification information author id and disc id read from the optical disk under the control of the optical disk directory manager are supplied to the data acquisition unit and the local storage directory manager . The PlayList read from the optical disk under the control of the optical disk directory manager is output to the memory . The audio data and the video data of the AV stream and the text data of the caption text file read from the optical disk are output to the decoder . When the file system merge processor merges the file system on the optical disk with the file system on the local storage the optical disk directory manager outputs information relating to the file system on the optical disk to the file system merge processor . The identification information author id and disc id will be described later.

The file system merge processor merges the file system on the optical disk supplied from the optical disk directory manager and the file system on the local storage supplied from the local storage directory manager thereby creating a single virtual file system. The file system merge processor outputs the created virtual file system to the reproduction controller .

In a process to be discussed later the file system merge processor determines whether a deletion of several files recorded on the local storage can cause a malfunction in a link structure of files in the virtual file system in the link structure data is linked to reproduce the clip in accordance with the PlayList based on an application format of the optical disk as discussed with reference to . If the file system merge processor determines that a malfunction can take place in the link structure of the files in the virtual file system a file required to correct the malfunction is extracted. Information regarding the required file is supplied to the data acquisition unit . The required file can be downloaded as necessary.

When several files are deleted from the local storage a file that cannot be reproduced in accordance with any PlayList in the virtual file system i.e. cannot be specified by any of PlayLists occurs. In the process to be discussed later the file system merge processor commands the local storage directory manager to delete such an unnecessary file.

Whether or not to delete the unnecessary file caused in response to the deletion of files may be set by the user.

The reproduction controller executes the navigation program specified by the virtual file system supplied from the file system merge processor and controls reproduction of content. More specifically the reproduction controller references the PlayList supplied to and stored on the memory and controls the local storage directory manager and the optical disk directory manager to read the audio data and the video data of the AV stream and as necessary the text data of the caption text file from the optical disk and the local storage based on the virtual file system. The reproduction controller controls the decoder of to decode reproduce the audio data and the video data of the AV stream and as necessary the text data of the caption text file stored on one of the optical disk and the local storage .

The file system merge processor merges the file system on the optical disk with the file system for managing a data group that is downloaded from the server and recorded on the local storage . The merging operation is performed when the optical disk is loaded on the reproducing apparatus when the reproduction of a content recorded on the reproducing apparatus is requested when inputting or outputting of any data recorded on one of the optical disk and the local storage is requested or when the user issues a command to perform the merging operation.

A virtual file system is defined as an upper layer of a native file system of the system of the reproducing apparatus i.e. the file system of the data actually recorded on one of the optical disk and the local storage . More specifically as shown in an application program and a user handling the application program can recognize only the virtual file system as an upper layer. The application program causes the local storage to record new data by downloading the new data from the server and reproduces the data actually stored on one of the optical disk and the local storage . The virtual file system abstracts the native file system thereby hiding a native structure such as a physical device and an operating system in the reproducing apparatus .

The main functions of the virtual file system include mounting a file directory on a physical device such as the optical disk or the local storage to create a file system of a virtual disk recognized by the user and supplying a file access application programming interface API to the created virtual disk.

When the user enters an operation input requesting an access to any file recorded on one of the optical disk and the local storage the application program of can recognize only the virtual file system. A local file system and a local file system recorded on one of the optical disk and the local storage and the structure of the file system of the optical disk are hidden from the application program and the user handling the application program and can be accessed via the virtual file system.

To perform a file access request of the application program of the reproducing apparatus calls an API Application Programming Interface for file input and output provided by the virtual file system and then accesses the data stored on one of the optical disk and the local storage without being aware of the physical structure of the disk drive and the software structure of the file system. More specifically the API of the virtual file system calls in practice API of the native file system within the reproducing apparatus .

The virtual file system provides a variety of types of APIs. For example the virtual file system provides an open API for opening a specified file a close API for closing a specified file a seek API for setting a reading position or writing position of a specified file a stat API for acquiring status of specified file a read API for reading a specified file a write API for writing a specified file etc. The application program executed by the reproduction controller manipulates the files stored on one of the optical disk and the local storage using these APIs.

The virtual file system has a function of dividing and managing a disk area of the local storage . As shown in the disk area of the local storage has a directory structure in which the disk area is divided into divisions for suppliers of contents content authors on a per supplier basis. Directories disc id immediately under author id are flexibly configured in a file directory structure by a content author. A description of metadata manifest data to be discussed later contained in the downloaded data defines where to place data on the local storage i.e. defines the file directory structure of the downloaded file.

In the file directory structure of the local storage author id dividing the directory is an identifier uniquely identifying an entity managing the metadata manifest data to be discussed later contained in the downloaded data. More specifically the author id identifier uniquely identifies an entity including a content producer a motion picture company or a group including a plurality of content producers and motion picture companies. An identifier disc id uniquely identifies the optical disk provided by the content producer identified by the author id identifier. These identifiers are contained in the metadata of the downloaded data. The metadata manifest data and the author id and disc id identifiers will be described later.

The file directory structure of the virtual disk accessible by the application is compatible with the file directory structure of the optical disk . More specifically the data file structure under the author id and disc id identifiers is merged with the data file structure of the optical disk . The virtual file system of the virtual disk having file directory structure compatible with the file directory structure of the optical disk is thus configured.

The virtual file system also has a function of managing manifest files to be discussed later in addition to the directory and file management function. The purpose of the virtual file system of defining fields of the metadata to a file model of a native file system is three fold i.e. to display a name representing a content rather than displaying a path or a name of a file of the local storage to prevent double updating of the same file in a download process and to define a path name in the virtual file system namely a path name during reproduction of the optical disk .

The virtual file system provides two functions in metadata management namely operation of a manifest file and operation of metadata. The manifest file is metadata representing a variety of attributes of the downloaded files. Manifest may be stored in a corresponding file or may be merged with one file with a manifest id identifier to be discussed later with reference to of a manifest section used as a key for identification. In either case the file is referred to as a manifest file. The reproducing apparatus storing the file downloaded to the local storage must also store a manifest file. The manifest file may be described in mark up language text such as XML.

A author id field specifies an entity managing the manifest file. More specifically the author id field specifies an identifier uniquely identifies a content producer a motion picture company or a group including a plurality of content producers and motion picture companies. The identifier is determined by referencing the author id field of a content distribution file to be discussed later with reference to . The application program or the user can freely set any value to this field.

A disc id field is used to specify an identifier uniquely identifying the optical disk to the content producer identified by the author id identifier. The identifier is determined by referencing the disc id field of the content distribution file to be discussed later with reference to . The application program or the user can freely set any value to this field.

A version field is used by a content author to manage history. History number is within an integer range from 1 to 255 and the larger the number the newer the content is. The identifier is determined by referencing the version field of the content distribution file to be discussed with reference to . Neither the application program nor the user can set freely a value to this field.

In a display name field a name easily recognizable to the user is defined here. More specifically a character string such as Japanese caption of title XXX which could be difficult to imagine from a file name alone is set in the display name field. The character string is coded in accordance with ISO IEC 10646 1.

In a source field information indicating a source of a file is described. The value in this field is coded in accordance with ISO IEC 646. In the case of network downloading a URL of a download source is described.

An operation type field is an 8 bit long field in which the content author specifies a file updating method. lists values specifiable to the operation type field.

If 0x01 is described in the 8 bit operation type field the file updating method in an archive is substitution replacement of PlayList. More specifically an update file with 0x01 written in the 8 bit operation type field is downloaded. In the virtual file system produced in a merging operation based on the update file the PlayList downloaded and recorded on the local storage is referenced as is and the PlayList of the optical disk is not referenced at all.

The file updating method performed with 0x01 described in the 8 bit operation type field will be described in detail later with reference to .

If 0x02 is described in the 8 bit operation type field a SubPath element is extracted from the downloaded file and the file systems are merged for updating so that the extracted SubPath element is added to a SubPath element recorded on the optical disk .

The file updating method performed with 0x02 described in the 8 bit operation type field will be described in detail later with reference to .

If 0x03 is described in the 8 bit operation type field a SubPlayItem element is extracted from the downloaded file and the file systems are merged for updating so that the extracted SubPlayItem element is added to a SubPlayItem element recorded on the optical disk .

The file updating method performed with 0x03 described in the 8 bit operation type field will be described in detail later with reference to .

If 0x04 is described in the 8 bit operation type field a SubClip entry element is extracted from the downloaded file and the file systems are merged for updating so that the extracted SubClip entry element is added to a SubClip entry element recorded on the optical disk .

The file updating method performed with 0x04 described in the 8 bit operation type field will be described in detail later with reference to .

A permission field is used for the content author to specify whether to set approval information as a visible attribute or an invisible attribute.

If 0x00 is described in the 8 bit permission field the attribute of a file accompanied by this metadata is invisible to the user. If 0x01 is described in the 8 bit permission field the attribute of a file accompanied by this metadata is visible to the user. If 0x02 is described in the 8 bit permission field the attribute of a file accompanied by this metadata is overwrite inhibited.

A src file name field contains information that uniquely identifies where the corresponding file is recorded in the directory structure of the file system of the local storage . More specifically this field specifies a path name representing a path identifying a file with a file location in the hierarchical layer structure of the file system of the local storage . Names of the file and directory representing the path name are coded in accordance with ISO IEC 646 Standards.

A dst file name field contains information that uniquely identifies where the corresponding file is recorded in the directory structure at a bind destination in a virtual disk of the file actually recorded on the local storage . More specifically this field specifies a path name representing a path identifying a file with a file location in the hierarchical layer structure of the virtual file system. Names of the file and directory representing the path name are coded in accordance with ISO IEC 646 Standards.

The virtual file system defines API for reading the content of the manifest file without disclosing the file name the file location or the physical structure of the manifest file to the application program or the user.

More specifically the application program or a resident program to be executed by the reproducing apparatus can indirectly access the manifest file by calling the following APIs 

In practice detailed definition of API such as type information needs to be modified depending on programming language specifications of software execution environment of the reproducing apparatus .

A directory named BDMV is arranged under the root directory of the optical disk . Under the directory BDMV a file named Index.bdmv and a file named MoveObject.bdmv are stored. Hereinafter these files are referred to as an Index file and a MoveObject file respectively as appropriate. Each file is referred to as a designation of a file name followed by file and each directory is referred to as a directory name followed by directory .

The Index file contains information relating to a menu for the reproduction of the optical disk . The reproducing apparatus causes a display device to display a reproduction menu screen based on the Index file. The reproduction menu screen shows items for reproducing all contents on the optical disk reproducing a particular chapter only reproducing repeatedly a particular chapter and displaying an initial menu. MovieObject that is executed with any item selected is set in the Index file. When a user selects one item from the reproduction menu screen the reproducing apparatus executes a MoveObject command set in the Index file.

The MovieObject file includes MovieObject. MovieObject includes a command controlling the reproduction of the PlayList recorded on the optical disk . The reproducing apparatus selects and executes one of MovieObjects recorded on the reproducing apparatus thereby reproducing the content recorded on the optical disk .

Arranged further under the BDMV directory are a directory named BACKUP BACKUP directory a directory named PLAYLIST PLAYLIST directory a directory named CLIPINF CLIPINF directory a directory named STREAM STREAM directory and a directory named AUXDATA AUXDATA directory .

The PLAYLIST directory stores a PlayList file. Each PlayList file name is composed of a file name of a five digit number with an extension .mpls attached thereto as shown in .

The CLIPINF directory stores a clip information file. Each clip information file is composed of a file name of a five digit number with an extension .clpi attached thereto as shown in .

The STREAM directory stores a clip AV stream file and a substream file. Each stream file has a file name of a five digit number with an extension .m2ts attached thereto as shown in .

The AUXDATA directory stores files of data not contained in but referenced from the clip AV stream file and the substream file and data used separately from the clip AV stream and the substream file. As shown in the AUXDATA directory stores a caption font file named 11111.otf and an effect sound file named sound.bdmv. 

The optical disk stores the author id and disc id identifiers in the form of secure electronic data that cannot be rewritten by the user or in the form of physical pits. The author id identifier identifies a content author also referred to as title author of a content manufacturer of the optical disk such as a production company or a distributing agency of a movie. The disc id identifier identifies the type of the optical disk manufactured by the title author identified by the author id identifier.

At least one directory named author id is arranged under the root directory of the local storage . At least one directory named disc id is arranged under the author id directory. The disc id directory includes a set of manifest sections or a manifest file composed of one manifest section. The structure of the other directories and files is freely set by the content author. The other directories and files may have the same file directory structure as the one of the optical disk discussed with reference to or may have the one as discussed with reference to which is quite different from the file directory structure discussed with reference to .

As shown in the disc id directory includes in addition to the manifest file a plurality of directories including a MainMovie directory a SubTitle directory and an AUXDATA directory. Those directories may further contain folders and files.

The file directory structure of the local storage of is invisible to the application program executed by the reproducing apparatus or the user.

For example in the manifest section of MainMovie movie01 main.r1.jp.mp2 as the path name thereof might be specified in the src file name field and STREAM 01002 m2ts as the path name thereof might be specified in the dst file name field. As shown in the downloaded data is recorded in a file name of main.r1.jp.mp2 in a movie01 directory within the MainMovie directory under the author id and disc id identifiers in the local storage . In the virtual file system of the virtual disk the downloaded data is handled as a file named 01002.m2ts in the STREAM directory.

In this way the content author can specify the path name of the local storage in the src file name field and the path name in the virtual file system of the virtual disk in the dst file name field of the manifest section of the downloaded package. If the path name adapted to the virtual file system in the virtual disk is set in the dst file name field the content author can freely set a file directory structure under disc id of the data actually recorded on the local storage and newly add directories and files under areas identified by the disc id identifier in the reproducing apparatus .

If the dst file name field in the manifest section remains blank at the downloading of an actual file that file cannot be referenced from the application program being executed by the reproducing apparatus in other words the application program being executed by the reproducing apparatus and the user cannot recognize the presence of that file . The actual file is stored on the local storage and the actual file is correctly recognized in the file system of the local storage . With the dst file name field left blank the file is considered as being absent from the virtual file system. That file is thus hidden from the application program of the reproducing apparatus and the user.

This feature is taken advantage of. An actual file is downloaded with the dst file name field blanked in the manifest section. Later in the future a manifest section having the same manifest id and a predetermined path name written in the dst file name field is downloaded again to overwrite the manifest section. The application program to be executed by the reproducing apparatus thus operates in the same way as the actual file is downloaded at the same timing as the downloading of the new manifest section.

For example a plurality of bonus tracks was downloaded at a time or delivered in a predetermined recording medium and later only the manifest section containing the dst file name field is downloaded for overwriting periodically so that the application program recognizes different bonus tracks. In this arrangement the user enjoys services in which different bonus tracks are added from time to time without the need for downloading frequently a vast amount of data.

In the synchronization binding between the actual file system of the optical disk and the local storage and the file system of the virtual disk regardless of whether it is a so called static binding system or a dynamic binding system a new API for updating the virtual file system for example a update may be defined. When that API is called in response to a user operation or explicitly by the application program the virtual file system is updated.

In the static binding the actual file systems in the optical disk and the local storage are referenced at the moment the optical disk is loaded on the reproducing apparatus or at the timing of the switching of reproduction title in order to map the file directory structure in the virtual file system. In the dynamic binding required files are searched for at the moment a file input and output request is issued.

The file directory structure of the virtual disk preferably matches the file directory structure of the optical disk . The file directory structure of the optical disk is formulated by standards and typically cannot be modified. Preferably the structure of actual directories and files in the local storage is freely set by the content author. If the file directory structure of the virtual disk is set based on the fixed file directory structure of the optical disk a reproduction process is performed in compliance with standards such as the application format of the optical disk while maintaining the freedom of data distributed by the content author at the same time.

A directory named BDMV is arranged under the root directory in the file directory structure of the virtual disk of . Under that directory there are arranged a file named Index.bdmv and a file named MovieObject.bdmv .

The Index file contains information relating to a menu for reproducing a content that is stored on the optical disk and the local storage and handled by the application program as the one being recorded on the virtual disk. The reproducing apparatus causes the display device to display the reproduction menu screen in accordance with the Index file. The reproduction menu screen may show items for reproducing all contents on the optical disk reproducing a particular chapter only reproducing repeatedly a particular chapter and displaying an initial menu. MovieObject that is executed with any item selected is set in the Index file. When a user selects one item from the reproduction menu screen the reproducing apparatus executes a MoveObject command set in the Index file.

The MovieObject file includes MovieObject. MovieObject includes a command controlling the reproduction of PlayList that is handled as being recorded on the virtual disk. The reproducing apparatus selects and executes one of MovieObjects that are handled as being recorded on the virtual disk thereby reproducing the content that is handled as being recorded on the virtual disk.

Arranged under the BDMV directory are a directory named BACKUP BACKUP directory a directory named PLAYLIST PLAYLIST directory a directory named CLIPINF CLIPINF directory a directory named STREAM STREAM directory and a directory named AUXDATA AUXDATA directory .

The BACKUP directory stores files and data to back up files and data to be handled as being recorded on the virtual disk.

The PLAYLIST directory stores a PlayList file. Each PlayList file name is composed of a file name of a five digit number with an extension.mpls attached thereto in the same way as in the optical disk .

The CLIPINF directory stores a clip information file. Each clip information file is composed of a file name of a five digit number with an extension.clpi attached thereto in the same way as in the optical disk .

The STREAM directory stores a clip AV stream file and a substream file. Each stream file has a file name of a five digit number with an extension .m2ts attached thereto in the same way as in the optical disk .

The AUXDATA directory stores files of data not contained in the clip AV stream file and the substream file handled as being recoded on the virtual disk but referenced from the clip AV stream file and the substream file and files of data used separately from the clip AV stream file and the substream file.

Information indicating a file on the menu screen displayed to the user has a name typically specified in a display name field. The file directory structure of the virtual disk discussed with reference to is not hidden in nature from the application program and the user. Depending on the application program executed by the reproducing apparatus the file directory structure of the virtual disk may be displayed to the user.

The definition of the content distribution file format the content author uses to distribute the content is described with reference to . The file format for content distribution may be individually determined on a per content file unit basis. Alternatively the file format may be an archive type containing metadata manifest as shown in .

A package header section and a package body section in archive may take text expression of mark up language such as XML.

When the content author distributes contents on a per file unit basis metadata manifest is handled as an independent binary file or text file. In other words an appropriate state needs to be described in the manifest associated with a content distributed on a per file unit basis in view of a directory structure expected subsequent to file addition.

A compression type field is used to specify a compression method of data within the package body . If zero is specified in this field data within the package body is non compressive type.

An encryption type field is used to specify a scramble encryption method of data within the package body . If zero is specified in this field the data within the package body is non scrambled type clear text .

As for the order of scrambling and compression of the data in the package body a compression process is performed first followed by a scrambling process.

After archive data is downloaded the manifest section may be stored on a per file unit basis on a per archive data unit basis on the local storage . Alternatively the manifest section may be merged with a file with the manifest id identifier of a manifest section used as a key for identification.

An author id field is a field in which the content author specifies an identifier uniquely identifying a content producer.

A disc id field is a field in which the content author specifies an identifier uniquely identifying the optical disk of a particular content producer. This archive is update data for the optical disk specified by the disc id identifier.

A version field is a field the content author uses to manage history. History number is represented by a number from 1 to 255 and the larger the number the newer the content is.

In a source field a source URL of a file associated with the manifest is described. The value in this field is coded in accordance with ISO IEC 10646 1.

An operation type field is a field in which the content author specifies a content updating procedure. The value specifiable for the operation type field remains unchanged from the value discussed with reference to .

In a display name field a name easily recognizable to the user is defined here. More specifically a character string such as Japanese caption of title XXX which could be difficult to imagine from a file name alone is set in the display name field. The character string is coded in accordance with ISO IEC 10646 1.

A permission field is used for the content author to specify whether to set approval information as a visible attribute or an invisible attribute. The values specifiable for the permission field remain unchanged from the values discussed with reference to .

An src file name field is used to specify a path name of a file to be recorded on the local storage as previously discussed with reference to . The file directory name is encoded in accordance with ISO IEC 646 standards.

A dst file name field is used to specify a path name of a file at a binding destination in the virtual disk virtual file system as previously discussed with reference to . The file directory name is encoded in accordance with ISO IEC 646 Standards.

The data of having the described content distribution file format is downloaded and the reproducing apparatus merges the downloaded data with the data recorded on the loaded optical disk to construct a virtual file system in the virtual disk. The user who reproduces a content recorded on the optical disk using the reproducing apparatus feels that the optical disk is updated with bonus tracks and sounds or captions of different language sounds added to the contents recorded on the optical disk .

If the contents having the above described format are updated new data files are downloaded for binding in the virtual file system discussed with reference to . For example at least one of an Index file Index.bdmv a MovieObject file MovieObjects.bdmv a PlayList file .mpls a ClipInformation file .clpi and a STREAM file and AUXDATA file .m2ts .bdmv and .otf is added or updated. The various types of additions defined by above referenced operation type such as the addition of MainPath and SubPath are executed so that the above described files are downloaded and reproduced in association with the contents recorded on the optical disk .

In a first example MainPath is added to the content recorded on the optical disk loaded on the reproducing apparatus .

For example 0x01 is described in the 8 bit operation type field. As shown in a PlayList file containing MainPath and SubPath a clip AV stream file and a caption text stream file are recorded on the optical disk . A content package downloaded from the server contains a PlayList file containing MainPath containing PlayItem and PlayItem and SubPath and a clip AV stream file for a bonus track or the like. Under this condition the PlayList file is extracted from the content package and the file system is updated so that the extracted PlayList file is substituted for the original PlayList read from the optical disk .

As shown in before updating MainPath composed of PlayItem and SubPath composed of SubPlayItem namely in the PlayList of the optical disk the clip AV stream to be referenced by PlayItem and the caption text stream to be referenced by SubPlayItem and to be reproduced in synchronization with the clip AV stream are reproduced. After updating of the contents recorded on the optical disk in other words after the file systems are merged and updated the clip AV stream corresponding to the bonus tracks is reproduced subsequent to the clip AV stream in PlayList .

When PlayItem is added as discussed above with reference to the user can enjoy the contents recorded on the optical disk loaded on the reproducing apparatus with the bonus track added thereon.

In a second example SubPath is added onto the contents recorded on the optical disk loaded on the reproducing apparatus .

For example 0x02 is described in the 8 bit operation type field. As shown in a PlayList file containing SubPath containing SubPath the clip AV stream file and audio stream file corresponding to sound of a second language are recorded on the optical disk although MainPath is also recorded on the optical disk MainPath is mentioned only if updating is closely related to MainPath . A content package downloaded from the server contains a PlayList file containing SubPath and a caption text stream file. Under this condition SubPath is extracted from the PlayList file and the file systems are merged with the extracted SubPath added to the original PlayList read from the optical disk .

As shown in before updating MainPath composed of PlayItem and SubPath composed of SubPlayItem namely in the PlayList of the optical disk a clip AV stream to be referenced by PlayItem and an audio stream being second sound data to be reproduced in synchronization with the clip AV stream and to be referenced by SubPlayItem are reproduced. In the updated PlayList with the file systems merged and thus updated a second SubPlayItem going to be reproduced in synchronization with the clip AV stream and permitting a reproduction period to be independently set is added to the sub path on the contents recorded on the optical disk . The clip AV stream to be referenced by PlayItem and the audio stream being the second sound data to be reproduced in synchronization with the clip AV stream and to be referenced by the first SubPlayItem are reproduced. Furthermore a caption text stream permitting a reproduction period to be set independent of the audio stream is also reproduced.

When SubPath is added as described with reference to the number of paths to be selected by SubPath is increased. The user can thus enjoy the additionally selected new caption.

In a third case SubPlayItem is added to the contents recorded on the optical disk loaded on the reproducing apparatus .

For example 0x03 is written on the 8 bit operation type field. As shown in the optical disk records a PlayList file containing SubPath composed of SubPlayItem a clip AV stream file and a caption text stream file. A content package downloaded from the server contains a PlayList file containing SubPath composed of SubPlayItem and a caption text stream file file. The SubPlayItem is extracted from SubPath in the PlayList file in the content package and the file system is updated so that the extracted SubPlayItem is added to the SubPath of the original PlayList file read from the optical disk .

As shown in before updating the PlayList contains MainPath composed of PlayItem and SubPath composed of SubPlayItem and the clip AV stream to be referenced by PlayItem and the caption text stream file to be reproduced in synchronization with the clip AV stream and to be referenced by SubPlayItem are reproduced. In the updated PlayList with the file systems merged and thus updated the clip AV stream to be referenced by PlayItem and the caption text stream file to be reproduced in synchronization with the clip AV stream and to be referenced by the SubPlayItem are reproduced and furthermore SubPlayItem is additionally reproduced. The caption text stream file is thus reproduced in synchronization with the clip AV stream .

As discussed above with reference to SubPlayItem in SubPath is added. The user can thus enjoy an additionally selectable caption.

In a fourth example SubPlayItem is substituted in the contents recorded on the optical disk loaded on the reproducing apparatus .

For example 0x03 may be written on the 8 bit operation type field. As shown in the optical disk records a PlayList file containing SubPath composed of SubPlayItem a clip AV stream and a caption text stream file . A content package downloaded from the server contains a PlayList containing SubPath composed of SubPlayItem and SubPlayItem and a caption text stream file . The optical disk also stores SubPlayItem . For distinction the one recorded on the optical disk is referred to as SubPlayItem and the one contained in the content package is referred to as SubPlayItem . The same is true of . The SubPlayItem and SubPlayItem are extracted from SubPath in the PlayList in the content package and the file system is updated so that the extracted SubPlayItem and SubPlayItem overwrite replace the SubPath in the original PlayList file read from the optical disk .

As shown in the PlayList contains MainPath composed of PlayItem and SubPath composed of SubPlayItem before updating. The clip AV stream to be referenced by PlayItem and the caption text stream file to be reproduced in synchronization with the clip AV stream and to be referenced by SubPlayItem are reproduced. In contrast to the contents recorded on the optical disk in the updated PlayList with the file systems merged and thus updated the clip AV stream to be referenced by PlayItem the caption text stream file to be referenced by SubPlayItem and the caption text stream file to be referenced by SubPlayItem are reproduced. The caption text reproduced in synchronization with the clip AV stream is thus added. If a reproduction period is the only difference between SubPlayItem and SubPlayItem with SubPlayItem having a longer reproduction period than SubPlayItem the reproduction period of the caption text is extended.

If SubPlayItem is substituted causing the caption text stream reproduced by the substitute SubPlayItem to be different from the original caption text stream as shown in the caption text stream reproduced in accordance with SubPlayItem in SubPath is modified. The user is thus provided with a caption that has been changed modified in the middle of reproduction.

In a fifth example a clip is added on the contents recorded on the optical disk loaded on the reproducing apparatus .

For example 0x04 may be written on the 8 bit operation type field. As shown in the optical disk records a PlayList file containing SubPath composed of SubPlayItem a clip AV stream file associated with clip and a caption text stream file corresponding to a caption of a first language. A content package downloaded from the server contains a PlayList file containing SubPath composed of SubPlayItem corresponding to clip and a caption text stream file corresponding to a caption of a second language. The clip is extracted from SubPath in the PlayList in the content package and the file system is updated so that the clip is added to the SubPlayItem forming the SubPath of the original PlayList file read from the optical disk .

As shown in in the PlayList having MainPath composed of PlayItem and SubPath composed of SubPlayItem the clip AV stream to be referenced by PlayItem and the caption text stream file of the first language caption to be reproduced in synchronization with the clip AV stream and to be referenced by SubPlayItem are reproduced before updating. In the updated PlayList with the file systems merged and thus updated the clip AV stream to be referenced by PlayItem and the caption text stream file to be referenced by SubPlayItem of the first language caption to be reproduced in synchronization with the clip AV stream are designed to be reproduced. Furthermore the clip is added to the SubPlayItem forming the SubPath. The caption text stream file of the second language to be referenced by the SubPlayItem is thus reproduced in synchronization with the clip AV stream .

The user is thus additionally provided with a caption of a selectable language if the clip is added as discussed with reference to .

AV stream data of files other than the above described files can be recorded on the optical disk and then decoded by the decoder . For AV stream data of the files other than the above described files however a virtual file system cannot be constructed using a file downloaded on the local storage . The user of the reproducing apparatus can neither add a file recorded on the optical disk nor update a portion of the file.

Distributors content authors of data may package files required for addition and updating beforehand so that downloading of the files is performed on a disk basis by directory data basis represented by disc id . In this arrangement the reproducing apparatus is freed from the editing of the PlayList file.

If a new file having the same file name as an existing file during addition or updating the new file overwrites the existing file. If a new file having a file name different from any of existing files during addition or updating the new file is added.

New data having the structure of is downloaded onto the reproducing apparatus from the server via the network . The new data is stored on the local storage in accordance with a path name indicated by the src file name field written in the manifest as the metadata. A path in the virtual file system is set based on a path name indicated by the dst file name written on the manifest . An application of the reproducing apparatus for example an application performing a reproduction process can thus process without difference the data recorded on the optical disk and the data recorded on the local storage based on the virtual file system namely the path indicated by the dst file name field.

The application program executed by the reproducing apparatus is described below. Upon receiving a data addition command download command the application program for performing a data addition process transmits manifest files all or part of the manifest files responsive to the command to the server via the network and acquires a content list of contents that can be currently added. The application program displays the list of additional contents to the user and the user selects a content to be downloaded from the displayed list of contents.

When the user has selected the content to be downloaded an application capable of downloading the data from the server may or may not be the same application program as the application program that can perform the data addition process and data reproduction process starts downloading the data.

When the downloading application program completes the downloading operation a downloaded file package group is mounted on the virtual file system by an application for managing the file system. Through the static binding or the dynamic binding the native file system is synchronized with the virtual file system.

A file deletion process to delete a file in response to a user operation input is described below. The reproducing apparatus displays a menu screen showing a list of files on an auxiliary storage device using the manifest file. Viewing the menu screen the user deletes a file from the virtual file system on a file basis on a per content basis or on a disk basis.

For example the deletion of the file from the virtual disk on a per content basis means to the user that an English caption or a Japanese dubbed in voice not recorded on the optical disk but newly recorded on the virtual file system through downloading is selected on a per content basis and that the corresponding file group is deleted.

For example the file addition and updating process is performed on the optical disk loaded on the reproducing apparatus as described with reference to and the clip AV stream corresponding to the bonus track is added. The file addition and updating process described with reference to is performed and the caption text stream corresponding to the SubPath of the new caption is added. The file addition and updating process described with reference to is performed. The SubPlayItem is added and thus the caption text stream corresponding to the additional caption with SubPlayItem in the SubPath extended is thus added. As shown in the content recorded on the virtual file system of the virtual disk includes the PlayList containing the SubPath the SubPlayItem the SubPath and the SubPlayItem the clip AV stream the clip AV stream and caption text streams through . As shown in the clip AV stream and the clip AV stream are consecutively reproduced in accordance with the main path specified by the PlayItem. The caption text stream and the caption text stream are reproduced in accordance with the SubPath specified by the PlayItem . The caption text stream is reproduced in accordance with the SubPath specified by the SubPlayItem . In this condition the user may issue a command to start a deletion process of any file.

The local storage directory manager in the controller controls the data acquisition unit thereby accessing the server via the Internet interface and the network . For example the local storage directory manager transmits to the server information indicating the current status of the virtual file system such as manifest id relating to the content reproduced in accordance with the PlayList . The local storage directory manager then receives information relating to updatable data namely information indicating a list of deletable files. The menu screen display controller displays the list of deletable files to the user as shown in . French caption bonus track and Japanese additional caption are included in the list of deletable files.

If the user selects to delete the bonus track the local storage directory manager deletes a file corresponding to the bonus track selected by the user. The local storage directory manager can delete a file related to the manifest file within a file package corresponding to the bonus track thereby deleting the corresponding manifest section itself in the manifest file.

A file recorded on the local storage is not necessarily referenced by a single PlayItem only. More specifically the deletion process can cause a malfunction in the reproduction process of another area.

More specifically a caption text stream file n n is an integer referenced in the bonus track to be deleted is designed to be reproduced in synchronization with an AV stream file not to be deleted. However if the caption text stream file n is also deleted in response to the deletion of the bonus track the caption text stream file n cannot be reproduced in synchronization with the undeleted AV stream file.

The file system merge processor determines whether the deletion process in the virtual file system causes a malfunction in the reproduction process of another area. If a link structure among data units is destroyed leading to a malfunction the file system merge processor detects a data file required to reproduce another area and commands the data acquisition unit to transmits to the server a signal requesting the downloading of the data file and receives the required data file downloaded from the server . As previously discussed the local storage directory manager expands the data file on the local storage .

The file system merge processor performs a binding process on the virtual file system at the above described timing regardless of whether a new file is downloaded or not. The content is thus reproduced based on the virtual file system with the file selected by the user deleted therefrom.

The file deletion from the virtual disk performed on a disk basis means that all file groups contained in a directory corresponding to the disc id on the local storage are deleted. For example all files related to the manifest file under disc id are deleted and then the manifest sections are also deleted.

An added file or an update file downloaded to be merged with the content of the optical disk and bound to the virtual file system is deleted. To the user the file deletion seems equivalent to initializing the optical disk having the original contents only .

In step S the operation input acquisition unit in the controller determines based on a signal supplied from the operation input unit whether a command to start a disk basis addition process namely an addition process of a file contained in a directory represented by the predetermined disc id identifier has been received. If it is determined in step S that the command to start the file addition process has not been received the operation input acquisition unit repeats step S until it is determined that the start command has been received.

If it is determined in step S that the command to start the file addition process has been received the local storage directory manager in the controller controls the data acquisition unit in step S thereby accessing the server via the Internet interface and the network to transmit information indicating the status of the current virtual file system such as the manifest id identifier of the manifest section to the server .

In step S the data acquisition unit controls the Internet interface thereby determining whether information corresponding to the list of downloadable files has been received from the server via the network .

If it is determined in step S that the information corresponding to the list of downloadable files has not been received the menu screen display controller controls in step S displaying of an error message notifying the user that the file addition process is disabled and then ends the process.

If it is determined in step S that the information corresponding to the list of downloadable files has been received the data acquisition unit supplies in step S the menu screen display controller with information regarding the list of downloadable files transmitted from the server and received via the Internet interface . The menu screen display controller causes a display device to display a menu screen of the list of downloadable files from which the user is allowed to select one.

In step S the operation input acquisition unit determines whether the user has selected an item to be added using one of buttons and icons on the menu screen displayed under the control of the menu screen display controller . If it is determined in step S that any item the user may want to add has not been selected step S is repeated until it is determined that any item has been selected.

If it is determined in step S that the item the user may want to add has been selected the operation input acquisition unit supplies in step S to the data acquisition unit information indicating the content of updating selected by the user. The data acquisition unit controls the Internet interface and transmits information indicating a requested file to the server to request the server to send back the file selected by the user.

In step S the data acquisition unit controls the Internet interface thereby causing the server to download one of a PlayList file a ClipInformation file a clip AV stream file an audio file a caption text stream file and a font file prepared as download files. The data acquisition unit then notifies the local storage directory manager that these files have been downloaded.

In step S the local storage directory manager determines whether the local storage has already stored directories identified by the author id and disc id identifiers contained in the manifest of the downloaded files. If the corresponding directory is present on the local storage the downloaded data file is expanded on that directory. If no corresponding directory is present a new directory specified by the author id and disc id identifiers is created and the downloaded data file is then expanded thereon.

Through this process the update file is downloaded from the server stored on the local storage and handled as an update file of the content recorded on the optical disk .

For example a user purchases an optical disk having a content such as a movie recorded thereon. The user then acquires a file required to display a caption of a language unrecorded on the optical disk or a file required to view a bonus track and then stores those files on the local storage . The application program for performing the reproduction process can thus handle the data recorded on the optical disk and the data recorded on the local storage without any difference. As a result a virtual file system that hides the storage of physical data from the user and the application program is produced.

In step S the local storage directory manager extracts a directory of a corresponding disc id from a downloaded data group stored on the local storage and then supplies the directory to the file system merge processor .

In step S the file system merge processor references the src file name and dst file name fields in the manifest file.

In step S the file system merge processor binds a native file system to a virtual file system based on the src file name and dst file name.

More specifically the src file name presents a path name representing a path i.e. information uniquely identifying where the corresponding file is recorded in the directory structure in the file system of the local storage . The dst file name field presents a path name representing a path i.e. information uniquely identifying where the corresponding file is recorded in the directory structure at a binding destination in the virtual disk of the file stored on the local storage .

For example in the manifest section described with reference to MainMovie movie01 main.r1.jp.mp2 as a path name might be specified in the src file name field and STREAM 01002.m2ts as a path name might be specified in the dst file name field. As previously discussed with reference to the downloaded data is stored under a file name of main.r1.jp.mp2 in a movie01 folder in MainMovie folder on the local storage in accordance with the author id and disc id identifiers. In the virtual file system on the virtual disk the file system merge processor performs the binding process so that the downloaded data is handled as a file having a file name of 01002.m2ts in a STREAM directory.

The content author can specify the path name in the local storage in the src file name field of the manifest section of the downloaded file package and the path name of the virtual file system on the virtual disk in the dst file name field. If the path name adapted to the virtual file system on the virtual disk i.e. adapted to the file system of the optical disk is set in the dst file name field the content author can freely set the file directory structure under the disc id identifier and add newly a directory and a file in an area under the disc id identifier of the data actually recorded on the local storage in the reproducing apparatus .

An addition and updating process performed on a disk basis is described below with reference to a flowchart of .

In step S the operation input acquisition unit in the controller determines based on a signal supplied from the operation input unit whether a command to start the disk basis file addition and updating process i.e. the file addition and updating process of a file under the disc id identifier of the data to be recorded on the local storage has been received. If it is determined in step S that the command to start the file addition process has not been received the operation input acquisition unit repeats step S until the start command has been received.

If it is determined in step S that the command to start the file addition process has been received the local storage directory manager in the controller controls the data acquisition unit in step S thereby accessing the server via the Internet interface and the network to transmit information indicating the status of the current virtual file system such as the manifest id identifier of the manifest section under the disc id identifier to the server .

In step S the data acquisition unit controls the Internet interface thereby determining whether information corresponding to the list of downloadable disk basis files has been received from the server via the network .

If it is determined in step S that the information corresponding to the list of downloadable disk basis files has not been received the menu screen display controller controls in step S displaying of an error message notifying the user that the file addition process is disabled and then ends the process.

If it is determined in step S that the information corresponding to the list of downloadable files has been received the data acquisition unit supplies in step S the menu screen display controller with information regarding the list of downloadable files transmitted from the server and received via the Internet interface . The menu screen display controller causes a display device to display a menu screen of the list of downloadable files from which the user is allowed to select one.

In step S the operation input acquisition unit determines whether the user has selected an item to be added using one of buttons and icons on the menu screen displayed under the control of the menu screen display controller . If it is determined in step S that any item the user may want to add has not been selected step S is repeated until it is determined that any item has been selected.

If it is determined in step S that an item the user may want to add has been selected the operation input acquisition unit supplies in step S to the data acquisition unit information indicating the content of updating selected by the user. The data acquisition unit controls the Internet interface and transmits information indicating a requested file to the server to request the server to send back the file selected by the user.

In step S the data acquisition unit controls the Internet interface thereby causing the server to download a disk basis file group prepared as download files. The data acquisition unit then notifies the local storage directory manager that the disk basis file group have been downloaded.

In step S the local storage directory manager generates on the local storage directories identified by the author id and disc id identifiers contained in the manifest of the downloaded files. The local storage directory manager then expands the downloaded disk basis data on the generated directories on the local storage .

Through this process the update file is downloaded from the server stored on the local storage and handled as an update file of the content recorded on the optical disk .

For example a user purchases an optical disk having a content such as a movie recorded thereon. The user then acquires on a disk basis a file required to display a caption of a language unrecorded on the optical disk a file required to view a bonus track and the like and then stores those files on the local storage . The application program for performing the reproduction process can thus handle the data recorded on the optical disk and the data recorded on the local storage without any difference. As a result a virtual file system that hides the storage of physical data from the user and the application program is produced.

As the downloading of the update file on a file basis the downloading of the update file on a disk basis may be performed free of charge or for a fee.

The downloading of the update file on a file basis has been discussed with reference to and the downloading of the update file on a disk basis has been discussed with reference to . Alternatively the user can issue a command to start downloading files without paying attention to the difference between file basis downloading and disk basis downloading. More specifically depending on whether the data to be downloaded from the server is on a file basis or a disk basis the method of the local storage directory manager for expanding the data downloaded to the local storage is changed.

In step S the operation input acquisition unit in the controller determines based on a signal supplied from the operation input unit whether a command to start the file basis file deletion process i.e. the file deletion process of a file on a directory under the disc id identifier has been received. If it is determined in step S that the command to start the file basis deletion process has not been received the operation input acquisition unit repeats step S until it is determined that the start command has been received.

If it is determined in step S that the command to start the file basis deletion process has been received the local storage directory manager in the controller controls the data acquisition unit in step S thereby accessing the server via the Internet interface and the network to transmit information indicating the status of the current virtual file system such as the manifest id identifier of the manifest section to the server .

In step S the data acquisition unit controls the Internet interface thereby determining whether updatable information i.e. information corresponding to a list of deletable items has been received from the server via the network .

If it is determined in step S that the information corresponding to the list of updatable items has not been received the menu screen display controller controls in step S displaying of an error message notifying the user that the file deletion process is disabled and then ends the process.

If it is determined in step S that the information corresponding to the list of updatable items has been received the data acquisition unit supplies in step S the menu screen display controller with information regarding the list of updatable items transmitted from the server and received via the Internet interface . The menu screen display controller causes the display device to display a menu screen of the list of updatable items from which the user is allowed to select one.

In step S the operation input acquisition unit determines whether the user has selected an item to be deleted using one of buttons and icons on the menu screen displayed under the control of the menu screen display controller . If it is determined in step S that any item the user may want to delete has not been selected step S is repeated until it is determined that any item has been selected.

If it is determined in step S that an item the user may want to delete has been selected the operation input acquisition unit supplies in step S to the local storage directory manager information indicating the item the user has selected as an item to be deleted. The local storage directory manager deletes the selected file from the local storage .

In step S the file system merge processor determines whether the deletion process executed in step S can cause any malfunction in the link structure of the files in the virtual file system. If it is determined in step S that no malfunction can be caused in the link structure of the files in the virtual file system processing proceeds to step S.

If it is determined in step S that a malfunction can be caused in the link structure of the files in the virtual file system the file system merge processor extracts in step S a data file or a folder or a directory required to correct the malfunction and supplies the data file to the data acquisition unit . The data acquisition unit controls the Internet interface and transmits information indicating a requested file to the server to request the server to download the file selected by the user. The data acquisition unit controls the Internet interface thereby downloading the file required to correct the malfunction and prepared by the server . The data acquisition unit then notifies the local storage directory manager that these files have been downloaded.

In step S the local storage directory manager determines whether the local storage stores a directory identified by the author id and disc id identifiers contained in the manifest of the downloaded file. If the corresponding directory is present on the local storage the local storage directory manager expands the downloaded data file on that directory. If no corresponding directory is present on the local storage the local storage directory manager generates a new directory specified by the author id and disc id identifiers on the local storage and expands the downloaded data file there.

If it is determined in step S that no malfunction can be caused in the link structure of the files in the virtual file system or subsequent to step S the file system merge processor determines in step S whether a file having become unnecessary as a result of the file deletion process in step S such as a file not to be reproduced by any PlayList file unspecified by all PlayLists is set to be deleted. If it is determined in step S that an unnecessary file is set to be left rather than being deleted processing proceeds to step S.

If it is determined in step S that the unnecessary file is set to be deleted the file system merge processor extracts in step S the unnecessary file and commands the local storage directory manager to delete the unnecessary file. In response to the command from the file system merge processor the local storage directory manager deletes the unnecessary file recorded on the local storage .

If it is determined in step S that the unnecessary file is set to be left rather than being deleted the binding process discussed with reference to is performed in step S subsequent to step S.

Through the above described process steps the update file downloaded from the server and then stored on the local storage is deleted on a file basis namely by file unit containing the directory specified by the disc id identifier.

In step S the operation input acquisition unit in the controller determines based on a signal supplied from the operation input unit whether a disk basis deletion command namely a command to start deleting all files contained in the directory specified by the disc id identifier has been received. If it is determined in step S that the command to start the disk basis deletion process has not been received step S is repeated until it is determined that the command to start the disk basis deletion process has been received.

If it is determined in step S that the command to start the disk basis deletion command has been received the file system merge processor extracts in step S a manifest file corresponding to the portion to be deleted for example the manifest file corresponding to the author id and disc id identifiers of the optical disk loaded on the reproducing apparatus and causes the local storage directory manager to read the corresponding manifest file.

In step S the local storage directory manager deletes a file associated with the manifest file from the local storage based on the read manifest file.

In step S the local storage directory manager deletes the manifest file corresponding to the deleted portion from the local storage .

All files contained in the directory identified by the disc id identifier are deleted and the manifest file corresponding to the deleted files is also deleted. In the binding process the file system merge processor binds zero directory and zero file because no manifest file is found i.e. binds nothing and ends the binding process. Finally the file directory structure on the optical disk is managed as a virtual file system.

The update files downloaded from the server and recorded on the local storage is deleted as all files contained in the directory identified by the disc id identifier.

As the file basis file addition and deletion process the disk basis file deletion process may be performed by transmitting information indicating the current virtual disk virtual file system to the server and receiving information regarding updatable content from the server . Based on the information regarding the updatable content the deletion process may be performed.

A reproduction process and a file system configuration process are described below with reference to a flowchart of . The binding method used herein is the static binding.

In step S the optical disk directory manager determines whether the optical disk is loaded. If it is determined in step S that the optical disk is not loaded step S is repeated until it is determined that the optical disk is loaded. If it is determined in step S that the optical disk is loaded the optical disk directory manager reads the author id and disc id identifiers from the optical disk and outputs the read author id and disc id identifiers to the local storage directory manager and the file system merge processor . Processing proceeds to step S. The binding process described with reference to is executed.

In step S the reproduction controller determines based on an operation input supplied via the operation input acquisition unit by the user whether a user command input to reproduce a content has been received. If it is determined in step S that no user command input to reproduce a content has not been received processing proceeds to step S.

If it is determined in step S that the user command input to reproduce the content has been received the reproduction controller controls in step S the local storage directory manager and the optical disk directory manager thereby acquiring the PlayList and the SubPlayItem by which the navigation program specifies a reproduction period. The reproduction controller further controls the local storage directory manager and the optical disk directory manager thereby reading stream files an AV file an audio file a caption text stream file referenced by the acquired PlayList and SubPlayItem and supplying the read stream files to the decoder . A timestamp represented by the PlayList and SubPlayItem is Converted into address in accordance with the clip information and accessing to the AV stream is thus performed.

In step S the reproduction controller controls the decoder thereby reproducing the content specified by the PlayItem.

In step S the operation input acquisition unit determines whether an operation input command to switch a reproduction title content to be reproduced has been received. If it is determined in step S that the operation input command to switch the reproduction title has not been received processing proceeds to step S.

If it is determined in step S that the operation input command to switch the reproduction title has been received the operation input acquisition unit supplies a signal responsive to the user operation input to the optical disk directory manager . The optical disk directory manager reads the author id and disc id identifiers from the optical disk and outputs the read author id and disc id identifiers to the local storage directory manager . Processing proceeds to step S. The binding process described with reference to is executed. Subsequent to the end of step S processing returns to step S to repeat step S and subsequent steps.

If it is determined in step S that the operation input command to reproduce the content has not been received or if it is determined in step S that the operation input command to switch the reproduction title has not been received the operation input acquisition unit determines in step S whether one of a file addition command and a file deletion command has been received from the user.

If it is determined in step S that one of the file addition command and the file deletion command has been received from the user one of the data acquisition unit and the local storage directory manager executes in step S one of the file addition process and the file deletion process as previously discussed with reference to and through .

If it is determined in step S that none of the file addition command and the file deletion command has been received or subsequent to step S the operation input acquisition unit determines in step S whether a command to update the virtual file system has been issued.

If it is determined in step S that the command to update the virtual file system has been issued API such as update defined to update the virtual file system is called. In step S the binding process described with reference to is executed.

If it is determined in step S that the command to update the virtual file system has not been issued or subsequent to step S the operation input acquisition unit determines in step S whether a command to end the process of the reproducing apparatus such as a command to end the application program or a command to power off the reproducing apparatus has been issued.

If it is determined in step S that the command to end the process of the reproducing apparatus has not been issued processing returns to step S to repeat step S and subsequent steps. If it is determined in step S that the command to end the process of the reproducing apparatus has been issued the process thus ends.

Through the process steps the data recorded on the optical disk and the data downloaded from the server and stored on the local storage are bound to each other to construct a virtual file system at a predetermined timing and the content is reproduced based on the virtual file system.

The update file of the content recorded on the optical disk is downloaded and then stored on the local storage in the reproducing apparatus . The content file recorded on the optical disk and the update file stored on the local storage are thus easily handled.

More specifically the virtual file system is defined as an upper layer of the native file system of the reproducing apparatus file system of the data actually recorded on one of the optical disk and the local storage . The file systems of the data actually recorded on the optical disk and the local storage are merged to produce the virtual file system. The manifest file as the metadata of the downloaded data contains an author id identifier uniquely identifying a content originator and a disc id identifier uniquely identifying the optical disk bearing the content created by the content originator identified by the author id identifier.

The disk area of the local storage contains a directory structure which is segmented on a per content supplier content author basis. In a disc id directory immediately below the author id identifier the content author may configure a flexible file directory structure. The location of the data stored in the disk area on the local storage namely the file directory structure of the downloaded file is described as a path name in the src file name field of the manifest data contained in the downloaded data.

The file directory structure of the virtual disk accessible from the application complies with the file directory structure of the optical disk . A path name uniquely identifying a binding destination in the virtual disk of the file stored on the local storage is specified in the dst file name field of the manifest data contained in the downloaded data.

With this arrangement the file directory structure of the local storage is hidden from the application program executed by the reproducing apparatus and the user.

It is also possible to delete part of a file recorded on the local storage . At a predetermined timing after the deletion of part of the file the binding process is again executed and a new virtual file system is generated. If the deletion of the file causes a malfunction in the link structure of the files in the virtual file system a file required to correct the malfunction is extracted and then downloaded from the server .

In the discussion of the above referenced process the downloading of files from the server is preformed from the command of the user. The server may be accessed to download the files therefrom immediately subsequent to the loading of the optical disk onto the reproducing apparatus.

As previously discussed with reference to the Index file recorded on the optical disk contains information regarding a menu for reproducing the optical disk . The reproducing apparatus causes a display device to display a reproduction menu screen based on the Index file. The reproduction menu screen shows items for reproducing all contents on the optical disk reproducing a particular chapter only reproducing repeatedly a particular chapter and displaying an initial menu. MovieObject that is executed with any item selected is set in the Index file. When a user selects one item from the reproduction menu screen the reproducing apparatus executes a MoveObject command set in the Index file.

A version number field includes a four character string representing a version number of Index.bdmv namely the value 0089 encoded based on ISO 646.

A Indexes field includes a link to an application MovieObject for reading a menu searching a title jumping to a predetermined title or automatically initiating the optical disk when the optical disk is loaded on the reproducing apparatus . The syntax of the Indexes will be described later with reference to .

FirstPlayback is a data block containing information relating to Movie Object that is automatically performed first when the optical disk is loaded onto the reproducing apparatus .

A FirstPlayback mobj id ref field specifies a value of mobj id of the first performed Movie Object. The mobj id is an ID uniquely identifying the respective Movie Object. The Movie Object that is automatically performed in response to the loading of the optical disk onto the reproducing apparatus may not be set. In other words any application is not executed in response to a mere loading of the optical disk onto the reproducing apparatus but executed in response to a subsequent command from a user. In such a case OXffff is written in this field.

A TopMenu is a data block containing information regarding the Movie Object of TopMenu called when the user displays a menu screen.

A TopMenu mobj id ref field specifies the value of mobj id of the Movie Object of TopMenu. If TopMenu is not set in the optical disk OXFFFF is written in this field.

A Title title id block includes information regarding each title uniquely identified by title id. The assigned title id starts with zero.

A Title playback type title id field represents a playback type of a title identified by the title id. If the title is a content containing a moving image and audio a reproduction process is performed based on PlayList.

A Title access type title id field includes information indicating whether the reproduction of the title identified by title id using Title Search is permitted.

A Title mobj id ref title id field specifies the value of mobj id of the Movie Object having the title identified by title id entered.

In FirstPlayback of the Index file Index.bdmv discussed with reference to an application may be specified to transmit information indicating the state of a current virtual file system. In such a case the reproducing apparatus accesses the server immediately in response to the loading of the optical disk onto the reproducing apparatus transmits information indicating the state of own virtual file system and downloads files as necessary.

A CPU Central Processing Unit executes a variety of processes in accordance with a program stored on a ROM Read Only Memory and a program loaded to a RAM Random Access Memory . The RAM stores data required by the CPU in the execution of the processes.

The CPU the ROM and the RAM are interconnected to each other via a bus . The bus connects to an input output interface .

Also connected to the input output interface are an input unit including a keyboard and a mouse an output unit including a display and a loudspeaker a storage unit including a hard disk and a communication unit including a modem and a terminal adaptor. The communication unit performs a communication process via the network such as the Internet.

The input output interface is also connected to a drive as necessary. One of a magnetic disk an optical disk a magneto optical disk and a semiconductor memory is loaded onto the drive . A computer program read from one of these recording media is installed onto the storage unit as necessary.

A virtual file system information acquisition unit acquires information supplied from the reproducing apparatus via the network and indicating the state of a current virtual file system of the reproducing apparatus and then supplies the information to a download file determiner .

Based on the information supplied by the virtual file system information acquisition unit and indicating the state of the current virtual file system of the reproducing apparatus the download file determiner selects based on management of the schedule of a schedule manager a file that the reproducing apparatus can download. The download file determiner generates a list of files and supplies the list of files to a control information transmission and reception controller thereby causing the control information transmission and reception controller to supply the list of files to the reproducing apparatus via the network . In response to the reception of information specifying a file desired to be downloaded from control information transmission and reception controller the download file determiner reads from a content database content data to be downloaded or reads from a manifest file database a manifest file to be downloaded. The download file determiner then supplies the read content data and the manifest file to a file transmitter thereby transmitting the content data and the manifest file to the reproducing apparatus via the network .

The schedule manager manages a schedule that the download file determiner uses to select contents downloadable to the reproducing apparatus . By managing the selection of the contents downloadable to the reproducing apparatus in time sequence the server can update for example advertisements to be reproduced on the reproducing apparatus . The schedule manager manages a download permit schedule on a per content basis. For example the schedule manager downloads a movie A as a content while downloading a preview of a movie B until a predetermined date. After the predetermined date the schedule manager inhibits the downloading of the movie B and then downloads a preview of another movie C.

For example in the download permit schedule the schedule manager permits a given commercial film to be downloaded as one matching the current season or a particular content to be downloaded during a predetermined campaign period only. Furthermore the schedule manager manages the download permit schedule on a per manifest file as to whether to permit each manifest file to be downloaded. More specifically the schedule manager permits an update manifest file to be downloaded to the reproducing apparatus for a predetermined period of time or subsequent to a predetermined date and time. In this way the schedule manager modifies files recognizable by the reproducing apparatus .

The download permit schedule may be managed as table information that lists an ID uniquely identifying each content and each manifest file and download start date or download permit period. The download permit schedule may be managed creating a database therefor. If a content such as a CM or a manifest file downloaded together with a predetermined content is managed in time sequence the download permit schedule may be managed as table information. The table information may list an ID uniquely identifying a content an ID uniquely identifying a content or a manifest file downloaded together with the content and a download start date or a download permit period of a file downloaded together with the content. As another method a database may be created to manage the download permit schedule.

The content database stores content data downloaded from the server to the reproducing apparatus . The manifest file database stores manifest files downloaded together with the content from the server to the reproducing apparatus .

The control information transmission and reception controller controls transmission and reception of control information via the network between the server and the network . More specifically the control information transmission and reception controller controls to the reproducing apparatus the transmission of information indicating a list of downloadable contents supplied from the download file determiner . The control information transmission and reception controller also controls from the reproducing apparatus the reception of information indicating a file desired to be downloaded thereby supplying the file to the download file determiner . The file transmitter controls to the reproducing apparatus the transmission of the file supplied from the download file determiner for downloading.

The process of the reproducing apparatus and the server is described below with reference to a flowchart of . In the process the reproducing apparatus accesses the server immediately after the optical disk is loaded and downloads files as necessary.

In step S the optical disk drive in the optical disk determines whether the optical disk is loaded. If it is determined in step S that the optical disk has not yet been loaded step S is repeated until it is determined that the optical disk has been loaded.

If it is determined in step S that the optical disk has been loaded the controller controls the optical disk drive in step S to load data in a predetermined area of the loaded optical disk namely data written in the FirstPlayback of the above mentioned Indexes . The controller expands the data onto the memory and reads and initiates an application specified in the FirstPlayback . The application specified by data written in the FirstPlayback accesses the server to download files as necessary.

In step S the local storage directory manager in the controller controls the data acquisition unit thereby accessing the server via the Internet interface and the network . The local storage directory manager thus transmits to the server information indicating the state of the current virtual file system for example Manifest id of the Manifest section corresponding to disc id of the loaded optical disk .

In step S the virtual file system information acquisition unit in the server receives the information indicating the state of the current virtual file system from the reproducing apparatus via the network and supplies the information to the download file determiner .

In step S the download file determiner references the supplied information indicating the state of the current virtual file system and determines whether file updating is possible to the reproducing apparatus . If it is determined in step S that file updating is not possible processing ends.

If it is determined in step S that file updating is possible the download file determiner references in step S the schedule managed by the schedule manager and determines whether the reproducing apparatus has a content in need of updating. The schedule manager manages the schedule for use in selection of a content downloadable to the reproducing apparatus .

If it is determined in step S that the reproducing apparatus has no content in need of updating the download file determiner in the server supplies in step S the control information transmission and reception controller with information notifying the reproducing apparatus that there is no downloadable file. The control information transmission and reception controller transmits to the reproducing apparatus the information notifying the reproducing apparatus that there is no downloadable file.

In step S the data acquisition unit in the controller in the reproducing apparatus receives from the server via the network the notification that there is no downloadable file and supplies the menu screen display controller with the notification. The menu screen display controller notifies the user that there is no downloadable file by displaying a message to that effect. The reproducing apparatus waits on standby for an operation input from the user.

If it is determined in step S that there is a content in need of updating the download file determiner in the server generates in step S information corresponding to a list downloadable files and supplies the control information transmission and reception controller with the information. The control information transmission and reception controller transmits to the reproducing apparatus via the network the information corresponding to the list of downloadable files.

In step S the data acquisition unit in the controller in the reproducing apparatus receives the information corresponding to the list of downloadable files from the server via the network and supplies the menu screen display controller with the received information. The menu screen display controller causes the display device to display a menu screen from which the user can select a desired file on the list of the downloadable files.

In step S the operational input acquisition unit in the controller in the reproducing apparatus determines whether a command to add a content has been received from the user. If it is determined in step S that no command has been received step S is repeated until it is determined the command to add the content has been received.

If it is determined in step S that the command to add the content has been received the operational input acquisition unit supplies in step S the data acquisition unit with information indicating update content selected by the user. The data acquisition unit controls the Internet interface thereby transmitting information indicating a requested file to the server and requesting the server to download the file requested by the user.

In step S the download file determiner receives a signal indicating the download requested file transmitted from the reproducing apparatus via the network and supplies the download file determiner with the signal.

In step S the download file determiner reads the requested file from one of the content database and the manifest file database and supplies the file transmitter with the read file. The file transmitter transmits the request file to the reproducing apparatus via the network .

In step S the data acquisition unit in the controller in the reproducing apparatus controls the Internet interface thereby causing the server to download a PlayList file a ClipInformation file a ClipAV stream file an audio file a caption text stream file or a font file as a download file and then notifies the local storage directory manager that these files have been downloaded.

In step S the local storage directory manager determines based on author id and disc id contained in Manifest of the downloaded file whether a directory identified by these IDs is already present in the local storage . If it is determined in step S that the corresponding directory is already present the downloaded data file is expanded onto that directory. If there is no corresponding directory a new directory specified by author id and disc id is created in the local storage and the downloaded data file is then expanded onto that directory.

If the application to access the server and transmit the information indicating the state of the current virtual file system is specified in the FirstPlayback of the Index file Index.bdmv the reproducing apparatus accesses the server immediately subsequent to the loading of the optical disk transmits the information indicating the state of own virtual file system and downloads a file as necessary.

As described above the server manages the schedule for use in selection of the contents downloadable to the reproducing apparatus . For example the server downloads a movie A as a content while downloading a preview of a movie B until a predetermined date. After the predetermined date the server inhibits the downloading of the movie B and then downloads a preview of another movie C. Furthermore the server manages the download permit schedule on a per content basis or on a manifest file basis so that an update manifest may be downloaded to the reproducing apparatus after a predetermined date or during a predetermined period of time. In this way the server updates the files recognizable by the reproducing apparatus .

In the above described process the content downloaded from the server is not encrypted. An encryption key may be stored on the optical disk and a new decryption processor may be arranged in the reproducing apparatus. Alternatively the controller in the reproducing apparatus may have the decryption function using an encryption key and a content downloaded from the server is decrypted using the encryption key recorded on the optical disk and is then subjected to the binding process.

A reproducing apparatus is basically identical to the reproducing apparatus of except that a decryption processor is included.

The decryption processor receives an encryption key that the optical disk drive has read from the optical disk and also receives a data file as an encrypted content from the local storage . Under the control of the controller the decryption processor decrypts the content and supplies the decrypted content to one of the memory and the decoder .

A process performed by the reproducing apparatus of and the server is described below with reference to a flowchart of .

The process performed by the reproducing apparatus in steps S through S is basically identical to the process performed by the reproducing apparatus in steps S through S of .

When the optical disk is loaded the data recorded on a predetermined area of the loaded optical disk is loaded and the application to download the file as necessary is performed with the server being accessed by the reproducing apparatus . The information indicating the state of the current virtual file system i.e. Manifest id of the corresponding Manifest section is transmitted to the server .

In step S the optical disk drive reads the encryption key from the optical disk and then supplies the decryption processor with the encryption. The decryption processor stores the supplied encryption key.

The process performed by the reproducing apparatus and the server in steps S through S is basically identical to the process performed by the reproducing apparatus and the server in steps S through S of .

More specifically the server receives from the reproducing apparatus the information indicating the state of the current virtual file system and determines whether file updating is possible in the reproducing apparatus . If it is determined that file updating is possible the server references the schedule managed by the schedule manager and determines whether the reproducing apparatus has a content in need of updating.

If it is determined that there is no content in need of updating the server transmits to the reproducing apparatus via the network information notifying the reproducing apparatus that there is no downloadable file. Upon receiving from the server via the network the notification that there is no downloadable file the reproducing apparatus displays a message to notify the user that there is now no downloadable file. The reproducing apparatus waits on standby for an operation input from the user.

If it is determined that there is a content in need of updating the server generates information corresponding to a list of downloadable files and transmits the list to the reproducing apparatus via the network . The reproducing apparatus receives the information corresponding to the list of downloadable files from the server via the network and causes the display device to display a menu screen from which the user can select a desired one from the list of downloadable files.

The reproducing apparatus determines whether a command to add a content has been received from the user. If it is determined that the command has been received the reproducing apparatus transmits to the server information indicating update content selected by the user.

The server receives a download requested file from the reproducing apparatus via the network reads a requested file from one of the content database and the manifest file database and transmits the requested file via the network .

The reproducing apparatus downloads from the server one of a PlayList file a ClipInformation file a ClipAV stream file an audio file a caption text stream file and a font file.

In step S the local storage directory manager in the controller in the reproducing apparatus determines whether or not the downloaded file is an encrypted one.

If it is determined in step S that the downloaded file is encrypted the local storage directory manager determines in step S whether the downloaded file is decryptable with the encryption key supplied from the optical disk to the decryption processor .

If it is determined in step S that the downloaded file is not decryptable with the encryption key recorded on the optical disk the local storage directory manager controls the menu screen display controller in step S thereby outputting an error message notifying the user that the downloaded file cannot be decrypted.

If it is determined in step S that the downloaded file is decryptable with the encryption key recorded on the optical disk the local storage directory manager controls the decryption processor in step S thereby decrypting the downloaded file.

If it is determined in step S that the downloaded file is not encrypted or subsequent to step S the local storage directory manager determines in step S based on author id and disc id contained in Manifest of the downloaded file whether the directory identified by these IDs is already present on the local storage . If it is determined that the corresponding directory is already present the downloaded data file is expanded onto that directory. If there is no corresponding directory a new directory specified by author id and disc id is created on the local storage and the downloaded data file is then expanded onto that directory in the local storage .

Even if only the Index.bdmv file and the encryption key are stored on the optical disk the specified file is downloaded with the optical disk loaded onto the reproducing apparatus . The specified file is then decrypted with the encryption key recorded on the loaded optical disk . The decrypted file is then expanded onto the local storage namely stored in a file system of the local storage . When the optical disk is loaded next time the download process and the decryption process are no longer necessary and the content previously downloaded and expanded is simply reproduced. Only a portion of the content may be recorded on the optical disk . As long as the Index.bdmv file and the encryption key for performing the above processes are recorded the remaining content data file is automatically downloaded with the optical disk loaded on the reproducing apparatus decrypted with the encryption key recorded on the loaded optical disk and expanded onto the local storage in the file system of the local storage . More specifically even if all content data is not recorded on the optical disk distributed to the user the user enjoys the content through the above described processes in the same manner as when all content data recorded on the optical disk is distributed to the user. Unauthorized downloading of the content is thus prevented.

A content author distributes the optical disk to each user thereby supplying a large volume content regardless of the size of the optical disk even if the capacity of the optical disk is not sufficient .

In the above described processes a path name in the local storage is specified in the src file name field of the Manifest section of the downloaded file package and a path name of the virtual file system in the virtual disk is specified in the dst file name field. Alternatively not only the path name in the local storage but also a path name of the data on the optical disk may be specified in the src file name field.

By inhibiting accessing to a predetermined file in the description of index.bdmv a portion of a file recorded on the optical disk is hidden from the application program to be executed by the reproducing apparatus also the reproducing apparatus hereinafter or hidden from the user. On later days the Manifest section having the Manifest id corresponding to the optical disk is downloaded from the server to the reproducing apparatus . The Manifest section includes the src file name field in which the path name of the data of the hidden file on the optical disk is specified and the dst file name field in which the predetermined path name in the virtual file system is written. The application program executed on the reproducing apparatus allows the file pre recorded on the optical disk to be handled in the same manner as the one newly downloaded at the same timing as the downloading of the new Manifest section.

The Manifest section having the path name of the data of the optical disk specified in the src file name field and the predetermined path name in the virtual file system written in the dst file name field is managed by the schedule manager . The downloading of the Manifest section may be performed when the optical disk is loaded onto the reproducing apparatus or when the user of the reproducing apparatus performs a predetermined process such as performing a registration process or a billing process subsequent to accessing the server .

The path name of the data on the optical disk is specified in the src file name field. If a Manifest section with the corresponding dst file name field being blank is downloaded and overwrites the corresponding file cannot be referenced from the application program running on the reproducing apparatus i.e. the application program executed on the reproducing apparatus or the user cannot recognize the presence of that file . In other words even if the actual file is stored on the optical disk that file is recognized as being nonexistent in the virtual file system by blanking the dst file name field. The file is thus hidden from the application program executed on the reproducing apparatus or from the user.

The Manifest section having the path name of the data of the optical disk specified in the src file name field and the predetermined path name in the virtual file system written in the dst file name field may be downloaded. A predetermined file recorded beforehand on the optical disk can thus be referenced. The Manifest section having the path name of the data of the optical disk specified in the src file name field and the dst file name field being blank may be downloaded. In this case the predetermined file that was referenceable is set to be unreferenceable.

A plurality of bonus tracks are recorded beforehand onto the optical disk. The Manifest section having the src file name field and the dst file name field is downloaded for overwriting in a predetermined timing so that the application recognizes one bonus track at one timing after another bonus track at another timing. Without the need for frequently downloading a vast amount of data the user can enjoy the service in which bonus tracks different in timing are added or deleted.

A binding process is described below with reference to . The binding process is executed when the path name of the data on the optical disk can be specified in the src file name field of the Manifest section.

In step S the local storage directory manager extracts a directory of the corresponding disc id from a downloaded data group stored on the local storage and supplies the file system merge processor with the directory.

In step S the file system merge processor references the src file name field and the dst file name field of the Manifest file.

In step S the file system merge processor determines whether the path name of the data on the optical disk is written on the src file name field of the Manifest file.

If it is determined in step S that the path name of the data on the optical disk is written in the src file name field of the Manifest file the file system merge processor supplies in step S the optical disk directory manager with the path name of the data on the optical disk written in the src file name field. The optical disk directory manager accesses predetermined information recorded on the optical disk based on the information of the src file name field.

If it is determined in step S that the path name of the data on the optical disk is not written in the src file name field of the Manifest file or subsequent to step S the file system merge processor binds a native file system and the virtual file system in step S based on the src file name field and the dst file name field referenced in step S.

If the path name of the data recorded on the optical disk is not written in the src file name field of the Manifest file the binding process is performed in the same manner as the binding process discussed with reference to . If the path name of the data recorded on the optical disk is written in the src file name field of the Manifest file the file system merge processor performs the binding process so that the file recorded in the path indicated by the src file name field of the optical disk is handled as a file having the path and the file name written on the dst file name field.

If nothing is written in the dst file name field the file recorded on the path indicated by the src file name field of the optical disk is not bound to the virtual file system.

A content author records an actual file of a content on a optical disk to be supplied to a user and inhibits accessing to the content during the reproduction of the optical disk alone hides the content from the application and the user . The content author then specifies the path name in the optical disk in the src file name field and the path name of the virtual file system in the virtual disk in the dst file name field of the Manifest section of a downloaded package. The content author can thus freely set the path name in the virtual file system of the actual file of the content recorded on the optical disk loaded on the reproducing apparatus by the description in the Manifest section of the downloaded package. Although the file is present on the optical disk the content author may or may not permit the user to access the file.

As previously discussed the update file is not only downloaded from the server but also distributed in the recorded state thereof on the removable medium . In such a case the controller reads the update file from the removable medium via the drive and writes the update file onto the local storage . Even if the reproducing apparatus cannot be connected to the server for example when the reproducing apparatus has no interfacing function with the server or when the reproducing apparatus and the server are in an environment where no link is provided data updating is possible.

In this case as well the content reproduction is performed in the same way as when the update file is downloaded from the server . The update file is recorded in a predetermined file format on the local storage and the binding process is performed with the data recorded on the optical disk . A virtual file system is constructed and an updated content is reproduced.

In the data structure of the update file recorded on the removable medium a media id identifier individually identifying the removable medium is stored immediately under the root directory as shown in . Data having the same configuration as the data downloaded from the server discussed with reference to and identified by the author id and disc id identifiers is written for the media id identifier. The syntax of the manifest file and other files under the disc id identifier is the same as the data downloaded from the server . The update file recorded on the removable medium includes others directory in which a predetermined application program and a variety of data units are stored.

An application program executing a write process for writing the update file recorded on the removable medium onto the local storage is available as an application program recorded on the others directory. Data required to execute the write process for writing the update file recorded on the removable medium onto the local storage is preferably recorded in the others directory.

The write process for writing the update file recorded on the removable medium onto the local storage may be executed only when the optical disk is loaded on the optical disk or even when the optical disk is not loaded on the optical disk .

The controller under the control of the navigation program recorded on the optical disk may perform the write process for writing the update file recorded on the removable medium onto the local storage . The controller may perform the write process only when the optical disk is loaded onto the reproducing apparatus . Alternatively the controller may perform the write process for writing the update file recorded on the removable medium onto the local storage even when the optical disk is not loaded on the reproducing apparatus . In this case the controller performs the write process under the control of a control program prepared in the reproducing apparatus or under the control of an application program in the same format as the navigation program recorded on the removable medium recorded in the others directory of .

When the update file is downloaded from the server the optical disk is loaded on the reproducing apparatus information indicating the current status of the virtual file system is transmitted to the server and data required for updating is then downloaded. However if the removable medium is used to provide the update file supplied update data cannot be modified depending on the current status of the virtual file system.

As shown in the local storage already stores a manifest file and a file and a file each associated with the manifest file. If an update file recorded on the removable medium containing a file and a file as shown in is recorded on the local storage the manifest file overwrites the manifest file on the local storage . The manifest file cannot reference the file and the file previously updated.

To allow the previously updated files to be referenced information indicating a combination of a current manifest file and a manifest file that can overwrite the current manifest file may be recorded on one of the optical disk and the removable medium .

As shown in for example a manifest file is associated with a Japanese caption a manifest file is associated with an English caption a manifest file is associated with a French caption a manifest file is associated with a Japanese and English caption a manifest file is associated with a Japanese and French caption a manifest file is associated with an English and French caption a manifest file is associated with a Japanese English and German caption and a manifest file is associated with a Japanese English French and German caption. The other manifest files also have respective file numbers indicating associated caption languages thereof.

If the manifest file and a corresponding file of the Japanese caption are recorded on the local storage in the reproducing apparatus data updating is performed using the removable medium recording the manifest file the manifest file the manifest file and the manifest file and their respective caption stream files. The user can still continuously select the Japanese caption even after data updating. When the data updating is performed using the removable medium storing another manifest file and a caption stream file corresponding thereto the user cannot select the Japanese caption after the updating using the removable medium . This is because a re written file is not associated with the Japanese caption.

A mapping table of the manifest files of is recorded on one of the optical disk and the removable medium . When updating the data using the removable medium the reproducing apparatus re writes the manifest files with reference to the mapping table to control a malfunction or notifies the user of the mapping table.

More specifically the manifest file associated with the Japanese caption is recorded on the local storage and the manifest file associated with the English caption is prepared as an update file using the removable medium . If the manifest file overwrites the manifest file the Japanese caption can be used no longer. The reproducing apparatus may display to the user a message such as the one The English caption only becomes available if updating is executed. Do you update Instead of the manifest file overwriting the manifest file a manifest file that permits mapping to the Japanese caption and the English caption such as the manifest file may be created and then overwrite the manifest file .

If the creation of the manifest file cannot control a malfunction that could occur as a result of the manifest file rewriting information regarding the manifest file prior to rewriting for example information by which the server can identify the manifest files such as manifest id identifier or code information generated based on the manifest id identifier or other information may be provided to the user. The user then notifies the server information indicating the manifest file prior to rewriting using an information processing apparatus such as the reproducing apparatus connectable with the server a personal computer connectable with the server a PDA or a cellular phone. The server then downloads the pre rewritten manifest file. In this way the reproducing apparatus can be restored back to a pre rewriting state.

A file updating process using the removable medium is described below with reference to a flowchart of . The file updating process using the removable medium is executable only if the write process for writing the update file recorded on the removable medium onto the local storage is set to be performed with the optical disk loaded on the reproducing apparatus .

In step S the optical disk is loaded onto the reproducing apparatus and the navigation program recorded on the optical disk is read by the optical disk drive . The read navigation program is expanded onto the memory and the controller starts the navigation program.

In step S the operation input acquisition unit in the controller determines based on a user operation input whether a command to add a file using the removable medium has been issued. If it is determined in step S that the command to add the file using the removable medium has not been issued step S is repeated until it is determined that the command to add the file using the removable medium has been issued.

If it is determined in step S that the command to add the file using the removable medium has been issued the menu screen display controller in the controller outputs a message prompting the user to load the removable medium in step S.

In step S the data acquisition unit determines whether the removable medium has been loaded on the drive . If it is determined in step S that the removable medium has not been loaded step S is repeated until it is determined that the removable medium has been loaded.

If it is determined in step S that the removable medium has been loaded the data acquisition unit reads in step S a predetermined portion of the data recorded on the loaded removable medium such as a header or TOC where data used for the reproducing apparatus to determine a data structure and a data format is recorded and determines whether the removable medium is replayable on the reproducing apparatus .

If it is determined in step S that the removable medium cannot be replayed on the reproducing apparatus processing proceeds to step S.

If it is determined in step S that the removable medium can be replayed on the reproducing apparatus the data acquisition unit determines in step S whether an application program executable on the reproducing apparatus is recorded on the loaded removable medium . If it is determined in step S that the application program executable on the reproducing apparatus is not recorded on the removable medium processing proceeds to step S.

If it is determined in step S that the application program executable on the reproducing apparatus is recorded on the removable medium the controller expands in step S the application program recorded on the removable medium onto the memory . The controller determines whether the application program recorded on the removable medium is an application program for performing the data addition process. If it is determined in step S that the application program recorded on the removable medium is an application program for performing the data addition process processing proceeds to step S.

If it is determined in step S that the application program recorded on the removable medium is not the application program for performing the data addition process the controller executes in step S the application program recorded on the removable medium . Subsequent to the end of the execution of the application program the reproducing apparatus returns back to the state in which the controller is executing the navigation program recorded on the optical disk .

If it is determined in step S that the application program executable on the reproducing apparatus is not recorded on the removable medium or subsequent to step S the data acquisition unit in the controller determines in step S whether additional data discussed with reference to is recorded on the loaded removable medium . If it is determined in step S that the removable medium does not store the additional data processing proceeds to step S.

If it is determined in step S that the additional data is recorded on the loaded removable medium the data acquisition unit reads the additional data from the loaded removable medium in step S.

The file updating process to be discussed later with reference to is performed in step S. Processing proceeds to step S.

If it is determined in step S that the application program recorded on the removable medium is an application program for executing the data addition process the controller executing the application program recorded on the removable medium determines in step S whether the loaded removable medium stores the additional data described with reference to . If it is determined in step S that the additional data is not recorded on the removable medium processing proceeds to step S.

If it is determined in step S that the additional data is stored on the loaded removable medium the controller executing the application program recorded on the removable medium reads in step S the additional data from the loaded removable medium .

In step S the file updating process to be discussed later with reference to is performed. Subsequent to step S namely subsequent to the end of the application program recorded on the removable medium the controller returns to the state thereof in which the navigation program recorded on the optical disk is being executed.

Subsequent to step S or step S the binding process described with reference to is performed in step S. Processing proceeds to step S.

If it is determined in step S that the loaded removable medium is not replayable on the reproducing apparatus if it is determined in step S that the loaded removable medium does not store the additional data or if it is determined in step S that the loaded removable medium does not store the additional data the menu screen display controller in the controller may output in step S an error message such as the one Data addition is disabled. Check the removable medium. 

Subsequent to step S or S the operation input acquisition unit determines in step S whether a command to end the navigation program has been issued. If it is determined in step S that the command to end the navigation program has not been issued processing returns to step S to repeat step S and subsequent steps. If it is determined in step S that that the command to end the navigation program has been issued processing ends.

In accordance with the navigation program recorded on the optical disk or the navigation program recorded on the removable medium the update file is read from the removable medium and written onto the local storage .

The file updating process executed in each of step S and step S of is described below with reference to a flowchart of .

The controller under the control of the application program recorded on the removable medium performs the file updating process in step S of while performing the data addition process. If the application program recorded on the removable medium is the one performing the data application process the controller has the same function as described with reference to . The file updating process is thus described below with reference to the flowchart of in view of the block diagram of .

In step S the local storage directory manager determines whether information indication mapping of the manifest files such as the one described with reference to is stored on one of the optical disk managed by the optical disk directory manager and the removable medium able to read data from the data acquisition unit . If it is determined in step S that the information indication the mapping of the manifest files is not stored processing proceeds to step S.

If it is determined in step S that the information indicating the mapping of the manifest files is stored the local storage directory manager determines based on the information indicating the mapping of the manifest files in step S whether any malfunction can occur. For example in one malfunction the overwriting of the update file recorded on the removable medium causes a previously update file to become useless as previously discussed with reference to . If it is determined in step S that no malfunction can take place processing proceeds to step S.

If it is determined in step S that any malfunction can occur the local storage directory manager determines in step S whether a malfunction avoidance process for generating a manifest file free from malfunction is executable. This determination of the local storage directory manager is performed based on the manifest file recorded on the current local storage the information indicating the mapping of the manifest files discussed with reference to and the manifest file of the update file recorded on the removable medium . If it is determined in step S that the malfunction avoidance process is not executable processing proceeds to step S.

If it is determined in step S that the malfunction avoidance process is executable the local storage directory manager executes in step S the malfunction avoidance process thereby producing the manifest file free from malfunction.

For example the manifest file for using Japanese English and German captions and respective caption data may be currently recorded on the local storage while the manifest file for French and the French caption data may be recorded on the removable medium . If the user causes the update file recorded on the removable medium to overwrite the file on the local storage in an attempt to add the French caption the Japanese English and German captions that were available for use can no longer be used. The manifest file is not associated with Japanese English and German caption data. To avoid such a malfunction the local storage directory manager executes the malfunction avoidance process thereby producing a manifest file that is associated with the Japanese English and German caption data. The generated manifest file is recorded together with the French caption data onto the local storage .

In step S the local storage directory manager substitutes the generated manifest file for the manifest file recorded on the removable medium . The corresponding file on the removable medium is stored on the local storage . Processing returns to step S of to proceed to step S or returns to step S of to proceed to step S.

If it is determined in step S that the information indicating the mapping of the manifest files is not stored or if it is determined in step S that the malfunction avoidance process cannot be performed the menu screen display controller issues in step S to the user a warning message such as the one The English caption only becomes available if updating is executed. Do you update . Furthermore the menu screen display controller displays to the user information regarding the manifest file prior to rewriting for example information by which the server can identify the manifest files such as manifest id identifier or code information generated based on the manifest id identifier or other information . The user then notifies the server of information indicating the manifest file prior to rewriting using an information processing apparatus such as the reproducing apparatus connectable with the server a personal computer connectable with the server a PDA or a cellular phone. The server then downloads the pre rewritten manifest file. In this way the reproducing apparatus can be restored back to at least a pre rewriting state.

In step S the operation input acquisition unit determines based on a user operation input recognizing the warning message whether the data writing onto the local storage is permitted. If it is determined in step S that the data writing onto the local storage is not permitted processing returns to step S of to proceed to step S or to step S of to proceed to step S.

If it is determined in step S that no malfunction may be caused or if it is determined in step S that the data writing onto the local storage is permitted the local storage directory manager stores in step S a file corresponding to the removable medium onto the local storage . Processing returns to step S of to proceed to step S or to step S of to proceed to step S.

Through the above described process steps the malfunction avoidance process is performed. A manifest file is generated so that no inconsistency takes place between an already updated file and a manifest file. The generated manifest file is recorded on the local storage together with the file recorded on the removable medium . Alternatively the user may be notified of the possibility of a malfunction due to file overwriting. If a malfunction took place as a result of overwriting of the file recorded on the removable medium information available to restore the file recorded on the removable medium to the pre overwriting state is provided to the user.

A file updating process using the removable medium is described below with reference to a flowchart of . The file updating process using the removable medium is performed in the reproducing apparatus . Even with the optical disk not loaded on the reproducing apparatus the reproducing apparatus herein is set to perform the write process for writing the update file from the removable medium to the local storage .

In step S the data acquisition unit determines whether the removable medium is loaded on the drive . If it is determined in step S that the removable medium is not loaded step S is repeated until it is determined that the removable medium is loaded.

If it is determined in step S that the removable medium is loaded the controller starts the application program for the file updating process in step S. The application program is the one held by the reproducing apparatus not the one recorded on one of the optical disk and the removable medium .

In step S the data acquisition unit reads a predetermined portion of the data recorded on the loaded removable medium such as a header or TOC where data used for the reproducing apparatus to determine a data structure and a data format is recorded and then determines whether the removable medium is replayable on the reproducing apparatus .

If it is determined in step S that the removable medium cannot be replayed on the reproducing apparatus processing proceeds to step S.

If it is determined in step S that the removable medium can be replayed on the reproducing apparatus the data acquisition unit determines in step S whether an application program executable on the reproducing apparatus is recorded on the loaded removable medium . If it is determined in step S that the application program executable on the reproducing apparatus is not recorded on the removable medium processing proceeds to step S.

If it is determined in step S that the application program executable on the reproducing apparatus is recorded on the removable medium the controller executing the application program held by the reproducing apparatus determines in step S whether a preparation process for preparing the application program recorded on the removable medium can be performed. If the reproducing apparatus itself is aware of whether the preparation process can be performed or not this determination step can be skipped.

For example the application program recorded on the removable medium may be identical to the MovieObject recorded on the optical disk and data corresponding to a index file may not be prepared. To execute a variety of commands of the application program recorded on the removable medium the data corresponding to the index file is required. In such a case the preparation process for executing the application program recorded on the removable medium means a generation process for generating a corresponding index file. If the optical disk has already been loaded on the reproducing apparatus the index file is already generated and expanded and the preparation process is not required.

If it is determined in step S that the preparation process to execute the application program recorded on the removable medium cannot be performed or if the apparatus has no function to perform the preparation process processing proceeds to step S.

If it is determined in step S that the preparation process to execute the application program recorded on the removable medium can be performed the controller executing the application program held by the optical disk executes in step S the preparation process to execute the application program recorded on the removable medium .

In step S the controller expands the application program recorded on the removable medium onto the memory . The controller determines whether the application program recorded on the removable medium is an application program for performing the data addition process. If it is determined in step S that the application program recorded on the removable medium is the application program for performing the data addition process processing proceeds to step S.

If it is determined in step S that the application program recorded on the removable medium is not the application program for performing the data addition process the controller executes in step S the application program recorded on the removable medium . Subsequent to the end of the execution of the application program the reproducing apparatus returns back to the state in which the controller is executing the navigation program held by the reproducing apparatus .

If it is determined in step S that the application program executable on the reproducing apparatus is not recorded on the removable medium or if it is determined in step S that the preparation process to execute the application program recorded on the removable medium cannot be performed or subsequent to step S the data acquisition unit in the controller determines in step S whether the additional data discussed with reference to is recorded on the loaded removable medium . If it is determined in step S that the removable medium does not store the additional data processing proceeds to step S.

If it is determined in step S that the additional data is recorded on the loaded removable medium the data acquisition unit reads the additional data from the loaded removable medium in step S.

The file updating process to be discussed later with reference to is performed in step S. Processing proceeds to step S.

If it is determined in step S that the application program recorded on the removable medium is the application program for executing the data addition process the controller executing the application program recorded on the removable medium determines in step S whether the loaded removable medium stores the additional data described with reference to . If it is determined in step S that the additional data is not recorded on the removable medium processing proceeds to step S.

If it is determined in step S that the additional data is stored on the loaded removable medium the controller executing the application program recorded on the removable medium reads in step S the additional data from the loaded removable medium .

In step S the file updating process to be discussed later with reference to is performed. Subsequent to step S namely subsequent to the end of the application program recorded on the removable medium the controller returns to the state thereof in which the navigation program recorded on the optical disk is being executed.

If it is determined in step S that the loaded removable medium is not replayable on the reproducing apparatus if it is determined in step S that the loaded removable medium does not store the additional data or if it is determined in step S that the loaded removable medium does not store the additional data the menu screen display controller in the controller may output in step S an error message such as the one Data addition is disabled. Check the removable medium. 

Subsequent to step S S or S the operation input acquisition unit determines in step S whether a command to end the application program has been issued. If it is determined in step S that the command to end the application program has not been issued processing returns to step S to repeat step S and subsequent steps. If it is determined in step S that that the command to end the application program has been issued processing ends.

In accordance with the application program recorded on the optical disk or the application program recorded on the removable medium the update file is read from the removable medium and written onto the local storage .

The file updating process using the removable medium does not require that the optical disk be loaded on the reproducing apparatus . The binding process discussed with reference to is executed subsequent to this process when the optical disk is loaded onto the reproducing apparatus later.

The file updating process executed in one of step S and S of is described below with reference to the flowchart of .

The controller under the control of the application program pre stored in the reproducing apparatus performs the file updating process in step S of while also performing the data addition process. The controller performing the data addition process under the control of the application program pre stored in the reproducing apparatus has basically the same functional structure as the one described with reference to . The controller under the control of the application program removable medium performs the file updating process executed in step S of while also performing the data addition process. The controller performing the data addition process under the control of the application program recorded on the removable medium has basically the same functional structure as the one described with reference to . In the discussion of the flowchart of the functional block diagram of is also referred to.

In step S the local storage directory manager determines whether information indicating mapping of the manifest files such as the one described with reference to is stored on the removable medium able to read data from the data acquisition unit . If it is determined in step S that the information indicating the mapping of the manifest files is not stored processing proceeds to step S.

If it is determined in step S that the information indicating the mapping of the manifest files is stored the local storage directory manager determines based on the information indicating the mapping of the manifest files in step S whether any malfunction can take place. For example in one malfunction the overwriting of the update file recorded on the removable medium causes a previously update file to become useless as previously discussed with reference to . If it is determined in step S that no malfunction can take place processing proceeds to step S.

If it is determined in step S that the information indicating the mapping of the manifest files is not stored or if it is determined in step S that the malfunction can take place a warming message is displayed to the user in step S. The warming message may be The English caption only becomes available if updating is executed. Do you update . Furthermore the menu screen display controller displays to the user information regarding the manifest file prior to rewriting for example information by which the server can identify the manifest files such as manifest id identifier or code information generated based on the manifest id identifier or other information . The user then notifies the server of information indicating the manifest file prior to rewriting using an information processing apparatus such as the reproducing apparatus connectable with the server a personal computer connectable with the server a PDA or a cellular phone. The server then downloads the pre rewritten manifest file. In this way the reproducing apparatus can be restored back to a pre rewriting state.

In step S the operation input acquisition unit determines based on a user operation input recognizing the warning message whether the data writing onto the local storage is permitted. If it is determined in step S that the data writing onto the local storage is not permitted processing returns to step S of to proceed to step S or to step S of to proceed to step S.

If it is determined in step S that any malfunction cannot take place or if it is determined in step S that the data writing to the local storage is permitted the local storage directory manager stores the corresponding file of the removable medium onto the local storage in step S. Processing returns to step S of to proceed to step S or to step S of to proceed to step S.

Through the above described process steps the user is notified of the possibility of a malfunction due to the file overwriting. In the event of a malfunction as a result of overwriting of the file recorded on the removable medium information available to restore the file recorded on the removable medium to the pre overwriting state is provided to the user.

The write process of writing the update file recorded on the removable medium to the local storage has been described with reference to . The removable medium may record the data having the same data structure as the optical disk described with reference to . As shown in the reproducing apparatus may store onto a first area of the local storage the file recorded on the removable medium and onto a second area different from the first area data having the structure described with reference to and downloaded from the server or data having the data structure described with reference to and recorded on the removable medium . In a process similar to the binding process to bind the file systems of the data files recorded on each of the optical disk and the local storage the file system of the data file recorded on the first area of the local storage is bound to the file system of the data file recorded on the second area of the local storage .

The data acquisition unit reads from the removable medium the data having the same file structure as the optical disk described with reference to and supplies the read data to the local storage directory manager . The local storage directory manager stores onto the first area of the local storage the data having the same data structure as the optical disk . The data acquisition unit reads the data downloaded from the and having the data structure described with reference to or the data recorded on the removable medium and having the data structure described with reference to and supplies the read data to the local storage directory manager . The local storage directory manager stores onto the second area of the local storage the data downloaded from the and having the data structure described with reference to or the data recorded on the removable medium and having the data structure described with reference to . The file system merge processor binds the file systems recorded on the first and second areas of the local storage thereby producing a virtual file system. The reproduction controller references the virtual file system thereby controlling the reproduction process.

The PlayList file manages the reproduction of the acquired caption stream Clip AV stream etc. using PlayItem SubPlayItem and Subpath. If the PlayList file is downloaded together with the caption stream Clip AV stream etc. or acquired together with the caption stream Clip AV stream etc. from another recording medium the reproduction of the acquired steams can be managed using the acquired PlayList file. In this case if a virtual file system is created using a PlayList file bound in accordance with the designation of the src file name field and the dst file name field rather than the PlayList file present on the optical disk a newly acquired steam can be managed without the need for using the above described operation type.

In the above discussion the PlayList is edited in accordance with the designation of the operation type. Alternatively a MovieObject as a navigation program containing an edit program of PlayList may be newly acquired the acquired MovieObject may be stored onto the local storage of and PlayList may be automatically edited in accordance with the edit program during the binding process or edited by the user. A MovieObject having an application program registered therewithin for editing and storing PlayList and Clip AV stream may be stored beforehand on the optical disk . The MovieObject is not necessarily contained in the program. A program stored in another unshown directory may be called.

In the above described process the reading of each file forming a stream that is reproduced using the virtual file system is controlled. If a file to be read is not present in the virtual file system an external acquisition program for acquiring a program separate from the navigation program is initiated and the file to be read from the outside other than the virtual file system is acquired.

In step S the playback controller controls the local storage directory manager and the optical disk directory manager thereby acquiring PlayList and SubPlayItem that the navigation program specifies as a reproduction period and reading stream files an AV file an audio file a caption text file etc referenced by the acquired PlayList and the SubPlayItem.

In step S the playback controller determines whether a stream file to be read is present. If it is determined in step S that the stream file to be read is present processing proceeds to step S.

If it is determined in step S that the stream file to be read is not present the playback controller initiates a file external acquisition program.

The file external acquisition program independent of the navigation program is initiated by the navigation program. The navigation program is on standby while the file external acquisition program performs an acquisition process of acquiring a predetermined file. After the file external acquisition program acquires the file the reproduction process resumes based on PlayList and PlayItem.

The file external acquisition program is stored on the local storage in the reproducing apparatus . When a command to start is provided in response to the process of the navigation program the file external acquisition program is read by the controller from the local storage and expanded onto the memory for execution. Alternatively the file external acquisition program may be recorded on one of the optical disk and the removable medium and when a command to start the file external acquisition program is provided in response to the process of the navigation program the file external acquisition program is read by the controller from the one of the optical disk and the removable medium and then expanded onto the memory for execution.

In step S the controller executing the file external acquisition program determines whether information about an external source of an unfound file is registered in one of the local storage of the reproducing apparatus the optical disk and the removable medium .

The information about the external source of the file may be recorded on a recording area of one of the local storage of the reproducing apparatus the optical disk and the removable medium as information managed by only the file external acquisition program separate from PlayList and PlayItem and a stream file relating to the content. Source information of the above described Manifest file stored on the local storage may be used as the information about the external source of the file.

The information about the external source of the file may be registered one of the dst file name and the src file name associated therewith or with author id and disc id or may be registered by different unit such as a content.

If the information about the external source of the file may be registered with one of the dst file name and the src file name associated therewith a file and information about a registration destination thereof are associated with each other on a one to one correspondence basis and the reproducing apparatus can easily identify a file to be acquired and then acquires the file. If information corresponding to a directory containing a plurality of files such as author id and disc id and the external acquisition source of the file are registered with one associated with each other one file does not correspond to the information of registration destination on a one to one correspondence basis. In such a case a file to be acquired by the reproducing apparatus is acquired by supplying to the external acquisition source the information concerning the file to be acquired by the reproducing apparatus or by causing the file system of the external acquisition source to have the same structure as one of the file system of the optical disk the file system of the local storage and the virtual file system.

If it is determined in step S that the information about the external source of the unfound file is not registered the controller executing the file external acquisition program outputs in step S an error message to an external display device and ends the process.

If it is determined in step S that the information about the external source of the unfound file is registered the controller executing the file external acquisition program accesses the file external acquisition source via the Internet interface or the drive with the removable medium loaded thereon based on the information about the file external acquisition source of the unfound file.

The information about the external source of the file may be a URL of the server accessible via the Internet an address of a recording area or a path of a file system of the removable medium loaded on the drive device information of a recording device or another information processing apparatus connected via a predetermined local network or an address of a recording area or a path of a file system of a recording unit of these apparatuses.

In step S the controller executing the file external acquisition program acquires a file or data corresponding to the file from the specified file external acquisition source. The controller executing the file external acquisition program then resumes the process of the navigation program.

The acquisition method of acquiring the file or the corresponding data from the specified file external acquisition source may be a so called downloading process in which all corresponding files are acquired stored on the local storage and then reproduced. The acquisition method may also be a so called streaming reproduction process in which data forming a corresponding file is acquired and then successively reproduced without being stored on the local storage .

If it is determined in step S that a stream file to be read is present or subsequent to step S the playback controller supplies in step S the acquired file or the data corresponding to the data to the decoder and then controls the decoder to reproduce the content. Processing then ends.

As long as the file external acquisition source is registered the file to be reproduced or the data forming the file can be acquired and reproduced even if the file to be read from PlayList and SubPlayItem is not recorded at a predetermined position.

The file external acquisition program is independent of the navigation program in the above discussion. Alternatively the file external acquisition program may be included in the navigation program as a subroutine thereof.

In the process discussed with reference to the flowchart of if the file to be read is not present on the virtual file system the file external acquisition program independent of the navigation program is initiated and the file to be read is read from outside the virtual file system. For example if one of a file to be read a folder containing the file and a directory containing the file is not present on the created virtual file system a program independent of the navigation program for acquiring from the outside one of the file the folder containing the file and the directory containing the file may be initiated. One of the file read from outside the virtual file system the folder containing the file and the directory containing the file is thus acquired.

The local storage composed of a semiconductor memory is removably loaded onto the reproducing apparatus as described above. Data in the same content distribution file format as the content distributed by the content author as previously discussed with reference to may be recorded onto the medium removably loaded to the drive in the directory structure discussed with reference to . Without the need for storing the data onto the local storage the file system of the data stored on the removable medium and the file system of the data stored on the optical disk may be bound to each other as described above.

The content data and the data required to reproduce the content data for example PlayList SubPlayItem or a Manifest file may be stored on both the local storage and the removable medium in the directory structure discussed with reference to . The file system of the data stored on the local storage the file system of the data stored on the removable medium and the file system of the data stored on the optical disk can thus be bound to each other as discussed above. Through the process discussed above the file system of the data stored on the local storage is bound to the file system of the data stored on the optical disk a first virtual file system is created the first virtual file system is then bound to the file system of the data stored on the removable medium and then a second virtual file system is created.

A manufacturing method of an optical disk storing data replayable on the reproducing apparatus is described below with reference to . As shown the recording medium is an optical disk and may be one of the optical disk and the removable medium . If the removable medium is one other than a disk like recording medium data replayable on the reproducing apparatus is recorded onto the recording medium using a known recording medium manufacturing method.

As shown in a master disk made of glass is prepared. A recording material made of photoresist or the like is applied on the master disk. The recording master disk thus results.

As shown in video data in a format replayable on the reproducing apparatus encoded by a video encoder in a software production section is stored temporarily on a buffer. Audio data encoded by an audio encoder is temporarily stored on a buffer. Data other than streams for example Indexes Playlist PlayItem etc. encoded by a data encoder is temporarily stored on a buffer. The video data the audio data and the data other than the stream stored on the respective buffers are multiplexed by a multiplexer MPX in synchronization with a synchronization signal and an error correction code ECC circuit attaches an error correction code to the multiplexed signal. The resulting signal is modulated by a modulator MOD circuit and then stored on a magnetic tape in accordance with a predetermined format. Thus a software program is manufactured to be recorded onto one of the optical disk and the removable medium replayable on the reproducing apparatus .

The software program is edited pre mastered as necessary and a signal having a format to be recorded on the optical is thus produced. A laser beam is modulated In accordance with the recording signal and then directed to the photoresist on the master disk. The photoresist on the master disk is thus exposed to the laser beam modulated with the recording signal.

The master disk is then developed and pits are arranged on the master disk. The master disk is then subjected to electroforming to manufacture a metal master disk into which the pits of the glass master disk are transferred. From the metal master disk a metal stamper is produced and used as a mold.

A material such as PMMA acryl or PC polycarbonate is injected into the mold and solidified. Alternatively after applying 2P ultraviolet curing resin on the metal stamper ultraviolet light is directed to the metal stamper for curing. In this way the pits on the metal stamper are transferred to a replica made of the resin.

A reflective film is formed on thus constructed replica using deposition or sputtering technique. Alternatively a reflective film is formed on the replica using spin coating technique.

The inner circular edge and the outer circular edge of the disk is then neatly shaped and a process required to bond two disks together is also performed. Further a label is glued on the disk and a hub is attached to the disk and the resulting disk is inserted into a cartridge. The optical disk or the removable medium having data replayable on the reproducing apparatus are thus manufactured.

The above referenced series of process steps may be performed using software. A program of the software may be installed from a recording medium onto a computer built in dedicated hardware or a general purpose personal computer enabled to perform a variety of functions with a variety of programs installed thereon.

As shown in the recording medium includes the removable medium distributed to a user separate from a computer to provide the user with the program. The recording media include the removable medium such as one of a magnetic disk including a flexible disk an optical disk such as compact disk read only memory CD ROM or digital versatile disk DVD a magneto optical disk such as mini disk MD and a semiconductor memory. The recording media also include the memory such a ROM or a RAM or the local storage such as a hard disk each storing the program and supplied in the apparatus to the user.

The process steps describing the program stored on the recording medium may be performed in the time series order sequence as previously stated. Alternatively the process steps may be performed in parallel or separately.

The embodiments of the present invention are not limited to the ones discussed above and a variety of modifications to the embodiments are possible without departing from the scope of the present invention.

