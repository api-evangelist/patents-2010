---

title: Media forwarding for a group communication session in a wireless communications system
abstract: Embodiments are directed to media forwarding for a group communication session within a wireless communications system. A server receives a frame for a given timeslot from each of a first plurality of access terminals participating in the group communication session, each of the received frames having an associated data rate. The server selects at least one and less than all of the received frames based at least in part on the associated data rates of each of the received frames. The server sends the selected at least one frame to a second plurality of access terminals participating in the group communication session.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09025497&OS=09025497&RS=09025497
owner: QUALCOMM Incorporated
number: 09025497
owner_city: San Diego
owner_country: US
publication_date: 20100621
---
The present application for patent claims priority to Provisional Application No. 61 224 797 entitled Media Forwarding For a Group Communication Session In A Wireless Communications System filed Jul. 10 2009 and assigned to the assignee hereof and hereby expressly incorporated by reference herein in its entirety.

Embodiments of the present invention are directed to media forwarding for a group communication session in a wireless communications session.

Wireless communication systems have developed through various generations including a first generation analog wireless phone service 1G a second generation 2G digital wireless phone service including interim 2.5G and 2.75G networks and a third generation 3G high speed data Internet capable wireless service. There are presently many different types of wireless communication systems in use including Cellular and Personal Communications Service PCS systems. Examples of known cellular systems include the cellular Analog Advanced Mobile Phone System AMPS and digital cellular systems based on Code Division Multiple Access CDMA Frequency Division Multiple Access FDMA Time Division Multiple Access TDMA the Global System for Mobile access GSM variation of TDMA and newer hybrid digital communication systems using both TDMA and CDMA technologies.

The method for providing CDMA mobile communications was standardized in the United States by the Telecommunications Industry Association Electronic Industries Association in TIA EIA IS 95 A entitled Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System referred to herein as IS 95. Combined AMPS CDMA systems are described in TIA EIA Standard IS 98. Other communications systems are described in the IMT 2000 UM or International Mobile Telecommunications System 2000 Universal Mobile Telecommunications System standards covering what are referred to as wideband CDMA WCDMA CDMA2000 such as CDMA2000 1xEV DO standards for example or TD SCDMA.

In wireless communication systems mobile stations handsets or access terminals AT receive signals from fixed position base stations also referred to as cell sites or cells that support communication links or service within particular geographic regions adjacent to or surrounding the base stations. Base stations provide entry points to an access network AN radio access network RAN which is generally a packet data network using standard Internet Engineering Task Force IETF based protocols that support methods for differentiating traffic based on Quality of Service QoS requirements. Therefore the base stations generally interact with ATs through an over the air interface and with the AN through Internet Protocol IP network data packets.

In wireless telecommunication systems Push to talk PTT capabilities are becoming popular with service sectors and consumers. PTT can support a dispatch voice service that operates over standard commercial wireless infrastructures such as CDMA FDMA TDMA GSM etc. In a dispatch model communication between endpoints ATs occurs within virtual groups wherein the voice of one talker is transmitted to one or more listeners. A single instance of this type of communication is commonly referred to as a dispatch call or simply a PTT call. A PTT call is an instantiation of a group which defines the characteristics of a call. A group in essence is defined by a member list and associated information such as group name or group identification.

Conventionally data packets within a wireless communications network have been configured to be sent to a single destination or access terminal. A transmission of data to a single destination is referred to as unicast . As mobile communications have increased the ability to transmit given data concurrently to multiple access terminals has become more important. Accordingly protocols have been adopted to support concurrent data transmissions of the same packet or message to multiple destinations or target access terminals. A broadcast refers to a transmission of data packets to all destinations or access terminals e.g. within a given cell served by a given service provider etc. while a multicast refers to a transmission of data packets to a given group of destinations or access terminals. In an example the given group of destinations or multicast group may include more than one and less than all of possible destinations or access terminals e.g. within a given group served by a given service provider etc. . However it is at least possible in certain situations that the multicast group comprises only one access terminal similar to a unicast or alternatively that the multicast group comprises all access terminals e.g. within a cell or sector similar to a broadcast.

Broadcasts and or multicasts may be performed within wireless communication systems in a number of ways such as performing a plurality of sequential unicast operations to accommodate the multicast group allocating a unique broadcast multicast channel BCH for handling multiple data transmissions at the same time and the like. A conventional system using a broadcast channel for push to talk communications is described in United States Patent Application Publication No. 2007 0049314 dated Mar. 1 2007 and entitled Push To Talk Group Call System Using CDMA 1x EVDO Cellular Network the contents of which are incorporated herein by reference in its entirety. As described in Publication No. 2007 0049314 a broadcast channel can be used for push to talk calls using conventional signaling techniques. Although the use of a broadcast channel may improve bandwidth requirements over conventional unicast techniques the conventional signaling of the broadcast channel can still result in additional overhead and or delay and may degrade system performance.

The 3rd Generation Partnership Project 2 3GPP2 defines a broadcast multicast service BCMCS specification for supporting multicast communications in CDMA2000 networks. Accordingly a version of 3GPP2 s BCMCS specification entitled CDMA2000 High Rate Broadcast Multicast Packet Data Air Interface Specification dated Feb. 14 2006 Version 1.0 C.S0054 A is hereby incorporated by reference in its entirety.

Embodiments are directed to media forwarding for a group communication session within a wireless communications system. A server receives a frame for a given timeslot from each of a first plurality of access terminals participating in the group communication session each of the received frames having an associated data rate. The server selects at least one and less than all of the received frames based at least in part on the associated data rates of each of the received frames. The server sends the selected at least one frame to a second plurality of access terminals participating in the group communication session.

In an example the server optionally mixes the frames if the number of frames selected for a destination is more than one. The selection and or mixing of frames is performed for each of the plurality of access terminals but in some cases the same selected or mixed frame can be transmitted to multiple access terminals which may reduce processing load on the server. In a further example one or more frames can be selected at least in part based on their associated data rate s and the selected frame s can then be mixed e.g. in a signal processing sense . Embodiments can either be directed to relatively small groups or to large groups where a relatively small number of participants happen to talk simultaneously. Accordingly a relatively small number of frames can be selected from a potentially high number of available frames for a timeslot and then the selected frame s can be mixed and distributed to the group.

Aspects of the invention are disclosed in the following description and related drawings directed to specific embodiments of the invention. Alternate embodiments may be devised without departing from the scope of the invention. Additionally well known elements of the invention will not be described in detail or will be omitted so as not to obscure the relevant details of the invention.

The words exemplary and or example are used herein to mean serving as an example instance or illustration. Any embodiment described herein as exemplary and or example is not necessarily to be construed as preferred or advantageous over other embodiments. Likewise the term embodiments of the invention does not require that all embodiments of the invention include the discussed feature advantage or mode of operation.

Further many embodiments are described in terms of sequences of actions to be performed by for example elements of a computing device. It will be recognized that various actions described herein can be performed by specific circuits e.g. application specific integrated circuits ASICs by program instructions being executed by one or more processors or by a combination of both. Additionally these sequence of actions described herein can be considered to be embodied entirely within any form of computer readable storage medium having stored therein a corresponding set of computer instructions that upon execution would cause an associated processor to perform the functionality described herein. Thus the various aspects of the invention may be embodied in a number of different forms all of which have been contemplated to be within the scope of the claimed subject matter. In addition for each of the embodiments described herein the corresponding form of any such embodiments may be described herein as for example logic configured to perform the described action.

A High Data rate HDR subscriber station referred to herein as an access terminal AT may be mobile or stationary and may communicate with one or more HDR base stations referred to herein as modem pool transceivers MPTs or base stations BS . An access terminal transmits and receives data packets through one or more modem pool transceivers to an HDR base station controller referred to as a modem pool controller MPC base station controller BSC and or packet control function PCF . Modem pool transceivers and modem pool controllers are parts of a network called an access network. An access network transports data packets between multiple access terminals.

The access network may be further connected to additional networks outside the access network such as a corporate intranet or the Internet and may transport data packets between each access terminal and such outside networks. An access terminal that has established an active traffic channel connection with one or more modem pool transceivers is called an active access terminal and is said to be in a traffic state. An access terminal that is in the process of establishing an active traffic channel connection with one or more modem pool transceivers is said to be in a connection setup state. An access terminal may be any data device that communicates through a wireless channel or through a wired channel for example using fiber optic or coaxial cables. An access terminal may further be any of a number of types of devices including but not limited to PC card compact flash external or internal modem or wireless or wireline phone. The communication link through which the access terminal sends signals to the modem pool transceiver is called a reverse link or traffic channel. The communication link through which a modem pool transceiver sends signals to an access terminal is called a forward link or traffic channel. As used herein the term traffic channel can refer to either a forward or reverse traffic channel.

Referring back to the components of the wireless network and interrelation of the elements of the exemplary embodiments of the invention are not limited to the configuration illustrated. System is merely exemplary and can include any system that allows remote access terminals such as wireless client computing devices to communicate over the air between and among each other and or between and among components connected via the air interface and RAN including without limitation carrier network the Internet and or other remote servers.

The RAN controls messages typically sent as data packets sent to a base station controller packet control function BSC PCF . The BSC PCF is responsible for signaling establishing and tearing down bearer channels i.e. data channels between a packet data service node PDSN and the access terminals . If link layer encryption is enabled the BSC PCF also encrypts the content before forwarding it over the air interface . The function of the BSC PCF is well known in the art and will not be discussed further for the sake of brevity. The carrier network may communicate with the BSC PCF by a network the Internet and or a public switched telephone network PSTN . Alternatively the BSC PCF may connect directly to the Internet or external network. Typically the network or Internet connection between the carrier network and the BSC PCF transfers data and the PSTN transfers voice information. The BSC PCF can be connected to multiple base stations BS or modem pool transceivers MPT . In a similar manner to the carrier network the BSC PCF is typically connected to the MPT BS by a network the Internet and or PSTN for data transfer and or voice information. The MPT BS can broadcast data messages wirelessly to the access terminals such as cellular telephone . The MPT BS BSC PCF and other components may form the RAN as is known in the art. However alternate configurations may also be used and the invention is not limited to the configuration illustrated. For example in another embodiment the functionality of the BSC PCF and one or more of the MPT BS may be collapsed into a single hybrid module having the functionality of both the BSC PCF and the MPT BS .

Referring to the broadcast serving node BSN may be configured to support multicast and broadcast services. The BSN will be described in greater detail below. The BSN communicates with the RAN e.g. the BSC PCF via a broadcast BC A connection and with the application server via the Internet . The BCA connection is used to transfer multicast and or broadcast messaging. Accordingly the application server sends unicast messaging to the PDSN via the Internet and sends multicast messaging to the BSN via the Internet .

Generally as will be described in greater detail below the RAN transmits multicast messages received from the BSN via the BCA connection over a broadcast channel BCH of the air interface to one or more access terminals .

Referring to an access terminal here a wireless device such as a cellular telephone has a platform that can receive and execute software applications data and or commands transmitted from the RAN that may ultimately come from the carrier network the Internet and or other remote servers and networks. The platform can include a transceiver operably coupled to an application specific integrated circuit ASIC or other processor microprocessor logic circuit or other data processing device. The ASIC or other processor executes the application programming interface API layer that interfaces with any resident programs in the memory of the wireless device. The memory can be comprised of read only or random access memory RAM and ROM EEPROM flash cards or any memory common to computer platforms. The platform also can include a local database that can hold applications not actively used in memory . The local database is typically a flash memory cell but can be any secondary storage device as known in the art such as magnetic media EEPROM optical media tape soft or hard disk or the like. The internal platform components can also be operably coupled to external devices such as antenna display push to talk button and keypad among other components as is known in the art.

Accordingly an embodiment of the invention can include an access terminal including the ability to perform the functions described herein. As will be appreciated by those skilled in the art the various logic elements can be embodied in discrete elements software modules executed on a processor or any combination of software and hardware to achieve the functionality disclosed herein. For example ASIC memory API and local database may all be used cooperatively to load store and execute the various functions disclosed herein and thus the logic to perform these functions may be distributed over various elements. Alternatively the functionality could be incorporated into one discrete component. Therefore the features of the access terminal in are to be considered merely illustrative and the invention is not limited to the illustrated features or arrangement.

The wireless communication between the access terminal and the RAN can be based on different technologies such as code division multiple access CDMA WCDMA time division multiple access TDMA frequency division multiple access FDMA Orthogonal Frequency Division Multiplexing OFDM the Global System for Mobile Communications GSM or other protocols that may be used in a wireless communications network or a data communications network. The data communication is typically between the client device MPT BS and BSC PCF . The BSC PCF can be connected to multiple data networks such as the carrier network PSTN the Internet a virtual private network and the like thus allowing the access terminal access to a broader communication network. As discussed in the foregoing and known in the art voice transmission and or data can be transmitted to the access terminals from the RAN using a variety of networks and configurations. Accordingly the illustrations provided herein are not intended to limit the embodiments of the invention and are merely to aid in the description of aspects of embodiments of the invention.

Referring to in a given AT AT A sends a request to the application server via the RAN to initiate a group communication session. For example the group communication session may correspond to a push to talk PTT or push to transfer PTX session and the transmission of the request in may be prompted based on a user of AT A pressing a PTT or PTX button on AT A. The application server receives the group communication session request from AT A and transmits an announce message in one or more sectors of the wireless communication system . At least ATs B . . . E receive the announce message and determine to join the announced group communication session. Accordingly ATs B . . . E send a call accept message to the application server and also send a registration message e.g. BCMCSFlowRegistration message to the RAN to register to the group communication session and . The call accept message and registration message from each of ATs B . . . E may either be sent within separate messages on a reverse link access channel or alternatively may be bundled within the same message.

After receiving a call accept message from a first responder to the announce message from among ATs B . . . E the application server grants the floor for the group communication session to AT A . Accordingly after receiving the floor grant message AT A plays a tone to indicate to a user of AT A that the user can begin speaking and AT A begins transmitting frames on a reverse link channel to the application server . The series of frame transmissions from can correspond to data frames that actually include voice data or alternatively can correspond to silence frames that do not actually include voice data.

Each frame transmission can correspond to a real time transport protocol RTP packet or datagram or alternatively a RTCP RTP Control Protocol packet. A header portion of a 40 octet overhead RTP packet may be configured as follows 

Referring to Table 1 the fields of the RTP packet header portion are well known in the art. However certain fields are discussed in more detail with respect to embodiments described in more detail below and as such will be referred to briefly in this section. For example the contribution count CC field Sequence Number field Timestamp field and SSRC number field will now be addressed briefly. The CC field is an optional field that can hold a contributing source CSRC count value. Although not shown on the header diagram of Table 1 above the 12 octet header of the CC field can optionally be expanded to include more contributing sources. Contributing sources can be added by a mixer at the application server and are relevant for conferencing applications where elements of the data payload have originated from different computers. For point to point communications CSRCs are not necessarily required. The Sequence Number field holds a unique reference number which increments by one for each RTP packet sent from a particular source or AT. The Sequence Number field allows the receiver to reconstruct the sender s packet sequence. The Timestamp field corresponds to the time that the RTP packet was transmitted by the AT. The Timestamp field allows the receiving AT s to buffer and playout the data in a continuous stream. The SSRC number field corresponds to a number that identifies the source of the RTP packet which in identifies AT A. The SSRC number can be provisioned by the application server at the start of the group communication session.

After the RTP header portion the RTP packet includes a data payload portion. The data payload portion can include digitized samples of voice and or video. The length of the data payload can vary for different RTP packets. For example in voice RTP packets the length of the voice sample carried by the data payload may correspond to 20 milliseconds ms of sound. Generally for longer media durations e.g. higher rate frames the data payload either has to be longer as well or else the quality of the media sample is reduced.

Returning to of the frames transmitted from AT A can correspond to full rate frames e.g. 8.6 kpbs that have a large data payload in the RTP packet half rate frames e.g. 4.3 kpbs that include a medium data payload in the RTP packet th rate frames e.g. 1.0 kpbs that include a small data payload in the RTP packet and so on. While references are generally made to EVRC A it will be readily apparent how these embodiments can be modified to accommodate other vocoders that include different frame rate options. As will be appreciated when a user of AT A is speaking AT A transmits higher rate frames than when the user of AT A is not speaking and AT A is transmitting silence frames. The application server includes a media control complex MCC module that handles the receipt of a media stream from floor holders and the transcoding of an output stream to one or more listening group members to the group communication session. In other words the MCC module replicates and re broadcasts the frames within RTP packets from AT A to each of ATs B . . . E. Accordingly a series of frame transmissions from AT A that are received at the MCC module of the application server may be represented as follows 

As noted above the MCC module receives the input stream as illustrated above in Table 2 and generates or transcodes an output stream that is transmitted to ATs B . . . E. Accordingly based on Table 2 the output stream generated by the MCC module of the application server may be configured as follows 

As shown in Table 3 above the output stream is configured such that AT A s frame transmissions are not transmitted back to AT A but are rather transmitted to ATs B . . . E in Table 2 above.

As the output stream is generated by the MCC module the application server transmits RTP packets including output frames from the output stream to ATs B . . . E as a series of group messages and ATs B . . . E monitor the group messages for the group communication session and . The group communication session then continues for a period of time until a user of AT A determines to give up the floor . can correspond to an explicit instruction from AT A to give up the floor or based on a period of inactivity from AT A i.e. too many silence frames .

After determining AT A has given up the floor to the group communication session the application server sends a floor release message to ATs B . . . E . Assume that a user of AT B and at least one of ATs C . . . E determine to attempt to gain control of the floor and send floor request messages to the application server and . The application server thereby receives multiple floor request messages and evaluates priority levels of the ATs requesting the floor to determine the AT that will next be granted the floor. For example based on the type of group communication session the RAN may evaluate one or more priority tables maintained at the RAN and may grant the floor to a highest priority AT from among the ATs requesting the floor. For example the priority tables may be configured as follows 

In assume that the application server determines AT B has the highest priority level from among the requesting AT for the call type of the group communication session and the application server sends a floor grant message to AT B. Next AT B plays a tone to notify a user of AT B that AT B now has the floor and AT B begins transmitting frames e.g. data frames silence frames etc. within one or more RTP packets to the application server which are then converted into an output stream by the MCC module and re transmitted to ATs A and C . . . E . It will be appreciated that and are performed in the same manner as and as described above with respect to AT A and as such and will not be described further for the sake of brevity.

As is characteristic of a half duplex session certain ATs in the group communication session of only transmit frames e.g. within RTP packets while other ATs in the group communication session only receive frames e.g. within RTP packets . An alternative to the process of is a full duplex group communication session which is described below with respect to . In a full duplex session each participant to the session can both transmit and receive frames e.g. within RTP packets .

In B instead of granting the floor to the session initiator i.e. AT A the application server sends a message to each AT that has joined the group communication session indicating that the session can begin B. Upon receiving the message B any of ATs A . . . E can begin speaking and thereby send data frames or else can remain silent and send silence frames B B B.

An example of the input stream from ATs A . . . E e.g. the frames included within RTP packets from ATs A . . . E for particular timeslots that are received at the MCC module of the application server may be represented as follows 

Referring to Table 5 above each of ATs A . . . E is transmitting frames over timeslots 10t . . . T at a given data rate. In particular AT A is sending a series of half rate frames e.g. which indicates that a user of AT A is likely speaking to ATs B . . . E and sending voice data while ATs B . . . E are sending a series of th rate frames e.g. which indicates that the users of ATs B . . . E are likely listening to AT A have walked away from their phones etc. .

Returning to in B the MCC module of the application server includes each of the frames from the input streams at each time interval t de jitters the aggregated media stream and then generates an output stream that includes all the media content from each of ATs A . . . E for that time interval. The application server then sends the resultant media stream to each of ATs A . . . E as a series of aggregated frames within one or more RTP packets. However it is appreciated that each of ATs A . . . E receives an aggregated media stream containing frames from all session participants except itself to avoid feedback problems. Thus AT A receives an output stream composed of aggregated media from ATs B . . . E AT B receives an output stream composed of aggregated media from ATs A and C . . . E and so on.

As noted above the MCC module receives the frames from ATs A . . . E i.e. the input stream as illustrated above in Table 5 above and then generates or transcodes output streams that are transmitted to ATs A . . . E e.g. which are each different because each output stream omits the frames of the input stream received from the target in order to reduce feedback . Accordingly based on Table 5 above the output stream generated by the MCC module of the application server over timeslots 10t . . . T may be configured as follows 

As shown in Table 6 above due to a simplistic brute force forwarding implementation of the group communication session the aggregated media frames to ATs A . . . E at each timeslot of the output stream has a total data rate equal to the sum of the data rates for frames e.g. or RTP packets from ATs other than itself.

With respect to the conventional half duplex implementation for the group communication session in it will be appreciated that bandwidth utilization is superior as compared to the full duplex implementation for the group communication session of . However the inability of ATs to transmit to the group can at times be problematic e.g. if a current floor holder does not give up the floor and keeps on talking about irrelevant issues . In half duplex the current floor holder would be oblivious to the sentiment of the group because the floor holder cannot receive feedback from the other group members until the floor is released.

This problem does not occur in the full duplex implementation of . However the bandwidth requirements of a full duplex implementation are high because for N group communication session participants each participant receives an aggregated output stream having N 1 combined media flows which consumes a relatively high amount of bandwidth. Also aggregating a high number of media frames to form the media frames of the output stream can be processing intensive at the application server . Also the MCC module of the application server does not distinguish between media flows. Thus silence frames are granted the same priority as data frames in the output stream when the frames contend for the same timeslot in the output stream.

Accordingly embodiments which will now be described in more detail are directed to a hybrid implementation that includes certain properties of both half duplex and full duplex implementations. As will be described below in more detail a plurality of participants to a group communication session e.g. all participants can both transmit and receive frames e.g. within RTP packets as in full duplex. However the MCC module is configured to select one or more of the incoming media streams for output to each group communication session participant such that any given output frame in the output stream to a particular group communication session participant other than the selected participant s includes media content from only the selected participant s . If only one media stream is selected the output stream is similar to half duplex e.g. which increases an efficiency of bandwidth utilization . If more than one and less than all input media streams are selected the output media stream is similar to full duplex for the selected subset of ATs whose frames were selected while bandwidth utilization is increased because not all of the frames are included in the output stream as in full duplex e.g. although in at least one embodiment it is at least possible that all frames are selected . The selection mechanism with regard to how the MCC module generates the output stream for the group communication session participants will be described below in detail.

Below embodiments of the present invention are described with respect to full rate frames half rate frames and th rate frames. A set of frame resets that is inclusive of the above noted frame rates is specific to an EVRC A Vocoder. Other vocoders such as EVRC B and or 4G can include a rate frame as part of the frame rate set. While references below are generally made to EVRC A it will be readily apparent how these embodiments can be modified to accommodate other vocoders that include different frame rate options.

Further embodiments of the invention described below refer to RTP packets and frames e.g. silence frames data frames etc. interchangeably in certain sections. However it is appreciated that RTP packets can actually include multiple frames. It will thereby be appreciated that certain references to RTP packets made with the assumption that RTP packets include one 1 frame can be modified in other embodiments of the invention such that the processes disclosed herein are frame specific and not necessarily RTP packet specific. In other words where a frame selection is made for a first timeslot and then a second timeslot it is possible that one or more of the frames available for selection in the first and second timeslots were actually received in the same RTP packet and in this case the selection would be frame specific and not packet specific. Generally the embodiments of the invention are directed to frame mixing and selection and RTP packets are merely the example mechanism that carries one or more of the frames.

Accordingly illustrates a group communication session e.g. a call a transport session etc. process according to an embodiment of the invention. In particular illustrates the group communication session process at a relatively high level which will be followed by more detailed examples of portions of the high level process illustrated in . The group communication session of may correspond to a group communication session supported by IP multicasting protocols or IP unicasting protocols. In IP multicasting a downlink broadcast channel BCH carries a single multicast flow within one or more sectors to reach each listening multicast group member while a separate scheduling message e.g. a broadcast overhead message BOM is transmitted on a downlink control channel that indicates how the multicast group members can tune to the downlink BCH. In IP unicasting each group message is transmitted to each group communication session participant or multicast group member as a separate unicast message addressed to each group member individually.

Referring to in a given AT AT A sends a request to the application server via the RAN to initiate a group communication session. For example the group communication session may correspond to a push to talk PTT or push to transfer PTX session and the transmission of the request in may be prompted based on a user of AT A pressing a PTT or PTX button on AT A. The application server receives the group communication session request from AT A and transmits an announce message in one or more sectors of the wireless communication system . At least ATs B . . . E receive the announce message and determine to join the announced group communication session. Accordingly ATs B . . . E send a call accept message to the application server and also send a registration message e.g. BCMCSFlowRegistration message to the RAN to register to the group communication session and . The call accept message and registration message from each of ATs B . . . E may either be sent within separate messages on a reverse link access channel or alternatively may be bundled within the same message.

Referring to in after receiving the call accept messages from ATs B . . . E the application server sends floor grant messages to AT A and at least one of ATs B . . . E. In an example the application server can be configured to send floor grant messages to each AT that joins the group communication session. In an alternative example the application server can be configured to send floor grant messages to less than all but more than one AT that joins the group communication session. Thus certain ATs may be configured to both send and receive as in full duplex while other ATs may be configured to receive or transmit only as in half duplex . Also instead of floor grant messages being sent in any type of message may be sent so long as AT A and at least one of ATs B . . . E are capable of both sending group messages to the application server and also receiving group messages from the application server .

Accordingly at each of ATs A . . . E a tone is played that indicates to a user of each respective AT that the group communication session has begun and ATs A . . . E begin transmitting frames e.g. data frames silence frames etc. included within one or more RTP packets at a given data rate on a reverse link channel to the application server .

The application server receives the frames from ATs A . . . E for a given time interval or timeslot and selects the frame from one or more of ATs A . . . E for transmission upon an output stream to each other of ATs A . . . E . The selection of is performed by the MCC module at the application server and is based at least in part upon a data rate of the frames in the input stream for a given timeslot at the MCC module from ATs A . . . E. The selection of will be described in more detail below. After making the selection in the application server sends the selected frame s to each AT except the AT s from which the selected frame s were received in . While not shown explicitly within the application server may also send a frame from a non selected AT to the AT s associated with the selected frame s as will be described in more detail below.

The selection of may be performed in a number of ways examples of which will now be described with respect to . For example assume that ATs A . . . E have priority levels as defined by Table 2 above for direct calls adhoc calls closed group calls and closed chat room calls. Under this assumption it will be appreciated that if the group communication session established in is a direct call or an adhoc call the priority of ATs A . . . E is the same e.g. although this is not necessarily the case for all direct calls or adhoc calls whereas for closed group calls or close chat room calls the priority levels of ATs A . . . E are not necessarily the same.

Accordingly illustrates an example of the frame selection of performed at the application server where each group communication session participant has the same priority level according to an embodiment of the invention. Referring to the application server determines whether any high data rate frames e.g. frames having a higher data rate than a th rate are received within a given time interval or timeslot from ATs A . . . E B. If no high data rate frames are determined to be present the MCC module of the application server selects according to a given selection rule. For example the given selection rule can correction to a selection of a silence frame from a first listener e.g. a first of ATs B . . . E to have accepted the call announce message from of . It will be appreciated that the selection of B is somewhat arbitrary and could be configured in many different ways e.g. the second listener s silence frame could be selected the originator s silence frame could be selected etc. because irrespective of which silence frame is re transmitted on the output streams from the application server the output streams will still carry a silence frame.

Otherwise if at least one frame from ATs A . . . E is determined to be a data frame e.g. the frame has a data rate higher than th then the MCC module determines if more than one high data rate frame is present B. If only one high data rate frame is determined to be present from ATs A . . . E in a given timeslot in B the high data rate frame is selected B. Otherwise if multiple high data rate frames are determined to be present in B the MCC module determines which of the multiple high data rate frames has the highest data rate B. The MCC module then determines if a single frame is present with a data rate e.g. a full rate frame that is higher than the other high data rate frames e.g. half rate frames B. In another embodiment the MCC module could choose multiple high data rate frames and mix e.g. in a digital processing sense the high data rate frames to produce a single mixed frame that can then be selected for transmission. This selection of frames to be mixed can be based on the available processing power at the MCC module e.g. fewer frames can be selected if the available processing power is low more frames can be selected if the available processing power is high etc. and or the number of target ATs that can be serviced using the single mixed frame e.g. if a high number of target ATs will be receiving the same mixed frame then the per AT processing consumption will be relatively low such that more processing power will be allocated to the mixing of this type of popular mixed frame whereas fewer frames may be selected for mixing if a relatively small number of ATs will be receiving the mixed frame etc. . If there is a single frame that has a data rate that is higher than all other frames the highest data rate frame is selected in B. Otherwise the MCC module selects from among the frames having the highest data rate e.g. multiple full rate frames multiple half rate frames etc. based on another given selection rule e.g. which may be the same as the given selection rule noted above or different . For example the another given selection rule may correspond to a selection of the frame whose RTP packet has a lowest SSRC value. It will be appreciated that the selection of B is somewhat arbitrary and could be configured in many different ways e.g. the frame whose RTP packet has a highest SSRC packet could be selected etc. .

Turning to illustrates an example of the frame selection of performed at the application server where two or more group communication session participants have different priority levels according to an embodiment of the invention. Referring to the application server determines whether any high data rate frames e.g. frames having a higher data rate than a th rate are received within a given time interval or timeslot from ATs A . . . E C. If no high data rate frames are determined to be present the MCC module of the application server selects according to a given selection rule. For example the given selection rule can correction to a selection of a silence frame from a first listener e.g. a first of ATs B . . . E to have accepted the call announce message from of . It will be appreciated that the selection of C is somewhat arbitrary and could be configured in many different ways e.g. the second listener s silence frame could be selected the originator s silence frame could be selected a silence frame of a highest priority AT as determined from Table 2 above could be selected etc. because irrespective of which silence frame is re transmitted on the output streams from the application server the output streams will still carry a silence frame.

Otherwise if at least one frame from ATs A . . . E is determined to be a data frame e.g. the frame has a data rate higher than th then the MCC module determines if more than one high data rate frame is present C. If only one high data rate frame is determined to be present from ATs A . . . E in a given timeslot in C the high data rate frame is selected C. Otherwise if multiple high data rate frames are determined to be present in C the MCC module selects the high data rate frame associated with an AT having the highest priority level as specified by Table 2 above C. While not shown in if more than one frame have high data rates and are associated with ATs having the same highest priority level the MCC module may base the selection of C on another given selection rule such as an SSRC number of the RTP packets of the frames as in B of .

As will be appreciated represent two relatively simple examples of the selection of of and many other different selection algorithms may be implemented in other embodiments of the invention. Also while not shown in and or C in an alternative embodiment the processes of and or C may select a high data rate frame from an originator whenever the originator sends a high data frame irrespective of other considerations such as relative priority levels and or relative data rates e.g. alternatively this can be construed as simply granting the originator a highest possible priority level that preempts other considerations . Also while Table 2 above illustrates a static set of priority levels for ATs A . . . E it will be appreciated that in other embodiments of the invention the priority levels may be dynamic and may change during the call. For example if many different ATs are transmitting high data rate frames for fairness a given AT s priority level may be decremented each time the given AT s frame is selected and the given AT s priority level may be incremented each time the given AT s frame is not selected. However there are many different ways the priority levels may be dynamically adjusted as will be appreciated by one of ordinary skill in the art.

Further while are directed to a selection algorithm in which a single high data rate frame is selected if available the processes of can be modified such that more than one frame is selected as will now be described with respect to respectively.

Referring to the application server determines whether any high data rate frames e.g. frames having a higher data rate than a th rate are received within a given time interval or timeslot from ATs A . . . E D. If no high data rate frames are determined to be present the MCC module of the application server selects one or more frames according to a given selection rule. For example the given selection rule can correction to a selection of silence frames from two or more listeners e.g. a first and second of ATs B . . . E to have accepted the call announce message from of . The actual number of frames to be selected e.g. two three etc. can be determined by an operator of the application server .

It will be appreciated that the selection of D is somewhat arbitrary and could be configured in many different ways e.g. the second and third listener s silence frame could be selected the originator s silence frame and the first silence frame could be selected etc. because irrespective of which silence frames are re transmitted on the output streams from the application server the output streams will still carry multiple mixed silence frames.

Otherwise if at least one frame from ATs A . . . E is determined to be a data frame e.g. the frame has a data rate higher than th then the MCC module determines if more than one high data rate frame is present D. If only one high data rate frame is determined to be present from ATs A . . . E in a given timeslot in D the high data rate frame is selected D. Then in D at least one additional frame that has a data rate lower e.g. rate than the selected high data rate frame is also selected based on a given selection rule e.g. which may be the same as the given selection rule noted above or different . For example the another given selection rule may correspond to a selection of B and or D such that one or more silence frames from a given number of listeners e.g. the first listener the second listener etc. are selected in D.

Otherwise if multiple high data rate frames are determined to be present in D the MCC module determines which of the multiple high data rate frames has the highest data rate D. The MCC module then determines if a single frame is present with a data rate e.g. a full rate frame that is higher than the other high data rate frames e.g. half rate frames D. If there is a single frame that has a data rate that is higher than all other frames the highest data rate frame is selected in D and the process then advances to D as discussed above. Otherwise the MCC module selects all of the frames from among the frames having the highest data rate e.g. multiple full rate frames multiple half rate frames etc. or if the number of frames required for selection is less than the number of highest data rate frames the MCC module selects among the highest data rates frames based on another given selection rule e.g. which may be the same as the given selection rule noted above or different . For example the given selection rule may correspond to a selection of the two or more frames whose RTP packet s have the lowest SSRC values. It will be appreciated that the selection of D is somewhat arbitrary and could be configured in many different ways e.g. the frames whose RTP packet s have a highest SSRC packet could be selected etc. . After the selection of D the MCC module determines whether to select any additional frames D. If so the processes advances to D as discussed above. Otherwise the selection process of is complete for this particular timeslot.

Turning to illustrates an example of the frame selection of performed at the application server where two or more group communication session participants have different priority levels and where multiple frames e.g. two or more are selected according to an embodiment of the invention. In particular illustrates a modification to the process of discussed above such that multiple frames can be selected instead of a single frame.

Referring to the application server determines whether any high data rate frames e.g. frames having a higher data rate than a th rate are received within a given time interval or timeslot from ATs A . . . E E. If no high data rate frames are determined to be present the MCC module of the application server selects one or more frames according to a given selection rule. For example the given selection rule can correction to a selection of B D and or E such that silence frames from two or more listeners are selected e.g. a first and second of ATs B . . . E to have accepted the call announce message from of . The actual number of frames to be selected e.g. two three etc. can be determined by an operator of the application server .

It will be appreciated that the selection of D is somewhat arbitrary and could be configured in many different ways e.g. the second and third listener s silence frame could be selected the originator s silence frame and the first silence frame could be selected etc. because irrespective of which silence frames are re transmitted on the output streams from the application server the output streams will still carry multiple mixed silence frames.

Otherwise if at least one frame from ATs A . . . E is determined to be a data frame e.g. the frame has a data rate higher than th then the MCC module determines if more than one high data rate frame is present E. If only one high data rate frame is determined to be present from ATs A . . . E in a given timeslot in E the high data rate frame is selected E. Then in E at least one additional frame that has a data rate lower e.g. rate than the selected high data rate frame is also selected based on a given selection rule e.g. which may be the same as the given selection rule noted above or different . For example the given selection rule may correspond to D discussed above with respect to such that one or more silence frames from a given number of listeners e.g. the first listener the second listener etc. are selected in E.

Otherwise if multiple high data rate frames are determined to be present in E the MCC module selects the high data rate frames associated with ATs having the highest priority levels as specified by Table 2 above E. The number of frames which are selected in this manner in E can be determined by an operator of the application server . While not shown in if more frames than are required for selection have high data rates and are associated with ATs having the same highest priority level the MCC module may base the selection of E on another given selection rule such as selecting based on an SSRC number e.g. highest or lowest of the RTP packets of the frames as in B of .

After the selection of E the MCC module determines whether to select any additional frames E. If so the processes advances to E as discussed above. Otherwise the selection process of is complete for this particular timeslot.

As will be appreciated there are many different possible mechanisms for selecting a subset e.g. more than one and less than all of the available frames for a particular timeslot and merely illustrate two examples of such a selection process.

Below a number of more detailed examples of the high level group communication session process of based on a selection algorithm as illustrated in C D and or E are described with respect to . In particular and illustrates examples wherein a single frame is selected as in and or C and illustrates an example wherein multiple frames are selected as in and or E.

Accordingly illustrates the group communication session process of in accordance with an embodiment of the invention. Referring to within the same timeslot AT B transmits a th rate silence frame A ATs C . . . E also each transmit th rate silence frames A and AT A transmits a half rate data frame carrying voice data A. Next in A the MCC module of the application server selects a frame from one of ATs A . . . E for re transmission upon an output stream to each other AT. In the example of because only the frame from AT A has a high data rate e.g. in this case a or half data rate AT A is selected in . It will be appreciated that AT A would be selected irrespective of the call type of the group communication session in because the selection algorithm of would select AT A in B whereas the selection algorithm of would select AT A in C. Further for clarity it will be appreciated that A through A of correspond to through respectively of . Assuming the transmissions of A through A repeat for ten 10 timeslots i.e. 10t . . . T the input stream received at the application server in timeslots 10t . . . T may be represented as follows 

Referring to Table 7 above each of timeslots 10t . . . T show AT A transmitting a half rate frame whereas each of ATs B . . . E transmit a th rate frame or silence frame at timeslots 10t . . . T. Accordingly for each of timeslots 10t . . . T A of selects AT A s half rate frame for transmitting to ATs B . . . E on an output stream.

Next in A for each of timeslots 10t . . . T the application server transmits frames for a given timeslot of the output stream which includes AT A s half rate frame to each of ATs B . . . E. Also A and A correspond to optional steps which may also be performed by the application server . In A the application server selects one of the frames for the given timeslot from one of ATs B . . . E that was not selected in A for transmission to AT A. For example the selection of A may be performed in accordance with the selection algorithm of or C except that AT A s frame is not considered in A. Based on Table 7 above each of timeslots 10t . . . T are composed of the same frame rates from each of ATs A . . . E. For convenience of explanation assume that the selection of A selects AT C s frame for each of timeslots 10t . . . T. Thus in A for each of 10t . . . T the application server transmits frames for one or more timeslots of the output stream which includes AT C s th rate frame to AT A. While illustrated in separate blocks it will be appreciated that the transmissions of A and A may be performed concurrently. Accordingly based on the assumptions presented above the output stream that is transmitted to ATs A . . . E in A and A may be represented as follows 

Accordingly as in within the same timeslot AT B transmits a th rate silence frame B ATs C . . . E also each transmit th rate silence frames B and AT A transmits a half rate data frame carrying voice data B.

Next in B the MCC module of the application server selects a frame from more than one of ATs A . . . E for re transmission upon an output stream to each other AT. In the example of it may be assumed that the frame from AT A corresponds to one of the selected frames because in this example AT A is the only AT among ATs A . . . E to transmit a high data rate frame e.g. a half rate frame . Thus in the selection process of AT A s frame is selected at D after the decision in D that only one high data rate frame is present. Then after the selection of AT A s frame it may be assumed within this example for the sake of convenience that AT B s frame is also selected in D. Thus the example provided herein assumes that two frames are selected in B although in other embodiments more than two frames could be selected in B. In an alternative example if the selection process of were implemented instead of it will be appreciated that AT A s frame is selected at E after the decision in E that only one high data rate frame is present. For convenience it will further be assumed under this implementation that AT B s frame is selected at E. Thus going forward assume frames from ATs A and B are selected in B.

After selecting frames from ATs A and B in B the MCC module mixes the selected frames in B. This mixing can correspond to the same manner by which conventional media streams are mixed e.g. in a digital processing sense except the mixing in B is limited to a selected subset of frames e.g. from ATs A and B only and not a mixing of each frame from each participant to the group communication session with permission to transmit e.g. in this case ATs A . . . E . Accordingly the MCC module then sends the mixed frames i.e. frame A frame B to ATs C . . . E sends the un mixed frame from AT B to AT A and sends the un mixed frame from AT A to AT B. It is appreciated that in this embodiment the mixed frame is not sent to AT A or AT B so as to reduce an occurrence of feedback although it is at least theoretically possible that the mixed frame could be sent to all participants in the same manner to simplify programming logic at the MCC module in other embodiments. However in an alternative embodiments where three or more frames are selected in B then each AT associated with one of the selected frames would actually receive a mixed frame although each selected AT s own frame would be removed from the stream that it receives.

Further for clarity it will be appreciated that B through B of correspond to through respectively of . Assuming the transmissions of B through B and the selection of B repeat for ten 10 timeslots i.e. 10t . . . T the input stream received at the application server in timeslots 10t . . . T may be represented as illustrated above in Table 7.

Accordingly in B for each of timeslots 10t . . . T the application server transmits frames for a given timeslot of the output stream which includes AT A s half rate frame and AT B s th rate frame to each of ATs C . . . E. Also B and B correspond to optional steps which may also be performed by the application server . In B the application server selects one of the frames for the given timeslot from one of ATs C . . . E that was not selected in B for transmission to ATs A and B. For example the selection of B may be performed in accordance with the selection algorithm of or C except that frames from ATs A and B are not considered in B. Based on Table 7 above each of timeslots 10t . . . T are composed of the same frame rates from each of ATs A . . . E. For convenience of explanation assume that the selection of B selects AT C s frame for each of timeslots 10t . . . T. Thus in B for each of 10t . . . T the application server transmits frames for one or more timeslots of the output stream which includes AT C s th rate frame to ATs A and B e.g. in addition to the un mixed frames from AT A to AT B and from AT B to AT A . While illustrated in separate blocks it will be appreciated that the transmissions of B and B may be performed concurrently. Accordingly based on the assumptions presented above the output stream that is transmitted to ATs A . . . E in B and B may be represented as follows 

Accordingly as will be appreciated upon a review of the selection of of may correspond to a selection of a single frame from one AT for transmission to each other AT per timeslot e.g. see or alternatively may correspond to a selection of a single frame from multiple ATs e.g. two or more for transmission to each other AT per timeslot e.g. see . Below additional embodiments have been directed to a single frame selection from a single AT per timeslot as in or the selection processes of . However the description of these embodiments have been provided for convenience of explanation and not to imply that frames from multiple ATs cannot be selected in the embodiments described below with respect to . In other words it is within the ability of one of ordinary skill in the art to apply the multiple frame selection per timeslot as in E or B to each of the embodiments described below such that references to single frame selection from a single AT per timeslot are simply examples to facilitate understanding of the embodiments.

Accordingly an example will now be provided of an interspersed talk spurt wherein different of ATs A . . . E take turns transmitting high data rate frames e.g. which may be indicated a conversation is taking place with many participants . Thus assume that the process of e.g. or in another embodiment executes for at least one time interval or timeslot and the process of then advances to of .

Referring to at a next timeslot following the transmission of the output stream for a given timeslot in A and A of assume that AT B transmits a half rate data frame carrying voice data ATs C . . . E each transmit th rate silence frames and AT A transmits a th rate silence frame . Next in the MCC module of the application server selects a frame from one of ATs A . . . E for re transmission upon an output stream to each other AT. In the example of because only the frame from AT B has a high data rate e.g. in this case a or half data rate AT B is selected in . It will be appreciated that AT B would be selected irrespective of the call type of the group communication session in because the selection algorithm of would select AT B in B whereas the selection algorithm of would select AT B in C. Further for clarity it will be appreciated that through of correspond to through respectively of .

Assuming the transmissions of A through A repeat for five 5 timeslots 10t . . . 6t and that the transmissions of through repeat for the next five 5 timeslots 5t . . . T the input stream received at the application server over timeslots 10t . . . T may be represented as follows 

Referring to Table 9 above each of timeslots 10t . . . 6t show AT A transmitting a half rate frame whereas each of ATs B . . . E transmit a th rate frame or silence frame. Then each of timeslots 5t . . . T show AT B transmitting a half rate frame whereas each of ATs A and C . . . E transmit a th rate frame or silence frame. Accordingly for each of 10t . . . 6t A of selects AT A s half rate frame for transmitting to ATs B . . . E on an output stream whereas for each of 5t . . . T of selects AT B s half rate frame for transmitting to ATs A and C . . . E on the output stream

Next in for each of timeslots 5t . . . T the application server transmits the output stream which includes AT B s half rate frame to each of ATs A and C . . . E. Also and correspond to optional steps which may also be performed by the application server . In for timeslots 5t . . . T the application server selects one of the frames for the given timeslot from one of ATs A and C . . . E that was not selected in for transmission to AT B. For example the selection of may be performed in accordance with the selection algorithm of or C except that AT B s frame is not considered in . Based on Table 9 above each of timeslots 5t . . . T are composed of the same frame rates from each of ATs A . . . E. For convenience of explanation assume that the selection of selects AT C s frame for each of timeslots 5t . . . T. Thus in for each of 5t . . . T the application server transmits the output stream which includes AT C s th rate frame to AT B. While illustrated in separate blocks it will be appreciated that the transmissions of and may be performed concurrently. Accordingly based on the assumptions presented above the output stream that is transmitted to ATs A . . . E over timeslots 10t . . . T based on the input stream of Table 9 above may be represented as follows 

While the example of is directed to a continuous talk spurt e.g. a series of high data rate frames from a single AT i.e. AT A and is directed to an interspersed talk spurt e.g. ATs take turns transmitting high data rate frames an example of multiple ATs transmitting high data rate frames at the same time will now be provided with respect to . also provides an example of how to evaluate timeslots where no ATs are transmitting high data rate frames.

Referring to each of ATs A . . . E transmit frames e.g. data frames and or silence frames at given data rates over a ten timeslot interval of 10t . . . T and .

In for each of timeslots 10t . . . T the MCC module of the application server selects a frame from one of ATs A . . . E for re transmission upon an output stream to each other AT. In the example of assume that the transmissions of through result in an input stream as illustrated in Table 11 below at the MCC module of the application server 

Accordingly the selection for timeslots 10t and 3t . . . T of Table 11 above is performed in accordance with e.g. see Table 7 above and the half rate frame from AT A is selected because AT A is the only AT among ATs A . . . E to transmit a high data rate frame in these timeslots. Likewise the selection for timeslots 8t 7t and 5t of Table 11 above is performed in accordance with timeslots 5t . . . T from e.g. see Table 9 above and the half rate frame from AT B is selected because AT B is the only AT among ATs A . . . E to transmit a high data rate frame in these timeslots.

However in timeslots 9t and 6t of Table 11 above both of ATs A and B transmit half rate frames. Accordingly for 9t and 6t in of the application server applies a selection algorithm such as illustrated in and or C based on the call type for the group communication session. For example if each of ATs A . . . E have the same priority level for the group communication session s call type the selection of is performed in accordance with and if two or more of ATs A . . . E have different priority levels for the group communication session s call type the selection of is performed in accordance with . In either case for convenience of explanation assume that a concurrent high data rate frame transmission between ATs A and B in evaluates to AT B s frame being selected irrespective of the call type e.g. based on the selection of B in or the selection of C in .

Also in timeslot 4t each of ATs A . . . E transmit a th rate silence frame. Accordingly the determinations of B of of advance to B and C respectively which selects the first listener s silence frame for transmission in 4t irrespective of the call type.

Also as in A and A above and correspond to optional steps which may also be performed by the application server . In for each of timeslots 10t . . . T the application server selects one of the frames for the given timeslot from one of ATs A . . . E that was not selected in for a corresponding timeslot for transmission to the AT associated with the selected frame of the corresponding timeslot. In assume that AT B s th rate frame is selected for 10t and 3t . . . T and that AT C s th rate frame is selected for 9t . . . 5t. It will be appreciated that and are not performed in 4t because there are no data frames in the input stream such that the selected th silent frame from is sent to each of ATs A . . . E e.g. even though one of ATs A . . . E will be fed back its own silence frame . The application server then transmits the selected frames from to the ATs over 10t . . . 5t and 3t . . . T .

Accordingly based on the assumptions presented above the output stream that is transmitted to ATs A . . . E over timeslots 10t . . . T in and may be represented as follows 

As will be appreciated by one of ordinary skill in the art the manner in which the header of the RTP packets is configured on the output stream to ATs A . . . E can affect whether the target AT will successfully decode the RTP packet containing the frame or will simply drop the frame. For example the general framework of the RTP packet header portion is illustrated in Table 1 above . As noted above among other fields the RTP packet header includes the CC field the Sequence Number field the Timestamp field and the SSRC number field each of which is defined above with respect to Table 1 above .

An AT decoding a media stream may have certain expectations as to what types of values are associated with valid RTP packets for the media stream for each of these fields. For example if a RTP packet is received at the AT with the wrong SSRC number timestamp value and or sequence number the RTP packet may simply be dropped by the AT. As will be appreciated each media stream received from ATs A . . . E at the application server is composed of RTP packets with field values specific to each AT s reverse link media stream. For example AT A has its own SSRC value to identify its media stream and so on.

Referring to in the application server selects a frame from one of ATs B . . . E for transmission to AT A on an output stream within a given timeslot. In an example the selection of may correspond to any frame selection from above described embodiments e.g. of A of A of etc. . Next the application server generates an output frame for transmission to AT A within the given timeslot of an output stream . In the application server configures an RTP packet header of an RTP packet carrying the output frame for AT A to facilitate decoding at AT A irrespective of which of ATs B . . . E s frame is being sent to AT A within the configured RTP packet. In other words media flow parameters e.g. CC field timestamp field SSRC field sequence number field etc. from the selected frame on the input stream are re configured if necessary for the RTP packet carrying the output stream.

For example as will be described below in greater detail the configuring of may include modifying the CC field the Sequence Number field the Timestamp field and or SSRC number field from the RTP packet header received in the application server s input stream that is specific to the transmitting or originating AT to field values that are maintained by the application server for the output stream of the group communication session. Thus while the data payload portion of the RTP packet is modified in accordance with whichever frame from the input stream is selected to be output to AT A the RTP packet header portion can be adjusted as necessary to facilitate decoding at AT A and need not simply map to the RTP packet carrying the selected frame on the input stream.

After configuring the output frame with the modified RTP packet header portion the application server transmits the configured output frame to AT A . Based at least in part on the manner in which the RTP packet header portion in the output frame is configured AT A determines whether to decode the RTP packet . Because of the configuration of the RTP packet header portion assume that AT A determines to decode the RTP packet in and the RTP packet and associated frame are decoded by AT A .

More specific examples of RTP packet header modifications that can be made at the application server to facilitate decoding at target ATs to a group communication session will now be described with respect to .

For example illustrates decoding results at AT A during the group communication session of any of and or where the application server refrains from modifying a SSRC value of the RTP packets forwarded to AT A in the output stream whereas illustrates decoding results at AT A during the same group communication session where the application server modifies the SSRC value in accordance with .

Referring to the application server assigns a SSRC value e.g. SSRC 2 to AT A that identifies a current speaker or floor holder for the group communication session . For example the assignment of the SSRC value in may correspond to an ASK FYI message and AT A only decodes RTP packets for the group communication session that have a SSRC value corresponding to the most recently assigned SSRC value. Thus AT A will only decode RTP packets having a SSRC value of 2 until another SSRC value assignment message e.g. ASK FYI message is received at AT A. As will be appreciated the ASK user identity message is sent by the AT to the application server in the event the AT receives an RTP packet with an unknown or unexpected SSRC. The application server responds to the ASK message with the identity of the client that the previously unknown SSRC value corresponds to. In the above portion of the ASK message which prompts the SSRC assignment or FYI message in step of can be triggered at AT A when AT A receives the RTP packets from SSRC 2 before SSRC 2 is assigned in step and again after SSRC 3 is received later at step discussed below.

Next the application server selects a frame from one of ATs B . . . E for transmission to AT A on an output stream within a given timeslot . In an example the selection of may correspond to of A of A of etc. Next the application server generates an output frame for transmission to AT A within the given timeslot of an output stream . In the example of assume that the RTP packet carrying the output frame maintains in its header portion the SSRC value associated with the originating AT for the frame which has an SSRC value of 2. Accordingly the application server transmits the output frame in the RTP packet including the non modified SSRC value of 2 to AT A .

AT A receives the RTP packet carrying the transmitted output frame e.g. and potentially other output frames as well and evaluates at least the SSRC value in the RTP packet header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the SSRC value in the RTP packet header portion equals 2. Because it is assumed that the SSRC value for the RTP packet is 2 AT A decodes the frame .

Next the application server selects a frame from a different one of ATs B . . . E for transmission to AT A on an output stream within a next timeslot . Next the application server generates an output frame for transmission to AT A within the next timeslot of an output stream . In the example of assume that the RTP packet carrying the output frame maintains the SSRC value associated with the originating AT for the frame which now has an SSRC value of 3 e.g. because the application server has switched to a frame from another AT . Accordingly the application server transmits the output frame in the RTP packet including the non modified SSRC value of 3 to AT A .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the SSRC value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the SSRC value in the RTP packet header portion equals 2. Because it is assumed that the SSRC value for the RTP packet is 3 AT A drops the frame . Also it is understood that RTP packets from SSRC 2 after AT A is assigned to decode SSRC 3 should be dropped only if an associated timestamp in the RTP packet header is older than the most current packet from SSRC 3 as this will reduce an occurrence of dropped packets if the SSRC 2 RTP packet is a legitimate transition back to SSRC 2.

In an illustrative example assume that SSRC values assigned to ATs A . . . E for their reverse link RTP packet transmissions are 1 . . . 5 respectively. Next assume that an input stream received at the MCC module of the application server over timeslots 10t . . . T corresponds to Table 11 above . Accordingly the output stream transmitted to ATs A . . . E which has already been described above with respect to Table 12 above may include SSRC values for each output frame or RTP packet e.g. with the assumption that there is a one to one mapping between output frames and RTP packets and multiple output frames are not bundled within a single RTP packet of the output stream as follows 

Next assume that the SSRC value assignment of for packet decoding transmits SSRC 2 to AT A as described above and separately indicates SSRC 1 to each of ATs B . . . E. Under these assumptions it will be appreciated that assuming no additional SSRC value assignment messages are sent to ATs A . . . E and the process of is executed at ATs A . . . E over timeslots 10t . . . T then Table 14 below indicates the RTP packets e.g. with the assumption that there is a one to one mapping between output frames and RTP packets and multiple output frames are not bundled within a single RTP packet that are actually decoded or played back at each of ATs A . . . E as follows 

As shown in Table 14 ATs B . . . E drop each packet between timeslots 9t . . . 4t because the associated SSRC value is not 1.

Accordingly illustrates the process of applied to the scenario presented in . illustrates decoding results at AT A during the group communication session of any of and or where the application server modifies the SSRC value of the RTP packets forwarded to AT A in the output stream in accordance with .

Referring to the application server assigns a SSRC value e.g. SSRC 1 to AT A that is used to identify any RTP packet forwarded by the application server for the group communication session . The SSRC assignment of need only be performed once per group communication session irrespective of the application server switching between frames of different ATs during the group communication session. Thus AT A will only decode packets having a SSRC value of 1 during the group communication session. While not shown explicitly within each of ATs B . . . E also receive the SSRC value assignment message instructing ATs B . . . E to decode RTP packets with SSRC values being equal to 1 for the group communication session.

Next the application server selects a frame from one of ATs B . . . E for transmission to AT A on an output stream within a given timeslot . In an example the selection of may correspond to of A of A of etc. Next the application server generates an output frame for transmission to AT A within the given timeslot of an output stream . In particular the application server modifies the SSRC value of a RTP packet carrying the output frame in if necessary such that the SSRC value for the generated output frame is 1. Also the application server may optionally modify the CSRC value of the RTP packet carrying the output frame to an SSRC value that indicates the SSRC value of the output frame s originating AT. Thus if the SSRC value of a RTP packet associated with the selected frame in the input stream is 4 the SSRC value of the output frame replaces 4 with 1 and sets CSRC to be equal to 4. Accordingly the application server transmits the output frame within the RTP packet including the potentially modified SSRC value of 1 to AT A e.g. and optionally the CSRC value of 4 .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the SSRC value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the SSRC value in the RTP packet header portion equals 1. Because the application server has set the SSRC value for the RTP packet to 1 AT A decodes the frame .

Next the application server selects a frame from a different one of ATs B . . . E for transmission to AT A on an output stream within a next timeslot . Next the application server generates an output frame for transmission to AT A within the next timeslot of an output stream . As in irrespective of an SSRC value in an input stream of an RTP packet for the newly selected frame the SSRC value of the RTP packet carrying the output frame in the output stream to AT A is set to 1 and an CSRC value corresponding to the SSRC value of the selected frame s RTP packet on the input stream may optionally be added to the RTP packet header portion of the RTP packet carrying the output frame in . Accordingly the application server transmits the output frame within the RTP packet including the potentially modified SSRC value of 1 to AT A e.g. and optionally the CSRC value of 4 .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the SSRC value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the SSRC value in the RTP packet header portion equals 1. Because the application server has set the SSRC value for the RTP packet to 1 AT A decodes the frame .

In an illustrative example assume that SSRC values assigned to ATs A . . . E for their reverse link RTP packet transmissions are 1 . . . 5 respectively. Next assume that an input stream received at the MCC module of the application server over timeslots 10t . . . T corresponds to Table 11 above . Accordingly the output stream transmitted to ATs A . . . E which has already been described above with respect to Table 12 above may include SSRC values for each RTP packet carrying output frames e.g. with the assumption that there is a one to one mapping between output frames and RTP packets and multiple output frames are not bundled within a single RTP packet of the output stream as follows 

Next assume that the SSRC value assignment of for packet decoding transmits SSRC 1 to AT A as described above and separately indicates SSRC 1 to each of ATs B . . . E. Under these assumptions it will be appreciated that assuming no additional SSRC value assignment messages are sent to ATs A . . . E and the process of is executed at ATs A . . . E over timeslots 10t . . . T then Table 15 above not only illustrates the output stream but also illustrates the playback at each of the respective ATs A . . . E because no packets are dropped.

While are directed to demonstrating the effect of SSRC values upon packet decoding decisions at ATs during a group communication session another RTP packet header field that can affect packet decoding decisions is the sequence number as will now be described with respect to .

For example illustrates decoding results at AT A during the group communication session of any of and or where the application server refrains from modifying a sequence number value of the RTP packets forwarded to AT A in the output stream whereas illustrates decoding results at AT A during the same group communication session where the application server modifies the sequence number value in accordance with .

Referring to in the application server selects a frame from one of ATs B . . . E for transmission to AT A on an output stream within a given timeslot . In an example the selection of may correspond to of A of A of etc. Next the application server generates an output frame for transmission to AT A within the given timeslot of an output stream . In the example of assume that the RTP packet carrying the output frame maintains the sequence number value associated with the originating AT s RTP packet carrying the frame which has a sequence number for the current timeslot of . Accordingly the application server transmits the output frame within an RTP packet including the non modified sequence number value of to AT A .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the sequence number value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the sequence number value in the RTP packet header portion is in sequence with one or more previous RTP packets. In assume that the sequence number value is in sequence and AT A decodes the RTP packet payload and thereby the frame .

Next the application server selects a frame from a different one of ATs B . . . E for transmission to AT A on an output stream within a next timeslot . Next the application server generates an output frame for transmission to AT A within the next timeslot of an output stream . In the example of assume that the RTP packet carrying the output frame maintains the sequence number value associated with the originating AT for the frame which for example can have a sequence number of . Accordingly the application server transmits the output frame within a RTP packet including the non modified sequence number value of to AT A .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the sequence number value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the sequence number value in the RTP packet header portion is in sequence with one or more previous RTP packets. Because the sequence number of is not in sequence with the sequence number of AT A drops the frame i.e. does not decode the RTP packet payload portion .

In an illustrative example assume that sequence number values assigned to ATs A . . . E for their reverse link RTP packet transmissions over timeslots 10t . . . T for the input stream of Table 11 above are denoted by Table 16 below as follows 

Accordingly the output stream transmitted to ATs A . . . E which has already been described above with respect to Table 12 above may include sequence number values for each RTP packet carrying an associated output frame e.g. with the assumption that there is a one to one mapping between output frames and RTP packets and multiple output frames are not bundled within a single RTP packet of the output stream as follows 

Under these assumptions it will be appreciated that if the process of is executed at ATs A . . . E over timeslots 10t . . . T then Table 18 below indicates the RTP packets that are actually decoded or played back at each of ATs A . . . E as follows 

As shown in Table 18 ATs B . . . E drop each frames between timeslots 9t . . . 4t because the associated sequence number value is not in sequence.

Next illustrates the process of applied to the scenario presented in . illustrates decoding results at AT A during the group communication session of any of and or where the application server modifies the sequence number value of the RTP packets forwarded to AT A in the output stream in accordance with .

Referring to the application server maintains a single stream of sequence number values e.g. 0001 0002 0003 etc. that are used for RTP packets on the output stream irrespective of the individual sequence numbers associated with the RTP packets on the input stream.

In the application server selects a frame from one of ATs B . . . E for transmission to AT A on an output stream within a given timeslot. In an example the selection of may correspond to of A of A of etc. Next the application server generates an output frame for transmission to AT A within the given timeslot of an output stream . In particular the application server modifies the sequence number value of a RTP packet carrying the output frame in if necessary such that the sequence number value for the RTP packet corresponds to a current sequence number of an output frame sequence for the group communication session group communication session sequence number e.g. 0001 . Accordingly the application server transmits the output frame within the RTP packet including the current group communication session sequence number to AT A and then increments the group communication session sequence number e.g. from 0001 to 0002 .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the sequence number value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the sequence number value in the RTP packet header portion is in sequence. Because the group communication session sequence number remains in sequence irrespective of whether the application server switches between media flows of different ATs AT A decodes the RTP packet payload portion and thereby decodes the frame .

Next the application server selects a frame from a different one of ATs B . . . E for transmission to AT A on an output stream within a next timeslot . Next the application server generates an output frame for transmission to AT A within the next timeslot of an output stream . As in irrespective of an sequence number value in an input stream of a RTP packet carrying the newly selected frame the sequence number value of a RTP packet carrying the output frame in the output stream to AT A is set to the current group communication session sequence number e.g. 0002 in . Accordingly the application server transmits the output frame within the RTP packet including the current group communication session sequence number to AT A .

AT A receives the RTP packet carrying the transmitted output frame and evaluates at least the sequence number value in the header in order to determine whether to decode the payload of the RTP packet . In particular AT A checks whether the sequence number value in the RTP packet header portion is in sequence. Because the group communication session sequence number remains in sequence irrespective of whether the application server switches between media flows of different ATs AT A decodes the RTP payload portion and thereby decodes the frame .

In an illustrative example assume that sequence number values assigned to ATs A . . . E for their reverse link RTP packet transmissions over timeslots 10t . . . T for the input stream of Table 11 above are denoted by Table 16 above . Under these assumptions it will be appreciated that if the process of is executed at ATs A . . . E over timeslots 10t . . . T then Table 19 below indicates the output stream transmitted to ATs A . . . E which has already been described above with respect to Table 12 above including sequence number values for RTP packets carrying each output frame e.g. with the assumption that there is a one to one mapping between output frames and RTP packets and multiple output frames are not bundled within a single RTP packet of the output stream as follows 

Under these assumptions it will be appreciated that assuming the process of is executed at ATs A . . . E over timeslots 10t . . . T then Table 19 above not only illustrates the output stream but also illustrates the playback at each of the respective ATs A . . . E because no RTP packets are dropped.

While have been directed towards implementations of based on modification to SSRC and sequence numbers separately it will be appreciated that the processes of may alternatively be performed concurrently. Also other implementations of may be directed to modifying other fields media flow parameters of the RTP packet header to facilitate decoding such as the Timestamp field of the RTP packet header. This embodiment will not be described in greater detail as it should be readily apparent in view of the description of from above.

While embodiments have been above described generally to audio based group communication sessions other embodiments can be directed to other types of group communication session such as video conferences etc. Also while embodiments have been directed above to RTP packets it will be appreciated that other embodiments of the invention can be directed to other types of media packets. For example in a system operating in accordance with RealNetworks protocols a RDT packet may be used instead of an RTP packet. In other words as noted above while embodiments have generally been directed to an implementation in accordance with EVRC A protocols other Vocoders e.g. AMR etc. that have a discrete frame rate set can be used in other embodiments of the invention.

Those of skill in the art will appreciate that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Further those of skill in the art will appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention.

The various illustrative logical blocks modules and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The methods sequences and or algorithms described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal e.g. access terminal . In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary embodiments the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

While the foregoing disclosure shows illustrative embodiments of the invention it should be noted that various changes and modifications could be made herein without departing from the scope of the invention as defined by the appended claims. The functions steps and or actions of the method claims in accordance with the embodiments of the invention described herein need not be performed in any particular order. Furthermore although elements of the invention may be described or claimed in the singular the plural is contemplated unless limitation to the singular is explicitly stated.

