---

title: Electric storage apparatus and power control system
abstract: An electric power apparatus includes an energy device, a device manager, and a storage system manager.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09318917&OS=09318917&RS=09318917
owner: Sony Corporation
number: 09318917
owner_city: Tokyo
owner_country: JP
publication_date: 20100325
---
The present application claims priority to U.S. Provisional Patent App. No. 61 168 054 filed on Apr. 9 2009 and U.S. Provisional Patent App. No. 61 168 767 filed on Apr. 13 2009 the entire contents of which are being incorporated herein by reference.

The present disclosure relates to an electric storage apparatus and a power control system that may be adapted to a home electric storage apparatus.

Recently use of renewable energy has been actively researched and developed in order to break from dependency on fossil fuels. As power generation using the renewable energy there are solar photovoltaic power generation wind power generation fuel cells biomass power generation wave activated power generation and the like. In the case where the renewable energy is used there are problems in that the amount of power generation varies with natural conditions and in that deficiency and excess occur with respect to power consumption.

In order to solve the problems there has been contrived and utilized a technology. In the technology a storage battery is installed in each home and an output power of the solar photovoltaic power generation or the like is temporarily stored in an electric storage apparatus hereinafter properly referred to as a storage and the output power of the storage is used according to the power consumption. In other words a lithium ion battery or other storages are installed in a distributive environment in the home or around the home and the in home power consumption is controlled by HEMS home energy management system . More specifically the peak of the in home power consumption is in a flat behavior time shift of storing the power in a time period where the power is inexpensive and discharging and consuming the power in a time period where the power is expensive is implemented surplus power generated by the power generation apparatus such as solar cells is accumulated and the quality of power is stabilized.

However the above technology has problems in that the cost is high in that the shape or weight is large and in that maintenance or safety management method is not ensured. If various applications are commonly used through standardization of the storage and if recycling proceeds through the charging control and the life cycle management by using a network it may be expected to effectively use resources and to reduce the cost.

The embodiments provide an electric storage apparatus and a power control system capable of greatly reducing installation cost of a battery or a home storage by configuring the home storage with an energy device such as the battery which can be used for a single application or a plurality of applications.

According to an embodiment there is provided an electric power apparatus including an energy device a device manager and a storage system manager. The energy device may have an ID and performs mutual authentication with respect to the storage system manager by using the ID.

The device manager may receive or transmit storage information from or to the storage system manager via an information bus.

In addition the device manager or the storage system manager may receive or transmit the storage information from or to a home controller which controls the home electric power.

The device manager or the storage system manager may receive or transmit the storage information from or to a server on a network.

The device manager or the storage system manager may receive or transmit the storage information from or to a power regulating apparatus.

The device manager the storage system manager or the home controller may acquire storage control information from the server on the network.

The device manager the storage system manager or the home controller may control the energy device according to the storage control information.

According to another embodiment there is provided an electric power apparatus including a storage system manager a first electric power module having a first energy device and a first device manager and a second electric power module having a second energy device and a second device manager.

According to another embodiment there is provided a power control system including an electric power apparatus having an energy device a device manager and a storage system manager a home controller and a power regulating apparatus.

The device manager or the storage system manager may receive or transmit storage information from or to a network the home controller or the power regulating apparatus.

The home controller the storage system manager or the device manager may control the power regulating apparatus according to the storage information for controlling the power supply to the electric power apparatus.

The home controller the device manager or the power regulating apparatus may monitor power consumption to acquire information on the power consumption.

The home controller the storage system manager the device manager or the power regulating apparatus may control the power supply to the electric power apparatus or the power supply to a power storage unit according to the information on the power consumption.

The home controller the storage system manager the device manager or the power regulating apparatus may control increasing or initiating of the power supply to the electric power apparatus or the power storage unit in the case where the power consumption is small and or control increasing or initiating of the power supply from the electric power apparatus or the power storage unit in the case where the power consumption is large.

The home controller the storage system manager the device manager or the power regulating apparatus may control optimization of the power supply amount from a power supply network according to the power consumption.

The home controller the storage system manager the device manager or the power regulating apparatus may control decreasing or stopping of the power supply from the power supply network in the case where the power consumption is large and or control increasing or initiating the power supply to the power supply network in the case where the power consumption is small.

The home controller the storage system manager the device manager or the power regulating apparatus may control the power supply to the electric power apparatus according to information supplied from the server on the network.

The home controller the storage system manager the device manager or the power regulating apparatus may control the power supply to the electric power apparatus or the power storage unit and or the power supply from the electric power apparatus or the power storage unit according to detected information.

The home controller the storage system manager the device manager or the power regulating apparatus may control power supply to a power supply network and or the power supply from the power supply network according to the detected information.

The home controller the storage system manager the device manager the power regulating apparatus may predict the power consumption according the detected information or the supplied information.

The home controller the storage system manager the device manager or the power regulating apparatus may control the power supply to the electric power apparatus according to the predicted power consumption.

In addition mutual authentication may be performed between at least two of the energy devices the device manager the storage system manager the home controller the power regulating apparatus and the network.

According to the embodiment by standardizing communizing the input and output scheme the charging interface scheme and the authentication scheme of the energy device such as a battery used for the storage and performing the device management through the network it is possible to safely use the energy device and to use the energy device for various applications. Accordingly the cost of the energy device is reduced so that it is possible to extend new applications driven with a battery and to improve convenience of energy device management for a user.

In addition according to the embodiment the standardized device may be used as the home storage. Accordingly it is possible to flexibly expand the capacity or configuration of the storage according to customer s purpose without large initial investment. In addition it is possible to effectively use various types of batteries for applications and to facilitate resources saving and space saving.

Additional features and advantages are described herein and will be apparent from the following Detailed Description and the figures.

Hereinafter exemplary embodiments are described. In addition the embodiments described hereinafter are detailed and appropriate examples and various technical limitations are preferably added.

As shown in a power control system according to the embodiment has a configuration where the power control system provides a user service associated with power security and comfort of home and operates on a common platform in connection among sensors electric power apparatuses referred to as a smart storage according to the embodiment home and society. A solution to power storage problem described later is implemented by the smart storage. In addition power of clean energy generation such as photovoltaic power generation fuel cell and wind power generation is supplied to the home.

The power control system according to the embodiment includes an energy device an electric power apparatus having a device manager and a storage system manager a home controller and a power regulating apparatus hereinafter referred to as a power conditioner . In addition the power control system includes a network. The network includes an electric power company an energy service provider a communication service provider a storage supplier a mobile information terminal a mobile computer and a combination thereof

The storage system manager is connected to the device manager. The storage system manager monitors system operations optimization of load allocation and the status safety and reliability of the system.

The storage system manager is connected to a home energy manager through an API application programming interface . In addition the storage system manager transfers information with respect to a server on the network through the network. The home energy manager transfers information with respect to a server on the network through the network.

The home energy manager performs monitoring of the storage and controls the operations of the storage. In this case the home energy manager receives manufacturing information maintenance information and trouble information of the device from the server on the network.

The storage monitoring and the storage operation controlling of the storage system manager is provided through the network by the energy service provider or the storage service provider.

The information shown in is used for the energy management and the energy storage management. The information on the sensors is used for the energy management and the energy storage management. The information on the in home sensors is used to detect track and predict user s behavior. More specifically the information on motion sensors door window key sensors and the noise sensors and information of on and off of switches information of operations of electronic apparatuses and home electrical appliances are used. In addition personal schedule information user s personal information and a combination thereof are used.

The information of the in home sensors is used to detect track and predict home environment and user s comfort. More specifically information of temperature humidity sensors vibration sensors air monitoring sensors brightness sensors and the like is used.

The information of a power meter a thermal sensor and the like is used to detect track and predict energy consumption and generation.

In addition to the aforementioned in home sensors external information is used to manage the energy and the energy storage.

Information of mesh for example 50 m 50 m climate and Information of local weather condition are used to detect track and predict power generation photovoltaic power generation wind power generation and the like using renewable energy.

Information of news media TV radio the Internet and the like information of transportation information of risk safety disaster accident disease and the like information on town and event information of ubiquitous sensors and information of social network are used to detect track and predict behaviors of persons. In other words the sensors monitor temperature humidity brightness persons behaviors or a combination thereof indoors or outdoors.

A recommendation of automatic operations and configuration of the energy storage a configuration model and capacity of the energy storage may be changed by using home information and external information for the aforementioned detection tracking and prediction.

Schematic layout of the energy management and the energy storage management is shown in . A home network hub sensors a smart storage a controller for the smart storage an electronic apparatus having a sensor and a solar photovoltaic power generation module for example BIPV building integrated photovoltaic module are provided in the home. The components are connected through a smart meter to a grid. In addition external information may be introduced through the Internet into the home.

The power peak shift may be implemented by using the in home smart storage for example a lithium ion battery and an electric double layer are used as the energy device . schematically illustrates peak shift. In the case where power consumption indicated by the dotted line is obtained in the related art the peak of the power consumption may be suppressed down to the peak indicated by the solid line by using the power stored in the smart storage. In addition since the power stored in the smart storage can be implemented by power generation using a renewable energy the carbon emission of the home may be suppressed.

In the related art since the home storage battery is used to only compensate for the in home power consumption the home storage battery is large and expensive. The smart storage according to the embodiment is used for the battery used in the home storage battery and for other applications for example a battery used as a driving force of an electric bicycle so that the problem in the related art may be solved.

As shown in the battery communicates with the home energy gateway. The home energy gateway charges the battery and allows the battery to function as the home storage battery. The home energy gateway is connected through the network for example the Internet to the battery management server.

The battery is configured to be uniquely identified by a secure battery identifier battery ID . The battery management server manages batteries according to the battery IDs. In other words the database of information for example information for charging recall information and the like necessary to use the battery specified by the battery ID is constructed by the battery management server.

The home energy gateway may safely or appropriately charge the battery by using the storage information corresponding to the battery ID from the server. In addition the information charging times trouble and the like of the using result of the battery is transmitted from the home energy gateway to the server so that the storage information of the database of the server is updated to the latest information.

On the other hand the battery is configured to be detachable so that the detached battery may be used for other applications. In other words the battery may be used as a source of a driving force of an electric apparatus for example an electric bicycle. The application is not limited to the electric vehicle but the battery may be used for an electric automatic bicycle an electric bicycle a storage battery type consumer electronic apparatus a storage battery type office apparatus a storage battery type calculator a storage battery type portable apparatus various storage battery apparatus and a combination thereof. In this manner although the battery is used as a power source other than the home storage battery since the control and the charging apparatus are commonly provided to plural types of the batteries the home storage battery may be configured at low cost without the expense of the safety. In addition if the battery is configured to be charged by the power using the renewable energy at home the carbon emission may be reduced.

The device manager has a plurality of sockets as physical connectors. Each battery is inserted to the socket. Different types of batteries may be used for the batteries . For example a lithium ion battery a capacitor a fuel cell a micro generator and the like may be used. Although the types of the batteries are different the batteries may be inserted into the standardized sockets.

The socket physically supports the battery and ensures an interface between the battery and the device manager . The interface has at least positive and negative power terminals and a terminal for outputting the battery ID. In addition the interface may be provided with a terminal for extracting a result of detection of a temperature of the battery . In addition in the case where the battery is embedded with a microcomputer a communication terminal for communication between the microcomputer and a microcomputer of the device manager is provided.

The device manager manages the energy device battery status and monitors the safety and the reliability. The device manager is connected to the storage system manager . Signals are transferred via a common information bus in the storage system manager .

AC power is supplied to the storage system manager through the power regulating apparatus . The power regulating apparatus is connected to the power network and the home AC power line. The energy that is generated by using the in home renewable energy such as solar photovoltaic power generation is supplied to the power regulating apparatus . DC power is also supplied to the storage system manager . The device manager and the storage system manager supply the information on the storage through the network to the home controller or the power conditioner .

The storage system manager or the device manager controls the power conditioner based on the information on the storage for controlling the power being supplied to the electric power apparatus. The home controller the device manager or the power conditioner monitors power consumption acquires information on the power consumption and controls the power being supplied to the smart storage based on the information on the power consumption. In addition the power consumption may be predicted so that the power being supplied to the smart storage is controlled based on the predicted power consumption.

In other words in the case where the power consumption is small or the electric power is inexpensive the power being supplied to the smart storage is controlled so as to be increased and or in the case where the power consumption is large or the electric power is expensive the power supplying from the smart storage is controlled so as to be increased. In addition in the case where the power consumption is large or the electric power is expensive the home controller the device manager or the power conditioner controls the power supplying from the power supply network to be decreased or stopped and or in the case where the power consumption is small or the electric power is inexpensive the home controller the device manager or the power conditioner controls the power being supplied to the power supply network to be increased or initiated.

The storage system manager is connected to the home controller . The in home energy is managed by the home controller . For example in order to implement the aforementioned peak shift the energy of the battery is used. The home controller and the storage system manager are connected to the server through the network. The information of the in home sensors the information of the outdoor sensors and external information are supplied to the home controller and the storage system manager .

As described above the information on motion sensors door window key sensors and the noise sensors and information of on and off of switches information of temperature and humidity sensors and the like are used. As the external information there are climate information transportation information and the like. The home controller manages the in home energy by using the information.

The storage system manager is connected through the network for example the Internet to the battery management server refer to . For example product information maintenance information trouble information and the like of the system and the devices are transmitted from the server to the storage system manager . The storage system manager may safely charge the batteries by using the aforementioned information.

In this manner the smart storage may be configured to monitor the safety and the reliability and contributed to optimization of load sharing.

As shown in the battery detached from the socket of the smart storage is used for other applications. In other words since the battery has portability the battery may be used as a power supply of a personal computer a power supply of a home electronic apparatus a power supply of an electric vehicle electric bicycle and the like. In addition a structure of the battery necessary for the socket insertion is standardized so that the battery may be inserted to the socket of a different smart storage. In addition to a physical configuration such as a shape of the battery signal processing necessary for accessing such as an interface is also unified.

When the energy device battery is inserted into the socket of the device manager mutual authentication between the battery and the storage system manager is initiated. The energy device and the storage system manager include an authentication IC as an authentication module or a combination of a microcomputer and authentication software. As the mutual authentication scheme ISO IEC 9798 entity authentication based scheme in the related art may be used. The communication data for the mutual authentication are transferred via an information bus of the storage system manager .

The mutual authentication between the battery and the storage system manager is completed the charging operation the discharging operation the protecting operation of the battery may be performed under the control of the storage system manager . The charging discharging initiating command the charging discharging ending command the charging voltage information the charging current information and the like are transacted via the information bus. In order to prevent wiretapping of the commands and information and to prevent falsification the encryption of the data transacted between the battery and the storage system manager and the message authentication code MAC message authentication code may be effectively used. In order to implement the data encryption and the message authentication code at high speed and low cost and with low power consumption a common key block encryption method such as AES advanced encryption standard and CLEFIA 128 bit block encryption method developed by Sony is effectively used. A Key encryption key for encryption and decoding and a MAC generation verification key MAC key are shared by using a key sharing protocol at the time of mutual authentication between the battery and the storage system manager in advance.

When the storage system manager and the home controller are connected to each other the mutual authentication therebetween is performed. If a mutual authentication scheme is supported by standards of wired wireless and PLC communication methods used for the connection the mutual authentication scheme may be used. If the mutual authentication and the encryption communication are not supported similarly to the case between the battery and the energy system manager the mutual authentication is performed after the connection so that the key sharing is performed.

When the mutual authentication between the storage system manager and the home controller is established and the key sharing is completed the charging states of the batteries the storage control information and the like may be exchanged between the storage system manager and the home controller . In order to prevent wiretapping of the communication data and to detect falsification similarly to the case between the battery and the storage system manager the encryption and the MAC may be effectively used.

In the case where the storage system manager and the home controller are typically connected to each other and the same key is continuously used it is preferable in terms of safety that the key sharing protocol is performed periodically and the encryption key and MAC key are updated.

The mutual authentication is also established between the storage system manager and a server on the network. In addition the mutual authentication is also established between the storage system manager and the power regulating apparatus . The mutual authentication is established similar to the mutual authentication between the storage system manager and the home controller .

Hereinbefore the embodiment is schematically described. The entire configuration of the home energy network system according to the embodiment is shown in . As described above with reference to a smart storage includes a detachable battery a device manager and a storage system manager . The storage system manager is configured to communicate with the battery management server on the network.

An energy generation apparatus is provided in the home. The energy generation apparatus is a renewable energy generation system for example solar photovoltaic power generation . In addition home appliances and home appliances and energy environment sensors are included in the home. Power is supplied to the home through a power network .

A display unit of displaying information to a user is provided. Various types of information such as warning that is detected when the storage system manager controls the charging and discharging of the battery are displayed on the display unit .

The emission calculator is disposed to be connected to the home controller . Current total power consumption of the home detected by the home controller is displayed on the display unit . The forms of the components shown as blocks in may be a form of software or a software chip set operating on hardware. As an example of the hardware there is a personal computer a home appliance a game machine a set top box a dedicated energy controller or a storage system manager .

In addition an energy carbon emission trade market and an energy carbon emission certification may be associated with the home controller .

The storage system manager is constructed with components having all the following functions or a portion of the functions.

The functions includes a function of a DC AC converter a function of a power conditioner a function of a charger a function of an energy storage and generation apparatus a wireless charging function a DC power input output function an AC power input output function a network connection function and a function of an energy protocol process apparatus.

The battery corresponds to batteries and shown in and is standardized to have the following functions.

The battery has a battery ID and is authenticated according to a unified authentication method using a battery ID. The battery ID is information for uniquely identifying the battery. Multi bit digital data are used for the battery ID. More specifically a serial number may be used for the battery ID. In addition hierarchical digital data using a plurality of attributes such as a manufacturer and a type may be used for the battery ID.

The battery is connected to the battery management server through the network and managed by the battery management server via the network.

With respect to the connection between the battery and the storage system manager and the connection between the battery and the other application apparatuses electric bicycle and the like a unified standard is defined. As described above the battery is inserted into the socket of the storage system manager . By inserting the battery into the storage system manager the smart storage is configured.

As an example of a battery used as the in home or mobile battery there are various types of energy devices such as a primary battery a secondary battery a capacitor a solar cell and a fuel cell. The energy devices may be connected to the storage system manager by using a commonly standardized device manager as an interface. Herein the device manager is provided with a detachable socket. In addition an authentication protocol or a control protocol for charging or the like between the battery and the storage system manager is configured to be common to all the energy devices.

The battery ID is an identifier for managing a battery and fixed length data for uniquely specifying the battery. Herein the battery is used as a term indicating a battery cell power generation unit and a battery pack where the battery cell and a protection circuit for the battery cell are encapsulated by an outer case. The battery ID is necessarily used for management and authentication of the battery .

Herein the authentication includes the authentication between the battery and the charging apparatus included in the storage system manager the authentication between the battery and the application and the authentication between the storage system manager and the battery management server . The battery ID or the charging interface is set to be in a unified standard and the authentication module is mounted on the battery and each apparatus so that the authentication is performed. Due to the authentication checking whether or not the battery or the apparatuses are regular products checking whether or not the products are regularly operating may be controlled in an integrated manner so that fire accident caused by abnormal connection may be prevented.

As a form of implement of the battery ID and the authentication module there is a method where the battery ID and the authentication module are mounted on a microcomputer in the battery in a software manner a method where an authentication chip of the battery ID and the authentication module are disposed in the battery or the like. As a communication method for the authentication there is a method of using a communication interface such as UART Universal Asynchronous Receiver Transceiver a method of using a sensor network according to a radio communication standard such as Bluetooth ZigBee and Wi Fi or the like. The Bluetooth method is adapted to multimedia communication so that point to multipoint connection communication may be implemented. In the ZigBee a physical layer of IEEE Institute of Electrical and Electronics Engineers 802.15.4 is used. The IEEE 802.15.4 is the name of a short range wireless network standard which is referred to as PAN Personal Area Network or W Wireless PAN.

1. The battery management server includes the authentication information and a battery status sensor to collect information on the to be managed battery the battery allocated with the battery ID through the storage system manager having the network communication function. In other words the battery management server has a function of collecting basic information manufacturer product number data of production and the like status information terminal voltages internal resistance temperature discharge current amount the number of charging and discharging cycles and the like a use history and the like of the battery .

2. The battery management server has a function of storing product information such as output power energy density and charging discharging performance of the battery and providing the information or commands so that the charging apparatus in the storage system manager performs charging management appropriate to the status or use condition of each battery.

3. The battery management server has a function of detecting an abnormal operation departing from normal operation data of the battery at the time of charging or at the time of using for an application and issuing warning to the storage system manager .

4. The battery management server has a function of receiving abnormal information accident information or recall information from a user a battery manufacturer or the like and transmitting a notice to a user who uses the battery or to the storage .

5. The battery management server has a function of cooperating with applications of apparatuses on the network home apparatuses or portable apparatuses so as to use the battery with excellent advantages in terms of economical efficiency environmental load and convenience.

Various output powers and capacities are necessary for the battery according to the applications. In order cope with the various output powers and capacities the shapes and input output terminals sockets of the batteries are configured in a unified standard so that a battery module optimized to each application may be configured by connecting the batteries. The compatibility output power capacity and the like of the configured battery module to the application or the control of the charging current and voltage can be verified by inquiring of the battery management server through the storage system manager . Therefore the battery may be safely or appropriately used for a plurality of the applications.

The authentication operation is described with reference to . The battery ID is written in each battery at the time of manufacturing thereof. In the case where the authentication module is mounted in a software manner the battery ID is stored in a protection area in a memory of a microcomputer of the battery. In the case where the authentication module is mounted in a hardware manner the battery ID is written in a non volatile memory on an authentication chip. The battery ID includes data for uniquely specifying a battery manufacturer product number data of production place of production factory line number serial number version information and the like . In addition a charging apparatus storage system manager is also allocated with an ID device ID unique to a device .

After the authentication protocol shown in is performed if the authentication is established the charging of the battery is initiated by the charging apparatus. illustrates the authentication between the battery and the storage system manager and the authentication between the storage system manager and the battery management server .

The two authentication operations are performed in parallel so that time necessary for the processes may be reduced. In addition if the authentication between the storage system manager and the battery is established the storage system manager may initiate the charging of the battery . Accordingly even in an environment where the connection to the network is not established the charging of the battery may be performed.

In the character B is used to indicate the battery the character A is used to indicate the storage system manager charging apparatus and the character S is used to indicate the battery management server . Hereinafter in the description of the protocol these abbreviated reference numerals are used.

The random numbers are generated by a random number generator using information of a remaining capacity of the battery information on the sensors and the like.

Step S the battery B generates the random number Rand transmits the random number Rassociated with the battery ID ID to the storage system manager A.

Step S after Step S the storage system manager A generates the random number R and transmits the random number R associated with the device ID ID to the battery management server S.

Step S after receiving data the battery management server S generates the random number Rand transmits the Token SA to the storage system manager A.

Step S after receiving the data transmitted from the battery B the storage system manager A generates a different random number Rand transmits the Token AB to the battery B.

Step S the storage system manager A decodes the Token SA transmitted in Step S determines whether or not the random number R extracted from the decoded data is coincident with the random number transmitted in Step S and checks whether or not the device ID ID is correct.

Step S the battery B which receives the Token AB transmitted in Step S decodes the Token AB determines whether or not the random number Rextracted from the decoded data is coincident with the random number transmitted in Step S and checks whether or not the battery ID ID is correct.

Step S In the case where the result of the determination and checking of Step S is OK the battery B transmits the Token BA to the storage system manager A. If the result is not OK NG information is transmitted to the storage system manager A.

Step S the storage system manager A which receives the Token BA decodes the Token BA determines whether or not the random number Rextracted from the decoded data is coincident with the random number transmitted in Step S and determines whether or not the random number Ris coincident with the random number transmitted in Step S. If all the results of the determination are coincident the mutual authentication between the storage system manager A and the battery B is completed. If not it is determined that the mutual authentication is not established.

Step S In the case where the result of the determination and checking of Step S is OK the storage system manager A transmits the Token AS to the battery management server S. If the result is not OK NG information is transmitted.

Step S the battery management server S which receives the Token AS decodes the Token SA and determines whether or not the random number R extracted from the decoded data is coincident with the random number transmitted in Step S. If the random number is determined to be coincident the mutual authentication between the battery management server S and the storage system manager A is completed.

Step S If the authentication of Step S is established the battery management server S searches for the battery ID ID in the database. The battery management server S checks whether there is no accident information and no recall information on the corresponding battery. If it is checked that there is no accident information and no recall information the battery management server S transmits OK information and charging control information info necessary to charge the battery B to the storage system manager A. In the case where the mutual authentication is not established in Step S the NG information indicating non establishment of the mutual authentication is transmitted.

Step S if the storage system manager A receives the OK information from the battery management server S in Step S the storage system manager A initiates the charging of the battery B according to the charging control information.

The battery management server S monitors the operations of the battery B and the operations of the storage system manager A during the charging time. In the case where the departing from the data of the normal operations is detected the battery management server S issues a warning to the storage system manager A. If the charging is completed a message indicating charging completion is displayed on the display unit of the storage system manager A. In addition if the charging is completed the status of the battery B is updated in the battery management server S. Next the session between the battery management server S and the storage system manager A is disconnected.

If the storage system manager A receives the NG information from the battery management server S it is determined that the authentication fails. A message indicating the authentication fails is displayed on the display unit of the storage system manager A. In this case the operation of charging the battery B is not initiated by the storage system manager A.

The order of the aforementioned authentication protocols is an example. Therefore the mutual authentication between the battery management server S and the storage system manager A and the mutual authentication between the storage system manager A and the battery B may be independently performed in parallel. Accordingly the authentication time may be reduced.

In addition in the case where the mutual authentication between the battery management server S and the storage system manager A is performed in advance and the connection to the network is performed only the mutual authentication between the storage system manager A and the battery B may be performed and the establishment of the authentication is notified to the battery management server S. The charging is initiated according to the abnormal information accident information recall information or charging control information of the battery B obtained in Step S.

In addition in the environment where the connection to the network is not established in the offline environment the user may select a mode where an inquiry of the battery management server is not performed. In other words if the processes Steps S S S S and S for the mutual authentication between the storage system manager A and the battery B are completed the charging is initiated. In the offline environment since the charging control information may not be received from the battery management server it is preferable that the charging control information is written in the recording medium bundled with the battery.

In addition in the mode offline mode were the network is not connected the abnormal information accident information recall information or charging control information of the battery B may not be obtained from the battery management server S. In the storage system manager A the latest information of the battery during the use thereof in the home network is typically stored so that the information may be configured to be used by the user s instruction in the mode offline mode where the network is not connected.

In addition in the mode offline mode where the network is not connected the status of the battery may not be uploaded to the battery management server S. Therefore the storage system manager A is configured to store the status of the battery. At the next connection to the battery management server the status is transmitted and the battery management server updates the information on the battery based on the information.

In addition in order to prevent counterfeiting or camouflaging of the authentication protocol due to a replay attack re transmission attack or the like the randomness of the random numbers R R and Rgenerated by the aforementioned entities is important. Although a random number generation module may be considered to be mounted on the battery management server S or the storage system manager A it is not practicable in terms of resources and cost that the random number generation module is mounted on each of the batteries. With respect to the batteries it may be considered that lower bit data of current values having large difference are considered to be generated in combination of time information battery IDs or the like.

The aforementioned authentication process is a process in the case of charging the battery. In the case where the battery is used in a configuration where the battery is mounted on the application the mutual authentication between the battery and the application is performed. The mutual authentication at the time of using the battery is also performed according to the same protocol as that for the aforementioned mutual authentication between storage system manager and the battery.

If the battery is mounted on the application after the authentication protocol shown in is performed the discharging is initiated so that the application may be used. Herein the application is also configured to be allocated with an ID. In addition between the battery B and the battery management server S and between the battery B and the system manager A the mutual authentication is completed in advance according to the protocol shown in and the connection to the network is established.

The random numbers are generated by a random number generator using information of a remaining capacity of the battery information on the sensors and the like.

Step S the application C generates the random number Rand transmits the random number Rassociated with the application ID ID to the battery B.

Step S after Step S the battery B generates the random number R generates the Token BC and transmits the Token BC to the application C.

Step S the application C which receives the Token BC transmitted in Step S decodes the Token BC determines whether or not the random number Rextracted from the decoded data is coincident with the random number transmitted in Step S and checks whether or not the application ID ID is correct.

Step S In the case where the result of the determination and checking of Step S is OK the application C transmits the Token CB to the battery B. If the result is not OK NG information is transmitted to the battery B.

Step S the battery B which receives the Token CB transmitted in Step S decodes the Token CB determines whether or not the random number Rextracted from the decoded data is coincident with the random number transmitted in Step S and determines whether or not the random number Ris coincident with the random number transmitted in Step S. If all the results of the determination are coincident the mutual authentication between the battery B and the application C is completed. If not it is determined that the mutual authentication is not established and the process is ended.

Step S in the case where the result of the determination in Step S is OK the battery B transmits the battery ID ID and the application ID ID .

Step S the battery management server S searches for the IDand the IDas keys in the database. The battery management server S checks whether there is no accident information and no recall information on the corresponding battery. In addition the battery management server S checks whether or not the corresponding battery is to be appropriately used for the application C. If it is checked that there is no problem the OK information and the discharging control information info necessary for the using in the application C is transmitted to the storage system manager A. If it is checked that there is a problem NG information is transmitted.

Step S the storage system manager A stores the received information and transmits necessary information to the battery B.

Step S When the battery B receives the OK information in Step S the battery B initiates the discharging according to the received discharging control information. In this manner the battery may be used for the application C.

The storage system manager monitors the operations of the battery and the operations of the application . In the case where departing from the data of the normal operations is detected the storage system manager displays a warning on the display unit . In addition the storage system manager uploads the battery using information to the battery management server periodically. In the case where the application is a mobile application a user at an outdoor site transmits information to the battery management server or the storage system manager through an external network so as to perform the monitoring control corresponding to the aforementioned control.

It should be understood that various changes and modifications to the presently preferred embodiments described herein will be apparent to those skilled in the art. Such changes and modifications can be made without departing from the spirit and scope of the present subject matter and without diminishing its intended advantages. It is therefore intended that such changes and modifications be covered by the appended claims.

