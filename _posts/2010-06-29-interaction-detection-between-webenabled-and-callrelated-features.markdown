---

title: Interaction detection between web-enabled and call-related features
abstract: A method is provided for detecting interactions between call-related and web-enabled features. In some embodiments, communication application components are configured to transmit an indication to a feature interaction detector every time a feature is invoked by the user. When the interaction detector receives an indication that a feature is being invoked, it compares the invoked feature against features that have previously been invoked (or executed) and determines whether the invoked feature interacts with any of the features that have been previously executed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09049290&OS=09049290&RS=09049290
owner: Avaya Inc.
number: 09049290
owner_city: Basking Ridge
owner_country: US
publication_date: 20100629
---
The present application claims priority to provisional application 61 221 211 filed on Jun. 29 2009 entitled Feature Interactions Between Internet Services and Telecommunication Services which is herein incorporated by reference.

The underlying concepts but not necessarily the language of the following cases are incorporated by reference 

If there are any contradictions or inconsistencies in language between this application and one or more of the cases that have been incorporated by reference that might affect the interpretation of the claims in this case the claims in this case should be interpreted to be consistent with the language in this case.

The present invention relates to telecommunications in general and more particularly to feature interaction detection.

Over the years a wide variety of communications features also referred to as services have been developed such as call forwarding three way calling music on hold and so forth. When two or more features are applied to a telephone call however it is possible that an interaction between the features might cause unexpected or unwanted behavior such as permitting policies to be circumvented or causing the call to fail. For example suppose a call is set up via a meet me conferencing feature and then a music on hold feature is activated during the call. If one of the call participants goes on hold then all of the other parties on the call will also hear the music.

Communication features can be classified as call related and web enabled. Call related features are provided by telephone network nodes such as PBX switches service provider switches service provider feature servers and others. Examples of such features include call forwarding three way calling voice mail delivery etc. Web enabled features on the other hand are provided by servers that are not part of the telephone network and are oftentimes delivered over the Internet. Examples of web enabled features are delivery of voicemail messages over the email general email access and Facebook access.

Web services are one type of web enabled features. Web services are typically application programming interfaces APIs which are executed on remote system hosting the requested services. Web services are software components that are described via WSDL and are capable of being accessed via standard web based protocols such as SOAP and HTTP.

Previous work in feature interaction detection has focused on call related features. For instance the method of feature interaction detection described in provisional application 61 145 700 uses Session Initiation Protocol SIP messages to detect feature interactions. The SIP messages are used to carry indications that features are invoked. This approach however is not adaptable to web enabled features because web enabled features are not guaranteed to be provided via signaling paths such as those used to carry Session Initiation Protocol SIP messages. Moreover the web enabled features may be provided by application widgets that themselves lack Session Initiation Protocol SIP capability and instead rely on other types of communications to request and receive web enabled features. Therefore the need exists for a method for detecting interactions between call related and web enabled communication features.

The present invention addresses this need by providing a method for detecting interactions between call related and web enabled features. In some embodiments a communication application component is configured to transmit an indication to a feature interaction detector when a feature provided by the component is invoked. When the feature interaction detector receives an indication it determines whether the invoked feature interacts with other features that have been executed or invoked. In some embodiments the determination is performed in accordance with pre defined feature definitions and feature interaction rules.

It is to be understood that the above embodiments and their instances are provided to better illustrate different aspects of the present invention. They are in no way exhaustive of the full scope of the invention. The following disclosure teaches examples of some embodiments of the present invention in detail.

The terms appearing below are defined for use in this specification including the appended claims as follows 

Terminal is a cellular telephone. Terminal is connected to the communication network of a telephone service provider. The communication network of the telephone service provider enables terminal to participate in real time communication sessions such as telephone calls video calls etc. In the illustrative embodiment the communication network of the telephone service provider is a SIP network. The transport layer network for the SIP network is a packet switched network e.g. the Internet LAN WAN etc. . It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which the communication network uses another type of signaling e.g. GSM signaling CDMA signaling etc. and operates in conjunction with another type of transport layer network e.g. a cellular network the public switched telephone network etc. .

In the illustrative embodiment terminal is engaged in a communication session with terminal . The communication session is a Session Initiation Protocol SIP telephone call. The telephone call is carried over a signaling path and media path. The signaling path is used for the exchange of communication protocol signaling. And the media path is used for the exchange of voice. It will be clear to those skilled in the art after reading this disclosure in which another communication protocol is used e.g. Skype H.323 SS7 etc. .

Server is a node in the communication network of the telephone service provider of terminal . In the illustrative embodiment of the present invention server operates as a SIP proxy and is used in establishing the communication session between terminal and terminal . In addition server is capable of providing one or more call related services such as call blocking. Server and terminal communicate via a signaling path.

It will be clear to those skilled in the art after reading this disclosure that alternative embodiments of the present invention can be devised in which server is a node in another type of node e.g. a post office switch a PBX switch . Furthermore it will be clear to those skilled in the art after reading this disclosure that alternative embodiments of the present invention in which server is a node in another type of network e.g. SIP network VoIP network GSM network CDMA network Public Switched Telephone Network etc. . And still furthermore it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which server is a node dedicated to executing feature interaction detector FID . See e.g. etc. 

Server provides access to one or more web enabled features. In particular server is a server that executes an information retrieval application. The information retrieval application is run as a web service and it is described in the discussion with respect to .

Terminal communicates with server via a web service path. The web service path is a communication path that is at least partially disjoint from the signaling path. That is at least one leg of the web service pat is not used for the sending and transmission of communication protocol signaling.

In some embodiments the web service path is used for the transmission of web service messages. The web service messages are encapsulated inside HTTP messages and use SOAP to perform remote procedure calls that are necessary for the invocation of web enabled features.

In alternative embodiments the communication path and the web service path are established by terminal via separate interfaces. The web service path is established via a Wi Fi interface whereas the signaling part is established via telephony interface e.g. GSM interface etc. . Terminal is connected to the Internet via an access point such as a wireless LAN router etc. At the same time terminal uses the telephony interface to connect to a telephony network e.g. GSM network etc. via a cellular network base station.

Network is a communications network that transports signals between server server and terminal . In accordance with the illustrative embodiment of the present invention network is the Internet but it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which network is another type of communication network e.g. a local area network the Public Switched Telephone Network a cellular network wide area network etc. .

Network comprises a telecommunication domain and web service domain. In the illustrative embodiment the telecommunication domain is an administrative domain comprising server s that are managed by a telephone service provider. The web service domain is an administrative domain that is not managed by the telephone service provider. Server is part of the telecommunication domain while server is part of the web service domain.

In some embodiments the telecommunication domain is a private network or network with restricted access such as the telephone service provider s network and the web service domain another network e.g. the Internet etc. . In these embodiments the telecommunications domain and the web service domain are connected via one or more gateways and have distinct address spaces.

Terminal is a cellular telephone. Those skilled in the art will recognize after reading this disclosure how to make and use alternative embodiments of the present invention in which one of terminals and is another communication device such as for example and without limitation a smart phone desk set telephone portable digital assistant PDA media streaming server desktop computer etc. In the illustrative embodiment terminals and use the Session Initiation Protocol SIP . But it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which any signaling protocol is used e.g. ss7 H.323 etc. .

Communication application is browser based software for the conduct of communication sessions e.g. telephone calls video calls teleconferences etc. . In accordance with the illustrative embodiment communication application uses the Session Initiation Protocol SIP . It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which any other communication protocol is used e.g. H.323 Skype etc. .

Although in the illustrative embodiment communication application is a browser based application it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which communication application is any type of communication application known in the art e.g. non browser based etc. . In the illustrative embodiment communication application comprises a plurality of widgets. It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiment of the present in which communication application comprises other type s of components. Furthermore it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiment of the present in which communication application is monolithic. That is all of its services or features of the application are programmed together as a monolith body of code.

As noted communication application comprises a plurality of widgets. A widget is a component that can be added to a web page e.g. HTML based document etc. by an end user without requiring additional programming of the component. Widgets can provide both web enabled and call related features to the user. Widgets have the benefit of being reusable. In accordance with the illustrative embodiment the widgets are capable of generating one or more event notifications or indications when their services are invoked. The event notifications are directed to feature interaction detector FID See e.g. etc. and used to detect feature interactions. Although in the illustrative embodiment widgets are used to provide the features of communication application it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which other types of components are used e.g. non web page based components etc. .

In some embodiments the widgets are independently addressable by feature interaction detector FID . Each widget has a unique identifier which permits feature interaction detector FID to identify it and transmit information to it. Furthermore in some embodiments the independent addressing capability permits feature interaction detector FID to poll widgets directly for the occurrence of feature events such as feature invocation feature activation etc.

The widgets are used to provide access to both call related and web enabled features. Specifically some of the widgets provide call related features while others provide web enabled features. The features provided by different widgets interact. The interactions are detected by Feature Interaction Detector FID . See e.g. etc. In accordance with the illustrative embodiment communication application comprises six widgets telephony widget contact list widget call screening widget information retrieval widget call forwarding widget and personal assistant widget. The user interfaces for these widgets are depicted in as telephony widget contact list screening list interface call forwarding information retrieval tool call forwarding tool personal assistant and message widget .

Telephony widget provides access to a telephony feature. The telephony feature provides basic telephone call functionality. The telephony feature is a call related feature.

Contact list interface is the interface to a contact list feature. The contact list feature allows users of communication application to browse a list of contacts. It will be clear to those skilled in the art how to implement the contact list feature.

Screening list interface is a user interface that provides access to an outgoing call screening feature. This feature enables users to put one or more users i.e. telephone numbers URIs etc. on a do not call list. Once a telephone number is put on this list the outgoing call screening feature will prevent terminal from initiating and or establishing a communication session with that telephone number. The outgoing call screening feature is implemented by server . Server stores the do not call list and blocks communication attempts to numbers that are present in the list. The outgoing call screening feature is a call related feature.

Information retrieval tool provides access to an information retrieval feature. The information retrieval feature is a web enabled feature. Furthermore the information retrieval feature is a composite feature. It comprises a search feature and a call feature.

The call feature is used to start communications sessions with telephone numbers that are retrieved by the search feature. The call feature is implemented by software executing on terminal . The call feature is a call related feature.

The search feature is a web service. It is implemented as a software application that executes on server and communicates with information retrieval tool via a web service interface. The search feature is a web enabled feature.

It should be noted that the information retrieval feature is considered to be a web enabled feature because it is a composite feature that comprises at least one web enabled feature.

The information retrieval feature enables users to obtain the contact information of other users. In using the information retrieval feature the user types in the name of a person e.g. John Peterson etc. in text field and then presses search button . When button is pressed the search feature of information retrieval tool transmits a search query to the search feature executing on server . The search feature consults a database and returns the contact information of the person specified in the search query.

Furthermore information retrieval feature provides a user with a call button which can be used to establish a communication session with the user whose contact information is retrieved. When button is pressed the call feature of the information retrieval feature establishes a communication session with the telephone number retrieved by the search feature.

In some embodiments information retrieval tool uses a Wi Fi connection and a Wi Fi interface of terminal to contact server and uses a telephony connection and a GSM interface of terminal to establish the call. In these embodiments the communication network of the telephone service provider of terminal is uninvolved in the provision of the search feature component of the information retrieval feature.

Call forwarding tool enables the automatic forwarding of telephone calls that are incoming to terminal when the call recipient is busy or not answering. When call forwarding tool is enabled all incoming calls are automatically forwarded to a specified number e.g. 123 456 7890 . The call forwarding always feature is a call related feature.

Personal assistant is a front end to a virtual assistant feature. The virtual assistant is a composite feature. It is composed of both call related and web enabled features. It comprises a call related feature to answer incoming calls and communicate information about scheduled appointments. It also comprises a web enabled feature that is charged with the tasks of consulting calendars and determining a preferred time to schedule the appointments.

In operation the virtual assistant answers incoming telephone calls when a call recipient is busy or not answering. Moreover the virtual assistant consults calendars and appointment books and schedules appointments for the calling party to call back. The virtual assistant communicates the scheduled appointment by using text to speech translation. Generated speech is transmitted to the calling party via telephone connection that is established through the SIP network of server .

Message widget is a widget for displaying message s e.g. text messages graphic messages audio messages etc. from feature interaction detector FID . See e.g. etc. .

The features of communication application are capable of interacting with one another. For instance the outgoing call screening and the information retrieval feature can interact sometimes. As depicted in the telephone number of a person John Peterson is searched for and retrieved by information retrieval tool . Call Button can be used to start a telephone call with the person i.e. John Peterson .

At the same time however the telephone number of the person i.e. John Peterson is listed in outgoing screening list . This causes the call screening feature of communication application to block all outgoing calls that are made to the number.

Stated succinctly a conflict exists in the operation of the call screening and information retrieval features. If the user clicks on button one of two things will happen. Either a telephone call with number 1 123 456 7890 will be established or the telephone call setup attempt will fail because it is blocked by the outgoing call screening feature. In either scenario one of the features is not going to operate as expected by the user.

Notably if the interaction or conflict is caught ahead of time it can be mitigated. For instance a message can be transmitted to communication application warning the user that call button may not work as expected because of conflicts with the call blocking feature. In the illustrative embodiment such a message is displayed by message widget .

Another example of feature interaction is the interaction between call forwarding tool and personal assistant . The former forwards calls automatically when a recipient is not available while the latter answers these calls on behalf of the recipient to schedule a call back appointment. Only one of the two features can execute however. An incoming call can either be answered by the virtual assistant or forwarded to a third party number but not both. If this conflict is caught ahead of time it can be mitigated by allowing only the call forwarding tool to execute while blocking the execution of the personal assistant.

The illustrative embodiment of the present invention describes interactions between features that are invoked by the same communication terminal. It will be clear to those skilled in the art however that features that are invoked by different communication terminals can also interact with one another. An example of one such interaction is provided in the Background section of this disclosure. The Background section describes a conflict between a meet me conferencing feature and music on hold feature. The conference feature is invoked by all terminals that participate in the conference whereas the music on hold feature is invoked by one terminal only. Yet the invocation of the music on hold feature by one terminal affects all other terminals since they also hear the music.

Coordinator module is logic for the detection and resolution of feature interactions. In the illustrative embodiment coordinator module is implemented in software. In alternative embodiments however coordinator module is implemented in hardware. The operation of coordinator module is further described in the discussion with respect to and .

Record is a record of one or more feature definitions. Each definition comprises at least one of a precondition post condition and a triggering event. A precondition is a predicate that must always be true in order for a feature to be executed. A post condition is a condition or predicate that must always be true after the execution of a feature. A triggering event is an occurrence that causes the execution of a feature.

In accordance with the illustrative embodiment feature definitions comprises the following feature definitions 

Thus the notation for the post condition S C terminated that is required for the information retrieval feature means that a user must not be prevented from calling the party whose information is retrieved. That is the called user must not be on a do not call list.

The notation for the post condition S C terminated that is required for the originating call screening feature means that the state of a call to a party must be terminated. In other words a user is precluded from starting communication sessions with parties on a do not call list. 

The notation of the triggering event E incoming call which is a triggering event for both the call forwarding and personal assistant features means that the features are triggered by the receipt of an incoming call.

Record is a record of one or more interaction definitions. The interaction definitions specify conditions that can be used by coordinator module to detect feature interactions. For the purposes of this disclosure the term interaction definition is defined as an association between i at least one of a precondition postcondition and triggering event for a first feature and ii at least one of a precondition postcondition and triggering event for a second feature.

In the illustrative embodiment three types of interactions are defined concurrency conflicts disabling conflicts and result conflicts.

Concurrency conflicts exist when two features have inconsistent pre conditions and thus cannot be executed at the same time. In the illustrative embodiment concurrency conflicts are defined as follows pre pre trigger trigger 

According to this definition a concurrency conflict exists when 1 the precondition of one feature is the negation of a precondition of a second feature and 2 both the first feature and the second feature have the same triggering event.

Disabling conflicts occur when the execution of a first feature leaves system in a state in which a second feature cannot be executed. An example of a disabling conflict is an interaction between the call screening feature and the information retrieval feature. As discussed with respect to when a user is put on the do not call list of the call screening feature that user cannot be called by using call button of the information retrieval feature. In other words once the call screening feature is executed or enabled the system is put in a state in which the user cannot be called any more.

According to this definition a disabling conflict exists when 1 a post condition for a first feature is the negation of a precondition for a second feature and 2 the first feature and the second feature have non equivalent triggering events.

Results conflicts occur when two actions would leave the system in an inconsistent impossible state and thus cannot be executed simultaneously. An example of a results conflict is the conflict between the call forwarding and personal assistant features. As discussed the call forwarding feature automatically forwards a call when the call recipient is busy. The personal assistant on the other hand answers incoming calls when the call recipient is busy. Since a call cannot be both automatically forwarded and answered at the same time the execution of the two features would leave the system i.e. system in an impossible state.

In the illustrative embodiment results conflicts are defined as follows 1 post 1 2 post 2 trigger 1 trigger 2 1 2 

According to this definition a results conflict exists when 1 a post condition for a first feature is the negation of a post condition for a second feature and 2 the first feature and the second feature have the same triggering event.

The definitions of the feature interactions in the illustrative embodiment depend on predicate relationships. For instance in order for a concurrency conflict to exist a precondition for a first feature must be the negation of a precondition of another feature. In accordance with the illustrative embodiment a precondition is said to be the negation of another precondition when the two preconditions are identified as incompatible by an administrator. In the illustrative embodiment the identification is performed by inputting a table into feature interaction detector FID which identifies the two conditions as incompatible.

Similarly a postcondition is said to be the negation of another postcondition when the two postconditions are identified as incompatible by an administrator. In the illustrative embodiment a table entry is input into feature interaction detector FID which identifies the two postconditions as incompatible.

Additionally the definitions of feature conflicts depend on triggering event associations. For instance a first feature and a second feature can have a results conflict only when a triggering condition for the first feature is equivalent to a triggering condition for the second feature. In accordance with the illustrative embodiment the two triggering events are equivalent only when they are the same. In some embodiments however triggering events are considered equivalent when they are defined as such. That is a table entry is input into feature interaction detector FID which identifies two triggering events as equivalent.

Record is an information record that identifies one or more features that have been invoked. It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which record identifies one or more features that have been executed.

In the illustrative embodiment record identifies features that have been invoked by both terminal and terminal . In alternative embodiments however record identifies features that have been invoked by terminal only.

In accordance with the illustrative embodiment of the present invention feature interaction detector FID implements the predicate based model described in provisional application 61 221 211. It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention can be devised in which other models are used to detect feature interaction. Examples of such models include the model disclosed in U.S. application Ser. No. 12 392 429 expert systems etc.

Network is an enterprise network. Terminal is part of network . Network possesses an address space that is distinct from the address space of network . Network is separated from network by session Border Controller SBC .

In a first illustrative embodiment feature interaction detector FID is executed on terminal . In some embodiment feature interaction detector FID or parts of it e.g. coordinator module etc. is implemented as a browser plug in. In other embodiments feature interaction detector FID is implemented as a free standing application.

An advantage of the first illustrative embodiment is that it is convenient for feature interaction detector FID to determine what features are invoked by terminal . A disadvantage however is that feature interaction detector FID might not be able to obtain information about the execution of features on terminal . The difficulty comes from the possibility that session border controller SBC as well as firewalls that separate network from network may block information that is pertinent to the operation of feature interaction detector FID e.g. indications that features are invoked on terminal indication of the existence of conflicts etc. .

In a second illustrative embodiment of the present invention feature interaction detector FID is executing on session border controller SBC . Session border controller SBC is a device used in Voice over Internet Protocol VoIP applications to exert control over signaling used in the establishing of communication sessions. A primary function of a session border controller SBC is to hide domain routing and endpoint identities from external endpoints and signaling elements. In the illustrative embodiment session border controller SBC connects network to network . All communication protocol signaling transmitted by terminal to devices in network passes through session border controller SBC .

Executing feature interaction detector FID on session border controller SBC enables feature interaction detector FID to obtain information inside P Con Type headers of messages that are transmitted by terminal before this information is deleted by the other components of session border controller SBC . As is discussed in application 61 145 700 the information in P Con Type can be used in identifying call related features that are invoked by terminal . Furthermore executing feature interaction detector FID on session border controller SBC enables feature interaction detector FID to receive information in P Con Type headers of messages transmitted by terminal before this information is deleted.

In a third illustrative embodiment of the present invention feature interaction detector FID executes on server . In some embodiments feature interaction detector FID operates as a back to back user agent B2BUA which receives signaling messages from terminal and or terminal . In these embodiments feature interaction detector FID receives one or more SIP messages that identify one or more call related features that are or have been activated. The messages are transmitted as part of the communications session of between terminal and terminal . That is the messages carry an identifier that has been assigned by the SIP network i.e. network of server to the communication session between terminal and terminal .

Additionally feature interaction detector FID receives indications that web enabled features are or have been invoked by terminals and or . The indications for the web enabled features are received however in messages that are not part of the communication session between terminals and . Examples of messages that can be used to deliver indications for the web enabled features include HTTP messages SOAP messages etc.

In a fifth illustrative embodiment of the present invention feature interaction detector FID is executed on server .

In a sixth illustrative embodiment feature interaction detector FID is executing on a communications node e.g. switch PBX etc. . In this embodiment feature interaction detector FID detects at least one of the invocation execution and activation of call related features by monitoring treatments which are transmitted on the line connecting terminal and . As is well known treatments are announcement tones received that are triggered by the network to handle certain conditions during a call e.g. when a call is screened when a call is blocked etc. . Potentially there might by multiple treatments involved in a particular call.

At task coordinator module identifies a widget that is part of communication application . In embodiments where coordinator module is implemented as a browser plug in coordinator module interacts with the web browser running communication application to determine what widgets are constituted part of the application. In alternative embodiments however coordinator module exchanges communications with communication application in order to make this determination.

At task coordinator module registers with the identified widget. When coordinator module has registered with the widget the widget starts transmitting event notifications to coordinator module . The event notifications serve to notify coordinator module that the state of a feature has changed. Examples of event notifications include indications that a feature provided by the widget is invoked indications that a feature provided by the widget has been executed etc.

In some of the embodiments where feature interaction detector FID is executing on server at least one of tasks and are executed in response to the receipt of a registration attempt by terminal to register on the Session Initiation Protocol SIP network of server . In some of the embodiments where feature interaction detector FID is executing on terminal at least one of tasks and is executed in response to the starting of communication application .

At task feature definition s and interaction definition s are stored in records and . In the illustrative embodiments of the present invention records and are populated manually by an administrator. In some embodiments however the feature definition s and interaction definition s are obtained from a remote server upon request by feature interaction detector FID . For instance in some embodiments coordinator module submits a query to a remote server requesting the definition of one or more features that are identified at task . In response the remote server transmits the definition to coordinator module which proceeds to store it in record .

At task coordinator module receives an indication that an event concerning a first feature has occurred. In the illustrative embodiment the event is a change in the state of the first feature. Examples of events include the invocation of a feature execution of a feature enabling of a feature and others.

In accordance with the illustrative embodiment at task coordinator module receives an indication that the first feature has been executed. It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which coordinator module receives another indication such as for example and without limitation an indication that the first feature has been invoked etc.

Furthermore in the illustrative embodiment the first feature is executed on terminal . In alternative embodiments however the feature is executed on terminal . Furthermore in the illustrative embodiment the feature is call related. In other embodiments however the feature is web enabled.

At task coordinator module receives an indication that an event concerning a second feature has occurred. In the illustrative embodiment the event is a change in the state of the second feature. Examples of events include the invocation of a feature execution of a feature execution of a feature and others.

In the illustrative embodiment coordinator module receives an indication that the second feature has been invoked. It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which coordinator module receives another indication such as for example and without limitation an indication that the second feature has been executed etc.

The indication concerning the second feature is provided by the widget with which coordinator module is registered at task . As discussed the widget is configured to transmit an event notification to event coordinator every time the feature which it provides is executed. Furthermore in the illustrative embodiment the feature is web enabled. In other embodiments however the feature is call related.

In embodiments where coordinator module receives an indication that the second feature has been executed feature interaction detector FID does little to prevent the interaction or conflict from taking place. In these embodiments however feature interaction detector FID transmits a message to message widget . The message warns the user of any unexpected behavior of communication application that might be occurring as a result of the conflict.

At task coordinator module determines whether the second feature and the first feature interact. The manner in which coordinator module determines whether the features interact is further described in the discussion with respect to . If the two features do not interact coordinator module proceeds to execute task . If the two features interact coordinator module proceeds to execute task .

Furthermore although in the illustrative embodiment the present invention uses the predicate based rules described in the discussion with respect to it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which other types of rules are used. In particular those skilled in the art will recognize that in alternative embodiments of the present invention feature interaction detector FID operates in accordance with the rules definitions and principles described in application 61 145 700. Furthermore it will be clear to those skilled in the art how to make and use alternative embodiments of the present invention which involve other well known in the art methods for performing feature interaction detection such as using a rule matching engine of an expert system a logic program a constraint satisfaction system a na ve brute force search etc.

At task coordinator module activates the second feature. In accordance with the illustrative embodiment coordinator module transmits a message to communication application indicating that the widget can proceed with the execution of the invoked feature. It will be clear to those skilled in the art however that alternative embodiments of the present invention can be devised in which coordinator module takes no action when the two features interact.

In the illustrative embodiment the widget proceeds to execute the feature after receiving an indication that the first feature and the second feature do not interact. For instance if the second feature is the information retrieval feature described in the discussion of information retrieval tool would contact server with a search query only after receiving permission from coordinator module . In other words in the illustrative embodiment of the present invention the widgets or components of communication application are configured to proceed with the execution of a feature only after receiving permission from feature interaction detector FID . It will be clear to those skilled in the art after reading this disclosure that alternative embodiments of the present invention can be devised in which the widgets are configured to execute unless they receive a message denying permission to execute the feature.

Furthermore it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which feature interaction detector FID does not directly interfere with execution of the second application. In some of these embodiments the function of feature interaction detector FID is limited to transmitting notifications of feature interaction notifications to message widget .

At task coordinator module resolves the interaction between the two features. In accordance with the illustrative embodiment of the present invention coordinator module transmits an indication to communication application instructing it to not execute the second feature. It should be noted that the present invention is not limited to any particular way of resolving feature interactions. Those skilled in the art will readily recognize that a number of ways exist for resolving feature interactions or conflicts once they are executed. For example and without limitation such resolutions include do not execute the second feature transmit a message warning the user of the conflict etc.

Tasks through are described for illustrative purposes. It will be clear to those skilled in the art after reading this disclosure how to perform the tasks associated with in a different order than represented or to perform one or more of the tasks concurrently. Furthermore it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention that omit one or more of the tasks.

At task coordinator module determines whether a precondition for the first feature is the negation of a precondition for the second feature. In particular coordinator module identifies pairs of preconditions by consulting record wherein one member of each pair is a precondition for the first feature while the other member is a precondition for the second feature. After a pair is identified coordinator module determines whether the preconditions are each other s negation by consulting a table or another type of record which identifies precondition negations.

At task coordinator module determines whether a postcondition for the first feature is the negation of a postcondition for the second feature. In particular coordinator module identifies pairs of postconditions by consulting record wherein one member of each pair is a postcondition for the first feature while the other member is a postcondition for the second feature. After a pair is identified coordinator module determines whether the postconditions are each other s negation be consulting a table or another type of record which identifies postcondition negations.

At task coordinator module determines whether a triggering event for the first feature is equivalent to a triggering event for the second feature. In particular coordinator module identifies pairs of triggering events by consulting record wherein one triggering event member of each pair is a triggering event for the first feature while the other pair member is a triggering event for the second feature. After each pair is identified coordinator module consults a table which identifies pairs of triggering events as equivalent.

At task coordinator module compares the information gathered at tasks through against the interaction definitions stored in record and determines whether any of the interaction definitions is met. If yes coordinator module determines that the first feature and the second feature interact.

Tasks through are described for illustrative purposes. It will be clear to those skilled in the art after reading this disclosure how to perform the tasks associated with in a different order than represented or to perform one or more of the tasks concurrently. Furthermore it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention that omit one or more of the tasks.

At task feature interaction detector FID registers with a widget of communication application . In the illustrative embodiment the registration is performed by feature interaction detector FID contacting communication application and submitting information which can be used by the widgets in transmitting event notifications to feature interaction detector FID e.g. IP address etc. . Once feature interaction detector FID has been registered with the widget the widget begins transmitting event notifications to feature interaction detector FID . Exemplary events include feature activation feature execution feature invocation etc

In alternative embodiments however the widgets contact feature interaction detector FID directly once they are loaded by communication application . In these embodiments feature interaction detector FID interacts with each widget directly.

At task feature interaction detector FID starts monitoring outgoing communication protocol signaling that is transmitted by terminal . In accordance with the illustrative embodiment the monitored signaling is outgoing SIP messages. In particular feature interaction detector FID monitors whether any of the transmitted messages contain an indication that an event has occurred. Exemplary events include feature activation feature execution feature invocation etc. The indication can be contained in the P Con Type headers of the SIP messages or elsewhere.

At task feature interaction detector FID starts monitoring the state of the widget with which coordinator module has registered at task . In the illustrative embodiment monitoring the state of the widget entails at least one of i determining whether a feature provided by the widget is invoked ii determining whether a feature provided by the widget is executed and iii identifying any other change in the status of the feature provided by the widget.

In accordance with the illustrative embodiment feature interaction detector FID starts listening for event notification by the widget that is registered at task . The event notifications indicate changes in the state of the widget. Exemplary event notifications include an indication that feature provided by a widget is invoked indication that a feature provided by a widget is executed etc.

In the illustrative embodiment feature interaction detector FID listens passively. In alternative embodiments however feature interaction detector FID periodically polls the widget to determine whether change s in the state of the widget have occurred. The polling of the widget utilizes the widget s independent addressing functionality.

Executing task enables feature interaction detector FID to catch changes in the states of features that do not involve the SIP network over which the signaling monitored at task is transmitted. As discussed widgets are independently addressable. They can utilize the capabilities of the web browser executing communication application and request services from servers that are not part of the communication protocol network e.g. the SIP network of the telephone network provider to which server belongs etc. . When services are requested independently of the communications network there is no way for the SIP server to detect that by monitoring the SIP signaling. The execution of task thus provides the SIP server to stay appraised of changes in the state s of feature even when the request execution of these features does not involve the communication network to which the SIP server belongs in any way.

At task feature interaction detector FID detects that a first feature has been invoked. In accordance with the illustrative embodiment the detection is completed by monitoring the outgoing communication protocol signaling that is started at task .

In accordance with the illustrative embodiment feature interaction detector FID detects feature invocation. It will be clear to those skilled in the art however that alternative embodiments of the present invention can be devised in which feature interaction detector FID in which feature interaction detector FID detects that a feature has been executed.

At task feature interaction detector FID detects that a second feature has been invoked. In accordance with the illustrative embodiment the detection is completed by the listening and or polling started at task .

In accordance with the illustrative embodiment feature interaction detector FID detects feature invocation. It will be clear to those skilled in the art however that alternative embodiments of the present invention can be devised in which feature interaction detector FID in which feature interaction detector FID detects that a feature has not just been just invoked but rather that the feature has been executed.

At task feature interaction detector FID determines whether the second feature and the first feature interact. If the two features do not interact feature interaction detector FID proceeds to execute task . If the two features interact feature interaction detector FID proceeds to execute task . Task is identical to task .

At task feature interaction detector FID resolves the interaction between the two features. Task is identical to task .

It is to be understood that although the illustrative embodiment of is discussed in the context of a SIP network and SIP node executing feature interaction detector FID the present invention is not limited to this type communication protocol. It will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention in which another type of network and another type of communication protocol are used e.g. GSM network H.323 Skype etc. . More specifically it will be clear to those skilled in the art after reading this disclosure that alternative embodiments of the present invention can be devised in which the node executing feature interaction detector FID is another type of network node such as for example and without limitation PBX switch GSM base station Skype server etc.

Tasks through are described for illustrative purposes. It will be clear to those skilled in the art after reading this disclosure how to perform the tasks associated with in a different order than represented or to perform one or more of the tasks concurrently. Furthermore it will be clear to those skilled in the art after reading this disclosure how to make and use alternative embodiments of the present invention that omit one or more of the tasks.

It is to be understood that the disclosure teaches just one example of the illustrative embodiment and that many variations of the invention can easily be devised by those skilled in the art after reading this disclosure and that the scope of the present invention is to be determined by the following claims.

