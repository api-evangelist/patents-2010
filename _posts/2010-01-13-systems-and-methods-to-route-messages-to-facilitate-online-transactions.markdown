---

title: Systems and methods to route messages to facilitate online transactions
abstract: Systems and methods are provided to facilitate online transactions via mobile communications. In one aspect, a system includes a data storage facility to store an account and a phone number associated with the account and an interchange coupled with the data storage facility. The interchange includes a common format processor and a plurality of converters to interface with a plurality of different controllers of mobile communications. The converters are configured to communicate with the controllers in different formats and to communicate with the common format processor in a common format. The common format processor is to select a first controller based at least in part on reducing cost, and to instruct the first controller of the controllers, via a first converter of the converters, to transmit a first message to a mobile device at the phone number to facilitate a transaction related to funds associated with the phone number.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08566188&OS=08566188&RS=08566188
owner: Boku, Inc.
number: 08566188
owner_city: San Francisco
owner_country: US
publication_date: 20100113
---
At least some embodiments of the disclosure relate to mobile communications in general and more particularly but not limited to mobile communications to facilitate online transactions.

Short Message Service SMS is a communications protocol that allows the interchange of short text messages between mobile telephone devices. SMS messages are typically sent via a Short Message Service Center SMSC of a mobile carrier which uses a store and forward mechanism to deliver the messages. When a mobile telephone is not reachable immediately for the delivery of the message the SMSC stores the message for later retry.

SMS messages can be sent via gateways. Some gateways function as aggregators. An aggregator typically does not have the capacity the deliver the messages directly to the mobile phones. An aggregator typically interfaces with and relies upon the SMSC of a mobile carrier to deliver SMS messages.

Some gateways function as providers that are capable of sending text messages to mobile devices directly without going through the SMSC of other mobile operators.

Text messaging between mobile telephones can also be performed using other protocols such as SkyMail and Short Mail in Japan.

Some mobile carriers provide email gateway services to allow text messages to be sent to mobile phones via email. For example a non subscriber of the mobile carrier may send a message to an email address associated with a mobile phone of a subscriber of the mobile carrier to have the message delivered to the mobile phone via text messaging.

Emails can also be sent to mobile telephone devices via standard mail protocols such as Simple Mail Transfer Protocol SMTP over Internet Protocol Suite commonly TCP IP named from two of the protocols the Transmission Control Protocol TCP and the Internet Protocol IP .

Short messages may be used to provide premium services to mobile phones such as news alerts ring tones etc. The premium content providers may send the messages to the SMSC of the mobile operator using a TCP IP protocol such as Short Message Peer to peer Protocol SMPP or Hypertext Transfer Protocol for delivery to a mobile phone and the mobile phone is billed by the mobile operator for the cost of receiving the premium content.

Premium services may also be delivered via text messages initiated from the mobile phone. For example a televoting service provider may obtain a short code to receive text messages from mobile phones and when the user sends a text message to the short code the mobile carrier routes the message to the televoting service provider and charges the user a fee a portion of which is collected for the televoting service provider.

Systems and methods are provided to facilitate online transactions via mobile communications. Some embodiments are summarized in this section.

In one aspect a system includes a data storage facility to store an account and a phone number associated with the account and an interchange coupled with the data storage facility. The interchange includes a common format processor and a plurality of converters to interface with a plurality of different controllers of mobile communications. The converters are configured to communicate with the controllers in different formats and the converters are configured to communicate with the common format processor in a common format to facilitate deposit transactions and payment transactions.

In one embodiment the common format processor is configured to select a first controller from the plurality of controllers based at least in part on reducing a cost associated with transmitting messages from the common format processor to a mobile device at the phone number and to instruct a first controller of the controllers via a first converter of the converters to transmit a first message to the mobile device at the phone number to facilitate an online transaction related to funds associated with the phone number.

In one embodiment the first message is to confirm a first user request to deposit a first amount of funds into the account associated with the phone number. Responsive to a reply to the first message the common format processor is to calculate a set of premium messages to charge the first amount and to instruct the first controller via the first converter to transmit the set of premium messages to the mobile device at the telephone number to bill the first amount. After a telecommunication carrier of the mobile device deducts a portion from the first amount as a fee the common format processor is configured to credit the account a second amount more than a portion of the first amount received from the telecommunication carrier.

In one embodiment a method includes receiving in a computer a request related to funds associated with a phone number identifying by the computer a plurality of controllers capable of transmitting a message to a mobile phone at the phone number determining by the computer costs associated with transmitting the message to the mobile phone via different paths through the controllers selecting by the computer a least cost path among the paths and transmitting by the computer the message to the mobile phone via the least cost path to confirm the request.

In another embodiment a method includes identifying by the computer a plurality of controllers capable of transmitting a message to a mobile phone at the phone number determining by the computer costs associated with transmitting the message to the mobile phone via first paths through the controllers selecting by the computer a least cost path among the first paths transmitting by the computer the message to the mobile phone via the least cost path receiving by the computer a reply to the message to confirm the request determining by the computer costs associated with transmitting a set of one or more premium messages to the mobile phone via second paths selecting by the computer at least one path from the second paths to minimize a cost to transmit the set of premium messages and transmitting by the computer the set of one or more premium messages to the mobile phone via the at least one path selected from the second paths.

The disclosure includes methods and apparatuses which perform these methods including data processing systems which perform these methods and computer readable media containing instructions which when executed on data processing systems cause the systems to perform these methods.

Other features will be apparent from the accompanying drawings and from the detailed description which follows.

The following description and drawings are illustrative and are not to be construed as limiting. Numerous specific details are described to provide a thorough understanding. However in certain instances well known or conventional details are not described in order to avoid obscuring the description. References to one or an embodiment in the present disclosure are not necessarily references to the same embodiment and such references mean at least one.

Reference in this specification to one embodiment or an embodiment means that a particular feature structure or characteristic described in connection with the embodiment is included in at least one embodiment of the disclosure. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment nor are separate or alternative embodiments mutually exclusive of other embodiments. Moreover various features are described which may be exhibited by some embodiments and not by others. Similarly various requirements are described which may be requirements for some embodiments but not other embodiments.

In one embodiment an interchange is used to interface with a plurality of different controllers of mobile communications such as SMS messages. The interchange can be used to receive deposit requests and payment requests in an online environment. The interchange is configured to communicate with the mobile phones through the different controllers to provide security and convenience for online transactions.

In a data storage facility stores user accounts and the corresponding phone numbers of the mobile phones . The interchange is coupled with the data storage facility to confirm operations in the accounts of the users via mobile communications with the mobile phones at the corresponding phone numbers .

In the interchange may communicate with different controllers of mobile communications via different networks e.g. and and or protocols. The interchange processes the requests in a common format and uses a set of converters for communications with the different controllers respectively.

For example the controllers may be different aggregators providers and or SMSCs of different mobile carriers. Based on the phone numbers the interchange interfaces with the corresponding controllers to communicate with the mobile phones via text messaging to confirm the operations related to the corresponding accounts .

In the user terminals may use a unified interface to send requests to the interchange . For example a web site of the interchange may be used to receive deposit requests from the web browsers running in the user terminals . The deposit requests may be received directly from the user terminal or via a third party which interfaces between the interchange and the user terminal . For example the third party may operate a web site to receive deposit requests from the user terminal and provide the deposit requests to the interchange via an application programming interface API e.g. an API provided using a web service . The user terminals are typically different from the mobile phones . In some embodiments users may use the mobile phone to access the web and submit the deposit request. Alternatively the users may use the mobile phone to submit the deposit requests via text messaging email instant messaging etc.

The use of the mobile phones in the confirmation of the accounts increases the security of the transaction since the mobile phones are typically secured in the possession of the users.

Further in one embodiment the interchange may use the phone bills of the mobile phones to collect funds for the accounts that are associated with the mobile phone for the convenience of the users e.g. those who do not have a credit card or a bank account .

In one embodiment once the user accounts are funded through the mobile phones the users may use the user terminals to access online servers to make purchases. The users can use the accounts to make the payment for the purchases using the user terminals without revealing their financial information to the operators of the servers .

In other embodiments the interchange may use other fund sources to deposit funds into the account . For example the data storage facility may further store information about other financial accounts of the user such as bank accounts credit card accounts PayPal accounts etc. not shown in . Such information about the financial accounts of the user can be associated with the phone number in the data storage facility . In response to a deposit request from the user terminal the interchange may identify the phone number to retrieve the information about at least one financial account of the user. Using the phone number the interchange may transmit a confirmation message to the corresponding mobile phone . If the user replies to the confirmation message from the mobile phone the interchange may charge the financial account of the user e.g. via automated clearing house ACH using the information about the financial account to deposit funds into the account of the user. Alternatively the user may provide the information about the financial account e.g. a bank account a credit card number a charge card number etc. from the mobile phone together with the user s reply to the confirmation message. Alternatively the user may provide the information about the financial account e.g. a bank account a credit card number a charge card number etc. from the user terminal together with the deposit request.

In one embodiment the funds stored in the account are in the unit of a currency e.g. U.S. dollar Euro British pound etc. In some embodiments the funds stored in the account may be in the equivalent unit of a currency such as points starts virtual currency money etc.

In one embodiment the mobile phones are used by the corresponding users to make payments and or manage funds such as for making purchases in various websites hosted on the servers of merchants and service providers and or for transferring funds to or from an account hosted on the data storage facility or other accounts such as telecommunication accounts of the mobile phones with telecommunication carriers phone bills of land line telephone services credit card accounts debit card accounts bank accounts etc. The mobile phones are used to confirm and or approve the transactions associated with account or other accounts . The interchange interfaces the mobile phones and the servers to confirm and or approve transactions and to operate on the account and or other accounts associated with the phone number .

For example the user terminal may provide the phone numbers to the servers to allow the servers to charge the accounts via the interchange . The interchange sends a message to the mobile phone via the phone number to confirm the payment. Once the payment is confirmed via the corresponding mobile phone the interchange pays the server using the funds from the corresponding the account and or other accounts associated with the phone number such as bank accounts credit card accounts debit card accounts mobile phone bills accounts land line phone bill accounts etc. .

In one embodiment the user terminal may not even provide the phone number to the server to process the payment. The server redirects a payment request to the interchange which then prompts the user terminal to provide the phone number to the web site of the interchange .

For example the server may redirect the payment request to the web site of the interchange with a reference indicating the purchase made via the user terminal . The interchange can use the reference to complete the payment with the server for the purchase after receiving the phone number directly from the user terminal or other information identifying the account to confirm the payment via the mobile phone .

In one embodiment when the interchange charges on the phone bill of the mobile phone to fund the account the mobile carrier of the mobile phone may deduct a portion from the billed amount from the funds provided to the interchange . Thus the interchange actually receives only a portion of the amount billed to the mobile phone . However the interchange may credit the full amount to the account associated with the mobile phone . The fees taken by the mobile carrier can be recovered through charging the user and or the merchant for the usage of the account .

For example the interchange may charge the account a fee for paying the server to complete a purchase and the interchange may charge the server a fee for transferring the funds to the server e.g. by deducting a portion from the amount paid by the user to the operator of the server . For example the interchange may charge a periodic fee e.g. a monthly fee to maintain the account . The interchange may charge a fee when the funds are initially deposited into the account via the mobile phone where the fee is smaller than the fee charged by the mobile carrier.

In one embodiment the overall fees charged by the interchange may be equal to or larger than the initial fees charged by the mobile carrier to deposit the funds into the account to avoid losing money. In some embodiment the operations of the interchange may be supported by advertisements and the interchange may charge less than what the mobile carrier charges to deposit the funds into the account .

For example the interchange may spread out the charges by the mobile carrier for depositing the funds into the account on a per transaction basis or a per process basis instead of a lump sum at the time the user deposits funds into his account .

For example the interchange may charge the user account a smaller fee than what the mobile carrier charges when the funds are initially deposited into the user account via the mobile carrier. For instance when a user deposits 10 to the account via the mobile carrier the mobile carrier may take 3 30 providing 7 to the interchange . The interchange may charge the user only 1 and thus credit the account with 9 alternatively the interchange may credit the account with the full 10 without deducting the amount that is charged by the mobile carrier at the time the funds are deposited.

However for the amount credited to the account the interchange is configured to pass to the merchants only 7 of the funds received from the mobile carrier for the purchases made by the user. The merchants may be the operators of the servers . The interchange may charge the user and or the merchant fees on a per transaction basis. For example the user may be charged an amount for a payment to the merchant and the merchant may be charged another amount for the payment. Thus the fees charged by the mobile carrier are actually deferred until the funds in the account are used and the cost for the fees charged by the mobile carrier can be shared by the user and the merchant.

In some embodiments the user may request a loan from the interchange for the account and the loan is repaid through billing the mobile phone . The interchange may charge interest for the loan.

In the interchange includes a common format processor which processes various payment options in a common format. In one embodiment the common format processor can handle the payments via mobile terminated text message mobile originated text message operator bill credit card stored value account and other online payment options. The common format processor determines the actual amount that is to be billed to the user based on the payment options e.g. mobile terminated premium SMS mobile originated premium SMS operator billing credit cards etc. and selects a converter to communicate with a corresponding controller .

Different converters are configured to communicate with corresponding controllers in different languages and protocols. The converters perform the translation between the common format used by the common format processor and the corresponding formats used by the controllers .

The use of the common format processor simplifies the structure of the interchange and reduces the development effort required for the interchange to interface with the increasing number of different controllers such as SMSC mobile providers aggregators gateways etc.

The common format processor includes a decision engine which decides how to generate a set of one or more messages to the mobile phone based on a set of rules regulations limits records and restrictions .

For example different countries have different regulations governing the mobile communications with the mobile phones . For example different mobile carriers have different rules regarding premium messages. For example past transaction records can be used to monitor the transactions to discover suspected fraudulent activities. For example parental limits and merchant restrictions can be imposed.

Base on results of the decision engine the mobile message generator generates one or more messages to communicate with the mobile phone about the transaction e.g. a deposit request or a payment request . The converter then interfaces with the corresponding controller to transmit the messages to the mobile phones .

The deposit request may be a request for a loan to fund the user account associated with the phone number and stored in the data storage facility or a request to fund the account via premium messages charged to the mobile phone. The loan may be repaid via subsequent premium messages charged to the mobile phone.

In the deposit request is confirmed via a round trip confirmation message from the interchange to the mobile phone such as a round trip SMS message. Alternatively the confirmation messages can be sent to the mobile phone associated with the phone number via emails instant messages etc. After the confirmation the interchange sends the premium messages to bill the mobile phone for the deposit or to make a loan to the account . In other embodiments the interchange may charge a credit card account or a bank account associated with the phone number to fund the account . In some embodiments the interchange may send an instruction with the confirmation message to the mobile phone to instruct the user to send mobile originated premium messages to the interchange to fund the account .

The account stored in the data storage facility can be used to pay purchases made via the server . For example after the user terminal transmits the purchase request to the server the server redirects the purchase request to the interchange or directly contacts the interchange for the payment e.g. after collecting account information such as the phone number from the user terminal .

To complete the payment the interchange contacts the mobile phone via text messaging or other types of messages such as instant messages emails etc. to confirm the payment. The interchange uses the funds in the account to make the payment once a confirmation is obtained from the mobile phone . For example the interchange may use its own bank account to pay the merchant operating the server and deduct an amount from the account . Thus the financial information of the user is not revealed to the merchant.

In the user interface further includes an option list which allows the user to select various ways to fund the account such as charging the mobile phone on its phone bill requesting a loan e.g. to be repaid via the phone bill charging credit cards or bank accounts associated with the account etc. In the example illustrated in the checkbox is selected to request a deposit via charging the mobile phone e.g. via premium messages via operator billing by mobile phone carrier .

In one premium message billing method the interchange sends mobile terminated premium SMS messages to the mobile phone to bill the user or requests the mobile phone to send mobile originated premium SMS messages to a short code representing the interchange .

In one operator billing method the interchange directly sends a message to the mobile carrier of the mobile phone to bill the amount on the phone bill of the mobile phone without having to send a premium message to the mobile phone .

In one embodiment after the deposit request is submitted via the user interface the interchange sends a text message to the mobile phone to request a confirmation.

In the user interface the user may enter the code e.g. 1 in the reply message and select the send button to confirm the deposit request or select the cancel button to ignore the message and thus block the request .

In one embodiment the code requested in the text message is a predetermined code and is provided in the text message . The presence of the code in the reply message is an indication of the user approving the request and the requirement for such a code in the reply eliminates false confirmations e.g. generated via accidental replies or automated replies .

In some embodiments the code requested in the text message may be a personal identification number PIN associated with the account . The text message does not include the code and the knowledge of the code is an indication of the identity of the user. Thus the use of such a code increases the security of the transaction.

In a further embodiment the code requested in the text message includes a code that is provided in response to the deposit request e.g. via the user interface not shown in . The code may be generated randomly at the time the request is received via the user interface or when the user interface is presented to the user. The code provided to the user interface can be requested in the reply received in the user interface to indicate that the user who is in possession of the mobile phone has actual knowledge about the deposit request submitted via the user interface .

In a further embodiment a secret code is provided in the confirmation message . The user may use the secret code in the user interface provided on the user terminal to confirm that the user has received the secret code provided to the mobile phone and approve the deposit request via the mobile phone without having to reply from the mobile phone . In one embodiment the secret code is a random number a random character string or a random string of words generated by the interchange in response to the deposit request. In some embodiment the secret code is an identifier that represents the transaction associated with the deposit request. The user may approve the confirmation message via providing the secret code back to the interchange via replying from the mobile phone where the user receives the secret code and or replying from the user terminal where the user initially submits the deposit request.

After the confirmation message is received with the correct code the interchange performs operations to fund the account according to user selected options.

In some embodiments the user may select the options via the replying text message sent via the user interface instead of the user interface used to make the request. In some embodiments the user may make the request via a mobile phone e.g. by sending a text message to a short code representing the interchange .

In a premium message billing method the interchange calculates the required premium messages to bill to the mobile phone . For example mobile terminated premium SMS messages may have a predetermined set of prices for premium messages. The interchange determines a combination of the premium messages that has a price closest to the amount specified by the user and sends this combination of premium messages to the mobile phone according to the rules regulations limits records restrictions etc.

Mobile originated premium SMS messages may also have a predetermined set of prices for premium messages. The interchange can calculate the set of messages required to make the deposit and transmit a text message to the mobile phone of the user to instruct the user to send the required number of premium messages to make the deposit.

In one embodiment after the user selects the payment option the server directs the request to the web server of the interchange with a set of parameters to indicate the amount the identity of the merchant a reference to the purchase etc. Thus the user does not have to provide any personal information to the server of the merchant to complete the payment process.

In one embodiment the server presents the payment option via an online shopping cart system or a third party checkout system. Alternatively or in combination the server presents the payment option via a web widget. For example a web widget may include a program code that is portable and executable within a web page without requiring additional compilation. The web widget allows the user to select the option to pay for the product and or service without leaving the web page or refreshing the web page. In one embodiment the interchange provides the web widget to facilitate the payment processing.

In other embodiments the user interface may request a PIN for enhanced security. For example the user may be required to register with the interchange prior to using the services of the interchange and after registering with the interchange the user is provided with the PIN or can created a customized PIN to access the functionality provided by the user interface . User authentication may be used to reduce false messages to the phone number .

Alternatively the user interface may request an identifier of the account to initiate the payment transaction. In some embodiments the user interface requires the user to provide no information other than the phone number in the text field to initiate the transaction.

In one embodiment once the user selects the accept button the interchange transmits a confirmation message to the mobile phone according to the phone number provided in the text field .

In one embodiment the confirmation message includes the instruction to reply with a code such as a code provided in the confirmation message as illustrated in . Alternatively the requested code may include a PIN associated with the account and or a code not shown randomly generated and presented in the user interface used to initiate the payment transaction e.g. user interface . Alternatively a secret code representing the payment request may be provided in the confirmation message and the user may approve the payment transaction providing the secret code back to the interchange via replying from the mobile phone where the user receives the secret code and or replying from the user terminal where the user submits the payment request.

After the correct reply is received the interchange pays the payee using the funds from the account and notifies the user when the payment transaction is complete.

For example the interchange may notify the user via a text message to the mobile phone as illustrated in . illustrates a user interface to confirm the completion of a payment transaction according to one embodiment. No reply to the message that confirms the completion of the payment transaction is necessary. Once the payment transaction is complete the user would have access to the product purchased via the payment transaction.

In one embodiment the server offers products and or services adapted for a virtual world environment such as an online game environment a virtual reality environment etc. The products may be virtual goods which can be delivered via the transmission of data or information without having to physically deliver an object to the user . For example the virtual goods may be a song a piece of music a video clip an article a computer program a decorative item for an avatar a piece of virtual land in a virtual world a virtual object in a virtual reality world etc. For example an online game environment hosted on a server may sell services and products via points or virtual currency which may be consumed by the user while engaging in a game session. For example a virtual reality world hosted on a server may have a virtual currency which may be used by the residents of the virtual reality world to conduct virtual commerce within the virtual reality world e.g. buy virtual lands virtual stocks virtual objects services provided in the virtual reality world etc . In other embodiments the server may also offer physical goods such as books compact discs photo prints postcards etc.

In one embodiment the interchange stores an address of the user associated with the phone number . After the completion of the payment transaction the interchange provides the address to the server of the merchant for the delivery of the purchased product. In some embodiments the user may provide multiple addresses associated with the phone number and may select one as a delivery address in the confirmation approve message to the interchange . Alternatively the interchange may receive an address for product delivery from the mobile phone together with the confirmation approve message and then forward the address to the server of the merchant. Thus the shipping address of the transaction is verified to be associated with the mobile phone . In alternative embodiments the user may directly provide the shipping address in the website hosted on the server of the merchant.

In other embodiments the user is provided with the options to pay via the mobile phone bill associated with the phone number . The interchange may dynamically calculate a set of premium messages based on a set of limited number of predetermined prices for premium messages to match the purchase price. The interchange sends the set of premium messages to the mobile phone at the phone number to collect the funds via the telecommunication carriers to pay for the purchases. Thus the purchase prices are not limited to the set of predetermined prices for premium messages. In some embodiments the interchange may send the set of premium messages in a period of time e.g. a week a month a number of mouths etc. to spread the payments over the period of time e.g. to overcome budget limits and or limits imposed by regulations .

After receiving a portion of the amount from the carrier of the mobile phone the interchange may credit the account associated with the mobile phone with the full amount or an amount larger than the portion received from the carrier or even an amount larger than what the user is charged via the phone bill . The carrier may keep a portion of the amount as fees for the services provided by the carrier in processing the premium message.

Alternatively the interchange may credit the same amount as the portion received from the carrier and deduct the portion that was taken by the carrier as a fee for collecting the funds via the phone bill.

In one embodiment the merchant may specify the second fee. Different merchants may offer different percentages of the purchase prices as the second fee and the interchange may calculate the first fee based on the second fee offered by the merchant by deducting the second fee from the fees charged by the telecommunication carrier for collecting the funds via the mobile phone bill associated with the telephone number and or the fees charged by the interchange for processing the payments. Since the first fee is charged to the customer e.g. the purchaser of products and services the cost to the customer can vary based on the selection of the merchant. For the same purchase prices the first fee and thus the cost to the customer may be different for purchases made via different merchants because the merchants may offer different percentage of the purchase price as the second fee. In some embodiments the first and second fees include both fees charged by the telecommunication carrier for collecting the funds via the mobile phone bill account associated with the phone number and the fees charged by the interchange for processing the payments. In some embodiments the first fee includes the fees charged by the telecommunication carrier but no fees charged by the interchange . In some embodiments the second fee includes the fees charged by the telecommunication carrier but no fees charged by the interchange . In some embodiments the first fee and or the second fee do not include the fees charged by the telecommunication carrier. In some embodiments the first fee is not charged and in other embodiments the second fee is not charged.

In one embodiment the common format processor of the interchange is configured to route messages to the mobile phone at the phone number via the least cost path through mobile carriers aggregators and providers.

In one embodiment there are multiple paths to route a message from the interchange to the mobile phone at the phone number . For example one path may involve one controller and another path may involve multiple controllers . For example the interchange may route a message directly to a mobile carrier or to the mobile carrier via a mobile aggregator.

Different controllers may charge different amounts for facilitating the transmitting of the message e.g. via SMS or other protocols and some of the controllers may not charge a fee for transmitting a message e.g. under certain conditions and or for a specific type of messages .

Further different controllers may charge for their services based on different payment models. For example one controller may charge a flat fee for each message transmitted by the controller another controller may charge a subscription fee for messages transmitted within a period of time e.g. a month and a subscription may have a restriction on the total number of messages transmitted within the subscription period. Some controllers may charge the interchange a price based on the volume of the messages transmitted via the controllers .

Further in some embodiments a mobile phone may have multiple ways to receive a message. For example a mobile phone may receive a message via a cellular communications network via a wireless local area computer network e.g. WiFi via a wireless personal area network e.g. Bluetooth and or a wired connection e.g. a temporary connection when the mobile phone is docked to a PC . Different controllers may be used to transmit the messages to the mobile phone via different ways to reach the mobile phone .

In one embodiment the interchange is configured to identify the different paths to transmit a message to the mobile phone and select a least cost path to transmit the message.

Further the interchange may transmit different messages or different types of messages to the mobile phone via different controllers or paths to reduce cost.

For example in one embodiment the interchange is to use one controller path to transmit non premium confirmation messages to the mobile phone to confirm purchase requests or deposit requests and to use another controller path to transmit premium messages to the mobile phone to collect funds. In one embodiment both the confirmation messages and the premium messages are transmitted via short message service SMS . In another embodiment the confirmation messages and the premium messages are transmitted via different types of services to reduce cost. In one embodiment the interchange is configured to select a service type that can result in a least cost for the transmission of the message to the mobile phone .

In one embodiment the available options prices and restrictions for routing messages to the mobile phone are stored e.g. in the data storage facility for the decision engine of the common format processor . The decision engine is to identify a least cost message transmission path for communicating a message to the mobile phone at the phone number .

In one embodiment the mobile phone is configured to report to the interchange the different ways the mobile phone can receive messages from the interchange while the mobile phone is at a particular location or in a particular mode. Thus the decision engine can select a least cost path to route the message to the mobile phone . Alternatively the interchange may communicate with the telecommunication carrier of the mobile phone or a separate server configured to track the current communication capabilities of the mobile phone at the phone number to obtain the information on different options to transmit messages to the mobile phone .

In the common format processor is configured to identify a phone number for an online transaction related to funds associated with the phone number to select a controller from a plurality of controllers to route a message to a mobile device at the phone number at a least cost and to transmit the message to the mobile device via the selected controller and a corresponding converter to facilitate the online transaction. In one embodiment the mobile device includes a mobile phone such as a cellular phone a satellite phone a wireless local area network based phone etc.

In one embodiment the plurality of controllers include mobile carriers aggregators and providers. Among different paths through the plurality of controllers the common format processor of the interchange is configured to determine a path through the selected controller that has a least cost in transmitting the message to the mobile device. In some embodiments the path may include more than one controller and the interchange may specify a desired path to route the message to the mobile phone .

In another embodiment the path is selected by selecting the controller with which a corresponding converter interacts. The selected controller determines the path.

In one embodiment the message is sent to the mobile phone to confirm a payment using the funds for a purchase made on a user terminal separate from the mobile phone .

In another embodiment the message is a premium message which is transmitted to the mobile phone at the phone number to collect the funds. The funds can be collected in the online transaction for deposit in the account or be used to make a payment for a purchase made on a user terminal which may be separate and distinct from the mobile phone of the user.

In another example the message is a non premium message sent to the mobile phone to confirm the online transaction such as making a deposit into the account e.g. via the telephone bill for the mobile phone or via a credit card number a debit card number or a bank card number associated with the phone number in the data storage facility . In some embodiments the interchange may also associate the email address of the user with the phone number in the data storage facility and use a storage value account identified by the email address of the user to fund the account hosted on the data storage facility . In one embodiment the funds collected via a credit card of the user or a debit card of the user a bank account of the user or an account identified by an email address of the user may be used directly to make the payment without having to store the funds in the account .

In one embodiment different types of funds may be used. For example instead of collecting funds via mobile terminated premium messages mobile initiated premium messages may be used. For example the funds may be collected via operator bill or via charging debit accounts credit accounts or via Automated Clearing House ACH or an account hosted on a third party which in turn obtain funds via different methods. When the interchange uses different types of funds for payment or for deposit into the account there may be different costs associated with accessing the funds. In one embodiment the interchange selects a type of the funds for the fulfillment of the payment or deposit request in determining the least cost path for routing the message. Thus the cost for routing the message includes the cost for accessing the funds.

Further the source e.g. controlled by a third party from which the interchange obtains the funds may have different ways to provide the funds at different costs which are considered by the interchange in determining how to route the messages to obtain the funds. For example in one embodiment the interchange may obtain funds from an account hosted on a third party and identified by an email address of the user. The account hosted on the third party may be funded via different methods such as credit card bank account ACH etc. which may have different prices for accessing a same amount of funds. In one embodiment the interchange further considers these prices in routing the messages to reduce cost. For example in one embodiment the interchange may transmit the message to cause a particular types of funds are used to fund the account hosted on the third party before requesting the funds from the account hosted on the third party. Alternatively the interchange may specify in a request to the third party for funds a particular way by the third party to fund the request. In some embodiments the interchange selects a least costly way to obtain the funds a payment or deposit request where the cost includes the cost to transmit the messages and the cost for obtaining the funds. After the least costly way is identified the interchange routes the message accordingly.

In one embodiment the message is to confirm a user request to deposit a first amount of funds into the account associated with the phone number . Responsive to a reply to the first message the common format processor is to calculate a set of premium messages to charge the first amount and to instruct the controller via the corresponding converter to transmit the set of premium messages to the mobile phone at the phone number to bill the first amount. After a telecommunication carrier of the mobile phone deducts a portion from the first amount as a fee the common format processor is to credit the account a second amount more than a portion of the first amount received from the telecommunication carrier. In one embodiment the second amount is equal to the first amount.

In one embodiment the common format processor uses a decision engine to calculate the set of premium messages based on a set of predetermined constraints and uses a mobile message generator to generate the messages including the message to confirm the user request and the set of premium messages.

In one embodiment the common format processor routes the premium messages through the selected controller to minimize a cost in transmitting the set of premium messages.

In another embodiment the common format processor selects different controllers for routing the message to confirm the user request and for routing the set of premium messages.

In a further embodiment the common format processor may select different controllers to route different messages in the set of premium messages to reduce the total cost for transmitting the set of premium messages.

In one embodiment the non premium message sent to the mobile phone to confirm the user request and the set of premium messages are transmitted via short message service SMS . In another embodiment the premium messages are transmitted via short message service SMS and the non premium message is transmitted via other types of services such as WAP message voice message email instant message etc.

In the interchange is to receive a request related to funds associated with a phone number . In one embodiment the request is received via a website of the interchange and the request may be received from the user terminal or from a server in response to the user interacting with the server using the user terminal .

In one embodiment the interchange is to identify a plurality of controllers capable of transmitting a message to a mobile phone at the phone number determine costs associated with transmitting the message to the mobile phone via first paths through the controllers select a least cost path among the first paths and transmit the message to the mobile phone via the least cost path.

In one embodiment after the interchange receives a reply to the message to confirm the request the interchange is to determine costs associated with transmitting a set of one or more premium messages to the mobile phone via second paths select at least one path from the second paths to minimize a cost to transmit the set of premium messages and transmit the set of one or more premium messages to the mobile phone via the at least one path selected from the second paths.

In one embodiment the interchange is to store the funds collected via the set of one or more premium messages in the account hosted on the data storage facility of the interchange . Due to the cost of the premium messages the amount of funds collected at the interchange is less than the amount the user is charged on the bill for the mobile phone . In one embodiment the interchange may credit the user the full amount the user is charged on the bill for the mobile phone and the interchange may charge the user fees to make payments using the funds stored in the account and or charge the user fees for maintaining the account to recover the difference between the actual amount of funds collected at the interchange and the full amount the user is charged on the bill for the mobile phone and credited in the account .

In another embodiment the request is for a payment on behalf of the user having the phone number and the interchange is to use the funds collected via the set of one or more premium messages to fulfill the payment on behalf of the user having the phone number .

In one embodiment to confirm the request the user having the phone number is to provide the reply with a code such as a PIN of the user a code specified in the message transmitted to the mobile phone or a code provided to the user terminal to identify the purchase transaction associated with the payment etc. In some embodiments multiple codes are requested.

In one embodiment the reply is received from the mobile phone . In another embodiment the message transmitted to the mobile phone includes a one time code and the user is to provide the reply together with the one time code via the user terminal to the website of the interchange to confirm the request.

In another embodiment instead of sending the message to the mobile phone to confirm the request the interchange may provide a one time code to the user terminal via the website of the interchange and request the user to provide the one time code back to the interchange using the mobile phone .

In one embodiment each of the interchange the data storage facility the controllers the mobile phones the user terminals and the servers can be implemented as a data processing system with fewer or more components as illustrated in .

In the data processing system includes an inter connect e.g. bus and system core logic which interconnects a microprocessor s and memory . The microprocessor is coupled to cache memory in the example of .

The inter connect interconnects the microprocessor s and the memory together and also interconnects them to a display controller display device and to peripheral devices such as input output I O devices through an input output controller s .

Typical I O devices include mice keyboards modems network interfaces printers scanners video cameras and other devices which are well known in the art. In some embodiments when the data processing system is a server system some of the I O devices such as printer scanner mice and or keyboards are optional.

The inter connect may include one or more buses connected to one another through various bridges controllers and or adapters. In one embodiment the I O controller includes a USB Universal Serial Bus adapter for controlling USB peripherals and or an IEEE 1394 bus adapter for controlling IEEE 1394 peripherals.

The memory may include ROM Read Only Memory volatile RAM Random Access Memory and non volatile memory such as hard drive flash memory etc.

Volatile RAM is typically implemented as dynamic RAM DRAM which requires power continually in order to refresh or maintain the data in the memory. Non volatile memory is typically a magnetic hard drive a magnetic optical drive an optical drive e.g. a DVD RAM or other type of memory system which maintains data even after power is removed from the system. The non volatile memory may also be a random access memory.

The non volatile memory can be a local device coupled directly to the rest of the components in the data processing system. A non volatile memory that is remote from the system such as a network storage device coupled to the data processing system through a network interface such as a modem or Ethernet interface can also be used.

In this description various functions and operations may be described as being performed by or caused by software code to simplify description. However those skilled in the art will recognize that what is meant by such expressions is that the functions result from execution of the code instructions by a processor such as a microprocessor. Alternatively or in combination the functions and operations can be implemented using special purpose circuitry with or without software instructions such as using Application Specific Integrated Circuit ASIC or Field Programmable Gate Array FPGA . Embodiments can be implemented using hardwired circuitry without software instructions or in combination with software instructions. Thus the techniques are limited neither to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

While some embodiments can be implemented in fully functioning computers and computer systems various embodiments are capable of being distributed as a computing product in a variety of forms and are capable of being applied regardless of the particular type of machine or computer readable media used to actually effect the distribution.

At least some aspects disclosed can be embodied at least in part in software. That is the techniques may be carried out in a computer system or other data processing system in response to its processor such as a microprocessor executing sequences of instructions contained in a memory such as ROM volatile RAM non volatile memory cache or a remote storage device.

Routines executed to implement the embodiments may be implemented as part of an operating system or a specific application component program object module or sequence of instructions referred to as computer programs. The computer programs typically include one or more instructions set at various times in various memory and storage devices in a computer and that when read and executed by one or more processors in a computer cause the computer to perform operations necessary to execute elements involving the various aspects.

A machine readable medium can be used to store software and data which when executed by a data processing system causes the system to perform various methods. The executable software and data may be stored in various places including for example ROM volatile RAM non volatile memory and or cache. Portions of this software and or data may be stored in any one of these storage devices. Further the data and instructions can be obtained from centralized servers or peer to peer networks. Different portions of the data and instructions can be obtained from different centralized servers and or peer to peer networks at different times and in different communication sessions or in a same communication session. The data and instructions can be obtained in entirety prior to the execution of the applications. Alternatively portions of the data and instructions can be obtained dynamically just in time when needed for execution. Thus it is not required that the data and instructions be on a machine readable medium in entirety at a particular instance of time.

Examples of computer readable media include but are not limited to recordable and non recordable type media such as volatile and non volatile memory devices read only memory ROM random access memory RAM flash memory devices floppy and other removable disks magnetic disk storage media optical storage media e.g. Compact Disk Read Only Memory CD ROMS Digital Versatile Disks DVDs etc. among others. The tangible computer readable media may store the instructions.

The instructions may also be embodied in digital and analog communication links for electrical optical acoustical or other forms of propagated signals such as carrier waves infrared signals digital signals etc. However propagated signals such as carrier waves infrared signals digital signals etc. are not tangible machine readable medium and are not configured to store instructions.

In general a tangible machine readable medium includes any apparatus that provides i.e. stores and or transmits information in a form accessible by a machine e.g. a computer network device personal digital assistant manufacturing tool any device with a set of one or more processors etc. .

In various embodiments hardwired circuitry may be used in combination with software instructions to implement the techniques. Thus the techniques are neither limited to any specific combination of hardware circuitry and software nor to any particular source for the instructions executed by the data processing system.

Although some of the drawings illustrate a number of operations in a particular order operations which are not order dependent may be reordered and other operations may be combined or broken out. While some reordering or other groupings are specifically mentioned others will be apparent to those of ordinary skill in the art and so do not present an exhaustive list of alternatives. Moreover it should be recognized that the stages could be implemented in hardware firmware software or any combination thereof.

In the foregoing specification the disclosure has been described with reference to specific exemplary embodiments thereof. It will be evident that various modifications may be made thereto without departing from the broader spirit and scope as set forth in the following claims. The specification and drawings are accordingly to be regarded in an illustrative sense rather than a restrictive sense.

