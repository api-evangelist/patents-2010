---

title: Converged mobile-web communications solution
abstract: A converged mobile-Web communications solution interfaces to both a mobile phone network and an Internet or Intranet network, so that services that are provided to mobile phones in the mobile phone network are also provided to web clients or web widgets in the Internet or Intranet network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08670760&OS=08670760&RS=08670760
owner: Kodiak Networks, Inc.
number: 08670760
owner_city: Plano
owner_country: US
publication_date: 20100517
---
This application is a continuation in part that claims the benefit under 35 U.S.C. Section 120 e of U.S. Utility application Ser. No. 12 359 861 filed on Jan. 26 2009 by Bruce D. Lawler Krishnakant M. Patel and Brahmananda R. Vempati entitled CONVERGED MOBILE WEB COMMUNICATIONS SOLUTION which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 61 023 332 filed on Jan. 24 2008 by Bruce D. Lawler Krishnakant M. Patel Brahmananda R. Vempati and Vyankatesh V. Shanbhag entitled CONVERGED MOBILE WEB COMMUNICATIONS SOLUTION both of which applications are incorporated by reference herein.

U.S. Utility application Ser. No. 10 515 556 filed Nov. 23 2004 by Gorachand Kundu Ravi Ayyasamy and Krishnakant Patel entitled DISPATCH SERVICE ARCHITECTURE FRAMEWORK which application claims the benefit under 35 U.S.C. Section 365 of P.C.T. International Application Serial Number PCT US03 16386 which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. Nos. 60 382 981 60 383 179 and 60 407 168 

U.S. Utility application Ser. No. 10 564 903 filed Jan. 17 2006 by F. Craig Farrill Bruce D. Lawler and Krishnakant M. Patel entitled PREMIUM VOICE SERVICES FOR WIRELESS COMMUNICATIONS SYSTEMS which application claims the benefit under 35 U.S.C. Section 365 of P.C.T. International Application Serial Number PCT US04 23038 154.7 WO U1 which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. Nos. 60 488 638 60 492 650 and 60 576 094 and which application is a continuation in part and claims the benefit under 35 U.S.C. Sections 119 120 and or 365 of P.C.T. International Application Serial Number PCT US03 16386 

U.S. patent application Ser. No. 11 126 587 filed May 11 2005 by Ravi Ayyasamy and Krishnakant M. Patel entitled ARCHITECTURE CLIENT SPECIFICATION AND APPLICATION PROGRAMMING INTERFACE API FOR SUPPORTING ADVANCED VOICE SERVICES AVS INCLUDING PUSH TO TALK ON WIRELESS HANDSETS AND NETWORKS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. Nos. 60 569 953 and 60 579 309 and which application is a continuation in part and claims the benefit under 35 U.S.C. Sections 119 120 and or 365 of U.S. Utility application Ser. No. 10 515 556 and P.C.T. International Application Serial Number PCT US04 23038 

U.S. Utility application Ser. No. 11 129 268 filed May 13 2005 by Krishnakant M. Patel Gorachand Kundu Ravi Ayyasamy and Basem Ardah entitled ROAMING GATEWAY FOR SUPPORT OF ADVANCED VOICE SERVICES WHILE ROAMING IN WIRELESS COMMUNICATIONS SYSTEMS now U.S. Pat. No. 7 403 775 issued Jul. 22 2008 which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 571 075 and which application is a continuation in part and claims the benefit under 35 U.S.C. Sections 119 120 and or 365 of U.S. Utility application Ser. No. 10 515 556 and P.C.T. International Application Serial Number PCT US04 23038 

U.S. Utility application Ser. No. 11 134 883 filed May 23 2005 by Krishnakant Patel Vyankatesh V. Shanbhag Ravi Ayyasamy Stephen R. Horton and Shan Jen Chiou entitled ADVANCED VOICE SERVICES ARCHITECTURE FRAMEWORK which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. Nos. 60 573 059 and 60 576 092 and which application is a continuation in part and claims the benefit under 35 U.S.C. Sections 119 120 and or 365 of U.S. Utility application Ser. No. 10 515 556 P.C.T. International Application Serial Number PCT US04 23038 U.S. Utility application Ser. No. 11 126 587 and U.S. Utility application Ser. No. 11 129 268 

U.S. Utility application Ser. No. 11 136 233 filed May 24 2005 by Krishnakant M. Patel Vyankatesh Vasant Shanbhag and Anand Narayanan entitled SUBSCRIBER IDENTITY MODULE SIM ENABLING ADVANCED VOICE SERVICES AVS INCLUDING PUSH TO TALK PUSH TO CONFERENCE AND PUSH TO MESSAGE ON WIRELESS HANDSETS AND NETWORKS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 573 780 and which application is a continuation in part and claims the benefit under 35 U.S.C. Sections 119 120 and or 365 of U.S. Utility application Ser. No. 10 515 556 P.C.T. International Application Serial Number PCT US04 23038 U.S. Utility application Ser. No. 11 126 587 and U.S. Utility application Ser. No. 11 134 883 

U.S. Utility application Ser. No. 11 158 527 filed Jun. 22 2005 by F. Craig Farrill entitled PRESS TO CONNECT FOR WIRELESS COMMUNICATIONS SYSTEMS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 581 954 and which application is a continuation in part and claims the benefit under 35 U.S.C. Sections 119 120 and or 365 of U.S. Utility application Ser. No. 10 515 556 and P.C.T. International Application Serial Number PCT US04 23038 

U.S. Utility application Ser. No. 11 183 516 filed Jul. 18 2005 by Deepankar Biswaas entitled VIRTUAL PUSH TO TALK PTT AND PUSH TO SHARE PTS FOR WIRELESS COMMUNICATIONS SYSTEMS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 588 464 

U.S. Utility application Ser. No. 11 356 775 filed Feb. 17 2006 by Krishnakant M. Patel Bruce D. Lawler Giridhar K. Boray and Brahmananda R. Vempati entitled ENHANCED FEATURES IN AN ADVANCED VOICE SERVICES AVS FRAMEWORK FOR WIRELESS COMMUNICATIONS SYSTEMS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 654 271 

P.C.T. International Application Serial Number PCT US2006 011628 filed Mar. 30 2006 by Krishnakant M. Patel Gorachand Kundu Sameer Dharangaonkar Giridhar K. Boray and Deepankar Biswas entitled TECHNIQUE FOR IMPLEMENTING ADVANCED VOICE SERVICES USING AN UNSTRUCTURED SUPPLEMENTARY SERVICE DATA USSD INTERFACE which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 666 424 

U.S. Utility application Ser. No. 11 462 332 filed Aug. 3 2006 by Deepankar Biswas Krishnakant M. Patel Giridhar K. Boray and Gorachand Kundu entitled ARCHITECTURE AND IMPLEMENTATION OF CLOSED USER GROUP AND LIMITING MOBILITY IN WIRELESS NETWORKS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 705 115 

U.S. Utility application Ser. No. 11 463 186 filed Aug. 8 2006 by Ravi Ayyasamy and Krishnakant M. Patel entitled ADVANCED VOICE SERVICES CLIENT FOR BREW PLATFORM which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 706 265 

U.S. Utility application Ser. No. 11 567 098 filed Dec. 5 2006 by Ravi Ayyasamy Bruce D. Lawler Krishnakant M. Patel Vyankatesh V. Shanbhag Brahmananda R. Vempati and Ravi Shankar Kumar entitled INSTANT MESSAGING INTERWORKING IN AN ADVANCED VOICE SERVICES AVS FRAMEWORK FOR WIRELESS COMMUNICATIONS SYSTEMS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 742 250 

U.S. Utility application Ser. No. 11 740 805 filed Apr. 26 2007 by Krishnakant M. Patel Giridhar K. Boray Ravi Ayyasamy and Gorachand Kundu entitled ADVANCED FEATURES ON A REAL TIME EXCHANGE SYSTEM which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 795 090 

U.S. Utility application Ser. No. 11 891 127 filed Aug. 9 2007 by Krishnakant M. Patel Deepankar Biswas Sameer P. Dharangaonkar and Terakanambi Nanjanayaka Raja entitled EMERGENCY GROUP CALLING ACROSS MULTIPLE WIRELESS NETWORKS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 60 836 521 

U.S. Utility application Ser. No. 12 259 102 filed on Oct. 27 2008 by Krishnakant M. Patel Gorachand Kundu and Ravi Ayyasamy entitled CONNECTED PORTFOLIO SERVICES FOR A WIRELESS COMMUNICATIONS NETWORK which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. Nos. 60 982 650 and 61 023 042 

U.S. Utility application Ser. No. 12 582 601 filed on Oct. 20 2009 by Krishnakant M. Patel Ravi Ayyasamy Gorachand Kundu Basem A. Ardah Anand Narayanan Brahmananda R. Vempati and Pratap Chandana entitled HYBRID PUSH TO TALK FOR MOBILE PHONE NETWORKS which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. No. 61 106 689 and

U.S. Utility application Ser. No. 12 750 175 filed on Mar. 30 2010 by Bruce D. Lawler Krishnakant M. Patel Ravi Ayyasamy Harisha M. Negalaguli Basem A. Ardah Gorachand Kundu Ramu Kandula Brahmananda R. Vempati Ravi Shankar Kumar and Chetan Patel entitled ENHANCED GROUP CALLING FEATURES FOR CONNECTED PORTFOLIO SERVICES IN A WIRELESS COMMUNICATIONS NETWORK which application claims the benefit under 35 U.S.C. Section 119 e of U.S. Provisional Application Ser. Nos. 61 164 754 and 61 172 129 

This invention relates in general to wireless communications systems and more specifically to a converged mobile Web communications solution.

Current market dynamics indicate that Web 2.0 trends will impact mobile phone communications. Specifically it is expected that web based applications will displace at least some core wireless services.

Nonetheless web based applications often ignore key components of wireless communications networks. For example Web 2.0 trends include new virtual online communities for social networking but typically ignores consumers most important main network namely contacts on their mobile phones which are a constant personal communications companion for most people.

Nonetheless web based applications do provide value added communications and messaging services heretofore found in communications networks including 

However there is a functionality gap between such web based applications and mobile phone communications 

Thus notwithstanding the innovations found in web based applications there is a need in the art for improvements to these services as well as additional services that leverage existing and emerging wireless communications functionality and provide superior user experiences. The present invention aims to satisfy this need by providing a converged mobile Web communications solution combining the best of both worlds.

To overcome the limitations in the prior art described above and to overcome other limitations that will become apparent upon reading and understanding the present specification the present invention discloses a converged mobile Web communications solution. Specifically the system of the present invention interfaces to both a mobile phone network and an Internet or Intranet network so that services that are provided to the mobile phone in the mobile phone network are also provided to a web client or web widget in the Internet or Intranet network. These services include providing the web client or web widget with access to the mobile phone s contacts providing the web client or web widget with access to the mobile phone s text messaging allowing the web client or web widget to send text messages to one or more recipient mobile phones in the mobile phone network providing the web client or web widget with access to the mobile phone s voice messaging allowing the web client or web widget to send multimedia files to one or more recipient mobile phones in the mobile phone network allowing the web client or web widget to place a group call to a plurality of recipient mobile phones in the mobile phone network performing simultaneous ringing to both the mobile phone in the mobile phone network and the web client or web widget in the Internet or Intranet network transferring calls from the mobile phone in the mobile phone network to the web client or web widget in the Internet or Intranet network transferring calls from the web client or web widget in the Internet or Intranet network to the mobile phone in the mobile phone network and synchronizing data between the mobile phone in the mobile phone network and the web client or web widget in the Internet or Intranet network. These and other aspects of the present invention are described in more detail below.

In the following description of the preferred embodiment reference is made to the accompanying drawings which form a part hereof and in which is shown by way of illustration the specific embodiment in which the invention may be practiced. It is to be understood that other embodiments may be utilized as structural changes may be made without departing from the scope of the present invention.

Voice call related messages in the following call flows include Setup Originating Terminating IAM Alerting ACM Connect ANM Disconnect REL release Disconnect Ack and RCL release complete.

SMS related messages in the following call flows include MO SM FSM a.k.a. Fwd SM Data SM Deliver SM and MT SM.

The present invention discloses a converged mobile Web communications solution as well as a suite of applications used both with mobile phones that operate within a mobile phone network and web clients or web widgets that operate within Internet Intranet networks. Specifically the present invention provides brings mobile phone services to web clients and web widgets.

Web clients may execute within a browser for example as a plug in downloaded from a web site or may comprise standalone programs while web widgets may comprise programs or plug ins that are embedded in Web pages such as those found on social networking sites for example a user s FACEBOOK page . Both web clients and web widgets allow Internet Intranet users to communicate with mobile users using phone calls advanced voice services messaging data exchange etc.

Within the network an RTX also known as a Dispatch Gateway DG communicates with a MSC Mobile Switching Center and PSTN Public Switched Telephone Network using SS7 ISUP WIN CAMEL Signaling System 7 Integrated Services Digital Network User Part Wireless Intelligent Network Customized Applications for Mobile Enhanced Logic messages at a signaling plane . A bearer path implements a TDM Time Division Multiplexing interface carrying PCM Pulse Code Modulation or TFO Tandem Free Operation voice frames. Support for TFO in this path is negotiated between a BSC Base Station Controller and the RTX for each originating and terminating leg of a call. The use of TFO ensures high voice quality as voice vocoder conversion is avoided between mobile to mobile calls.

When a subscriber originates a call the MSC routes the call to the RTX . The MSC also requests the BSC via to establish a radio traffic path with a mobile station MS also known as a handset mobile unit mobile phone or cellular phone via the BTS Base Transceiver Station as it does for a normal cellular call . At this time the BSC tries to negotiate TFO if it is supported on a TDM link with the far end in this case the RTX .

At the same time after the MSC terminates the call request to the RTX the RTX identifies the terminating group users and their numbers which may comprise an MS ISDN Mobile Station Integrated Services Digital Network number an IMSI International Mobile Subscriber Identity number or an MDN Mobile Directory Number .

The RTX sends an ISUP call origination request for each terminating handset . It may send requests directly to the MSC PSTN or IP network via a PDSN Public Data Switched Network Router and or Internet Intranet depending on the routing table configuration for terminating numbers. Once the bearer path is established the RTX begins a negotiation with the far end in this case the terminating BSC for each terminating leg to a handset .

Once bearer paths are established for originating and terminating legs for a call the RTX switches or duplicates voice or data from the originating handset to all terminating handsets .

The RTX may also use an IP network or the Internet Intranet . The IP network or the Internet Intranet can be used in a toll bypass mode where two RTXs can exchange voice traffic bypassing the PSTN . However each RTX is responsible for terminating traffic to its closest MSC . In this case the IP network or the Internet Intranet is used as a backbone transport of voice traffic between two RTXs .

The IP network or the Internet Intranet can also be used for a registration and presence application. Since the MSC will not direct a registration request from a handset to the RTX because it would require changes in the MSC the latter does not have any information of the registered handset . To circumvent this issue a registration and presence application runs over an IP stack in the handset . After the handset registers for a data interface i.e. obtaining an IP address with the PDSN or Serving GSM Service Nodes SGSN in the case of GSM networks and Gateway GPRS General Packet Radio Service Support Node GGSN in the case of GSM phones for transmitting IP packets the registration and presence application in the handset registers with the RTX using its IP address. The RTX also uses this IP interface to update the presence information to a handset .

An alternative embodiment may use the SMS Short Message Service transport to carry presence messages over a data channel. The RTX interacts with the handset using predefined presence application related messages that are transported as SMS messages. The same messages can be transported via the PDSN interface if users have data service.

During roaming a Home Location Register HLR and Visitor Location Register VLR can be accessed via the MSC and a MAP Mobile Application Part link . The HLR and VLR are used to track the handsets within home or foreign networks while the RTX is used to track the presence of members of a group within the home or foreign networks and updates the handsets for those members with the network availability of other members of the group.

A Short Message Service Center SMSC is accessible via the IP network or other element for the storage of text messages SMS messages . When an SMS message is sent to a handset the message is first stored in the SMSC until the recipient handset is available e.g. a store and forward option .

The architecture includes a Call Processing system Presence Server Real Time Event Processing system one or more Media Managers and an SMPP Short Message Peer to Peer Transport as well as modules for various SS7 protocols such as MTP 1 Message Transfer Part Level 1 MTP 2 Message Transfer Part Level 2 MTP 3 Message Transfer Part Level 3 ISUP Integrated Services Digital Network User Part SCCP Signaling Connection Control Part and TCAP Transactions Capabilities Application Part protocols.

The Call Processing system Presence Server Media Managers SMPP Transport and other modules communicate across an IP network . The Real Time Event Processing system communicates directly with the Call Processing system Presence Server and the modules for various SS7 protocols. The modules for various SS7 protocols communicate with other entities via a SS7 Signaling Link . The SMPP Transport communicates with a SMSC Short Message Service Center gateway using the SMPP protocol . The Media Managers communicate among themselves using the H.110 protocol or some other protocol such TCP IP .

The originating handset signals the RTX via the wireless network e.g. by transmitting one or more configured DTMF Dual Tone Multi Frequency digits to the RTX . The Media Manager systems receive the DTMF digits and pass the DTMF digits to the Call Processing system . The Call Processing CP system determines whether the originating handset has subscribed to the AVS AGS or AGC service before originating the call. Upon confirmation the Call Processing system initiates a new call. The Call Processing system interacts with the Presence Server and Real Time Event Processing system to cause the wireless network to perform call setup with the terminating handsets for the call and thereafter to manage the call.

During the call the Call Processing system interacts with the Media Manager systems to maintain the H.110 channels and assign any additional H.110 channels required for the call which may span across multiple Media Manager systems . During the call the Media Manager systems of the RTX are used to mix audio streams between the originating handset and the terminating handset and then deliver these mixed audio streams to the originating handset and the terminating handset . The H.110 channels are used for passing mixed and unmixed audio streams voice between the Media Manager systems as required.

In addition the RTX may include an MMS Relay Notification Server Registrar SIP Proxy Media Proxy Media Converter Content Server Web Server and Location Server . The operation of these various components are described in more detail below as well as in the co pending and commonly assigned patent applications cross referenced above and incorporated by reference herein.

Preferably the software architecture used in the handset provides an application programming interface API that supports the logic and data required within the handset for providing cellular service including the functions necessary for the making a call generally and for providing the AVS AGS or AGC services specifically.

The high level functional components of the handset include an encoder decoder processing logic and user interface . A client application is provided on a subscriber identity module SIM that supports AVS AGS or AGC functionality for the handset . In addition the SIM stores a database which includes an address book contacts and or group information.

At power on the handset loads the client application necessary to support the AVS AGC or AGC services. This functionality provided includes the look and feel of the menu displays on the handset as well as user interaction with the menu displays.

During operation the encoder decoder decodes and encodes messages and populates specific data structures in the handset . The encoder decoder checks the validity of the incoming messages by verifying mandatory parameters for each of the incoming messages. A message will not be processed further if the encoder decoder fails to decode the message.

The processing logic handles normal calls as well as all the AVS AGS or AGC related functionalities. The processing logic implementation is device specific and vendor specific and it interacts with the other components including the encoder decoder user interface client application and database .

The processing logic provides an auto answer mechanism for calls. Specifically when a call is received the processing logic automatically answers the call. The processing logic makes use of call notification for incoming call detection and based on various parameters received within the call notification determines whether the call is a normal call or an AVS AGS or AGC call. The processing logic performs the necessary processing based on this determination.

In addition the processing logic provides SMS destination control based on the type of subscriber. At the time of subscriber data provisioning if it is determined that the handset will use AVS AGS or AGC based logic then appropriate logic is invoked in the RTX to send presence messages over SMS to the handset . Similarly the handset is configured at the time of provisioning to receive accept such SMS and respond to the RTX appropriately.

Finally the processing logic also enables subscribers to track the presence of contacts and members of a group on their handset and provides a mechanism and API to carry out contacts and group management operations on the handset such as add member delete member etc.

Since most of the presence information is stored in the database the database is tightly integrated with the processing logic . The database stores groups contacts presence and availability related information. The database information essentially contains group and member information along with presence information associated with each group and member. Apart from group and member information the database also stores subscriber information such as privileges presence information etc. The other components of the handset may interact with the database to retrieve update the group members and presence information for various operations. The database also has pointers to the native address book on the handset to provide seamless alias naming for contacts used with normal calls as well as AVS AGS or AGC services.

The user interface provides a mechanism for the user to view and manage groups group members contacts presence and availability. The user interface also makes it possible to invoke the AVS AGS or AGC services from the group contact list screens as described in more detail below.

According to one embodiment of the present invention the functionality of the converged mobile Web communications solution includes the following 

The components that work together to provide the functionality of the converged mobile Web communications solution according to one embodiment of the present invention are described in more detail in the following sections.

Generally the network is used for making phone calls and exchanging data to and from the handsets wherein the phone calls are initiated by call setup and in band signaling within the network and voice frames for the phone calls are switched between the handsets across bearer paths in the network . The RTX interfaces to at least one MSC in the network to provide the AVS AGS or AGC services therein without requiring any changes to the MSC or other equipment of the network to provide the AVS AGS or AGC services. Both the RTX and the handsets that use the AVS AGS or AGC services communicate with each other using the call setup and in band signaling within the network such that at least one MSC routes an originating leg of the AVS AGS or AGC services from an originating handset to the RTX the RTX exchange initiates one or more terminating legs of the AVS AGS or AGC services to one or more terminating handsets through at least one MSC and the RTX switches the voice frames for the AVS AGS or AGC services for the handsets across the bearer paths and through at least one MSC in the network .

In one embodiment the RTX also interfaces to one or more Intranet or Internet networks such as or for exchanging data between at least one of the handsets and at least one user on the Intranet or Internet network or in order to provide the AVS AGS or AGC services and other services to the user on the Intranet or Internet network or . The user on the Intranet or Internet network or uses a Web Client or Web Widget to exchange the data with the RTX and or handset . The other components of the network together comprise the means that interface to the network and the network or for providing a converged mobile Web communications solution to both the handsets and the Web Client or Web Widget wherein the converged mobile Web communications solution comprises one or more of the following services 

A Web Client may execute within a browser for example as a plug in downloaded from a Web site or may comprise standalone programs while a Web Widget may comprise a program or plug in that is embedded in a Web page.

Alternatively Web Widgets may be used to perform the same functions as the Web Client . A Web Widget is an applet program that can be installed within any Web page and then executed by a Web browser when the Web page is accessed. Web Widgets may be implemented using DHTML JavaScript Adobe Flash or other programming languages.

The Packet Data Gateway PDG is a network component wherein the Web Client Web Widgets establishes a secure IPSec tunnel with the PDG . All SIP communication from the Web Client Web Widgets and optionally the HTTP traffic will be routed through the secure IPSec tunnel with the PDG to the Web Server and the Registrar SIP Proxy .

All call related features on Web Client Web Widget use the SIP protocol for session establishment and call control. The Registrar SIP Proxy also known generically as an Access Gateway AGW acts as a gateway and routes calls between the Web Client Web Widget and the RTX . It also acts as a SIP Registrar that not only authenticates the subscribers before providing access to the RTX but also stores the location and routing information needed for terminating incoming calls on the Web Client Web Widget .

The Registrar SIP Proxy controls the path for all SIP signaling between the Web Client Web Widget and the RTX . The main function of the Registrar SIP Proxy is to authenticate SIP messages. The SIP authentication is performed using the session ID established at the Web Server by the Web Client Web Widget . The Registrar SIP Proxy also acts as a SIP registrar. The Registrar SIP Proxy preferably comprises a set of redundant proxy servers registrars.

A Web Client Web Widget receives a SIP configuration from the Web Server . This configuration contains details of the Registrar SIP Proxy to be contacted.

Associated with the Registrar SIP Proxy is a Media Proxy . Similar to the way the Registrar SIP Proxy acts as a gateway for call signaling the Media Proxy function acts as a gateway for media packets sent between the Web Client Web Widget on one side and a Content Server in the RTX on the other side.

The Web Server presents the user interface pages to the Web Client Web Widget . It also provides the user with a SIP plug in for installation. The Web Server interfaces with the Content Server to provide views of the user s address book and message inbox. However the Web Server does not store any user data permanently. All user data served by the Web Server is obtained from the Content Server .

The Web Server is also responsible for authenticating the user with the network. After it establishes an HTTP session with the Web Client Web Widget the Web Server shares the session ID with the Registrar SIP Proxy for authenticating SIP requests.

A Web Server may also be deployed in the public internet by the carrier i.e. the Web Server does not communication with the Web Client Web Widget through the Registrar SIP Proxy . This Web Server will also serve the SIP plug in and user interface pages to the Web Client Web Widget .

The Presence Server handles SIP subscriptions and publications from the Web Client Web Widget . The main function of the Presence Server is to off load presence related messaging and dialog maintenance overheads from the RTX . The RTX maintains the presence state of the user. The Presence Server creates presence documents using the information stored on the RTX . The Presence Server also updates the presence state on the RTX when it receives presence publications from the Web Client Web Widget .

The Location Server stores information about a user s home RTX Presence Server and Content Server . The Location Server is also used to store the session details for Web Clients Web Widgets . The Registrar SIP Proxy uses this information to authenticate SIP messages using the session ID. The session ID is created by the Web Server and is only read by the Registrar SIP Proxy . The Registrar SIP Proxy cannot extend the life of the session ID directly. The SIP plug in in the Web Client Web Widgets will trigger keep alive HTTP requests when calls are in progress to prevent HTTP session timeout. The session ID will be removed from the Location Server by the Web Server in case of a session timeout.

The RTX has a SIP adaptor that is capable of receiving and originating SIP calls to the Web Client Web Widget . The SIP adaptor is integrated with the Call Processing component which can handle calls with simultaneous SIP and SS7 legs. The SIP adaptor is also capable of injecting SMS signals into the RTX which is used for features such as Voice SMS VSMS deposit.

The SyncML Synchronization Markup Language Server handles SyncML connections from the handset to synchronize the address book and other data between the handset and the Content Server .

The Content Server archives all messages belonging to a user. It also holds a view of the user s address book and the messages stored on the handset . The Content Server may be a distributed data store. It will interface with the SyncML Server to maintain synchronization with the data from the handset .

The RTX copies all AGC communication sent to users with their Content Server . The Web Server will fetch data to be displayed by the Web Client Web Widget from the Content Server .

The Notification Server allows other web services and network components to send notifications to the Web Client Web Widget whenever data changes on the Content Server . The Web Client Web Widget will then pull the data from the Content Server through the Web Server using other web services.

The MMS Relay provides access to the operator s MMS Multimedia Messaging Service by acting as a gateway between the different types of clients Handset Web Client Web Widget and the MMSC Multimedia Messaging Service Center .

The Media Converter provides a media library and multimedia messaging features and is used for storing the media files. These media files can be any number of different formats such as JPG PNG GIF etc. for pictures MP3 WAV AMR etc. for audio and MPG AVI 3PG etc. for video. Since not all formats are supported by all the mobile handsets and also for enabling streaming of audio and video files to the Web Client Web Widget the media files may need to be converted into formats different from the original format of the uploaded files. The Media Converter provides this function within the network.

The Web Client Web Widget expects the following configuration from the Web Server after authentication 

These message flows are for illustrative purposes only. For example although these message flows refer only to the Web Client the Web Widget may perform the same functions as the Web Client and may be substituted for the Web Client throughout these message flows.

In addition although the terminations to the handset show ISUP messages sent to the handset the IAM ACM ANM REL RLC etc. messages traverse a GMSC.

5. The Web Server verifies the received authentication credentials and if successful stores the session id and the time stamp for the session id in a subscriber information table in the Location Server .

6. The Web Server then checks for the Registrar SIP Proxy information for the user on the Location Server . If Registrar SIP Proxy information is not available then the Web Server selects an Registrar SIP Proxy to communicate with the Web Client and stores the information in the Location Server .

7. The Web Server creates and sends a customized web page for that user. As part of the response the Web Client also receives other configuration information such as the identity of the Registrar SIP Proxy access numbers for various features etc.

10. The Web Client uses the user name entered previously and uses the session id as the password for generating the response. It then resends the registration request with this response.

11. The Registrar SIP Proxy retrieves the session id from the Location Server for the specified user name.

12. The Registrar SIP Proxy then validates the authentication response using the retrieved session id.

13. If this is successful the Registrar SIP Proxy accepts the registration. The Web Client can now make and receive calls including AGC calls through the Web Client .

14. The Web Client sends a keep alive HTTP message to the Web Server to keep the session id in the Location Server valid.

16. When the Web Client connection is broken for example the web browser window or tab is closed normally or when the keep alive time is expired the Web Server removes the session id information from the Location Server .

1. The user selects contacts B and C and initiates for example an AGC call such as an Instant Conference IC call. The Web Client creates and sends a SIP INVITE request containing the list of recipients. The SIP INVITE request also contains the feature tag for IC call. This is used to route the IC call to the RTX . The request is addressed to a unique well known URI set up for IC calls. This URI could be the same E.164 number or short code used for IC origination.

2. The SIP adapter at the RTX extracts the recipients list from the SIP INVITE and triggers an MO SMS containing the recipient list.

10. Since this is the first ANM for the call the RTX now establishes the call and sends a SIP 200 Ok response to A.

12. The RTX knows that A has initiated the IC call from a Web Client . So the RTX sends a copy of the IC call rejoin notification in the Content Server against user A s data. This is in addition to the regular SMS notification sent to A s handset which is not shown in the flow .

14. The Content Server detects a change in user A s data and sends a notification to A s Web Client that the data has changed asking it to retrieve the data. This notification is sent within the SUBSCRIBE dialog established for presence and data change notifications.

15. User A s Web Client uses HTTP to retrieve the notification and sends a HTTP request to the Web Server .

1. User selects contacts B and C and initiates an AGC call such as an IC call. The Web Client creates and sends a SIP INVITE request containing the list of recipients. The SIP INVITE request also contains the feature tag for the IC call. This is used to route the IC call to the RTX . The request is addressed to a unique well known URI set up for IC calls. This URI could be the same E.164 number or short code used for IC origination.

2. The SIP adapter at the RTX extracts the recipients list from the SIP INVITE and triggers an MO SMS containing the recipient list.

5. The RTX detects that user C is logged in through the Web Client . It looks up the Location Server and finds the Registrar SIP Proxy through which it can reach C.

10. C s Web Client receives the SIP INVITE and sends a SIP 180 Ringing response to its Registrar SIP Proxy .

Rejoin notification flows are not shown in this flow as they are similar to the one shown in the Call Initiation flow.

1. The RTX receives an incoming call to user A. The RTX determines that user A can be reached through the handset as well as the Web Client . The RTX looks up the Registrar SIP Proxy through which A s Web Client can be reached in a manner similar to the mechanism shown in the Call Termination message flow.

5. A s Web Client receives a SIP INVITE and sends an alerting response through the Registrar SIP Proxy .

11. The RTX connects A s handset to the call and sends a SIP CANCEL request to the Web Client to drop the SIP call leg.

13. The Web Client then sends a SIP 487 Request Canceled response for the INVITE transaction to the RTX to indicate that the request was canceled by the RTX .

1. User A is on a call on the Web Client . User A wants to transfer the call to the handset and continue the call. User A enters the appropriate DTMF sequence on the Web Client and the handset sends these DTMF signals in band to the RTX .

2. The RTX receives the DTMF signals and interprets the signals as a call transfer from the Web Client to the handset . It sends a SS7 IAM message to A s handset .

3. A s handset receives the IAM message presents the call to the user and sends an ACM message to the RTX .

4. User A now answers the call on the handset . A s handset sends an ANM message to the RTX to accept the call. The RTX connects the handset call leg to the ongoing call.

5. The RTX now disconnects the Web Client call leg by sending a SIP BYE to the Web Client through the Registrar SIP Proxy .

6. The Web Client completes the transaction by sending a SIP 200 Ok response to the RTX through the Registrar SIP Proxy .

1. User A is on a call on the handset . User A wants to transfer the call to the Web Client and continue the call. User A presses the appropriate DTMF sequence on the handset . The handset sends these DTMF signals in band to the RTX .

2. The RTX receives the DTMF signals and interprets the signals as a call transfer to the Web Client . It sends a SIP INVITE message to A s Web Client through the Registrar SIP Proxy .

3. The Web Client receives the INVITE presents the call to the user and sends a SIP 180 Ringing response to the RTX through the Registrar SIP Proxy .

4. User A now answers the call on the Web Client . The Web Client sends a SIP 200 Ok response to the RTX .

5. The RTX sends a SIP ACK message back to the Web Client to complete the INVITE transaction after connecting the Web Client call leg to the ongoing call.

The Call Hold function performed by the Web Client is performed through normal SIP mechanisms and thus the message flow is not shown herein.

1. The Web Client sends a SIP PUBLISH through the Registrar SIP Proxy to the Presence Server with the presence state set by the user.

2. The Presence Server receives the presence state and sends a SIP 200 Ok response back to complete the transaction.

4. The Presence Server synchronizes the new presence state with the handset using the Presence Server protocol.

5. The HLR detects changes in the on off state of the handset and reports these changes to the Presence Server in the RTX .

9. The Presence Server sets its current time stamp to the presence state and then sends a SIP NOTIFY message on the presence data change SUBSCRIBE dialog to the Web Client .

10. The Web Client receives the SIP NOTIFY message and sends back a SIP 200 Ok response to complete the transaction.

11. The Web Client sends a HTTP GET request to the Web Server to retrieve the changed data which includes the new presence state.

1. User A s Web Client subscribes to the presence states of all of A s contacts by sending a single SIP SUBSCRIBE request to the Presence Server . The request is addressed to a special URI e.g. contacts username operator.com that is understood by the Presence Server to mean all contacts of the user.

2. The Presence Server receives the request and sends a SIP 200 Ok response to complete the transaction.

3. The Presence Server then retrieves the list of A s contacts from the Content Server where A s data is stored. In this message flow user A is assumed to have B and C as contacts both of whom are RTX subscribers.

4. After the list of contacts is obtained the Presence Server determines which of the contacts are RTX subscribers and obtains their home RTX information from the Location Server .

7. After obtaining the presence states of all contacts who are RTX subscribers the Presence Server creates and sends a SIP NOTIFY message to the Web Client . The SIP NOTIFY message contains the presence information of these contacts.

8. The Web Client receives the SIP NOTIFY message and sends a SIP 200 Ok response to complete the transaction.

One issue that exists is how does the Presence Server obtain updates to B and C s presence states It is expected that as soon as a contact changes his her presence state subscribers to that presence state should be notified. For example a suggested solution is for the Presence Server in the home RTX to report presence state change of any of their subscribers to the Presence Servers of other RTXs immediately. Then it is up to the Presence Servers in these other RTXs to determine who has subscribed to presence information for this subscriber and notify them appropriately.

9. The contact list maintained at the Content Server for user A may be modified either through the Web Client or through the handset these messages are not shown .

12. The Presence Server retrieves the presence states for any added or modified contacts and discards the presence states for any deleted contacts.

13. The Presence Server creates and sends a SIP NOTIFY message to the Web Client containing the presence states of the contacts.

14. The Web Client receives the SIP NOTIFY and sends a SIP 200 Ok response back to complete the transaction.

1. User A selects multiple contacts and initiates a Group SMS GSM message. The selected contacts include user B who also uses the Web Client . Message flows for the other contacts are not shown as the messaging is through the regular SMS mechanism. User A s Web Client accepts the message text and creates and sends a SIP MESSAGE request to the RTX containing the message text and the list of recipients.

2. The RTX receives the SIP MESSAGE request and sends back a SIP 200 Ok response to complete the transaction.

3. The SIP adapter in the RTX parses the message and triggers a MO SMS in the GSMS format to be sent to the GSMS module of the RTX not shown .

4. The GSMS module of the RTX receives the MO SMS and processes it for all recipients including B s handset . In doing so it determines that user B also runs a Web Client and thus looks up the Location Server to determine which Content Server stores B s data.

5. The RTX stores a copy of the GSMS notification in the Content Server along with the rest of B s data.

7. The Presence Server creates and sends a SIP NOTIFY request to B s Web Client . The NOTIFY request indicates that B s data has changed on the Content Server . This NOTIFY message is sent in the SIP SUBSCRIBE dialog created for presence and data change.

8. The Web Client receives the NOTIFY request and sends a SIP 200 Ok response to complete the transaction.

10. The Web Server sends a HTTP 200 Ok response with the changed data wherein the changed data includes the new GSMS notification.

The RTX delivers other connected service notifications in the same manner as shown in messages to in the GSMS message flow of .

1. The Web Client sends a HTTP request to the Web Server to retrieve the various data for display. This may include contacts groups group members are downloaded when a group is opened and are retained in memory thereafter one or two screens worth of message notifications older notifications are downloaded upon user request . For VSMS only the notifications are downloaded the audio data is downloaded and played when the user opens the message to listen to the message.

2. The Web Server retrieves the requested data from the Content Server and includes them in the message body of an HTTP 200 Ok response.

3. User A adds a contact on the handset . The handset sends a SyncML request to the SyncML Server with the added data.

4. The SyncML Server interacts with the Content Server to retrieve and add the new data and then stores the modified data back into the Content Server .

6. The Content Server detects the change in user A s data and triggers the Presence Server to send a SIP NOTIFY message to the Web Client .

7. The Presence Server sends a SIP NOTIFY message to the Web Client through A s Registrar SIP Proxy . The SIP NOTIFY is sent within the SUBSCRIBE dialog created earlier by the Web Client for presence and data change.

8. The Web Client receives the SIP NOTIFY request and sends back a SIP 200 Ok response to the Presence Server through the Registrar SIP Proxy .

10. The Web Server retrieves the changed data from the Content Server and returns them in the HTTP 200 Ok response.

11. User A deletes a notification message from the Web Client . This notification happens to be marked as visible on the handset . The Web Client creates and sends a HTTP request to the Web Server to delete the notification.

12. The Web Server accesses the Content Server and marks the notification message for deletion. It then sends a HTTP 200 Ok response to the Web Client to indicate successful deletion of the notification message.

13. The Content Server detects the data marked for deletion initiated by the Web Client . It checks whether the data to be deleted is marked as visible on the handset .

14. Since the data is marked as visible on the handset the Content Server triggers the SyncML Server to update the handset .

15. The SyncML Server sends a SyncML request to the handset to update its data specifying the deleted notification.

16. The handset updates its data and sends a SyncML response back to the SyncML Server to indicate successful completion of the request.

The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not with this detailed description but rather by the claims appended hereto.

