---

title: Central place indexing systems
abstract: Spatial location systems can be based on multi-resolution grids such as mixed aperture combinations of hexagonal cells. A particular finest resolution can be selected based on a suitable combination of intermediate grid apertures such as arbitrary combinations of aperture 3, aperture 4, and aperture 7 hexagons. Location identifiers can be uniquely assigned by generating child cells from a parent cell so that the generated child cells do not overlap child cells of other parent cells. One or more child blocks can be used at any resolution to avoid such overlap. For aperture three and aperture four hexagonal cells, blocks of four and three child cells, respectively, can be used to provide unique location identifiers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09311350&OS=09311350&RS=09311350
owner: State of Oregon Acting By and Through the State Board of Higher Education on Behalf of Southern Oregon University
number: 09311350
owner_city: Ashland
owner_country: US
publication_date: 20101028
---
This is the U.S. National Stage of International Application No. PCT US 2010 054550 filed Oct 28 2010 which was published in English under PCT Article 21 2 which in turn claims the benefit of U.S. Provisional Application No. 61 280 070 filed Oct 28 2009. The provisional application is incorporated by reference herein in its entirety.

The present disclosure relates to multi resolution spatial data structures and location coding therefor using pure and mixed aperture polygonal relationships.

Spatial data structures typically assign a location representation or location code to each data object in a computer program. Structured spatial data structures often use integer location codes which encode location information in such a way that discrete integer operations on these location codes can replace or act as approximate surrogates for more computationally expensive operations on traditional floating point location representations such as real number coordinate pairs on the two dimensional plane or geographic coordinates on a spheroid. Structured spatial data structures have been used for many common spatial data applications including indexing spatial databases representing vector and raster data and graph data structures.

By far the most widely studied and commonly used structured spatial data structure is the square quadtree. The quadtree can be defined in a number of equivalent ways. A high resolution grid of square cells can be recursively aggregated in groups of 4 squares to form successively coarser resolution cells. Conversely a coarse resolution base cell can be recursively subdivided into 4 smaller child squares. A hierarchical quadtree indexing can be formed by assigning a base address to each coarse base cell and forming the address of child and descendent cells by concatenating one of the additional digits 1 4 to the parent cell index where the digits are chosen in a geometrically consistent fashion. The resulting indices can be arithmetically and algebraically manipulated to provide efficient versions of important operations such as vector addition and metric distance.

Structured spatial data structures based on hexagonal cells can be superior to square grids under many comparison metrics. For example planar hexagonal grids are the most efficient location quantizer have the best angular resolution and the cells display uniform neighbor adjacency. Further a discrete metric distance on a hexagonal grid is a better approximation to distance on the real number plane enabling more efficient coarse filtering of spatial proximity queries. But unlike the square quadtree which can be defined equivalently via aggregation or recursive partition multiple resolutions of hexagonal cells cannot be created by simple aggregation of atomic pixels nor by recursive partition.

Additional background information relating to modified generalized balanced ternary MGBT aperture three hexagon trees A3HT and hierarchical location coding methods for geospatial computing on icosahedral aperture 3 hexagon discrete global grid systems DGGS can be found in U.S. patent application Ser. No. 11 038 484 filed Jan. 21 2005 and U.S. patent application Ser. No. 12 897 612 filed Oct. 4 2010 both of which are incorporated by reference herein in their entireties.

Disclosed herein are several examples of multi resolution indexing. Generally multi resolution coordinates can be assigned in arbitrary combinations depending on application requirements such as resolutions of various indexing levels. In some examples grids based on aperture 3 aperture 4 and aperture 7 can be provided in any order such as 3 4 7 7 4 3 4 3 7 and produce a common grid at a finest resolution. In addition a finer resolution grid can be produced without providing one or more lower resolution grids. Coordinate values can be assigned in a layer of any aperture based on a user preferred coordinate assignment. Examples described herein show representative arrangements of uniquely assigned aperture 3 4 and 7 children. Any method that assigns to a parent its center child cell and some subset of the vertex edge child cells can be used and the illustrated examples that tend to be more symmetrical than many other examples are selected for convenient explanation.

In exemplary methods mixed aperture polygons are established by specifying a first polygon having a first center point and specifying a second polygon having the first center point the second polygon being a first aperture child of the first polygon. A third polygon is specified having the first center point the third polygon being a second aperture child of the second polygon wherein the first and second apertures are selected from a group consisting of aperture 3 aperture 4 and aperture 7 and the first aperture is different than the second aperture. In some examples a location identifier is assigned that is associated with an object located within an area defined by the third polygon the location identifier being based on the first second and third polygons and the first and second apertures. In some examples the location identifier associated with the third polygon is stored in integer code form modified integer code form or packed code form. In further examples the first second and third polygons are centered on a vertex of a triangulated two dimensional manifold and the first polygon is a voronoi area of the vertex relative to other vertexes of the manifold. In some examples the manifold is a triangle faced regular polyhedral or an arbitrary two dimensional triangulated manifold with unequal edges. In some examples the first second and third polygons are hexagons and at least one of the second and third polygons is rotated 30 or about 19 with respect to its parent polygon. In additional examples the third polygon has the same size rotation and position relative to the first polygon if the first and second apertures are reversed.

Additional methods comprise specifying a first cell size and specifying a second cell size that is larger than the first cell size. One or more intermediate cell sizes are specified each being larger than the first cell size and smaller than the second cell size. Each of the first cell size and the intermediate cell sizes comprises a respective size ratio relative to a next largest cell size the next largest cell size being one of the intermediate cell sizes or the second cell size the size ratios not being all the same. A cell grid is assigned to an area wherein the cell grid includes at least one cell of the first cell size the intermediate cell sizes and the second cell size. In some examples the size ratios are area ratios chosen from a group comprising 1 3 1 4 and 1 7. In other examples ratio can be based on a linear cell dimension. For example for regular polygons alternative linear dimension ratios can be selected from the group consisting of 7 4 3. In other examples the first second and intermediate cell sizes correspond to an area of a hexagon. In further examples the first cell size corresponds to a desired minimum resolution of a multi resolution central place indexing system and the second cell size corresponds to a maximum resolution of the multi resolution central place indexing system.

Apparatus comprise at least one computer readable medium and a processor. The processor is configured to establish an object location with reference to a multi aperture grid based on computer executable instructions stored in the at least one computer readable medium. In some examples the processor is further configured to assign a unique location code to the object. In other embodiments the processor is further configured to establish at least a portion of the multi aperture grid by generating non overlapping cells and provide a unique location code based on at least one non overlapping cell. In other representative examples the processor is configured to establish at least a portion of the multi resolution grid based on aperture 3 child cells and to associate three child cells with aperture three base cells so as to provide a unique location code for the object location. In still further examples the processor is configured to establish the multi resolution grid with respect to a spherical surface.

The foregoing and other features will become more apparent from the following detailed description which proceeds with reference to the accompanying figures.

As used in this application and in the claims the singular forms a an and the include the plural forms unless the context clearly dictates otherwise. Additionally the term includes means comprises. Further the term coupled does not exclude the presence of intermediate elements between the coupled items.

The systems apparatus and methods described herein should not be construed as limiting in any way. Instead the present disclosure is directed toward all novel and non obvious features and aspects of the various disclosed embodiments alone and in various combinations and sub combinations with one another. The disclosed systems methods and apparatus are not limited to any specific aspect or feature or combinations thereof nor do the disclosed systems methods and apparatus require that any one or more specific advantages be present or problems be solved. Any theories of operation are to facilitate explanation but the disclosed systems methods and apparatus are not limited to such theories of operation.

Although the operations of some of the disclosed methods are described in a particular sequential order for convenient presentation it should be understood that this manner of description encompasses rearrangement unless a particular ordering is required by specific language set forth below. For example operations described sequentially may in some cases be rearranged or performed concurrently. Moreover for the sake of simplicity the attached figures may not show the various ways in which the disclosed systems methods and apparatus can be used in conjunction with other systems methods and apparatus. Additionally the description sometimes uses terms like produce and provide to describe the disclosed methods. These terms are high level abstractions of the actual operations that are performed. The actual operations that correspond to these terms will vary depending on the particular implementation and are readily discernible by one of ordinary skill in the art.

This disclosure relates to multi resolution polygon systems including defining indexing and storing the systems and focuses on systems called Central Place Indexing or CPI systems. CPI systems can provide uniform hierarchical structured spatial location coding for multi resolution pure and mixed aperture 3 4 and or 7 polygonal usually hexagonal systems including in relation to triangulated manifolds. Such methods are generally implemented on one or more computer based processing systems as described in further detail below.

The disclosed grids can be conveniently arranged so as to completely cover a surface. Such coverages can be referred as tessellations. However in many practical examples only selected portions of a surface are covered and gaps between grid elements can be tolerated. Such arrangements can be referred to as incomplete tessellations.

Sequences of grids that include arrays of finer and coarser grids can be described based on one or more elements that are repeated to form the grid for example hexagons pentagons or combinations thereof and areas of the next finer grid elements. For example for grids formed of hexagons finer grids can be defined from a grid of initial or parent hexagons based on child hexagons having areas of and 1 7 of the area of a parent hexagon. Some such finer grids are referred to as aperture 3 A3 aperture 4 A4 and aperture 7 A7 respectively based on area scaling. In other examples some finer grids are based on scaling of linear dimension ratios by factors such as 7 4 3 corresponding to apertures A7 A4 A3 respectively. In the disclosed examples grids are described with respect to regular or irregular polygons such as hexagons pentagons triangles or other regular or irregular shapes. For convenience such grid elements are also referred to as cells and if generated based on a larger or smaller cell can be referred to as a child cell or a parent cell respectively.

Note that in each case described above seven hexagonal children can be assigned or tessellated into a block without open spaces between the children and the block has an area at least as great as the area of the parent. Each block also includes a child hexagon that is concentric with its parent hexagon. In each case one or more hexagons can be further tessellated to form a grid of hexagons without open spaces between hexagons. Furthermore these A3 A4 and A7 parent child relationships can be recursively applied to create finer decedent hexagons. For convenience in the following description each different size of hexagon in a grid is referred to herein as a resolution. If each different resolution in a multi resolution grid has the same aperture relationship to the next finer resolution then the grid can be referred to as pure grid. If a grid includes more than one aperture relationship then the grid can be referred to as a mixed aperture grid.

For example referring to the hexagons can be considered r A children of the rhexagons and intermediate resolution hexagons can be eliminated. In general given a sequence of intermediate apertures and rotations that generate a higher resolution grid from a base resolution grid that higher resolution grid can be generated directly without generating intermediate resolution grids by starting with the base resolution grid scaling the base grid cell area by the inverse of the product of the intermediate apertures and rotating it by the summation of the intermediate rotations. The geometry of the resulting grid is independent of the order in which the intermediate apertures are applied to the base grid any sequence consisting of the same number of each aperture rotation choice can be used to generate the same resulting grid.

As shown in seven A3 children of parent hexagon cover an area greater than the area of the parent hexagon. Thus if adjacent hexagons in a grid having the resolution of the parent hexagons each generate a block of seven child hexagons then there could be considerable hexagon overlap. For example each of the child hexagons centered on a vertex of a parent hexagon would overlap child hexagons of other parent hexagons. Such overlap can make unique indexing difficult. To avoid overlap subsequent resolutions can be configured so that each parent hexagon generates three A3 child hexagons. For example as shown in parent hexagon is used to generate three A3 children a concentric child and two vertex children . Additional A3 child hexagons are centered on a vertex of the parent but are A3 children associated with neighboring parent hexagons and not the parent hexagon . For convenient illustration the A3 child hexagons are show as a block in .

Although not shown in the three child block could alternatively comprise other groups of child hexagons such as hexagons and or hexagons and to form other tessellatable patterns. Any three child block desirably includes the center child but does not need to.

Partial tessellations can also be based on A4 and A7 apertures as shown in . As shown in a parent hexagon generates four A4 child hexagons a concentric child and three edge children . Hexagons and are centered on an edge mid point of the parent but are A4 children generated by other neighboring parent hexagons that are not shown in . The block of A4 children of parent is bolded and labeled . shows a partial tessellation in which a parent hexagon generates four A4 children a concentric child and three edge child hexagons . Hexagons are centered on an edge mid point of the parent but are A4 child hexagons generated by other neighboring parent hexagons. A block includes the A4 child hexagons of the parent hexagon . The block can be preferred to the block of as the block is more geometrically centered with respect to its parent hexagon.

With reference to a partial tessellation includes parents and four child blocks similar to the blocks of . The child blocks can be fit together geometrically without spaces and each child hexagon is uniquely associated with only one parent and does not overlap with other child hexagons. shows a partial tessellation of parents and four child blocks that are similar to the block of .

For both A3 and A4 two or more child block patterns can fit together geometrically so as to completely cover an area without gaps. represents one example for A3. While the example in comprises two block types having differing numbers of child cells other exemplary tiling patterns can comprise two or more different block types having the same number of child cells. For example the A4 child blocks shown in could be mixed together so as to completely cover an area without gaps. Many other mixed child block patterns can also be defined for any given resolution in a grid system. Different resolutions of the same aperture can also comprise different child block patterns. For example one A4 resolution can comprise a combination of the child block patterns shown in while another A4 resolution in the same grid system can comprise a combination of the block patterns shown in III and IV . Thus any system of grouping child cells into blocks such that every child cell is associated with one of the parent cells can be used.

It should be appreciated that in each of the examples shown above the generation of child blocks can be iterated recursively to produce finer and finer resolutions until a desired resolution is achieved. In addition at each resolution a different aperture different rotation and or a different child block pattern can be applied. It should also be appreciated that similar child generation patterns can be accomplished with other polygons such as triangles squares and pentagons and combinations of different polygons. In addition the polygons can be irregular having edges of unequal lengths.

Rather than starting with a coarsest base cell or a grid of base cells and generating successively finer resolutions of child cells groups of finer resolution cells can be aggregated into coarser cells using the same concepts as discussed above but in reverse. For example the seven smaller hexagons in could be defined first and then aggregated to generate the larger hexagon . Furthermore intermediate resolution cells can be first defined and then both coarser and finer resolutions of cells can be generated from the intermediate resolution cells. For example in the hexagons can be defined first and then the hexagons can be aggregated to generate the coarser resolution hexagons and can also generate the finer resolution hexagons .

Alternatively two or more independent resolutions of cells can be first defined such as a coarsest resolution and a finest resolution. Combinations of intermediate resolutions of different apertures can then be calculated to best represent a generational series that allows one of the independent resolutions to be generated from one another. For example in the coarsest resolution hexagons and the finest resolution hexagons can be defined first. Then because the hexagons are 1 84 of the area of the hexagons intermediate resolutions can be calculated such that the product of their apertures equals 84. As noted above the product of 3 4 7 is 84 so any order of these apertures would allow the hexagons to be generated from the hexagons . In some situations there may not be a perfect combination of apertures that unites two independent resolutions in which case a different independent resolution can be selected for at least one of the two independent resolutions.

In addition to defining a multi resolution pure or mixed aperture grid as described above each of the cells in such a grid can also be indexed i.e. assigned an address that can be stored. A representative indexing method is described below.

Starting with a coarsest resolution of cells referred to in this example as resolution 0 cells or base cells each base cell is assigned a unique address such as an integer 1 2 3 4 etc. For example in the coarsest hexagons such as the hexagon can be base cells and each of the base cells can be assigned a unique integer address 1 2 3 etc. These base cell addresses can be arranged in any convenient pattern. For example in hexagon can be addressed as 1 and the six neighboring hexagons of the same size not shown can be addressed as 2 through 7 . Next for each base cell an index consisting of the index of the address of the parent base cell with one of the digits 0 6 appended is assigned to its concentric child cell and to each of its other six child cells i.e. resolution 1 cells . For example in for base hexagon which was given an address of 1 the concentric child hexagon is assigned an index of 1 0 the six vertex child hexagons are assigned indices 1 1 through 1 6 . Likewise for a base hexagon adjacent to the hexagon assigned an address of 4 the seven child hexagons are assigned addresses 4 0 through 4 6 .

Similarly for each resolution 1 cell an index consisting of the index of the address of the parent base cell with one of the digits 0 6 appended is assign to its concentric child cell and to each of its other six child cells i.e. resolution 2 cells . For example in for the resolution 1 hexagon which was given an address of 1 0 its concentric child cell is assigned an index of 1 0 0 its six vertex child cells are assigned indexes of 1 0 1 through 1 0 6 . Likewise for the resolution 1 hexagon which is assigned an address 1 6 its seven children are assigned addresses 1 6 0 through 1 6 6 . In general given a resolution k cell P the resolution k 1 cell P centered on P and each of the resolution k 1 neighbors of P can be assigned an index consisting of the index of P with one of the digits 0 6 appended.

Because some of the k 1 resolution cells in aperture 3 or 4 grid resolutions overlap multiple resolution k cells the above method will assign multiple indices to some of the resolution k 1 cells. If a unique index is desired for a resolution k 1 cell P any one of the indexes generated can be chosen as the cell index and other indices disregarded. Typically a resolution k cell having an index P generates a resolution k 1 cell that is centered on it or shares the same center point and this k 1 resolution cell can be associated with an index based on the index P of the parent cell. The resolution k 1 cells situated on vertices or edges of resolution k cells can be assigned to resolution k indexing parents by various methods.

For A3 grids shows one possible assignment of three resolution k 1 child cells to a resolution k indexing parent note that similar tiling blocks to the block can be formed by 60 rotations of the tiling block . In this example if the cell is assigned an address 9 then the cell can be assigned an address of 9 0 the cell can be assigned the address 9 1 and the cell can be assigned the address 9 2 . The cell is indexed with reference to a parent cell to the right of the cell the cell is indexed with respect to a parent cell to the left of the cell etc. as is shown in .

For A4 grids shows one possible assignment of four resolution k 1 child cells to a resolution k indexing parent note that similar tiling blocks can be formed by 60 rotations of this tiling block . In this example if cell is assigned an address as 12 then the cell can be assigned an address 12 0 the cell can be assigned the address 12 1 the cell can be assigned the address 12 2 and the cell can be assigned the address 12 3 . The cell is indexed by a parent cell to the upper right of the parent cell the cell is indexed by a parent cell to the lower right of the cell etc. as is shown in . Alternative A4 index assignments can be based on A4 child blocks as illustrated in .

For A7 grids the seven children have the same total area as the parent and the seven children of each parent do not overlap with the children of any other adjacent parents. Thus there is no need to define special child blocks consisting of less than all seven children in order to provide unique addresses. Each parent can index seven children as 0 6. For example in if the parent cell is addressed as 3 then the concentric child cell can be assigned the index 3 0 and each of the other child cells can be assigned indices 3 1 through 3 6 .

A resolution k 1 digit value of 7 can be used to indicate address termination such as in a variable length index scheme or can be used to indicate that all finer resolution cells are centered on their geometrical parent cells such as in a fixed length index scheme. For example in an address of 1 6 7 for the cell can indicate that the digit 6 is the end of the address. Alternatively the digit 7 can indicate that the cell is of the finest resolution and or has no children.

Once the CPI cell geometry is defined and the CPI indexes also referred to as location codes or addresses are assigned to the cells the CPI indexes can be stored using any suitable coding form. Some examples include the following a character string code form an integer code form a modified integer code form and a packed code form. Coding is more fully discussed in U.S. patent application Ser. No. 11 038 484 and U.S. patent application Ser. No. 12 897 612 that are both incorporated herein by reference. The combination of a grid topology and an indexing scheme can define a CPI system.

The topology and location coding of CPI systems on ideal CPI manifolds are discussed next. An ideal CPI manifold is a triangulated 2 dimensional 2D manifold with equal length edges connecting adjacent vertices to create planar triangle faces and where each of the vertices has a valence of at most 6. Some ideal CPI manifolds include a regular triangular lattice on the plane see lattice in and triangle faced regular polyhedra such as the icosahedron see . By contrast an arbitrary triangulated two dimensional manifold can comprise irregularly shaped triangles and unequal lengths between adjacent vertices such as triangulated irregular networks or stellated polyhedra.

A CPI system defined in relation to an ideal CPI manifold can be applied to arbitrary triangulated two dimensional manifolds by defining an appropriate mapping between these manifolds and a topologically equivalent ideal CPI manifold. For example a CPI hierarchy or multi resolution cell geometry can be constructed on an arbitrary two dimensional triangulated manifold by defining a mapping e.g. bilinear interpolation between one or more of the irregular triangles adjacent to each vertex and the corresponding equilateral triangle on a topologically equivalent ideal CPI manifold.

Similarly CPI systems can be defined in relation to triangulations of a curved or non planar 2D surface by defining a mapping between the curved triangles and an ideal CPI manifold. One example of this is the use of CPI systems to define and index pure and mixed aperture hexagonal discrete global grid systems DGGS . In one example a CPI system can be implemented using the projection of the Earth s surface such as the Fuller projection to map planar triangles of an icosahedron an ideal CPI manifold to the spherical triangles of a spheroid or ellipsoid representation of the Earth s surface see for example .

More specific definitions of a CPI system with respect to an ideal CPI manifold can be established. In one example a cell in resolution k of a CPI system defined in relation to an ideal CPI manifold M includes the following 

1. a point on M that is either a vertex of M if k 0 or introduced through generation of subsequent resolutions of the CPI system if k 0 .

2. the polygonal voronoi area on M associated with that point where the voronoi is defined relative to all other resolution k cell points.

3. a generator that specifies the geometry generator types and location coding of all resolution k 1 cells that are children of this cell in the hierarchy defined by the CPI system.

With reference to a cell is defined as described above. A lattice corresponds to an ideal CPI manifold M wherein axes and are evenly spaced 120 apart and the plane is tiled with equilateral triangles. The point of M can be an origin which is a vertex on M. The cell can be a base tile of a CPI system in a resolution 0. Notice that the cell defines a voronoi area on M wherein every point within the cell is closer to vertex than to any other vertex on M and each edge of the cell is equidistant from the vertex to one of the adjacent vertices and .

2. a sequence of apertures 3 4 and or 7 that define the topology of each finer resolution in the system. For apertures 3 and 7 a direction of rotation is also specified.

The cells at all resolutions of the CPI system can then be geometrically defined and indexed by recursive application of the generator rules at each resolution.

As used herein a discrete coordinate system with three natural axes of a hexagonal topology and with a vertex of M as its origin can be referred to as an ijk coordinate system. The axes and the origin of are a representative example. shows another example of an ijk coordinate system comprising an origin i axis 1720 j axis and k axis . Note that in both of these examples one of these axes is redundant so there are multiple equivalent coordinate triplets for each hexagon. For example in hexagon be assigned coordinate triplets 1 0 1 or 0 1 0 hexagon can be assigned triplets 0 1 1 or 1 0 0 and hexagon can be assigned triplets 1 1 0 or 0 0 1 . Even hexagon can be assigned triplets other than 0 0 0 such as 1 1 1 .

The ijk coordinates i j k of an arbitrary ijk coordinate triplet i j k can be determined based on the following computer executable instructions 

In a so called ij coordinate system each hexagon can be assigned the smallest magnitude coordinates relative to the i and j axes the k component in an ij coordinate system is always zero. The ij coordinates i j k of an arbitrary ijk coordinate triplet i j k are given by the following algorithm 

A cell in an ij coordinate system in which a point on the real number plane is contained i.e. a spatial location can be obtained by the following procedure wherein the origin of the two systems coincide the i axis of the ij coordinate system coincides with the x axis of a Cartesian coordinate system and the distance between adjacent cells in the ij coordinate system corresponds to one unit in the Cartesian coordinate system 

The center point of a cell in ij coordinates can be converted to Cartesian coordinates using the following algorithm where the origin of the two systems coincide the i axis of the ij coordinate system coincides with the x axis of the Cartesian coordinate system and the distance between adjacent cells in the ij coordinate system corresponds to one unit in the Cartesian coordinate system.

Returning to when a single base cell is formed on a vertex of M with a valence of 6 such as vertex the resulting voronoi cell on an ideal CPI manifold will be a planar hexagon. The central place children of a valence 6 resolution b parent cell cconsist of an appropriately scaled and rotated resolution b 1 cells centered on c and six adjacent resolution b 1 cells. In the case of A3 the central place children of chave the area of cand are rotated 30 counter clockwise or clockwise relative to c. For example in a hexagon can be the parent cell and its A3 central place children are a center child and vertex children which are each the area of cell and rotated 30 relative to cell . As shown by angle the central place children of cell are rotated 30 clockwise such that an i axis rotates to the rotated axis .

For A4 the central place children have the area of cand will not be rotated. For example in a hexagon can be the parent cell and its A4 central place children are a center child and edge children which each have the area of the parent hexagon and are not rotated relative to the parent cell .

For A7 the central place children will have 1 7 the area of cand will be rotated by asin sqrt 3.0 28.0 degrees approximately 19.1 counter clockwise or clockwise relative with respect to the parent cell. For example as shown in a hexagon can be the parent cell and its A7 central place children are a center child and children each of which has an area that is 1 7 the area of the parent hexagon and are rotated about 19.1 clockwise relative to the parent hexagon . The central place children of cell are rotated by an angle clockwise from i axis to a rotated axis .

Note that the same central place children are geometrically generated by clockwise and counter clockwise rotations in aperture A3 but not aperture A7 . These will however generate different indexings as described below.

This process can be applied recursively at resolutions b 2 b 3 etc. until a desired resolution is achieved by choosing the appropriate apertures and rotations for each resolution as given in a CPI system specification. The resulting set of cells at resolution r where r b is called the resolution r Christaller set of c. illustrates resolution b 3 Christaller sets generated by some representative pure and mixed aperture sequences. Sets I II and III show resolution b 3 Christaller sets generated by pure A3 A4 and A7 sequences respectively in which all A3 and A7 resolutions are associated with counter clockwise rotations. Sets IV and V show resolution b 3 Christaller sets generated by representative mixed aperture sequences as specified.

An integer location code or codes can be assigned to a resolution r where r b cell cin the Christaller set of cas follows. A location code of ccan be formed of a prefix which is an integer location code of c with a single digit concatenated to it for each resolution from b 1 to r inclusive. Since each cell has 7 central place children the digits 0 1 2 . . . 6 are a convenient choice for these additional digits. The assignment of digits should be geometrically consistent and can be specified by assigning each digit to a child relative to that child s position in a local coordinate system at that child s resolution. One assignment which is used hereinafter is shown in . In a center cell is assigned the digit 0 a first cell in a k direction is assigned a digit 1 a first cell in a j direction is assigned a digit 2 etc. This digit assignment can be applied at multiple resolutions and defined relative to the ijk coordinate system at each resolution.

The CPI index or indices for care formed by following one or more of the hierarchical path s through the Christaller set of cthat generate c. The resulting location code s are called CPI indexes of c.

In order to complete a CPI system specification using valence 6 hexagonal base tiles a formal definition of the cell generators need to be defined. Since each cell in a CPI system has at most 7 children the generator for a resolution b cell ccan be specified as a string of 7 values ggggggg where each gspecifies the generator associated with the i digit child of c as defined above . Using this notation the Cgenerator can be defined as C CCCCCCC

A planar CPI system can then be specified as follows. Base tile cell points can be defined as vertices of a regular triangular lattice and each base tile can be assigned the Cgenerator. Then a sequence of A3 counter clockwise and or clockwise A4 and or A7 counter clockwise and or clockwise can be defined. Each resolution r of the Christaller set of ccan be created using a consistent scaling and rotation across all cells at that resolution relative to the previous resolution r 1. Thus all resolution r cells lie on a regular hexagonal grid which is scaled by the product of the resolution b 1 to r scaling factors and rotated by the sum of the resolution b 1 to r rotations as illustrated for example in .

A scaling factor sfor resolution r relative to resolution 0 in a CPI system with aperture sequence A wherein Adesignates the aperture of resolution q is given by 

Given a base cell cand the CPI index of a resolution r cell cin the Christaller set of c coordinates of ccan be determined in the resolution r ijk coordinate system as given in procedure cpiToIjk below. The algorithm assumes that the first resolution 0 character in the CPI index string parameter indicates the base tile c. Note that definitions of all procedures used by this procedure are given below the procedure definition.

Conversely given a CPI system and resolution r ijk coordinates of a cell c a CPI index string for ccan be specified as given in procedure ijkToCpi below. In the case of A3 and A4 resolutions the parent cell is chosen so as to minimize the magnitude of the parent s ijk vector. Note that definitions of all procedures used that have not been previously defined are given below the procedure definition.

Given a resolution r cell specified with a CPI index in a specific CPI system Cartesian coordinates for the center point of the specified cell can be determined by the following exemplary steps 

Given a specific CPI system the CPI index for the resolution r cell in which a point on the real number plane is contained can be determined by the following exemplary steps 

1. Translate the point so that the origin of the Cartesian coordinate system in which it is defined coincides with that of the CPI system 

2. Scale the point so that one unit in the Cartesian system corresponds to the distance between adjacent hexagons in resolution r of the CPI system 

3. Rotate the point so that the x axis of the Cartesian coordinate system coincides with the i axis of resolution r of the CPI system 

4. Apply procedure xyToIj to determine the ij coordinates of the resolution r cell in which the point is contained 

5. Apply procedure ijToIjk to determine the ijk coordinates of the resolution r cell in which the point is contained and

6. Apply procedure ijkToCpi to produce a CPI index for the resolution r cell that contains the point.

As previously noted hierarchical generation using Cgenerators under aperture sequences that include A3 and or A4 can result in the assignment of multiple equivalent indices to some of the cells. For many uses including unique geometric generation of cells it is convenient to use generators that will generate index each cell uniquely. For A7 this is automatic.

For an aperture A3 or A4 generators can be defined that generate the central 0 digit central place child and 1 of the other 6 central place children where each such generator can tile the ideal CPI manifold. For example illustrate possible single generators unique under 60 rotations for counter clockwise A3 and A4 resolutions respectively with their corresponding string representations. In the string representation of generators a child cell that is not generated is indicated by replacing a generator specification with the corresponding digit. G is used to indicate an arbitrary generator type.

Note that the algorithm cpiToljk can be used without alteration for any of these generator types. The algorithm ijkToCpi requires modification for specific generator types so that ungenerated cells at each resolution are assigned to the appropriate adjacent parent cell and with the appropriate digit for that new parent cell.

Other generators or sets of generators that tile the plane can also be used. For example the A3 Hexagon Tree A3HT uses two generator types to uniquely generate A3 resolutions while preserving the full hexagonal symmetry of the generated Christaller set.

The algorithm rotate60 which follows performs a 60 degree counter clockwise rotation of a cell specified as a CPI index string about a hierarchical indexing parent of that cell specified as an arbitrary resolution index prefix of the cell s index.

Common vector operations such as addition translation multiplication scaling and calculating metric distance can be performed on CPI index strings by first converting the vector operands into ijk coordinates by applying algorithm cpiToIjk performing the desired operation in ijk coordinates and then converting the resulting ijk vector to a CPI index string by applying algorithm ijkToCpi.

The consistent indexing patterns shown in can allow for index addition for hexagonal CPI A3 A4 and A7 grids respectively. Index addition can be performed using the look up tables shown below. The left hand column and the top row of each table indicate the digit of the each cell being added together.

For example with reference to and Tables 1A and 1B in order to add the hexagon and hexagon first the index digit for each hexagon is identified. Hexagon has the index digit 4 and hexagon has the index digit 1. Next these digit values are applied to Tables 1A and 1B by referring to row 4 column 1. Tables 1A and 1B give the resulting sum of 5 which indicates that the sum of the hexagons and is the hexagon with the index digit 5 which is cell in . Similarly the sum of hexagon and hexagon again hexagon multiplied by 2 is given in Table 1A by reference to the intersection of row 4 and column 4 or a sum of 45 56 corresponding to a hexagon to the lower right of the hexagon . The result 45 56 indicates two optional indices for that cell either as a digit 5 CPI child of a larger base tile 4 to the right of the hexagon or as a digit 6 CPI child of a larger base tile 5 to the lower right of the hexagon . Tables 1A and 1B are for A3 with clockwise CW rotation and Tables 2A and 2B are for A3 with counterclockwise CCW rotation.

The second set of results in Tables 1B 2B and 3B shows all dual possible results resolved in favor of A7 clockwise carry values.

Subtraction multiplication other mathematical functions can also be performed in a similar manner. For example an application can bitwise complement the second operand to negate it and then add to perform subtraction.

Similar functions can be used to calculate a metric distance between two hexagons among other useful application. For example a metric distance function can include the following steps 

CPI systems can also be defined on vertices with valences of less than 6. These can be defined by embedding them onto a connected set of valence 6 vertices and then assigning to them generators that do not generate all of the sub sequences of a complete valence 6 Christaller set.

For example the Cgenerator which generates the complete Christaller set for a valence 5 vertex can be designated as C CCC3CCC. Thus cell having index 0 is used with generator C the cell having index 3 is not used to generate children and cells with other indices are used with generator C.

In the Cgenerator a single sub sequence is chosen for non generation. As defined above the sub sequence associated with digit 3 can be chosen arbitrarily. The specific sub sequence for deletion can be chosen based on the needs of a particular grid construction and in any event the same Christaller set cells can always be re indexed with a different non generated sub sequence by performing a 60 degree rotation on the sub sequences that lie geometrically in between the current and desired choices. This also enables the construction of multiple valence 6 planar embeddings of portions of a non valence 6 manifold for the construction of particular algorithms. For example a separate localized embedding can be constructed for each triangular face of a manifold such that the Christaller set of each of the three adjacent vertexes fully covers that face on the plane this allows points that lie on that face to be assigned CPI indexes using the algorithms defined above.

Similarly the Cgenerator which generates the complete Christaller set for a valence 4 vertex can be designated by not generating two of the sub sequences of the full valence 6 Christaller set in this case those associated with digits 3 and 4 as follows C CCC34CC and so forth to create the Christaller sets of vertices with lesser valences.

Just as in the case of valence 6 vertices note that in aperture sequences that include A3 and or A4 some of the cells in the Christaller set will be geometrically generated and indexed multiple times. Generators that assign unique cell indexes and that maintain the full hexagonal symmetry of the base tiles such as A3HT can be used directly with vertices of any valence simply by not generating the appropriate number of sub sequence s under these generators as was done above with the full Christaller set. Other generators may need to be adapted to the particular symmetries associated with the underlying manifold. An example of this are the grids shown in which provide a unique indexing for a mixed A3 and A4 CPI system defined on the valence base tiles associated with the vertexes of an icosahedron.

CPI systems can be used to index three dimensional surfaces such as spheroids and ellipsoids as well as planar surfaces. The A7 hexagonal aggregation system known as Generalized Balanced Ternary GBT is a widely used hierarchical indexing system for planar hexagonal grids because GBT maintains the full symmetry of the hexagon across all indexing resolutions. GBT can also be extended to a spherical topology to create a discrete global grid system DGGS . This can be accomplished by centering Cgenerator base cells with appropriate sub sequences chosen for non generation on each of the valence 5 vertices of an icosahedron and then using an icosahedral projection to project the resulting grid onto a sphere or ellipsoid to create a DGGS. This is illustrated in

This grid system is designed to achieve a finest resolution having an intercell spacing of approximately 500 meters which cannot be achieved with sufficient accuracy using a pure aperture grid system. Additionally to take advantage of pre existing discrete global grid software tools the cells are hierarchically indexed in such a manner that the indexing descendants of a single base cell are restricted to a single ij coordinate system whose axes form two of the edges of a spherical quadrilateral formed by a pair of adjacent triangular icosahedral faces.

As shown in each resolution 0 base cell overlaying a vertex of the triangular manifold such as hexagon is associated with the two triangle quadrilateral to the right of it. In the case of hexagon it is associated with quadrilateral to the right of hexagon . Each quadrilateral can be made up of two triangles. For example quadrilateral is made up of triangles and see . The associated quadrilateral is called the footprint region of the resolution 0 base cells shown in . Each cell within the footprint region of the associated base cell will have that base cell s index as the first two digits of that cell s index. Base cells and index only a single cell at all resolutions centered on the corresponding base cell. Note that all cells that are centered on a triangle vertex are actually pentagons on the sphere.

When is folded up to form the icosahedron of each of the quadrilaterals and meet together to form an vertex of the icosahedron covered by resolution 1 hexagon . Resolution 1 hexagon becomes a neighbor of hexagons and .

This grid system is constructed by centering base cells of valence 5 i.e. with pentagonal voronoi areas on each of the 12 vertices of an icosahedron and then applying the following aperture sequence 

To assign a unique hierarchical index to each cell the generator types A K are defined with the following generator string representations 

Two of the base cells on opposing sides of the icosahedron are assigned generator type A while the remaining 10 base cells centered on the remaining 10 icosahedral vertices are assigned generator type B. The resolution 0 base cells and which are concentric with the resolution 1 cells and are the two base cells that are assigned generator type A which generates a single pentagonal cell at all resolutions.

1. If a planar grid is generated the grid cells and or their associated center points can be used to represent points areal pixels database buckets or graph nodes in any planar application.

2. If a polyhedral grid is generated any transformation such as a polyhedral map projection can be used to map the resulting grids onto the surface of a sphere ellipsoid or other topological equivalent such as represents a celestial body for example. The grid cells and or their associated center points can be used to represent points areal pixels database buckets or graph nodes on the sphere or topological equivalent. These can be used in any application where data is associated with locations on a topological sphere or which involves calculating algorithms associated with location on a topological sphere. These include geospatial computing systems including geographical information systems location based computing and in developing solutions for or in providing initial conditions for optimization solutions to Tammes problem for efficient spherical coding.

3. If a polyhedral grid is generated any transformation such as a polyhedral map projection can be used to map each resulting grid resolution k to the surface of a sphere Swith radius r where ris 

Finally as shown in the application maps the CPI system shown in onto an icosahedron such that each vertex of the lattice corresponds to a vertex of the icosahedron. The application can then map CPI indexes for each of the hexagon cells to locations on the icosahedron and store the relationships therebetween. If the icosahedron represents the Earth then the application can map locations on Earth s surface i.e. a city or a patch of land to one or more of the cells of the CPI system. Metric distances and other useful relationships between different portions of the Earth can also be calculated using the CPI system.

In one type of useful CPI application a finest resolution of cells and a coarsest resolution of cells can be defined first and then a combination of intermediate resolutions can then be calculated and or generated based on the finest and coarsest layers. For example if it is desirable that the finest resolution of cells corresponds to 1000 mpatches of the Earth s surface and the coarsest resolution of cells corresponds to 1 12 of the Earth s surface such as when representing the Earth s surface with 12 base cells on an icosahedron as in the intermediate resolution of cells can be calculated as a combination of A3 A4 and A7 resolutions that lead from the 12 base cells to a resolution wherein each cell has an area nearest to 1000 m.

In any application an object or a location is associated with one or more cells of a CPI grid it should be understood that the object or location need not be within or overlap the cell or cells associated with it. In some examples an object or location is associated with a CPI grid cell that removed that object or location. In some CPI systems similar to that shown in for example locations on the Earth s surface can be associated with CPI grid cells that are positioned generally to the left or to the west of the location. In addition even in situations where an object or location is within a finest resolution cell associated with the object or location the object or location may not be within other lower resolution cells associated with the object or location. Using as an example an object could be located within cell but not be located within its parent cell yet the object can be associated with both cell and .

The following is a brief summary of some exemplary advantages of CPI systems. Such systems can provide a uniform approach to hierarchically generating indexing and manipulating pure and mixed aperture hexagon grids including efficient algorithms for index addition subtraction neighbor finding and metric distance. For single resolution applications mixed apertures can permit fine control over grid resolution. For example in DGGS applications mixing apertures can give users more grid resolutions to choose from increasing the chances that a resolution exists that approximates the ideal grid resolution for a particular application in terms of grid cell size grid point spacing number of cells etc. Mixed apertures can allow for mixed resolution frequency. That is the spacing between resolutions need not be uniform. Applications involving multiple components operating at different discrete spatial resolutions can each choose appropriate grid resolutions as mentioned above while still all participating in a hierarchical location coding. The resolution frequency can be increased by decreasing the aperture in resolution ranges of interest to the application. The frequency can be decreased by increasing the aperture in regions that are of less interest to the application. Not only can an individual application tailor resolutions as preferred but given any two such resolution frequency specifications a higher resolution grid that participates in both hierarchies can be generated providing a common spatial substrate to multiple independent applications. Fast integer distance computations on hexagon grids facilitate efficient proximity searches. In CPI hierarchical containment can be expressed as metric distance allowing efficient coarse filtering for intersection and spatial queries.

Integer algorithms can be implemented very efficiently on mobile devices e.g. smart phones which often do not have Floating Point Units FPUs . A uniform approach to manipulating mixed aperture CPI hierarchies has value for research into economic CPI structures and in the development of CP related algorithms e.g. placement of retail outlets cell phone towers etc. .

With reference to an exemplary system for implementing the disclosed technology includes a general purpose computing device in the form of an exemplary conventional PC including a processing unit a system memory and a system bus that couples various system components including the system memory to the processing unit . The system bus may be any of several types of bus structures including a memory bus or memory controller a peripheral bus and a local bus using any of a variety of bus architectures. The exemplary system memory includes read only memory ROM and random access memory RAM . The memory can also include a CPI Assignment memory for storing indexes and other information relating to CPI systems and application relating to CPI systems. A basic input output system BIOS containing the basic routines that help with the transfer of information between elements within the PC is stored in ROM .

The exemplary PC further includes a hard disk drive for reading from and writing to a hard disk not shown a magnetic disk drive for reading from or writing to a removable magnetic disk and an optical disk drive for reading from or writing to a removable optical disk such as a CD ROM or other optical media . The hard disk drive magnetic disk drive and optical disk drive are connected to the system bus by a hard disk drive interface a magnetic disk drive interface and an optical drive interface respectively. The drives and their associated computer readable media provide nonvolatile storage of computer readable instructions data structures program modules and other data for the PC . Other types of computer readable media which can store data that is accessible by a PC such as magnetic cassettes flash memory cards digital video disks CDs DVDs RAMs ROMs and the like may also be used in the exemplary operating environment.

A number of program modules may be stored on the hard disk magnetic disk optical disk ROM or RAM including an operating system one or more application programs other program modules and program data . A user may enter commands and information into the PC through input devices such as a keyboard and pointing device such as a mouse . Typically commands and instructions are provided for multi resolution indexing and grid generation and are stored as computer executable instructions. Other input devices not shown may include a digital camera microphone joystick game pad satellite dish scanner or the like. These and other input devices are often connected to the processing unit through a serial port interface that is coupled to the system bus but may be connected by other interfaces such as a parallel port game port or universal serial bus USB . A monitor or other type of display device is also connected to the system bus via an interface such as a video adapter . Other peripheral output devices such as speakers and printers not shown may be included.

The PC may operate in a networked environment using logical connections to one or more remote computers such as a remote computer . The remote computer may be another PC a server a router a network PC or a peer device or other common network node and typically includes many or all of the elements described above relative to the PC although only a memory storage device has been illustrated in . The logical connections depicted in include a local area network LAN and a wide area network WAN . Such networking environments are commonplace in offices enterprise wide computer networks intranets and the Internet.

When used in a LAN networking environment the PC is connected to the LAN through a network interface . When used in a WAN networking environment the PC typically includes a modem or other means for establishing communications over the WAN such as the Internet. The modem which may be internal or external is connected to the system bus via the serial port interface . In a networked environment program modules depicted relative to the personal computer or portions thereof may be stored in the remote memory storage device. The network connections shown are exemplary and other means of establishing a communications link between the computers may be used.

Other computing devices such as lap top computers cellular phones personal digital assistants GPS positioning units and other portable or fixed devices can be used.

Having described and illustrated the principles of my invention with reference to the illustrated embodiments it will be recognized that the illustrated embodiments can be modified in arrangement and detail without departing from such principles. For instance elements of the illustrated embodiment shown in software may be implemented in hardware and vice versa. Also the technologies from any example can be combined with the technologies described in any one or more of the other examples. In view of the many possible embodiments to which the principles of the invention may be applied it should be recognized that the illustrated embodiments are examples of the invention and should not be taken as a limitation on the scope of the invention. For instance various components of systems and tools described herein may be combined in function and use. Alternatives specifically addressed in these sections are merely exemplary and do not constitute all possible alternatives to the embodiments described herein.

