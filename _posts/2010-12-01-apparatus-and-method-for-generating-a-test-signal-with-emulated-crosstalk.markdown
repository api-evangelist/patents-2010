---

title: Apparatus and method for generating a test signal with emulated crosstalk
abstract: A signal generator produces a victim signal having crosstalk emulation by filtering and combining a victim signal waveform record file and an aggressor signal waveform record file generated using parameters selected by a user. A signal channel or a cascaded signal channel is characterized using one or more S-parameter arrays. The S-parameter array or arrays represent a mixed-mode multiple-port device under test. Coefficients of a NEXT filter, a FEXT filter and a forward transmission filter are derived from selected S-parameters of the S-parameter array. The aggressor signal is filtered individually by the NEXT and FEXT filters. The victim signal is summed with the filtered aggressor signal from the NEXT filter with the resulting summed signal being filtered by the forward transmission filter. The filtered signal from the forward transmission filter is summed with the filtered aggressor signal from the FEXT filter to generate a victim signal having crosstalk emulation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08650010&OS=08650010&RS=08650010
owner: Tektronix, Inc.
number: 08650010
owner_city: Beaverton
owner_country: US
publication_date: 20101201
---
The present invention relates generally to a signal generator generating test signals and more particularly to a signal generator generating a test signal having emulated crosstalk.

In high speed digital signaling standards such as PCI Express DisplayPort and the like individual components of a signal channel such as connectors cables circuit board traces and the like can be represented by S parameters scattering parameters . These components can cause impairments in the signal transported across the channel such as intersymbol interference noise crosstalk and the like that are not desirable. The above standards adopt differential signaling for reducing these impairments.

Crosstalk is caused by capacitive and or inductive coupling into one signal channel by a signal or signals on an adjacent signal channel or channels. The signal and signal channel being affected by the crosstalk are respectively referred to as the victim signal and victim signal path and the adjacent signal or signals on the adjacent signal channel or channels are respectively referred to as the aggressor signal or signals and aggressor signal path or paths. The crosstalk dominantly affects the victim signal both at the near and far ends of the signal path.

High speed serial data designers are required to design robust and reliable receivers to meet the required bit error rate for specified conditions. Crosstalk from neighboring paths has an adverse effect on the performance of high speed serial data. A designer needs to ascertain the effect of crosstalk which is dictated by the physical property of signal paths coupled to the receiver such as the PCB print circuit board traces cables connectors and the like and also the characteristic of aggressor and victim signals.

The DisplayPort set up has four channels shown as Lane Lane Lane and AUX channel. In Receiver Stress Testing a Test Lane e.g. Lane is fed with a test signal victim signal in the form of a stressed pattern having various signal impairments such as deterministic and random jitter noise and the like from a signal generator such as the AWG7122B manufactured and sold by Tektronix Inc. Beaverton Oreg. The signal generator also feeds aggressor signals to the neighboring lanes Lanes Lane in the form of a half clock pattern or the like which inflict crosstalk onto the Test Lane. The DisplayPort Standard provides the specification for both the victim signal and the aggressor signal. The layout of the test fixture produces crosstalk on the victim signal on Lane in response to the aggressor signals on Lanes and Lanes . The victim signal is coupled to the DUT via the TTC modules associated cabling and the test fixture . The stressed test signal with crosstalk is processed by the receiver circuitry in the DUT and coupled to the transmitter circuitry in the DUT which processes the received signal and outputs a transmitter signal via the auxiliary channel to the DisplayPort AUX Control . The DisplayPort AUX Control converts the transmitter differential signal to a single ended signal and conditions the signal for use by serial trigger circuitry in the oscilloscope . The oscilloscope receives the output signal from the DisplayPort AUX Control digitizes and processes the incoming signal and displays the resultant signal data on a display device for analysis.

The process of setting up for a DisplayPort receiver stress test is cumbersome time consuming and prone to errors. In addition the set up does not allow flexibility for the designer to modify the channel and signal parameters. Further costs may occur as revisions and improvements of the standard are implemented requiring new cabling fixtures and the like. The physical properties of the custom made fixtures determine the influence of crosstalk on the victim signal. It could be much different from the actual hardware signal channels designed for the DUT . Therefore it is important for a designer to test the transmitter receiver design with crosstalk generated by the actual hardware signal channels.

The present invention is directed to a signal generator having a display and a central processing unit generating a user interface on the display for setting parameters for a victim signal and an aggressor signal. A waveform record file of the victim signal is generated using the victim signal parameters and a waveform record file of the aggressor signal is generated using the aggressor signal parameters. An S parameter conversion circuit receives at least a first S parameter array representative of characteristics of a multi port signal channel and generating filter coefficients for each of a first filter representing near end crosstalk a second filter representing far end crosstalk and a third filter representing a transfer characteristic between a first port and a second port. A crosstalk emulation circuit receives the waveform record of the victim signal the waveform record of the aggressor signal and the filter coefficients for each of r the first second and third filters and generates a waveform record file representative of the victim signal with emulated crosstalk effects. The waveform record file of the aggressor signal is separately filtered by the first filter and the second filter. The filtered waveform record file using the first filter is summed with the waveform record file of the victim signal and the resultant summed waveform record file is filtered by the third filter and summed with the filtered waveform record using the second filter to generate a waveform record file of the victim signal with emulated crosstalk effects. A waveform generation circuit receives the waveform record file of the victim signal with emulated crosstalk effects and generates an analog output signal representative of the victim signal with emulated crosstalk effects.

The parameters for the victim signal may include deterministic jitter impairments and random jitter impairments with the deterministic jitter impairments selected from a group of parameters for intersymbol interference impairments duty cycle distortion impairments sinusoidal jitter impairments and spread spectrum clock impairments.

The S parameter array may represent a single ended multi port signal channel or a differential mixed mode multi port signal channel. The differential mixed mode multiple port signal channel is modeled having a first differential input port receiving the aggressor signal a second differential input port receiving the victim signal a first differential output port receiving the transmitted aggressor signal and a second differential output port receiving the transmitted victim signal. The transmission S parameter of the S parameter array from the first input port to the second input port represents the characteristics of the first filter the transmission S parameter of the S parameter array from the first input port to the second output port represents the characteristics of the second filter and the transmission S parameter of the S parameter array from the second input port to the second output port represents the characteristic of the third filter.

The first filter coefficients the second filter coefficients and the third filter coefficients are respective impulse response time domain data respectively derived from the transmission S parameter of the S parameter array from the first input port to the second input port representing characteristics of the first filter the transmission S parameter of the S parameter array from the first input port to the second output port representing characteristics of the second filter and the transmission S parameter of the S parameter array from the second input port to the second output port representing characteristic of the third filter.

The multiple port signal channel may have a plurality of components with each component having an S parameter array characterizing the component. The plurality of S parameter arrays characterizing the plurality of components are combined to generate an S parameter array characterizing multiple port signal channel.

A corresponding method for generating a victim signal having emulated crosstalk has the steps of generating a victim signal waveform record file from victim signal parameters and an aggressor signal waveform record file from aggressor signal parameters. An S parameter array is provided having S parameters representing the characteristics of a signal channel. First second and third filter coefficients are generated for respective first second and third filters from respective a first S parameter a second S parameter and a third S parameter of the S parameter array. The aggressor waveform record file is separately filtering using the respective filter coefficients of the first filter representing near end crosstalk and the second filter representing far end crosstalk. The filtered waveform record file from the first filter is summed with the waveform record file of the victim signal with the resultant summed waveform record file being filtered using the third filter. The filtered waveform record using the third filter is summed with the filtered aggressor waveform record from the second filter to generate a waveform record file of the victim signal with emulated crosstalk effects. An analog victim signal having emulated crosstalk effects is generated from the waveform record file of the victim signal with emulated crosstalk effects

The S parameters array providing step has the additional step of providing a plurality of S parameter arrays having S parameters representing characteristics of a plurality of components of the signal channel. Providing the plurality of S Parameter arrays has the additional step of combining the plurality of S parameter arrays representing characteristics of the plurality of components of the signal channel into an S parameter array having S parameters representing the characteristics of the signal channel. The S parameter array providing step has a further step of generating an S parameter array having S parameters representing a differential mixed mode multiple port device under test having a first differential input port receiving the aggressor signal a second differential input port receiving the victim signal a first differential output port receiving the transmitted aggressor signal and a second differential output port receiving the transmitted victim signal.

The S parameters of the S parameter array from the first input port to the second input port represent characteristics of the first filter the S parameter of the S parameter array from the first input port to the second output port represent characteristics of the second filter and the S parameter of the S parameter array from the second input port to the second output port represent characteristic of the third filter. The generating of the first filter coefficients the second filter coefficients and third filter coefficients has the step of generating impulse response time domain data for each of the first second and third filters respectively derived from the S parameter of the S parameter array from the first input port to the second input port representing characteristics of the first filter the S parameter of the S parameter array from the first input port to the second output port representing characteristics of the second filter and the S parameter of the S parameter array from the second input port to the second output port representing characteristic of the third filter.

The objects advantages and novel features of the present invention are apparent from the following detailed description when read in conjunction with appended claims and attached drawings.

Referring to there is shown a representative block diagram of a signal generator such as the AWG7122B manufactured and sold by Tektronix Inc. Beaverton Oreg. for generating a test signal with emulated crosstalk according to the present invention. The signal generator has a central processing unit CPU that controls the operation of the instrument according to programs stored on electronic media such as a Compact Disc CD or on storage device . A memory such as RAM memory is used for a work area for the CPU to read programs from the storage device such as a hard disk drive. A user can set up the signal generator to generate an output test signal via the buttons knobs and the like on a front panel of the instrument. A display device displays a user interface for setting various parameters for the output test signal and visualizing an output signal as a function of the parameter settings. An external display output circuit provides a video output which may be connected to an external display for providing a larger display area in addition to the built in display of the signal generator. A waveform generation circuit generates the output test signal based on user defined parameters. In this example the waveform generation circuit has a trigger input and an event input and two channel outputs with each output channel capable of generating differential signals. An input output port is used for connecting an external keyboard a pointing device such as a mouse and the like to the signal generator. The external keyboard and or mouse may be included as part of the front panel controls of the signal generator for setting parameters. The blocks are coupled together via a signal and data bus . The bus of the signal generator may have a Local Area Network LAN interface for connecting the signal generator to an external controller such as a personal computer PC or other testing instruments. The LAN interface allows the user interface to operate on the PC and pass output signal data to the signal generator and also enables the PC to control the signal generator over a network. Alternatively a General Purpose Interface Bus GPIB interface may be used for the LAN interface .

The present invention will be described with respect to the signal generator operating under program control of the CPU that generates a test signal having emulated crosstalk. A user interface and associated pop up windows are provided that allows a user to input parameters for generating the test signal. The user interface and signal generation programs are stored on the storage device . The user interfaces may be displayed on the display device or on the external display . Alternately the user interface programs may be stored and accessed by the PC with the PC processing the parameters and generating an output waveform record file containing digital data values representing the victim signal with emulated cross talk. The output waveform record file is coupled to and stored in the signal generator .

Referring to there is shown an initial user interface for setting parameters for a victim signal and aggressor signals for generating a test signal having crosstalk emulation. The programs controlling the various interfaces on the signal generator may be accessed via an icon on the display device or by clicking on a start tab and clicking the appropriate program from a list of programs stored in the signal generator . The initial user interface includes a number of pop up windows that are activated by clicking on various tabs or buttons in the initial user interface . The initial user interface has a BASE PATTERN tab that activates a BASE PATTERN pop up window . The BASE PATTERN pop up window is automatically activated with the initial user interface .

The initial user interface and associated pop up windows allow a user to set serial data pattern parameters as well as impairment parameters that may be applied to the signal data pattern. The impairment parameters include deterministic jitter impairment and random jitter impairments. The deterministic jitter impairments may include intersymbol interference impairments duty cycle distortion impairments sinusoidal jitter impairments spread spectrum clock impairments and crosstalk emulation impairments of the present invention. The random jitter impairments may include multiple types of random jitter with each type having a different magnitude and frequency range.

Clicking on SCRAMBLING box activates the SCRAMBLING region . The SCRAMBLING region has a POLYNOMIAL box in which the user may enter a scrambling polynomial for scrambling the selected serial data pattern. A REGISTER INITIAL VALUE FIELD allows the user to set the initial state of the scrambling register in binary or hexadecimal and the length of the register. The register length is equal to the degrees of the polynomial. The ENCODING region has an ENCODING SCHEME box that allows the user to set the type of coding scheme for the serial data pattern. A user may select from NRZ NRZI or 4 PAM. Clicking on the 8B10B box activates an algorithm for the mapping of 8 bit symbols to 10 bit symbols to achieve DC balance and bounded disparity. Clicking on the DISPARITY box allows the user to select a positive or negative initial disparity. Clicking on a PWM pulse width modulation box above the ENCODING region activates a pulse width modulated function that allows the user to generate a pulse width modulated signal. The pulse width modulation function has a T MINOR box in which the user sets the negative state of the bit in the pulse width modulated signal in unit intervals. The SIGNAL region has a DATA RATE box and an IDLE STATE box . Clicking on the DATA RATE box allows a user to set the data rate of the serial data. The data rate may be adjusted from 10 Mega Bits per second to 20 Giga bits per second depending on signal generator type. When the STANDARD button is activated the data rate is automatically selected as a function of the selected serial data standard. The IDLE STATE box is active when SATA is selected in the STANDARD box and Idle Pattern is selected in the PATTERN box . The Idle State may be viewed as selectable periods of DC within the pattern.

The AMPLITUDE region has a MAXIMUM AMPLITUDE box and a MINIMUM AMPLITUDE box . The MAXIMUM AMPLITUDE box and a MINIMUM AMPLITUDE box allows the user to specify the maximum and minimum amplitude levels of the serial data pattern. The RISE FALL region has RISE FALL TIME buttons and for respectively selecting 10 90 or 20 80 percent rise and fall time. A RISE box allows the user to select the rise time of the serial data pattern leading edges. A FALL box allows the user to set the fall time of the serial data pattern trailing edges. Clicking on the DCD box activates the DCD region allowing the user to vary the amount of Duty Cycle Distortion in the serial data pattern. The rise fall and DCD times may be defined in seconds or unit intervals using the respective SETTING boxes .

The MARKER SETTING region has a MARKER section and a MARKER section . Each MARKER section has option buttons and . Clicking on the one of the BASE PATTERN buttons sets that particular marker output to be the same as the base pattern. Clicking on one of the CLOCK buttons activates a CLOCK PATTERN box and a FREQUENCY box . The CLOCK PATTERN box allows the user to select from a list of clocks or allows the user to define a clock pattern. If the user selects to define the clock pattern then the user may set the frequency of the clock using the FREQUENCY box . Clicking on one of the HIGH LOW buttons activates a SELECTION box to allow the user to set the marker output to ALL HIGH ALL LOW or TRIGGER. Selecting the TRIGGER option activates SAMPLE box that allows the user to set the beginning number of samples of the waveform to high.

Clicking on the TRANSMITTER tab activates a TRANSMITTER pop up window as shown in . The TRANSMITTER pop up window has three defined regions PERIODIC JITTER PK PK RANDOM JITTER RMS and SSC . The PERIODIC JITTER PK PK region allows the user to set parameters for up to four sine wave impairment signals Sine Sine Sine and Sine that may be applied to the victim signal. Each sine wave impairment signal has a MAGNITUDE box for setting the magnitude of the sine wave impairment signal and associated SETTING box for defining the magnitude in unit intervals or seconds. Each sine wave impairment signal also has a FREQUENCY box and a PHASE box for setting the frequency and phase for impairment signal. The RANDOM JITTER region allows the user to set parameters for generating crest factor emulation . Clicking on the RJ CREST FACTOR PEAK box activates a SCALER box where the user can enter a value from 1 to 20 that is multiplied by the magnitude of Rj to generate a peak value in unit intervals. Clicking on the RANDOM SEED box activates a RANDON SEED VALUE box allowing the user to assign a maximum five digit seed value for using the same random jitter sequence for each compilation of the digital data pattern with impairments. The RANDON JITTER region allows a user to set parameters for three random jitter impairment signals Rj Rj and Rj that may be applied to the victim signal. Each random jitter impairment signal has a MAGNITUDE box for setting the magnitude of the random jitter impairment signal and associated SETTING box for defining the magnitude in unit intervals or seconds. Each random jitter impairment signal also has a FREQUENCY LOW Hz box and a FREQUENCY HIGH Hz box for setting low and high frequencies of the random jitter.

Clicking on a SCC box activates the SSC spread spectrum clock region allowing the user to set parameters of a spread spectrum clock that may be applied to the victim signal. The user may set the shape spread and unequal spread for the SSC signal using the SHAPE box the SPREAD box and the UNEQUAL SPREAD box . The user may also select a previously stored custom shape clicking on a BROWSE button and entering the file name in a CUSTOM SHAPE box . The SSC region includes a df dt section where the user can insert a deviation in a standard SCC profile. A FREQUENCY section having a DEVIATION box and a MODULATION box allows the user to set frequency parameters of the SSC signal. Clicking on a NOISE box activates a NOISE VALUE box allowing the user to set a noise parameter in VOLTS RMS for adding noise to the victim signal. The user has the option of placing the noise at the near end or the far end of the victim signal using ADD NOISE AT box . Clicking on a PRE DE EMPHASIS box activates a PRE DE EMPHASIS parameter box allowing the user to set a pre emphasis or de emphasis parameter for the victim signal. The pre emphasis or de emphasis parameter may be set in dB or volts using the UNITS box . Clicking on the ADVANCED SETUP box activates another pop up window allowing the user to set additional pre emphasis and de emphasis parameters.

Clicking on the CHANNEL CABLE tab activates a CHANNEL CABLE pop window as shown in . The user may activate an ISI box and SETTING box by clicking on an ISI button . The user can selectively add ISI impairments to a digital data pattern using the ISI box and set the ISI units in seconds or unit interval using the SETTING box . The present invention of generating a test signal with crosstalk emulation uses one or more S parameter filters that are activated by clicking on an S PARAMETER FILTER button . A SELECT A MODE box allows the user to select between a cascading or non cascading mode. When the non cascading mode is selected a browsing area not shown appears in place of a FILE CASCADING region to allow the user to browse and select an S parameter array representing the S parameters of a signal channel containing a component or components. The S parameter array may be implemented in a well known S parameter Touchstone format. The S parameters of a component may be measured with a vector network analyzer and the resultant data may be saved as an S parameter array and stored on the storage device of the signal generator . A device manufacturer may also provide an S parameter array of a component or device which may be stored on the storage device . When the cascading mode is selected the FILE CASCADING region appears. The FILE CASCADING region includes a number of FILE boxes FILE FILE FILE FILE FILE and FILE . Each FILE box has an icon ON OFF button that turns each respective FILE box on or off. shows six FILE boxes but the present invention is not limited to six FILE boxes and more or less FILE boxes may be employed without departing from the scope of the present invention.

The user may click on each of the ON OFF buttons of the FILE boxes to turn the boxes on. When a FILE box is turned on a dialog box not shown is opened to allow the user to browse and select an S parameter array for the clicked FILE box. The S parameter arrays have been previously stored in an S parameter array library stored on the storage device or stored on a media device such as a CD thumb drive or the like that is loaded into or connected to the signal generator . If two or more FILE boxes are turned on in the cascading mode the user selects an S parameter array for each active FILE box using the dialog box for that FILE box . The S parameters for a signal channel in the cascading mode are the combination of the S parameters for the cascaded components representing the total characteristics of the signal channel. A BANDWIDTH LIMIT region allows the user set a bandwidth limit for the signal channel characteristics to be emulated. The user has the option of not limiting the bandwidth by clicking on the NONE button automatically setting the bandwidth limit by clicking on the AUTO button and manually setting the bandwidth limit by clicking on the CUSTOM button and entering a frequency bandwidth limit value in a FREQUENCY box .

Below the FILE CASCADING region there is an INVERSE FILTER box and an INVERSE FILTER FILE box and associated BROWSE button that allow the user to select a previously stored S Parameter array. An ISI SCALING box allows the user to select an ISI scaling factor value for the victim signal which in the preferred embodiment is varied from 0.000 to 10.000 in increments of 0.001.

The user activates the AGRESSOR region by clicking on the AGRESSOR box . The AGRESSOR region is used to set the parameters for the aggressor signal. The user sets the type of aggressor signal using the SIGNAL box . The user may select a pattern using the PATTERN FIELD box . The user sets the frequency of the aggressor signal using the FREQUENCY box and sets the amplitude of the aggressor signal using the AMPLITUDE box . The user sets the rise and fall time of the transitions in the aggressor signal using the RISE FALL box . The rise times may be defined in seconds or unit intervals using SETTING boxes . The user also sets the direction of the aggressor signal by selecting Same as the Victim or Opposite the Victim in the DIRECTION box .

The S parameters arrays of the components may be represented as a single ended or a differential 8 port DUT. The user activates a single ended or differential S parameter data type by respectively clicking on either a SINGLE ENDED button or a DIFFERENTIAL button . The S parameter array of the single ended type corresponds to standard S parameters that represent characteristics of a single ended 8 port circuit of which port number allocation is shown in . The S parameter array of the differential type corresponds to mixed mode S parameters that represent characteristics of a mixed mode 4 port circuit of which port number allocation is shown in . A SELECT PORT CONFIGURATION region has a VICTIM PORT ALLOCATION area and an AGGRESSOR PORT ALLOCATION . The positive side of the differential victim signal is assigned to the ports and and the negative side of the differential signal is assigned to ports and . The positive side of the differential aggressor signal is assigned to ports and and the negative side of the differential signal is assigned to ports and .

Referring back to once the user has set the parameters for the victim and aggressor signals the user activates a COMPILE SETTINGS pop up window shown in by clicking on a COMPILE SETTINGS button on the initial user interface tool bar . The COMPILE SETTINGS pop up window has a WAVEFORM NAME box that allows a user to define a name for a waveform record file generated by the signal generator using the user defined victim signal having the crosstalk emulation. The data rate for the serial data pattern entered using the BASE PATTERN pop up window is displayed next to Data Rate . The user can click on a SAMPLE RATE button or a SAMPLES PER UI button to activate respective SAMPLE RATE or SAMPLES PER UI boxes . The user may manually set the sampling rate or samples per UI by entering appropriate values based on the serial data pattern and the data rate. The sampling rate or samples per UI may be automatically set based on the data rate and the serial data pattern by clicking on AUTOMATIC box . A DELAY box is provided to help in aligning the start and stop points in waveform sequence elements. The user can set a delay of the next waveform sequence element to allow magnitude alignment of the ending and starting points of the waveform sequence elements. A WRAP BETWEEN SEQUENCE ELEMENTS box may be clicked on to ensures continuity of the waveform when the sequence execution moves from one sequence element to another.

The COMPILE SETTING pop up window has a COMPILE BUTTON PREFERENCE region a REPEAT region and a BANDWIDTH EXPANSION FILTER region . Clicking on the COMPILE AND SEND TO button in the COMPILE BUTTON PREFERENCE region allows the user to select a channel for the compiled waveform record file based on the digital data pattern and impairment parameters. Clicking on the COMPILE ONLY button save the compiled waveform record file in the user named waveform record file. The REPEAT region has an AUTOMATIC button that when activated automatically builds a waveform from repeating pieces based on the Pj Rj and SSC frequency values. A MANUAL button allows the user to set the repeat count using a MANUAL COUNT box . The repeat count may be set in counts or seconds. Clicking on the BANDWIDTH EXPANSION FILTER box activates the BANDWIDTH EXPANSION FILTER region . The signal generator has hardware circuitry that internally provides automatic interleaving of the CH and CH digital to analog converter outputs for high sample rates such as 12 GS s and higher. The user may select to leave interleaving off interleave without zeroing and interleaving with zeroing. On the lower right side of the COMPILE SETTINGS pop up window are additional parameters that may be set by clicking on the appropriate boxes . One of the parameters is SHOW GRAPH AFTER COMPILE which displays the victim signal with emulated crosstalk data in various forms in two graph regions at the bottom of the initial user interface . At the bottom of the COMPILE SETTINGS pop up window are COMPILE OK CANCEL and HELP buttons and that allows the user to select various options related to the COMPILE SETTINGS pop up window . One option is to click on the COMPILE button that initiates the compiling of the victim and aggressor signal to generate a waveform record file containing digital data for generating an analog serial victim signal having crosstalk emulation and various other signal impairments from the signal generator . Another option is to click on the OK button that saves the parameters selected in the COMPILE SETTINGS pop up window and closes the window . A further option is to click on the CANCEL button that closes the COMPILE SETTINGS pop up window without saving the parameters selected in the window . Clicking on the HELP button activates a HELP pop up window from which the user may seek help.

The initial user interface tool bar has a COMPILE button as shown in that functions in the same manner as the COMPILE button as shown in in the COMPILE SETTINGS pop up window by initiating the compiling of the serial data pattern with the various other parameters to generate a waveform record file containing digital data for generating an analog serial data pattern from the signal generator .

Referring to there is shown a representative block diagram illustrating various hardware and software elements in generating the victim signal having crosstalk emulation. The user inputs parameters for generating the victim and aggressor signals as well as impairments on the signals using the previously described user interface and associated pop up windows displayed on the display . The user selects one or more S parameter arrays from an S parameter Array Library for setting S parameters representing total characteristics of a signal channel using the CHANNEL CABLE pop up window . An S parameter conversion block generates a set of S parameters representing the total characteristics of the cascaded components signal channel if the cascading mode is selected and two or more S parameter arrays are designated. The S parameter conversion block also converts single ended parameters in an S parameter array s to differential mixed mode S parameters. Further coefficients for a series of filters to be described below are generated from selected S parameters of the differential mixed mode S parameters. The filters are used for generating a waveform record file representing the victim signal with emulated crosstalk. The filter coefficients are provided to a crosstalk emulation block which uses the filter coefficients for generating a waveform record file representing the victim signal with emulated crosstalk. The waveform record file of the victim signal with crosstalk emulation is stored in a waveform memory that may be a part of memory . The waveform record file is read by the waveform generator and processed to generate digital values representing distinct analog voltages of the victim signal with crosstalk emulation. The digital values are converted to analog voltages by digital to analog converter DAC and coupled to an amplifier that generates an output differential signal of the victim signal with crosstalk emulation.

As is known S parameters scattering parameters are terms in an S matrix scattering matrix that shows relationship between incident power waves a and reflected power waves b of a n port n is a natural number network. The single ended or standard S parameters Sstd are described as shown in the following equation 1. The equation 1 shows an example of 8 port single ended S parameter network.

The S parameters of the resultant differential mixed mode 4 port S parameter network use the appropriate transmission parameters between the relevant single ports of the 8 port single ended S parameter network.

Referring to a crosstalk emulation block according to the present invention uses the filter coefficients generated in the S parameter conversion block for a NEXT Near End Crosstalk filter a FEXT Far End Crosstalk filter and a forward transmission filter . The aggressor signal is separately applied to the FEXT filter and the NEXT filter . The filtered output of the NEXT filter is summed with the victim signal using a summing function and applied to the forward transmission filter . The filtered output of the forward transmission filter is summed with the filtered aggressor signal from the FEXT filter using a summing routine to generate waveform record data representing the victim signal with emulated crosstalk generated by the aggressor signal. If the aggressor and victim signals are assigned to differential ports as shown in the NEXT filter is a differential mode S parameter S from port to port and the FEXT filter is a differential mode S parameter S from port to port . The victim signal at the port is affected by the aggressor signal from the port according to the NEXT filter S parameter S transferred to port according to a forward transmission filter S parameter S and then affected by the aggressor signal from port to port according to the FEXT filter S parameter S . The crosstalk emulation block emulates the above processes with the aggressor and victim signal data and S parameter data.

The S parameters for the 8 port single ended S parameter network and the differential mixed mode 4 port S parameter network are complex vectors have magnitude and phase. The coefficients of the NEXT filter FEXT filter and forward transmission filter are impulse responses derived from the S parameter data. Each S parameter of the mixed mode 4 Port S parameter network has magnitude and phase values over a range of frequencies preferably from DC. The Nyquist limit is determined over the frequency range of the S parameter and the complex conjugate of the magnitude and phase is determined for the full frequency. An Inverse Fast Fourier Transform IFFT or other similar transformation routine to convert frequency data to time domain data is performed on the complex conjugate data to generate impulse response time domain data. The impulse response time domain data are the coefficients for NEXT filter FEXT filter and forward transmission filter . The S parameter conversion block and the crosstalk emulation block may be implemented using software processes or alternatively the S parameter conversion block and the crosstalk emulation block may be implemented as hardware using FPGA ASIC etc. or combination of software and hardware.

In the preferred embodiment of the invention the victim signal with emulated crosstalk is generated during the compile process. During the compile process a victim signal and an aggressor signal are internally generated using the respective victim signal parameters and the aggressor signal parameters. Based on the S parameters of the signal channel and the aggressor signal port setting the appropriate S parameters are extracted and filter coefficients are computed by the S parameter conversion. With the victim and aggressor signals internally generated and the filter coefficients derived the waveform record file representing the victim signal with crosstalk emulation is generated and stored in the waveform memory.

The present invention has been described in relation to a DisplayPort communication standard. However the present invention is limited to this particular communication standard and can equally be used for other communication standards such as Fiber Channel PCI Express and the like. Further while the present invention has been described using S parameters representing an 8 port single ended network and a 4 port differential mixed mode 4 port network the number of ports for the single ended network is not limited to 8 ports nor are the number of ports for the differential mixed mode network limited to 4 ports. Other port configuration are possible as long as the number of input ports equals the number of output ports.

It will be obvious to those having skill in the art that many changes may be made to the details of the above described embodiments of this invention without departing from the underlying principles thereof. The scope of the present invention should therefore be determined only by the following claims.

