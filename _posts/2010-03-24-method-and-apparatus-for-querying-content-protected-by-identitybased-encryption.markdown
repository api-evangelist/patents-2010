---

title: Method and apparatus for querying content protected by identity-based encryption
abstract: An approach is provided for reducing communication traffic/cost and protecting content by applying recipient criteria in identity-based encryption. A criterion application of a querier causes, at least in part, transmission of a query associated with a first user described according to a first set of criteria. Based on the query, the criterion application of the querier receives one or more second sets of criteria associated with respective second users, wherein the second sets of criteria are matched, at least in part, to the first set of criteria, and wherein at least one of the second sets of criteria is used as a public key for encrypting data according to an identity-based encryption scheme. A criterion application of an information store receives the query associated with the first user, and matches one or more second sets of criteria with all or part of the first set of criteria.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09025767&OS=09025767&RS=09025767
owner: Nokia Corporation
number: 09025767
owner_city: Espoo
owner_country: FI
publication_date: 20100324
---
Service providers e.g. wireless cellular Internet content social network etc. and device manufacturers are continually challenged to deliver value and convenience to consumers by for example providing compelling network services and advancing the underlying technologies. One area of interest has been in ways to facilitate sharing of content on existing networks while maintaining user privacy and confidentiality through for instance encryption. As a result the number of systems and platforms facilitating content sharing using identity based encryption is increasing. For example such identity based encryption are keyed to criteria e.g. characteristics properties interests etc. associated with potential recipients as opposed to specific recipients. In this way identity based encryption permits distributing messages to target recipients without knowing the identities of the target recipients. As users continue to increase their reliance on content sharing and querying content protected by identity based encryption via networks the number of search queries and the search results protected by identity based encryption also increase. Consequently service providers and device manufacturers face the challenge of providing sufficient communication and network resources to support queries and results protected by identity based encryption.

Therefore there is a need for an approach for querying content protected by identity based encryption.

According to one embodiment a method comprises causing at least in part transmission of a query associated with a first user the first user being described according to a first set of criteria. The method also comprises based at least in part on the query receiving one or more second sets of criteria associated with respective second users wherein the second sets of criteria are matched at least in part to the first set of criteria and wherein at least one of the second sets of criteria is used as a public key for encrypting data according to an identity based encryption scheme.

According to another embodiment an apparatus comprising at least one processor and at least one memory including computer program code the at least one memory and the computer program code configured to with the at least one processor cause at least in part the apparatus to transmit a query associated with a first user the first user being described according to a first set of criteria. The apparatus is also caused to based at least in part on the query receive one or more second sets of criteria associated with respective second users wherein the second sets of criteria are matched at least in part to the first set of criteria and wherein at least one of the second sets of criteria is used as a public key for encrypting data according to an identity based encryption scheme.

According to another embodiment a computer readable storage medium carrying one or more sequences of one or more instructions which when executed by one or more processors cause at least in part an apparatus to transmit a query associated with a first user the first user being described according to a first set of criteria. The apparatus is also caused to based at least in part on the query receive one or more second sets of criteria associated with respective second users wherein the second sets of criteria are matched at least in part to the first set of criteria and wherein at least one of the second sets of criteria is used as a public key for encrypting data according to an identity based encryption scheme.

According to another embodiment an apparatus comprises means for causing at least in part transmission of a query associated with a first user the first user being described according to a first set of criteria. The apparatus also comprises means for based at least in part on the query receiving one or more second sets of criteria associated with respective second users wherein the second sets of criteria are matched at least in part to the first set of criteria and wherein at least one of the second sets of criteria is used as a public key for encrypting data according to an identity based encryption scheme.

According to one embodiment a method comprises receiving a query associated with a first user the first user being described according to a first set of criteria. The method also comprises matching one or more second sets of criteria with all or part of the first set of criteria wherein the matching defines respective second users who are qualified to receive the query and wherein at least one of the second sets of criteria is used as a public key for encrypting data associated with a respective second user according to an identity based encryption scheme. The method further comprises causing at least in part transmission of the second sets of criteria in response to the query.

According to another embodiment an apparatus comprising at least one processor and at least one memory including computer program code the at least one memory and the computer program code configured to with the at least one processor cause at least in part the apparatus to receive a query associated with a first user the first user being described according to a first set of criteria. The apparatus is also caused to match one or more second sets of criteria with all or part of the first set of criteria wherein the matching defines respective second users who are qualified to receive the query and wherein at least one of the second sets of criteria is used as a public key for encrypting data associated with a respective second user according to an identity based encryption scheme. The apparatus is further caused to transmit the second sets of criteria in response to the query.

According to another embodiment a computer readable storage medium carrying one or more sequences of one or more instructions which when executed by one or more processors cause at least in part an apparatus to receive a query associated with a first user the first user being described according to a first set of criteria. The apparatus is also caused to match one or more second sets of criteria with all or part of the first set of criteria wherein the matching defines respective second users who are qualified to receive the query and wherein at least one of the second sets of criteria is used as a public key for encrypting data associated with a respective second user according to an identity based encryption scheme. The apparatus is further caused to transmit the second sets of criteria in response to the query.

According to another embodiment an apparatus comprises means for receiving a query associated with a first user the first user being described according to a first set of criteria. The apparatus also comprises means for matching one or more second sets of criteria with all or part of the first set of criteria wherein the matching defines respective second users who are qualified to receive the query and wherein at least one of the second sets of criteria is used as a public key for encrypting data associated with a respective second user according to an identity based encryption scheme. The apparatus further comprises means for causing at least in part transmission of the second sets of criteria in response to the query.

Still other aspects features and advantages of the invention are readily apparent from the following detailed description simply by illustrating a number of particular embodiments and implementations including the best mode contemplated for carrying out the invention. The invention is also capable of other and different embodiments and its several details can be modified in various obvious respects all without departing from the spirit and scope of the invention. Accordingly the drawings and description are to be regarded as illustrative in nature and not as restrictive.

A method and apparatus for querying content protected by identity based encryption are disclosed. In the following description for the purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the embodiments of the invention. It is apparent however to one skilled in the art that the embodiments of the invention may be practiced without these specific details or with an equivalent arrangement. In other instances well known structures and devices are shown in block diagram form in order to avoid unnecessarily obscuring the embodiments of the invention.

Identity based encryption IBE is a public key technology. IBE is different from other public key technologies in that IBE keys are calculated with unique information about the identity of the user e.g. a user s email address instead of being generated randomly. Identity based systems allow any party to generate a public key from a known identity value such as an ASCII string or information in any data representation. To operate a trusted third party called the private key generator PKG first publishes a master public key and retains a corresponding master private key. Given the master public key any party can compute a public key corresponding to the identity ID by combining the master public key with the identity value. To obtain a corresponding private key an authorized party contacts the PKG which uses the master private key to generate the private key for the identity ID. Since public keys are derived from identity IDs IBE eliminates the need for a public key distribution infrastructure. This further eliminates the need for a sender and a receiver in an IBE based messaging system to interact with each other before sending secure messages. The authenticity of the public keys is guaranteed as long as the transport of the private keys to the corresponding user is kept secure. IBE encrypted messages can use standard message formats such as the cryptographic message syntax CMS .

As used herein the term decision diagram refers to a compact graphical and or mathematical representation of a decision situation sets or relations. A decision diagram for example may be a binary decision diagram BDD or a reduced ordered binary decision diagram ROBDD . A BDD is ordered if different variables appear in the same order on all paths from the root. A BDD is reduced if any isomorphic subgraphs of its graph are merged and any nodes whose two child nodes are isomorphic are eliminated. Isomorphic subgraphs of the same decision diagram have similar appearance but originate from different sources. A ROBDD is a group of Boolean variables in a specific order and a directed acyclic graph over the variables. A directed acyclic graph DAG contains no cycles. This means that if there is a route from node A to node B then there is no way back. Although the term BDD almost always refers to reduced ordered binary decision diagram ROBDD this application refers to ROBDD separately from BDD to avoid confusion.

A decision diagram may be used to organize any data including one or more recipient criteria into a tree type data structure that permits identification of a result by traversing various branches of the structure. Although various embodiments are described with respect to applying recipient criteria it is contemplated that the approach described herein may be used with other data that can be organized into a tree type data structure. The term AugBDD refers to an augmented ROBDD which is augmented information including the ROBDD and at least one of a header with a hash identifier hash ID a construction history of the ROBDD keyed hash IDs and cardinality information e.g. relationships between data tables constraints on the types and number of class instances a property may connect with respect to a given ontology etc. . Each ROBDD is given a hash ID by operating a hash function over its ROBDD graph structure. Ideally the hash function would never produce the same hash ID for two different ROBDDs.

As used herein the term construction history information of a hash identifier of interest includes at least one or more other hash identifiers corresponding to a respective one or more other decision diagrams used to construct a decision diagram corresponding to the hash identifier of interest. The construction history also includes identification of one or more Boolean operators applied to the other hash identifiers listed in history. Since the ROBDD may be constructed by BDD operations from other ROBDDs a succinct representation of the ROBDD including the construction history of the ROBDD and a hash ID can be sent instead of the ROBDD to reduce data traffic. In one embodiment plain hash IDs form the basis for the communication. A keyed hash ID may be added in the communication along with a key ID. This allows the recipient to ensure that the keyed hash ID can be created from the corresponding graph or the plain hash ID by using the produced key. To create a keyed hash ID the data of the ROBDD is serialized to be input into a keyed hash function such as HMAC SHA1 HMAC SHA 256 etc. The keyed hash function allows entities to share the same secret key and to independently ensure that the resulting hash IDs were created by an entity having the secret key. Key IDs may correspond to different groups such as different social networks. A key ID together with an ROBDD graph constitute proof that the ROBDD has been constructed by the owner of the key ID.

In one embodiment instead of waiting to receive the query directly from the querier the sender may request from the querier one or more encrypted queries that was IBE encrypted with sender criteria Cs . The sender criteria Cs are set by the querier to screen for senders satisfying the sender criteria Cs . The sender criteria Cs are used to IBE encrypt the query. Upon receiving the request or query for an encrypted query the querier matches sender criteria Cs of the sender against all sender criteria Cs stored locally or externally. The querier then sends to the sender matched sender criteria Cs for the sender to select specific matched sender criteria Cs of interest and then to request a decryption key to decrypt corresponding IBE encrypted queries.

As the amount of IBE encrypted data and content queries increase the information space that includes the information store and the PKG has to provide mechanisms and infrastructure to allow queriers to find suitable encrypted data based upon querier criteria C .

The system of addresses this problem with solutions of effectively matching the two sets of criteria C and C and verifying whether the querier actually satisfies the querier criteria C . In this case the information store and the PKG work behind the scene such that the content queriers only need to send out querier criteria C in order to decrypt encrypted secret data that may contain content of interest. In other words content of interest is identified by matching a querier criteria C against information or data encrypted using recipient criteria C that match the querier criteria C rather than searching for content that match the querier s query.

In one embodiment participants of the system obtain an IBE master public key MK and domain parameters DP from a private key generator PKG . In another embodiment the common IBE parameters are available in an information store and access to the common IBE parameters in the information store can be controlled by existing access control mechanisms such as passwords electronic keys etc. This occurs once for example at the time of manufacturing the UE that are later used by the participants and does not need to occur again. In one embodiment the system uses IBE master public key MK domain parameters DP and the recipient criteria C to encrypt the secret data D through an IBE decryption function E D ibe encrypt MK DP C and publishes the encrypted data E D for example at an information store.

By way of example a querier who satisfies querier criteria C may query the cloud for content data through a function e query content . The term cloud is used as a metaphor for the Internet based on the cloud drawing used to depict the Internet in computer network diagrams as an abstraction of the underlying infrastructure it represents to provide services of processing power storage software or other computing services. Typically these services are rented by a service provider.

The cloud matches querier criteria C against all recipient criteria C available locally or externally. The cloud then sends matched recipient criteria C to the querier for the querier to select one or more matched recipient criteria C that the querier is interested. The querier then contacts the PKG with C to obtain a decryption key via a function pk offer certeria C . The querier then uses the decryption key to decrypt any published encrypted secret data D encrypted by the selected recipient criteria C into decrypted content data D through an IBE decryption function D ibe decrypt e DK DP .

In another embodiment the information store stores the published encrypted secret data E D in association with the criteria C such as by tagging E D with C thereby controlling different kinds of access to C. For example the information store maintains the association between E D and C while making C invisible to the party.

After verifying that the party meets the recipient criteria the PKG sends the party a decryption key for decrypting the encrypted secret data. As the use of encryption keys for maintaining user privacy grows significantly the system of represents the recipient criteria C in an information representation format or structure e.g. a RDF graph and uses the RDF graph as a public key to encrypt the secret data and publishing the encrypted data S.

The system also supports a content querier to represent querier criteria C in the information representation format or structure e.g. a RDF graph and uses the RDF graph to query for secret data encrypted with the same querier criteria C . The PKG then verifies r whether the content querier meets the querier criteria C . If so the PKG sends the content querier a decryption key and the content querier can use the decryption key to decrypt the encrypted data.

When communication is anonymous the decision to reveal the identities of the communicating parties is left up to the parties involved. There may be no need or desire by the communicating parties to reveal their true identities after communicating the secret data. Some users may not want to possess the secret data or the identification of the parties or they want to avoid such data be compiled into histories of their activities.

To allow queriers to find suitable and appropriate content the system labels encrypted content i.e. secret data for target recipients satisfying the recipient criteria C with the recipient criteria C to increase query efficiency. As discussed the derivatives of the recipient criteria C such as a hash ID or keyed hash ID of the recipient criteria can be used as the labels to reduce data size network traffic and storage space. Keyed hash IDs provide one additional layer of security however it takes time and network resources to transport a corresponding key ID and decrypt a keyed hash ID with the key corresponding to the key ID. Alternatively plain unkeyed hash IDs are used for efficiency.

The system supports a content querier to interact with the information store in different ways to obtain encrypted content data. In one embodiment a content querier queries the information store with different criteria to obtain encrypted packets which can be decrypted by those criteria. In another embodiment the content querier publishes a representation of information at the information store so that the information store can match the published information against all of internally and or externally available criteria and report matches to the content querier. The query the querier criteria and the recipient criteria are very flexible in terms of length and content since they are not limited by any formats set in existing websites. Therefore the sender and the querier can be as creative as they want to be without concerning the cost of publishing length set by newspaper websites etc. The information store returns with a list of results with matching degrees e.g. percentages whether there is any 100 match.

In yet another embodiment the content querier obtains an encrypted packet from the information store deduces based on the label of the packet whether suitable criteria are available locally and then proceeds to decrypt the packet by contacting the PKG.

The system offers several ways for the PKG to verify the integrity of a content querier that requests a decryption key. In one embodiment the PKG verifies whether the content querier actually possesses satisfies the querier criteria C based on the access rights of the content querier. In another embodiment the PKG verifies the content querier based upon available history involving the querier. In another yet embodiment the PKG outsources the information store to verify whether the content querier actually possesses satisfies the querier criteria C . The information store checks locally or with other information stores to verify the querier offered criteria C .

To simplify the discussion RDF graphs are used as one example of representation of the recipient querier and sender criteria. In one embodiment RDF graphs represent decision diagrams and describe resources with classes properties and values. A node resource is any object which can be pointed to by a uniform resource identifier URI properties are attributes of the node and values can be either atomic values for the attribute or other nodes. RDF Schema provides a framework to describe application specific classes and properties. Classes in RDF Schema are like classes in object oriented programming languages. This allows resources to be defined as instances of classes and subclasses of classes.

The RDF graphs are represented or encoded in decision diagrams which describe the properties and relations of different classes. A class has a name and potentially several associated properties and it may be a subclass of another class. Possible properties are represented as arcs from one class node to other class nodes. These property arcs can be properties of the object which have values that are the nodes targeted by the property arcs .

Each RDF graph includes a set of unique triples in a form of subject predicate and object which allow expressing graphs. For example in this piece of information Jenna is a Dave Stewart fan the subject may be Jenna the predicate may be is and the object may be Dave Stewart fan. The simplest RDF graph is a single triple. Any node or entity can store unconnected graphs. As later explained in more detail the approach described herein can be adapted in a smart space that includes the semantic web and has distributed nodes and entities that communicate RDF graphs e.g. via a blackboard or a shared memory .

To further reduce the size of the criterion representation the system uses for instance a subset of the RDF graph to represent the recipient criteria. By way of example a compact representation of the RDF graph in the form of a reduced ordered binary decision diagram ROBDD is used as a subset of the RDF graph. In another embodiment instead of the ROBDD an augmented ROBDD AugBDD including a hash identifier is employed to further reduce the size of criterion representation. As the size of the criterion representation is further reduced the storage required for the criterion representation is also reduced. More specifically the system provides for hash tables listing known or existing RDF graphs along with their corresponding respective ROBDDs hash identifiers and other related information. A user may then consult one of the hash tables to obtain a corresponding decision diagram with a hash identifier.

One consideration for selecting the RDF graph encoding scheme is that the encoding scheme should generate a hash identifier for a decision diagram with a reasonably small size while maintaining uniqueness of the hash identifier such that any two decision diagrams will not have identical hash identifiers. For example upon receiving a search query the system serializes the decision diagram into variables and then feeds the variables into a hash function thereby obtaining unique hash identifiers corresponding to the decision diagram. In addition the system can truncate the hash identifiers to a specific bit size while maintaining their uniqueness thereby saving communication resources e.g. reducing network bandwidth while transmitting the same information.

In other words to address the problem of the traditional public encryption systems a system of introduces the capability to query content protected by identity based encryption. The RDF graphs of recipient querier and sender criteria are encoded to decision diagrams to be communicated between the nodes e.g. the UE and entities e.g. the platforms etc. . To further reduce communication traffic the system encodes e.g. hashes the decision diagrams of the criteria into hash IDs and avoids sending decision diagrams of the criteria by sending the hash IDs and optionally a construction history of the decision diagrams . The reduced ordered binary decision diagram ROBDD is used as an efficient representation for a binary decision diagram representing the criteria and hashed with a hash function into a hash identifier hash ID .

As shown in the system comprises a user equipment UE having connectivity to a personal computer a web service platform and a communication platform via a communication network . Each of the UE the personal computer the web service platform and the communication platform has a criterion application and a database for storing hash identifier and decision diagram information. By way of example the communication network of system includes one or more networks such as a data network not shown a wireless network not shown a telephony network not shown or any combination thereof. It is contemplated that the data network may be any local area network LAN metropolitan area network MAN wide area network WAN a public data network e.g. the Internet short range wireless network or any other suitable packet switched network such as a commercially owned proprietary packet switched network e.g. a proprietary cable or fiber optic network and the like or any combination thereof. In addition the wireless network may be for example a cellular network and may employ various technologies including enhanced data rates for global evolution EDGE general packet radio service GPRS global system for mobile communications GSM Internet protocol multimedia subsystem IMS universal mobile telecommunications system UMTS etc. as well as any other suitable wireless medium e.g. worldwide interoperability for microwave access WiMAX Long Term Evolution LTE networks code division multiple access CDMA wideband code division multiple access WCDMA wireless fidelity WiFi wireless LAN WLAN Bluetooth Internet Protocol IP data casting satellite mobile ad hoc network MANET and the like or any combination thereof.

The UE is any type of mobile terminal fixed terminal or portable terminal including a mobile handset station unit device multimedia computer multimedia tablet Internet node communicator desktop computer laptop computer Personal Digital Assistants PDAs audio video player digital camera camcorder positioning device television receiver radio broadcast receiver electronic book device game device or any combination thereof. It is also contemplated that the UE can support any type of interface to the user such as wearable circuitry etc. .

By way of example the UE the personal computer the web service platform and the communication platform communicate with each other and other components of the communication network using well known new or still developing protocols. In this context a protocol includes a set of rules defining how the network nodes within the communication network interact with each other based on information sent over the communication links. The protocols are effective at different layers of operation within each node from generating and receiving physical signals of various types to selecting a link for transferring those signals to the format of information indicated by those signals to identifying which software application executing on a computer system sends or receives the information. The conceptually different layers of protocols for exchanging information over a network are described in the Open Systems Interconnection OSI Reference Model.

Communications between the network nodes are typically effected by exchanging discrete packets of data. Each packet typically comprises 1 header information associated with a particular protocol and 2 payload information that follows the header information and contains information that may be processed independently of that particular protocol. In some protocols the packet includes 3 trailer information following the payload and indicating the end of the payload information. The header includes information such as the source of the packet its destination the length of the payload and other properties used by the protocol. Often the data in the payload for the particular protocol includes a header and payload for a different protocol associated with a different higher layer of the OSI Reference Model. The header for a particular protocol typically indicates a type for the next protocol contained in its payload. The higher layer protocol is said to be encapsulated in the lower layer protocol. The headers included in a packet traversing multiple heterogeneous networks such as the Internet typically include a physical layer 1 header a data link layer 2 header an internetwork layer 3 header and a transport layer 4 header and various application headers layer 5 layer 6 and layer 7 as defined by the OSI Reference Model.

In this embodiment the criterion application includes a control logic for controlling the operation of the criterion application and a constructing module for constructing a RDF graph from one or more recipient querier and sender criteria a ROBDD from the RDF graph a hash identifier of the ROBDD and a keyed hash identifier of the ROBDD. The constructing module also constructs a RDF graph from secret data and queries a ROBDD from the RDF graph a hash identifier of the ROBDD and a keyed hash identifier of the ROBDD. The criterion application also includes an encryption decryption module for encrypting the secret data and the queries using one of the ROBDD hash identifier or keyed hash identifier of the criteria as a public key and decrypting the encrypted secret data with a decryption key. The criterion application further includes a publishing module for publishing the encrypted secret data and queries. The criterion application further includes a matching and verifying module for matching received criteria against locally or eternally stored criteria and for verifying the received criteria are actually met by a source of the received criteria. The criterion applications have the same or similar features of the criterion application

By way of example in social networking and applications a user may want to find data others shared online. The sender who made the shared data available only for people associated with some data applications and devices that meet some arbitrary criteria. These recipient criteria may include 1 personality features such as age gender personal interest etc. 2 receiving device must fulfill some technical requirements such as Blu ray digital right management DRM compliant etc. 3 recipient as a frequent user of certain applications media content items certain type of media content etc. 4 any user defined conditions 5 any enforced conditions e.g. enforced by a server device player etc. 6 any sensed physical values including a temperature location etc. of a device or of the environment the device is situated or 7 any logical combinations of above conditions.

In many circumstances a user sender may want to share information with just people of like mind and or same hobbies e.g. people meeting certain recipient criteria . In other words the user may only want to reach out people meeting these criteria without knowing their actual identification. In this scenario the criterion application of the user sender encrypted the information to be shared e.g. songs of Dave Stewart recorded in a live concert using the recipient criteria itself e.g. an age range and music preferences as a public key of identity based encryption.

Based at least in part on the query e.g. songs of Dave Stewart the criterion application receives e.g. from an information store or the internet one or more second sets of criteria e.g. female fans of Dave Stewart age 18 24 associated with respective second users wherein the second sets of criteria are matched at least in part to the first set of criteria and wherein at least one of the second sets of criteria is used as a public key for encrypting data e.g. songs of Dave Stewart recorded in a live concert according to an identity based encryption scheme Step . When transmitting only the recipient criteria and not the encrypted content the network traffic is reduced. The criterion application can query the encrypted content later if necessary.

In a process the node has an option to send to the information store a message including the recipient criteria together with a header. For example the message can be an email SMS EMS MMS etc. and the header can describe or otherwise specify the recipient criteria. When the recipient criteria are sent in a message without a header the information store or any intended recipient can read the recipient criteria transmitted through a logically separate message. The separate message makes the recipient criteria visible i.e. not being encrypted. On the other hand if the recipient criteria are not described in the header or transmitted through the separate message the intended recipient that meets the specified criteria and or has a corresponding decryption key given by the information store cannot determine whether to decrypt the published encrypted secret data C before trying to decrypt C.

When the message is sent with a header containing the recipient criteria the information store can take action based upon the header without reading the message body. Further if the information store makes the header available for everyone the intended recipient e.g. the node can determine whether to decrypt C before trying to decrypt C. It is noted that under some conditions although non intended recipients e.g. as other nodes may have no key to open up or decrypt the published encrypted secret data the non intended recipients may nonetheless use the recipient criteria described in the header to generate other encrypted secret data e.g. spam etc. targeted at the group of intended recipients. When the node is concerned about such spam attacks or other unwanted information resulting from the recipient criteria described in the header the node can still include the header in the message while requesting that information store not to publish the recipient criteria.

Information on IBE standard parameters is available in Network Working Group RFC5091 Identity Based Cryptography Standard IBCS 1 Supersingular Curve Implementations of the BF and BB1 Cryptosystems by Boyen et al. December 2007 which is hereby incorporated in its entirety by reference. By way of example the following system parameters are set to be compatible with Type 1 Curve implementation see section 4.4.2 of RFC5091 under the Boneh Franklin scheme which is an IBE scheme 2001 well known in the art. It is noted that this system can be adapted to optimal and efficient IBE schemes other than the Boneh Franklin scheme. In one embodiment a setup algorithm is run by the PKG one time for creating the whole IBE environment and specifying the IBE scheme to be used. In one scheme a master private key is kept secret and used to derive users private keys. The system parameters are made public. In one embodiment communicating parties e.g. the PKG the node the information store the recipient etc. share common system domain parameters consisting of 

1. A curve equation e.g. y 2 x 3 1 mod p . Notation means exponentiation for example 3 2 9. This curve is super singular elliptic curve defined over prime field modulus p.

6. A domain specific common public key Pub on the curve that is a point x y of the curve y 2 x 3 1 Pub s G where s is master key. For example the Pub can be computed from a master secret S. Since s is not part of domain parameters revealing Pub does not reveal the s.

It is described on page 57 of RFC5091 that the security levels of the system can be achieved with certain parameter sizes. RSA which stands for Rivest Shamir and Adleman who first publicly described it is an algorithm for public key cryptography and is widely used in electronic commerce protocols. Typically 1024 bit RSA corresponds to 80 bit of security. This security level can be achieved with a 512 bit p and a 160 bit q. 2048 bit RSA is recommended nowadays and it corresponds to 112 bit security. This security level can be achieved with a 1024 bit p and a 224 bit q.

The decryption operation starts from the querier node that independently sets and sends a query for content data i.e. the user s favorite song of Dave Stewart to the information store in a process . The query may explicitly or implicitly include information of the node i.e. querier criteria C . The querier criteria may include 1 personality features such as age gender personal interest etc. 2 receiving device fulfilling some technical requirements such as Blu ray digital rights management DRM compliance etc. 3 querier as a frequent user of certain applications media content items certain type of media content etc. 4 any user defined conditions 5 any enforced conditions e.g. enforced by a server device player etc. 6 any sensed physical values including a temperature location etc. of a device or of the environment the device is situated or 7 any logical combinations of above conditions. In another embodiment the query is explicitly or implicitly associated information within a data mining depository include the 1 7 information.

Upon receiving the query that associated or embedded with the querier criteria C the information store matches the querier criteria C against all the recipient criteria C available locally and or externally. The information store then sends the querier node any matched recipient criteria C for the node in a process . By way of example matched recipient criteria C include female fans of Dave Stewart age 18 24 fans of Dave Stewart who downloaded online Sweet Dreams people who attended Dave Stewart s 2008 concert in London etc.

In one embodiment the query is embedded with the querier criteria C the information store can match the querier criteria C against all the recipient criteria C directly. In another embodiment the query is associated with the querier criteria C e.g. by the user name Jenna the information store can search within its own database and or external databases for other information of Jenna such as the above mentioned 1 7 information in order to extract the querier criteria C of Jenna. The information store then can match the extracted querier criteria C of Jenna against all the available recipient criteria C. All the information can be stored in the formats of RFG graphs ROBDD hash IDs keyed hash IDs to reduce storage space and or accelerate the marching speed at different degrees based upon a selected format.

As mentioned in the process the sender node has an option to send to the information store a message including the recipient criteria together with a header that describes or otherwise specifies the recipient criteria. When the recipient criteria are sent in a message without a header the querier node may read the recipient criteria transmitted through a logically separate message that makes the recipient criteria visible i.e. not being encrypted. The querier node then determines whether to decrypt C before trying to decrypt C. After reviewing all of the matched recipient criteria C from the information store as displayed on an user interface the querier node selects one or more of the matched recipient criteria C e.g. females fans of Dave Stewart age 18 24 and sends to the PKG request for a decryption key to decrypt the selected recipient criteria C in a process .

Upon receiving the request for the decryption key for the selected recipient criteria C the PKG verifies whether the querier node satisfies the selected recipient criteria C i.e. females fans of Dave Stewart age 18 24 by check locally for the node s access rights or outsourcing to the information store for verification in a process . In one embodiment the PKG verifies the querier criteria by checking one or more access rights of the querier. In another embodiment the PKG verifies the querier criteria by comparing or initiating comparison of the querier criteria with relevant querier criteria available locally or externally e.g. in the information store . The relevant querier criteria involving an online or offline public record e.g. a birth certificate school record driver s license tax record real property record criminal records etc. transaction e.g. flight tickets movie tickets CD DVD book purchases restaurant store hospital gym visits car house education loans credit debts phone utility heating bills internet browsing behaviors etc. activity e.g. basketball team hike concert etc. visit e.g. a hospital gum park restaurant museum etc. interaction e.g. blog discussion forum social network profile online gaming virtual life via an avatar etc. communication content item e.g. email SMS MMS call media conference etc. membership e.g. golf club airline frequent flyer speaker bureau etc. or a combination thereof.

Once the querier node is verified as satisfying the selected recipient criteria C the PKG sends a decryption key corresponding to the selected recipient criteria C to the node in a process .

In yet another embodiment the processes and are performed by the information store that can perform relevant functions of the PKG . In the case the information store and the PKG can merge as one. In yet another embodiment the information store even assumes PKG s function of distributing to all entities the common parameters. In the case the information store fully replaces the PKG .

An encrypted packet by a sender and a query by a querier are used differently. By way of example for an urgent product order a user has no time to publish the order and wait for targeted recipients to contact the user like a typical sender e.g. the node . In this case the user should send a query to one or more information stores and ask the stores to match the query against existing encrypted secret data to find a match. This embodiment offers one option for a querier to locate queried content quickly.

When querying the information store for content the querier may select to keep the confidentiality of the querier s actual identification. By way of example a business intelligence analyst does not wish to link the query with the company that the analyst is working for to prevent any competitors to get any hint of the company s future plans.

An encrypted packet by a sender and a query by a querier are used differently. By way of example for an urgent product order a user has no time to publish the order and wait for targeted recipients to contact the user like a typical sender e.g. the node . In this case the user can include in the same encrypted packet encrypt instructions to information stores to execute matching against existing and or incoming encrypted packets locally and or externally.

Alternatively the querier node can skip encrypting a packet send only a query to one or more information stores and ask the stores to match the query against existing encrypted secret data to find a match. The querier may also send a persist query to the information stores and ask the stores to continue matching the query against existing and incoming encrypted secret data until finding a match or even continuing after finding a match. Another example process used in the approach of system is described in more detail with respect to below.

In the P2P architecture of a sender node executes a process of independently selecting one or more recipient criteria and secret data a process of encrypting the secret data using the recipient criteria and a process of optionally sending to a querier node a message including the recipient criteria together with a header. The processes are executed in similar manners as the processes in .

Instead of contacting the cloud of an information store as in the querier node contacts the sender node to send a query for content data i.e. the user s favorite song of Dave Stewart in a process . Upon receiving the query that is associated or embedded with the querier criteria C the sender node matches the querier criteria C against all the recipient criteria C stored locally and or externally. The sender node sends the querier node any matched recipient criteria C in a process . The matched recipient criteria C may include for instance criteria such as female fans of Dave Stewart age 18 24 fans of Dave Stewart downloaded online Sweet Dreams people attended Dave Stewart s 2008 concert in London etc. 

Thereafter the querier node interacts with the PKG in via processes that are the same as the processes of . The querier node selects one or more of the matched recipient criteria C and sends to the PKG request for a decryption key to decrypt the selected recipient criteria C in the process . Upon receiving the request for the decryption key the PKG verifies the querier node in the process . Once the querier node is verified as satisfying the selected recipient criteria C the PKG sends a decryption key corresponding to the selected recipient criteria C to the querier node in the process .

In another embodiment the sender node and the query node delegate computation tasks to one or more information stores use the storage of the information stores as primary or back up storage etc. By way of example the nodes use the computer resources including software applications and hardware equipment etc. and or IT services of multiple information stores of various service providers to conduct cloud computing by virtualizing the internet resources on an user interface of the nodes so that the nodes can dynamically on demand deploy scalable internet resources. In this case the nodes request a service resource not a specific server of an information store or a service provider . Cloud computing reduces software and or hardware expenditures by the nodes. The nodes only need to pay the information stores on a utilization basis.

However once anonymous networks extend outside of small and friendly user communities these networks are susceptible to spam attacks launched by malicious users. Such attacks require different solutions in the anonymous networks such as an anonymous sender verification mechanism. is an operational diagram for query encryption in a peer to peer P2P architecture according to one embodiment. To avoid compromising the anonymity of queries in the P2P architecture the system uses one or more sender criteria Cs e.g. fans of Dave Stewart as a public key to encrypt a query. Thereafter the PKG verifies whether a sender satisfies the sender criteria Cs set by the querier node . The PKG provides a decryption key to the sender node to decrypt the encrypted query only if the sender node satisfies the sender criteria Cs. The system provides a verification means for a secret data sender to verify recipients such that only intended recipients can decrypt the encrypted secret data. The system also provides a reverse verification means for a querier to verify the secret data senders such that only intended senders can decrypt the encrypted queries.

In the P2P architecture of a querier node executes a process of independently selecting one or more sender criteria and query data a process of encrypting the query data using the sender criteria and a process of optionally sending to a sender node a message including the sender criteria together with a header. The processes are executed in similar manners as the processes in .

Instead of directly receiving the query i.e. songs of Dave Stewart as in the sender node is may send to the querier node a query for an IBE encrypted query that was IBE encrypted with sender criteria Cs in a process . As mentioned the sender criteria Cs are set by the querier to screen only senders satisfying the sender criteria Cs to decrypt the encrypted query. Upon receiving the query for an encrypted query the querier node matches sender criteria Cs e.g. a Canadian Better Business Bureau certified A information store that are sent from the sender node against all the sender criteria Cs e.g. a US Better Business Bureau certified A information store stored locally and or externally. The querier node sends to the sender node any matched sender criteria Cs in a process .

Thereafter the sender node interacts with the PKG in via processes that are the same as the processes of . The sender node selects one or more of the matched sender criteria Cs and sends to the PKG request for a decryption key to decrypt the selected sender criteria Cs in the process . Upon receiving the request for the decryption key the PKG verifies the sender node in the process . Once the sender node is verified as actually satisfying the selected sender criteria Cs e.g. a US Better Business Bureau certified A information store the PKG sends a decryption key corresponding to the selected sender criteria Cs to the sender node in the process .

The processes of are further discussed with respect to and which depict example RDF graphs that can be used in the IBE encryption process. In one embodiment the criterion application formats each of the recipient querier and sender criteria and each of the queries into a predetermined information representation format or structure e.g. a RDF graph .

The RDF graph includes an instance 0x12D is a e.g. an RDF process Dave Stewart fan e.g. an RDF node and has a name e.g. an RDF process of Jenna e.g. an RDF node . To simplify the discussion there are only two vertices extending from instance 0x12D and there is no subtree below the RDF node Dave Stewart fan or the RDF node Jenna. However it is contemplated that there can be any number of vertices and or subtrees below any of the RDF nodes e.g. nodes or of the RDF graph to represent the information of age 18 24 and attended Dave Stewart concerts etc. as part of querier criterion RDF. is a diagram of a more complicated RDF graph and is a diagram of a reduced ordered binary decision diagram corresponding to the RDF graph of .

Returning to the process of the criterion application constructs the ROBDD of from the RDF graph of representing the querier criteria. In particular the criterion application serializes the RDF graph into variables of a predetermined format to construct the ROBDD . There are many ways or conditions for encoding the RDF graph into bit vectors. For instance the bit size can be three as discussed below. Different bit sizes result in for instance different numbers of variables which lead to ROBDD graphs of different sizes and shapes. ROBDD is essentially a group of Boolean variables in a specific order and a directed acyclic graph over the variables. In the example of the criterion application sets five BDD variables representing the subject e.g. the instance 0x12D the predicates e.g. process a and process name and the objects e.g. node Dave Stewart fan and node Jenna . The criterion application then selects a number of bits for representing and encoding the subject the predicates and the objects. Accordingly the criterion application encodes these variables in three bits and saves the encoding information in a dictionary as follows in Table 2 

The criterion application constructs a ROBDD from the variables. With respect to the example of the criterion application uses the encoded variables to create a ROBDD graph consisting of nine one bit variables where the first three variables are interpreted as a variable encoding the first field of the triple the second three variables are interpreted as a variable encoding the second field and the last three variables are interpreted as a variable encoding the third field of the triple. This ROBDD is unique for the chosen triples and variable ordering resulting in representation of the following encoded triples in Table 3 

Thereafter in one embodiment the criterion application matches the querier criteria corresponding to the query against one or more recipient criteria each used as a public key of identity based encryption on secret data. Similar encoding processing for recipient criteria has already been performed such that the querier criteria and the recipient criteria can be matched in the same format.

The criterion application then causes at last in part storage the ROBDD of the querier criteria. Since the ROBDD is smaller than the RDF graph this embodiment provides a means for reducing the storage and network traffic for sending recipient and querier criteria related information.

In another embodiment the criterion application computes a hash identifier corresponding to the ROBDD of the querier criteria thereby matching the querier criteria against the recipient criteria in the hash id format. The criterion application then causes at last in part storage of the hash identifier of the querier criteria. Since the hash identifier is shorter than the ROBDD this embodiment provides a means for further reducing the storage and network traffic for sending querier criteria related information.

To compute the hash identifier of the ROBDD the criterion application selects a hash function for obtaining unique hash identifiers within the system and feeds the representation into the hash function. Like the size of the bit encoding the hash function is usually chosen heuristically or to be adhered to by all users and or components of the system . Optionally the criterion application shortens the computed hash identifier by truncating a result of the hash function while obtaining unique hash identifiers. The criterion application then stores the hash identifier with the ROBDD before publishing the hash identifier of the recipient criteria.

As discussed there are different advantages of sending to the information store the message including the recipient criteria with or without a header describing the recipient criteria. In another embodiment by using a header that contains some derivative of the recipient criteria such as the hash identifier or the keyed hash identifier of the recipient criteria the problem of spam attacks are prevented while the information of the recipient criteria is made available for the information store and or intended recipients. To obtain the ROBDD or the RDF from the hash identifier or the keyed hash identifier the information store and or the intended recipients may compare incoming derivative of the potential recipient criteria with the derivatives in a database to identify the corresponding ROBDD or RDF . Alternatively the information store. Alternatively the intended recipients may reconstruct the ROBDD or RDF via a reverse computation as discussed above in conjunction with the construction history of the ROBDD or RDF in the database. When the derivative of the recipient criteria is a keyed hash identifier the key used to encrypt the hash identifier is identified by the key ID and then used to decrypt the keyed hash identifier.

Similar encoding processing for the encrypted secret data and or the query is performed such that they can be selectively transmitted received stored and published more efficiently.

Optionally the encrypted hash identifier of the secret data and query can be further encrypted with a key following a similar process for creating a keyed hash identifier of the secret data and query to provide one additional layer of protection. The encrypted ROBDD hash identifier or keyed hash identifier of the secret data can be published in the semantic web with the hash identifier or keyed hash identifier of the recipient criteria that is used to encrypt the encrypted decision diagram hash identifier or keyed hash identifier of the secret data. The above discussed sets of keys key IDs and the encrypted targets can be stored at the PKG nodes the information store for marching the corroding ROBDDs or RDF graphs without transmitting them over the communication network. In addition if these entities also store the construction histories of the ROBDDs or RDF graphs they can reconstruct a ROBDD or RDF graph locally based on a hash identifier or a keyed hash identifier when the ROBDD or RDF graph is not stored locally.

The criterion application within Matti s phone constructs a RDF graph containing the recipient criteria and converts the RDF graph into a ROBDD during an operation . The criterion application also computes a hash identifier for the ROBDD via AugBDD id C ID AugBDD c during an operation . Matti sets his secret data to include for example a Dave Stewart fan club account number and fan club postal office mail box for fans to denote money to buy two albums Sweet Dreams and One of the boys or to directly denote the two albums. The secret data optionally contains the fan club account name and password assigned by a service provider. By way of example Matti sets the secret data which Matti wants to share with people who can demonstrate to fulfill the recipient criteria as follows in Table 5 

The criterion application then converts the secret data into a ROBDD generates a hash identifier via S ID AugBDD s . A set of IBE common domain parameters e.g. common pars as discussed is obtained from a centralized source. The criterion application encrypts the secret data using the hash identifier as a public key via Msg IBE crypt common pars C ID S ID . The criterion application publishes in the cloud the hash identifier and a packet message containing the encrypted secret data in a format of E hash id data during an operation .

Instead of the cloud the criterion application inserts the hash identifier of the recipient criteria and the packet into a smart space discussed later as common data via Insert Matti SP IBE content msg C ID .

When Jenna an 18 years old female indicates via her phone that she wants to download one or more songs of Dave Stewart from an information store in the cloud the criterion application within Jenna s phone updates Jenna s old ROBDD into a ROBDD with information of the downloaded songs as querier criteria C and coverts the new ROBDD into a hash identifier during an operation . By way of example Jenna s querier criteria i.e. background information are expressed as follows in Table 6 

The criterion application then sends the query e.g. for songs of Dave Stewart to the cloud during an operation . Optionally all or part of Jenna s criteria is sent to the cloud for verification that Jenna actually meets the specified criteria. The cloud may use the hash identifiers of Jenna s criteria and or the encrypted query for fast processing.

An information store in the cloud matches Jenna s new ROBDD corresponding to the querier criteria with the ROBDD corresponding to the Matti s hash identifier of the recipient criteria as well as other recipient criteria available internally and or externally and then notifies a PKG any positive matching results during an operation . Alternatively the information store matches their corresponding hash IDs to speed up the process. The PKG then finds the private decryption key s corresponding to any matched recipient criteria including Matti s and sends the decryption key s to Jenna during an operation .

The criterion application within Jenna s phone then can use the decryption key to decrypt the packet message containing the encrypted secret data during an operation .

Before decrypting the packet Jenna s criterion application checks the header of the packet for the recipient criteria to determine if it is something that might interest her. For example the determination can be made automatically based upon Jenna s preference data stored in the phone or made by displaying the matched recipient criteria to Jenna to prompt her to indicate her interest. If the header contains a hash identifier of the recipient criteria the criterion application searches locally for a matched ROBDD then determines based upon the ROBDD. The social network has friendship relations and public information of its participants. These relations and information are formed into RDF graphs which can be constructed as AugBDDs and published at a central location or any information store in the cloud . The AugBDDs may contain history information of its construction. An ROBDD encoding dictionary database may be available for all participants. If necessary the dictionary is transmitted along with the ROBDDs or the AugBDDs to a participant.

If there is no matched ROBDD stored locally the criterion application within Jenna s phone can reconstruct the ROBDD based upon the construction history of the ROBDD or ask for the ROBDD from the information store . If the header contains a keyed hash identifier of the recipient criteria the criterion application finds the key used to encrypt the hash identifier of the recipient criteria either locally or from the information store decrypts the keyed hash identifier with the key and then proceeds to find the corresponding ROBDD of the recipient criteria as discussed.

Optionally the cloud enforces configuration validity check between a node e.g. Jenna s phone and the PKG during an operation . For example the cloud checks the hash identifier of Jenna s ROBDD and the privacy key to ensure that their configurations are within acceptable or predetermined ranges.

In a P2P architecture Matti and Jenna are in control of the functions of the information store or even the functions of the PKG . Therefore the information store and or the PKG become absent from . The cloud can be used by Matti and Jenna for cloud computing so as to reduce hardware and software expenditures of Matti and Jenna.

To screen senders and avoid spam in P2P architecture the criterion application within Jenna s phone sets sender criteria e.g. high consumer peer rating and IBE encrypts Jenna s query with the sender criteria to ensure only senders satisfying the sender criteria can decrypt Jenna s query. By way of example the sender criteria i.e. background information are expressed as follows in Table 7 

The criterion application within Jenna s phone constructs a RDF graph containing sender criteria e.g. high consumer peer rating and converts the RDF graph into a ROBDD during an operation . The criterion application also computes a hash identifier for the ROBDD via AugBDD id Cs ID AugBDD cs during an operation . The sender criteria is set to screen only senders satisfying these criteria such that only they can decrypt the encrypted query and then interact with Jenna. In another embodiment the sender criteria are applied to an information store inside or outside of P2P architecture .

The criterion application within Jenna s phone also checks the hash identifier of Matti s criteria against government records e.g. class actions and or consumer complaint records etc to ensure that Matti actually satisfies the sender criteria and the sender is actually Matti. This is a crucial function to maintain the integrality of the system .

Thereafter the criterion application within Jenna s phone matches Matti s ROBDD with the ROBDD corresponding to Matti s hash identifier of sender criteria in an operation and then notifies a PKG of any positive matching results during another operation . Alternatively the criterion application matches their corresponding hash IDs to speed up the process. The PKG then finds the decryption key corresponding to Matti s hash identifier of the sender criteria and sends the decryption key to Matti during another operation . With the decryption key the criterion application within Matti s phone can decrypt Jenna s encrypted query or any other queries encrypted with the same sender s criteria.

By way of example the full ROBDD G of the querier criteria C or its sub graphs each of which partially correspond to the querier criteria C are processed by the information store. The information store stores all pairs of hash ids and related encrypted packets. The information store computes a hash ID for the querier criteria C i.e. hash id from the full ROBDD G. The information store compares hash id against hash id of the recipient criteria C that is stored with the encrypted packet to determine whether G contains criteria suitable for hash id in a Step . The Step is repeated for each hash ID of recipient criteria C stored in the information store.

When hash id and hash id are not identical the information store reconstructs a ROBDD G partially corresponding to the recipient criteria C in Step by using the construction history and hash id. In Step the information store checks whether G is a subgraph of G. This is done efficiently when G and G both are in AugBDD format.

When G is determined as a subgraph of G in Step G is amendable and sufficient for decrypting the encrypted secret packet. The information store may send to the querier e.g. Jenna 1 the hash id and the encrypted packet 2 only the hash id or 3 only the encrypted packet.

When receiving the matched hash id i.e. the same as hash id and the encrypted packet the querier uses the hash id to request for a decryption key from the PKG and decrypts the encrypted packet with the decryption key. In addition the querier saves the hash id and the encrypted packet in its own AugBDD database for future reference. Optionally the querier saves the decryption key and the decrypted packet in its own database for future information.

When receiving only the hash id the querier fetches the encrypted packet in the cloud by itself and contacts the PKG for a decryption key to decrypt the encrypted packet. It is possible that the querier has already received the encrypted packet via other means. By way of example the querier e.g. Jenna has already received a message from a record store where the querier bought the album of Dave Stewart which includes the encrypted packet. It is also possible that the querier possesses a full ROBDD of the secret data such that the querier does not have to decrypt the encrypted packet. In this case the querier only needs to search within its own AugBDD database to see if there is any full ROBDD G corresponding to the hash id. By way of example the querier already received a message from a fan club of Dave Stewart. The fan club pre screened members according to the recipient criteria C corresponding to hash id and sent out the message with secret data in a ROBDD format without being encrypted with the recipient criteria C .

When receiving only the encrypted packet the querier looks into its own AugBDD database for a hash ID of its own querier criteria C i.e. hash id . Alternatively the querier computes hash id from its own ROBDD stored in its own AugBDD database. The querier then uses the hash id to request for a decryption key from the PKG and decrypts the encrypted packet with the decryption key.

The process of matching querier criteria against recipient criteria according to can be applied to matching sender criteria set by a querier against sender criteria of senders to screen the senders.

In one embodiment the querier decomposes the full graph of the querier s background information graph and selects a sub graph i.e. a decomposed piece as querier criteria for the query to send to the cloud. The cloud verifies the sub graph of the querier against public or commercial records in the cloud to ensure that the querier actually satisfies the sub graph. The cloud also checks if the querier is actually the entity as represented.

The querier may require the information store cloud to keep the querier criteria confidential. The cloud implements an internal table which keeps track of the relationship between all of the different criteria and the associated encrypted content and or to keep the true identification of the sender and the querier confidential. The cloud then matches the sub graph of the querier against all of the recipient criteria in the cloud based upon the process discussed in conjunction with . This provides a means to allow an entity in the system to always find some matches based upon partial graphs.

The above described embodiments advantageously enhance outreaching and marketing efforts by providing an anonymous yet tailored messaging mechanism thereby reducing network resources e.g. computing resources bandwidth etc. that would otherwise be required to individually identify potential recipients of the marketing efforts. The above described embodiments also can be used by non profit as well as for profit entities to distribute any access restricted information without knowing or specifying the identification of the recipients. By way of example a natural disaster may potentially create orphans. A non profit organization can then use the system to send out messaging worldwide that is specifically targeted to solicit only those prospective adoptive parents that are forty five or younger married for at least two years and have no more than two previous marriages per spouse without children or with children older than five etc.

As another example companies that set goals to use make and sell green products services in all aspects of their business operations can use green recipient criteria to solicit for purchasing green products services in order to manufacture green products or provide green services. By setting up the green recipient criteria such as energy efficiency reduced environmental impact or ecological preservation the companies can pre screen suppliers service providers e.g. building maintenance contractors business consultants financial advisors doctors lawyers tutors etc. customers e.g. top 50 dental product manufacturers in China tenants etc. employees etc. with the required qualification and experience.

By encrypting the recipient criteria the sender of the message keeps the confidentiality of the recipient criteria. By way of example a pharmaceutical company wants to test the efficacy of Omalizumab an approved drug for treating asthma in patients with idiopathic anaphylaxis recurrent hypersensitive allergic episodes for which a cause is not identified . The pharmaceutical company encrypts the eligibility criteria for medicine trial volunteers so that their competitors have no access to such commercially valuable information. The eligibility criteria may include age between 18 and 60 years having been diagnosed with idiopathic anaphylaxis episodes mild to severe at least six times per year at least once within the last 2 months and emergency room visit etc. The pharmaceutical company can also encrypt the recruiting criteria for clinical trial investigators and keep the clinical trial confidential since an earlier stage.

In another example a marketing company encrypting the recipient criteria to look for participants of a focus group for a target such as an existing or new product service concept advertisement idea packaging price etc. in order to find out the participants perceptions opinions beliefs and attitudes towards the target. The above described embodiments provide a means to keep the target and recipient criteria information confidential.

Besides commercial studies the above described embodiments can be used for non profit studies such as social sciences and urban planning to allow interviewers to study by interviewing and observing behaviors of people in a group or one on one setting online teleconferencing in person etc. and discover unexpected issues for exploration. The above described embodiments provide means for the message sender to outreach to specific recipients without knowing their identities which not only saves the sender s resources time and money to research assemble purchase a tailored mailing list but also encourages the public to participate in projects since the participants can remain anonymous.

The conventional participant recruiting scheme requires the sender to publicly post the recruiting criteria on media such as newspaper sender s own website job websites professional association websites clinical trial matching website etc. For example the US patent office sends out a general recruiting letter to all registered patent attorneys and agents to invite them to apply for a job as a patent examiner. If applying the above described embodiments the patent office can reach out to any target recipients with specified or predetermined education technical training industrial experience in special technology that is a much big group than the group of registered patent practitioners and indicating specific job descriptions e.g. a US citizen or national PhD in pharmacology etc. in each message that a particular recipient is actually qualified for. Such a customized marketing mechanism significantly reduces the number of messages thus reducing the network traffic and extending equipment lifetime. Such a customized marketing means also spares non qualified recipients from receiving messages they cannot act upon.

When querying the information store for content the querier does not need to know the details of the content owners in order to find the targeted content. By way of example if Jenna searches for a job in the field of business management the search results can be too many to review and or apply for. Even after adding additional search criteria such as city years of experience etc. the list may still be too long to review or to apply for one by one. A more efficient approach for Jenna is to contact the information store with the highlights of his resume and instructs the information store to match her resume highlights against recipient criteria stored locally or externally such as a company s recruiting webpage . The information store provides Jenna with a much more concise list of potential jobs. Jenna may not know and has never considered some of the jobs such as a principal of a cook school a manager of a funeral home etc. on the list.

The querier criteria and the recipient criteria are very flexible in terms of length and content since they are not limited by any formats set in existing job search websites. Therefore Jenna s resume highlights can be as creative as Jenna desires. Similarly a job description by an employer can be as long as the employer wants without concerning the cost of publication length set by newspaper websites etc. The information store returns with a list of results and matching percentages whether there is any 100 match.

The above described embodiments provide a means to search beyond one or more specialty websites and provide more specialized and focused search results than the specialty websites. In the example Jenna does not have to visit different job search websites yet obtain a comprehensive coverage beyond his perception and with literally unlimited depth.

These advantages are applicable to all kinds of content queries whether in a context of business to business B2B business to government B2G business to consumer B2C consumer to consumer C2C or a combination thereof. In addition to business and e commerce these advantages are also applicable to other fields such as science technology finance health social network travel entertainment etc. By way of example for an urgent product order a querier has no time to publish the order and wait for targeted recipients to contact the querier. In this case the querier sends a persistent query to one or more information stores and ask the stores to continue matching the query against existing and incoming encrypted secret data until finding a match. In one example the query may be for an order of 30 pieces of 50 gallon gas water heaters that comply with US safety standards and Washington D.C. building codes FOB DC ASAP to reach potential suppliers worldwide which have published and are going to publish their for sale list of gas water heaters. In another example the query may search for ready to go catered food of Ahi Tuna Wasabi and Black Sesame Tartare on a Won Ton Crisp Gourmet Mini Sirloin Burgers made for a canceled 300 people corporate cocktail event.

While facilitating a message from a sender and a query from a querier the information store provides means to keep the parties anonymous maintain confidentiality of the recipient criteria and the querier criteria and enable the sender and the querier to outreach parties worldwide to match with their criteria 24 hour 365 day per year. The information stores can charge fees for facilitating and brokering transactions. When a transaction involves more than one information store one of the information stores can assume the role as a fee calculator by identifying the participants to the transaction information chain e.g. the buyer the seller and the brokers and distribute the transaction proceeds from the buyer to the seller accordingly. The fee calculator also distributes fees to intermediary brokers that helped processing the sender message and or the querier query. In another embodiment the fee split scheme may follow the music industry models such as ASCAP American Society of Composers Authors and Publishers and BMI Broadcast Music Incorporated to divide up the fees among all the information stores performing different functions of the transaction publishing the message verifying the querier generating the decryption key decrypting the encrypted secret data etc.

The system can be used in an information cloud a semantic web or a smart space architecture to be available in all locations to all nodes and entities. The goal of the semantic web is to define the meaning semantics of information and services on the web to be understandable and satisfying the web content searches by people and machines. As information on the Web grows search engines routinely return thousands of results when very often only a handful truly qualify as meaningful for the query presented. The smart space truly achieves the goals of the semantic web and supports interpretability across different service provider software and hardware platforms user equipment databases etc.

As used herein a smart space is interoperable over different information domains different service platforms and different devices and equipment. For example the smart space accommodates transmission control protocol Internet protocol TCP IP Unified Protocol UniPro created by the Mobile Industry Processor Interface MIPI Alliance Bluetooth protocol Radio Frequency Communication RFCOMM IPv6 over Low power Wireless Personal Area Networks 6LoWPAN etc. The smart space also covers technologies used for discovering and using services such as Bluetooth human interface device HID services web services services certified by the Digital Living Network Alliance DLNA the Network on Terminal Architecture NoTA . In addition the smart space constitutes an infrastructure that enables scalable producer consumer transactions for information and supports multiparts multidevices and multivendors M3 via a common representation of a set of concepts within a domain and the relationships between those concepts i.e. ontologies. The smart space as a logical architecture has no dependencies on any network architecture but it can be implemented on top of practically any connectivity solution. Since there is no specific service level architecture the smart space has no limitation in physical distance or transport.

The smart space allows cross domain searches and provides a uniform use case independent service application programming interface API for sharing information. As an example the smart space allows a mobile platform to access contextual information in e.g. a car home office football stadium etc. in a uniform way and to improve the user experience without compromising real time requirements of the embedded system. The smart space uses an ontology governance process as the alternative to using case specific service API standardization. The ontology governance process agrees and adopts new vocabularies using Resource Description framework RDF and RDFS RDF schema . When RDFS is not sufficient for defining and instantiating the ontologies web ontology language OWL or the like is used.

In one embodiment the RDF is used to join data from vocabularies of different domains such as business domains without having to negotiate structural differences between the vocabularies. In addition the RDF allows the smart space to merge the information of the embedded domains with the information in web as well as to make the vast reasoning and ontology theory practice and tools developed by the semantic web community available for developing smart space applications. The smart space is an aggregation of individual smart spaces of private group or public entities and the smart space makes the heterogeneous information in embedded domains available for semantic web tools. The smart space architecture expands the concept of a deductive closure towards a distributed deductive closure. The smart space architecture addresses values in application development by abolishing the need for a prior use case standardization such as those in the Digital Living Network Alliance DLNA domain and the Bluetooth domain. Furthermore the smart space architecture abolishes design time freezing of the address of any used service API such as in the case of WebServices.

The smart space architecture is different from university driven RDF store based approaches in getting information of embedded systems as an integral part of the search extent. The space based approach of the smart space architecture also provides an alternative to surrendering personal data to a search engine or a service provider. The smart space architecture applies to the semantic web an end to end design principle which is widely applied in the Internet since communication media can never know the needs of endpoints as well as the endpoints themselves.

From the perspective of the recipients they do not have to sign up with any commercial professional or social network website in order to receive the above described messages. Any information the recipients ever provide to a public and or private entity in the real world or in the virtual world can be incorporated into the smart space as granted by the recipients participants. The entity can be a real world legal entity or a virtual entity e.g. an avatar . For example the information records include the government records e.g. birth certificates school records driver s licenses tax records real property records criminal records etc. commercial activity records e.g. flight tickets movie tickets CD DVD book purchases restaurant store hospital gym visits car house education loans credit debts phone utility heating bills internet browsing behaviors etc. personal activity records e.g. basketball teams hikes etc. . The system data mines the information records to uncover patterns of the recipients in data either with or without their real world identification. When the system is allowed by the recipients only to data mine without associating the information with their real world identification the system can associate the data mining results with a reference that may be tied to an alias of the recipient such that the system can send messages to the recipient later. The above described embodiments reach the recipients over a secure encrypted mechanism to ensure total confidentiality. The system protect the privacy and confidentiality of the recipients by eliminate the sender s need to know the recipient identification e.g. names email addresses etc. . The system uses the information regarding the messages and the corresponding recipients with authorization of the senders and the recipients.

The devices may be any devices e.g. a mobile terminal a personal computer etc. or equipment e.g. a server a router etc. . By way of example RDF is used in the smart space . The triple governance transactions in the smart space uses a smart space Access Protocol SSAP to e.g. join leave insert remove update query subscribe unsubscribe information e.g. in a unit of a triple . A subscription is a special query that is used to trigger reactions to persistent queries for information. Persistent queries are particular cases of plain queries.

The physical distribution protocol of a smart space i.e. SSAP allows formation of a smart space using multiple SIBs. With transactional operations a node object produces inserts and consumes queries information in the smart space . As distributed SIBs belong to the same smart space query and subscription operations cover the whole information extent of a smart space.

In this embodiment the internal and external AugBDD tables are embedded in the SSAP protocol at SIB IF or ISIB IF upon an insert protocol message. The system builds itself on top of the smart space protocol to uses ontological constructs for processing RDF graphs ROBDDs hash identifiers for the recipient criteria and the secret data. The SIB IF is an interface between the SIBs and a device and the ISIB IF is an interface between two SIBs.

In one embodiment the approach described herein is implemented at the interfaces SIB IF and ISIB IF of the system to transmit the hash IDs and the encrypted secret data packets. In other embodiments one or more application programming interfaces APIs e.g. third party APIs can be used in addition to or instead of SIB IF and ISIB IF. The approach described herein provides performance gains while allowing multiple proprietary implementations of information stores in the smart space according to . The decoding complexity for developing an application is buried below a convenience API CONV API according to . Similarly the tools for a local at the node level information search are provided as a part of a convenience library.

As discussed the augmentation of construction history and other information related to the ROBDD of the recipient criteria and secret data are embedded in the corresponding AugBDDs. In one embodiment the smart space protocol messages are checked for hash ID consistency by 1 checking for the correct according to ontology types of hash IDs in term of a range and a domain of the instances that have a defined property between them and 2 checking for a correct number of hash IDs connected by the defined properties. In other words the 1 and 2 mechanisms are applied to detect the smart space robdd id concept within the smart space messages and then perform the checking for the availability of hash IDs from the external index table. The request for a missing hash ID can then be executed via a smart space query. This query relies upon the ROBDD graphs being available in a SIB in the smart space. The AugBDDs can be sent over to a remote system that uses the AugBDDs locally to check the consistency of the hash IDs or other properties in local information stores which allows checking for ontology conformance without direct access to the ontology description.

One of the problems of sharing information in the semantic web is to share the graphs or parts of the graphs i.e. subgraphs among distributed nodes and entities via information stores with sufficient identification of the graphs especially the subgraphs while minimizing communication traffic. Private smart space allows each entity to set the shared portions of the smart space with different entities.

As described the above described embodiments independently encrypts without collaboration input or creating any direct relationships to the intended recipients. Instead the encryption is based on criteria defining who the recipients might be without specifically identifying the recipients. In addition the above described embodiments do not require maintenance of database including pairs of a decryption key a recipient criterion.

To search for the encrypted information in cloud the smart space offers a local solution and a centralized solution to a querier e.g. a node an information store or a combination thereof in the smart space. According to the local solution the querier queries the smart space by means of smart space primitives Query SP IBE content and obtains a list of suitable candidates msg  C ID  msg  C ID  . . . . The querier can query for only the criteria without the encrypted content.

By way of example the querier has a specific model of antique car and looks for people to repair that antique car. The querier sends out a query with its own criteria C owning a specific model of antique car to find out what kinds of matching recipient criteria C are available. The matching recipient criteria C may be previously owned and looking to buy the specific model of antique car owning and having remolded eight of the specific model of antique car model car kits of the specific model of antique car for sale etc. The querier then queries for the encrypted content if the querier is interested in certain matching recipient criteria C such as owning and having remolded 8 of the specific model of antique car. 

The querier criteria C can be reduced to ROBDD and then encoded as a hash ID as the recipient criteria C as discussed previously. These AugBDD and hash IDs are locally available to the querier. The querier can easily deduce whether it has the same secret data available by searching within its own AugBDD database. The AugBDD solution allows efficient retrieval or reconstruction of ROBDDs.

In one embodiment the querier compares individual hash IDs of the querier criteria C to local hash IDs the recipient criteria C by a simple equality check. In another embodiment the querier checks the inclusion of each potential criteria candidate to the whole graph of local information via AugBDD inclusion. If a match is found between the querier hash ID and C ID  the information store or the querier can decrypt the secret information in the message e.g. msg  .

To obtain a decryption key for the encrypted secret content the querier can pass C ID  to an information store in the cloud and offers if necessary the ROBDD graph as proof that the querier satisfying the recipient criteria C. The querier then receives from the cloud a decryption key to decrypt the encrypted content.

This local solution counts on the querier to find the matching recipient criteria C. The local solution does not require much support from the cloud besides making the recipient criteria C and the encrypted content available for querying.

On the other hand the centralized solution counts on the cloud or information space to be active. The querier offers to the cloud a representation of its own local information as the querier criteria. The querier criteria may be all or a part of information of the querier. If the querier is a node the information may include user personality feature such as age gender personal interest etc. technical capability of receiving device such as digital rights management compliance device usage patterns environmental conditions in which the device is used context information associated with the device such as location time day other predetermined conditions or a combination thereof.

If the querier is an information store the information may include information store feature such as terms of sale terms of service gift certificate membership cards content codes and allowances application store terms and conditions licensed application end user license agreement privacy etc. technical capability of store facilities such as digital rights management compliance usage patterns configuration conditions in which the store is used context information associated with the store such as location time day customer care and supports consumer review rating accreditation customer complaint history government actions e.g. antitrust etc. class actions and other litigations e.g. product liabilities etc. other predetermined conditions or a combination thereof. The part of information of the querier is a subset of the information selected by the querier by some criteria. In this case the querier may offer several criteria in sequence to the cloud.

The cloud performs the comparison of the offered criteria by the mechanisms as described above. When the querier is a node the cloud including all the information stores functions like one integrated information store appears to the node. When the querier is an information store the cloud including all other information stores functions like one integrated information store appears to the information store. In other words the querier does not have to interact with information stores one by one but interacting with the cloud as a unit.

When an offered querier criteria C matches with one or more recipient criteria C the cloud indicates to the querier that decryption is feasible. The querier may then initiate the process for obtaining the decryption key as explained above in conjunction with . The smart space allows the sender and a querier to set up a decision tree type of operational instructions in conjunction with different criteria such that the information store can execute different operations under different criteria.

Matches are defaulted as 100 unless the sender or the querier specifies otherwise. Otherwise matches can be satisfied by a predetermined percentage other than 100 . By way of example the recipient criteria requires married males age between 35 45 with multiple children while the querier is a married male age between 41 with one child. When the criteria are partially matched the cloud may present the fully and or partially matched recipient criteria to the querier.

In another embodiment the cloud presents to the querier only the partially matched part of the recipient criteria e.g. married males age between 35 45 . The cloud then negotiates with the querier for additional querier criteria e.g. a survey for personal information to find out more about the querier for data mining. After the survey the cloud then presents other parts of the recipient criteria that the querier is determined to be eligible to know.

When there are multiple matches the cloud may present all of the matched recipient criteria to the querier. In another embodiment the cloud presents to the querier only some of the shorter matched recipient criteria e.g. married males age between 35 45 with multiple children that the querier matches. The cloud then negotiates with the querier for additional querier criteria to find out more about the querier and then presents other longer recipient criteria married males age between 35 45 with one house and multiple children that the querier is determined to be eligible to know.

The above described embodiments operating in the smart space allow novel marketing approaches. Taking targeted marketing as an example after outreaching the anonymous recipients the system can use pre existing social networks of the anonymous recipients to produce increases in brand awareness or to achieve other marketing objectives such as product sales . This kind of promotions may take the form of video clips interactive games ebooks brandable software images or even text messages.

The processes described herein for querying content protected by identity based encryption may be advantageously implemented via software hardware firmware or a combination of software and or firmware and or hardware. For example the processes described herein including for providing user interface navigation information associated with the availability of services may be advantageously implemented via processor s Digital Signal Processing DSP chip an Application Specific Integrated Circuit ASIC Field Programmable Gate Arrays FPGAs etc. Such exemplary hardware for performing the described functions is detailed below.

A bus includes one or more parallel conductors of information so that information is transferred quickly among devices coupled to the bus . One or more processors for processing information are coupled with the bus .

A processor or multiple processors performs a set of operations on information as specified by computer program code related to query content protected by identity based encryption. The computer program code is a set of instructions or statements providing instructions for the operation of the processor and or the computer system to perform specified functions. The code for example may be written in a computer programming language that is compiled into a native instruction set of the processor. The code may also be written directly using the native instruction set e.g. machine language . The set of operations include bringing information in from the bus and placing information on the bus . The set of operations also typically include comparing two or more units of information shifting positions of units of information and combining two or more units of information such as by addition or multiplication or logical operations like OR exclusive OR XOR and AND. Each operation of the set of operations that can be performed by the processor is represented to the processor by information called instructions such as an operation code of one or more digits. A sequence of operations to be executed by the processor such as a sequence of operation codes constitute processor instructions also called computer system instructions or simply computer instructions. Processors may be implemented as mechanical electrical magnetic optical chemical or quantum components among others alone or in combination.

Computer system also includes a memory coupled to bus . The memory such as a random access memory RAM or other dynamic storage device stores information including processor instructions for querying content protected by identity based encryption. Dynamic memory allows information stored therein to be changed by the computer system . RAM allows a unit of information stored at a location called a memory address to be stored and retrieved independently of information at neighboring addresses. The memory is also used by the processor to store temporary values during execution of processor instructions. The computer system also includes a read only memory ROM or other static storage device coupled to the bus for storing static information including instructions that is not changed by the computer system . Some memory is composed of volatile storage that loses the information stored thereon when power is lost. Also coupled to bus is a non volatile persistent storage device such as a magnetic disk optical disk or flash card for storing information including instructions that persists even when the computer system is turned off or otherwise loses power.

Information including instructions for querying content protected by identity based encryption is provided to the bus for use by the processor from an external input device such as a keyboard containing alphanumeric keys operated by a human user or a sensor. A sensor detects conditions in its vicinity and transforms those detections into physical expression compatible with the measurable phenomenon used to represent information in computer system . Other external devices coupled to bus used primarily for interacting with humans include a display device such as a cathode ray tube CRT or a liquid crystal display LCD or plasma screen or printer for presenting text or images and a pointing device such as a mouse or a trackball or cursor direction keys or motion sensor for controlling a position of a small cursor image presented on the display and issuing commands associated with graphical elements presented on the display . In some embodiments for example in embodiments in which the computer system performs all functions automatically without human input one or more of external input device display device and pointing device is omitted.

In the illustrated embodiment special purpose hardware such as an application specific integrated circuit ASIC is coupled to bus . The special purpose hardware is configured to perform operations not performed by processor quickly enough for special purposes. Examples of application specific ICs include graphics accelerator cards for generating images for display cryptographic boards for encrypting and decrypting messages sent over a network speech recognition and interfaces to special external devices such as robotic arms and medical scanning equipment that repeatedly perform some complex sequence of operations that are more efficiently implemented in hardware.

Computer system also includes one or more instances of a communications interface coupled to bus . Communication interface provides a one way or two way communication coupling to a variety of external devices that operate with their own processors such as printers scanners and external disks. In general the coupling is with a network link that is connected to a local network to which a variety of external devices with their own processors are connected. For example communication interface may be a parallel port or a serial port or a universal serial bus USB port on a personal computer. In some embodiments communications interface is an integrated services digital network ISDN card or a digital subscriber line DSL card or a telephone modem that provides an information communication connection to a corresponding type of telephone line. In some embodiments a communication interface is a cable modem that converts signals on bus into signals for a communication connection over a coaxial cable or into optical signals for a communication connection over a fiber optic cable. As another example communications interface may be a local area network LAN card to provide a data communication connection to a compatible LAN such as Ethernet. Wireless links may also be implemented. For wireless links the communications interface sends or receives or both sends and receives electrical acoustic or electromagnetic signals including infrared and optical signals that carry information streams such as digital data. For example in wireless handheld devices such as mobile telephones like cell phones the communications interface includes a radio band electromagnetic transmitter and receiver called a radio transceiver. In certain embodiments the communications interface enables connection to the communication network for querying content protected by identity based encryption.

The term computer readable medium as used herein refers to any medium that participates in providing information to processor including instructions for execution. Such a medium may take many forms including but not limited to computer readable storage medium e.g. non volatile media volatile media and transmission media. Non transitory media such as non volatile media include for example optical or magnetic disks such as storage device . Volatile media include for example dynamic memory . Transmission media include for example coaxial cables copper wire fiber optic cables and carrier waves that travel through space without wires or cables such as acoustic waves and electromagnetic waves including radio optical and infrared waves. Signals include man made transient variations in amplitude frequency phase polarization or other physical properties transmitted through the transmission media. Common forms of computer readable media include for example a floppy disk a flexible disk hard disk magnetic tape any other magnetic medium a CD ROM CDRW DVD any other optical medium punch cards paper tape optical mark sheets any other physical medium with patterns of holes or other optically recognizable indicia a RAM a PROM an EPROM a FLASH EPROM any other memory chip or cartridge a carrier wave or any other medium from which a computer can read. The term computer readable storage medium is used herein to refer to any computer readable medium except transmission media.

Logic encoded in one or more tangible media includes one or both of processor instructions on a computer readable storage media and special purpose hardware such as ASIC .

Network link typically provides information communication using transmission media through one or more networks to other devices that use or process the information. For example network link may provide a connection through local network to a host computer or to equipment operated by an Internet Service Provider ISP . ISP equipment in turn provides data communication services through the public world wide packet switching communication network of networks now commonly referred to as the Internet .

A computer called a server host connected to the Internet hosts a process that provides a service in response to information received over the Internet. For example server host hosts a process that provides information representing video data for presentation at display . It is contemplated that the components of system can be deployed in various configurations within other computer systems e.g. host and server .

At least some embodiments of the invention are related to the use of computer system for implementing some or all of the techniques described herein. According to one embodiment of the invention those techniques are performed by computer system in response to processor executing one or more sequences of one or more processor instructions contained in memory . Such instructions also called computer instructions software and program code may be read into memory from another computer readable medium such as storage device or network link . Execution of the sequences of instructions contained in memory causes processor to perform one or more of the method steps described herein. In alternative embodiments hardware such as ASIC may be used in place of or in combination with software to implement the invention. Thus embodiments of the invention are not limited to any specific combination of hardware and software unless otherwise explicitly stated herein.

The signals transmitted over network link and other networks through communications interface carry information to and from computer system . Computer system can send and receive information including program code through the networks among others through network link and communications interface . In an example using the Internet a server host transmits program code for a particular application requested by a message sent from computer through Internet ISP equipment local network and communications interface . The received code may be executed by processor as it is received or may be stored in memory or in storage device or other non volatile storage for later execution or both. In this manner computer system may obtain application program code in the form of signals on a carrier wave.

Various forms of computer readable media may be involved in carrying one or more sequence of instructions or data or both to processor for execution. For example instructions and data may initially be carried on a magnetic disk of a remote computer such as host . The remote computer loads the instructions and data into its dynamic memory and sends the instructions and data over a telephone line using a modem. A modem local to the computer system receives the instructions and data on a telephone line and uses an infra red transmitter to convert the instructions and data to a signal on an infra red carrier wave serving as the network link . An infrared detector serving as communications interface receives the instructions and data carried in the infrared signal and places information representing the instructions and data onto bus . Bus carries the information to memory from which processor retrieves and executes the instructions using some of the data sent with the instructions. The instructions and data received in memory may optionally be stored on storage device either before or after execution by the processor .

In one embodiment the chip set or chip includes a communication mechanism such as a bus for passing information among the components of the chip set . A processor has connectivity to the bus to execute instructions and process information stored in for example a memory . The processor may include one or more processing cores with each core configured to perform independently. A multi core processor enables multiprocessing within a single physical package. Examples of a multi core processor include two four eight or greater numbers of processing cores. Alternatively or in addition the processor may include one or more microprocessors configured in tandem via the bus to enable independent execution of instructions pipelining and multithreading. The processor may also be accompanied with one or more specialized components to perform certain processing functions and tasks such as one or more digital signal processors DSP or one or more application specific integrated circuits ASIC . A DSP typically is configured to process real world signals e.g. sound in real time independently of the processor . Similarly an ASIC can be configured to performed specialized functions not easily performed by a more general purpose processor. Other specialized components to aid in performing the inventive functions described herein may include one or more field programmable gate arrays FPGA not shown one or more controllers not shown or one or more other special purpose computer chips.

In one embodiment the chip set or chip includes merely one or more processors and some software and or firmware supporting and or relating to and or for the one or more processors.

The processor and accompanying components have connectivity to the memory via the bus . The memory includes both dynamic memory e.g. RAM magnetic disk writable optical disk etc. and static memory e.g. ROM CD ROM etc. for storing executable instructions that when executed perform the inventive steps described herein to query content protected by identity based encryption. The memory also stores the data associated with or generated by the execution of the inventive steps.

Pertinent internal components of the telephone include a Main Control Unit MCU a Digital Signal Processor DSP and a receiver transmitter unit including a microphone gain control unit and a speaker gain control unit. A main display unit provides a display to the user in support of various applications and mobile terminal functions that perform or support the steps of querying content protected by identity based encryption. The display includes display circuitry configured to display at least a portion of a user interface of the mobile terminal e.g. mobile telephone . Additionally the display and display circuitry are configured to facilitate user control of at least some functions of the mobile terminal. An audio function circuitry includes a microphone and microphone amplifier that amplifies the speech signal output from the microphone . The amplified speech signal output from the microphone is fed to a coder decoder CODEC .

A radio section amplifies power and converts frequency in order to communicate with a base station which is included in a mobile communication system via antenna . The power amplifier PA and the transmitter modulation circuitry are operationally responsive to the MCU with an output from the PA coupled to the duplexer or circulator or antenna switch as known in the art. The PA also couples to a battery interface and power control unit .

In use a user of mobile terminal speaks into the microphone and his or her voice along with any detected background noise is converted into an analog voltage. The analog voltage is then converted into a digital signal through the Analog to Digital Converter ADC . The control unit routes the digital signal into the DSP for processing therein such as speech encoding channel encoding encrypting and interleaving. In one embodiment the processed voice signals are encoded by units not separately shown using a cellular transmission protocol such as global evolution EDGE general packet radio service GPRS global system for mobile communications GSM Internet protocol multimedia subsystem IMS universal mobile telecommunications system UMTS etc. as well as any other suitable wireless medium e.g. microwave access WiMAX Long Term Evolution LTE networks code division multiple access CDMA wideband code division multiple access WCDMA wireless fidelity WiFi satellite and the like.

The encoded signals are then routed to an equalizer for compensation of any frequency dependent impairments that occur during transmission though the air such as phase and amplitude distortion. After equalizing the bit stream the modulator combines the signal with a RF signal generated in the RF interface . The modulator generates a sine wave by way of frequency or phase modulation. In order to prepare the signal for transmission an up converter combines the sine wave output from the modulator with another sine wave generated by a synthesizer to achieve the desired frequency of transmission. The signal is then sent through a PA to increase the signal to an appropriate power level. In practical systems the PA acts as a variable gain amplifier whose gain is controlled by the DSP from information received from a network base station. The signal is then filtered within the duplexer and optionally sent to an antenna coupler to match impedances to provide maximum power transfer. Finally the signal is transmitted via antenna to a local base station. An automatic gain control AGC can be supplied to control the gain of the final stages of the receiver. The signals may be forwarded from there to a remote telephone which may be another cellular telephone other mobile phone or a land line connected to a Public Switched Telephone Network PSTN or other telephony networks.

Voice signals transmitted to the mobile terminal are received via antenna and immediately amplified by a low noise amplifier LNA . A down converter lowers the carrier frequency while the demodulator strips away the RF leaving only a digital bit stream. The signal then goes through the equalizer and is processed by the DSP . A Digital to Analog Converter DAC converts the signal and the resulting output is transmitted to the user through the speaker all under control of a Main Control Unit MCU which can be implemented as a Central Processing Unit CPU not shown .

The MCU receives various signals including input signals from the keyboard . The keyboard and or the MCU in combination with other user input components e.g. the microphone comprise a user interface circuitry for managing user input. The MCU runs a user interface software to facilitate user control of at least some functions of the mobile terminal to query content protected by identity based encryption. The MCU also delivers a display command and a switch command to the display and to the speech output switching controller respectively. Further the MCU exchanges information with the DSP and can access an optionally incorporated SIM card and a memory . In addition the MCU executes various control functions required of the terminal. The DSP may depending upon the implementation perform any of a variety of conventional digital processing functions on the voice signals. Additionally DSP determines the background noise level of the local environment from the signals detected by microphone and sets the gain of microphone to a level selected to compensate for the natural tendency of the user of the mobile terminal .

The CODEC includes the ADC and DAC . The memory stores various data including call incoming tone data and is capable of storing other data including music data received via e.g. the global Internet. The software module could reside in RAM memory flash memory registers or any other form of writable storage medium known in the art. The memory device may be but not limited to a single memory CD DVD ROM RAM EEPROM optical storage or any other non volatile storage medium capable of storing digital data.

An optionally incorporated SIM card carries for instance important information such as the cellular phone number the carrier supplying service subscription details and security information. The SIM card serves primarily to identify the mobile terminal on a radio network. The card also contains a memory for storing a personal telephone number registry text messages and user specific mobile terminal settings.

While the invention has been described in connection with a number of embodiments and implementations the invention is not so limited but covers various obvious modifications and equivalent arrangements which fall within the purview of the appended claims. Although features of the invention are expressed in certain combinations among the claims it is contemplated that these features can be arranged in any combination and order.

