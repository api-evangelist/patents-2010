---

title: Object tree walking
abstract: Information is processed by receiving from a requesting node a request to access a content management related service. The content management related service is performed at a second node in the opposite direction as the requesting node; the request is associated with an object tree. The object tree is walked to obtain information associated with the object tree. A set of one or more service context rules associated with the content management related service is determined. The object tree is processed using the set of service context rules and the results of the processed object tree are made available to the content management related service so that the content management related service is able to properly operate at the second node.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09367644&OS=09367644&RS=09367644
owner: EMC Corporation
number: 09367644
owner_city: Hopkinton
owner_country: US
publication_date: 20100726
---
This application is a continuation of U.S. patent application Ser. No. 11 824 477 entitled OBJECT TREE WALKING filed Jun. 29 2007 now U.S. Pat. No. 7 792 979 which is incorporated herein by reference for all purposes.

Some content management architectures have traditionally had a centralized architecture. However new systems are being developed where content and or services that operate on the content are distributed. For example services may be located at a client that owns content and or originates processing at a content management server or a document repository and or at one or more intermediate nodes between the client and the content management server and or repository. Oftentimes a content management customer or a third party developer develops specialized services for a particular industry e.g. for the banking industry the medical industry the shipping industry etc. or that implement enterprise specific rules or practices for a particular business e.g. one business may have a different set of rules regarding accessibility of sensitive information compared to another business . New techniques that simplify the amount of work and or reduce the difficulty for developers of services would be useful particularly in content management systems with a distributed architecture.

The invention can be implemented in numerous ways including as a process an apparatus a system a composition of matter a computer readable medium such as a computer readable storage medium or a computer network wherein program instructions are sent over optical or communication links. In this specification these implementations or any other form that the invention may take may be referred to as techniques. A component such as a processor or a memory described as being configured to perform a task includes both a general component that is temporarily configured to perform the task at a given time or a specific component that is manufactured to perform the task. In general the order of the steps of disclosed processes may be altered within the scope of the invention.

A detailed description of one or more embodiments of the invention is provided below along with accompanying figures that illustrate the principles of the invention. The invention is described in connection with such embodiments but the invention is not limited to any embodiment. The scope of the invention is limited only by the claims and the invention encompasses numerous alternatives modifications and equivalents. Numerous specific details are set forth in the following description in order to provide a thorough understanding of the invention. These details are provided for the purpose of example and the invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity technical material that is known in the technical fields related to the invention has not been described in detail so that the invention is not unnecessarily obscured.

Walking an object tree and applying one or more service context related rules based on data determined by such walking is disclosed. In some embodiments a request for a content management related service comprises or is otherwise related to an object tree. The object tree is walked and processed in accordance with one or more service context related rules. For example in some embodiments the object tree is transformed if and or as required to place it in a form required to perform a content management related service. Such transformation may include patching the tree e.g. by replacing a path or other logical location provided by a sending node with a different path or other logical location required to perform the content management related service for example a path on a receiving node at which the service is to be performed. In various embodiments the object tree walking and associated processing are performed by a content management services runtime environment and or system associated with a platform on which the content management related service is built and or running relieving a developer of a client side application that generated the object tree and or an associated request and a developer of the service from the need to generate and or process the request into a form required to perform the content management related service at a node at which it is to be performed.

As used herein a service accesses or operates on information such as content or metadata associated with document and or document . Although some services may be provided out of the box by a content management application system provider services as used herein refers to services that are developed by a content management customer e.g. a tax preparation company an import export business an electronics retailer a government entity etc. or a third party developer. For example there may not be an off the shelf software application and or system configured to do exactly what a particular customer wants. A customer in such a situation may develop one or more services to manage and or operate on information as desired. Services developed may for example reflect business rules or workflows that are industry specific and or enterprise specific.

In this example a document is sent from client to document repository and services are performed along the way. A document is any collection of content and or associated metadata and is not limited to a word processing document e.g. a PDF document or a Microsoft Word document . In some embodiments a document is in Extensible Markup Language XML format. In this example system is a distributed system where information e.g. content and or associated metadata and or services are distributed throughout devices . For example client performs one set of services services and on device perform a second and third set of services respectively and device performs a fourth set of services. In some configurations a plurality of content management related services are distributed over a plurality of nodes and the plurality of services are to be performed with respect to an object tree or a request for one or more of the services.

In one example system is used by a hospital to manage patient medical records and treatment. Using client a doctor writes a medical order for a particular patient e.g. writing an order for the patient to be x rayed writing the patient a prescription etc. . This medical order is received and processed by services and . Service may be associated with fulfilling the medical order for example by scheduling time on a x ray machine in the patient s name sending a prescription to a pharmacist updating the medical record with the medial order and or fulfillment of the medical order etc. Service may be associated with billing or payment services. For example once a doctor s medical order is fulfilled service may send a claims form to an insurance company receive payment from the insurance company and or send a bill with any outstanding amount to a patient. Document repository may be a central archive or repository where all branches of a medical clinic or hospital back up copies of patient medical records. Device may perform services associated with archiving or storing for example to ensure that patient medical records are maintained for a certain amount of time as required by law offload medical records of former patients to other storage devices or media e.g. to magnetic tape if they are inactive for a certain amount of time etc.

In another example system is used by a bank to manage and process loan applications. A loan application may be created at client for example a bank website configured to receive loan application information or a terminal at a local branch where a teller enters information from a paper application. Service is responsible for obtaining a complete set of information for the loan application to be reviewed. For example credit scores and or credit reports for the individual applying for the loan are obtained and the loan application is augmented with this information. Service is associated with obtaining approval for the loan application from the proper employees at the bank e.g. a loan officer and or her supervisor . Device may perform services associated storing and or exporting a loan contract. For example a copy of the signed loan agreement may be stored by the bank terms of the loan may be exported to a credit bureau etc.

A technique for processing a request for a service associated with content management is disclosed. A request for a service in some embodiments is received in the form of an object tree. The object tree is walked and a service context set of rule s are applied as appropriate so that a downstream or subsequent service is able to properly operate. In some embodiments a service context is a current value state or mode associated with a service. For example a service may manage and update as needed service context information and this collection of information is used in some embodiments to determine or obtain an appropriate set of rules based on the service context.

By way of example assume client uses Microsoft Windows and document is located at c foo bar.txt in local file system . Service on device uses a Linux operating system and c foo bar.txt may not be a valid or recognized file system location for service . A service context rule in this example is that a location must be specified with respect to the Linux file system associated with service in order for a request to be properly processed by service . The location c foo bar.txt is transformed to a location that is proper or relevant for service and the results of this transformation or more generally the results of the rule based processing are passed to service . In some cases a service consumer e.g. a client provides a file stream but the service provider e.g. a service acts upon files on disk. In this case the stream is written to disk so that the service can be applied. In another example client accepts multiple types of documents formats e.g. Microsoft Word format and PDF format but document repository only accepts one type of document format e.g. PDF format a document is transformed from Microsoft Word format to PDF format if needed. For example the object tree is walked a content node is found and determined to be a Word format document and a service context related rule results in the content being converted to PDF prior to being handed to the service.

The disclosed techniques are not necessarily limited to cases where a document or information is sent inbounds towards a document repository. In some embodiments information is sent in the outbound direction away from a content repository. In some embodiments a request for service in the inbound direction causes information to be returned in the outbound direction e.g. a create request may return a link or identifier associated with the created item . In the outbound direction services and are downstream services with respect to document repository and rule based processing if any in that case is performed so that those downstream services are able to properly operate. In some embodiments the techniques are used in an inbound outbound i.e. bi directional configuration.

Rule based processing of an object tree or information associated with an object tree is not necessarily limited to transformation or translation of data. In some embodiments rule based processing includes supplementing information in an object tree with additional content or metadata that is required or necessary for a downstream or subsequent service to operate. For example some identifier may be required by a downstream or subsequent service that an upstream or previous service may not necessarily be aware of and or know how to obtain. In some embodiments a new object or data structure is created instantiated or allocated. In some embodiments an object or data structure must satisfy some rules regarding relationship or structure. In some embodiments a process or service is performed as needed as part of rule based processing. For example there may be some security or authorization processes that must be performed the first time a particular service is requested e.g. for a given user or a given document . In some embodiments a first set of data associated with an object tree or request is replaced with a second set of data required perform a content management related service.

In some cases providing the techniques disclosed herein is attractive because a developer is not required to learn about the rules for another service e.g. downstream or subsequent in some chain of services or devices . For example without object tree walking a service at client might be required to obtain the rules for downstream services and ensure that a request originating from itself properly conforms. In some cases flexibility in the configuration of a content management system is provided. For example if a new device with one or more new services is added to the chain shown in system the addition can be made without a service on client having to necessarily discover or learn about the new service s .

In various embodiments the techniques are performed at various devices in system e.g. client device and or device . In some embodiments the techniques are performed by a content management runtime environment.

In the example shown object tree has a tree structure. At the top level of object tree is data package . Data package in this example includes k data objects. Data object includes m content objects and content object includes n pieces of content. In some embodiments at least some of the n pieces of content include metadata.

Object tree is walked and a service context specific set of rules are applied. For example object tree may be walked and by examining content it is determined whether information is associated with a file or a Uniform Resource Locator URL i.e. streaming type content . A rule may be to have content of one type e.g. file or URL and if needed the content is processed. In some embodiments a rule is with respect to a permitted relationship e.g. between data objects between content objects etc. . In some embodiments a rule is with respect to a value or range of values of the n pieces of content.

In some embodiments a data object e.g. data object is a generalized representation of a persistent object. In some embodiments a data object has associated with it an object identity such as an ID a path and or a query based qualification. In some embodiments a data object has a type such as a document a folder etc. In some embodiments a data object contains metadata such as a set of properties. In some embodiments a data object includes content e.g. for multiple files or multiple versions renditions of a file . In some embodiments a data object has a relationship with respect to one or more other data objects e.g. a parent folder .

Data object is used to store or represent a variety of collections of information in various embodiments. In some embodiments data object is used to represent an entire file system where for example the top data objects immediately below data package are folders e.g. a folder having subfolders and or files . Using a single object tree and or single data package to represent an entire file system is attractive in some cases because the entire file system is able to be imported or retrieved in a single operation.

At a definition of a service is received. In some embodiments information is received from a customer or third party developer. A set of one or more rules for a service are received at . In some embodiments the set of rules received at comprise all rules for that service.

At the set of rules are applied as appropriate to an object tree associated with a request for service. For example the rules received at are accessed and appropriate rules e.g. based on the service context are applied.

In one example a service is built for the EMC DFS runtime environment. DFS tools are used to generate artifacts. Some examples include Web Services Description Language WSDL proxies e.g. local or SOAP or a Java client library. Generated Java client classes are used to build tests in some cases an in process API is built first for simplicity. The application is packaged e.g. a WAR EAR application using the DFS tools and WSDL validation is performed with non Java clients.

At an object tree associated with a request for a service is received. At a rule set is determined based at least in part on service context. In some embodiments a service stores or manages context related information and this collection of information is accessed to determine service context. In some embodiments a collection of rules for a service is accessed e.g. received at step of and those appropriate for the service context are determined.

At an object tree is walked and applicable rules are applied context and content appropriate processing is performed. In various embodiments steps is performed before step or steps and are combined.

Access path to content and metadata includes application programming interface API application framework and content server which is coupled to operating system . In this example access path is a legacy access path. Using access path developers must be aware of service rules and ensure that requests for services that access and or manipulate content and or metadata conform to those rules.

Content and metadata are able to be accessed if so desired through access path which includes connection interface and content management service runtime . In some embodiments access path is associated with SOAP and or web services. In this example content management services runtime is configured to perform object tree walking process a request according to a set of rules. In some embodiments content management services runtime accesses content and or metadata via application framework .

In some cases having access paths and is attractive because older services that were developed using a legacy access path can still be used while new services that use a newer access path are able to be developed in faster and or more convenient manner. For example some customers or third party developers prefer to develop new services that access and or manipulate content and or metadata via access path .

Runtime includes handler object tree walker rule engine rule definition interface and rules . In this example rules is provided by the developer of service using rule definition interface . Handler object tree walker rule engine and rule definition interface in this example is provided by a content management application provider.

Object tree walker walks a received object tree not shown associated with a request for service . For example the structure of object tree or information e.g. data and or metadata stored in object tree is extracted during the walking process. Rule engine accesses rules and determines the service context rules that are applicable e.g. by comparing information output by object tree walker with rules . Rule engine drives controls or otherwise directs handler to perform the processing necessary for service to operate properly. Once processing is completed by handler results if any are passed to service .

In contrast service is not associated with a content management services runtime. In that example a developer may be required to ensure that a request for service conforms to a set of associated rules. Access to service is available via WSDL.

Although the foregoing embodiments have been described in some detail for purposes of clarity of understanding the invention is not limited to the details provided. There are many alternative ways of implementing the invention. The disclosed embodiments are illustrative and not restrictive.

