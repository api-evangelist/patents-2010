---

title: Process plant monitoring based on multivariate statistical analysis and on-line process simulation
abstract: Disclosed are systems and methods for on-line monitoring of operation of a process in connection with process measurements indicative of the operation of the process. In some cases, the operation of the process is simulated to generate model data indicative of a simulated representation of the operation of the process and based on the process measurements. A multivariate statistical analysis of the operation of the process is implemented based on the model data and the process measurements. The output data from the multivariate statistical analysis may then be evaluated during the operation of the process to enable the on-line monitoring of the process involving, for instance, fault detection via classification analysis of the output data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08135481&OS=08135481&RS=08135481
owner: Fisher-Rosemount Systems, Inc.
number: 08135481
owner_city: Austin
owner_country: US
publication_date: 20100518
---
This application is a divisional application of and claims priority to prior U.S. patent application Ser. No. 11 516 102 entitled Process Plant Monitoring Based on Multivariate Statistical Analysis and On Line Process Simulation which was filed on Sep. 6 2006 which in turn is a continuation in part of International Patent Application No. PCT US2005 015556 entitled Integration of Process Modules and Expert Systems in Process Plants which was filed on May 4 2005 and which in turn claimed the benefit of U.S. Provisional Application Ser. No. 60 567 980 entitled Graphical User Interface for Representing Monitoring and Interacting with Process Control Systems which was filed on May 4 2004 the entire disclosures of which are hereby expressly incorporated by reference herein in their entirety. This application is also related to U.S. patent application Ser. No. 10 625 481 entitled Integration of Graphic Display Elements Process Modules and Control Modules in Process Plants which was filed on Jul. 21 2003 and which published as U.S. Publication No. 2004 0153804 on Aug. 5 2004 which in turn is a Continuation in Part of U.S. patent application Ser. No. 10 278 469 entitled Smart Process Modules and Objects in Process Plants which was filed on Oct. 22 2002 and which published as U.S. Publication No. 2004 0075689 on Apr. 22 2004 the entire disclosures of which are hereby expressly incorporated by reference herein in their entirety. This application is also related to U.S. patent application Ser. No. 10 368 151 entitled Module Class Objects in a Process Plant Configuration System which was filed on Feb. 18 2003 and which published as U.S. Publication No. 2004 0199925 on Oct. 7 2004 the entire disclosure of which is hereby expressly incorporated by reference herein in its entirety. This application is also related to the following international PCT applications which were filed on the same date as the aforementioned international PCT application and which this application hereby expressly incorporates by reference herein in their entirety Associated Graphic Displays in a Process Environment PCT US2005 015943 User Configurable Alarms and Alarm Trending for Process Control Systems PCT US2005 015537 A Process Plant User Interface System Having Customized Process Graphic Display Layers in an Integrated Environment PCT US2005 015392 Scripted Graphics in a Process Environment PCT US2005 015942 Graphics Integration into a Process Configuration and Control Environment PCT US2005 015588 Graphic Element with Multiple Visualizations in a Process Environment PCT US2005 015390 System for Configuring Graphic Display Elements and Process Modules in Process Plants PCT US2005 015391 Graphic Display Configuration Framework for Unified Process Control System Interface PCT US2005 015393 Markup Language Based Dynamic Process Graphics in a Process Plant User Interface PCT US2005 015941 Methods and Apparatus for Modifying Process Control Data PCT US2005 015596 Methods and Apparatus for Accessing Process Control Data PCT US2005 015585 Integrated Graphical Runtime Interface for Process Control Systems PCT US2005 015439 Service Oriented Architecture for Process Control Systems PCT US2005 015394 .

The present invention relates generally to process plants and more particularly to an intelligent control and simulation environment that enables user viewing simulation and control to be integrated at the system level of the process plant control architecture.

Distributed process control systems like those used in chemical petroleum or other processes typically include one or more process controllers communicatively coupled to one or more field devices via analog digital or combined analog digital buses. The field devices which may be for example valves valve positioners switches and transmitters e.g. temperature pressure level and flow rate sensors are located within the process environment and perform process functions such as opening or closing valves measuring process parameters etc. Smart field devices such as the field devices conforming to the well known Fieldbus protocol may also perform control calculations alarming functions and other control functions commonly implemented within the controller. The process controllers which are also typically located within the plant environment receive signals indicative of process measurements made by the field devices and or other information pertaining to the field devices and execute a controller application that runs for example different control modules which make process control decisions generate control signals based on the received information and coordinate with the control modules or blocks being performed in the field devices such as HART and Fieldbus field devices. The control modules in the controller send the control signals over the communication lines to the field devices to thereby control the operation of the process.

Information from the field devices and the controller is usually made available over a data highway to one or more other hardware devices such as operator workstations personal computers data historians report generators centralized databases etc. typically placed in control rooms or other locations away from the harsher plant environment. These hardware devices run applications that may for example enable an operator to perform functions with respect to the process such as changing settings of the process control routine modifying the operation of the control modules within the controller or the field devices viewing the current state of the process viewing alarms generated by field devices and controllers simulating the operation of the process for the purpose of training personnel or testing the process control software keeping and updating a configuration database etc.

As an example the DeltaV control system sold by Emerson Process Management includes multiple applications stored within and executed by different devices located at diverse places within a process plant. A configuration application which resides in one or more operator workstations enables users to create or change process control modules and download these process control modules via a data highway to dedicated distributed controllers. Typically these control modules are made up of communicatively interconnected function blocks which are objects in an object oriented programming protocol which perform functions within the control scheme based on inputs thereto and which provide outputs to other function blocks within the control scheme. The configuration application may also allow a designer to create or change operator interfaces which are used by a viewing application to display data to an operator and to enable the operator to change settings such as set points within the process control routine. Each dedicated controller and in some cases field devices stores and executes a controller application that runs the control modules assigned and downloaded thereto to implement actual process control functionality. The viewing applications which may be run on one or more operator workstations receive data from the controller application via the data highway and display this data to process control system designers operators or users using the user interfaces and may provide any of a number of different views such as an operator s view an engineer s view a technician s view etc. A data historian application is typically stored in and executed by a data historian device that collects and stores some or all of the data provided across the data highway while a configuration database application may run in a still further computer attached to the data highway to store the current process control routine configuration and data associated therewith. Alternatively the configuration database may be located in the same workstation as the configuration application.

As noted above operator display applications are typically implemented on a system wide basis in one or more of the workstations and provide preconfigured displays to the operator or maintenance persons regarding the operating state of the control system or the devices within the plant. Typically these displays take the form of alarming displays that receive alarms generated by controllers or devices within the process plant control displays indicating the operating state of the controllers and other devices within the process plant maintenance displays indicating the operating state of the devices within the process plant etc. These displays are generally preconfigured to display in known manners information or data received from the process control modules or the devices within the process plant. In some known systems displays are created through the use of objects that have a graphic associated with a physical or logical element and that is communicatively tied to the physical or logical element to receive data about the physical or logical element. The object may change the graphic on the display screen based on the received data to illustrate for example that a tank is half full to illustrate the flow measured by a flow sensor etc. While the information needed for the displays is sent from the devices or configuration database within the process plant that information is used only to provide a display to the user containing that information. As a result all information and programming that is used to generate alarms detect problems within the plant etc. must be generated by and configured within the different devices associated with the plant such as controllers and field devices during configuration of the process plant control system. Only then is this information sent to the operator display for display during process operation.

While error detection and other programming is useful for detecting conditions errors alarms etc. associated with control loops running on the different controllers and problems within the individual devices it is difficult to program the process control system to recognize system level conditions or errors that must be detected by analyzing data from different possible diversely located devices within the process plant. Still further operator displays have typically not been used to indicate or present such system level condition information to operators or maintenance personnel and in any event it is difficult to animate objects within operator displays with these alternate sources of information or data for the different elements within the display. This fact is particularly true with respect to the animation and modeling of streams of material such as the flow of fluid in pipes the movement of raw materials on conveyor belts etc. which are typically indicated by a simple line connected between two devices on the display. Moreover there is currently no organized manner of detecting certain conditions within a plant such as flow conditions and mass balances as materials move through a plant much less an easily implementable system for performing these functions on a system level basis.

Likewise it can be difficult to set up or create a simulation of the process plant or a portion of the process plant as simulation activities must typically be performed separately from the display and control activities performed in the on line environment of the process plant. Still further if a simulation of the plant is created it is difficult if not impossible to integrate this simulation with the operator displays or with the control modules being implemented within the plant.

Expert systems may be used in process plants to help detect problems and or correct problems in the process plant. For example U.S. Pat. No. 6 633 782 describes a diagnostic system for use in a process control system that collects and stores data pertaining to the operation of the process control system in a database and uses an expert engine to apply rules for analysis to the information in the database to determine solutions to problems in the process control system. The database may store various types of information that are relevant to determining a source of a problem detected in the process control system and or steps to either further analyze or correct the detected problems. For example information in the database may include data pertaining specifically to the detected problem and to a field device a function block or a control loop in which the detected problem exists. The database may also store event and alarm data such as notices of scheduled maintenance and changes to operating parameters that may be relevant to identifying the source of the problem and or to identifying the appropriate analytical and remedial measures. When a problem is detected the expert engine may apply the rules for analysis to the relevant data in the database information received from a diagnostic tool an event journal or an historian.

It can be difficult to set up or create an expert system to analyze the process plant or a portion of the process plant as the expert system typically must be set up and configured separately from the display and control activities performed in the on line environment of the process plant. Still further if an expert system is set up and configured to monitor a portion of the process plant it is difficult if not impossible to integrate this expert system with the operator displays implemented within the plant.

In accordance with one aspect of the disclosure a system is useful for monitoring operation of a process in a process plant having a process control system to control the process in connection with process measurements indicative of the operation of the process. The system includes a process simulation module to model a plurality of physical devices within the process plant for generation of model data indicative of a simulated representation of the operation of the process an analysis module to implement a multivariate statistical analysis of the operation of the process based on the model data and the process measurements one or more computer readable media to store respective configurations of the process simulation module and the analysis module and one or more computer executable execution engines for implementation of the respective configurations of the process simulation module and the analysis module to enable the on line monitoring of the process based on communications with the process control system during the operation of the process.

In some cases the configuration of the analysis module includes a principal component analysis PCA tool to generate output data indicative of differences between the model data and the process measurements. Alternatively or additionally the configuration of the analysis module includes a partial least squares PLS analysis tool to generate output data indicative of differences between the model data and the process measurements. Thus in some cases the principal component analysis PCA tool and the partial least squares PLS analysis tool may be utilized in combination to generate output data indicative of differences between the model data and the process measurements.

The configuration of the analysis module may also include an expert analysis tool having a rule stored on the one or more computer readable media and being configured to be applied to output data from the multivariate statistical analysis. Alternatively or additionally the configuration of the analysis module includes a discriminant analysis tool having criteria stored on the one or more computer readable media and configured to be applied to output data from the multivariate statistical analysis.

In some cases the model data includes process parameter data indicative of a future operational state of the process based on the process measurements such that the implementation of the multivariate statistical analysis utilizes the process parameter data to evaluate the future operational state of the process. Alternatively or additionally the model data includes a non measured process parameter indicative of the operation of the process and derived from the process measurements such that the configuration of the analysis module is adapted to analyze the non measured process parameter.

In some embodiments the system further includes a process graphic stored in the one or more computer readable media and adapted for use by the one or more execution engines in generating a user interface having a graphic display of the plurality of physical devices modeled by the process simulation module. The graphic display is configured to provide a plurality of display elements representative of current operating conditions of the plurality of physical devices respectively in accordance with the multivariate statistical analysis. Each display element of the plurality of display elements may be individually selectable to configure the analysis module.

The elements of the process control system may include a process control module which in turn includes a plurality of process control routines stored in the one or more computer readable media and configured to support transmission of the process measurements to the process simulation module and the analysis module during the operation of the process.

In cases where the configuration of the analysis tool includes a principal component analysis PCA tool the tool may include a plurality of model data sets where each model data set corresponds with a disturbance input provided to the process simulation module to simulate a respective abnormal operating situation.

The implementation of the process simulation module and the analysis module may be integrated within an on line environment of the process control system. The system may then include a graphic display module stored on the one or more computer readable media and adapted for implementation by the one or more execution engines to generate a depiction of the plurality of physical devices with information indicative of a fault condition identified by the multivariate statistical representation the depiction being provided via a user interface integrated with an operator interface of the on line environment of the process control system.

In accordance with another aspect of the disclosure a method is useful for on line monitoring of operation of a process in connection with process measurements indicative of the operation of the process. The method includes the steps of simulating the operation of the process to generate model data indicative of a simulated representation of the operation of the process and based on the process measurements implementing a multivariate statistical analysis of the operation of the process based on the model data and the process measurements and evaluating output data from the multivariate statistical analysis during the operation of the process to enable the on line monitoring of the process.

In some cases the multivariate statistical analysis includes principal component analysis PCA of data indicative of the operation of the process. Alternatively or additionally the multivariate statistical analysis includes a partial least squares PLS analysis of data indicative of the operation of the process.

In some embodiments the evaluating step includes the step of determining whether a fault condition exists in the operation of the process via classification analysis of the output data. The classification analysis may be based on one or more expert rules. Alternatively or additionally the classification analysis includes discriminant analysis of the output data.

The method may also include the steps of rendering a graphic display of the process and displaying data indicative of the fault condition by modifying a portion of the graphic display associated with a portion of the process implicated by the fault condition.

In accordance with yet another aspect of the disclosure a method is useful for on line monitoring of operation of a process in a process plant having a process control system to control the process in connection with process measurements indicative of the operation of the process. The method includes the steps of executing a control routine via the process control system to generate a process parameter based on the process measurements implementing a multivariate statistical analysis of the operation of the process to generate statistical data based on the process parameter and the process measurements evaluating the statistical data from the multivariate statistical analysis during the operation of the process for a determination of whether a fault condition exists and generating a user interface display of a process graphic to enable the on line monitoring of the process by depicting the fault condition determination in connection with a plurality of physical devices within the process plant.

The multivariate statistical analysis may include principal component analysis PCA of data indicative of the operation of the process. Such principal component analysis PCA may include multiway PCA based on process data indicative of historical operation of the process. Alternatively or additionally the multivariate statistical analysis includes a partial least squares PLS analysis of data indicative of the operation of the process. Such partial least squares PLS analysis may include multiway PLS analysis based on process data indicative of historical operation of the process.

Referring now to an exemplary process plant in which smart process objects are used to form process graphic displays and process modules both of which may be integrated with control modules to provide enhanced control and simulation within the plant environment is illustrated in detail. In particular the process plant uses a distributed process control system having one or more controllers each connected to one or more field devices and via input output I O devices or cards which may be for example Fieldbus interfaces Profibus interfaces HART interfaces standard 4 20 ma interfaces etc. The controllers are also coupled to one or more host or operator workstations and via a data highway which may be for example an Ethernet link. A database may be connected to the data highway and operates as a data historian that collects and stores parameter status and other data associated with the controllers and field devices within the plant and or as a configuration database that stores the current configuration of the process control system within the plant as downloaded to and stored within the controllers and field devices and . While the controllers I O cards and field devices and are typically located down within and distributed throughout the sometimes harsh plant environment the operator workstations and and the database are usually located in control rooms or other less harsh environments easily accessed by controller or maintenance personnel.

As is known each of the controllers which may be by way of example the DeltaV controller sold by Emerson Process Management stores and executes a controller application that implements a control strategy using any number of different independently executed control modules or blocks . Each of the control modules can be made up of what are commonly referred to as function blocks wherein each function block is a part or a subroutine of an overall control routine and operates in conjunction with other function blocks via communications called links to implement process control loops within the process plant . As is well known function blocks which may be objects in an object oriented programming protocol typically perform one of an input function such as that associated with a transmitter a sensor or other process parameter measurement device a control function such as that associated with a control routine that performs PID fuzzy logic etc. control or an output function that controls the operation of some device such as a valve to perform some physical function within the process plant . Of course hybrid and other types of complex function blocks exist such as model predictive controllers MPCs optimizers etc. While the Fieldbus protocol and the DeltaV system protocol use control modules and function blocks designed and implemented in an object oriented programming protocol the control modules could be designed using any desired control programming scheme including for example sequential function block ladder logic etc. and are not limited to being designed and implemented using the function block or any other particular programming technique.

In the plant illustrated in the field devices and connected to the controllers may be standard 4 20 ma devices may be smart field devices such as HART Profibus or FOUNDATION Fieldbus field devices which include a processor and a memory or may be any other desired type of device. Some of these devices such as Fieldbus field devices labeled with reference number in may store and execute modules or sub modules such as function blocks associated with the control strategy implemented in the controllers . Function blocks which are illustrated in as being disposed in two different ones of the Fieldbus field devices may be executed in conjunction with the execution of the control modules within the controllers to implement process control as is well known. Of course the field devices and may be any types of devices such as sensors valves transmitters positioners etc. and the I O devices may be any types of I O devices conforming to any desired communication or controller protocol such as HART Fieldbus Profibus etc.

In the process plant of the workstation includes a suite of operator interface applications and other data structures which can be accessed by any authorized user sometimes referred to herein as a configuration engineer and sometimes as an operator although other type of users may exist to view and provide functionality with respect to devices units etc. connected within the process plant . The suite of operator interface applications is stored in a memory of the workstation and each of the applications or entities within the suite of applications is adapted to be executed on a processor associated with the workstation . While the entire suite of applications is illustrated as being stored in the workstation some of these applications or other entities could be stored in and executed in other workstations or computer devices within or associated with the plant . Furthermore the suite of applications can provide display outputs to a display screen associated with the workstation or any other desired display screen or display device including hand held devices laptops other workstations printers etc. Likewise the applications within the suite of applications may be broken up and executed on two or more computers or machines and may be configured to operate in conjunction with one another.

Generally speaking the suite of applications provides for or enables the creation and use of four different types of logical entities the implementation or operation of which may be integrated together to provide for enhanced control simulation analysis and display functions within the process plant . More particularly the suite of applications may be used to create and implement process graphic displays which generally provide an operator display pertaining to a portion of the process plant process modules which generally provide a simulation of a portion of a process plant process control modules such as the control modules which generally provide or perform on line control of the process and analysis modules which generally provide for instance one or more of statistical analysis expert and other rule based analysis and discriminant analysis . The process control modules are generally well known in the art and may include any type of control module such as function block control modules etc. The process graphic display elements which will be described in more detail below are generally elements that are used by operator engineer or other displays to provide information to a user such as an operator about the operation configuration or set up of the process plant and the elements therein. The process modules are generally closely tied to the process graphic display elements and may be used to perform simulations of the operation of the process plant or of some of the different elements therein connected in the manner depicted in the process graphic displays . The process graphic displays and process modules are illustrated as being stored in and executed by the workstations and although the process graphic displays and the process modules could be downloaded to and executed in any other computer associated with the process control plant including laptops handheld devices etc.

A library of smart process objects includes exemplary or template smart process objects that may be accessed copied and used by the configuration application to create process modules analysis modules and graphic displays . The library may correspond with one or more of the aforementioned computer readable media utilized to store data instructions or other entities associated with the disclosed techniques. As will be understood the configuration application may be used to create one or more process modules each of which is made up of or created from one or more smart process objects and may include one or more process flow or simulation algorithms which are stored in a process module memory . Additionally the configuration application may be used to create one or more graphic displays each of which is made up of or created from one or more smart process objects and may include any number of display elements connected together. One of the graphic displays is illustrated in in expanded form and includes a depiction of a set of process elements such as valves tanks sensors and flow transmitters interconnected by connection elements which may be pipes conduit power cables conveyors etc. The configuration application may also be used to create one or more analysis modules each of which may include one or more smart process objects and may further include other modules or components for implementing different types of analyses including for instance statistical expert or other rule based discriminant and other classification analyses and any operations techniques routines and procedures thereof. As used herein the terms classification analysis classification tool and any derivatives thereof are used in abroad sense to include a variety of different types of analyses and determinations including for instance expert and discriminant analyses that may involve determinations decisions analyses and other procedures involving process data and any statistical observational or other derivations therefrom e.g. MSPC PCA and PLS as described below and may but need not involve procedures that classify a set of observations into predefined classes based on a set of input variables or predictors.

An execution engine operates or implements each of the graphic displays the process modules and the analysis modules during runtime to create one or more process displays for an operator as defined by the graphic displays to implement simulation functionality associated with the process modules and to implement analysis functionality associated with the analysis modules . The execution engine may constitute one of several execution engines either working in discrete or integrated fashion to implement the applications tools and other aspects of the disclosure. However for ease in illustration the execution engine is shown as a single entity. The execution engine may use a rules database defining the logic to be implemented on the process modules and or analysis modules as a whole and the smart process objects within those modules in particular. The execution engine may also use a connection matrix which defines the connections between the process elements within the plant as well as within the process modules and analysis modules to implement the functionality for the process modules and analysis modules .

As will be understood the smart process object before being instantiated is an object that is associated with a particular type of entity such as a physical or a logical entity within the process plant of . However after being copied and instantiated the smart process object may be tied to a particular entity within the process plant. In any event the smart process object includes a data store that is used to store data received from or pertaining to the logical entity with which the smart process object is associated. The data store generally includes a data store that stores general or permanent information about the entity to which the smart process object pertains like manufacturer revision name type etc. A data store may store variable or changing data such as parameter data status data input and output data cost or other data about the entity to which the smart process object pertains including data associated with the entity as it has existed in the past or as it now exists within the process plant . Of course the smart process object may be configured or programmed to receive this data e.g. cost data on a periodic or non periodic basis from the entity itself via any desired communication link from the historian via the Ethernet bus or in any other desired manner. A data store may store a graphical representation of the entity to which the smart process object pertains and which is used for actual display to the operator via an operator interface such as the screen associated with the workstation of . Of course the graphical representation may include place holders marked by underlines within the data store for information about the entity such as information defined by the parameter or other variable data about the entity as stored in the data store . This parameter data may be displayed in the graphical place holders when the graphical representation is presented to the operator on a display device as part of one of the graphic displays . The graphical representation and the smart process object may also include predefined connection points marked by an X in the data store that enable an operator or configuration engineer to attach upstream or downstream components to the process element as depicted by the graphical representation. Of course these connection points also enable the smart process object to be aware of the elements connected to that smart object as configured within a process module and may specify a type of connection element that must be used such as a pipe a duct etc. a stream associated with that element etc.

The smart process object may also include one or more inputs and outputs to enable communication with other smart process objects within or outside of a process module in which the smart process object is used. The connections of the inputs and outputs to other smart process objects may be configured by a configuration engineer during configuration of a process module by simply connecting other smart process objects to these inputs and outputs or by specifying particular communications that are to take place between smart process objects. Some of these inputs and outputs may be defined as being connected to the smart process objects connected at the predefined connection points for the smart process object as discussed above. These inputs and outputs may also be determined or defined by a set of rules within the rule database and the connection matrix defining the connections between different devices or entities within the plant . The inputs and the outputs which include data stores or buffers associated therewith will generally speaking be used to provide communications of data from other smart process objects to the smart process object or to provide communications of data stored within or generated by the smart process object to other smart process objects. These inputs and outputs may also be used to provide communications between the smart process object and other objects within the process control system such as control modules within the controllers field devices etc.

As illustrated in the smart process object also includes a method storage that is used to store zero one or more methods illustrated as methods and in which may be algorithms to be implemented by the smart process object during execution or implementation of a process module in which the smart process object is used. Generally the methods stored in the method storage will use the data stored within the data storage portions and and data obtained from other smart process objects or even data from other sources such as the configuration database or historian via the inputs and the outputs to determine information about the process plant or an entity within the plant . For example the methods may determine poor or bad operating conditions associated with the entity defined by the smart process object errors associated with that or other entities within the process plant etc. The methods may be preconfigured or provided based on the type or class of smart process object and will generally be executed each time the smart process object is executed within the execution engine during runtime. Some exemplary methods that may be provided within a smart process object such as the smart process object include detecting leaks dead band dead time movement variability condition monitoring computing costs or other conditions associated with the entity.

The methods may also be provided to help simulate the operation of the process entity associated with the smart process object on the material flowing through that process entity. Thus the methods may be provided to calculate mass balances energy balances flows temperatures compositions vapor states and other system level or stream level parameters associated with the material in the plant to simulate operation of the element so as to calculate expected outputs based on provided inputs etc. Of course these are but a few of the methods that can be stored in and run by a smart process object and there are many other methods that may be used with such methods generally being determined by the type of entity being represented the manner in which that entity is connected in and used in a process plant as well as other factors. It is important to note that while the smart process object may store and execute methods that detect system level conditions errors etc. these methods may also be used to determine other information about devices logical elements such as process control modules and loops and other non system level entities. If desired the methods may be programmed or provided in any desired programming language such as C C C etc. or may be referenced to or may define applicable rules within the rule database that should be run for the smart process object during execution.

If desired each smart process object may include a library of applicable algorithms or methods which may be used to define the simulation behavior of the smart process object when connected within a process module. Such a library is illustrated in a pull down menu for the smart process object of and a similar menu may be associated with each other smart process object. The configuration engineer may define the simulation behavior of a smart process object when this smart process object is placed in a process module by selecting one of the library of simulation algorithms called method method etc. via for example the pull down menu . In this manner the configuration engineer may define different simulation behaviors for a smart process object depending on the type or nature of the process for which the smart process object is being used to model.

If desired the configuration engineer may instead provide a proprietary or other user supplied algorithm to define the simulation behavior of the process element defined by the smart process block. Such a user defined algorithm illustrated as the user defined entry in the pull down menu may be provided to and stored in a smart process object when that smart process object is placed within or used within a process module . This functionality enables the simulation behavior to be customized by the user to thereby provide for better or more accurate simulation. If desired and as will be described in more detail later the smart process objects or each process module may include an operator actuatable switch such as an electronic switch or a flag that disables the use of the simulation algorithms within the smart process objects and that instead causes the behavior of the process module to be determined by a high fidelity simulation package or program such as one provided by HYSYS. In this case the smart process object or the process module obtains simulated parameters from the high fidelity simulation as opposed to using the simulation algorithms within the smart process objects themselves.

During execution or implementation of a graphic display or a process module by the execution engine the engine implements the communications defined by the inputs and outputs to each of the smart process objects in the graphic display or process module and may implement the methods for each of those objects to perform the functionality provided by the methods . As noted above the functionality of the methods may be located in programming within the smart process object or defined by a set of rules within the rule database that the engine executes based on the type class identification tag name etc. of a smart process object to implement the functionality defined by those rules.

It will be noted that an instance of the smart process object has a tag or unique name within the context of the process module with which the smart process object is associated and this tag or unique name may be used to provide communications to and from the smart process object and may be referenced by the execution engine during runtime. Process module tags should be unique within the control system configuration. This tagging convention enables elements within the process modules to be referenced by elements within others of the process graphic displays process modules the analysis modules and even the control modules . Still further the parameters of the smart process object can be simple parameters such as simple values structured parameters or smart parameters that know the expected units and attributes associated therewith. Smart parameters can be interpreted and used by the process rules engine or execution engine to assure all signals are being sent in the same units or are converted properly. Smart rules can also be used to turn on and turn off groups of alarms for the smart process objects or process modules to create a smart alarm strategy and or interface for the operator. Still further smart process object classes can be associated with equipment and module classes within the process control strategy of the plant to provide a known linkage between a smart process object and the process variables it will need to interpret or access.

Smart process objects when used in process graphic displays or process modules may also include mode of operation status and alarm behavior so that these smart objects may be put in different modes during runtime such as the off start up and normal modes may provide a status associated with the object based on its current operating state and may provide alarms based on detected conditions such as a parameter out of range limited high variability etc. Smart process objects may also have a class subclass hierarchy which enables them to be categorized in class libraries to be collected together in a composite structure etc. Still further smart process objects may utilize information from other elements such as control modules and other objects to enable the smart process object to recognize when its associated entity is busy or for example acquired by a batch control process within the plant .

Smart process objects may be associated with any desired process entity such as physical devices like pumps tanks valves etc. or logical entities such as process areas measurements or actuators control strategies etc. In some cases smart process objects may be associated with connectors such a piping conduit wiring conveyors or any other device or entity that moves material electricity gas etc. from one point to another point within the process. Smart process objects that are associated with connectors sometimes referred to herein as smart links or connector elements are also tagged even though the actual device or connector itself may not be tagged or able to communicate within the process plant and are generally used to represent material flow between other elements in the process.

Smart links will typically include properties or parameters that define how different materials or phenomena such as electricity flow through the connection e.g. steam electricity water sewage etc. These parameters may indicate the type and nature of flow such as the general speed friction coefficients type of flow like turbulent or non turbulent electromagnetic etc. through the connector and the possible direction or directions of flow through the connector. Smart links may include programming or methods that ensure that the units of the source and destination object to which the smart link connects match and if not may perform a conversion. The methods of the smart link may also model the flow through the connector using a model or an algorithm to estimate the speed or nature of the flow through the actual connectors length and size of the physical connections transport delay etc. The stored parameters for the smart process object such as friction parameters may be used in these methods. Thus in essence the smart links or connector elements enable smart process objects to be aware of the other upstream and downstream objects or entities. Of course smart links may for example define the connections between other objects the type of fluid such as liquid gas electricity etc. within the system the upstream and downstream side of the entities which other entities are upstream and downstream of the entity for this smart process object the direction of material fluid electric flow etc. in any desired or convenient manner. In one embodiment the matrix may be created prior to execution of process flow modules and may define for the smart links the interconnections between the different devices within the plant and therefore the interconnections between the different smart process objects. In fact the execution engine may use the matrix to ascertain the upstream and downstream entities and thereby define the communications between the smart process objects and the methods associated with the smart process objects. Still further one or more sets of rules may be provided to be used by the smart process objects to interact with each other and to obtain data from each other as needed for the methods within the smart process objects and to resolve the impact of smart objects associated with output connections.

If desired the smart process object may also include hot links such as URLs to key documentation which may be applicable to the type of object or which may be specific to the instance depending on the criticality and application of the device to which the smart process object pertains. The documentation may be vendor supplied as well as user specific. Some examples of documentation include configuration start up and shut down procedures operational and maintenance documentation. If desired an operator may click on the object as displayed in an operator display to bring up the instance specific if any and generic documentation for the object or associated device. Also the operator may be able to add delete change documentation independently of the system software such as maintenance requests records of operational problems etc. Furthermore these hot links may be user configurable or changeable to provide the ability to add knowledge links to objects in the an operator interface to provide for quick navigation to appropriate information associated with the object and to provide the ability to add work instructions specific to the customer to the specific object type or even to the specific instance of the object.

While the process modules and process graphics are described above as being created together by the interconnection of different smart process objects they may be created separately. For example a process graphic may be created using smart process objects and when completed a process module for that graphic may be generated based on graphic elements and their interconnections in the graphic display. Alternatively the process module may be first created using smart process objects and once created a graphic display for that process module may be automatically generated by the configuration application using the graphic display elements in the smart process objects used to create the process module. Still further a process module and a graphic display may be created separately and the individual elements within these two entities may be tied together manually by referencing one another e.g. using the tag properties of the elements within the graphic display and the process module . Through this mechanism a smart process object may be referenced by multiple displays. In any event once created a process graphic display and an associated process module may be run independently or separately although they will typically communicate parameters and information back and forth as desired or needed.

In order to be more comprehensive certain possible features and examples of smart process objects that may be used in or to create process graphic displays and process modules will be described in more detail below. Thereafter a manner in which process graphic displays and process modules created using the described elements and features may be integrated with control modules to provide advanced control and simulation capabilities will be described. It will be understood of course that the smart process object elements and features are not limited to the elements and features discussed herein and that other features and elements could be used in or to create one or both of process graphic displays and process modules if so desired.

Generally speaking a set of predefined graphic elements may be provided in the configuration application to enable a user to construct operator or graphic displays that reflect the process plant. These graphic elements are designed to dynamically show on line measurements and actuators that interface with the control system. In addition unmeasured parameters that reflect process operation may be calculated using on line process simulation provided in the process modules and may be shown as an integral part of the associated graphic displays.

Additionally in an offline environment used for engineering or training simulation purposes the process simulation provided by the process modules may be used in place of the process measurement values in the graphic elements and in the associated control modules. These values which are calculated by the associated process modules may be based on the actuator position or state as well as manual disturbance values illustrated in the process graphics. In this manner the graphic displays and control modules may be used in both on line or control situation and in off line or simulation situations. Also while the static portion of the graphic elements will in many cases appear similar to the three dimensional components included in known graphics libraries further unique features or properties of these graphic elements the information displayed with these elements and their links to the control system I O and process simulation modules is described below with respect to a number of possible types and examples of graphic elements.

Generally speaking the graphic elements and simulation algorithms in the process module associated with a smart process object fall into a one of a number of different types of process elements including stream elements process connection elements actuator elements processing elements measurement elements and estimated property elements. Stream elements generally define a stream of material in the process plant and may be exposed in the graphic display to show the composition density flow temperature pressure weight and or any other parameters defining the stream of material. Stream elements may be defined at the input of the process module and provided to elements within the process module to thereby enable the flow of material through the process module to be modeled and depicted in the graphic display. Similarly stream elements may be illustrated at the output or end of the process module to illustrate in the graphic display the material output of the portion of the process plant depicted by the graphic display. Stream elements also may be used to define how different graphic displays and the associated process modules are connected with one another. For example the output stream in one process module may be the input stream in another process module and may supply the values used at the input stream of the other process module. Streams may contain the following four parts name e.g. pH stream direction e.g. flow input measurement e.g. flow pressure temperature and composition e.g. nitrogen ammonia etc. However streams could have other parts or parameters if so desired.

Process connection elements define the manner in which materials within the plant such as solid materials liquid and vapor and gases are delivered or carried from one device to another. To clearly illustrate the material flow through the process three different types of process connections including piping ducts and conveyors may be used. Of course other connection elements such as electrical cables to address power flow in electro chemical processes etc. may be used as well. Piping is generally used to illustrate and simulate liquid and high pressure vapor or gas flow within the plant. Ducts are generally used to illustrate and simulate low pressure gas flow within the plant. Conveyors are generally used to illustrate and simulate the movement of solid material between processing units. As a result each process connection element defines the type of connection such as a pipe connection a duct connection or a conveyor connection that is used to provide material at the input or output of a device.

If desired the properties of the material that is being transferred by a connection are determined by the upstream input. This information plus a connection status variable defining if the connection is complete may be made available as properties of the connection element on the graphic display. A connection element may start at a processing element output an actuator element output or a stream element output. In a similar manner a connection element may terminate at a processing element input an actuator element input or a stream input.

The properties of a connection element may be automatically displayed when the cursor is placed over the connection element in the graphic display. Also the properties associated with a connection element may be exposed for permanent display by placing a measurement or estimated property element defined below on the connection element. If desired a connection element may be created by holding the left mouse button down over an element output such as a stream output a processing element output or an actuator element output and while holding down a button on the mouse positioning the cursor over an element input. For the connection to be established successfully the input and the output types pipe duct or conveyor of the upstream and the downstream elements must match. The connection will automatically take on the type of the upstream element.

If desired piping elements can be shown or depicted in the process graphic display as a pipe connection duct elements e.g. air or gas can be shown as a duct and conveyor elements may be shown as conveyor belts. Piping duct and conveyor element connections can be automatically routed between processing elements and arrows may be displayed outside the depiction of these elements to show the direction of the flow. If an upstream output is common to two connections then a T element may be included in the pipe duct or conveyor. Similarly T elements may be used to combine multiple outputs. The color or other graphic property of a conveyor element may change to indicate its status e.g. running stopped flowing not flowing plugged etc. Generally speaking the material flow along a conveyor is determined by the motor drive connected to the conveyor. Thus a motor drive actuator which is an actuator element described in more detail below may be connected to the conveyor. Additionally measurement elements described below can be connected to pipe duct and conveyor elements to make it possible to expose measurements associated with the pipe duct or conveyor elements such as the speed of the conveyor or the flow of material in a pipe or duct the properties of the material on or in the conveyor pipe or duct e.g. moisture or weight. Also an exposed property element may be added to display properties of the material on or in the pipe duct or conveyor that are not measured for example the composition of the material.

If desired each of the piping duct and conveyor connection elements may graphically and dynamically reflect a lost connection e.g. by a color change and that a selected property pressure temperature length etc. is outside configured limits e.g. by a color change . Furthermore parameters calculated by the associated process module may be exposed in the graphic. For example properties provided by the upstream connection whether the connection status is bad or good limits on one or more selected parameters of the connection element etc. may be exposed in the graphic display to provide information to the operator about the connection element or the stream being transferred by the connection element.

Generally speaking actuator elements are elements that perform some actuation function with respect to the stream and may be placed between different connection elements or between a processing element and a connection element. Examples of actuator elements include a regulating valve with actuator an on off valve with actuator a pump with motor a force draft fan with motor an induced draft fan with motor an eductor with on off valve a damper with drive a feeder with variable speed motor a conveyor motor drive which may be attached to a conveyor element etc.

The graphic depiction of the valve elements may dynamically reflect the implied valve position by animation for example valve failure by a color change for example the valve full open closed position by a color change for example and the AO DO DC setpoint PV OUT mode etc. by a numeric string or other indication for example of the associated control block controlling that valve. The simulation element associated with the valve elements used in the process module may have simulation algorithms that calculate parameters associated with the valve actuator such as the discharge pressure mass flow liquid temperature liquid composition inlet pressure and outlet pressure. These simulated or calculated parameters may be exposed in the process graphic if so desired. However the user or configuration engineer must usually configure the reference to an AO DO or DC block in a control module associated with the valve as well as the valve type e.g. linear quick opening equal percentage valve sizing etc. and the stroke time from open to close. Of course the simulation algorithms available to simulate the operation of the valve on the material flowing through the valve may be dependent upon the type of the valve and sizing information.

The graphic depiction of pump elements may dynamically reflect the motor status using for example a color change the associated DO or DC function block mode and setpoint using for example strings the motor speed if variable speed drive is used the AO setpoint PV OUT mode if variable speed drive is used and other desired parameters. Likewise the process simulation used in the process module for this element may determine or calculate parameters such as the discharge pressure liquid composition liquid temperature and mass flow which parameters may be exposed in the graphic display. The user may need to define a pump curve based on the pump type. However the user may configure the reference to the DO or DC block associated with the motor start stop the reference to the associated AO function block for variable speed drive if used and the pump curve e.g. pressure versus flow for the defining the operation of the pump.

The graphic depiction of a force draft or an induced fan actuator element may have a depiction that dynamically reflects the motor status DO or DC function block mode and setpoint motor speed if variable speed drive is used the AO setpoint PV OUT DO or DC function block mode if variable speed drive is used and other desired parameters any of which may be exposed in the graphic display. The process simulation element used in a process module for this element may determine or calculate parameters such as the discharge pressure gas composition gas temperature and gas mass flow which parameters may be exposed in the graphic display. The user may configure the reference to the associated DC block for motor start stop the reference to an AO block for variable speed drive if used and the fan curve pressure versus flow for defining the simulated operation of the fan.

In some cases a particular type of actuator may only be used with a specific type of connection e.g. a pipe a duct or a conveyor. The table below defines some exemplary connection limitations for typical actuator elements.

Processing elements include plant equipment that processes the materials or streams in the plant in some manner. Generally speaking all inputs and outputs to and from processing elements will be made through connection elements. Standard processing elements include tanks vertical and horizontal heaters static mixers reactors mixers air heaters and any other elements that perform some type of simple or standard processing activity. For standard processing elements the user may specify the number of inputs and outputs to the element along with the physical equipment properties e.g. size volume etc. The simulation algorithm and static representation of these standard processing elements may be set so that they cannot be modified by the user but may be selectable as described above at configuration time. Of course if desired other typically more complex plant equipment such as distillation columns evaporators separators boilers etc. may be implemented as custom processing elements. The static representation number of inputs and outputs and the simulation algorithm of such custom processing elements may be modified to meet the user interface requirements. Once a custom processing element has been defined it may be saved as a composite or template that may be reused or used as a starting point in the creation of other processing elements.

The tank standard processing element either vertical or horizontal may be configured based on the pipe connections to the tank and the tank element may dynamically reflect the level in the tank using e.g. dynamic animation and the level at 100 or empty using a color change for example . The process module simulation for the tank may calculate and expose via the graphic display parameters such as the outlet temperature the outlet composition the liquid temperature and the simulated level of the tank. However to tie the tank into the system the user or configuration engineer may need to configure the number of input and output connections the complete connections to the tank the tank properties such as size e.g. diameter and height etc.

The heater processing element may dynamically calculate and reflect via the graphic display the heat transfer coefficient e.g. using a color change the outlet product temperature the inlet product temperature the outlet pressure assuming fixed drop etc. A user or configuration engineer may need to configure the complete connections to the heater the heater surface area and the heat transfer coefficient when clean.

Of course other processing elements such as a static mixer neutralizer fermenter boiler a reactor a mixer an air heater a heat exchanger etc. may have display and simulation capabilities that are tailored to these types of devices. Non standard processing elements such as distillation columns may be represented graphically using a custom processing element in which the simulation associated with the vessel may be user defined if not included in a standard selection. The processing in these elements may be described or defined as a step response model relating each input to each output of the vessel. Inputs may be gas and or liquid streams. Optionally the user may define the equations that describe the relationships between the inputs and outputs of the processing element and these equations may be stored in the process module using that element to perform simulation. If desired some simple static graph representations may be provided to help the user quickly create the static graphics associated with a custom processing element. If these simple graphics are used then the user may need to only specify the desired number of input and output connections and the type of connection supported e.g. pipe duct or conveyor supported by the custom processing element. In response the graphic item will be displayed and can be immediately used in the creation of the operator graphic. If desired the gains and any dynamics associated with each input and output of the process element may be specified if the user elects to specify the simulation algorithm as step responses. If the user selects a custom algorithm then an expression editor may be provided for the user to define the simulation algorithm. Based on the method selected the properties of the custom processing element outputs may be calculated differently. Furthermore the user may reference one or more of the algorithms that they have defined in a separate software assembly.

Additionally several pre defined composites or templates may be provided for creating custom processing elements. These templates may include for example a boiler template having a custom algorithm that calculates the exit gas O the exit gas CO the steam generated the boiler drum level and the boiler draft. Such a template may be based on a single fuel input. However by modifying the template it is possible to simulate boilers with multiple fuels. Other pre defined templates may include a specialized vessel cyclone separator template which may be used with in conjunction with the spray dryer custom processing element and which may include a step response model to model the operation of the separator. Likewise a column template a spray dryer and an evaporator body may utilize a step response model to define the expected process response. In an evaporator based on the energy input and the concentration of the input flow the concentration of the outlet flow and vapor release can be calculated. Multiple evaporator elements may be connected together along with heat exchanger and eductor elements to create a multiple effect evaporator. Similarly a specialized vessel stack custom template processing element may be used with the boiler processing element. In this case the properties of the inlet may be carried through the stack with no modifications if so desired or to reflect emissions reductions performed in the stack.

Other types of elements that can be used to create graphic displays and process modules include measurement elements and property elements. Measurement elements include transmitter elements which may be used in the graphic display to access the measurement value associated with a physical transmitter and switch elements. Generally the transmitter element may dynamically reflect bad or uncertain status the mode of the associated AI function block in the control module the measurement value and units etc. associated with an actual transmitter sensor or other data associated with the actual transmitter. In an off line mode or simulation mode the transmitter element may be used to access and display the simulation value provided by the process module rather than the value associated with the AI or PCI block or may be used to provide a measurement value to the associated AI block in the control module as a measurement to be used in the simulated control routine. The transmitter element can be added to a connection element or to a processing element and when such a transmitter element is added to the display the user will generally need to identify the associated AI PCI or DI block in controller scheme that is providing the measurement. In the on line mode the value of the measurement may be shown next to this measurement element. In the off line mode or simulation mode the simulated value of the measurement as developed by the corresponding process module may be automatically displayed. In on line operation the user can elect to switch control and display to the simulated value in the event of a measurement failure.

A switch element may dynamically reflect a bad or uncertain status the mode of the associated DI e.g. manual or OS and the discrete value of a switch on off etc. When in an off line simulation mode the user may use the switch display element to access and change the switch parameters in the graphic display and control module by selecting a simulation value or a manual value and status and by manually entering the value and status of the switch. However a user must generally configure the switch element by providing a reference to an associated DI block in the control scheme a reference to the element property that triggers the switch and the limit and deadband associated with a change of state of the switch.

An estimated property element generally exposed an estimated property of the system as determined by the process module and may be added to a connection or processing element to display any property of that element. When this element is placed on a connection element or on a piece of equipment the user can browse and select the properties that will be displayed. Thus simulated properties that are not available through a physical measurement may be exposed through the use of the estimated properties element. Such an estimated property element may dynamically reflect a good bad connection the estimated property value s and a property that is outside of an associated limit or change. A user must generally configure the reference to property s to be displayed and the limits and color changes for the element if the property is outside of the limits.

As will be understood by attaching transmitter elements and estimated property elements to processing elements actuator elements and connection elements the properties associated with the inputs and outputs of these process elements may be referenced during on line operation or off line simulation. These properties may also be made visible in the graphic display.

Generally speaking an operator may run or execute the configuration application to create one or more process modules or graphic displays for implementation during operation of the process or for implementation in a simulation environment. In one embodiment the configuration application presents a configuration display such as that illustrated in to the configuration engineer. As seen in a configuration display includes a library or template section and a configuration section . The template section includes a depiction of sets of template smart process objects which may include the smart process objects of and may be any of the connection measurement stream processing and estimated property elements described above. If desired non smart elements that only have a graphic definition may also be provided. Essentially the templates and are generic objects that may be dragged and dropped onto the configuration section to create an instance of a smart process object within a process module or graphic display or both . A partially completed process graphic display is illustrated as including a valve two tanks two pumps a flow transmitter and two sensors interconnected by flow path connectors which may be smart links or connector elements as described above and providing a stream output. It will be noted that the graphic display may be made up of both smart process objects and non smart elements.

When creating a graphic display such as the graphic display or a process module the configuration engineer may select and drag the smart process objects and the elements illustrated in the template section onto the configuration section and drop them there in any desired location. Generally the configuration engineer will select and drag one or more smart device process objects or non smart elements depicting devices onto the configuration section . The configuration engineer will then interconnect the smart device process objects within the configuration section with smart connector process objects and may place input and output streams into the display. Moreover non smart elements may be added to the display. The configuration engineer may change the properties of each of the smart process objects during this process using pop up properties menus etc. and in particular may change the methods parameters tags names hot links modes classes inputs and outputs etc. associated with these smart process objects. When the process or configuration engineer has created a process module with each of the desired elements typically representing a process configuration area etc. the configuration engineer may define rules or other functionality associated with the module. Such rules may be execution rules such as those associated with the performance of system level methods like mass balance and flow calculations. The process engineer or operator may also decide to add trends and faceplates that would be useful when the process display is on line. After creating the graphic display the configuration engineer may save that display in a memory and may at that time or later instantiate and download that display to the execution engine in a manner that the execution engine may provide a graphic display. Of course the configuration engineer could create a process module in the same or similar manner although different graphics may be depicted for process module elements as opposed to process graphic display elements. Furthermore the operator may elect to turn on levels of detail while they are running the plant. For example one of the levels of detail would show the composition at each connection.

As noted above the process graphic or process module may be provided with a specific tag. For example smart process objects elements within a graphics display or a process module may be provided a tag including an alias that can be filled in or selected at runtime by for example the execution engine based on other factors such as apiece of equipment or a route selected within the process control system. The use of alias names and indirect referencing in process control systems is discussed in detail in U.S. Pat. No. 6 385 496 which is assigned to the assignee of the present invention and which is hereby expressly incorporated by reference herein. Any of these techniques may be used to provide and resolve aliases in tags for the smart process objects described herein. With the use of aliases and the like the same process module may include or be used to support different views for sets of equipment etc.

The display of illustrates tabs View View and View for different views of a process module or graphic display. These tabs may be used to access and create different views for different users associated with the process using some of the same smart process objects therein.

Generally speaking when the configuration engineer creates a process module or a graphic display the configuration application automatically stores the smart process objects along with the connections therebetween in a database. The database may correspond with one or more computer readable media used not only for storing configuration information but also other data associated with execution or implementation of the applications described herein. For ease in description these computer readable media are referred to herein as a single database with the understanding that the database may have any form or structure. This database can then be used to create other process modules and graphic displays which may for example provide different views using one or more of the same smart process objects. As such when creating the second view the configuration engineer can simply reference the smart process object as already created and stored within the database and any methods etc. stored therewith to place that smart process object in the second view. In this manner the database can be populated as the process control modules and graphic displays are created and the database can be used at any time to create and execute other views modules and graphic displays using smart process objects which already exist within the process flow database. Using such a database each smart process object within the database may support or be used in process modules and referenced in multiple graphic displays. As will also be understood the process modules may be constructed by building displays for these modules and then specifying flow algorithms to be used in or associated with process modules. Of course individual process modules may be spread across and executed by different computers and process modules may be communicatively connected to one other to operate in conjunction with each other either on the same or on different computers. When this is done input and output streams will be externally referenced to the process modules together.

As noted above the configuration engineer may as part of the process module or graphic display creation attach or provide the simulation algorithm of the process module. These simulation algorithms may be preconfigured to calculate or determine certain process or system level properties such as mass balance calculations flow calculations efficiency calculations economic calculations etc. with respect to the process depicted or modeled by the process module. As a result the process modules themselves may have mode status and alarm behavior can be assigned to workstations and may be downloaded as part of the display downloads. If desired the simulation algorithms may be executed by the execution engine to perform mass or heat balancing flow routing flow efficiency flow optimization economic calculations related to process simulation or other desired calculations using the data provided in the smart process objects of the process module. Still further these simulation algorithms may access parameters from the control strategy i.e. the control modules associated with and downloaded to the controllers field devices etc. and may conversely provide data or information to these control modules.

It will be understood that the execution engine is needed to enable the process algorithms to execute across an amalgamation of all process objects and links configured on all displays. Thus the simulation algorithms within the process modules will generally execute regardless of whether any associated graphic display is loaded i.e. called up and displaying information to a user. Of course the simulation algorithms may be cross checked across the entire process or across defined subsets of the process . It will also be understood that during execution of any particular process module the execution engine may provide a display to an operator on an operator interface depicting the interconnected objects or entities within the process module based on the graphic display associated with that process module. The parameters graphics etc. of the display will be determined by the configuration and interconnection of the smart elements within the process module. Furthermore alarms and other information to be provided on this or other displays may be defined and generated by the methods within the smart process objects and the simulation algorithms associated with a particular process module. If desired the execution engine may provide a display for a process module to more than one operator interface or may be configured or set to provide no display even though the execution engine continues to execute the process flow module and thereby perform the methods alarm behavior flow algorithms etc. associated therewith.

If desired a process module may be automatically generated from a graphics display or vice versa and the functionality available to the process module is determined by the process graphic elements. What should be clear is that the process module is preferably constructed to shadow the process graphic display. As a result when the user configures a process graphic display the user has the ability to include additional information for the process module such as mass or energy streams. These streams are used in the process module to establish starting conditions needed by the simulation function blocks.

Additionally because process modules are actual software modules run in a computer it is also possible for them to reference and be referenced by controller modules to use the parameters control strategies displays etc. associated with the controller modules. Also using this capability it is possible for a process module to be created independently of the process graphic display.

Generally speaking process modules will be made of processing elements streams and their associated connections. Because there is a one to one correspondence between the process graphics elements and the simulation elements in the process modules it will be possible for a user to construct a graphic display and to automatically generate the corresponding process module from that display. Of course if desired the user may create the process module and then automatically create the graphic display from that module using the graphics within the smart process objects. However to allow the automatic generation of a process module it may be necessary for the user to identify the actuator connection or processing element properties associated with the measurement elements and estimated property elements. A user may also need to create a process simulation before creating the process graphics or in some cases before the control modules are constructed. After the simulation is constructed it will be possible to fill in the references to the I O blocks in the control module. Also when the associated graphic display is created it will be possible to browse to the existing process module to set the property references.

In some cases the process graphic may not contain all the detail needed to construct the process simulation. Thus it is desirable to provide an editor to enable the user to edit the simulation or process modules that have been automatically created from a process graphic. Also because multiple process graphics may need to display the same piece of equipment it may be necessary in the construction of a process graphic for an element to be able to reference an existing process module.

Generally speaking the simulation that corresponds to the processing elements will have a common structure. If desired the block input connections and the parameters of the simulation are stored in the process module so that no reference to a control module is needed. Furthermore the number of input and output connections supported by the simulation may be defined as extensible results from the simulation execution may be reflected in the simulation output connections or as parameters of the simulation and the simulation algorithm may be defined as a step response or may be entered by the user. When the simulation algorithm is entered by the user the user may independently specify a dynamic for each output.

Still further a common set of parameters may be supported for input and output connections. The parameters associated with input and output connections may be communicated between blocks as an array parameter or structure and may include parameters such as a connection status e.g. good bad limited etc. a mass flow parameter a pressure parameter a temperature parameter a specific heat parameter a density parameter or any other desired parameter. In some cases other parameters such as the composition of a stream may be provided and used in the simulation algorithm. To support this requirement a standard and extended stream element may be provided. As part of the extended stream element configuration the user may select a set of pre defined groups of data to define the stream element. Such extended connections will only be allowed to connect to a block that utilizes this information. In general the extended parameters may include a group name and a number of specific elements. For example a fuel input stream to a boiler processing element may contain the components of the fuel including a fuel set the amount of carbon hydrogen sulfur oxygen moisture and nitrogen in the fuel all in weight if desired . As another example a turbogenerator processing element may use a steam stream and the connections to the associated simulation may use an extended parameter set that includes a steam set steam enthalpy actual entering the stage steam enthalpy actual exiting the stage steam enthalpy if isentropic expansion etc.

The expanded group set may also be used when simulation elements within a process module are used as an interface to high fidelity simulation packages. In this case the composition of some streams can be made visible in the process graphic. Also if desired an interactive editor may be provided to make it easier to create or modify the values displayed on a graphic display as well as associated faceplates and detail displays for control modules to be presented on the graphic displays.

As can be easily seen an output of the mixer is connected to a heat exchanger via piping and two transmitters and . The cooling water stream is delivered to the heat exchanger via a valve and exits the heat exchanger via a valve to produce a return water stream element . Likewise the output of the heat exchanger is delivered through a transmitter element and a valve to provide an output Acetic Acid stream element . While not always called out in particular the elements in the graphic display are in all cases connected with one another via piping connection elements.

It will be understood that display boxes which may be generated as properties of the display elements themselves or which may be separate elements in the form of transmitter and estimated property elements or elements that reference blocks in control modules are illustrated in the graphic display to indicate or expose parameters such as process variable PV values setpoint SP values OUT values etc. associated with the different elements. Additionally if the user were to place a cursor over some of the elements the display may illustrate other values associated with the referenced elements. For example placing the cursor over one of the stream elements such as the Acetic Acid stream output may cause the graphic to indicate the composition pressure temperature density flow rate etc. of the acid stream at this point in the process. Of course the values and parameters displayed on the graphic display may be delivered from an actual referenced transmitter within the process control system such as from an AI block in the control system or from a process module simulation element that simulates the functionality of the element. The graphic display of may be provided to a user during operation of the process which makes white vinegar or to implement a simulation of that process to be used for example to perform design or operator training activities.

While illustrates the use of streams to interconnect different collapsed graphic displays the same procedure could be used to interconnect and to illustrate the interconnection of different process modules. In particular process modules could be collapsed to illustrate a name and stream element inputs and outputs and these collapsed process modules could be communicatively tied or connected to other process modules using depictions of communication connections or links between the stream outputs and the stream inputs of different process modules.

The process module of thus includes a process simulation element which may be represented as a function block associated with or specified by a smart process object for each element depicted in the graphic display and these simulation blocks are interconnected in the manner and using the connection elements specified in the graphic display . If desired the process module may be created automatically after creation of the graphic display or even during creation of the graphic display .

As indicated above each of the process simulation elements in the process module includes simulation functionality e.g. an algorithm rules transfer function etc. that is based on the behavior of the mechanical device used in the process and the nature of the stream s of material provided at the inputs to these simulation elements. These simulations are illustrated in by the SIM blocks within each of the processing actuator and transmitter elements. The dynamics of the devices and the effects on the streams may thereby be modeled or simulated within the process module . Some possible properties that will be available for simulation blocks associated with actuator and processing elements may be outlet temperature based on inlet temperature flows and heat capacity outlet flows based on inlet mass flows and accumulation within the element outlet pressure based on assumed pressure drop across the unit or downstream pressure and outlet composition based on perfect mixing and inlet composition . When custom calculations are implemented the built in dynamics associated with the outlet properties may be added based on for example a first order plus deadtime response to changes in the process inputs. The user may specify the deadtime and lag associated with each calculated property if desired. For process measurement elements e.g. transmitters and switches and connection elements it may be assumed that no dynamics are introduced in the referenced property. However transitions and other properties may be modeled if so desired. However in many cases the properties from the upstream connection may be immediately reflected in the downstream connection.

Using the process module the operation of the portion of the plant depicted in the process graphic can be simulated. This simulation is integrated with the display as values from the simulation elements within the process module may be automatically communicated to and displayed in the graphics of the graphic display and used in the control module. Similarly the training instructor may use the display to effect or change properties in the simulation performed by the process module

If desired a high fidelity simulation such as one provided by HYSYS CAPE etc. may be added to the simulation features by defining I O references for measurement and actuator elements and then using these references to automatically create the DCS interface table that is currently used in for example HYSYS to perform I O in a simulation. Standard processing element templates may be defined for each HYSYS or other high fidelity simulation component that may used to construct a high fidelity process simulation. Such a high fidelity simulation is illustrated in as being communicatively connected to the process module . In this case the user may select to disable the simulation provided in each of the simulation elements in the process module and instead use the simulation parameters provided by the high fidelity simulation . The user may specify the use of the high fidelity simulation by activating a switch which may be an electronic switch a flag etc. set within the process module .

Generally speaking when the switch is set to use the high fidelity simulation the associated simulation function blocks in the process module act as shadow blocks i.e. their simulation algorithm SIM block is not executed and the block parameters are instead read and written by the high fidelity simulation . However the blocks in the process module still communicate the same parameters and other information to the process graphic and control module and receive information from the process graphic ultimately for use in the high fidelity simulation and control module .

As will be understood the use of the process module in this manner provides an easy and convenient manner of connecting a high fidelity simulation package software product within a process plant in a manner that can be viewed and used by an operator engineer etc. i.e. using the process graphic display associated with the process module . In particular the stream parameters of the process modules may be connected up to or associated with flows modeled in the high fidelity simulation and pathing within the process module can be automatically structured or associated with the pathing within the high fidelity simulation. In effect the process modules are used in this case as variable or data place holders that provide a convenient manner of mapping data within the high fidelity simulation package to the control modules and the graphic displays used in the process plant control and simulation environment.

Still further the process modules and associated graphic displays reduce or eliminate the need to provide a separate display for the high fidelity simulation which is typically currently produced by the high fidelity simulation provider at high cost to the user. Instead because the process modules are already tied to graphic displays when the process modules are connected to a high fidelity simulation package the graphic displays may be used to provide information as calculated by the high fidelity simulation package to the user and to enable the user or operator to manipulate inputs to the high fidelity simulation package. Still further because the process modules are communicatively connected to the control modules the parameters or data generated by the high fidelity simulation package may be used in the control modules to perform on line control activities. Using the process modules in this manner a high fidelity simulation package can be executed in parallel to in addition to being integrated with the control modules.

As will be understood from the discussion provided above the process modules and graphic displays may be created and run in an integrated manner to provide an operator view of a section of the process plant along with a process module that simulates the operation of the process plant depicted by the graphic display. Advantageously the process module and the graphic display may additionally be integrated with e.g. communicatively connected with one or more control modules that perform control activities with respect to that section or portion of the process plant. Thus the control modules illustrated in may be communicatively integrated with one or more of the process modules and graphic displays illustrated in . Of course the control modules the process modules and the graphic displays may be implemented in any other computers or devices within the plant as desired or necessary in any particular case other than those illustrated in .

As a result of the configuration of the graphic display the process module which may be created at the same time as the graphic display includes process simulation elements in the form of a valve element a tank element a pump element and a valve element corresponding to the physical elements depicted in the graphic display . The control module which controls at least some of the physical elements associated with or depicted in the graphic display includes a set of interconnected function blocks which provide control within or associated with the elements depicted by the graphic display and by the process module . In this example the control module includes two control loops and . The first control loop has an analog input AI function block that receives flow input information about the flow of fluid into the tank a proportional integral derivative PID control function block that performs PID control and an analog output AO function block that operates the valve to effect the desired flow of material into the tank . In a similar manner the control loop includes an AI function block that provides tank level information as measured by a level sensor within the tank a PID control block and an AO function block that receives a control signal from the PID control block to operate the valve to effect control of the level of fluid within the tank . The control module also includes a discrete input DI function block that indicates for example the on off state or operation of the pump and which may be used by the control loops and if so desired to perform control activities with respect to the tank .

As will be understood any of the elements within any of the graphic display the process module and the control module may communicate with others of those elements via associated communication tags to provide information back and forth between these different entities to thereby provide for better or enhanced control simulation and operator displays as will be explained in more detail. For example as illustrated in the PID control block of the loop may be configured to provide information to the graphic display to display the current flow setpoint being used by the PID control element or may read the setpoint to be used in the control module from the graphic display as indicated by the arrowed lines between these elements. In a similar manner the tank element of the process module may provide a simulation output to the AI function block of the control loop of the process control module indicating the simulated level of the tank as determined by the simulation algorithm within the element . This simulated tank level may also be illustrated on the graphic display as additional information for viewing by the operator.

If desired the AO block of the control loop may provide information to and receive information from the valve of the graphic display . Additionally the AO function block of the loop can be configured to provide its control output to the valve element of the process module . In this case the valve element may compare a predicted value for the valve position with an actual valve position being measured in the control loop to determine if there may be some malfunction in the physical element. In the case of a difference over a certain amount the process module may include software that generates an alarm or an alert on the graphic display that indicates a potential problem within the process plant such as a faulty sensor etc. As also illustrated in the valve element may provide a simulated measurement or parameter to the graphic display to be displayed or made available to the operator. Such a simulated measurement or parameter may indicate a simulated or predicted flow from the valve or any other simulated parameter associated with the valve . Of course any other desired information or data including actual measured data simulated data or graphic display data may be provided to elements in the graphic display the process module and the control module to provide for better or enhanced control simulation or display.

Generally speaking there are numerous advantages that may result by integrating a process module with a control module and if desired additionally with a graphic display. In one case as mentioned above the simulation performed by the process module may compare a simulated or predicted measurement parameter or other process value with a measured or calculated parameter provided by the control module to detect potential problems within the system. For example a great difference between the flow out of the valve as calculated by the process module and as measured within the process itself may be a reason to generate an alarm indicating some device problem exists. Conversely the control module may use a simulated parameter to provide enhanced control in a situation in which the control module knows of a faulty sensor or other element that is no longer active or available to the control module. In this case the control module can automatically replace a measured value or parameter which may be known to be faulty which may have a bad status etc. with a simulated output as developed by the process module without needing operator involvement and without having to shut the process down. Also displaying both simulated and actual control data on the same display may help the operator or user detect problems within the plant useful in a simulation mode useful to perform better design activities etc.

The process module is associated with the portion of the process having the mixer and valves controlled by the control module . In particular the process module has valves actuator elements and which simulate the flow of three streams depicted by arrows at the left hand side of the process module into a mixer element . A valve element simulates the flow of fluid out of the mixer element to define an output stream on the right hand side of the process module and a transmitter element may indicate or simulate the measured composition of fluid exiting the mixer element . It will be noted that the connection elements for the sake of clarity are illustrated as simple lines in the process module .

In this case the AO function blocks may control the operation of the valves in the process plant depicted by the valves in the process module while the control inputs to the AI function blocks may be provided by a composition sensor a flow sensor or other sensor in the process plant that is depicted by the transmitter in the process module .

As will be seen logical elements within the process module and the control module may be communicatively interconnected to provide information from the process module to the control module and vice versa in desired or useful manners. In one example a communication connection illustrated by the dotted line may be configured between the output of the transmitter element of the process module which exposes the simulated measurement of the material composition in the mixer and a simulated input SIM IN of the AI block in the process control module . In this manner the simulated measurement of the level of fluid in the mixer is provided to the AI block and the AI block may use this simulated input when for example the signal at the control input IN of that block has a bad status or is known to be faulty for some reason. In this manner the AI block may still provide an approximated value of the measurement associated with the AI block when the actual physical measurement is not valid or not available thereby enabling the control module to continue to function and provide control in the presence of a faulty sensor. Such a connection may also enable the control module to run in a simulated mode in which valid simulation data as provided by the simulation process module is used during off line operator training or to test the control module .

Alternatively or in addition a communication connection illustrated by the dotted line may be configured between the output of the AO block in the process control module and an input of the valve element which models the actual valve being controlled by the AO block in the process plant. Here the valve element may use data obtained from the actual valve or sent to the actual valve to determine whether the simulated data i.e. the measurements and parameters calculated by SIM block of the valve element is correct or matches with the data used in the actual control routine . If there is a significant difference the process module may generate an alarm or alert indicating a potential problem or may use the real data to provide better or more accurate simulation within the process module . For example the valve element may use the actual control data in the SIM block for the position of the valve element to reflect the actual valve position in the simulation. Of course other connections between the elements in the process module and the control module may be made to provide data flow in either direction between these two modules for performing enhanced control and or simulation. Still further any of the data from the process module or the control module may be automatically made available to the operator via a graphic display associated with the process module .

If desired the process modules may provide and simulate redundancy functions within a process control network or a process plant. In particular the process modules may simulate the operation of actual redundant elements such as redundant devices redundant control blocks etc. disposed within the process plant and be able to detect or simulate the operation of actual redundant elements including for example when the back up redundant element should take over etc. . Additionally if desired a process module with its simulation capabilities may be used as one of a redundant pair of elements within a process plant. In this case the process module or any portion thereof may operate as a back up device providing back up or redundant data signals calculations etc. in case of a failure of or a detected problem associated with the primary and actual physical device. In this case the process module acting as the redundant element may be communicatively interconnected with the control modules that perform control or sensing operations in any known manner to provide the redundant capabilities. This use of process modules as redundant elements within the process plant is particularly useful when the process modules are connected to one or more high fidelity simulation packages in the manner described above.

It will be understood that the functionality of the smart process objects the graphic display elements and the process modules described herein may operate in the operator workstation and does not need to be downloaded to and configured within the controllers field devices etc. within the plant which makes this functionality easier to implement view change etc. Further this functionality enables system level determinations to be made more easily than within the process devices controllers etc. because the information pertaining to the devices on a system level is all typically available to the operator workstation in general and to the execution engine in particular whereas all of this information is not typically made available to each controller and field device within the process plant . However when it is advantageous to do so some of the logic associated with the process modules such as primitives may be embedded in the devices equipment and controllers down within the process plant. The use of smart process objects to create integrated process control modules and graphic displays enables the execution engine to for example automatically detect leaks and produce smart alarms with minimal amounts of user configuration activities to calculate and track flow and mass balances within the plant to track losses within the plant and to provide higher level diagnostics for the plant and to simulate the operation of the plant during engineering design and operator training.

As will be understood from the discussion provided above the process modules and graphic displays may be created and run in an integrated manner to provide an operator view of a section of the process plant along with a process module that simulates the operation of the process plant depicted by the graphic display. As described above the process module and the graphic display may additionally be integrated with one or more control modules that perform control activities with respect to that section or portion of the process plant. Thus the control modules illustrated in may be communicatively integrated with one or more of the process modules and graphic displays illustrated in . Of course the control modules the process modules and the graphic displays may be implemented in any other computers or devices within the plant as desired or necessary in any particular case other than those illustrated in .

While each process module may include analytical functionality as described above the process modules graphic displays and control modules may also be integrated with data analysis functionality to automate and support the on line monitoring of an operating process. For instance a process module directed to modeling one portion of a process plant and any number of graphic displays and control modules integrated therewith e.g. operatively and communicatively coupled therewith may be integrated with one or more data analysis modules or systems to monitor the operation of that portion of the process plant. As described below the data analysis modules or systems may provide or implement both statistical analysis and classification e.g. discriminant expert or other rule based analysis or other logic to assist in the detection prediction and or other management of abnormal situations with respect to a specific section or portion of the process plant. To these ends the statistical and classification analysis may be for example implemented by statistical classification and other tools which in turn may utilize simulation model data provided by the process module as well as actual process measurement data made available by or transmitted from a control module associated with the physical entities e.g. field devices in the process plant associated with the process module. The model data may then be compared with the process measurement data to generate for instance error data to be processed by the statistical analysis tools which in turn generate output data suitable for analysis by the classification tools directed to detecting or predicting an abnormal situation. If the data patterns or other conditions are indicative of a specific abnormal situation are detected the classification tools may then execute or otherwise effect the implementation of for instance an operator alarm corresponding to the detected condition or situation or otherwise modify a user interface display to provide an indication of the detected abnormal situation. Due to the integrated nature of the process modules analysis modules graphic displays and the control modules the user interface display s involved in providing the alert or other indication may correspond with the same operator and other user interfaces utilized in monitoring the process control system. As a result the runtime environment may also include and involve the implementation of analytical functionality along with the presentation of any resulting alerts alarms etc. Alternatively or additionally the analytical functionality described herein may be implemented in and presented via an environment separate from the runtime environment . In either case the integrated nature of the process modules and the analysis modules may also involve the implementation of analytical functionality within the smart process objects described above in connection with the process modules.

The analysis module may provide an expert or discriminant analysis tool or system or other classification functionality to help detect and or manage abnormal situations associated with at least some of the physical elements associated with the blocks in the process module by utilizing at least process and or simulation data from the blocks in the process module . In other words the expert discriminant or other classification analysis may help to detect prevent and or manage actual abnormal situations in a process plant by utilizing at least data from the process module . Also the expert discriminant or other classification analysis may help to detect and or manage abnormal situations associated with or indicated by a simulation of or otherwise associated with at least some of the physical elements associated with the blocks in the process module . In this way the expert discriminant or other classification analysis may for instance help to detect and or manage simulated abnormal situations in the process plant. This may be helpful in configuring and or designing control systems safety systems alarming systems etc. and or training operators for example. The use of the simulation functionality of the process module may also support the detection prevention and or management of abnormal situations indicated by process parameters not directly measured in the process plant. For instance the simulation functionality of the process module may generate model data indicative of an unmeasurable process parameter based on the set of process measurements obtained from the operating process. The unmeasurable process parameter may in fact be indicative of a future operational state of the process. In this way the analysis system can be capable of predicting abnormal situations based on the simulation model provided by the process module .

In the exemplary embodiment shown in the analysis module includes a set of rules and an expert engine that applies the rules. The rules may represent for example heuristics or rules of thumb that specify actions to be performed in different situations. Typically a rule may include an if portion that specifies a particular set of facts that cause the rule to be applicable. Also the rule may include a then portion that specifies actions to be taken if the if portion of the rule is satisfied. Often the rules may be configured to detect abnormal situations associated with the process module. In such implementations the actions to be taken may be associated with notifying personnel that an abnormal situation has occurred or is occurring. Thus the rules may indicate actions to be taken such as generating an alert or alarm displaying a notification on an operator screen sending an email sending a page to a pager sending a text message to a portable communication device etc. Similarly the rules may indicate actions to be taken such as screening alerts or alarms. For example an underlying problem may result in a large number of alerts or alarms being generated for related equipment measurements parameters etc. The analysis module could be used to help screen such resulting alerts and alarms so that they do not obscure the underlying problem. The actions to be taken also may be associated with correcting the abnormal situation and or mitigating its effects. Thus the rules may also indicate actions to be taken such as overwriting a control signal value overwriting a set point value modifying an equipment setting shutting down equipment etc.

The expert engine may evaluate the rules as applied to data associated with the process module . For instance the expert engine may analyze model data generated by or obtained from the process module . For example any of the elements within the process module may communicate with the analysis module via associated communication tags to provide information to the analysis module to thereby provide for better or enhanced control simulation and or abnormal situation prevention. For example the tank block may be configured to provide process variables e.g. a tank level measurement an input flow measurement etc. alarms parameters etc. to the expert engine . Alternatively the analysis module may be configured to obtain information from the tank block or otherwise obtain data made available thereby. Similarly the valve blocks and may be configured to provide process variable data e.g. a valve position a control signal value etc. alarms parameters etc. to the expert engine or the expert module may be configured to obtain information from the valve blocks and .

Additionally the expert engine may analyze other data associated with the process module such as past alarms and alerts operator actions set point changes operating modes etc. stored in an event chronicle or data historian for example associated with process blocks in the process module historic values of process variables parameters etc. stored in a data historian for example future values of process variables parameters etc. based on models such as step response models first principals models etc. . Further the expert engine may optionally analyze other types of data such as data associated with other process modules data associated with equipment not depicted in the process module etc.

The expert engine may comprise a CLIPS expert system tool and or any other suitable off the shelf or customized expert system tool for example. Thus one of ordinary skill in the art will recognize that a CLIPS expert system tool is not required. Although in the expert engine is depicted as a component of the analysis module the expert engine could be separate from the analysis module . For example one expert engine could apply the rules of a plurality of expert modules associated with respective process modules. Referring to the execution engine may alternatively include one or more expert engines .

Also although the analysis module is depicted in as being separate from the process module the analysis module could be incorporated within the process module . As just one example the rules could be part of the process module and the expert engine could be separate from the process module . More generally the configuration of the expert engine and data indicative of the rules may be stored in any desired fashion or data structure in one or more computer readable media including for instance the configuration database and engineering tools a process historian etc.

In alternative embodiments the analysis module includes one or more other types of classification functionality tools elements etc. The foregoing description of the implementation and integration of the expert engine and expert rules is not limited to embodiments involving experts expert systems expert rules or expert engines.

Further details regarding the integration and interaction of process and analysis modules are now disclosed. As described above a process module may include a plurality of interconnected process objects that together help to represent a process entity a logical entity a unit etc. in the process plant. As also described above smart process objects include inputs and outputs to communicate data generated by stored within etc. between smart process objects non smart process objects control modules process graphics etc. Thus a process module may provide a single object in which a variety of data is available from a number of devices associated with some physical or logical unit of the process plant. Moreover because the process module is integrated with the analysis module in the system the expert system can be more easily configured and integrated than in past expert systems. For example the process module could automatically make available some or all of its model data to the analysis module . In past process systems that utilized an expert system on the other hand an operator would need to manually determine and configure the data that was to be provided to the expert system which could be time consuming. Similarly because a process module such as the process module may have an associated process graphic it may ease configuration of the expert module if such configuration may be performed with reference to the process graphic. Further because the process module may provide modeling and or simulation capabilities the analysis module can conveniently have access to data generated by the process module using these capabilities. Still further process module classes with associated expert rules or other analysis tools may be created. For example default rules or fault criteria for an analysis tool could be configured for a process module class. Then when an instance of the process module class is created it may be provided with the integrated analysis module having the default rules or fault criteria. A user could then modify the default rules if desired or merely utilize the default rules for the process module instance for example. These and other configuration capabilities may be provided via one or more configuration applications such as the configuration applications .

The process module and or process objects within the process module may include additional parameters to support integration with the analysis module . For example one or more process objects may include a parameter or existing parameters may be modified to indicate if there is a fault e.g. a fault in a measurement . For instance the analysis module may determine that a sensor is faulty and may then modify the process module to indicate that the measurement associated with the sensor may be faulty. This data could be utilized by other process blocks control modules etc. Similarly this data could be reflected in a process graphic of the process module to indicate detected faults to an operator. In general outputs generated by internal states of rule evaluations of etc. the analysis module may be exposed as parameters of the process module and or of process objects of the process module. Thus these exposed parameters can be referenced by the process graphic of the process module other modules etc.

Additionally one or more process objects may include a parameter or existing parameters may be modified to permit screening of alerts and or alarms. Similarly the process module may include a parameter or existing parameters may be modified to permit screening of alerts and or alarms. For example the analysis module may detect an underlying problem associated with the process module and may modify the process module to screen alarms that may generated as a result of the underlying problem but that do not explicitly indicate the underlying problem. As discussed above such alarm screening may help prevent the underlying problem from being obscured.

Referring to the expert rules among other elements and aspects of the analysis module could be stored in the configuration database . In this way the rules could utilize tags and or aliases to reference elements of the process module the process or of other process modules such as properties parameters modes states etc. Additionally if the process module was changed updated renamed etc. by a configuration engineer for example the analysis module could still reference information from the process module using the tags and or aliases. Similarly if a parameter for example referenced by the analysis module was deleted by a configuration engineer the configuration software could alert the configuration engineer that the parameter was referenced by the analysis module . Thus in general integrating the analysis module with the process module and or storing expert rules in the configuration database may help keep the expert rules up to date with changes to configurations of the process plant. Additionally many configuration databases utilize version control techniques to track versions of configurations. Thus versions of the rules could be tracked if they are stored in the configuration database .

Referring to analysis modules associated with the process modules may be provided to the control configuration database and engineering tools which may utilize the analysis modules in any desired manner within the control strategy documentation. The expert rules may be associated with display class definitions prior to runtime and then the display class definitions and expert rules bound thereto may be instantiated and provided to the graphic display process module runtime environment which may be implemented in the form of one or more execution engines in one or more workstations . The expert rules may be applied by an expert engine implemented by the graphic display process module runtime environment or the rule based execution engine for example. In such an implementation the analysis modules may have access to a wide range of real time data and optionally non real time data as well . For example if an operating system such as the Vista version of the Microsoft Windows operating system code named Longhorn is utilized the analysis module may have access to real time and non real time data provided by various data sources via services.

Further other modules may have access to real time values of states parameters properties outputs etc. of the analysis modules . For example process graphics displayed on operator workstations may be modified based on data from one or more analysis modules . As just one example if an analysis module determines that a sensor is defective a process graphic displayed on an operator workstation could be modified to indicate the defective sensor. For example a color of a depiction of the sensor could be changed the depiction of the sensor could be flashed on and off a window could be displayed next to the depiction of the sensor indicating it may be defective etc. Additionally the analysis module could generate alerts and alarms and could screen alerts and alarms of other modules for example. Further if an operating system such as the version of the Microsoft Windows operating system code named Longhorn is utilized the analysis module provide data to other modules via services.

Further an operator could examine and or modify one or more analysis modules during runtime. For example an operator could modify a process graphic during runtime to view additional parameters states modes etc. of the analysis module . Similarly an operator could modify the rules during runtime or otherwise modify the analysis criteria and classification logic. For instance an operator could add additional rules modify rules delete rules disable and or enable rules etc.

Generally a user interface for configuring an analysis module such as the analysis module may include a set of predefined rules or criteria that may be utilized by an operator. For example predefined rules may include predefined fact templates and corresponding action templates corresponding to actions to be taken in response to the facts. For example fact templates and action templates may be provided for a particular process plant entity or unit such as a heater unit. If the user decides to utilize a particular fact template and a particular actions template for a heater process module an analysis module configuration application may automatically create a rule or criterion corresponding to the fact template and the action template. Further the rule or criterion may be automatically bound to the correct process objects in the process module. Additionally a user may be permitted to modify the predefined rules and or create new rules. For example an operator may be permitted to browse and select facts associated with the process plant. Further a user may be permitted to create new rules suitable for evaluation by a CLIPS expert system tool or some other suitable classification tool.

Further the user interface may permit a user to observe the operation of the analysis module during operation. For example facts specified by the rules may be displayed to the user during execution of the expert module. Further the user may be able to modify and or specify these facts in order to observe the operation of the analysis module in response to those facts. Further the user interface may permit the user to insert break points within the rules on that the state of the analysis module at the break points may be observed for example.

If a user selects a particular fact fact template action or action template in the portion or the portion additional information regarding the selected fact fact template action or action template may be displayed in the informational portion . The informational portion may permit the user to modify the displayed information. Thus a user can modify the selected fact fact template action or action template.

An analysis module may be able to be assigned to a particular node e.g. workstation controller etc. within the process plant for execution. Thus the node on which the analysis module is executed may be the same as or different than the node on which the analysis module was configured. In one implementation the analysis module is assigned to the same node as the process module with which it is associated. Alternatively the analysis module and the process module may be assigned to different nodes. As just one example an analysis module could be assigned to a node using graphical techniques. is a portion of an exemplary display that can be used to assign analysis modules to be executed by a particular node e.g. a workstation a controller etc. in the process plant . The display includes an explorer portion and an informational portion . The explorer portion includes a tree structure that may include folders and corresponding to workstations in the process plant . The folder includes an analysis modules folder . An analysis module can be assigned to the node corresponding to the folder by dragging an item corresponding to the analysis module to the folder or optionally the folder . Optionally an analysis module could be assigned to a node by similarly dragging a process module item corresponding to the analysis module to the desired node folder.

As described above data from a process module may be provided to an analysis tool integrated with the process module. It will be understood by those of ordinary skill in the art that data from the process module could be processed analyzed etc. prior to being provided to an analysis tool or other logical analysis unit. For instance is a block diagram of an exemplary system in which a process module is integrated with an analysis module . The analysis module may include a statistical analysis tool or module an expert tool or module and a discriminant analysis tool or module . The statistical analysis tool will be discussed in greater detail below. The expert and discriminant analysis tools and may include respective engines and criteria sets similar to those discussed above with respect to . Alternatively or additionally the expert and discriminant analysis tools and may be implemented by one or more generic execution engines. In any event the expert and discriminant analysis tools and may include or access configuration data for analysis which may in turn include or define a set of rules or other classification criteria.

The statistical analysis tool may also be implemented by a dedicated execution engine or generic execution engine. In either case the statistical analysis tool may also include or access configuration data utilized during the statistical analysis.

Generally the characteristics aspects and other details described and depicted in connection with the system of may also apply to the analysis module regardless of whether the analysis module includes expert functionality. Thus the manner in which the analysis module or the statistical analysis tool is configured stored implemented integrated etc. with the rest of the system may be similar to or follow the configuration functionality etc. of the analysis module of even if the analysis module only includes for instance the statistical analysis tool . Furthermore the entire analysis module or any portion or component thereof may be configured as a part of the process module such that for instance implementation of process objects within the process module involves or includes the statistical and or expert analysis to any desired extent.

The process module may include all of the functionality described above in connection with the process module and furthermore be integrated with a control module similar to the control module . During execution the process module and the control module may implement communications as shown in . In this way the process module receives process measurements from the process plant which may but need not involve processing by the process control module or more generally the process control system as an intermediate step. The process module receives the process measurements during the operation of the process such that the simulation model functionality thereof is based on as well as updated by the latest data indicative of the operating process. The communications between the process module and the process control module are shown schematically in as bi directional arrows with the understanding that the arrows may represent communications data sharing etc. between specific elements or objects of the modules as shown in .

The statistical analysis system may utilize multivariate statistical process control MSPC techniques to facilitate detecting isolating predicting or preventing abnormal situations such as process and measurement faults. Two statistical projection techniques used in MSPC have been developed to address the requirements in the process industry Principle Component Analysis PCA and Partial Least Squares PLS analysis. The statistical analysis tool may utilize one or both of PCA and PLS or could utilize one or more other techniques. Additionally two statistics commonly used in conjunction with MSPC in fault analysis are Square Prediction Error Q a measure of lack of model fit and Hotelling s T2 a measure of the variation within the PCA model . Thus the statistical analysis system may optionally utilize techniques employing Square Prediction Error Q and or Hotelling s T2. Alternatively or additionally the statistical analysis tool may support other techniques for evaluating or processing the results of the statistical processing such as via generation of user interface displays for direct evaluation by an operator or other user. Such interface displays may support non automated analysis by including or involving graphical depictions of the statistical analysis of any suitable form given the data generated in the statistical processing. In the exemplary embodiment shown in the displays include a plot a bar graph and a chart rendered via a user interface. These displays may be generated in any number of ways in either the configuration or run time environments described above using any one of the aforementioned applications. For instance the graphical depictions and may be called up via user via selection of one of an associated or corresponding display element depicted in a graphic display associated with the process module s involved.

Regardless of the specific statistical projection technique or the form of any output generated or facilitated by the analysis module the statistical analysis tool may be implemented and utilized to generate one or more statistical representations of the operation of the process based on the simulated representation thereof provided by the process module . More specifically the process module passes model data indicative of a simulated operation of the process to the analysis module to support a comparison with actual process measurement data. Generally speaking the comparison can assist in detecting predicting etc. fault conditions or abnormal situations. And because the simulation model is on line the comparison is capable of more accurately reflecting or specifying a normal or expected state of the process. More specifically and as described above the process module may utilize a set of the actual process measurements e.g. the process inputs in the calculation of the simulated representation of the operation of the process. Using this data as the input data in conjunction with a simulation model supports a more targeted and flexible comparison than those performed in the past based on an average or best profile over time e.g. a golden batch as applied in multi way PCA or other average of past measurements.

The manner in which data flows between the modules shown in may change depending on the degree to which the modules are integrated. In some cases all of the process measurement data may pass through or otherwise be made available to the process module on its way to the analysis module regardless of whether such data is used by the simulation model of the process module . This may be the case for instance where some or all of the analysis functionality is implemented within the process module . Such data may also be used by the process module to update or otherwise modify the simulation model. In other cases the control module may directly provide or otherwise make available the actual process measurement data to the analysis module as shown in .

The comparison between the model data from the simulation model and the actual process measurement data may involve or include the generation of an error signal representing the differences for an array of process parameters or variables. The difference or error calculation may be performed by a module within the statistical analysis tool . In other cases the error signal may be generated or determined by elements in for instance the process module . Alternatively or additionally some other tool or module within the run time environment may be dedicated to generating the error signal. In any case the parameter array may be based upon a configuration procedure utilizing for instance one of the configuration applications during which process plant devices or parameters are selected via one of the process graphic displays. In some cases a large number of process parameters may be selected as a group when an entire process area is selected via such procedures.

The reference data used in the error calculation need not be actual process measurement data provided by for instance a control module. In some cases the reference data may include or be derived from expected values such as those provided by a product specification sheet or other values obtained from external sources i.e. outside of the process control system . Examples include laboratory entries for values based on samples taken from the plant on a periodic or other basis. In these and other cases the reference data may include one or more constant values such that the reference data need not be updated or otherwise managed to reflect a certain operational state. It should also be noted that the reference data need not be indicative of normal operation i.e. a desired operational state but rather may involve one or more reference data sets indicative of a variety of different operational states. Some of these operational states may be desirable in which case the departure therefrom may result in an alert or alarm. In contrast the reference data associated with other operational states may be indicative of a specific fault condition. In either case the reference data indicative of such operational states may but need not be actual process measurement data.

With the typically large number of variables e.g. hundreds involved the statistical analysis tool may be useful in processing such data in preparation for further analysis by for example the expert analysis tool or the discriminant analysis tool . To that end the statistical analysis tool may be configured to implement or support the implementation of an MSPC analysis tool e.g. a PCA or PLS loading matrix to generate a representation of the error signal via a smaller more manageable set of variables involved in or associated with certain events that may be relevant to the detection or prediction of an abnormal situation. This set of variables establishes a statistical representation of the difference between the simulation model data and the actual data and thus an indication of the deviation of the process from normal or expected operation. The statistical representation may include or involve a subset of the hundreds of variables initially made available by the process module as well as any number of variables derived therefrom. In some cases the output from the MSPC analysis tool includes a set of scale values for each of the variables established by the MSPC analysis tool . This data set is then passed or otherwise made available to the expert analysis tool and or the discriminant analysis tool . In embodiments utilizing principal component analysis PCA this data set represents the error signal via the principal components created when the MSPC analysis tool was configured or created. Processing the comparison or error data into its principal components or other statistical representation may significantly simplify subsequent analysis by the expert analysis tool or other classification analysis tool via for instance analysis of the pattern of square prediction error.

Exemplary mariners in which the MSPC tool may be configured or created are described below and may generally utilize the user interface functionality provided by the process graphic modules described herein to initially determine the target s and or scope of the statistical analysis. More specifically a certain process plant area group of plant devices or other portion of the process plant may be selected for monitoring via one or more of the process graphic displays. To this end the configuration environment may present one or more user interface displays including process graphic displays process module displays etc. to support the user selection of the process parameters to be used in creating and configuring the PCA. The user interface s supporting such selection may be provided via one of the configuration applications. The portion of the process plant may for example correspond with those devices associated with a specific control module or process module. In any case once the plant portion is selected the configuration application may then determine the set of process parameters involved or implicated. This set is then used for configuration of the statistical analysis tool as well as during operation for process plant monitoring purposes.

As illustrated in a user may be presented a graphic display corresponding with the process module . As described above the user may configure the analysis module with reference to the graphic display . A user may alternatively or additionally configure the analysis module with reference to a display of the process module . In any event the analysis module the statistical analysis tool the expert analysis tool and the discriminant analysis tool may utilize or rely on one or more configuration applications and corresponding user interfaces to provide a configuration environment therefor. The configuration environment may either be integrated with or supported by user interfaces and process graphics provided by other modules or configuration applications.

The user may elect to use all correlated process and simulated data associated with the process module to be automatically included in a PCA. Alternatively the user may elect to include only a portion of that data. Correlated data may be automatically determined utilizing the process connections in the process module for example and may be automatically included in the calculations. Further the user may elect to use data associated with other portions of the process plant e.g. data from other process modules control modules etc. . Also the user may elect to examine certain time periods in which data is to be examined. In this case an historic plot of parameters could be displayed to the user and the user could then be given the option to select a time frame to be considered in generation of a PCA representation. The PCA representation could then be automatically generated using the selected time frame of data.

Once the process parameters have been determined the MSPC tool such as a PCA or PLS loading matrix is generally created or trained to discern between deviations from normal operation of the process. Such deviations may be introduced during the training process by providing two data sets to the error calculation tool each of which being generated from the simulation model. One of the data sets is representative of normal operation while the other is representative of operation upon introduction of a disturbance input. The disturbance input may be indicative or representative of a type of fault e.g. measurement fault for which the MSPC tool is to be configured to detect. The difference or error signal between these two data sets is then provided to the MSPC tool for generation of scores that are used by the expert or discriminant analysis component for fault detection.

The operation of the analysis module is now described with continued reference to the exemplary embodiment of and the functionality of the on line simulation model provided by the process module . For the reasons described above the process module may include one or more objects or elements capable of calculating e.g. simulating a number of different types of parameters. As a result the model data generated by the process module may be representative of the operation of the process in a variety of ways. For instance the model data may include an indication of a variable or process parameter not otherwise available from the set of process measurements made by the devices within the process plant. Specifically the simulation calculations established within the process module may be implemented to determine non measured or unmeasurable process parameters that may then be used in the statistical analysis implemented by the analysis module . For example the process module may provide model data including an indication of a future operational state of the process. In one exemplary case such future operational states may be derived from by the process module or otherwise information or data provided by a product specification sheet. Such model data may then be advantageously used by the multivariate techniques to generate a statistical representation of the future operational state that may be compared to the target value to generate an error component for MSPC analysis. For example the process model of a batch process might provide a prediction of end of batch which could then be compared to the product specification for end of batch time.

More generally once the MSPC PCA tool is configured and trained the score vector output or pattern of square prediction error may then be analyzed to detect an abnormal situation such as a faulty sensor using for example the expert tool or the discriminant analysis tool or any other classification analysis tool. Graphic elements associated with equipment related to the abnormal situation e.g. a faulty sensor may then be automatically highlighted on an operator screen. For example graphic elements could be highlighted animated or otherwise graphically indicated to the user on the process graphic . Because the analysis module is integrated with the process module which is in turn integrated with the process graphic a separate graphic display for indicating problems with process plant equipment detected by statistical analysis is not necessary in the system . Of course one of ordinary skill in the art will recognize that in other implementations a separate graphic display may be utilized.

In some cases the above described analysis and evaluation of the process may proceed despite the absence of a model to support the PCA PLS and other statistical analysis. The unavailability of a model may be due to process complexity or any other reason resulting in the lack or other absence of a functioning process module. In such cases an analysis module may be configured to utilize historical and other off line data sets indicative of past operation of the process. The multivariate statistical analysis may then proceed without model data in accordance with for instance multiway PCA multiway PLS or batch dynamic principal component analysis BDPCA techniques.

While the graphic display may present information and data directly via for instance a panel or data field the analysis module may support the generation or rendering of display elements dedicated to graphically indicating the health of one or more devices or pieces of process equipment. In the exemplary embodiment shown in a health indication may be displayed in the graphic display for each depicted device as a half circle or dome shaped graphical item having a shaded or colored portion indicative of the health level. When the health indication is fully shaded the analysis module has determined that the device appears to be operating normally or in good health. Another health indication is partially shaded or filled to an extent indicative of the relative health of a valve with which it is associated. In this case the set of actual process measurements relevant to that valve may have deviated from the model data calculated by the process module element s associated with the valve to a statistically significant extent. The analysis module may then receive such data from the process module and then compare such data with the actual process measurements to arrive at a relative health level of about 60 . The health indication is then accordingly shaded to an extent representative of the 60 level.

The manner in which the health of process instrumentation or equipment is depicted via the graphic display may vary between embodiments as desired. In fact the graphic editor provided with the configuration application may provide a user with the opportunity or capability to design the shape and other details regarding the manner in which a health indication is displayed. For example the graphic editor may be used to configure a graphic display element having anew graphic element that renders a numerical health indication displayed as a dynamic field of a data panel. The health information or related content may be displayed via a faceplate or any other desired graphical element. In some cases the faceplate may provide a multi dimensional health assessment instead of a single value e.g. 60 . More generally the maintenance view of the process graphic may include or utilize any number of different health indicators across the various instrumentation and equipment being monitored and is not in any way limited to the exemplary type or approach shown in .

One method of detecting sensor fault that may be utilized in the analysis module is described in U.S. Pat. No. 5 680 409 Method and apparatus for detecting and identifying faulty sensors in a process which is hereby incorporated by reference herein. The analysis module may utilize techniques described in U.S. Pat. No. 5 680 409 but may also use various other techniques as well. The analysis module may also incorporate or utilize aspects of or be used in conjunction with the systems and methods described in U.S. patent applications Ser. No. 10 971 361 Abnormal situation prevention in a process plant Ser. No. 10 972 155 Data presentation system for abnormal situation prevention in a process plant and Ser. No. 10 972 224 Configuration system and method for abnormal situation prevention in a process plant which were filed on Oct. 22 2004 the disclosures of which are hereby incorporated by reference. The analysis module may alternatively or additionally incorporate or utilize aspects of the methods and systems described in U.S. Pat. No. 6 633 782 Diagnostic expert and a process control system the disclosure of which is also hereby incorporated by reference.

Of course the analysis module may be utilized to detect other abnormal situations in addition to sensor faults. Detection of abnormal situations in plant operation may permit preventative measures to be taken by alerting an operator to the situation when it can be addressed before the situation progresses to a point where equipment is damaged an emergency arises etc.

Similar to the expert module described with reference to the expert and discriminant analysis tools and may be provided with a set of default rules or default criteria for fault detection. For example default criteria to analyze scores or a square prediction error SPE associated with data generated by the statistical analysis tool could be provided. Criteria could alternatively or additionally be defined to identify a range of the SPE for a variable generated by the statistical analysis tool the range being associated with a particular abnormal situation for example. This range value could be established by an engineer viewing historic data for the parameters processed by the PCA tool . When an engineer identifies the time that an abnormal condition existed the SPE value may be automatically saved as the range value for the identified condition. The range value may be established by an operator when he identifies that an abnormal condition has occurred during normal operation for example. Later if the expert tool the discriminant analysis tool or other classification tool detects a pattern in which the SPE value falls within the range an alert or alarm indicating the abnormal condition could be generated for example.

The expert and discriminant analysis tools and may also be used to detect an abnormal situation such as a degradation of process performance. For example the heat transfer coefficient associated with a heater may be accurately determined through the simulation capability provided by the process module. Improper equipment setup and or wear or buildup in pipes and heat transfer surfaces may alter the behavior of equipment and or cause degradation of process performance for example. The automatic detection of significant process changes and or process performance degradation may help prevent equipment damage and or production losses for example.

The expert tool may also be used to analyze and or screen alarms associated with an abnormal situation for example. For instance an underlying cause of a problem may be detected using a variety of techniques including known techniques. The underlying problem may lead to alarms being generated that do not directly identify the underlying cause. Information provided by the process module and or process objects within the process module may be used to permit alarm screening to be enabled or disabled. For example alerts may be prioritized so that the operator may be less distracted from an overload of alerts resulting from the abnormal situations. In this manner the operator may be able to more quickly recognize the underlying problem.

The expert and discriminant analysis tools and may in addition to receiving data from the statistical analysis tool receive process and or simulation data directly from the process module . Alternatively or additionally the tools and may receive data from other sources such as other process modules control modules alarms alerts data historians event chronicles etc.

The analysis module may be configured to generate plots of statistical analysis data such as time series plots and or bar graph plots of principal component scores scores contributions etc. Because the analysis module is integrated with the process module such plots and or graphs may be displayed in response to a request from the user via the graphic display as described above.

Although in the statistical analysis tool and the classification analysis tools and are illustrated as being within a single analysis module one of ordinary skill in the art will recognize that the tools and may implemented in separate modules or systems. For example the expert tool may be implemented as an expert module similar to the one shown in connection with the analysis module of and the statistical analysis tool may be implemented as a statistical analysis module or system. The statistical analysis and expert analysis tools and may be integrated with each other to any desired extent.

When implemented any of the software described herein may be stored in any computer readable memory such as on a magnetic disk a laser disk or other storage medium in a RAM or ROM of a computer or processor etc. Likewise this software may be delivered to a user a process plant or an operator workstation using any known or desired delivery method including for example on a computer readable disk or other transportable computer storage mechanism or over a communication channel such as a telephone line the Internet the World Wide Web any other local area network or wide area network etc. which delivery is viewed as being the same as or interchangeable with providing such software via a transportable storage medium . Furthermore this software may be provided directly without modulation or encryption or may be modulated and or encrypted using any suitable modulation carrier wave and or encryption technique before being transmitted over a communication channel.

While the present invention has been described with reference to specific examples which are intended to be illustrative only and not to be limiting of the invention it will be apparent to those of ordinary skill in the art that changes additions or deletions may be made to the disclosed embodiments without departing from the spirit and scope of the invention.

