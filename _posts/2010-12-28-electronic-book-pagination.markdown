---

title: Electronic book pagination
abstract: An electronic book can be paginated by reference to a print version of the same book. Pages of the print version are scanned to obtain text strings and page labels corresponding to each of the pages. The text strings are then compared to the electronic book to find the best matching positions within the electronic book. The matching positions within the electronic book are then associated with the page numbers of the pages from which the matching text strings were obtained. Autocorrelation can be used to determine matching positions.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08798366&OS=08798366&RS=08798366
owner: Amazon Technologies, Inc.
number: 08798366
owner_city: Reno
owner_country: US
publication_date: 20101228
---
Locations within books have traditionally been indicated by page numbers. However the concept of a page is not as meaningful in the context of electronic books in which page divisions may be calculated dynamically as a function of page and font size. Different book reader devices have different display sizes and even within a particular device a user may change viewing options to result in different effective page sizes.

Because of this electronic books are often submitted for publication without any indications of page numbering. Within electronic books such as these locations are often referenced in terms of an index that relates to a smaller unit of measure such as by a byte character offset or a word offset. For example a particular word might be specified in terms of its starting and ending byte or character indexes relative to the beginning of the electronic book. However this can result in confusion when trying to cite from particular locations within electronic books and when trying to navigate to particular locations within electronic books.

This disclosure describes systems devices and techniques in which electronic books can be efficiently paginated to match the paginations of printed versions of the same books.

Electronic books are often submitted for publication in a digital format that does not include or indicate page numbering. As mentioned above it is possible to specify locations within electronic books but such locations are often specified in terms of byte character or word offsets. There is often no way to correlate these offsets with the page numbering of equivalent printed versions of the electronic books.

In certain embodiments a printed version of an electronic book is imaged or scanned resulting in an image corresponding to each page of the printed version. The individual page images are then processed by optical character recognition OCR techniques manually or otherwise to obtain the text from each page including the page label associated with each page.

The text from each page can then be compared with the text of the electronic book to find the position of the page within the electronic book. Once this location is found the page label associated with the printed version of the page is assigned to the found position within the electronic book. This association may be implemented by a page position map that accompanies or is incorporated with the electronic book and that cross references between page numbers and an electronic position index such as character count. Alternatively the digital formatting of the electronic book can be modified to indicate page numbering at different locations within the electronic book.

When a user is reading an electronic book this information may be referenced to determine the number of the currently displayed page and may also be used to allow navigation by the user within the electronic book by page numbers that correspond to the page numbers used in printed versions of the book.

Each electronic reader has a display upon which electronic content such as electronic books eBooks may be rendered. The terms content content item and eBook include essentially any form of electronic data that may be consumed on a device including textual and verbal works comprising sequences of words such as digital books audio books which may also include video electronic magazines papers journals periodicals documents instructional materials course content and so on.

The electronic readers may be handheld devices or other small light weight portable devices upon which eBooks and other content can be rendered and conveniently viewed in a manner similar to viewing a paper book. Examples of handheld electronic readers include flat form factor devices such as tablets pads smartphones personal digital assistants PDAs etc.

In some embodiments the electronic readers may comprise dedicated purpose eBook reader devices having flat panel displays and other characteristics that mimic the look feel and experience offered by paper based books. For example such eBook reader devices may have high contrast flat panel displays that appear similar to a printed page and that persist without frequent refreshing. Such displays may consume very negligible amounts of power so that the eBook reader devices may be used for long periods without recharging or replacing batteries. In some instances these readers may employ electrophoretic displays.

In the example of the electronic readers have networking capabilities. For example the electronic readers may have wireless communication interfaces that allow communication though a network . The wireless communications interfaces may utilize WiFi cellular or other wireless data and networking technologies.

The network may be any type of communication network including a local area network a wide area network the Internet a wireless network a wide area network WWAN a cable television network a telephone network a cellular communications network combinations of the foregoing etc. Services sometimes referred to as cloud based services may be provided from the network . In the network is represented as a cloud and network based or cloud based services relevant to this discussion are shown as blocks within the cloud.

In the described embodiment the electronic readers include nonvolatile storage capabilities so that electronic content items can be downloaded and stored in their entirety on the electronic readers. Once an eBook has been stored by an electronic reader it can be displayed and read at any time whether or not the electronic reader is connected to a network.

In the configuration illustrated by the electronic readers may obtain content items from an online reader service . The reader service may be accessed using the networking capabilities of the electronic readers . The reader service may be accessible through other means as well such as by connection to intermediary devices like personal computers different types of mobile devices and so forth.

In the reader service is illustrated as a network based or cloud based service available over a public network such as the Internet. The electronic readers may be configured to allow the users to conveniently browse for content and content items from the reader service and to purchase and download selected content items from the reader service .

Various applications and user interfaces may be used in conjunction with the electronic readers to interact with the reader service such as Internet browser programs that allow a user to interactively engage different online services. In addition the reader service may expose lower level interfaces or APIs application programming interfaces through the network through which devices and programs can access the underlying functionality of the reader service without direct user interaction. For example a user may interactively purchase an eBook or other content item using a personal computer or some device other than the electronic reader device . The electronic reader may periodically communicate with the reader service to perform background synchronization or other housekeeping and may automatically without specific user intervention download any content that has been purchased.

The reader service might be implemented in some embodiments by an online merchant or vendor. Electronic books and other electronic content might be submitted in electronic or digital formats by various publishers and subsequently offered for sale by the online merchant or vendor or might be available to members or subscribers for some type of periodic or one time fee. In some circumstances eBooks or other content might be made available without charge.

As noted above the electronic or digital formats used by publishers for content submission may contain no page numbering and in particular may not indicate any correspondence between positions within the electronic content and corresponding pages of equivalent paper based content.

In the described embodiment the reader service includes a content service through which the electronic readers and other clients may interact with the reader service . The content service may include a virtual storefront or other type of online interface for interaction with consumers and or devices. The content service may expose a graphical web based user interface that can be accessed by human users to browse and obtain e.g. purchase rent lease etc. content items such as eBooks. The content service may also expose programmatic interfaces or APIs that entities and devices can use to obtain digital content items and related services.

The content service may be used to provide eBooks and related data to users via their electronic readers . shows an eBook being delivered to each electronic reader . Associated with each eBook is a page position map which cross references between page numbers and positions within the electronic books. As mentioned above the electronic formats of eBooks may specify positions using various indices such as character count byte count word count and so on. The page position map allows translation between page numbers and these other types of indices.

In example above a page position map has a first column containing the page labels extracted from a printed version of a book and a second column indicating the corresponding character indexes within the electronic version of the book. Different formats may of course be utilized to convey similar information. For example one format may group sequential ranges of page labels indicating the starting label of each range and the starting index of each sequential page within the range. When using this format it is assumed that each indexed location within a range corresponds to a subsequently ordered page label and only the first label of the range is explicitly specified. Different types of labels such as roman numerals and Arabic numerals can be specified by different ranges.

This information or similar information can be incorporated within the file format of the electronic books themselves rather than conveyed by means of an associated data object as shown here. Also note that pages having no labeling may also be represented in these data formats or objects.

In the described embodiment the reader service implements a scanning service and a pagination service in order to provide the page position maps . The functions and general operations of these services will be described with reference to subsequent figures.

This example assumes the existence of a printed version of a book designated by reference numeral and a corresponding electronic version of the same book designated by reference numeral . The printed book and the electronic book contain generally the same content and are therefore considered versions of the same book. However there may be significant differences between the two versions. One version for example may contain small revisions such as typographical corrections. More significantly one version may contain different front or rear matter than the other. In some cases one version may include significant revisions such as insertion or deletion of entire sentences paragraphs chapters introductions forwards afterwards appendices indexes tables of contents etc.

The printed book is processed by the scanning service as shown on the left side of . At the printed book is scanned. This can be performed using existing machine based or manual processes and involves capturing images of the individual physical pages of the printed book .

At the scanning service recognizes the text of the individual pages of scanned images. This may be performed using machine based OCR techniques or other techniques including the use of human analysts. This results in a text string corresponding to each page of the printed book . The text string may contain both body text and margin text. Page labels may be present in the margin text. Note that the text string may contain all the text of the corresponding page or may include only portions of the text. Furthermore the text string may exhibit varying degrees of accuracy with respect to the original text of the printed book.

At the scanning service identifies page numbers or labels associated with each scanned page of the printed book . This may be performed based on or in conjunction with OCR procedures and may in some cases be aided by human analysts.

At the scanning service normalizes the page text strings by removing extraneous characters such as non text data white space data formatting data etc. Normalizing may also include converting all characters to a single case such as lower case.

The result of the actions above can be output as one or more data objects containing normalized and labeled pages. Data object can comprise a data structure indicating page text strings corresponding to individual pages along with the page labels associated with those pages.

In some embodiments the data object may contain the normalized text of the printed book along with page break indications. The pages can be considered to have ordinal page numbers corresponding to their page count as measured from the beginning of the printed book . In most cases ordinal page numbers will not correspond to page labels. This is because many printed books include some pages that are not numbered or that are numbered using an alternate index prior to the main body of the book. For example many printed books include front matter such as title pages and tables of contents that are not included in the main page numbering of the books. Some books may also include introductions or forwards that are numbered using an alternate format such as roman numerals prior to the main body of the book.

The data object may be configured to include a page to label mapping indicating correspondences between ordinal page numbers and actual page labels. A page to label mapping may be logically viewed as a table having first and second columns where one column indicates ordinal page numbers and the other column indicates corresponding page labels. In actual implementation various schemes may be used to represent this information including the specification of ranges of ordinal pages. For example a range of ordinal pages may be listed as having page labels that begin at Roman numeral and that continue in sequence to the end of the range. Another range may be listed as beginning at Arabic page number 1 and continuing in sequence from there.

Some ordinal pages of a printed book may not have corresponding page labels. For example pages containing illustrations sometimes are not included in the page numbering of a printed book. Pages such as these may be omitted from the page to label mapping or they may be included along with an indication that they do not correspond to a page label. In some cases the page to label mapping may indicate the nature of the ordinal page. For example the page to label mapping may indicate that a particular ordinal page contains an illustration rather than a normally numbered text page.

The electronic book is processed by the pagination service as shown on the right side of . At the electronic book is normalized by removing extraneous characters. This might include the removal of white space characters punctuation formatting data metadata and other non displayable data. Remaining characters may also be converted to a single case such as lower case. This allows the electronic book to be represented as a text string referred to in the following discussion as book text or as a book text string. The normalization in most cases will be generally the same as the normalization performed on the pages of the printed book .

Block represents an action or procedure that is performed for individual pages of the printed book . Specifically for each labeled page of the printed book the pagination service performs an action of finding the corresponding position in the electronic book . In the described embodiment this comprises comparing the text of the labeled page to at least a portion of the electronic book or book text to determine the position of the page within the electronic book. Various methods can be used to determine this position including string comparisons. One method using autocorrelation techniques will be described below with reference to .

More specifically the procedure starts with a normalized and labeled page or page string which may be one of the pages of the normalized and labeled pages shown in and a normalized electronic book or book string which may be the book text shown in .

At the procedure autocorrelates the page string with at least a portion of the book string to determine one or more possible matching positions within the book string . Both the page string and the book string are treated as signals having single bit amplitudes as sequences of bits. More specifically characters or bytes of each string are concatenated and then converted to bit strings. The bit signal corresponding to the page string is assumed for purposes of analysis to be a small portion or substring of the bit signal corresponding to the book string and autocorrelation scores are calculated to find best match positions within the book string .

In the described embodiment the page string is compared to a sliding sequence of character windows or substrings within the book string . The character windows or substrings are the same size as the page string and slide incrementally by one character within the book string to produce autocorrelation scores for different possible character positions within the book string .

At each window or substring within the book string an autocorrelation score is calculated as a bitwise function or calculation between corresponding bits of the page string and the current sliding window or substring within the book string . More specifically the autocorrelation score at a particular position p within the book string may be calculated by summing the product of individual bit positions of the page string and the current substring within of the book string as follows 

The operation above produces autocorrelation scores for different positions within the book string . At these scores are analyzed to identify a limited number of potential candidate or matching positions positions within the book string that are most likely to correspond to the current page string . This may be done by selecting the positions having the highest autocorrelation scores or by selecting those positions whose scores indicate peak matches within the book string . Candidate positions for a match positions are indicated in by reference numeral .

In some cases the autocorrelation may be performed over all possible positions of the book string . However in many cases it is possible to generally approximate the position of a given page within the book string in light of matches that have already been performed. For example once the position of a page is found with high confidence subsequent pages can be assumed to have subsequent positions within the book string and the autocorrelation may safely ignore any preceding substrings.

As autocorrelation is being performed at sequential character positions the pagination system may keep track of the highest few preceding scores and may not need to keep track of all calculated scores. Furthermore a very high autocorrelation score may be treated as an exact match. This may remove any need for performing further autocorrelation analyses with respect to the current page string .

At further comparison is performed between the page string and the substrings at the candidate positions . In some embodiments this comparison may comprise calculating edit distances from the page string to the substrings at the candidate positions . The edit distance between two strings of characters is the number of operations needed to change one of the strings into the other. This may be calculated using different algorithms. In the described embodiment the edit distances can be calculated as Levenshtein distances.

At the best match is selected from the candidate positions of action by selecting the one with the shortest edit distance.

Returning to the pagination service uses the results of action to create a page position map which is equivalent to the page position map described above with reference to . As described there the page position map indicates page numbers or labels derived from the printed book and their corresponding positions within the electronic book . Positions within the electronic book can be indicated using various indices depending on the data format of the electronic book. Some eBook formats may indicate position in terms of a byte or character index such as the number of bytes or characters from the beginning of the eBook. Other eBook formats may indicate position in terms of a word index such as the number of words from the beginning of the eBook. Other measurement quantities might also be used such as a sentence index a line index or a paragraph index. In audio books location or position may be indicated by a time index the length of elapsed time from the beginning of the audio book.

At the pagination service associates the page position map with the electronic book . Subsequent distributions of the electronic book may include the page position map .

At in response to the user specification of or navigation to a position within the electronic book the electronic reader references the page position map to find the page number associated with portion of the electronic book that is currently being shown. At the electronic reader displays the found page number on its display such as in a header or footer location of the displayed page. This allows the user to see the current page number correlated with the print version of the electronic book at any time when navigating within the electronic book.

In a very basic configuration the electronic reader includes a processing unit composed of one or more processors and memory . Depending on the configuration of the eBook reader the memory may be a type of computer storage media and may include volatile and nonvolatile memory. Thus the memory may include but is not limited to RAM ROM EEPROM flash memory or other memory technology or any other medium which can be used to store media items or applications and data which can be accessed by the electronic reader .

The memory may be used to store any number of functional components that are executable on the processing unit . In many embodiments these functional components comprise instructions or programs that are executable by the processing unit and that implement operational logic for performing the actions attributed above to the electronic reader . In addition the memory may store various types of data that are referenced by executable programs.

The memory may store an operating system and a content store to store one or more content items and their associated page position maps. A user interface module may also be provided in the memory and executed on the processing unit to provide for user operation of the electronic reader . The UI module may provide menus and other navigational tools to facilitate selection and rendering of content items. The UI module may further include a browser or other application that facilitates access to sites over a network such as websites or online merchants or other sources of electronic content items or other products.

A communication and synchronization module is stored in the memory and executed on the processing unit to perform management functions in conjunction with one or more content sources such as the content service discussed above. In some embodiments the communication and synchronization module communicates with the content service to receive eBooks page position maps and other data.

The electronic reader may also include a page navigation module allowing a user to enter navigate within an electronic book with reference to page numbers or labels rather than byte or character positions in accordance with the techniques described above.

The electronic reader may further include a display upon which electronic books are rendered. In one implementation the display uses electronic paper display technology. In general an electronic paper display is one that has a high resolution 150 dpi or better and is bi stable meaning that it is capable of holding text or other rendered images even when very little or no power is supplied to the display. The electronic paper display technology may also exhibit high contrast substantially equal to that of print on paper. Some exemplary electronic paper displays that may be used with the implementations described herein include bi stable LCDs MEMS cholesteric pigmented electrophoretic and others. One exemplary electronic paper display that may be used is an E Ink brand display. Touch sensitive technology may be overlaid or integrated with the electronic paper display technology to enable user input via contact or proximity to the screen.

The electronic reader may further be equipped with various input output I O components . Such components may include various user interface controls e.g. buttons joystick keyboard etc. audio speaker connection ports and so forth.

A network interface may support both wired and wireless connection to various networks such as cellular networks radio WiFi networks short range networks e.g. Bluetooth IR and so forth. The network interface facilitates receiving electronic books and other content as described herein.

The electronic reader may also include a battery and power control unit . The power control unit operatively controls an amount of power or electrical energy consumed by the electronic reader. Actively controlling the amount of power consumed by the electronic reader may achieve more efficient use of electrical energy stored by the battery.

The electronic reader may have additional features or functionality. For example the electronic reader may also include additional data storage devices removable and or non removable such as for example magnetic disks optical disks or tape. The additional data storage media may include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data.

In a very basic configuration an example server may comprise a processing unit composed of one or more processors and memory . Depending on the configuration of the server the memory may be a type of computer storage media and may include volatile and nonvolatile memory. Thus the memory may include but is not limited to RAM ROM EEPROM flash memory or other memory technology.

The memory may be used to store any number of functional components that are executable by the processing unit . In many embodiments these functional components comprise instructions or programs that are executable by the processing unit and that when executed implement operational logic for performing the actions attributed above to the content service . In addition the memory may store various types of data that are referenced by executable programs including content items that are supplied to consuming devices such as electronic reader .

Functional components stored in the memory may include an operating system and a database to store content items annotations page position maps etc. Functional components of the server may also comprise a web service component that interacts with remote devices such as computers and media consumption devices.

The server may of course include many other logical programmatic and physical components generally referenced by numeral possibly including modules for implanting the functionality described above and attributed to the content service the scanning service and or the pagination service .

Note that the various techniques described above are assumed in the given examples to be implemented in the general context of computer executable instructions or software such as program modules executed by one or more computers or other devices. Generally program modules include routines programs objects components data structures etc. for performing particular tasks or implement particular abstract data types.

Other architectures may be used to implement the described functionality and are intended to be within the scope of this disclosure. Furthermore although specific distributions of responsibilities are defined above for purposes of discussion the various functions and responsibilities might be distributed and divided in different ways depending on particular circumstances.

Similarly software may be stored and distributed in various ways and using different means and the particular software storage and execution configurations described above may be varied in many different ways. Thus software implementing the techniques described above may be distributed on various types of computer readable media not limited to the forms of memory that are specifically described.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described. Rather the specific features and acts are disclosed as illustrative forms of implementing the claims. For example the methodological acts need not be performed in the order or combinations described herein and may be performed in any combination of one or more acts.

