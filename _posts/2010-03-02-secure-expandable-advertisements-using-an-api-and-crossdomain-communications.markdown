---

title: Secure expandable advertisements using an API and cross-domain communications
abstract: A system to present secure expandable advertisements using an API and cross-domain communication. A content publishing system that hosts a website can implement an expandable advertisement using IFRAMEs that are expanded upon receiving an API call from a third party rich media vendor that hosts the expandable advertisement when the content publishing system and the third party media vendor are of differing domains.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08452710&OS=08452710&RS=08452710
owner: eBay Inc.
number: 08452710
owner_city: San Jose
owner_country: US
publication_date: 20100302
---
This application claims the benefit of priority to U.S. Provisional Application No. 61 291 792 filed Dec. 31 2009 entitled Secure Expandable Advertisements Using an API and Cross Domain Communications which is incorporated herein by reference in its entirety.

A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent files or records but otherwise reserves all copyright rights whatsoever. The following notice applies to the software and data as described below and in the drawings that form a part of this document Copyright 2010 eBay Inc. All Rights Reserved.

Various embodiments relate generally to the field of online advertising and in particular but not by way of limitation to methods and systems enabling the display of secure expandable advertising using an application programming interface API and cross domain communications.

Online advertisements generate the revenue supporting many content publishers. Rich media advertising advertising beyond static text advertisements represents a key and growing segment in the online advertising market. Industry analysts estimate that spending on rich media advertising in the United States will increase 400 to 5.1 billion USD in 2013 while spending on traditional non rich static text ads will decrease by 22 in the same period. Similarly analysts estimate that by 2012 more than half of European advertisement spending will purchase rich media advertisements while traditional non rich static text ads will decrease to just 15 of advertising spending.

The expandable advertisement an advertisement that possesses the ability to expand and collapse its viewable area as triggered by predefined events has emerged as a popular form of rich media advertising. Current implementations of expandable advertisements expose the content publishers computer systems to security risks and may not be scalable. Implementation techniques commonly include utilizing frame buster javascript files to allow cross domain communication between a parent page and an IFRAME page of different domains.

Example methods and systems for supporting secure expandable advertisements using an API and cross domain communications are described. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of some example embodiments. It will be evident however to one skilled in the art that the present invention may be practiced without these specific details. As used herein the term or may be construed in an inclusive and exclusive sense.

Rich media advertising includes advertising beyond static text advertisements such as but not limited to banners videos images animation advertisements displaying dynamic motion or changes in appearance over time and other interactive media. A popularly instantiated type of rich media advertisement is the expandable advertisement. An expandable advertisement may be any advertisement that possesses the ability to expand and collapse its viewable area as caused by predefined trigger events. In an example embodiment of an expandable advertisement a banner advertisement can expand from its original size to encompass any amount of the viewable area or collapse back to the original dimensions of a standard banner advertisement.

Implementing expandable advertisements introduces technical challenges to content publishers which often present both the content that attract the attention of advertising audiences and the expandable advertisement. One challenge is the technical implementation of how to securely present the expandable advertisement in a manner that permits expansion and collapse of the viewable area. Another challenge is how to securely implement the logic that enables the expansion or collapse of the expandable advertisement. Security issues may arise because of where the logic controlling the expandable advertisement is located. If the expandable advertisement logic is located with a third party then the webpage host referencing the expandable advertisement has no control over the advertisement and its logic which may put a webpage viewer at risk. If the expandable advertisement logic is stored with the webpage host then the webpage host must inspect each piece of logic and may expose its own systems to risk. In one example embodiment the first challenge is addressed by locating the expandable advertisement in an IFRAME element of the parent page. An IFRAME or inline frame enables embedding of another HTML document within the framework of an existing HTML document structure. This implementation may provide a layer of security as modern browsers restrict an HTML document within an IFRAME from accessing data presented on the parent page or from communicating with the parent page when the IFRAME HTML document and parent page are of different domains. In an example embodiment the IFRAME embeds an HTML document hosted on the content provider domain that references advertising content hosted on a third party rich media vendor domain. In another embodiment the IFRAME embeds an HTML document hosted on a third party rich media vendor domain which also hosts referenced content.

Because cross domain communication between a parent HTML document and the embedded document of an IFRAME of the parent HTML document cannot occur directly prior art solutions addressing the second problem utilize a variety of methods including referencing a frame buster file that serves as an intermediary. The frame buster file which may be javascript an executable or a set of instructions recognizes triggering events which may be events that occur on the content publisher s page or sensed by an expandable advertisement and triggers expansion of the expandable advertisement. In a prior art solution the content publisher hosts the frame buster file which may be created by the third party rich media vendor. However hosting the frame buster file and potentially other third party files could introduce the content publisher to security risks. Maintaining proper system security may demand inspection of each submitted third party file and may result in a non scalable solution. In another prior art solution the third party vendor hosts the frame buster file and potentially all the rich media content files. This prior art solution provides the third party vendor control over when to expand or collapse the rich media advertisement. This solution potentially mitigates the scalability issues mentioned above but may expose the content publisher website to an unchecked frame buster file that could expose visitors to the content publisher s site to malware unknown inspection of their cookies or other intrusive actions. This solution may also expose sensitive information of the parent page and complicate usage tracking for the content publisher.

In one embodiment advertisements can be expanded securely by presenting a webpage with an IFRAME that contains an HTML document that references a content piece such as an advertisement hosted on a third party domain and expanding the displayable area of the content piece upon receiving an API call from the third party. Because the advertisement is expanded upon an API call no third party logic to expand the advertisement needs to be hosted with the content publisher website. In addition the content publisher website and visitors to the content publisher s website are not exposed to logic hosted by the third party vendor. Therefore by expanding the advertisement IFRAME by an API call mitigates potential security risks.

A client machine may be but is not limited to a personal computer cell phone mobile device or machine capable of launching a web client . A web client may be but is not limited to Microsoft Internet Explorer Safari or a graphical web browser. The client machine runs a web client which may access the publisher content and the third party expandable advertisement through a network such as a communications network as embodied by the internet and then present the accessed content through the web client .

The content publisher system distributes content through a web server . The web server accesses an application server such as but not limited to an Apache application server . The application server hosts various applications that control and prepare the presentation of data including but not limited to a content generation application and an expandable advertisement application .

The content generation application assists in the presentation of publisher content. The content generation application accesses a database server that queries a database to extract content and provide it to the web server . Content gathered from the web server and the third party advertisement application are communicated to the client machine s web client to render a web page containing the expandable advertisement and publisher content. In an example embodiment the content generation application communicates and presents data accessed from the database server and the database to the web server in the form of an HTML document. The HTML document may contain an IFRAME which itself contains an HTML document referencing data accessed through the third party advertisement application . In an example embodiment the publisher content system and the third party rich media vendor reside on different domains.

The expandable rich media advertisement presented by the web client is expanded or collapsed by calls to an expandable advertisement API of the content publisher system . Calls to the expandable advertisement API are made by the third party advertisement application and transmitted through the network which causes the application server to invoke functionality of an expandable advertisement application . The expandable advertisement application expands or collapses the expandable rich media advertisement presented on the web client . This may be accomplished by the expandable advertisement application communicating with the web client to expand an IFRAME. In an example embodiment the call to the expandable advertisement API includes parameter arguments such as dimensions and identification information which are passed to the expandable advertisement application as input. In an example embodiment the call to the expandable advertisement API results in the expansion or collapse of the expandable advertisement displayed at the web client which can be achieved by for example acting as an intermediary between the parent page and the expandable advertisement domains to communicate with the parent page domain to resize the IFRAME containing the expandable advertisement re rendering of the main page using third party software such as Adobe Flash or by exposing previously hidden elements.

A content publisher hosting the expandable advertisement API may distribute API specifications to enable third parties such as an advertising network advertising agency or rich media vendor to properly make calls to the expandable advertisement API . In an example embodiment the content publisher system may capture share and decide upon ancillary data relating to the third party advertisement campaign and the expandable advertisement such as the type of content provided the dimensions and direction in which to expand the expandable rich media advertisement and other configuration preferences such as whether expansion is enabled and whether it should be expanded upon loading. Such ancillary information may be stored in the database and utilized by the expandable advertisement application to verify a call to the API server or to control the expansion or collapse of an advertisement. For example a call may be made to the expandable advertisement API with arguments detailing the direction and dimension in which to expand an advertisement. The arguments may be compared against ancillary data defining the permissible directions and dimensions in which the advertisement may be expanded. If the arguments are compatible with the ancillary data the advertisement may then be expanded according to the provided directions and dimensions.

In one embodiment the specifications related to the operation and presentation of the expandable advertisement may adhere to Interactive Advertising Bureau IAB guidelines as exemplified in Table 1. Parameters and ancillary information may describe expandable advertisement controls the triggering event the trigged action visual effects such as color and font and other parameters as permitted by JAB guidelines.

A content publisher system serving rich media expandable advertisement may utilize targeting tracking and reporting services. In an example embodiment tracking may include recording advertisement data on the level of a campaign placement or message. Tracking metrics may include recording the number of advertisements served the number of advertisements expanded the number of advertisements collapsed each incident of violation with the URL or other data accessible to the expandable advertisement API .

In an example embodiment a security token is a unique identifier identifying an expandable advertisement presented by the third party rich media vendor . The security token may be a static constant over time identifying an advertising campaign a type of advertisement a rich media vendor or an event or party or the token may be dynamically generated and identify a particular instantiation of an advertisement. In an example embodiment a security token may be a string GUID or file.

At operation the web client analyzes the received webpage data and if required creates the IFRAMEs defined in the webpage data. At operation the HTML document embedded in each of the IFRAMEs is requested from a third party rich media vendor . In an example embodiment the webpage data may define multiple expandable advertisements each hosted by a different third party rich media vendor and each requiring a separate IFRAME. The data request to the third party rich media vendor for each IFRAME may also include the identifying security token as generated in operation . The third party rich media vendor responds at operation by sending advertisement HTML and data to the web client and associates any received security token with a particular instance of the expandable advertisement.

At operation an event or action originating from the web client triggers the expansion or collapse of an expandable advertisement. The third party rich media vendor receives notification of the triggering event and makes a call to an expandable advertisement API to expand or collapse the expandable advertisement at operation . In an example embodiment the security token associated with the expandable rich media advertisement to be expanded or collapsed during the initial generation and fetching of the advertisement IFRAME at operations and is sent with the call to the expandable advertisement API . This security token identifies that the party calling the expandable advertisement API to collapse or expand the advertisement is a party associated with the advertisement to be expanded. This security measure prevents parties unassociated with the expandable advertisement from influencing the presentation of the expandable advertisement. In an example embodiment the third party rich media vendor may also transmit ancillary data with the call to the expandable advertisement API . Ancillary data may include metadata information relating to the third party advertisement campaign and the expandable advertisement such as the type of content provided the dimensions and direction in which to expand the expandable advertisement and other configuration preferences such as whether expansion is enabled and whether it should be expanded upon loading. The ancillary information transmitted with the call to the expandable advertisement API may then influence the expansion or collapse of the expandable advertisement such as the dimension or direction and it may further be verified against ancillary data stored in the database server as an additional security check.

At operation the expandable advertisement API verifies the validity of the expansion request with the web server . In an example embodiment the security token and ancillary data sent by a third party rich media vendor along with the request for expansion collapse is compared with the data stored in the database . If the value of the security token sent with the call to the expandable advertisement API matches the token provided to the third party rich media vendor at operation then the request to expand collapse is verified. In addition if ancillary data such as the shape and dimension of collapse expansion match or are compatible with the parameters stored in the database the request to expand collapse is verified.

After verification of the request to expand collapse at operation the web server transmits data and instructions to expand collapse the expandable advertisement presented in the web client at operation . In an example embodiment this may be accomplished by but is not limited to acting as an intermediary between the parent page and the expandable advertisement domains to communicate with the parent page domain to resize the IFRAME containing the expandable advertisement re rendering of the main page using third party software such as Adobe Flash or by exposing previously hidden elements.

At operation the web server will store to the database tracking information relating to the expandable advertisement. In an example embodiment tracking may include recording advertisement data on the level of a campaign placement or message. Tracking metrics may include recording the number of advertisements served the number of advertisements expanded the number of advertisements collapsed each incident of violation with the URL or other data accessible to the expandable advertisement AP.

In an example embodiment the expandable advertisement API is a partial implementation of the OpenAjax Hub API. The Open Ajax API can be used to tell a parent page to either expand or collapse an IFRAME. In an example embodiment the parent page determines if a request to expand or collapse the IFRAME follows the specifications defined below. In an example embodiment a call to the expandable advertisement API requires 

The publish method can be called by a third party rich media vendor to both expand and collapse an IFRAME. The third party rich media vendor determines when to tell the parent page to expand or collapse the IFRAME. In an example embodiment the specified width height and direction passed to the expandable advertisement API must match a resolution and expansion direction supported by the content publisher system which may be stored as pre determined values in the database .

In an example embodiment the expandable advertisement can automatically detect the best direction for expansion based on the higher level page s size IFRAME location and where a user has scrolled.

Certain embodiments are described herein as including logic or a number of components modules or mechanisms. Modules may constitute either software modules e.g. code embodied on a machine readable medium or in a transmission signal or hardware modules. A hardware module is a tangible unit capable of performing certain operations and may be configured or arranged in a certain manner. In example embodiments one or more computer systems e.g. a standalone client or server computer system or one or more hardware modules of a computer system e.g. a processor or a group of processors may be configured by software e.g. an application or application portion as a hardware module that operates to perform certain operations as described herein.

In various embodiments a hardware module may be implemented mechanically or electronically. For example a hardware module may comprise dedicated circuitry or logic that is permanently configured e.g. as a special purpose processor such as a field programmable gate array FPGA or an application specific integrated circuit ASIC to perform certain operations. A hardware module may also comprise programmable logic or circuitry e.g. as encompassed within a general purpose processor or other programmable processor that is temporarily configured by software to perform certain operations. It will be appreciated that the decision to implement a hardware module mechanically in dedicated and permanently configured circuitry or in temporarily configured circuitry e.g. configured by software may be driven by cost and time considerations.

Accordingly the term hardware module should be understood to encompass a tangible entity be that an entity that is physically constructed permanently configured e.g. hardwired or temporarily configured e.g. programmed to operate in a certain manner and or to perform certain operations described herein. Considering embodiments in which hardware modules are temporarily configured e.g. programmed each of the hardware modules need not be configured or instantiated at any one instance in time. For example where the hardware modules comprise a general purpose processor configured using software the general purpose processor may be configured as respective different hardware modules at different times. Software may accordingly configure a processor for example to constitute a particular hardware module at one instance of time and to constitute a different hardware module at a different instance of time.

Hardware modules can provide information to and receive information from other hardware modules. Accordingly the described hardware modules may be regarded as being communicatively coupled. Where multiple of such hardware modules exist contemporaneously communications may be achieved through signal transmission e.g. over appropriate circuits and buses that connect the hardware modules. In embodiments in which multiple hardware modules are configured or instantiated at different times communications between such hardware modules may be achieved for example through the storage and retrieval of information in memory structures to which the multiple hardware modules have access. For example one hardware module may perform an operation and store the output of that operation in a memory device to which it is communicatively coupled. A further hardware module may then at a later time access the memory device to retrieve and process the stored output. Hardware modules may also initiate communications with input or output devices and can operate on a resource e.g. a collection of information .

The various operations of example methods described herein may be performed at least partially by one or more processors that are temporarily configured e.g. by software or permanently configured to perform the relevant operations. Whether temporarily or permanently configured such processors may constitute processor implemented modules that operate to perform one or more operations or functions. The modules referred to herein may in some example embodiments comprise processor implemented modules.

Similarly the methods described herein may be at least partially processor implemented. For example at least some of the operations of a method may be performed by one or processors or processor implemented modules. The performance of certain of the operations may be distributed among the one or more processors not only residing within a single machine but deployed across a number of machines. In some example embodiments the processor or processors may be located in a single location e.g. within a home environment an office environment or as a server farm while in other embodiments the processors may be distributed across a number of locations.

The one or more processors may also operate to support performance of the relevant operations in a cloud computing environment or as a software as a service SaaS . For example at least some of the operations may be performed by a group of computers as examples of machines including processors these operations being accessible via a network e.g. the Internet and via one or more appropriate interfaces e.g. Application Program Interfaces APIs . 

Example embodiments may be implemented in digital electronic circuitry or in computer hardware firmware software or in combinations of them. Example embodiments may be implemented using a computer program product e.g. a computer program tangibly embodied in an information carrier e.g. in a machine readable medium for execution by or to control the operation of data processing apparatus e.g. a programmable processor a computer or multiple computers.

A computer program can be written in any form of programming language including compiled or interpreted languages and it can be deployed in any form including as a stand alone program or as a module subroutine or other unit suitable for use in a computing environment. A computer program can be deployed to be executed on one computer or on multiple computers at one site or distributed across multiple sites and interconnected by a communication network.

In example embodiments operations may be performed by one or more programmable processors executing a computer program to perform functions by operating on input data and generating output. Method operations can also be performed by and apparatus of example embodiments may be implemented as special purpose logic circuitry e.g. a field programmable gate array FPGA or an application specific integrated circuit ASIC .

The computing system can include clients and servers. A client and server are generally remote from each other and typically interact through a communication network. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client server relationship to each other. In embodiments deploying a programmable computing system it will be appreciated that that both hardware and software architectures require consideration. Specifically it will be appreciated that the choice of whether to implement certain functionality in permanently configured hardware e.g. an ASIC in temporarily configured hardware e.g. a combination of software and a programmable processor or a combination of permanently and temporarily configured hardware may be a design choice. Below are set out hardware e.g. machine and software architectures that may be deployed in various example embodiments.

The example computer system includes a processor e.g. a central processing unit CPU a graphics processing unit GPU or both a main memory and a static memory which communicate with each other via a bus . The computer system may further include a video display unit e.g. a liquid crystal display LCD or a cathode ray tube CRT . The computer system also includes an alphanumeric input device e.g. a keyboard a user interface UI navigation device e.g. a mouse a disk drive unit a signal generation device e.g. a speaker and a network interface device .

The disk drive unit includes a machine readable medium on which is stored one or more sets of instructions and data structures e.g. software embodying or utilized by any one or more of the methodologies or functions described herein. The instructions may also reside completely or at least partially within the main memory and or within the processor during execution thereof by the computer system the main memory and the processor also constituting machine readable media.

While the machine readable medium is shown in an example embodiment to be a single medium the term machine readable medium may include a single medium or multiple media e.g. a centralized or distributed database and or associated caches and servers that store the one or more instructions or data structures. The term machine readable medium shall also be taken to include any tangible medium that is capable of storing encoding or carrying instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present invention or that is capable of storing encoding or carrying data structures utilized by or associated with such instructions. The term machine readable medium shall accordingly be taken to include but not be limited to solid state memories and optical and magnetic media. Specific examples of machine readable media include non volatile memory including by way of example semiconductor memory devices e.g. Erasable Programmable Read Only Memory EPROM Electrically Erasable Programmable Read Only Memory EEPROM and flash memory devices magnetic disks such as internal hard disks and removable disks magneto optical disks and CD ROM and DVD ROM disks.

The instructions may further be transmitted or received over a communications network using a transmission medium. The instructions may be transmitted using the network interface device and any one of a number of well known transfer protocols e.g. HTTP . Examples of communication networks include a local area network LAN a wide area network WAN the Internet mobile telephone networks Plain Old Telephone POTS networks and wireless data networks e.g. WiFi and WiMax networks . The term transmission medium shall be taken to include any intangible medium that is capable of storing encoding or carrying instructions for execution by the machine and includes digital or analog communications signals or other intangible media to facilitate communication of such software.

Although an embodiment has been described with reference to specific example embodiments it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the invention. Accordingly the specification and drawings are to be regarded in an illustrative rather than a restrictive sense. The accompanying drawings that form a part hereof show by way of illustration and not of limitation specific embodiments in which the subject matter may be practiced. The embodiments illustrated are described in sufficient detail to enable those skilled in the art to practice the teachings disclosed herein. Other embodiments may be utilized and derived therefrom such that structural and logical substitutions and changes may be made without departing from the scope of this disclosure. This Detailed Description therefore is not to be taken in a limiting sense and the scope of various embodiments is defined only by the appended claims along with the full range of equivalents to which such claims are entitled.

Such embodiments of the inventive subject matter may be referred to herein individually and or collectively by the term invention merely for convenience and without intending to voluntarily limit the scope of this application to any single invention or inventive concept if more than one is in fact disclosed. Thus although specific embodiments have been illustrated and described herein it should be appreciated that any arrangement calculated to achieve the same purpose may be substituted for the specific embodiments shown. This disclosure is intended to cover any and all adaptations or variations of various embodiments. Combinations of the above embodiments and other embodiments not specifically described herein will be apparent to those of skill in the art upon reviewing the above description.

