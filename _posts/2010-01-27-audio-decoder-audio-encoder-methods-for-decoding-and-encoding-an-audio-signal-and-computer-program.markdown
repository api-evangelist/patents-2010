---

title: Audio decoder, audio encoder, methods for decoding and encoding an audio signal and computer program
abstract: An audio decoder for providing a decoded representation of an audio content on the basis of an encoded representation of the audio content comprises a linear-prediction-domain decoder core configured to provide a time-domain representation of an audio frame on the basis of a set of linear-prediction domain parameters associated with the audio frame and a frequency-domain decoder core configured to provide a time-domain representation of an audio frame on the basis of a set of frequency-domain parameters, taking into account a transform window out of a set comprising a plurality of different transform windows. The audio decoder comprises a signal combiner configured to overlap-and-add-time-domain representations of subsequent audio frames encoded in different domains, in order to smoothen a transition between the time-domain representations of the subsequent frames. The set of transform windows comprises one or more windows specifically adapted for a transition between a frequency-domain core mode and a linear-prediction-domain core mode.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08457975&OS=08457975&RS=08457975
owner: Fraunhofer-Gesellschaft zur Foerderung der Angewandten Forschung E.V.
number: 08457975
owner_city: Munich
owner_country: DE
publication_date: 20100127
---
This patent application claims the benefit of U.S. provisional patent application Ser. No. 61 147 895 filed Jan. 28 2009 the entirety of which is incorporated herein by this reference thereto.

Embodiments according to the invention are related to an audio decoder for providing a decoded audio information on the basis of an encoded audio information and to an audio encoder for providing an encoded audio information on the basis of an input audio information. Further embodiments are related to a method for providing a decoded representation of an audio content on the basis of an encoded representation of the audio content and to a method for providing an encoded representation of an audio content on the basis of an input representation of the audio content. Yet further embodiments according to the invention are related to computer programs for performing the inventive methods.

Embodiments according to the invention are related to improvements of a transition from a frequency domain mode to a linear prediction domain mode.

In the following some background information of the invention will be explained in order to facilitate the understanding of the invention and the advantages thereof. During the past decade big efforts have been put on creating the possibility to digitally store and distribute audio contents. One important achievement on this way is the definition of the International Standard ISO IEC 14496 3. Part 3 of this Standard is related to an encoding and decoding of audio contents and subpart 4 of part 3 is related to general audio coding. ISO IEC 14496 part 3 subpart 4 defines a concept for encoding and decoding of general audio contents. In addition further improvements have been proposed in order to improve the quality and or reduce the required bitrate.

According to the concept described in said standard a time domain audio signal is converted into a time frequency representation. The transform from the time domain to the time frequency domain is typically performed using transform blocks which are also designated as audio frames or briefly frames .

It has been found that it is advantageous to use overlapping frames which are shifted for example by half a frame because the overlap allows to efficiently avoid artifacts. In addition it has been found that a windowing should be performed in order to avoid the artifacts originating from the processing of temporally limited frames. Also the windowing allows for an optimization of an overlap and add process of subsequent temporally shifted but overlapping frames.

In addition techniques for an efficient encoding of speech signals have been proposed. For example concepts for a speech coding have been defined in the International Standards 3GPP TS 26.090 3GPP TS 26.190 and 3GPP TS 26.290. In addition many additional concepts for an encoding of speech signals have been discussed in the literature.

However it has been found that it is difficult to combine the concepts for general audio coding as defined for example in the International Standard ISO IEC 14496 3 part 3 subpart 4 with the concepts for speech coding as defined for example in the above mentioned 3GPP Standards .

In view of this situation there is a desire to create concepts which allow for a sufficiently smooth yet bitrate efficient transition between audio frames encoded in the frequency domain and audio frames encoded in the linear prediction domain.

This problem is solved by an audio decoder according to claim claim or claim an audio encoder according to claim claim or claim a method for providing a decoded representation of an audio content on the basis of an encoded representation of the audio content according to claim claim or claim a method for providing an encoded representation of an audio content on the basis of an input audio representation of the audio content according to claim claim or claim and by a computer program according to claim .

An embodiment according to a first aspect of the invention creates an audio decoder for providing a decoded representation of an audio content on the basis of an encoded representation of the audio content. The audio decoder comprises a linear prediction domain decoder core configured to provide a time domain representation of an audio frame on the basis of a set of linear prediction domain parameters. The audio decoder also comprises a frequency domain decoder core configured to provide a time domain representation of an audio frame on the basis of a set of frequency domain parameters taking into account a transform window out of a set comprising a plurality of different transform windows. The audio decoder also comprises a signal combiner configured to overlap time domain representations of subsequent audio frames encoded in different domains in order to smoothen a transition between the time domain representations of the subsequent audio frames. The set of transform windows available for application by the frequency domain decoder core comprises an insertion window adapted for a generation of a time domain representation of a frequency domain encoded audio frame temporally embedded between a preceding audio frame encoded in the linear prediction domain and a subsequent audio frame encoded in the linear prediction domain. A left sided transition slope of the insertion window is adapted to provide for a smooth transition between a time domain representation of the preceding audio frame encoded in the linear prediction domain and the time domain representation of the current frame encoded in the frequency domain. A right sided transition slope of the insertion window is adapted to provide for a smooth transition between the time domain representation of the current audio frame encoded in the frequency domain and a time domain representation of the subsequent audio frame encoded in the linear prediction domain.

This embodiment of the invention is based on the finding that it is advantageous to be able to insert a single audio frame designated here as a current audio frame between a preceding audio frame encoded in the linear prediction domain and a subsequent audio frame also encoded in the linear prediction domain and that a smooth transition between said three audio frames should be ensured by using an appropriate insertion window.

It has been found that inserting a single frequency domain encoded audio frame between two linear prediction domain encoded audio frames brings along the chance to realistically encode background sound accompanying speech. While it may be most efficient to encode the actual speech in the linear prediction domain a linear prediction domain encoding is typically inefficient or even very inefficient for encoding any background noise which may be dominant during the comparatively short breaks between separate words.

Thus if it was not possible to introduce a single audio frame encoded in the frequency domain between two audio frames encoded in the linear prediction domain it would either be very bitrate inefficient to encode the background noise during the short breaks between two words because such background noise would need to be encoded in the linear prediction domain which is not well suited for encoding background noise or the encoding of the background noise would be rather inaccurate if the background noise would be encoded in the linear prediction domain while limiting the bitrate to a low value .

In contrast the inventive concept which provides for an appropriate insertion window allows for the insertion of a single frequency domain encoded audio frame between two linear prediction domain encoded audio frames and consequently allows for a resource efficient but accurate encoding and decoding of background noise between individual words. While the speech portions are encoded in the linear prediction domain which is best suited for the encoding of speech the background noise during the breaks i.e. pauses between the words is encoded in the frequency domain which allows for a bitrate efficient encoding which is well adapted to the human perception of such background noise.

Nevertheless it has been found that a smooth insertion of such a single frequency domain encoded audio frame between multiple linear prediction domain encoded audio frames can be performed with good bitrate efficiency using an appropriately shaped insertion window the transition slopes of which are shaped in order to smoothen the transitions between the previous linear prediction domain encoded audio frame the current frequency domain encoded audio frame and the subsequent linear prediction domain encoded audio frame.

Another embodiment according to the first aspect of the invention creates an audio encoder for providing an encoded representation of an audio content on the basis of an input audio representation of the audio content. The audio encoder comprises a linear prediction domain encoder core configured to provide a set of linear prediction domain parameters on the basis of a time domain representation of an audio frame to be encoded in the linear prediction domain. The audio encoder also comprises a frequency domain encoder core configured to provide a set of frequency domain parameters on the basis of a time domain representation of an audio frame to be encoded in the frequency domain taking into account a transform window out of a set comprising a plurality of different transform windows. The audio encoder is configured to encode subsequent overlapping or non overlapping audio frames in different domains. The set of transform windows available for application by the frequency domain encoder core comprises an insertion window adapted for generation of a set of frequency domain parameters of an audio frame to be encoded in the frequency domain which is embedded between a preceding audio frame to be encoded in the linear prediction domain and a subsequent audio frame to be encoded in the linear prediction domain. A left sided transition slope of the insertion window is adapted to provide for a smooth transition between a time domain representation of the preceding audio frame to be encoded in the linear prediction domain and a time domain representation of the current audio frame to be encoded in the frequency domain. A right sided transition slope of the insertion window is adapted to provide for a smooth transition between the time domain representation of the current audio frame to be encoded in the frequency domain and a time domain representation of the subsequent audio frame to be encoded in the linear prediction domain.

The provision of an insertion window adapted for a smooth transition between a preceding audio frame to be encoded in the linear prediction domain a current audio frame to be encoded in the frequency domain and a subsequent audio frame to be encoded in the linear prediction domain brings along the same advantages as discussed above with respect to the audio decoder. For example the provision of such an insertion window which is specifically adapted to allow for the insertion of a single frequency domain encoded audio frame between linear prediction domain encoded audio frames improves the encoding accuracy and bitrate requirement when encoding background noise between words or other speech elements.

Further embodiments according to the invention also create a method for providing a decoded representation of an audio content and a method for providing an encoded representation of an audio content which methods are based on the ideas discussed before.

Another embodiment according to a second aspect of the invention creates another audio decoder for providing a decoded representation of an audio content on the basis of an encoded representation of the audio content. The audio decoder comprises a linear prediction domain decoder core configured to provide a time domain representation of an audio frame on the basis of a set of linear prediction domain parameters. The audio decoder also comprises a frequency domain decoder core configured to provide a time domain representation of an audio frame on the basis of a set of frequency domain parameters taking into account a transform window out of a set comprising a plurality of different transform windows. The audio decoder also comprises a signal combiner configured to overlap time domain representations of subsequent audio frames encoded in different domains in order to smoothen a transition between the time domain representations of the subsequent audio frames. The set of transform windows available for application by the frequency domain decoder core comprises window types having associated therewith different temporal resolutions and being adapted for a generation of a time domain representation of a frequency domain encoded audio frame such that the time domain representation of a frequency domain encoded audio frame comprises a smooth transition towards a time domain representation of a linear prediction domain encoded audio frame.

This embodiment of the invention is based on the finding that it is advantageous to have a choice between different temporal resolutions for an encoding and decoding of a frequency domain encoded audio frame preceding a linear prediction domain encoded audio frame and that such flexibility can be obtained by providing a plurality of appropriate window types of different temporal resolutions adapted for a generation of a time domain representation of a frequency domain encoded audio frame such that the time domain representation of a frequency domain encoded audio frame comprises a smooth transition towards a time domain representation of a linear prediction domain encoded audio frame. In other words it has been found that it is desirable to have window types of different temporal resolutions the right sided transition slopes of which are specifically adapted for an overlap and add with a time domain representation of a subsequent linear prediction domain encoded audio frame and typically differ form transition slopes of window types adapted for an overlap and add with a time domain representation of a subsequent frequency domain encoded audio frame.

It has been recognized that an efficient encoding of an audio signal comprising both speech portions and non speech portions also designated as general audio portions can be obtained if both a high temporal resolution coding and a low temporal resolution coding is available for frequency domain encoded audio frames preceding a linear prediction domain encoded audio frame. It has been found that in many cases speech portions are audibly separated or spaced from non speech portions of an audio content. For example in processed audio contents there is often a short time gap between a non speech portion e.g. background noise of a movie and a beginning of the speech portion in order to facilitate an understanding of the speech portion. The same also holds for some artistic pieces of music in which instrumental music which is typically encoded in a non speech portion stops shortly before the beginning of a vocal audio content which is typically encoded in a speech portion . A high temporal resolution coding of the non speech portion is desirable in such a case. Nevertheless it has also been found that in other cases the speech portion is embedded into the background noise such that an audible gap between the background noise non speech portion and the speech content of the speech portion is avoided. It has been found that a bitrate efficient encoding of both types of audio content with good audio quality can be obtained by providing the possibility to directly transition to a linear prediction domain encoded audio frame from a frequency domain encoded audio frame encoded with high temporal resolution or from a frequency domain encoded audio frame encoded with low temporal resolution. This possibility is opened by providing the audio decoder with appropriate window types of different temporal resolutions which are adapted for a generation of a time domain representation of a frequency domain encoded audio frame comprising a transition towards a time domain representation of a linear prediction domain encoded audio frame.

Thus the audio decoder according to the second aspect of the invention is well suited for a decoding of a bitrate efficiently encoded audio content comprising a mixture of non speech portions and speech portions.

Another embodiment according to the second aspect of the invention creates an audio encoder for providing an encoded representation of an audio content on the basis of input audio representation of the audio content. The audio encoder comprises a linear prediction domain encoder core configured to provide a set of linear prediction domain parameters on the basis of a time domain representation of an audio frame to be encoded in the linear prediction domain. The audio encoder also comprises a frequency domain encoder core configured to provide a set of frequency domain parameters on the basis of a time domain representation of an audio frame to be encoded in the frequency domain taking into account a transform window out of a set comprising a plurality of different transform windows. The audio encoder is adapted to encode subsequent overlapping or non overlapping audio frames in different of the domains. The set of transform windows available for application by the frequency domain encoder core comprises window types of different temporal resolutions adapted for a generation of a set of frequency domain parameters of an audio frame to be encoded in the frequency domain and comprising a transition towards a subsequent audio frame to be encoded in the linear prediction domain.

This audio encoder is capable of providing the advantages which have already been discussed with respect to the audio decoder according to the second aspect of the invention. In particular the audio encoder is capable of providing an encoded audio information in which different types of audio contents comprising both non speech portions and speech portions are encoded with high bitrate efficiency while maintaining the characteristics of a transition from a non speech portion to a speech portion.

Further embodiments according to the second aspect of the invention create a method for providing a decoded audio representation of an audio content and a method for providing an encoded audio representation of an audio content.

Another embodiment according to a third aspect of the present invention creates an audio decoder for providing a decoded representation of an audio content on the basis of an encoded representation of the audio content. The audio decoder comprises a linear prediction domain decoder core configured to provide a time domain representation of an audio frame on the basis of a set of linear prediction domain parameters. The audio decoder also comprises a frequency domain decoder core configured to provide a time domain representation of an audio frame on the basis of a set of frequency domain parameters taking into account a transform window out of a set comprising a plurality of different transform windows. The audio decoder also comprises a signal combiner configured to overlap time domain representations of subsequent audio frames in order to smoothen a transition between the time domain representations of the subsequent audio frames. The frequency domain decoder core is configured to selectively provide a time domain representation of an audio frame on the basis of a high temporal resolution set of frequency domain parameters representing the frequency domain encoded audio frame at a comparatively high temporal resolution using a high temporal resolution window type or on the basis of a low temporal resolution set of frequency domain parameters representing the frequency domain encoded audio frame at a comparatively lower temporal resolution using a low temporal resolution transform window type. The set of transform windows available for application by the frequency domain decoder core comprises a transition window adapted for a generation of a time domain representation of a current frequency domain encoded audio frame the current frequency domain encoded audio frame following a previous audio frame encoded in the frequency domain using a high temporal resolution set of frequency domain parameters and the current frequency domain encoded audio frame comprising a transition towards a time domain representation of a subsequent linear prediction domain encoded audio frame. A left sided transition slope of the transition window is adapted to a right sided transition slope of the high temporal resolution window type and a right sided transition slope of the transition window is adapted to provide for a smooth transition between the time domain representation of the current audio frame encoded in the frequency domain and a time domain representation of the subsequent audio frame encoded in the linear prediction domain.

This embodiment according to the third aspect of the invention is based on the finding that many pieces of audio comprise a transient for example a step like reduction of an ambient noise shortly but not directly before a transition from a non speech portion towards a speech portion of the audio content and that the temporal spacing between the transient and the transition between the non speech portion and the speech portion is often of the order of the duration of an audio frame. Also it has been found that audio signals are often approximately stationary during an audio frame between said transient and the transition from the non speech portion to the speech portion. For example a level of a background noise is sometimes significantly reduced approximately 1 to 1.5 audio frames before a transition from a non speech portion to a speech portion which constitutes a transient of the audio content. Subsequently the level of the background noise is often approximately constant up to the beginning of the speech portion. It has been found that such an audio content can be encoded bitrate efficiently and with good audio quality using a transition window the transition slopes of which are adapted such that the transition window provides for a smooth transition between a time domain representation of an audio frame encoded in the frequency domain using a comparatively high temporal resolution and a time domain representation of the current audio frame encoded in the frequency domain using a comparatively low temporal resolution and also a smooth transition between the time domain representation of the current audio frame encoded in the frequency domain using a comparatively low temporal resolution and an audio frame encoded in the linear prediction domain. Accordingly it is not necessary to encode the approximately stationary non speech portion of an audio content immediately preceding a speech portion of the audio content using a high temporal resolution. Rather a comparatively low temporal resolution can be used for the encoding of the approximately stationary non speech portion of the audio content directly preceding the speech portion of the audio content thereby keeping the bitrate sufficiently small. Nevertheless as the transition window preferably comprises a left sided transition slope adapted to match a right sided transition slope of a high temporal resolution window having associated therewith spectral coefficients of high temporal resolution it is possible to encode an audio frame which is two frames before a first linear prediction domain encoded audio frame in the frequency domain using a high temporal resolution. Thus the audio coding can be adapted to characteristics of typical audio contents in which there is a transient slightly before a transition from a non speech portion towards a speech portion.

A further embodiment according to the third aspect of the invention creates an audio encoder for providing an encoded representation of an audio content on the basis of an input audio representation of the audio content. The audio encoder comprises a linear prediction domain encoder core configured to provide a set of linear prediction domain parameters on the basis of a time domain representation of an audio frame to be encoded in the linear prediction domain. The audio encoder also comprises a frequency domain encoder core configured to provide a set of frequency domain parameters on the basis of a time domain representation of an audio frame to be encoded in the frequency domain taking into account a transform window out of a set comprising a plurality of different transform windows. The frequency domain encoder core is configured to selectively provide a high temporal resolution set of frequency domain parameters representing the audio frame to be encoded in the frequency domain at a comparatively high temporal resolution using a high temporal resolution window or a low temporal resolution set of frequency domain parameters representing the audio frame to be encoded in the frequency domain at a comparatively low temporal resolution using a low temporal resolution window. The audio encoder is adapted to encode subsequent overlapping or non overlapping audio frames in different domains. The set of transform windows available for application by the frequency domain encoder core comprises a transition window adapted for a generation of a set of frequency domain parameters on the basis of a time domain representation of a current audio frame the current audio frame following a previous audio frame to be encoded in the frequency domain using a high temporal resolution set of frequency domain parameters and the current audio frame comprising a transition towards a time domain representation of a subsequent audio frame to be encoded in the linear prediction domain. The audio encoder is capable of efficiently encoding audio contents in which there is a transient shortly but not directly before a transition from a non speech portion towards a speech portion.

Further embodiments according to the third aspect of the invention create a method for providing a decoded representation of an audio content and a method for providing an encoded representation of an audio content.

Further embodiments according to the aspects of the invention create computer programs for performing the methods mentioned above.

In the following an audio encoder according to an embodiment of the invention will be described taking reference to which shows a block schematic diagram of an audio encoder . The audio encoder is configured to receive an input audio representation and to provide on the basis thereof a bitstream representing an audio content which is described by the input audio representation . The audio encoder comprises a frequency domain encoder core and a linear prediction domain encoder core . The frequency domain decoder core is configured to receive the input audio representation or optionally a pre processed version thereof. The pre processed version may for example be obtained using an optional pre processor . The frequency domain encoder core is also configured to receive a signal classification information which may be derived from the input audio representation using an optional signal classifier or which may be obtained otherwise. The frequency domain encoder core is configured to provide a set of frequency domain parameters associated to an audio frame of the input audio representation . For example the frequency domain encoder core may be configured to provide a set of spectral parameters e.g. spectral values associated with an audio frame of the input audio representation . Also the frequency domain encoder core is configured to provide a window sequence information describing which transform window has been used for obtaining the set of frequency domain parameters . The audio encoder may further optionally comprise a psycho acoustic model processor which is configured to receive the input audio representation and to provide a psycho acoustic model information on the basis of the input audio representation 

The audio encoder also comprises optionally a spectral processor which is configured to receive a set of frequency domain parameters or even a sequence of sets of frequency domain parameters and to perform a spectral post processing. For example the spectral post processor may be configured to perform a temporal noise shaping and or a long term prediction on the basis of the one or more sets of frequency domain parameters thereby providing one or more post processed sets of frequency domain parameters . The audio encoder further comprises an optional scalar quantizer encoder configured to scale quantize and encode the frequency domain parameters of the set or the post processed set of frequency domain parameters. Accordingly the scalar quantizer encoder provides a scaled quantized and encoded set of frequency domain parameters.

In addition the audio encoder may comprise an optional encoder configured to receive the window sequence information to encode the window sequence information and to provide an encoded window sequence information .

The linear prediction domain encoder core is configured to receive the input audio representation or the pre processed version thereof and to provide a set of linear prediction domain parameters on the basis thereof. The set of linear prediction domain parameters may be associated with an audio frame for which it is found for example by the signal classifier that the frame is a speech audio frame. The set of linear prediction domain parameters may be generated by the linear prediction domain encoder core such that the set of linear prediction domain parameters represents coefficients of a linear prediction filter and a stimulus of the linear prediction filter such that an output of the linear prediction filter which is obtainable in response to the stimulus approximates a speech content of the audio frame input to the linear prediction domain encoder core . The audio encoder further comprises an optional encoder which is configured to encode the set of linear prediction domain parameters in order to obtain an encoded set of linear prediction domain parameters. The audio encoder further comprises an optional bitstream payload formatter which is configured to receive the set of frequency domain parameters or optionally the spectrally post processed set of frequency domain parameters or alternatively the scaled quantized and encoded set of frequency domain parameters the window sequence information or alternatively the encoded window sequence information and the set of linear prediction domain parameters or alternatively the encoded version thereof and to provide a bitstream which represents the audio content of the input audio representation in an encoded form.

Regarding the functionality of the audio encoder it should be noted that the audio encoder is capable of selectively encoding the audio content of the input audio representation in the frequency domain and in the linear prediction domain. Accordingly it is possible to encode an audio frame for example an audio frame of 2048 time domain samples of the input audio representation in the domain best suited for a bitrate efficient encoding. For example general audio contents like instrumental music and environmental noise can be encoded with good encoding efficiency i.e. with a good tradeoff between bitrate and perceptual quality in the frequency domain. In contrast audio frames comprising a speech or speech like audio content in the following also designated at speech audio frames can be encoded more efficiently i.e. with a better tradeoff between perceived speech quality and bitrate in the linear prediction domain. For encoding the speech in the linear prediction domain characteristics of the human vocal tract are exploited in order to obtain a bitrate efficient representation of the linear prediction filter coefficients. Also the linear prediction domain encoder core is adapted to exploit characteristics of the Epiglottis and the vocal chord in order to provide an efficient representation of the stimulus of the linear prediction filter.

The audio encoder is configured to handle signals in which non speech audio frames i.e. frames in which a speech content is non dominant over a general audio content like for example instrumental music or environmental noise and speech audio frames i.e. audio frames in which a speech content is dominant over a non speech audio content are included. Accordingly different audio frames which are typically overlapping and which may comprise for example a length of 2048 audio samples are encoded in different coding domains frequency domain or linear prediction domain . Accordingly a set of frequency domain parameters may be included into the bitstream for a non speech audio frame while omitting the inclusion of a set of linear prediction domain parameters for such a non speech audio frame and a set of linear prediction domain parameters may be included into the encoded bitstream for a speech audio frame while omitting the inclusion of a set of frequency domain parameters for such a speech audio frame . Accordingly each audio frame of the input audio representation may be encoded in the domain which is best suited for example in the terms of a tradeoff between perceptual quality and bitrate for the encoding of the respective audio frame.

In the following some details regarding the frequency domain encoding and the linear prediction domain encoding will be discussed. It should be noted that it is an important aspect of the encoding to avoid blocking artifacts at a transition between subsequent typically partially overlapping audio frames encoded in the same domain or encoded in different domains. By putting attention at this issue at the encoder side a reconstruction of the entire audio signal can be facilitated by avoiding undesirable blocking artifacts.

For non speech audio frames the encoded audio information which is included into the bitstream is generated using the frequency domain encoder core . The frequency domain encoder core comprises a windower transformer which is configured to provide the set of frequency domain parameters on the basis of a time domain representation of an audio frame of the input audio representation . The windower transformer is configured to perform a lapped transform of a windowed portion of the input audio information preferably of a windowed portion of an audio frame of the input audio representation . For example the windower transformer is configured to perform a modified discrete cosine transform MDCT on the basis of a windowed time domain representation of a given audio frame of the input audio representation thereby obtaining a set of modified discrete cosine transform parameters which make up a set of frequency domain parameters associated with the given audio frame. For example a set of 1024 MDCT coefficients may be provided by the windower transformer on the basis of an audio frame having 2048 time domain samples even though some of the 2048 time domain samples of the audio frame may be forced to zero by the windowing . Typically a number of time domain samples of the given audio frame considered for the generation of the set of MDCT coefficients may be larger than the number MDCT coefficients thereby creating a so called time domain aliasing. However the time domain aliasing may be reduced or even entirely eliminated by an overlap and add operation performed in a corresponding audio decoder overlapping and adding reconstructed time domain representations of subsequent audio frames.

It is important to note that the windower transformer may be configured to apply different transform windows out of a set comprising a plurality of transform windows before performing the MDCT transform or during the application of the MDCT transform. The application of a transform window smoothens a transition between subsequent audio frames and allows for a smooth overlap and add of subsequent audio frames encoded in the frequency domain. For example the windowing may be performed such that in an overlap region in which there is an overlap between subsequent audio frames audio samples are weighted less with increasing distance from the center of the current audio frame for which the windowing is currently performed . Thus in a left sided portion of an overlap region wherein the term left sided is used synonymously with temporarily earlier between a current audio frame and a subsequent audio frame time domain samples are weighted higher for obtaining the MDCT parameters of the current audio frame than for obtaining the MDCT parameters of the subsequent audio frame. In contrast in a right sided portion of an overlap region when the term right sided is used synonymously with temporarily later between the current audio frame and the subsequent audio frame the time domain samples are weighted higher for the generation of the MDCT coefficients of the subsequent audio frames than for the generation of the MDCT coefficients of the current audio frame.

Typically different window types are available for encoding subsequent audio frames to be encoded in the frequency domain. For example window types of different temporal resolutions are available which comprise transition regions for example in the form of transition slopes of different lengths. Also dedicated window types are typically available for switching between different temporal resolutions. Also the inventive audio encoder comprises a plurality of window types that fit for providing a smooth transition between audio frames encoded in different domains e.g. frequency domain and linear prediction domain as will be discussed in detail in the following.

The frequency domain encoder core typically comprises a window sequence determiner window selector which is configured to receive the signal classification information from the signal classifier and to select a window type from a set comprising a plurality of window types or a plurality of transform windows . Accordingly the window sequence determiner window selector provides the window sequence information which is evaluated by the windower transformer in order to perform an appropriate windowing information before the MDCT transform or during the MDCT transform.

The window sequence determiner window selector is preferably configured to take into consideration a window type used for a provision of the MDCT coefficients of a previous audio frame if the previous audio frame was encoded in the frequency domain. In addition the window sequence determiner takes into consideration a signal classification information indicating whether the previous audio frame was encoded in the frequency domain or in the linear prediction domain. Furthermore the window sequence determiner typically takes into consideration a signal classification information indicating a temporal resolution which should be applied for encoding the current audio frame and also a temporal resolution which should be used for encoding a subsequent audio frame. Thus the window sequence determiner window selector is preferably configured to adapt a window type to be used for providing the MDCT coefficients of the current audio frame to the domain in which the previous audio frame has been encoded and to the domain in which the subsequent audio frame is to be encoded. In addition the window sequence determiner is typically configured to take into account a temporal resolution or associated window shape of the adjacent audio frames i.e. the previous audio frame and the subsequent audio frame if any of the adjacent audio frames is encoded in the frequency domain. Specific details regarding the selection of the transform windows will be discussed subsequently also taking reference to and 

In addition it should be noted that the basic functionality of the preprocessor of the frequency domain encoder core of the spectral post processor and of the scaler quantizer encoder is similar to the functionality of the components AAC gain control block switching filter bank TNS long term prediction intensity prediction PNS M S and AAC scaling quantization Huffman coding described in the International Standard ISO IEC 14496 3 part 3 subpart 4 and the related literature. Accordingly the bitstream provided by the scalar quantizer encoder may be similar to or even in some cases identical to the information provided by the block AAC scaling quantization Huffman coding of the audio decoder described in said standard and the related literature.

Nevertheless the audio encoder provides for the additional possibility to encode audio frames in the linear prediction domain thereby providing the set of linear prediction domain parameters. The set of the linear prediction domain parameters may be similar to or even identical to a set of linear prediction domain parameters provided by an audio encoder according to one of the standards 3GPP TS 26.090 3GPP TS 26.190 or 3GPP TS 26.290. Nevertheless the set of linear prediction domain parameters may be similar to or even identical to any other set of linear prediction domain parameters provided by a speech audio coder.

In the following the structure of an audio decoder according to the embodiments of the present invention will be described taking reference to which shows a block schematic background of such an audio decoder . The audio decoder is configured to receive a bitstream which may carry an encoded audio information. The bitstream may be identical to the bitstream provided by the audio encoder . The audio decoder comprises an optional bitstream payload deformatter which is configured to parse the bitstream and to extract different information items from the bitstream . For example the bitstream payload deformatter is configured to extract an encoded spectral value information from the bitstream . Additionally the bitstream payload deformatter is configured to extract a window information from the bitstream to extract an encoded stimulus information from the bitstream and to also extract encoded linear prediction domain filter parameters from the bitstream . However it should be noted that it is not required that all the information items are extracted for each audio frame. In some cases the encoded stimulus information may even be omitted completely if the stimulus is encoded using the encoded spectral value information transform coded excitation .

The audio decoder comprises an optional decoder inverse quantizer rescaler which is configured to receive the encoded spectral value information and to decode the encoded spectral value information for example by performing an arithmetic decoding algorithm. Also the decoder inverse quantizer rescaler may be configured to perform an inverse quantization of the decoded spectral value information for example by using an inverse quantization algorithm and a rescaling for example by applying the scale factors or inverse scale factors to the decoded and inversely quantized spectral value information . Accordingly the decoder inverse quantizer rescaler provides a decoded inversely quantized and rescaled spectral value information on the basis of the encoded spectral value information .

The audio decoder also comprises an optional spectral preprocessor which is configured to perform a spectral preprocessing of the decoded spectral value information in order to obtain a preprocessed set of frequency domain parameters associated with an audio frame or a sequence of audio frames . For example the set of frequency domain parameters may be part of a time frequency representation of an audio content in the form of a set of spectral parameters or values associated with an audio frame. For example the set of frequency domain parameters may comprise a set of MDCT coefficients associated with an audio frame and determined for example by the frequency domain encoder core of the audio encoder . The audio decoder comprises a frequency domain decoder core which is configured to receive the set of frequency domain parameters and also the window information or any equivalent information describing a window to be applied by the frequency domain decoder core . The frequency domain decoder core is also configured to provide a time domain representation of the audio content of an audio frame on the basis of the set of frequency domain parameters associated with the audio frame and the window information . For this purpose the frequency domain decoder core comprises a transformer windower which is configured to perform a lapped transform of the set of frequency domain parameters in order to derive the time domain representation from the set of frequency domain parameters. The transformer windower may be configured to also perform a windowing using a transform window out of a set comprising a plurality of transform windows. In order to select an appropriate transform window the frequency domain decoder core preferably comprises a window sequence determiner window selector which is configured to select an appropriate transform window on the basis of the window information or any equivalent information . The windowing may be applied during the lapped transform i.e. using a combined transform windowing operation or subsequent to the lapped transform i.e. using a separate windowing operation after the lapped transform operation . Details regarding the choice of the appropriate transform window will be discussed subsequently taking reference to and 

The audio decoder also comprises a linear prediction domain decoder core which is configured to receive the encoded linear prediction domain filter parameters and the stimulus information. For example the linear prediction domain decoder core may be configured to receive the decoded spectral value information as a stimulus information describing a transform coded excitation of a linear prediction filter. Alternatively the linear prediction domain decoder code may receive the encoded dedicated stimulus information which may represent a stimulus of the linear prediction filter using a so called CELP concept or a so called ACELP concept. For details regarding the encoding of the stimulus reference is made for example to the above mentioned 3GPP standards in which an encoding of a stimulus of a linear prediction filter for a speech coding decoding is described. The linear prediction domain decoder core preferably comprises a stimulus processor which is configured to receive the stimulus information and to provide a time domain stimulus signal on the basis of the stimulus information . For example the stimulus processor may comprise a filter bank for providing the time domain stimulus signal on the basis of the decoded spectral value information in the case of a transform coded excitation. Alternatively or in addition the stimulus processor may comprise a time domain decoder in order to provide the time domain stimulus signal on the basis of the encoded dedicated stimulus information for example in the case of a CELP coded or ACELP coded excitation. The linear prediction domain decoder core additionally comprises an optional stimulus post processor which is configured to receive the time domain stimulus signal and to provide a post processed version of the time domain stimulus signal. The linear prediction domain decoder core also comprises a linear prediction coding filter which is configured to receive the encoded linear prediction domain filter parameters or decoded linear prediction domain filter parameters and the time domain stimulus signal . The linear prediction coding filter is configured to perform an adjustable linear prediction filtering in dependence on the encoded linear prediction domain filter parameters or decoded linear prediction domain filter parameters derived therefrom and to provide a synthesis signal by filtering the time domain excitation signal using a linear prediction filter operation adjusted in accordance with the encoded linear prediction domain filter parameters . In addition the linear prediction domain decoder core comprises an optional post processor which is configured to receive and post process the synthesis signal and to provide a time domain signal .

The audio decoder further comprises an overlap and add processor which is configured to receive the time domain representation of frequency domain encoded audio frames and the time domain representation of linear prediction domain encoded audio frames and to overlap and add time domain representations of subsequent audio frames thereby providing a continuous time domain representation of the encoded audio information represented by the bitstream .

The audio decoder further comprises optionally a post processor which is configured to receive the continuous time domain representation of the audio content and to perform a post processing thereby obtaining a post processed continuous time domain representation of the audio content. The post processor may for example be configured to perform a pitch enhancement a bandwidth extension and or a surround processing.

The audio decoder is configured to provide for a smooth transition between time domain representations of audio frames encoded in different domains frequency domain and linear prediction domain by an appropriate cooperation between the frequency domain decoder core the linear prediction domain decoder core and the overlap and add processor .

In particular the frequency domain decoder core is configured to apply transform windows which are specifically adapted for different sequences of domains in which subsequent audio frames are encoded. Also the transition slopes of the transform windows which are available for application by the transformer windower and which are selected by the window sequence determiner window selector are adapted to a specific sequence of domains in which the subsequent audio frames are encoded as will be discussed in detail in the following.

In the following details regarding the available window sequences and transform windows will be described taking reference to and . It should be noted that the window sequences and transform windows may be applied both in the windower transformer of the audio encoder and in the transformer windower of the audio decoder . However a more detailed discussion will be given regarding the case of the audio decoder because the usefulness of the different window sequences and transform windows can be understood more easily in the context of the audio decoder . Nevertheless the explanations given here with regard to the audio decoder can be applied analogously for the case of the audio encoder .

Regarding the notation of it should be noted that an abscissa for example in a direction from the left of the paper to the right of the paper describes a time and that an ordinate for example in a vertical direction from the bottom of the page to the top of the page describes a magnitude of a window s value.

A horizontal portion of a window shape describes a region of at least approximately constant magnitude of the window shape. A linearly ascending portion of the window shape describes a steady increase of the magnitude of the window shape wherein the increase does not necessarily need to be linear. Rather a linear ascent of the window shape describes any steadily increasing window shape which is suited or adapted for performing an aliasing reducing or aliasing canceling overlap and add between time domain representations of adjacent audio frames. For example a linearly ascending window shape may represent a sine type or cosine type increasing window shape. Similarly a linearly descending window shape represents any steadily decreasing window shape which is suited or adapted for an aliasing reducing or aliasing canceling overlap and add between time domain representations of subsequent windowed audio frames. Accordingly a linearly descending window shape represents for example a sine type or cosine type window shape decreasing in magnitude with increasing time. Alternatively a linearly ascending window shape or a linearly descending window shape may represent an increasing or decreasing Kaiser Bessel derived window shape. Nevertheless other non linearly increasing or non linearly decreasing window shapes may be represented by the linearly ascending window shape and the linearly descending window shape.

In addition it should be noted that time intervals are marked in the window representations by thin solid vertical lines and thin hatched vertical lines. A distance between two adjacent thin solid vertical lines is 1024 samples a distance between two adjacent thin hatched vertical lines is 128 samples and a distance between a thin solid vertical line and an adjacent thin hatched vertical line is 128 samples. A temporal duration of a normal audio frame is 2048 samples. A time shift between two adjacent audio frames is 1024 samples such that a left half of a current audio frame overlaps with a right half of a preceding audio frame and such that a right half of the current audio frame overlaps with a left half of the subsequent audio frame. Herein the terms left and right are used to designate a temporally earlier left element e.g. audio sample or portion of a transform window and a temporarily later right element e.g. audio sample or portion of a transform window .

Taking reference now to it can be seen that the windower transformer or the transformer windower may be capable to apply a transform window out of for example up to 11 different available transform windows. However there are embodiments in which more different transform windows are available and there are also embodiments in which not all of the transform windows shown in are available.

Furthermore it can be seen from that there are 7 basic types of transform windows which are designated with long window long start window 8 short window long stop window stop start window stop window1152 and stop start window1152 . However some of the window types mentioned before namely the window types long start window 8 short window stop start window and stop start window1152 can be applied before a subsequent linear prediction domain encoded audio frame.

However it has been found that different actual window shapes should be used in dependence of whether a window of the basic window type long start window 8 short window stop start window or stop start window1152 is followed by a frequency domain encoded audio frame or a linear prediction domain encoded audio frame. Accordingly two different window shapes are available for the window type long start window namely a normal window shape used if the subsequent audio frame is encoded in the frequency domain and a modified window shape also designated as long start window to LPD used if the current frame is followed by an audio frame encoded in the linear prediction domain. Similarly two actual window shapes are available for the window type 8 short window namely a normal window shape used if the current frame is followed by a frequency domain encoded audio frame and a modified window shape also designated as 8 short window to LPD used if the current audio frame is followed by a linear prediction domain encoded audio frame. Also two actual window shapes are available for the window type stop start window namely a normal window shape used if the current audio frame is followed by a frequency domain encoded audio frame and a modified window shape also designated as stop start window to LPD used if the current audio frame is followed by a linear prediction domain encoded audio frame. Similarly two different window shapes are available for the window type stop start window1152 namely a normal window shape used if the current audio frame is followed by a frequency domain encoded audio frame and a modified window shape also designated as stop start window1152 to LPD used if the current audio frame is followed by a linear prediction domain encoded audio frame.

For the window types long window long stop window and stop window1152 only a normal window shape is available in some embodiments because said window types are not suited for audio frames followed by a linear prediction encoded audio frame.

The window type long window is only available in a normal window shape version which comprises a left sided transition slope of length 1024 time domain samples and a right sided transition slope of length 1024 time domain samples.

The window type long start window is available in a normal window shape version and a modified window shape version . The normal window shape version of window type long start window comprises a left sided transition slope of length 1024 time domain samples and a right sided constant window portion of length 448 time domain samples a right sided transition slope of transition length 128 time domain samples and a right sided zero portion of length 448 time domain samples. The right sided transition portion extends from a left half of the right sided portion or half of the transform window to the right half of the right sided portion of the transform window. Thus the right sided transition slope is adapted for performing in an audio decoder an overlap and add operation between two windowed time domain representations of subsequent audio frames. Further assuming that the number of MDCT coefficients associated with the transform window for example 1024 MDCT coefficients is significantly smaller than the number of time domain samples associated with the transform window e.g. 2048 it can be understood that a time domain aliasing is introduced by the comparatively small number of MDCT coefficients. Thus a MDCT transform of an audio frame windowed by the transform window results in MDCT coefficients comprising a time domain aliasing in that time domain samples located in the right half of the right sided portion of the transform window are folded back to the left half of the right sided portion of the transform window . Accordingly said samples from the right half of the right sided portion of the transform window are folded back from a temporal portion to a temporal portion . However this aliasing folding of time domain samples from one region of the transform window to another region of the transform window can be compensated by an overlap and add operation of an audio decoder as it is known for example from the international standard ISO IEC 14496 3 part 3 subpart 4 and the corresponding literature.

However there is also a modified window shape version of the window type long start window which is used for example by the audio encoder or the audio decoder for a windowing of time domain samples of a current frame encoded in the frequency domain or to be encoded in the frequency domain if and only if the subsequent audio frame is encoded or is to be encoded in the linear prediction domain. The modified window shape version of the window type long start window comprises a left sided transition slope of length 1024 audio samples which may for example be identical to the left sided transition slope of the normal window shape version of window type long start window . Similarly the modified window shape version of window type long start window comprises a constant non zero portion of length 448 time domain samples which may be identical to the constant portion . Furthermore the modified window shape version of window type long start window comprises a right sided transition slope of transition length 64 time domain samples which is shorter than the length of the right sided transition slope of the window type . The right sided transition slope is entirely included in a left sided half of the right sided portion of the transform window . In addition the transform window comprises a right sided zero portion of length 512 time domain samples which fills the entire right sided half of the right portion of the window shape . Accordingly the window shape avoids an aliasing of time domain samples from the right sided half of the right portion of the transform window to the left half of the right sided portion of the transform window if a modified discrete cosine transform providing for example 1024 MDCT coefficients is applied to an audio frame of length for example 2048 time domain samples which audio frame is windowed by the transform window because time domain samples lying in the right half of the right sided portion of the transform window which would be folded back to the left half of the right sided portion of the transform window are entirely forced to zero by the right sided zero portion of the transform window because the right sided zero portion extends across the entire right half of the right sided portion of the transform window . Accordingly the temporal portion of the transform window which comprises the right sided transition slope is left unaffected by a time domain aliasing such that it is unnecessary to perform at the side of a decoder an aliasing cancellation during the temporal portion in which the right sided transition slope extends.

Thus a transition between an audio frame encoded in the frequency domain and a subsequent audio frame encoded in the linear prediction domain is facilitated by a shortening of the right sided transition slope of the modified window shape version of the window type long start window when compared to the right sided transition slope of the normal window shape version of the type long start window . The modified window shape version is adapted such that a right sided aliasing is avoided thereby eliminating the need for an alias cancellation at the decoder side in the case of a transition from a frequency domain encoded audio frame to a linear prediction domain encoded audio frame.

The available set of transform windows further comprises a normal window shape version of window type 8 short window . The transform window comprises a left sided zero portion of length 448 time domain samples and a plurality of for example 8 sub windows . Each of the sub windows comprises a left sided transition slope for example designated with and a right sided transition slope for example designated with . As can be seen the sub windows are temporally shifted with respect to each other such that a right sided transition slope e.g. designated with of a given subwindow overlaps with left sided transition slope e.g. designated with . A short set of MDCT coefficients for example of 128 MDCT coefficients is associated with each of the sub windows and each of the sub windows comprises a temporal extension of 256 time domain samples. Accordingly a representation of an audio content within the temporal duration of one of the sub windows which comprises only 128 MDCT coefficients comprises aliasing. Nevertheless when performing e.g. in the audio decoder an overlap and add operation of time domain representations of the audio contents described by the sets of MDCT coefficients associated with two sub windows e.g. sub windows and aliasing artifacts within the overlap regions of the adjacent sub windows e.g. sub windows and are canceled. In addition it should be noted that a left sided transition slope of a first left sided sub window extends into the left half of the left sided portion of the transform window and that the right sided transition slope of the last right sided sub window extends into the right half of the right sided portion of the transform window of the current audio frame . This is reflected by the fact that the left sided transition slope of the first sub window comprises a temporal duration of for example 128 time domain samples which is identical to the temporal duration e.g. 128 time domain samples of the right sided transition slope of the last right sided sub window . In other words there is an aliasing within the temporal region of the left sided transition slope of the first sub window and there is also an aliasing within the temporal region of the right sided transition slope of the last right sided sub window such that an aliasing cancellation is required at the decoder side both in the temporal region of the left sided transition slope and in the region of the right sided transition slope . This aliasing cancellation can be obtained for example by an overlap and add operation.

In the following details regarding the modified window shape version of the window type 8 short window will be discussed. The so called transition window comprises a left sided zero portion having a temporal duration of for example 448 time domain samples. The transform window further comprises a plurality of for example 8 sub windows . Also the transform window comprises a right sided zero portion of temporal duration 512 time domain samples. It should be noted here that the temporal extension of the right sided zero portion is longer e.g. 512 time domain samples than the temporal extension of the left sided zero portion e.g. 448 time domain samples . In addition it should be noted that the right sided zero portion covers the entire right half of the right sided portion of the transform window while the left sided zero portion is temporally shorter than the left half of the left sided portion of the transform window .

Regarding the sub windows it should be noted that a first left sided sub window comprises a temporally longer extension for example 256 time domain samples than a last right sided subwindow e.g. 192 time domain samples . This is due to the fact that a left sided transition slope of the first left sided subwindow comprises a longer temporal extension e.g. 128 time domain samples than a right sided transition slope e.g. 64 time domain samples of the last right sided sub window . The transition slope of the last right sided subwindow is entirely included in the left half of the right sided portion of the transition window and does not extend into the right half of the right sided portion of the transition window . It should be noted that the first left sided sub window preferably comprises the same window shape as the central sub windows . Also it should be noted that the sub windows preferably all of the sub windows comprise transition slopes which are adapted such that there is an aliasing cancellation when overlapping e.g. in the audio decoder time domain representations of audio contents associated with subsequent sub windows.

Specifically a right sided transition slope of the last central subwindow preceding the last sub window is adapted to a left sided transition slope of the last sub window . However while the right sided transition slopes of the sub windows comprise identical temporal durations and shapes the right sided transition slope of the last sub window comprises a comparatively shorter temporal duration.

By providing the last subwindow of the modified window shape of the window type 8 short window with a shorter temporal duration aliasing artifacts during the temporal duration of the right sided transition slope of the last subwindow are avoided. Accordingly it is unnecessary to perform an aliasing cancellation during the temporal duration of the right sided transition slope of the last subwindow . Accordingly an aliasing cancellation can be omitted when overlapping and adding a time domain representation decoded using the modified window shape version of window type 8 short window with a time domain representation of an audio frame decoded in the linear prediction domain. Rather a simple cross fade may be performed during the temporal duration of the right sided transition slope of the last subwindow between a time domain representation of an audio frame decoded using the transform window and a subsequent audio frame decoded in the linear prediction domain.

In the following the normal window shape version of window type long stop window which is designated with will be described. The transform window comprises a left sided zero portion which comprises a temporal duration of 448 time domain samples. The window shape further comprises a left sided transition slope which comprises a temporal duration of 128 time domain samples and which extends in both a left half of the left sided portion of the transform window and in the right half of the left sided portion of the transform window such that there is typically an aliasing when transforming 2048 time domain samples windowed by the transform window into the frequency domain to obtain 1024 MDCT coefficients. It can be the transform window further comprises a left sided constant portion of temporal duration 448 time domain samples which extends in the right half of the left sided portion of the transform window . In addition the transform window comprises a right sided transition slope of temporal duration 1024 time domain samples which extends in the right sided portion of the transform window .

In the following a normal window shape version of window type stop start window which is designated with will be described. Transform window comprises a left sided zero portion of temporal duration 448 time domain samples and a left sided transition slope of temporal duration 128 time domain samples which extends in both a left sided half and a right sided half of the left sided portion of the transform window such that there is an aliasing and a need for an aliasing cancellation in an audio decoder . The transform window also comprises a central non zero constant portion which has a temporal duration of for example 896 time domain samples. The transform window further comprises a right sided transition slope of temporal duration 128 time domain samples which extends in both the left sided half and the right sided half of the right sided portion of the transform window . In addition the transform window comprises a right sided zero portion of temporal duration 448 time domain samples which extends in the right sided half of the transform window .

The transition slopes of the transform window are adapted such that an audio frame the MDCT coefficients of which are obtained using the transform window can be interposed between a previous audio frame the MDCT coefficients of which are obtained using the transform window and a subsequent audio frame the MDCT coefficients of which are obtained using the transform window wherein an appropriate aliasing cancellation is ensured by a match of the right sided transition slope with the left sided transition slope and also by a match of the right sided transition slope with the left sided transition slope in that the transition slopes are adapted for an aliasing canceling smooth transition .

In the following the modified window shape version of window type stop start window will be described. The transform window comprises a left sided zero portion which is identical to the left sided zero portion of the transform window a left sided transition slope which is identical to the left sided transition slope of the transform window and a central portion which is identical to the central portion of the transform window . However a right sided transition slope of the transform window is shortened to a temporal duration of 64 time domain samples when compared to the right sided transition slope of the transform window which comprises a temporal duration of 128 time domain samples. It should be noted that the right sided transition slope of the transform window typically comprises the same temporal position and characteristics as the right sided transition portions of the transform window and of the subwindow . In addition the transform window comprises a right sided zero portion which is preferably identical in its temporal position and characteristics with the right sided zero portions of the transform windows .

The transform window is adapted for a transform of an audio content of an audio frame which is inserted between a previous audio frame which is encoded in the frequency domain and the MDCT coefficients of which are generated using the transform window i.e. a high temporal resolution transform window and a subsequent audio frame encoded in the linear prediction domain. For this purpose the left sided transition slope of the transform window is matched to the right sided transition slope of the sub window of the transform window to allow for an aliasing cancellation when overlapping and adding time domain representations of subsequent audio frames generated e.g. in the audio decoder using the transform windows . In addition the right sided transition slope of the transform window is adapted such that an overlap and add transition can be performed without applying an explicit aliasing cancellation functionality.

In the following the normal window shape version of window type stop window1152 will be described. It should be noted here that the transform window comprises a total duration of 2304 time domain samples and that 1152 MDCT coefficients are associated with an audio frame encoded using the transform window . The transform window comprises a left sided zero portion of temporal duration 512 time domain samples. Also the transform window comprises a left sided transition slope of temporal duration 128 time domain samples which is arranged such that the transition slope extends in both a left sided half and a right sided half of the left sided portion of the transform window . In addition the transform window comprises a constant non zero central portion of temporal duration 576 time domain samples. Further the transform window comprises a right sided transition slope of temporal duration 1024 time domain samples and a right sided zero portion of temporal duration 64 time domain samples. The transform window is adapted for an encoding decoding of a current audio frame inserted between a previous audio frame encoded in the linear prediction domain and a subsequent audio frame encoded in the frequency domain using a low temporal resolution for example using a transform window or a transform window .

In the following normal window shaped version of window type stop start window1152 will be described. 1152 MDCT coefficients are typically associated with an audio frame of 2304 time domain samples encoded using the window shape . The transform window comprises a left sided zero portion which is identical in its temporal position and characteristics to the left sided zero portion of the transform window and a left sided transition slope which is identical in its temporal position and characteristics to the left sided transition slope of the transform window . The transform window also comprises a constant central portion of temporal duration 1024 time domain samples. In addition the transform window comprises a right sided transition slope which is similar in its position and characteristics to the right sided transition slope of the transform window . The transform window also comprises a right sided zero portion of temporal duration 512 time domain samples. The transform window is adapted to be used for an encoding or decoding of an audio frame which is embedded between a previous audio frame encoded in the linear prediction domain and a subsequent audio frame encoded using a high temporal resolution for example using the transform window .

In the following the modified window shape version of the window type stop start window1152 will be described. Typically 1152 MDCT coefficients are associated to an audio frame encoded using the window type . The transform window comprises a left sided zero portion which is identical to the left sided zero portion of the transform window and also a left sided transition slope which is identical to the left sided transition slope of the transform window . The transform window also comprises a central non zero constant portion which is identical to the central constant portion of the transform window . However a right sided transition slope of the transform window is temporally shortened in comparison to the right sided transition slope of the transform window . For example the right sided transition slope may be very similar or even identical in its position and characteristics to the right sided transition slopes of the transform window or the sub window of the transform window taking into consideration that the temporal duration of the transform window is 2304 time domain samples rather than 2048 time domain samples . Thus the transition slope may comprise a temporal duration of 64 time domain samples and may be included entirely in the left sided half of the right sided portion of the transform window thereby avoiding aliasing. The transform window also comprises a right sided zero portion of temporal duration 576 time domain samples. The transform window is adapted to be used for an encoding or decoding of an audio frame which is embedded between a preceding linear prediction domain encoded audio frame and a subsequent linear prediction domain encoded audio frame. Accordingly the left sided transition slope of the transform window is adapted for an aliasing cancelling cross fade between a time domain representation of a previous audio frame encoded in the linear prediction domain and a time domain representation of the current audio frame. In particular a temporal position of the transition slope is adapted such that the transition slope is offset to the left by approximately 128 time domain samples relative to a center between two adjacent frame boundaries shown by thin solid vertical lines . In addition the right sided transition slope of the transform window is adapted such that an overlap and add transition can be performed without applying an explicit aliasing cancellation functionality.

In the following more details regarding some particularly important window types will be described taking reference to 

In the following some details regarding the application of the modified window shape version of window type long start window which is also designated by reference numeral and by the name long start window to LPD will be discussed taking reference to

First of all it should be noted that the transform window is adapted to be applied in an audio decoder for the provision of a time domain representation of an audio frame which is embedded between a previous audio frame encoded in the frequency domain and a subsequent audio frame encoded in the linear prediction domain. A portion of the time domain representation of the current audio frame to which the left sided transition slope is applied is typically overlapped and added with a time domain representation of a previous frequency domain encoded audio frame to which a right sided transition slope of an appropriate transform window for example of the transform window or of the transform window or of the transform window is applied. Accordingly an aliasing cancellation is obtained due to the match of the transition slopes. In contrast a portion of the time domain representation of the current audio frame to which the transition slope is applied is overlapped and added with a windowed but not time domain aliasing processed version of a time domain representation of the subsequent linear prediction domain encoded audio frame. Accordingly smoothened transitions between the time domain representations of the previous audio frame and of the current audio frame and between the time domain representations of the current audio and the subsequent audio frame are obtained.

In the following some details regarding the application of the modified window shape version of the window type 8 short window will be described taking reference to . As can be seen in the transform window is adapted for an application in an audio decoder wherein the modified transform window which is also sometimes designated as 8 short window to LPD is adapted for a provision of a time domain representation of a current frequency domain encoded audio frame which current frequency domain encoded audio frame is encoded with comparatively high temporal resolution and which current frequency domain encoded audio frame is adapted to be embedded between a previous frequency domain encoded audio frame and a subsequent linear prediction domain encoded audio frame. Preferably the time domain representation of the previous frequency domain encoded audio frame is obtained using a transform window a transform window or a transform window if the previous audio frame is encoded using a comparatively lower temporal resolution or using a transform window if the previous audio frame is encoded using a comparatively higher temporal resolution . A portion of the time domain representation of the current audio frame to which the transition slope is applied is overlapped and added in the audio decoder with a portion of the a time domain representation of the previous audio frame to which one of the transition slopes or is applied. Accordingly a transition between the time domain representation of the previous audio frame and the time domain representation of the current audio frame is smoothened and an aliasing cancellation is performed. A temporal portion of the time domain representation of the current audio frame to which the transition slope is applied is overlapped and added with a windowed but not time domain aliasing processed version of a time domain representation of the subsequent linear prediction domain encoded audio frame. Accordingly a transition between the current linear prediction domain encoded audio frame which comprises a comparatively high temporal resolution and the subsequent linear prediction domain encoded audio frame is smoothened.

In the following the application of the modified window shape version of the window type stop start window which is also sometimes designated as stop start window to LPD will be described with reference to

The transform window is applied by an audio decoder for providing a time domain representation of an audio frame encoded with comparatively low temporal resolution which current audio frame is embedded between a previous audio frame encoded in the frequency domain preferably using a comparatively higher temporal resolution and a subsequent audio frame encoded in the linear prediction domain. For example the previous audio frame may be obtained using a normal window shape version of window type 8 short window . However in some cases the previous audio frame may be encoded using a normal window shape version or of window type long start window stop start window or stop start window1152 . In an audio decoder an overlap and add operation may be performed between time domain samples of the current audio frame to which the left sided transition slope of the transform window is applied and time domain samples of a time domain representation of the previous frequency domain encoded audio frame to which a transition slope of the transform window or alternatively a transition slope of the transform window a transition slope of the transform window or a transition slope of the transform window has been applied. Accordingly a transition between the time domain representation of the previous audio frame and the time domain representation of the current audio frame is smoothened. In addition an overlap and add is performed in an audio decoder between time domain samples of a time domain representation of the current audio frame to which the transition slope of the transform window has been applied and time domain samples of a time domain representation of the subsequent linear prediction domain encoded audio frame wherein a matched transition window may be applied to the time domain samples of the subsequent linear prediction domain encoded audio frame before the overlap and add operation . Accordingly a transition between the time domain representation of the current audio frame and the time domain representation of the subsequent audio frame may be smoothened without having the need to implement an aliasing cancellation mechanism at this transition.

In the following the application of the modified window shape version of the window type stop start window1152 in an audio decoder will be described. The transform window is used in an audio decoder for obtaining a time domain representation of an audio frame of comparatively low temporal resolution which is embedded between a previous audio frame encoded in the linear prediction domain and a subsequent audio frame also encoded in the linear prediction domain. Thus the transform window allows the insertion of a single frequency domain encoded audio frame between two linear prediction domain encoded audio frames.

The audio decoder is preferably configured to perform an overlap and add operation between time domain samples of the time domain representation of the current audio frame to which time domain samples the transition slope is applied and time domain samples of a time domain representation of the previous linear prediction domain encoded audio frame. Before performing the overlap and add operation a time domain aliasing processing may be applied to the time domain representation of the previous linear prediction domain encoded audio frame which time domain aliasing processing may include the insertion of time domain aliasing components and the application of a window slope to time domain samples in the temporal overlap region. Accordingly a smoothened transition between the previous linear prediction domain encoded audio frame and the current frequency domain encoded audio frame is obtained. Moreover an overlap and add operation may be performed by the audio decoder between a temporal portion of the time domain representation of the current audio frame to which temporal portion the transition slope is applied and time domain samples of a time domain representation of the subsequent linear prediction domain encoded audio frame wherein a windowing may be applied to the time domain representation of the linear prediction domain encoded audio frame before the execution of the overlap and add operation . Accordingly a smoothened transition between the time domain representation of the current frequency domain encoded audio frame and the time domain representation of the subsequent linear prediction domain encoded audio frame can be obtained.

In the following an overview will be given of window sequences in the sense of sequences of window types which are allowed in an audio encoder or an audio decoder according to the present invention. Nevertheless it should be noted that it is not required to implement all of the transform windows described with respect to and all of the window sequences described with reference to in an audio encoder or audio decoder according to the present invention.

As can be seen in an audio frame encoded using the window type long window can be followed by an audio frame encoded using the window type long window or long start window An audio frame encoded using the window type long start window can be followed by an audio frame encoded using the window type 8 short window long stop window or stop start window . However the audio frame encoded using the window type long start window can also be followed by an audio frame encoded in the linear prediction domain by using the modified window shape .

An audio frame encoded using window type 8 short window can be followed by an audio frame encoded using the window type 8 short window long stop window or stop start window . However by using the transform window an audio frame encoded using the window type 8 short window may also be followed by an audio frame encoded in the linear prediction domain.

An audio frame encoded using the window type long stop window may be followed by an audio frame encoded using the window type long window or long start window .

An audio frame encoded using the window type stop start window may be followed by an audio frame encoded using the window type 8 short window long stop window or stop start window . However the audio frame encoded using the window type stop start window may also be followed by an audio frame encoded in the linear prediction domain using the modified transform window .

An audio frame encoded using the window type stop window1152 may be followed by a subsequent audio frame encoded using the window type long window or long start window .

An audio frame encoded using the window type stop start window1152 may be followed by a subsequent audio frame encoded using a window type 8 short window long stop window or stop start window . However an audio frame encoded using the window type stop start window1152 may also be followed by an audio frame encoded in the linear prediction domain by using the modified transform window .

A current audio frame encoded in the linear prediction domain may be followed by a subsequent audio frame encoded in the linear prediction domain or by a frequency domain encoded audio frame encoded using the window type stop window1152 or stop start window1152 .

In the following a sequence of transform windows will be described which involves performing an indirect with an intermediate frame in between transition from a frequency domain encoded audio frame to a linear prediction domain encoded audio frame. It should be noted that in the following discussions the frames designated by subsequent frame numbers in order to be able to identify the frames.

Taking reference now to which shows a schematic representation of a first sequence of transform windows a case will be described in which an audio frame encoded in the linear prediction domain follows a plurality of audio frames encoded in the frequency domain with comparatively low temporal resolution. As can be seen a first audio frame is encoded in the frequency domain using a comparatively low temporal resolution and using the transform window . A second subsequent audio frame which is temporally overlapping for example by 50 with the first audio frame is encoded in the frequency domain using the transform window . An overlap and add is performed in an audio decoder between time domain representations of the audio contents of the first and second audio frame in the temporal overlap region. A third audio frame which is temporally overlapping with the second audio frame for example by 50 is encoded in the linear prediction domain. An overlap and add operation is performed between the time domain representation of the second audio frame and the time domain representation of the audio content of the third audio frame represented by linear prediction domain parameters . For this purpose a transition slope windowing represented at reference numeral is applied to a time domain representation of the audio content of the third audio frame . The third audio frame is followed by a fourth audio frame which may be encoded in the frequency domain as shown in or in the linear prediction domain.

The sequence of encoded audio frames shown in is useful in a situation in which there are no step transitions closely preceding within the previous one or two frames a speech like audio frame encoded in the linear prediction domain.

However sequences of transform windows which are better suited if a speech like audio frame follows a significant transient e.g. step transition of the audio content will be described with reference to and

To summarize the sequence of transform windows of which comprises the modified window shape transform window of type 8 short window allows for a direct transition between the second audio frame which is encoded in the frequency domain using a comparatively high temporal resolution and the third audio frame encoded in the linear prediction domain.

In the following another important sequence of transform windows will be described with reference to which shows a graphical representation of such a sequence of transform windows. As can be seen in a first audio frame is encoded in the linear prediction domain. A second audio frame is encoded in the frequency domain wherein the transform window is used for encoding and decoding the second audio frame . The second audio frame is followed by a third audio frame which is encoded in the linear prediction domain. As can be seen the left sided transition slope of the transform window which is used for encoding and decoding the second audio frame is adapted for performing an aliasing canceling overlap and add operation between the time domain representation of the audio content of the first audio frame and the time domain representation of the audio content of the second audio frame . In order to allow for such an aliasing canceling overlap and add operation and increased number of MDCT coefficients e.g. 1152 MDCT coefficients is associated with the second audio frame when compared to for example 1024 MDCT coefficients associated with frequency domain encoded audio frames embedded between two adjacent frequency domain encoded audio frames . Accordingly an aliasing canceling overlap and add is performed between the time domain representations to the audio content of the first and second audio frames wherein time domain aliasing processing and a windowing is applied to the audio content of the first audio frame . A third audio frame is encoded in the linear prediction domain and an overlap and add operation is performed in an audio decoder between the time domain representations of the second audio frame and of the third audio frame . For this purpose the transition slope of the transform window is exploited. Also a windowing is applied to the time domain representation of the third audio frame .

The window sequence of allows for the insertion of a single frequency domain encoded audio frame between neighboring linear prediction domain encoded audio frames wherein an appropriate overlap and add can be performed both at the transition from the first audio frame to the second audio frame and at the transition from the second audio frame to the third audio frame . Specifically the transition slopes of the transform window are adapted such that a bitrate efficient overlap and add with aliasing cancellation is performed between the first audio frame and the second audio frame and such that a computationally efficient and low distortion overlap and add without the need for an aliasing cancellation can be performed at the transition from the second audio frame to the third audio frame . This is achieved by using transition slopes of different temporal duration and by associating an increased number of MDCT coefficients to the second audio frame 1152 MDCT coefficients instead of 1024 MDCT coefficients . Accordingly it is possible to encode stationary background noise in the breaks or pauses between two speech like audio frames with good bitrate efficiency while maintaining the possibility of obtaining smooth transitions in an audio decoder.

In the following another advantageous sequence of transform windows will be described taking reference to which shows a schematic representation of such a sequence of transform windows. A first audio frame is encoded in the frequency domain for example using a comparatively low temporal resolution. For example the transform window may be applied for the encoding and the decoding the first audio frame . A second audio frame is encoded in the frequency domain using a comparatively high temporal resolution. For example a transform window is used for the encoding and decoding of the second audio frame . A third audio frame is encoded in the frequency domain using a comparatively lower temporal resolution. However rather than using the transform window the modified transform window is used for encoding and decoding the third audio frame . Accordingly matched transition slopes are provided at the transition from the second audio frame to the third audio frame such that an aliasing canceling overlap and add can be performed there. A fourth audio frame is encoded in the linear prediction domain. However a transition slope of the transform window is adapted for performing an overlap and add operation with the fourth audio frame without requiring an aliasing cancellation.

The window sequence of allows for an indirect transition with the third audio frame in between between a high temporal resolution frequency domain encoded audio frame and a linear prediction domain encoded audio frame wherein a low temporal resolution frequency domain encoded audio frame is in between the audio frames . Such a window sequence is for example advantageous if a transient event in an audio signal for example a fast reduction of the volume of a background noise is spaced from a speech like audio frame by one intermediate non speech audio frame in which the background noise is approximately stationary. While the usage of the transform window would not allow for a bitrate efficient audio coding which represents the transient event with good audio quality the usage of the transform window at the encoder and at the decoder allows for a very good tradeoff between bitrate and audio quality in such cases.

In the following some details regarding the functionality of the frequency domain decoder core of the audio decoder will be described. Also some details of the overlap and add processor will be described. These functionalities are sometimes also designated as filterbank and block switching .

The time frequency representation of the signal is mapped onto the time domain by feeding it into the filterbank module . This module consists of an inverse modified discrete cosine transform IMDCT and a window and an overlap add function. In order to adapt the time frequency resolution of the filterbank to the characteristics of the input signal a block switching tool is also adopted. N represents the window length where N is a function of the window sequence.

Depending on the signal the coder may change the time frequency resolution by using three different windows size 2304 2048 and 256. To switch between windows the transition windows LONG START WINDOW LONG STOP WINDOW STOP WINDOW1152 STOP START WINDOW and STOP START WINDOW1152 are used. lists the windows specifies the corresponding transform length and shows the shape of the windows schematically. Three transform lengths are used 1152 1024 or 960 referred to as long transform and 128 or 120 coefficients referred to as short transform .

Window sequences are composed of windows in a way that a raw data block always contains data representing 1024 or 960 output samples. The data element window sequence indicates the window sequence that is actually used. lists how the window sequences also designated as transform windows are composed of individual windows also designated as sub windows .

For each channel the N 2 time frequency values Xare transformed into the N time domain values xvia the IMDCT. After applying the window function for each channel the first half of zthe sequence is added to the second half of the previous block windowed sequence zto reconstruct the output samples for each channel out.

 ONLY LONG SEQUENCE LONG START SEQUENCE EIGHT SHORT SEQUENCE LONG STOP SEQUENCE STOP START1152 SEQUENCE STOP1152 SEQUENCE STOP START1152 SEQUENCE .

In the following LPD SEQUENCE refers to all allowed window coding mode combinations inside the so called linear prediction domain codec. In the context of decoding a frequency domain coded frame it is important to know only if a following frame is encoded with the LP domain coding modes which is represented by an LPD SEQUENCE. However the exact structure within the LPD SEQUENCE is taken care of when decoding the LP domain coded frame.

The synthesis window length N for the inverse transform is a function of the syntax element window sequence and the algorithmic context. It is defined as follows 

The meaningful block transitions are listed in the table of . A tick mark in a given table cell indicates that a window sequence listed in that particular row may be followed by a window sequence listed in that particular column.

Depending on the window sequence and window shape element different transform windows are used. A combination of the window halves described as follows offers all possible window sequences. The window shape describes the shape of the so called transition slopes.

For window shape 1 the window coefficients are given by the Kaiser Bessel derived KBD window as follows 

The window length N can be 2048 1920 or 256 240 for the KBD and the sine window. In case of STOP1152 SEQUENCE and STOP START1152 SEQUENCE N can still be 2048 or 256 the window slopes or transition slopes are similar but the flat top regions are longer.

For all kinds of window sequences the window shape of the left half of the first transform window is determined by the window shape of the previous block or audio frame . The following formula expresses this fact 

For the first raw data block or audio frame to be decoded the window shape of the left and right half of the window are identical.

In case the previous block or audio frame was coded using LPD mode window shape previous block is set to 0.

The window sequence ONLY LONG SEQUENCE is equal to one LONG WINDOW with a total window length N l of 2048 1920 .

The LONG START SEQUENCE can be used to obtain a correct overlap and add for a block transition from an ONLY LONG SEQUENCE to any block with a low overlap short window slope window half on the left EIGHT SHORT SEQUENCE LONG STOP SEQUENCE STOP START SEQUENCE or LPD SEQUENCE .

The window sequence EIGHT SHORT comprises eight overlapped and added SHORT WINDOWs with a length N s of 256 240 each. The total length of the window sequence together with leading and following zeros is 2048 1920 . Each of the eight short blocks are windowed separately first. The short block number is indexed with the variable j 0 . . . M 1 M N l N s .

The window shape of the previous block influences the first of the eight short blocks W n only. If window shape 1 the window functions can be given as follows 

The overlap and add between the EIGHT SHORT window sequence resulting in the windowed time domain values zis described as follows 

The window shape of the previous block influences the first of the eight short blocks W n only. If window shape 1 the window functions can be given as follows 

The overlap and add between the EIGHT SHORT window sequence resulting in the windowed time domain values zis described as follows 

The STOP START SEQUENCE can be used to obtain a correct overlap and add for a block transition from any block with a low overlap short window slope window half on the right to any block with a low overlap short window slope window half on the left and if a single long transform is desired for the current frame.

The STOP1152 SEQUENCE is needed to obtain a correct overlap and add for a block transition from a LPD SEQUENCE to ONLY LONG SEQUENCE.

Window length N l and N s is set to 2048 1920 and 256 240 respectively. If window shape 1 the window for STOP1152 SEQUENCE is given as follows 

The STOP START1152 SEQUENCE can be used to obtain a correct overlap and add for a block transition from a LPD SEQUENCE to any block with a low overlap short window slope window half on the left.

Besides the overlap and add within the EIGHT SHORT window sequence the first left part or portion of every window sequence is overlapped and added with the second right part or portion of the previous window sequence resulting in the final time domain values out. The mathematic expression for this operation can be described as follows.

In case of ONLY LONG SEQUENCE LONG START SEQUENCE EIGHT SHORT SEQUENCE LONG STOP SEQUENCE and STOP START SEQUENCE 

In case of going from the FD mode to LPD mode depending on the window sequence of the last FD mode block a SIN if window sequence is 0 or KBD if window sequence is 1 window is applied on the left part of the first LPD SEQUENCE to have a correct overlap and add with the previous frame.

In case of STOP1152 SEQUENCE STOP START1152 SEQUENCE the previous sequence is a LPD SEQUENCE. In this case time domain aliasing components need to be artificially added to the decoded time domain signal in order to cancel the corresponding TDA components of the following FD mode frame. To facilitate this the right end of the previous LPD SEQUENCE needs to be windowed with a SIN window as indicated by window shape previous block folded unfolded and windowed again in an MDCT IMDCT manner prior to the overlap add operation with the following frame according to .

In the following a method for providing an encoded audio representation will be described taking reference to which shows a flow chart of such a method.

The method of for providing an encoded representation of an audio content on the basis of an input audio representation of the audio content comprises selectively providing a set of linear prediction domain parameters or a set of frequency domain parameters on the basis of a time domain representation of an audio frame to be encoded and in dependence on an information indicating whether a current audio frame is to be encoded in the linear prediction domain or in the frequency domain. The method comprises encoding subsequent audio frames in different domains and taking into account a transform window out of a set comprising a plurality of different transform windows for providing a set of frequency domain parameters associated with an audio frame to be encoded in the frequency domain.

In a first preferred embodiment of the method an insertion window is used for a generation of a set of frequency domain parameters of a current audio frame to be encoded in the frequency domain if the current audio frame is embedded between a preceding audio frame to be encoded in the linear prediction domain and a subsequent audio frame to be encoded in the linear prediction domain. A left sided transition slope of the insertion window is specifically adapted to provide for a smooth transition between a time domain representation of the preceding audio frame encoded in the linear prediction domain and a time domain representation of the current audio frame encoded in the frequency domain. A right sided transition slope of the insertion window is adapted to provide for a smooth transition between the frequency domain representation of the current frame encoded in the frequency domain and the time domain representation of the subsequent audio frame encoded in the linear prediction domain. In other words the transform window is used in a first embodiment of the method . Accordingly it is possible to obtain the sequence of audio frames and transform windows which has been discussed with reference to . Accordingly the above discussed advantages can be obtained.

In a second embodiment of the method the set of transform windows comprises window types of different temporal resolutions adapted for a generation of a set of frequency domain parameters of an audio frame to be encoded in the frequency domain and comprising a transition towards a subsequent audio frame to be encoded in the linear prediction domain. For example the transform windows and may both be available. Accordingly the sequences of audio frames and transform windows shown in and may both be obtainable such that a bitrate efficient encoding with good audio quality can be obtained in different situations irrespective of whether there is a transient event in a frequency domain encoded audio frame preceding a linear prediction domain encoded audio frame or not.

In a third embodiment of the method the set of transform windows comprises a transition window adapted for a generation of a set of frequency domain parameters on the basis of a time domain representation of a current audio frame if the current audio frame follows a previous audio frame to be encoded in the frequency domain using a high temporal resolution set of frequency domain parameters and if the current audio frame comprises a transition towards a time domain representation of a subsequent audio frame to be encoded in the linear prediction domain. In other words the third embodiment of the method uses the transform window in order to obtain the sequence of audio frames and transform windows shown in . Thus an efficient encoding can be obtained even if there is a transient event during the last but one audio frame before a first linear prediction domain encoded audio frame speech like audio frame .

In the following a method for providing a decoded audio representation will be described taking reference to which shows a flowchart of such method . The method comprises selectively providing time domain representations of audio frames on the basis of a set of linear prediction domain parameters or on the basis of a set of frequency domain parameters wherein a transform window out of a set comprising a plurality of different transform windows is taken into account when providing the time domain representation of an audio frame. The method also comprises performing an overlap and add operation of the time domain representations of subsequent audio frames encoded in different domains to smoothen a transition between the time domain representations of the subsequent audio frames encoded in different domains.

In a first embodiment of the method an insertion window is selected as a transform window for the generation of a time domain representation of a frequency domain encoded audio frame temporally embedded between a preceding frame encoded in the linear prediction domain and a subsequent audio frame encoded in the linear prediction domain. A left sided transition slope of the insertion window is adapted to provide for a smooth transition between a time domain representation of the preceding frame encoded in the linear prediction domain and the time domain representation of the current audio frame encoded in the frequency domain. A right sided transition slope of the insertion window is adapted to provide for a smooth transition between the time domain representation of the current audio frame encoded in the frequency domain and a time domain representation of the subsequent audio frame encoded in the linear prediction domain. Accordingly the sequence of audio frames and transform windows shown in can be decoded.

In a second embodiment of the method window types of different temporal resolutions are used for the generation of time domain representations of frequency domain encoded audio frames comprising a transition towards a time domain representation of a linear prediction domain encoded audio frame. Accordingly sequences of audio frames as shown in and are decoded according to the second embodiment of the method .

In a third embodiment of the method a transition window adapted for the generation of a time domain representation of a current frequency domain encoded audio frame is used in order to provide a time domain representation of a current frequency domain encoded audio frame following a previous audio frame encoded in the frequency domain using a high temporal resolution set of frequency domain parameters and comprising a transition towards a time domain representation of a subsequent linear prediction domain encoded audio frame. Accordingly a sequence of audio frames as shown in is decoded.

It should be noted here that the methods can be supplemented by any of the features and functionalities discussed here with respect to the inventive apparatuses and the inventive transform windows.

Embodiments according to the present invention create an improvement of the transition from a frequency domain encoding mode to a linear prediction domain encoding mode. In some simple embodiments the transition from frequency domain coding to linear predictive coding mode is performed by introducing the so called LPD start sequence which acts as a transitional window for the frame immediately preceding the first frame of a LPD sequence . The LPD start sequence is effectively a long start sequence with a modified right window half.

However technically a LPD sequence may also be preceded by a stop start sequence an eight short sequence or a stop start1152 sequence . In these cases the transform windows are adjusted in accordance with the present invention similar to the case of the LPD start sequence .

However it is important to note that the overlap and add should be implemented correctly in case of a transition from a stop start1152 sequence to a LPD sequence . The right window slope of the stop start1152 sequence should not be too long in order to avoid time domain aliasing components which cannot be cancelled by the LPD sequence contribution.

In case of a short right window slope the windowing after the inverse modified discrete cosine transform IMDCT and unfolding are not applied simultaneously for left and right window half. Rather the right windowing is applied just before doing the overlap add with the next frame.

When using a time warped filterbank the application of the frequency domain FD to linear prediction domain LPD transition slope has to be done slightly differently since the windowing of the right part has to be applied before resampling and therefore cannot be postponed. In this case when a linear prediction domain frame follows a non linear prediction domain frame a ratio between a normal short slope and the frequency domain to linear prediction domain transition slope is applied before overlap add on the past frame data to achieve the same results.

It should be noted here that according to the present invention the transition from frequency domain mode to the linear prediction coding mode is described more generally than in other approaches which makes the transition more consistent more flexible and easier to comprehend.

Although some aspects have been described in the context of an apparatus it is clear that these aspects also represent a description of the corresponding method where a block or device corresponds to a method step or a feature of a method step. Analogously aspects described in the context of a method step also represent a description of a corresponding block or item or feature of a corresponding apparatus. Some or all of the method steps may be executed by or using a hardware apparatus like for example a microprocessor a programmable computer or an electronic circuit. In some embodiments some one or more of the most important method steps may be executed by such an apparatus.

The inventive encoded audio signal can be stored on a digital storage medium or can be transmitted on a transmission medium such as a wireless transmission medium or a wired transmission medium such as the Internet.

Depending on certain implementation requirements embodiments of the invention can be implemented in hardware or in software. The implementation can be performed using a digital storage medium for example a floppy disk a DVD a Blue Ray a CD a ROM a PROM an EPROM an EEPROM or a FLASH memory having electronically readable control signals stored thereon which cooperate or are capable of cooperating with a programmable computer system such that the respective method is performed. Therefore the digital storage medium may be computer readable.

Some embodiments according to the invention comprise a data carrier having electronically readable control signals which are capable of cooperating with a programmable computer system such that one of the methods described herein is performed.

Generally embodiments of the present invention can be implemented as a computer program product with a program code the program code being operative for performing one of the methods when the computer program product runs on a computer. The program code may for example be stored on a machine readable carrier.

Other embodiments comprise the computer program for performing one of the methods described herein stored on a machine readable carrier.

In other words an embodiment of the inventive method is therefore a computer program having a program code for performing one of the methods described herein when the computer program runs on a computer.

A further embodiment of the inventive methods is therefore a data carrier or a digital storage medium or a computer readable medium comprising recorded thereon the computer program for performing one of the methods described herein.

A further embodiment of the inventive method is therefore a data stream or a sequence of signals representing the computer program for performing one of the methods described herein. The data stream or the sequence of signals may for example be configured to be transferred via a data communication connection for example via the Internet.

A further embodiment comprises a processing means for example a computer or a programmable logic device configured to or adapted to perform one of the methods described herein.

A further embodiment comprises a computer having installed thereon the computer program for performing one of the methods described herein.

In some embodiments a programmable logic device for example a field programmable gate array may be used to perform some or all of the functionalities of the methods described herein. In some embodiments a field programmable gate array may cooperate with a microprocessor in order to perform one of the methods described herein. Generally the methods are preferably performed by any hardware apparatus.

The above described embodiments are merely illustrative for the principles of the present invention. It is understood that modifications and variations of the arrangements and the details described herein will be apparent to others skilled in the art. It is the intent therefore to be limited only by the scope of the impending patent claims and not by the specific details presented by way of description and explanation of the embodiments herein.

