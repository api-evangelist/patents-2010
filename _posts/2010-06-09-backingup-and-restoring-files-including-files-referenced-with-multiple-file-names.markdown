---

title: Backing-up and restoring files including files referenced with multiple file names
abstract: Provided are a method, system, and article of manufacture for backing-up and restoring files including files referenced with multiple file names. Files to backup are determined. A determination is made from the files to backup files referenced with multiple names. An entry is created for each file to backup in a backup directory indicating file attributes and each name used to reference the file. The determined files and the backup directory are backed-up.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08024298&OS=08024298&RS=08024298
owner: International Business Machines Corporation
number: 08024298
owner_city: Armonk
owner_country: US
publication_date: 20100609
---
This application is a continuation of U.S. patent application Ser. No. 11 626 271 filed on Jan. 23 2007 which patent application is incorporated herein by reference in its entirety.

The present invention relates to a method system and article of manufacture for backing up and restoring files including files referenced with multiple file names.

Certain backup programs are designed to backup operating system state files comprising those files required by the operating system to operate such as dynamic link library DLL files etc. The purpose of such backup programs is to backup those files needed to restore the operating system state to the state at the time of backup. The Tivoli Storage Manager TSM backup archive client may backup all system state components in a single object to provide a consistent point in time snapshot of the system state. Tivoli is a registered trademark of International Business Machines Corporation in the United States and other countries On a Microsoft Windows Server system the system state components to backup include active directory system volume COM database files registry files system and boot files. Microsoft and Windows Server are registered trademarks of the Microsoft Corporation in the United States and other countries The TSM backup archive client may transfer the object including the system state files to a TSM backup server that manages backup objects for multiple clients.

In certain embodiments multiple names may be used to reference a file. For instance in certain Microsoft Windows operating systems a file may have multiple names that reference the file referred to as hard links and soft or symbolic links. Further Windows Vista System Backup has the capability to backup an image and restore files having multiple names by restoring only one copy of the file from the image. Windows Vista is a trademark of the Microsoft Corporation in the United States and other countries .

There is a need in the art for improved techniques for backing up files including files which may be referenced by multiple file names.

Provided are a method system and article of manufacture for backing up and restoring files including files referenced with multiple file names. Files to backup are determined. A determination is made from the files to backup files referenced with multiple names. An entry is created for each file to backup in a backup directory indicating file attributes and each name used to reference the file. The determined files and the backup directory are backed up.

The clients that communicate with the backup server may comprise suitable computational devices known in the art such as servers desktop computers workstations mainframes hand held computing devices telephony devices etc. The backup server may comprise a suitable server system known in the art. The backup repository may be implemented in a storage system known in the art such as a storage system including a plurality of storage devices e.g. interconnected hard disk drives a Redundant Array of Independent Disks RAID Just a Bunch of Disks JBOD Direct Access Storage Device DASD disks connected in a loop configuration serial loop Fibre Channel Arbitrated Loop a single storage device a tape library an optical library a network attached storage NAS etc. The network may comprise a Wide Area Network WAN Local Area Network LAN Storage Area Network SAN wireless network the Internet an Intranet peer to peer network etc.

The backup client program then indicates at block the determined one or more file names referencing the file and each name length in the entry being constructed. After generating backup directory entries for each file to backup the backup client program writes at block the determined files and the backup directory to a backup object . The backup client program transfers at block the generated backup object to the backup server program to store in the backup repository .

In one embodiment the backup client program may create the backup object in a local memory or storage of the client and then transfer the completed backup object to the backup server program . In an alternative embodiment the backup client program may stream the contents of the backup object being generated to the backup server program to avoid having to read and write the backup object to local storage.

With the described operations of the backup object includes self contained information in the form of the backup directory that maintains information on multiple names that may reference a single file. Further in certain embodiments only one instance of a file having multiple file names is included in the backup object .

With the described operations of only one instance of a file is restored or written to the client storage. Further the backup directory provides the information needed to create one or more entries in the file system for the one or more file names that reference the file without having to write multiple instances of the file to the client local storage.

Described embodiments provide techniques to backup and restore files to a backup object in a manner that avoids writing multiple instances of a file referenced with multiple file names to the backup object and that avoids restoring multiple instances of the file referenced with multiple file names. With the described embodiments only one instance of a file is written to a backup object and the information on the multiple file names for a file are maintained in a backup directory for the backup object. For the restore operation the backup directory is used to write only one instance of the file back to the client and then update the client file system to include the multiple names that reference the file.

The described operations may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof. The described operations may be implemented as code maintained in a computer readable medium where a processor may read and execute the code from the computer readable medium. A computer readable medium may comprise media such as magnetic storage medium e.g. hard disk drives floppy disks tape etc. optical storage CD ROMs DVDs optical disks etc. volatile and non volatile memory devices e.g. EEPROMs ROMs PROMs RAMs DRAMs SRAMs Flash Memory firmware programmable logic etc. etc. The code implementing the described operations may further be implemented in hardware logic e.g. an integrated circuit chip Programmable Gate Array PGA Application Specific Integrated Circuit ASIC etc. . Still further the code implementing the described operations may be implemented in transmission signals where transmission signals may propagate through space or through a transmission media such as an optical fiber copper wire etc. The transmission signals in which the code or logic is encoded may further comprise a wireless signal satellite transmission radio waves infrared signals Bluetooth etc. The transmission signals in which the code or logic is encoded is capable of being transmitted by a transmitting station and received by a receiving station where the code or logic encoded in the transmission signal may be decoded and stored in hardware or a computer readable medium at the receiving and transmitting stations or devices. An article of manufacture comprises computer readable medium hardware logic and or transmission signals in which code may be implemented. A device in which the code implementing the described embodiments of operations is encoded may comprise a computer readable medium or hardware logic. Of course those skilled in the art will recognize that many modifications may be made to this configuration without departing from the scope of the present invention and that the article of manufacture may comprise suitable information bearing medium known in the art.

The terms an embodiment embodiment embodiments the embodiment the embodiments one or more embodiments some embodiments and one embodiment mean one or more but not all embodiments of the present invention s unless expressly specified otherwise.

The terms including comprising having and variations thereof mean including but not limited to unless expressly specified otherwise.

The enumerated listing of items does not imply that any or all of the items are mutually exclusive unless expressly specified otherwise.

The variable n when used to represent a variable number of an element may indicate any number of instances of the element and may indicate different integer numbers when used with different elements.

Devices that are in communication with each other need not be in continuous communication with each other unless expressly specified otherwise. In addition devices that are in communication with each other may communicate directly or indirectly through one or more intermediaries.

A description of an embodiment with several components in communication with each other does not imply that all such components are required. On the contrary a variety of optional components are described to illustrate the wide variety of possible embodiments of the present invention.

Further although process steps method steps algorithms or the like may be described in a sequential order such processes methods and algorithms may be configured to work in alternate orders. In other words any sequence or order of steps that may be described does not necessarily indicate a requirement that the steps be performed in that order. The steps of processes described herein may be performed in any order practical. Further some steps may be performed simultaneously.

When a single device or article is described herein it will be readily apparent that more than one device article whether or not they cooperate may be used in place of a single device article. Similarly where more than one device or article is described herein whether or not they cooperate it will be readily apparent that a single device article may be used in place of the more than one device or article or a different number of devices articles may be used instead of the shown number of devices or programs. The functionality and or the features of a device may be alternatively embodied by one or more other devices which are not explicitly described as having such functionality features. Thus other embodiments of the present invention need not include the device itself.

The differential backup object shown in may be implemented as a single object or file or as multiple files or objects.

The illustrated operations of show certain events occurring in a certain order. In alternative embodiments certain operations may be performed in a different order modified or removed. Moreover steps may be added to the above described logic and still conform to the described embodiments. Further operations described herein may occur sequentially or certain operations may be processed in parallel. Yet further operations may be performed by a single processing unit or by distributed processing units.

The foregoing description of various embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto. The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended.

