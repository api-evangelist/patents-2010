---

title: Method and apparatus for processing location service messages in a satellite position location system
abstract: Method and apparatus for processing location service messages in a satellite position location system is described. In one example, a mobile receiver includes a satellite signal receiver, wireless circuitry, and at least one module. The satellite signal receiver is configured to receive satellite positioning system signals, such as Global Positioning System (GPS) signals. The wireless circuitry is configured to communicate location service messages between the mobile receiver and a server through a cellular communication network. The location service messages may include any type of data related to A-GPS operation, such as assistance data, position data, request and response data, and the like. The at least one module is configured to provide a user-plane interface and a control-plane interface between the satellite signal receiver and the wireless transceiver. The at least one module is capable of processing location service messages communicated using either the control-plane signaling or user-plane signaling mechanisms.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08687549&OS=08687549&RS=08687549
owner: Global Locate, Inc.
number: 08687549
owner_city: San Jose
owner_country: US
publication_date: 20101202
---
This application is a continuation of U.S. patent application Ser. No. 12 479 925 Method and Apparatus for Processing Location Service Messages in a Satellite Position Location System filed Jun. 8 2009 that is a continuation of U.S. patent application Ser. No. 10 932 557 filed Sep. 1 2004.

The present invention generally relates to satellite position location systems and more particularly to a method and apparatus for processing location service messages in a satellite position location system.

Global Positioning System GPS receivers use measurements from several satellites to compute position. GPS receivers normally determine their position by computing time delays between transmission and reception of signals transmitted from satellites and received by the receiver on or near the surface of the earth. The time delays multiplied by the speed of light provide the distance from the receiver to each of the satellites that are in view of the receiver.

More specifically each GPS signal available for commercial use utilizes a direct sequence spreading signal defined by a unique pseudo random noise PN code referred to as the coarse acquisition C A code having a 1.023 MHz spread rate. Each PN code bi phase modulates a 1575.42 MHz carrier signal referred to as the L1 carrier and uniquely identifies a particular satellite. The PN code sequence length is 1023

GPS receivers determine the time delays between transmission and reception of the signals by comparing time shifts between the received PN code signal sequence and internally generated PN signal sequences. These measured time delays are referred to as sub millisecond pseudoranges since they are known modulo the 1 millisecond PN frame boundaries. By resolving the integer number of milliseconds associated with each delay to each satellite then one has true unambiguous pseudoranges. A set of four pseudoranges together with a knowledge of absolute times of transmission of the GPS signals and satellite positions in relation to these absolute times is sufficient to solve for the position of the GPS receiver. The absolute times of transmission or reception are needed in order to determine the positions of the GPS satellites at the times of transmission and hence to compute the position of the GPS receiver. The satellite positions may be obtained from satellite trajectory data broadcast by the satellites referred to as ephemeris.

In some GPS applications the signal strengths of the satellite signals are so low that either the received signals cannot be processed or the time required to process the signals is excessive. As such to improve the signal processing a GPS receiver may receive assistance data from a network to assist in satellite signal acquisition and or processing. For example the GPS receiver may be integrated within a cellular telephone and may receive the assistance data from a server using a wireless communication network. This technique of providing assistance data to a remote receiver has become known as Assisted GPS or A GPS.

In some A GPS systems data related to location services is communicated between the server and the A GPS receiver over a control channel of the wireless communication network control plane C plane signaling . C plane signaling however requires the development of an extensive network infrastructure. In addition cellular network operators are hesitant to actively employ C plane signaling due to the low number of A GPS handsets currently in use.

Recently the wireless industry has strongly considered the use of an alternative protocol for messaging. Specifically the industry has investigated the benefits of communicating location service data between the server and the A GPS receiver over a network data link of the wireless communication network user plane U plane signaling . For example location service data may be communicated using an internet protocol IP . Presently a significant number of cellular phones are designed and manufactured with IP capabilities e.g. General Packet Radio Service GPRS capabilities . Thus U plane signaling takes advantage of pre existing network infrastructure and simply builds on top of this existing system. Consequently changes to the base station infrastructure software which are used to handle location service messages can be avoided.

Presently A GPS devices are manufactured to support only one of C plane signaling or U plane signaling. If an A GPS device that supports one type of signaling protocol enters the service area of a cellular network that supports the other type of signaling protocol the A GPS device cannot receive the necessary location service messages. Accordingly there exists a need in the art for a method and apparatus capable of processing location service messages in a satellite position location system regardless of the use of C plane signaling or U plane signaling.

Method and apparatus for processing location service messages in a satellite position location system is described. In one embodiment a mobile receiver includes a satellite signal receiver wireless circuitry and at least one module. The satellite signal receiver is configured to receive satellite positioning system signals such as Global Positioning System GPS signals. The wireless circuitry is configured to communicate location service messages between the mobile receiver and a server through a cellular communication network. The location service messages may include any type of data related to A GPS operation such as assistance data position data request and response data and the like. The at least one module is configured to provide a user plane interface and a control plane interface between the satellite signal receiver and the wireless transceiver. The at least one module is capable of processing location service messages communicated using either the control plane signaling or user plane signaling mechanisms.

These and other advantages aspects and novel features of the present invention as well as details of an illustrated embodiment thereof will be more fully understood from the following description and drawings.

To facilitate understanding identical reference numerals have been used where possible to designate identical elements that are common to the figures.

Method and apparatus for processing location service messages in a satellite position location system is described. Those skilled in the art will appreciate that the invention may be used with various types of mobile or wireless devices that are location enabled such as cellular telephones pagers laptop computers personal digital assistants PDAs and like type wireless devices known in the art. Generally a location enabled mobile device is facilitated by including in the device the capability of processing satellite positioning system SPS satellite signals such as Global Positioning System GPS signals.

The server illustratively comprises an input output I O interface a central processing unit CPU support circuits and a memory . The CPU is coupled to the memory and the support circuits . The memory may be random access memory read only memory removable storage hard disc storage or any combination of such memory devices. The support circuits include conventional cache power supplies clock circuits data registers I O interfaces and the like to facilitate operation of the server . Various processes and methods described herein may be implemented using software stored in the memory for execution by the CPU . Alternatively the server may implement such processes and methods in hardware or a combination of software and hardware including any number of processors independently executing various programs and dedicated hardware such as application specific integrated circuits ASICs field programmable gate arrays FPGAs and the like.

Satellite navigation data such as ephemeris for at least the satellites may be collected by a network of tracking stations reference network . The reference network may include several tracking stations that collect satellite navigation data from all the satellites in the constellation or a few tracking stations or a single tracking station that only collects satellite navigation data for a particular region of the world. An exemplary system for collecting and distributing ephemeris is described in commonly assigned U.S. Pat. No. 6 411 892 issued Jun. 25 2002 which is incorporated by reference herein in its entirety. The reference network may provide the collected satellite navigation data to the server .

The mobile receiver is configured to receive assistance data from the server . In one embodiment the assistance data comprises acquisition assistance data. For example the mobile receiver may request and receive acquisition assistance data from the server and send satellite measurement data to the server along with a time tag. The server then locates position of the mobile receiver referred to as the mobile station assisted or MS assisted configuration . The details of such computations are well known in the art and for purposes of clarity are not repeated herein. In another embodiment the assistance data comprises satellite trajectory data e.g. ephemeris Almanac or some other orbit model . Upon request the server may transmit satellite trajectory data to the mobile receiver via the cellular network . Notably the satellite trajectory data may comprise a long term satellite trajectory model as described in commonly assigned U.S. Pat. No. 6 560 534 issued May 6 2003 which is incorporated by reference herein in its entirety. Having received the satellite trajectory data the mobile receiver may locate its own position using the satellite measurement data referred to as the MS Based configuration . In addition the mobile receiver may compute its own acquisition assistance data described above using the satellite trajectory data.

The various data or messages communicated between the mobile receiver and the server are referred to herein as location service data or location service messages . Location service messages may comprise assistance data e.g. acquisition assistance data satellite trajectory data etc position data request data e.g. position requests assistance data requests etc. response data e.g. position request acknowledgements assistance request acknowledgements measurement data e.g. pseudoranges Dopplers etc. and like type A GPS data. Exemplary location service messages are described in ETSI TS 101 527 3GPP TS 4.31 .

The mobile receiver illustratively comprises a GPS receiver and wireless circuitry . The wireless circuitry comprises a wireless transceiver a processor support circuits and a memory . The GPS receiver receives satellite signals from the satellites using an antenna . The GPS receiver may comprise a conventional A GPS receiver. An exemplary A GPS receiver is described in commonly assigned U.S. Pat. No. 6 453 237 issued Sep. 17 2002 which is incorporated by reference herein in its entirety. The wireless transceiver receives cellular signals from the cellular network via an antenna . The wireless transceiver is controlled by the processor . The processor may comprise a microprocessor instruction set processor e.g. a microcontroller or like type processing element known in the art. The processor is coupled to the memory and the support circuits . The memory may be random access memory read only memory removable storage hard disc storage or any combination of such memory devices. The support circuits include conventional cache power supplies clock circuits data registers I O interfaces and the like to facilitate operation of the mobile receiver .

The GPS receiver includes a software interface . The software interface comprises an application programming interface API which may be used to configure and control the GPS receiver . The software interface is configured to provide support for mobile device originated activities e.g. mobile device originated position requests . The wireless transceiver includes a data bearer interface and a control channel interface . The data bearer interface is configured to receive and transmit data in accordance with a network protocol such as an internet protocol IP . For example the data bearer interface may be a General Packet Radio Service GPRS interface.

The control channel interface is configured to transmit and receive data over one or more cellular control channels. For example if the cellular network is a Global Systems for Mobile Communications GSM network the control channel interface may be configured to transmit and receive data over a stand alone dedicated control channel SDCCH a fast associated control channel FACCH and like type GSM control channels known in the art. The control channel interface may be configured for operation with well known control channels of other types of cellular networks such as code division multiple access CDMA universal mobile telecommunications system UMTS North American time division multiple access TDMA e.g. IS 136 and personal digital cellular PDC networks.

The mobile receiver may transmit and receive location service messages via either the data bearer interface or the control channel interface. Communication of location service messages via the data bearer interface is referred to as user plane U plane signaling. Communication of location service messages via the control channel interface is referred to as control plane C plane signaling. The memory stores at least one module for providing a user plane message interface and a control plane message interface between the GPS receiver and the wireless circuitry . In one embodiment the memory stores a combined user plane control plane module for providing a message interface between the GPS receiver and the wireless circuitry . Notably the combined module includes a U plane module and a C plane module . The U plane module provides an interface between the software interface of the GPS receiver and the data bearer interface of the wireless circuitry . The C plane module provides an interface between the software interface of the GPS receiver and the control channel interface of the wireless circuitry . In this manner the mobile receiver is capable of processing location service messages regardless of the particular signaling protocol employed by the cellular network e.g. C plane signaling or U plane signaling . Although the combined user plane control plane module is described as being implemented via software those skilled in the art will appreciate that the combined module may be implemented using hardware or a combination of software and hardware.

In operation location service messages are received and transmitted by either the control channel interface or the data bearer interface . Depending on the receiving transmitting interface the location service messages are processed by the U plane module or the C plane module . In either case data from the software interface of the GPS receiver is processed by either the U plane module or the C plane module to produce location service messages for transmission. Data is extracted from received location service messages by either the U plane module or the C plane module to produce data for driving the software interface .

In particular the SS codec and the SS engine are configured to provide for mobile receiver originated position requests through the C plane. That is the SS codec and the SS engine allow the mobile receiver to request and receive its position from the server . Notably the SS codec is in communication with the control channel interface and the SS engine . The control channel interface extracts SS messages from received control channel data and formats SS messages to form control channel data for transmission over a cellular control channel. The SS codec decodes the SS messages to produce SS data and encodes SS data to produce SS messages. An exemplary coding scheme employed by the SS codec is described in ETSI TS 124 080 version 5.4.0 3GPP TS 24.080 which is incorporated by reference herein. The SS engine handles the SS protocol and interfaces the software interface . The SS engine produces SS data in response to position requests issued by the software interface and provides position data to the software interface from SS data received from the server . An exemplary SS protocol is described in ETSI TS 124 030 version 5.1.0 3GPP TS 24.030 which is incorporated by reference herein as well as in 3GPP TS 24.080.

The common module is configured to provide for server originated position requests in both the C plane and the U plane as well as for the receipt and acknowledgment of assistance data. That is the common module allows the mobile receiver to receive position requests from the server and provide position information to the server . In addition the common module allows the mobile receiver receive assistance data from the server and provide an assistance data acknowledgement to the server .

Notably the RRLP codec is in communication with the control channel interface and the RRLP engine . The control channel interface extracts RRLP protocol data units PDUs from received control channel data and formats RRLP PDUs to form control channel data for transmission over a cellular control channel. The RRLP codec decodes RRLP PDUs to produce RRLP messages and encodes RRLP messages to produce RRLP PDUs. The RRLP PDUs are in a binary bit packed format such as an abstract syntax notation 1 ASN.1 format. For a detailed understanding of RRLP the reader is referred to ETSI TS 144 031 version 5.8.0 3GPP 44.031 which is incorporated by reference herein. The RRLP engine handles the RRLP protocol and interfaces the software interface . The RRLP engine produces RRLP messages in response to position data acknowledgment data and error data issued by the software interface and provides position request data and assistance data to the software interface from the RRLP messages received from the server .

The SUPL codec and the SUPL engine cooperate with the software interface to provide for mobile receiver originated position requests through the U plane. In addition the SUPL codec and the SUPL engine pass RRLP PDUs to the common module which provides for server originated position requests in the U plane as well as receipt and acknowledgment of assistance data. In this manner the common module is configured for use by both the C plane specific module and the U plane specific module .

The SUPL codec is in communication with the data bearer interface and the SUPL engine . The data bearer interface comprises an IP layer and a transport layer such as a user datagram protocol UDP transport layer a transmission control protocol TCP transport layer a hypertext transport protocol HTTP transport layer and the like. That is the data bearer interface implements an IP stack capable of operating with one or more transport protocols. The data bearer interface extracts SUPL messages from received IP packets and packetizes SUPL messages to form IP packets for transmission. The SUPL codec decodes SUPL messages received from the data bearer interface to produce protocol data PD messages and encodes PD messages to produce SUPL messages. Notably SUPL messages may be in a binary bit packed format such as an ASN.1 format.

The SUPL engine handles the U plane protocol and interfaces the software interface of the GPS receiver . Notably the SUPL engine analyzes received PD messages for content. If a received PD message contains an RRLP PDU the SUPL engine extracts the RRLP PDU from the PD message and passes the RRLP PDU to the RRLP codec . Otherwise the SUPL engine passes the data in the received PD message to the software interface e.g. data equivalent to the SS data for the C plane . The SUPL engine packages RRLP PDUs received from the RRLP codec to produce PD messages. In addition the SUPL engine packages data received from the software interface to produce PD messages. For a detailed understanding of SUPL the reader is referred to Secure User Place Location Requirements Draft Version 1.0 published by the Open Mobile Alliance which is incorporated by reference herein.

At step the location service message is decoded in accordance with a user plane protocol e.g. SUPL protocol . At step a determination is made as to whether the location service message includes an RRLP message. If not the method proceeds to step where data from the location service message is passed to the GPS receiver API. If the location service message includes an RRLP message the method proceeds to step where the location service message is processed by an RRLP module and data from the RRLP message is passed to the GPS receiver API.

If the location service message is formatted using a cellular control channel protocol i.e. C plane signaling the method proceeds to step . At step the contents of the location service message are determined. If the location service message contains an SS message the method proceeds to step where the location service message is processed by an SS module and data from the SS message is passed to the GPS receiver API. If at step the location service message contains an RRLP message the method proceeds to step where the location service message is processed by an RRLP module and data from the RRLP message is passed to the GPS receiver API.

At step a determination is made as to whether the location service message includes an RRLP message. If not the method proceeds to step wherein the location service message is encoded in accordance with a U plane protocol e.g. SUPL protocol . At step the encoded data is passed to the data bearer interface. If at step the location service message includes an RRLP message the method proceeds to step . At step the location service message is processed by an RRLP module and the RRLP message is encoded in accordance with the U plane protocol. The method then proceeds to step .

If at step the cellular network is configured to communicate location service messages using a cellular control channel protocol i.e. C plane signaling the method proceeds to step . At step the contents of the location service message is determined. If the location service message includes an RRLP message the method proceeds to step where the location service message is processed by an RRLP module and passed to the control channel interface. If the location service message includes an SS message the method proceeds to step wherein the location service message is processed by an SS module and passed to the control channel interface.

In the preceding discussion the invention has been described with reference to application upon the United States Global Positioning System GPS . It should be evident however that these methods are equally applicable to similar satellite systems and in particular the Russian GLONASS system the European GALILEO system combinations of these systems with one another and combinations of these systems and other satellites providing similar signals such as the wide area augmentation system WAAS and SBAS that provide GPS like signals. The term GPS used herein includes such alternative satellite positioning systems including the Russian GLONASS system the European GALILEO system the WAAS system and the SBAS system as well as combinations thereof.

While the foregoing is directed to embodiments of the present invention other and further embodiments of the invention may be devised without departing from the basic scope thereof and the scope thereof is determined by the claims that follow.

