---

title: Search and indexing on a user device
abstract: Search may be performed on a user device, such as a handheld electronic book reader device. A search query term may be received. Text of a collection of electronic items stored in memory of the user device may be searched, using an item index and/or a master index, for the queried term. Search results may be returned identifying locations in the electronic items at which the queried term appears.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08954444&OS=08954444&RS=08954444
owner: Amazon Technologies, Inc.
number: 08954444
owner_city: Reno
owner_country: US
publication_date: 20100414
---
This application is a divisional of U.S. patent application Ser. No. 11 763 349 filed Jun. 14 2007 which claims the benefit of U.S. Provisional Application No. 60 939 357 filed on May 21 2007 and which is also a continuation in part of U.S. patent application Ser. No. 11 693 685 filed Mar. 29 2007. All of the foregoing applications are incorporated by reference herein in their entireties.

Users have traditionally consumed media items such as books magazines newspapers etc. in hard copy form. For instance a user may obtain a physical book from a bookstore or a library. The user may read the book by manually flipping through its pages in conventional fashion.

A user may now also receive and consume some media items in electronic form. In one case a user may use a personal computer to connect to a network accessible source of media items via a conventional telephone or cable modem. The user may download a document from this source. The user may consume the document by printing it out and reading it in conventional fashion. Alternatively the user may read the document in electronic form that is by reading the book as presented on a computer monitor.

A provider of electronic media items faces various challenges. For instance many users continue to prefer consuming media items in traditional hard copy form even though these media items are available in electronic form. The provider confronts the task of capturing the interest of such users while providing a viable solution from a technical standpoint and a business related standpoint.

The same numbers are used throughout the disclosure and figures to reference like components and features. Series 100 numbers refer to features originally found in series 200 numbers refer to features originally found in series 300 numbers refer to features originally found in and so on.

According to one illustrative implementation this disclosure sets forth functionality for downloading items to a user device. The functionality may be manifested in various systems modules computer readable media data structures methods and other forms.

The item referenced above may correspond to any type of content. In one case the item corresponds to a digital media item. The media item may include without limitation text content image content audio content video content hypertext protocol content and so on or any combination of these kinds of content. In addition or alternatively the item may include instruction bearing content such as machine readable program code markup language content script content and so forth. For instance an item may correspond to a software upgrade or the like.

More specifically in one case the term item may refer to a specific unit of merchandisable content such as a book e.g. an eBook an issue of a magazine and so on. Alternatively an item may refer to smaller parts of a merchandisable unit such as a chapter of a book or a song in an album. Alternatively an item may refer to a larger compilation of component items which are related in any manner. For instance an item may refer to multiple issues of a magazine in a particular year.

The term entry corresponds to information which refers to an item. For example a list of entries may include reference information which identifies respective media items.

Certain drawings illustrate the features by showing various logic modules components functionality and so forth. The terms logic module component functionality and the like generally represent hardware software firmware or any combination of these elements or yet some other kind of implementation. For instance in the case of a software implementation the terms logic module component or functionality may represent instruction bearing content to perform specified tasks when executed on a processing unit or units e.g. a CPU or CPUs . The instruction bearing content may be stored in one or more machine readable media.

The term machine readable media or the like refers to any kind of media for retaining information in any form including various kinds of storage devices magnetic optical static etc. . The term machine readable media also encompasses transitory forms of representing information including various hardwired and or wireless links for transmitting the information from one point to another.

Other figures illustrate features in signal diagram form and or flowchart form. In this mode of explanation certain operations are described as constituting distinct tasks performed in a certain order. Such implementations are illustrative and non limiting. Separate operations described in these figures may be grouped together and performed in a single operation while certain single operations may be performed in multiple parts. Certain operations may be performed in an order different from the order illustrated in the figures. Certain operations may be performed by different agents than is identified in the figures. The operations shown in the figures may be implemented by software firmware hardware manual processing or other form or by any combination of these forms.

In general the various features described in the implementations may be regarded as optional features meaning that these features may be omitted or replaced with other features. Further the various implementations described herein may be supplemented by adding additional features.

As explained above the term item has broad connotation. The following list which is non exhaustive identifies representative types of items 

The item providing system IPS corresponds to any functionality or combination of functionality for forwarding items to the user device . In one case the IPS may correspond to network accessible server based functionality various data stores and or other data processing equipment. The IPS may be implemented by a single collection of functionality provided at a single physical site. Alternatively the IPS may be implemented by multiple collections of functionality optionally provided at plural physical sites. The IPS may be administered by a single entity or plural entities.

In one case the IPS corresponds to an entity which provides items to users upon the users purchase of the items. In this role the IPS may essentially act as a bookseller or the like. In one particular commercial environment the IPS may also offer services which allow users to purchase hard copy books for physical delivery to the users in this context the IPS may allow users to download electronic items to respective user devices as part of its entire suite of services. In other cases the IPS corresponds to an entity which provides items to users on a non fee basis or on the basis of some other type of alternative compensation arrangement. Thus the term a provider of items should be construed broadly to encompass educational institutions governmental organizations libraries non profit organizations and so on or some cooperative combination of any two or more entities.

The user device corresponds to any type of electronic processing device for receiving items from the IPS . In one implementation the user device is readily portable meaning the user may freely carry the user device from one location to another. In one particular case the user device is designed as a book reader device also known as an eBook reader device. In this case the user device functions as the electronic counterpart of a paper based book. The user may hold the user device in a manner similar to a physical book electronically turn the pages of the book and so on. Without limitation illustrates a particular type of eBook reader device. Additional details regarding this particular type of reader device are provided below. Alternatively the user device may correspond to any other type of portable device such as a portable music player a personal digital assistant PDA a mobile telephone a game module a laptop computer and so on and or any combination of these types of devices. Alternatively or in addition the user device may correspond to a device which is not readily portable such as a personal computer a set top box associated with a television a gaming console and so on.

A communication infrastructure bi directionally couples the IPS to the user device . Namely the IPS downloads items upgrades and or other information to the user device via the communication infrastructure . The IPS receives various instructions and other data from the user device via the communication infrastructure .

The communication infrastructure may include any combination of communication functionality including any combination of hardwired links and or wireless links etc. For instance to be discussed below in turn shows one implementation of the communication infrastructure which includes a combination of a wide area network WAN and wireless infrastructure. By virtue of the wireless component of the communication infrastructure the user may use the user device to purchase items and consume items without being tethered to the IPS via hardwired links. Thus for instance a user may purchase and consume an eBook using the device while riding in a car as a passenger while hiking in a park while boating on a lake and so forth.

In one case the notification message may correspond to a certain type of notification message used to commence voice mode interaction such as a telephone ring. In this case the notification message is also referred to as a Terrestrial Phone Home or a TelePhone Home TPH signal. It will be appreciated that the identifiers Terrestrial Phone Home TelePhone Home TPH etc. are arbitrary labels of convenience to facilitate explanation herein. The other messages may take the form of data mode messages. In one case the user device may be configured to receive and act on the TPH signal without actually formally answering the TPH signal. In other words the user device receives the TPH signal and does not make a voice connection but rather initiates steps to download items from the IPS . In some environments a wireless provider system may charge a fee when a call is answered but not if a user device is called and does not answer. Thus the strategy of ringing the user device without an answer may allow the IPS to communicate instructions to the user device without incurring a fee for the user device or the IPS .

The communication infrastructure includes multiple components. A first component is a wireless provider system . The wireless provider system corresponds to any infrastructure for providing a wireless exchange with the user device . In one case the wireless provider system is implemented using various data processing equipment communication towers and so forth not shown . Alternatively or in addition the wireless provider system may rely on satellite technology to exchange information with the user device . The wireless provider system may use any form of electromagnetic energy to transfer signals such as without limitation radio wave signals. The wireless provider system may use any communication technology to transfer signals such as without limitation spread spectrum technology implemented for instance using the Code Division Multiple Access CDMA protocol. The wireless provider system may be administered by a single entity or by a cooperative combination of multiple entities.

The communication infrastructure also includes a communication enabling system . One purpose of the communication enabling system is to serve as an intermediary in passing information between the IPS and the wireless provider system . The communication enabling system may be implemented in any manner such as without limitation by one or more server type computers data stores and or other data processing equipment. The communication enabling system may expose one or more Application Programming Interfaces APIs . The IPS may call on the APIs to perform various respective functions.

The communication enabling system communicates with the wireless provider system via a dedicated channel also referred to as a dedicated communication pipe or private pipe. The channel is dedicated in the sense it is exclusively used to the transfer information between the communication enabling system and the wireless provider system . In contrast the communication enabling system communicates with the IPS via a non dedicated communication mechanism such as a public Wide Area Network WAN . For example the WAN may represent the Internet.

The communication enabling system may serve as an adaptor. For instance assume that in one particular implementation the IPS acts as a data center which is set up to receive information via a wide area public network. Assume further the wireless provider system is set up to interact with clients via a private pipe. The communication enabling system interacts with the IPS via the wide area network and the wireless provider system via the private pipe thus accommodating the processing preferences of the IPS and the wireless provider system . By virtue of this intermediary role the communication enabling system may be referred to as a Mobile Virtual Network Enabler MVNE while the IPS may be referred to as a Mobile Virtual Network Operator MVNO .

In terms of a business paradigm the IPS may interact with the wireless provider system using a wholesale account. On this basis the IPS may pay the wireless provider system a fee based on the aggregate use of the wireless provider system by all of the user devices. The IPS may recoup these costs through fees charged to the end users. In this illustrative business scenario the wireless provider system does not send bills directly to the users who operate the user devices.

More specifically the wireless provider system handles an entire amount of communication traffic associated with all uses of its services. A subset of the entire amount of communication traffic represents IPS related communication traffic also referred to as merchant related communication traffic. The IPS related traffic represents the exchange of information occurring between the IPS and all of the user devices which interact with the IPS . The wireless provider system discriminates the IPS related traffic from other traffic based on unique key information associated with the IPS related traffic . The wireless provider system may prepare a bill based on the total amount of IPS related traffic . As noted above the wireless provider system may seek payment for its services from the IPS not the individual users of the devices.

The examples set forth above are representative other strategies may be used to exchange information between the IPS and the user device . In alternative cases for instance the system may be configured such that the wireless provider system does indeed recoup costs directly from individual users. Or the system may be configured such that the wireless provider system submits bills to either the IPS in aggregate or to the individual users at the option of the individual respective users.

The users may access the IPS through alternative communication routes which bypass the use the wireless provider system . For instance as indicated by alternative access path a user may use a personal computer or the like to access the IPS via the wide area network circumventing the wireless provider system and the communication enabling system . The user may download items through this route in conventional fashion. The user may then transfer the items from the personal computer to the user device e.g. via a Universal Serial Bus USB transfer mechanism through the manual transfer of a portable memory device and so on. This mode of transfer may be particularly appropriate for large files such as audio books and the like. Transferring such a large amount of data in wireless fashion may have a relatively high cost. However the system may also be configured to transfer large files such as audio files via the wireless exchange .

The system of also provides various security related features. According to one feature the system applies multiple layers of authentication. Namely the wireless provider system includes authentication functionality A to perform a first level of authentication. The communication enabling system provides authentication functionality A to perform a second level of authentication. The IPS provides authentication functionality A to perform a third layer of authentication. Each layer of authentication performs checking to ensure the user device currently attempting to interact with the IPS is duly authorized to access the IPS . The distributed nature of the authentication helps ensure someone who has obtained a user device through improper means cannot gain access to the services provided by the IPS .

According to another security related feature the system may provide various constraints which restrict the manner in which a user may use the device . For example the communication enabling system may be configured such that it will allow user devices to access only one or more predetermined addresses associated with the IPS . This means that in one case a user cannot use the user device to directly access a network accessible site without being first routed through the IPS . This prevents the user from using the user device as an unrestricted broadband interface to network accessible resources.

More specifically the IPS may include a web browsing proxy to be discussed below in greater detail . When the user attempts to access a network accessible resource the communication enabling system first directs the user to the browsing proxy module. The browsing proxy module may then either deny the request or accept the request by allowing the user to access the network accessible resource . The browsing proxy module may apply various rules to be discussed in determining whether to deny or accept the request to access the network accessible resource . In this manner the communication enabling system and the IPS do not permit the user to directly access the network accessible resources.

In another case the system may allow the user to directly interact with network accessible resources that is without being routed through the IPS .

Addressing the details of the IPS first this system performs various functions. Different modules are associated with these different functions. One module is a content reception system . The content reception system receives content from one or more sources of content . The sources may represent any type of provider of content such as eBook publishers newspaper publishers other publishers of periodicals various feed sources music sources and so on.

The sources may be administered by a single entity or may be administered by separate respective entities. Further the entity administering the IPS may correspond to a same entity which administers one or more of the sources . Alternatively or in addition the entity administering the IPS may interact with one or more different entities administering one or more respective sources . In the latter case the entity administering the IPS may enter into an agreement with the source entities to receive content from these source entities.

In the above example the entities associated with the sources may correspond to commercial organizations or other types of organizations. In another case one or more of the sources may correspond to individual users such as the creators of the items. For example a user may directly provide items to the IPS . Alternatively or in addition a user may supply content to a community repository of items and the IPS may receive content from this repository and so on.

The content creation system may obtain the content through various mechanisms. In one case the content reception system obtains the content via one or more networks . The networks may represent a WAN such as the Internet a Local Area Network LAN or some combination thereof. The content reception system may receive the information in various forms using any protocol or combination of protocols. For instance the content reception system may receive the information by making a Hypertext Transfer Protocol HTTP request by making a File Transfer Protocol FTP request by receiving a feed e.g. an RSS feed and so forth. In another case the IPS may obtain content via a peer to peer P2P network of sources . More generally the content reception system may proactively request the content in and on demand manner based on a pull method of information transfer . Or the content reception system may receive the content in response to independent transfer operations initiated and performed by the sources based on a push method of information transfer . Alternatively the content reception system may use a combination of pull and push transfer mechanisms to receive the content.

The content reception system may receive content in the form of items. Without limitation the items may include eBooks audio books music magazine issues journal issues newspaper editions various feeds and so forth. In one case the content reception system may receive some items expressed in a format not readable by the user device where the user device may optionally be configured to receive process and present content expressed in one or more predefined formats . To address this situation the content reception system may convert the items from their original format into a device readable format such as without limitation the .mobi format .

The content reception system stores the items received and optionally converts them to another format in a content store . The content store includes one or more storage systems for retaining items in electronic form located at a single site or distributed over plural sites administered by one or more entities.

Section B below provides additional information regarding the operation of the content reception system . By way of preview the content reception system includes separate modules for handling pre generated items such as eBooks subscription related items such as newspapers and personal items such as user supplied word processing documents etc. .

The IPS also includes a subscription module . The subscription module manages users subscriptions to subscription related items. Generally a subscription entitles a user to receive one or more subscription related items which are yet to be received and stored by the content reception system based on any type of consideration or combination of considerations. Without limitation subscription related item types include magazines journals newsletters newspapers various feeds and so forth. Users may arrange to receive subscription related items by purchasing such subscriptions or more generally by registering to receive such subscriptions which in some cases may not involve the payment of a fee . Alternatively or in addition the IPS may automatically register users to receive subscription related items without the involvement of the users and possibly without the approval of the users . The latter scenario may be appropriate in the case in which the IPS or some other entity registers a user to receive unsolicited advertisements newsletters and so on. The system may allow the user to opt out of receiving such unsolicited information.

The IPS may consult the subscription module to determine which user devices should receive a newly received subscription related item. For instance upon receiving an electronic issue of the magazine Forbes the IPS consults the subscription module to determine the users who have paid to receive this magazine. The IPS then sends the issue to the appropriate user devices.

An item delivery system represents the functionality which actually performs the transfer of content to the user device . In one illustrative representation the item delivery system includes two components a to do list server module and a content delivery module . The to do list server module generally provides instructions for the user device . The instructions direct the user device to retrieve items and perform other operations. The content delivery module allows the user device to obtain the items identified in the instructions received from the to do list server module .

More specifically in a first phase of information retrieval the to do list server module sends a notification message to the user device . As described above in one illustrative implementation the to do list server module may send the notification message as a telephone ring. The user device responds to the notification message by waking up if asleep which may involve switching from a first power state to a second power state where the second power state consumes more power than the first power state . The user device may optionally respond to the notification message without formally answering the signal which avoids or reduces a fee associated with the wireless message. The user device then contacts the to do list server module to request instructions from the to do list server module . More specifically for each user device the to do list server module maintains a list of entries also referred to herein as a to do queue. An entry provides an instruction for a user device to perform an action. As will be described in greater detail below there are different instructions that a device may be directed to perform wherein a collection of instructions defines an IPS device interaction protocol. One such action e.g. associated with a GET instruction of the protocol directs the user device to retrieve an item from a specified location e.g. by specifying an appropriate network address e.g. a URL and appropriate arguments. In the first phase the user device generally retrieves n such entries wherein n is an integer. In one scenario the number n may be a subset of a total number of items in the to do queue associated with the user device . In a second phase of the downloading procedure the user device contacts the content delivery module to retrieve one or more items identified in the GET related entries.

In general after receiving the notification message which may be implemented as a telephone ring the item delivery system interacts with the user device in a data mode e.g. using the Hypertext Transfer Protocol HTTP or some other protocol or combination of protocols. The downloading procedure is described in additional detail below for instance in the context of the explanation of .

The IPS also includes a merchant store module . The merchant store module provides access to an item catalog which in turn provides information regarding a plurality of items such as eBooks audio books subscription related items and so on . As will be described in greater detail below the merchant store module includes functionality allowing a user to search and browse though the item catalog . The merchant store module may also include functionality allowing a user to purchase items or more generally acquire items based on any terms . In one case a user may interact with the merchant store module via the user device using wireless communication. Alternatively or in addition the user may interact with the merchant store module via another type of device such as a personal computer optionally via wired links. In either case when the user purchases or otherwise acquires an item via the merchant store module the IPS may invoke the item delivery system to deliver the item to the user.

The IPS also includes a personal media library module . The personal media library module stores for each user a list of the user s prior purchases. More specifically in one case the personal media library module provides metadata information regarding eBook items and other on demand selections e.g. a la carte selections such as subscription issues etc. which a user already owns. The personal media library module also provides links to the items in the content store . As will be described in greater detail below to download an eBook item or the like which the user has already purchased the user device contacts the content delivery module . The content delivery module interacts with permission information and linking information in the personal media library module in order to download the item to the user. In one use scenario the user device may access the content delivery module in this manner to initiate downloading of an item which has been previously purchased by the user but has been deleted by the user device for any reason.

The IPS also includes a browsing proxy module . The browsing proxy module allows the user to access one or more network accessible resources via a browser module to be discussed below resident on the user device . As explained in the context of when the user requests access to a particular network accessible resource the system first directs the user to the browsing proxy module . The browsing proxy module may then apply various environment specific business rules to determine whether or not to grant such access and if granted under what terms to grant such access. Through this mechanism in one implementation the user is precluded from directly accessing the network accessible resources using the user device .

The IPS also includes various security related features such as one or more authorization stores . The authorization stores provide information which enables various components of the IPS to determine whether to allow the user to perform various functions such as access the merchant store module download items change settings and so on.

The above enumerated list of modules is representative and is not exhaustive of the types of functions performed by the IPS . As indicated by the label Other Server Side Functionality the IPS may include additional functions many of which are described below.

Now turning to the device side features of the system the user device includes a device to do list processing module . The purpose of the device to do list processing module is to interact with the item delivery system to download items from the item delivery system . Namely in a first phase of the downloading procedure the device to do list processing module first receives a notification message from the to do list server module which prompts it to wake up if asleep and contact the to do list server module to retrieve a set of n entries. Each entry includes an instruction which directs the device to do list processing module to perform an action. In a second phase for a GET type entry the device to do list processing module contacts the content delivery module to request and retrieve an item identified by the GET type entry. As will be described in greater detail below the user device signals a successful completion of the download process or a failure in the download process.

Upon downloading an item the user device stores the item in a device side memory which in one example is a flash type memory and may be any other type of memory in other examples. Although not shown the user device may also exchange information with any other source of content . In one illustrative case the other source of content may represent a personal computer or other data processing device. Such other source of content may transfer an item to the user device via a Universal Serial Bus USB connection and or any other type s of connection s . In this scenario the other source of content in turn may receive the item from the IPS or other source via hardwired connection e.g. non wireless connection . For example to receive an audio book the user may use a personal computer to non wirelessly download the audio book from a network accessible source of such content. The user may then transfer the audio book to the user device via USB connection. In another illustrative case the other source of content may represent a portable memory module of any type such as a flash type memory module a magnetic memory module an optical memory module and so on.

The user device also includes a reader module . The illustrative purpose of the reader module is to present media items for consumption by the user using the user device . For example the reader module may be used to display an eBook to the user to provide a user experience which simulates the reading of a paper based physical book.

The user device also includes a content manager module . The purpose of the content manager module is to allow the user to manage items available for consumption using the user device . For example the content manager module allows the user to view a list of items available for consumption. The content manager module also identifies the sources of respective items one such source corresponds to the device memory another source corresponds to an attached portable memory e.g. represented by the other source another source corresponds to items identified in the personal media library module as may be revealed in turn by device side metadata provided by the IPS another source corresponds to subscription related items identified by the subscription module and so on. The content manager module allows the user to filter and sort the items in various ways. For example the user may selectively view items which originate from the device store .

The user device also includes a store interaction module . The store interaction module allows the user device to interact with the merchant store module . The user may engage the store interaction module to search and browse through items to purchase items to read and author customer reviews and so on. As described above the user may also use a personal computer or the like to interact with the merchant store module via hardwired links.

The above enumerated list of modules is representative and is not exhaustive of the types of functions performed by the user device . As indicated by the label Other Device Side Functionality the user device may include additional functions many of which are described below. In fact shows additional device side functionality. For completeness also identifies the various modules described above including the device to do list processing module the device memory the reader module the content manager module and the store interaction module . These features perform the functions described above.

The user device may also include searching and indexing functionality . The indexing aspect of this functionality provides a mechanism for indexing an item received from the IPS and or for interacting with an index generated and supplied by the IPS or by some other source. An index for a particular item such as an eBook or newspaper edition identifies the component parts e.g. words in the item linking the component parts to their respective locations in the item. The searching aspect of the functionality provides a mechanism for searching for identified components e.g. words phrases etc. in an item and for performing other search related functions. The searching aspect relies on the indexing aspect. Section E provides additional information regarding the operations performed by the searching and indexing functionality .

The user device also may include an annotation module . The annotation module allows a user to create annotations to supplement a particular item. For instance the user may create one type of annotation to mark a page thus acting in the manner of a bookmark. The user may create another type of annotation highlighting a portion of the item such as a word phrase sentence etc. in an eBook. The user may create another type of annotation by adding one or more notes to an item. Generally the annotation module may store annotation information which identifies the types of annotations created the locations within the item associated with the annotations the content of the annotations e.g. in the case of note type annotations and so on.

More specifically the user device may locally store the annotations. Further the IPS may optionally store the annotations in a backup store this allows the user to download the annotations in the event they are deleted from a device side store. Wherever stored the user device may restore the annotations upon presentation of the corresponding item which is the target or subject of the annotations. For example when a user accesses an eBook which has been annotated on one or more prior occasions the annotation module may access the annotation information and display the user s annotations within the text. The annotation module may also perform a related function allowing a user to identify and extract e.g. clip one or more portions of an item and store such portions in a clipping file. In one illustrative case clippings are stored as unencrypted text files. In one case the annotations can be associated with a particular entity such as a user. Alternatively or in addition the annotations can be associated with a copy of the annotated item such as an eBook.

The user device also includes a home presentation module . The home presentation module provides a home page when the user first turns on the user device and or at other junctures. The home page may act as a general portal allowing a user to access media items and various features provided by the user device . In one illustrative case the home page may present a summary of some or all of the items available for consumption using the user device .

The user device also includes an audio play module . The audio player module provides an interface which allows the user to play back and interact with audio items such as music audio books and the like.

The above described features of the user device pertains to applications with which the user may interact or which otherwise play a high level role in the user s interaction with the user device . The user device may include a number of other features to perform various lower level tasks possibly as background type operations.

Power management functionality performs one such background type operation. More specifically the power management functionality corresponds to a collection of hardware and or software features operating to manage the power consumed by the user device . The power management functionality generally operates to reduce the power consumed by the device . The power management functionality achieves this goal by selectively powering down features not actively being used or for which there is an assumption these features are not actively being used . The power management functionality achieves particularly noteworthy power savings by powering down features which make large power demands such as one or more features associated with wireless communication. Section F provides additional information regarding the operation of the power management module .

The user device also includes performance Monitoring and Testing MT functionality . The MT functionality maintains a performance log identifying the behavior of the device . The IPS and or other entities may access the performance log along with other information gleaned from the communication infrastructure to help diagnose anomalies in the operation of the user device and the system as a whole. The MT functionality may also interact with testing functionality provided by the IPS and or other entities. For example the MT functionality may respond to test probes generated by the IPS in a manner described in further detail below in Section C.

The user device also includes an upgrade related functionality . The upgrade related functionality allows the user device to receive and integrate instruction bearing update items such as software updates . In one case the upgrade related functionality may automatically receive instruction bearing items provided by the IPS and or by other entities . An administrator at the IPS may manually initiate the upgrade procedure by which an instruction bearing update item is forwarded to the user device . Or an automated IPS side routine may initiate the upgrade procedure. In any event the user device may receive the instruction bearing update item without the involvement of the user or with minimal involvement from the user. In this sense the upgrade procedure may be viewed as transparent. In another case the upgrade related functionality may be operated by the user to manually access a source of instruction bearing items such as a prescribed website or the like and download an item from this source.

In one implementation the upgrade related functionality may forward version information to the IPS . The version information identifies the version of the instruction bearing content being used by the user device . The IPS may determine whether this version information is out of date by reference to current version information . If out of date the IPS may react appropriately e.g. by downloading an instruction bearing item to the user device . Section C provides additional information regarding the operations performed by the upgrade related functionality .

To repeat the above enumerated list of modules is representative and is not exhaustive of the types of functions performed by the user device . As indicated by the label Other Device Side Functionality the user device may include additional functions.

The IPS described above may interact with any type of user device . In one case the user device is a portable type device meaning a device designed to be readily carried from location to location. In one specific case the user device allows the user to consume the media items while holding the user device e.g. in a manner which simulates the way a user might hold a physical book. A portable user device may take the form of an eBook reader device a portable music player a personal digital assistant a mobile telephone a game module a laptop computer and so forth and or any combination of these types of devices. Alternatively or in addition the user device may correspond to a device not readily portable such as a personal computer set top box associated with a television gaming console and so on.

Without limitation shows one type of user device which may be used to interact with the IPS . The user device may include a wedge shaped body designed to fit easily in the hands of a user generally having the size of a paperback book. Other user devices may adopt different shapes and sizes.

In one representative design the user device includes two display parts a main display part and a supplemental display part . The main display part presents various pages provided by the store interaction module the reader module the browser module and so on. In one case the supplemental display part is used to present a cursor. The user may position the cursor to identify laterally adjacent portions in the main display part . Without limitation in one illustrative case the main display part and or the supplemental display part may be implemented using electronic paper technology such as provided by E Ink Corporation of Cambridge Mass. This technology presents information using a non volatile mechanism using this technology the user device may retain information on its display even when the device is powered off.

The user device includes various input keys and mechanisms. A cursor movement mechanism allows a user to move a cursor within the supplemental display part . In one representative case the cursor movement mechanism may include a cursor wheel that may be rotated to move a cursor up and down within the supplemental display part . The cursor movement mechanism may be configured to allow the user to make a selection by pressing down the wheel. Other types of selection mechanisms may be used such as a touch sensitive display a series of vertically and or horizontally arrayed keys along the edge s of the main display part one or more graphical scroll bar s in the main display part and so on.

The user device also includes various page turning buttons such as next page buttons and a previous page button . The next page buttons advance the user to a next page in an item relative to a page that is currently being displayed . The previous page button advances the user to a previous page in an item relative to a page that is currently being displayed . The user device may also include a page turning input mechanism actuated by the user s thumb as it passes over the mechanism . This user experience simulates the manner in which a user turns a page in a physical book e.g. by thumbing through a book . The user device may also include a back button allowing the user to advance to a previous page when using the browsing module . Although not shown the user device may include a switch for turning power on and off a switch for enabling and disabling a wireless interface and so on.

The user device may also include a keyboard . The keyboard may include alphanumeric keys. The keys may be shaped and oriented in a manner which facilitates the user s interaction with the keys while the user holds the device in the manner of a physical book. The user may use the keyboard to enter search terms annotations URLs and so forth. The keyboard may also include various special function keys.

In operation the user may operate the cursor movement mechanism so that the cursor is laterally aligned with a desired selection point such as selection point as shown in . In the case in which the cursor movement mechanism is a cursor wheel the user may rotate the wheel to move the cursor to a desired location along the vertical extent of the supplemental display part . In this implementation the user may then press down on the cursor wheel to formally select the item corresponding to the selection point .

Additional information regarding one representative type of book reader type device may be found in the following family of applications 

To repeat the user interface design shown in is representative. Other types of user devices having different types of user interface mechanisms may be used to interact with the IPS .

Various aspects of the systems shown in and may be implemented by one or more data processing devices. For example various components of the IPS may be implemented by respective server type computers and associated data processing equipment e.g. routers data storage devices etc. . The user device may also correspond to a data processing device. shows an overview of a generic data processing device which may be used to implement any aspect of the above referenced systems including any server side features and or any device side features.

The processing device includes one or more processing units such as one or more CPUs. The processing device also includes system memory which may correspond to any combination of volatile and or non volatile storage mechanisms. The system memory may store information which provides an operating system component various program modules program data and or other components. The processing device performs functions by using the processing unit s to execute instructions provided by the system memory . The processing device may also include one or more types of removable storage and one or more types of non removal storage .

The processing device may also include one or more input devices keyboard mouse device specialized selection keys etc. and one or more output devices displays printers audio output mechanisms etc. .

The processing device may also include one or more communication interface mechanisms . These communication interface mechanisms allow the processing device to interact with other processing devices such as remote computers book reader devices and so forth. The communication interface mechanisms may include one or more wireless interface mechanisms . In the case where the processing device represents the user device the wireless interface mechanisms may allow the user device to receive a telephone ring and also communicate with the IPS in a data mode.

The above enumerated list of modules is representative and is not exhaustive of the types of functions performed by the processing device . As indicated by the label Other Device Functionality the processing device may include additional functions.

As explained in the above sections the item delivery system of the IPS interacts with the device side to do list processing module to download items from the content store of the IPS . The item delivery system in turn includes two components a to do list server module and a content delivery module . The to do list processing module interacts with the to do list server module to download entries where the entries identify items to be retrieved from the IPS . The to do list processing module interacts with the content delivery module to retrieve the actual items identified by the entries. provides additional information regarding one protocol for downloading items from the IPS to the user device . The protocol is illustrative it may be varied in various ways to suit different environments.

In operation 1 the IPS s content reception system receives and stores content in the content store . The content reception system may perform this operation in response to receiving a new eBook or other pre generated item. Or the content reception system may perform this operation in response to receiving a new subscription related item. Or the content reception system may perform this operation in response to receiving a personal document forwarded by the user. Still other scenarios are possible.

In operation 2 an entry is added to an appropriate queue of the to do list server module . In the case of the selection e.g. purchase of an eBook the merchant store module adds an entry to the to do list server module corresponding to an instruction to acquire the selected eBook. In this case operation 2 occurs asynchronously with respect to operation 1 meaning that these two operations are not part of a linked integral transaction. Although not shown in this overview figure the user s purchase of an eBook or other a la carte selection such as a subscription issue etc. also prompts the IPS to store information regarding the user s purchase in the media library module . In the case of the receipt of a subscription related item the item reception system in conjunction with the subscription module add an entry to the to do list server module . In this case operation 2 occurs in response to operation 1 and thus these operations may be viewed as part of a single transaction. For the receipt of a new issue of a subscription the subscription module represents the user s ownership of the issue by virtue of the user s prior purchase of the subscription in the manner to be described in greater detail below. In the case of a personal item the functionality dedicated to receiving converting and storing the user s personal item may optionally add an entry to the to do list server module if in fact the user has opted to receive the document via a wireless communication route instead of an alternative non wireless mode of delivery .

In operation 3 the to do list server module sends a notification message to the device s to do list processing module . In one illustrative case the notification message may be implemented as a telephone ring also referred to herein as a TelePhone Home TPH signal. All subsequent communication between the item delivery system and the to do list processing module operates in a data mode e.g. using the HTTP protocol or some other protocol or combination of protocols.

In operation 4 the device s to do list processing module will wake up if it happens to be asleep at the time and respond to the TPH signal. The notification process may involve switching from a first power state to a second power state where the second power state consumes more power than the first power state. Upon waking up the to do list processing module sends a message to the to do list server module which requests the to do list server module to forward a list of n entries such as without limitation 10 entries. The n entries may represent a subset of entries in the list maintained by the to do list server module for the user device . The to do list server module responds to this request by forwarding the list of up to n entries.

As described above each entry provides an envelope which conveys an instruction. One such type of instruction commands the user device to retrieve an item from the IPS . There are other types of instructions which will be described in Section B. In operation 5 assuming that one or more entries of the n entries retrieved from the to do list server module correspond to GET instructions the to do list processing module sends a request to the content delivery module asking this module to download the items identified in the GET instructions.

In operation 6 the content delivery module responds to the request for the items by attempting to retrieve the items from the content store . If the content delivery module is successful it forwards the requested items to the user device which may be considered as part of operation 5 as illustrated in . In some circumstances such as in the case of feeds the content delivery module may attempt to retrieve and download a delta file which expresses the difference between a current version of requested content and a prior version of the content where the user device already locally possesses the prior version. So as not to unduly complicate this introductory discussion the details of the incremental updating operation will be provided in a later part of this description.

Operation 6 may also involve various permission checking steps. For example for the case of eBooks and other a la carte selections the content delivery module may consult the personal media library module to determine whether the user has authorization to receive the item. In the case of subscription related items the content delivery module may consult the subscription module to determine whether the user has authorization to receive the item e.g. by determining whether the user is generally authorized to receive issues of a particular subscription . So as not to unduly complicate the signal flow associated with permission checking is omitted although this detail will be provided in later figures and accompanying description.

In operation 5 the content delivery module may also download various hints to the user device . One such hint informs the user device whether the IPS stores an index corresponding to the requested item. For instance the IPS may have generated this index when it initially received the item or at some other juncture. Another hint informs the user device of whether the IPS stores annotations for the requested item. These annotations may correspond to information created by the user and backed up by the IPS on one or more prior occasions. The user device uses the hints to determine whether it is worthwhile to even request the IPS to deliver the search index and or annotations for the requested item. Namely if the content delivery module informs the user device that it does not have a search index then it is not a useful exercise to request the index. The use of hints eliminates the need for the user device to conduct a potentially over the air sluggish question and response procedure to determine whether the IPS stores index information and or annotation information.

Assume the user device is informed by the hints that the IPS does indeed have either or both a search index and backup annotations. In operation 7 the to do list processing module requests and receives this type of supplemental information.

In operation 8 the to do list processing module stores the item and optionally the supplemental information in the device memory .

In operation 9 the to do list processing module sends a remove message to the to do list server module . This message informs the to do list server module that the user device has successfully retrieved a subset of identified items from the IPS and that the to do list server module may consequently remove these items from the appropriate queue. In operation 10 the to do list server module may acknowledge receipt of the remove message sent to it by the user device .

The retrieved n entries may correspond to only a subset of a more encompassing list of items maintained by the to do list server module . If this is the case the to do list processing module repeats the above described operations by retrieving up to another n entries and receiving the items identifies by these entries from the content delivery module .

Although not shown upon the occurrence of an error in the download process the user device can convey error information to the IPS and or vice versa.

Having set forth an overview of the system in Section A this section explains various components of the system in greater detail. While the components may be used in the context of the overall system described above the components may also be used in other types of systems.

As described above the content reception system receives items from one or more sources and if appropriate converts the items into a device readable format. Such conversion is also referred to as content creation herein in a liberal sense because the conversion process does not produce the content ex nihilo. The content reception system may include separate modules for handling pre generated items such as eBooks subscription related items and personal items. Namely the content reception system includes an eBook processing module a subscription related processing module and a user supplied processing module .

The eBook processing module receives processes and stores items users typically select in an on demand manner. In one scenario for example the eBook processing module may receive a new eBook from a publisher source or other type of source convert this item into a desired format and store this item in the content store . The processing performed by this module may also involve creating a search index for the newly received item creating a detail page for this item and so on. Users may then some time after the eBook item is stored purchase this item thus initiating the downloading of the item to the user. The eBook reception process is decoupled from the downloading process meaning that these two operations occur asynchronously.

The subscription related processing module receives processes and stores items on a subscription related basis. In one representative case a user may purchase a subscription which entitles the user to receive future issues editions installments etc. of a subscription related item such as future issues of a magazine journal newsletter newspaper blog feed and so forth. The reception process in this case is linked to the downloading process meaning that the receipt of a new subscription related item triggers the downloading of this item to users who have registered to receive this item.

In a variant of the subscription related reception operation the subscription related content processing module may automatically establish user subscriptions and deliver items in accordance with these subscriptions potentially without the involvement and or approval of the users. This feature may be useful to provide advertisements to users to notify the users of various alerts and other events and so on. As another example the user may expressly purchase one or more types of subscriptions and in response the subscription related content processing module authorizes the dissemination of the expressly purchased subscriptions as well as one or more other subscriptions which the user did not expressly purchase . In still another case a user may subscribe to a single publication of an item such as when the user pre purchases an item which has yet to be published when the item is published the subscription related processing module will be invoked to deliver the item to the users who have pre purchased this item.

The user supplied processing module creates items originally supplied by a user. In other words in a first phase the user supplied processing module receives an item from a user. The item may correspond to any kind of personal document such as a word processing document a PDF document and so on. In a second phase the user supplied processing module converts this item into a device readable format and then forwards the converted item back to the user. The user may consume the converted item using his or her user device .

Any of the content processing modules may rely on one more conversion tools . Each conversion tool provides functionality for converting content from an original format into a defined target format. For instance a .mobi conversion tool converts content from an original format into a .mobi format. Other tools . . . convert an item from an original format into other respective types of device readable formats. In one case the conversion tools accept items in a predefined number of acceptable original formats. Without limitation in one illustrative implementation the acceptable original formats may include Adobe PDF format TXT format HTML format rich text format RTF Microsoft Word document format DOC and so on. Acceptable formats for images may include without limitation JPEG format GIF format PNG format BMP format and so on.

More specifically the subscription module identifies subscriptions available as respective parent type nodes. When a particular issue of a subscription is received and processed the subscription module associates this issue as a child node of a corresponding parent subscription. Assume a user purchases a particular subscription at that time the user is associated with a particular parent node corresponding to the subscription. In additional or alternatively a subscription can be associated with a device or other entity. Further in one implementation the subscription module manages each user s ownership of issues of this subscription by relating the user to the parent subscription rather than individual issues of the subscription.

The subscription management module also interacts with the content delivery module to inform the content delivery module whether a user has appropriate authorization to download a subscription related item for the case of an item received as per the terms of a subscription rather than an a la carte selection of a subscription item . In one case such permission checking takes place on a per subscription basis not on a per issue basis unlike in one particular implementation the case of eBooks and other a la carte selections in which permission checking takes place on a per item basis .

In addition to content produced by the content reception process supplemental information may be associated with items. One such type of supplemental information is index information. Another type of supplemental information is annotation information. provides an overview of functionality for producing such supplemental information.

As to the creation of device indexes the IPS may provide server side index generating functionality . The server side index generating functionality may include a server side index generating module for generating an index. The server side index generating module stores the index generated in a server side index store . The user device may include a device side index generating functionality for generating an index. Thus both the IPS and the user device have the ability to generate an index for an item.

Various rules may be used to determine whether an index will be provided by the server side index generating functionality or the device side index generating functionality . According to one consideration the user device will attempt to generate the index using the device side index generating functionality but if this process proves to be too slow the user device may request the server side index generating functionality to generate the index. Section E provides details regarding additional considerations which may impact the manner in which the system generates an index for an item.

As to the creation and handling of annotations the user uses a device side annotation generating functionality to create annotations for a particular item. The device side annotation generating functionality may be considered synonymous with the annotation module introduced in . The user may create bookmark type annotations highlight type annotations note type annotations clipping type content selections and so on. The user device may also create a last page read position. This type of annotation identifies the last position at which an item was opened. The device side annotation generating functionality may store the annotations in any device side store. The user device may retrieve and recreate these annotations when it displays the corresponding item. For instance when the device reopens the item the user device may show the same page the user was viewing when the device was closed.

The system may also rely on server side annotation handling functionality for storing a backup of the annotations created by the user at the user device . The server side annotation handling functionality may include a module of the same name for receiving annotations from the user device at various times. In one case the user device may forward annotations to the IPS as part of a cycle of operations it performs when various events occur. Such events may include any opportunity the device has to interact with the IPS e.g. in response to the receipt of a TPH signal etc. . The server side annotation handling module may store the annotations it receives from the user device in a server side annotation backup store .

If the IPS stores backup annotations it may notify the user device of this fact by providing hint information to the user device . The hint information accompanies an item forwarded from the content delivery module to the user device. If the hint indicates that backup annotations are available the user device may choose to download the annotations. The user device may want to receive these annotations in the event that the local store of these annotations has been deleted and so forth.

The remainder of Section B.1 provides more information regarding the processes for receiving and processing eBooks and other pre generated items subscription related items and personal items.

Starting with this figure is a signal flow diagram illustrating one way to receive and process eBook items and other pre generated items. In operation 1 the eBook processing module receives an eBook or the like from a publisher or other source. The eBook processing module may optionally convert the eBook item to a device readable format create an index for this item and or create a detail page which represents this item in the merchant store module .

In operation 2 the eBook processing module stores the item and its supplemental parts in the content store .

In operation 3 the user may operate the device side store interaction module to purchase or otherwise acquire the eBook from the merchant content store .

In operation 4 the eBook processing module may store salient information in the media library module which indicates the user has purchased the eBook or other a la carte item. As will be described in greater detail below the content delivery module may consult the media library module at the time of delivery of the item to determine whether the user is authorized to receive the item e.g. to determine whether the user has actually purchased the item .

In response in operation 5 the merchant store module may add an entry corresponding to the purchased item in the user s to do list. This action prompts the to do list server module to immediately or some time after send a TPH signal to the user device notifying the user device that an instruction is outstanding to acquire an item.

The top half of the signal diagram corresponds to a creation phase of the operation in which a new eBook is received and processed. The bottom half of the signal diagram corresponds to a delivery phase of the operation in which a user purchases and receives a previously stored item. The creation phase precedes the delivery phase but these two phases are not otherwise linked together.

In block the eBook processing module receives a new item e.g. from a publisher of items or some other source.

In block the eBook processing module optionally converts the new item into a device readable format that is assuming the item is not already expressed in a device readable format.

In block the eBook processing module optionally creates an index for the item an item detail page and or other supplemental information associated with the item.

In block the eBook processing module stores the converted item and any supplemental information associated with the item.

In block the eBook processing module stores purchase information in the media library module . This information identifies the user has purchased a particular eBook or the like.

In block the merchant store module or some other server side module adds an entry to the device s to do queue in the to do list server module . This entry contains an instruction which instructs the user device to retrieve the purchased item.

Block generally references an item delivery procedure which is invoked to download the item. Later figures describe this operation in greater detail.

In operation 2 the subscription related processing module stores the received subscription related item in the IPS content store . Although not shown in in the subscription module the new issue is identified as a child node of a corresponding parent subscription. As explained above in one case permission checking at the time of delivery proceeds on a general subscription level basis rather than on a per item e.g. per issue basis. However if the user has made a separate selection of a subscription related item e.g. an a la carte selection then the above described eBook permission checking is used to govern access to the item.

In operation 3 the subscription related processing module consults the subscription module to determine the users who should receive the newly received subscription related item.

In operation 4 the subscription related processing module may store an entry in each of the to do queues of the identified subscribing users.

In block the subscription related processing module receives a new subscription related item such as a magazine issue a newspaper edition a feed item and so on.

In block the subscription related processing module converts the received item into a device readable format if appropriate and optionally produces supplemental information such as a device index.

In block the subscription related processing module stores the received and potentially converted subscription related item in the content store .

In block the subscription related processing module consults the subscription module to determine the users who should receive the subscription related item.

In block the subscription related processing module provides an entry in each of the to do queues of the users who will be receiving the subscription related item.

Block generally references an item delivery procedure which is invoked to download the item. Later figures describe this operation in greater detail.

In one implementation the user supplied processing module is configured such that it will only accept an Email message from the user from one or more pre authorized Email addresses. In one case the user is allowed to select the Email address es in a configuration procedure e.g. via one or more configuration user interface pages thereby establishing a permitted list of Email addresses. The user supplied processing module may initially provide a default Email address which may be used by the user the user may later change or supplement this default Email address. Placing restrictions on the permissible Email addresses is potentially useful to eliminate or reduce the amount of unwanted items forwarded to the user. Unwanted items may be particularly pernicious in the case in which the user is charged an over the air delivery fee to receive these items. However in another implementation the user supplied processing module may not place any restrictions on the Email addresses that may be used to forward personal items to the user supplied processing module .

In operation 2 the user supplied processing module may receive and process the received message in the event that the message originates from an address identified on the permitted address list . Such processing may involve interpreting the message to identify the source of the message the target destination that the converted item s will be sent to and or other salient information regarding the message. The processing also involves extracting the personal item s from the message and converting the item to a device readable format. In the case that one or more personal items are packaged in a ZIP file or the like the extracting operation may involve removing one or more personal items from this package file.

The above described processing operation may wholly succeed wholly fail or partially succeed and partially fail . A partial failure may occur when the Email message contains multiple personal items as attachments and the user supplied processing module is successful in converting some of these items but not others. For instance the unsuccessfully converted items may be expressed in an unsupported original format. In operation 3 the user supplied processing module may notify the Email sender of any type of failure either total failure or partial failure . In the case of a partial failure the user supplied processing module may continue processing the successfully processed item s e.g. by delivering these items to the user.

The user may select at least two delivery options to receive the converted personal item s . In a first option the user may request that the converted personal item s be forward to the user in wireless form. If this is the case in operation 4 the user supplied processing module adds an entry to the user s to do queue in the to do list server module . In a second option the user may request that the converted personal item s be made available to the user via a non wireless route. For example the user may request that the converted item s be sent to the user in an Email form. The user may extract the converted personal item s from the Email message and then transfer the converted personal item s to the user device via hardwired link such as via USB connection. Or the user may request that the converted item s be posted to a network accessible site. The user may access this site using a personal computer or like mechanism download the converted item s over non wireless infrastructure and then transfer the converted item s to the user device via USB connection or other mechanism. Operation 5 generally represents the delivery of one or more personal items via a non wireless route. A user may generally prefer to the use the non wireless route to avoid the possible expense of downloading content over the air.

In block the user supplied processing module receives a message from the user such as an Email message which includes an attached user supplied item or plural items .

In block the user supplied processing module determines whether the message originates from a permissible address by consulting the permitted address list. If so permitted the user supplied processing module parses and interprets the message as well as extracts the personal item s attached thereto. Extracting the items may involve removing the items from a package file of any kind.

In block the user supplied processing module converts the personal item s to a device readable format if in fact the personal item s is are not currently in such a format. The user supplied processing module can rely on a single mechanism to perform this conversion alternatively the user supplied processing module can rely on any one or more of multiple available conversion mechanisms. For instance the user supplied processing module can select a conversion mechanism that it deems to be the most suitable for converting a particular type of item in addition or alternatively a user may forward instructions that identify one or more mechanisms to be applied to a particular item. In one case if the user supplied processing module is not successful in processing the item using one type of conversion mechanism it can try another conversion mechanism and so on.

In addition or alternatively conversion may optionally involve resizing the personal item into a form that better accommodates presentation of the converted item by a user device. That is this provision may make the converted item more readable when presented on the device.

In addition or alternatively conversion may involve rotating the personal item e.g. by 90 degrees to again better accommodate presentation of the converted item by the user device.

In addition or alternatively conversion may involve breaking up the personal item into multiple parts for presentation on the user device in multiple pages. For example as shown to the rights of block the user supplied processing module may rotate the personal item by 90 degrees and then break it up into multiple parts. This operation may be appropriate for certain personal items that have large images for example PDF documents with scanned page images . Again this provision may make the converted item more readable when presented on the device.

In block the user supplied processing module determines what route the user wishes to use to receive the converted personal item s . In one case the determination performed in block may be implied. For instance the user supplied processing module may provide a first Email address for receiving items that are to be sent over a wireless route once converted. The user supplied processing module may provide a second Email address for receiving items that are to be sent over a non wireless route. If the user sends the personal item s to the first Email address then it is understood that the user wishes to receive the converted item via a wireless route. If the user sends the personal item s to the second Email address then it is understood that the user wishes to receive the converted item s via a non wireless route. In another case the user supplied processing module may provide a single Email address for receiving personal items. The user supplied processing module may discriminate the selected delivery route by interpreting instructions provided in the message itself and so on.

Assume that the user has selected a wireless delivery route. In this case in block the user supplied processing module adds an entry to the user s to do queue in the to do list server module .

Block generally references an item delivery procedure which is invoked to download the item s . Later figures describe this operation in greater detail.

Next assume that the user has selected a non wireless delivery route. In block the user supplied processing module makes the converted item s available to the user through an alternative transfer mechanism such as Emailing the converted item s back to the user posting the converted item to a network accessible site and so on.

As indicated in block the user supplied processing module may ascertain whether there are any failures in the processing of the item s . If so in block the user supplied processing module sends an error notification message to the sender. If there is only a partial failure then processing proceeds with respect to the item s that may be successfully processed.

This section provides additional information regarding an illustrative composition and operation of the to do list server module . Recall that the to do list server module operates by sending instructions to the user device thereby instructing the user device to retrieve items and perform other actions.

The to do server module includes a to do list receiving module . The to do list receiving module receive entries from various sources such as the various processing modules described in the previous section. For instance the to do list entry receiving module may receive an entry when a user purchases an eBook or like content when a subscription related item is received when the user sends a personal document to the IPS and so on. All of these events cause the generation of a GET type entry which serves as an instruction for the user device to download the item corresponding to the GET type entry. Other IPS side modules may add a GET type entry to a queue to notify the user device that it should download an item that provides an instruction bearing upgrade.

Other types of entries may convey different types of instructions. In one case an entity within the IPS may generate a delete DEL instruction which instructs the user device to delete an item that it may have previously received and stored in its device memory . In one circumstance the user may have purchased an item which prompted the generation of a GET type entry. But later it may be determined that the user s credit standing is deficient precluding the purchase of the item. In this case an appropriate entity in the IPS such as the merchant store module may add a DEL type entry to the user s to do queue.

In another case an appropriate entity in the IPS such as monitoring and or testing functionality may add a command e.g. a PUT instruction to a user s to do queue to request the user device to forward performance logs and or other information to the monitoring and or testing functionality.

In another case an appropriate entity in the IPS may add information to the to do queue which prompts the user device upon receipt of this entry to display information to the user e.g. in a pop up form or other type of alert related form.

The IPS may add yet additional types of instructions to the users to do queues to suit different applications and environments.

The to do list server module may include to do list stores for maintaining a plurality of to do lists also referred to as to do queues. More specifically the to do list server module may maintain different queues for respective user devices such as a to do list A for user device A a to do B for user device B and so on. A user device interacts with its own respective to do list as represented by the dashed line box in which indicates that the entries in mailbox store A are designated for user device A.

The to do server module also includes a device interaction module . The purpose of the device interaction module is to allow the to do server module to interact with the device side to do list processing module . The device interaction module includes a notification module . The notification module forwards a notification message to user device e.g. in the form of a ring type TPH signal. The device interaction module thereafter interacts with the user device in a data mode. Namely the device interaction module receives the user device s request for a list of n entries in the user s to do queue upon which the device interaction module provides this list. The device interaction module may later receive the user device s instruction to remove one or more entries from the list indicating that the user device successfully downloaded the items associated with the those entries.

The to do list server module includes a to do list management module . The to do list management module manages entries posted to a user s to do queue. In one case an entity may post a GET type entry to a user s queue and then the same entity or another entity may post a DEL type entry instructing the user device to delete the same item that the device was previously asked it to get. In this circumstance in one case the to do list management module may delete the GET type entry but not the DEL type entry. This action may be appropriate in a scenario in which the user device has already received the GET type entry and may be in the process of downloading the corresponding item.

In another case the to do list management module determines that a user s to do queue contains several editions of a newspaper or other periodical. The to do list management module may remove all but the most current edition of the periodical under the premise that a user will not want to read an old newspaper. The user may be given the option of making set up selections which override this behavior. In another case the user may access older editions of a newspaper via the content manager module in a manner to be discussed below.

In general the to do list management module helps ensure that the to do list queue does not contain inconsistent or redundant entries or some other undesirable entry type content.

In block the to do server module receives one or more to do entries. This action may be triggered by the purchase of new eBooks and the like the receipt of new subscription related items and do on.

In block the to do server module stores the entries in an appropriate mailbox where such a mailbox is associated with the user device that will eventually receive the items .

In block the to do server module sends a TPH signal to the user device to alert the user device to the presence of one or more entries that it may download. More specifically in one implementation TPH scheduling functionality may receive TPH events. Based on one or more considerations the TPH scheduling functionality may decide whether to immediately send a TPH signal or to delay sending the TPH signal e.g. by possibly coalescing plural TPH events and sending a single TPH signal . Additional details regarding the TPH scheduling functionality are provided in below. The TPH scheduling functionality may be implemented as a feature of the notification module .

In block the to do server module provides n entries to the user device in response to the user device requesting these items.

In block after the user device has successfully performed the actions identified by the entries such as downloaded one or more items deleted one or more items and so on then the user device sends a remove instruction to the to do server module . In operation the to do server module responds to this request by removing the entries of the to do queue.

In block the management module analyzes the entries in the to do queue along with the candidate entry that is to be added to the to do queue . More specifically the management module may specifically examine entries currently stored in the queue waiting to be sent to the user device. The management module may also consider entries that have already been forwarded to the user device .

In block the management module identifies any two or more entries that may conflict with each other for any reason or which may cause any other concern. One example of a conflict is the case in which a GET type entry contradicts a DEL type entry for the same item. Another example of an actionable issue is where a to do queue contains several editions for a same newspaper or other periodical. Another example of an actionable issue is where a to do queue contains exact duplicate entries and so on.

In block the management module takes steps to resolve or mitigate any problems caused by conflicting entries if possible. Operation may entail making modifications to the queue such as deleting one or more entries to the queue adding one or more entries to the queue and so on. Operation may additionally or in the alternative involve sending corrective commands to the user device.

The to do list processing module includes a TPH receiving module for receiving a notification message from the IPS e.g. in the form of a telephone ring. The TPH receiving module may act on the TPH signal without formally answering this signal after which the to do list processing module exchanges information with the IPS using a data mode. Upon receiving the TPH signal the user device may transition from a first power state to a second power state where the second power state consumes more power than the second power state. This is assuming that the user device is not already in the second power state.

The to do list processing module includes a list server interaction module for use in handling all interaction with the to do list server module except the TPH aspects of this interaction . Namely the list server interaction module may send a request to receive a list of n entries from the to do list server module and then receive such list if the retrieval operation is successful. After the user device obtains the items referenced by the entries in the list and or performs other actions identified by the entries the list server interaction module may send a remove instruction to the to do list server module instructing the to do list server module to remove corresponding items from its to do queue.

The to do list processing module includes a content delivery CD interaction module . The purpose of the CD interaction module is to interact with the server side content delivery module to request and obtain items that are identified in the list of n entries. The CD interaction module may also receive various hints from the content delivery module as well as supplemental information e.g. index information backup annotations etc. . The CD interaction module may store items and other information that it receives in the device memory or in some other storage medium or media .

The to do list processing module may also include a device side management module . This device management module coordinates the operation of the to do list processing module . The device management module in turn may include a device side incremental update module and a device side error handling module . The incremental update module and error handing module work in cooperation to govern the retrieval operations performed by the CD interaction module . The incremental update operation is described in detail in a later section.

By way of preview if appropriate for a particular type of item being requested having a prescribed content the incremental update module may instruct the CD interaction module to obtain an identified item by first requesting a delta file. The delta file expresses the difference between a device side version of the desired content and a current version of the content. If this operation is not successful for any reason as assessed by the error handling module the incremental update module may instruct the CD interaction module to request a full version of the identified item. As will be described the content delivery module of the IPS includes a server side incremental update module which handles the incremental update operation in an independent but complementary manner to the device side incremental update module .

In block TPH receiving module receives a notification message from the to do list server module optionally in the form of a telephone ring. The download process may also be initiated by other events. For example the process may be initiated in response to the activation of a Check New Items command e.g. made available via one or more device menus . The process may also be initiated by turning on the user device radio from an off state . The process may also be initiated when the user device enters a geographical location where wireless service is available from a location where it was not available and so on.

In block in response to the notification message the user device transitions to an appropriate power state if not already in the appropriate state . The list server interaction module then requests and receives n entries from the to do queue maintained by the to do list server module .

In block the CD interaction module receives the items if the download is successful together with hints. A first hint notifies the user device an index for an item is available at the IPS . A second hint notifies the user device backup annotations are available at the IPS . The first and second hints may also be used to indicate an index and or backup annotation are respectively not available.

In block the CD interaction module optionally downloads supplemental information if deemed appropriate . Such additional information comprises search index information and annotation information.

In block the CD interaction module stores the retrieved item s and supplemental information in the device memory and or in some other storage location s .

In block the list server interaction module notifies the to do list server module that it has successfully downloaded the items allowing the to do list server module to remove the corresponding entries from the to do queue.

To begin with the content delivery module includes a download module . The download module coordinates with the CD interaction module receiving requests for items from this module and if possible delivering the requested items to the CD interaction module . The download module retrieves the requested items from the content store . The download module also may retrieve supplemental information from the index store and the annotation store . The index store stores an index if available for an item being requested. The annotation store stores backup annotations if available for an item being requested.

The download module may include an incremental download module which retrieves delta information from a delta information store . The purpose of the download module is to download if possible a delta version of requested content rather than the full version of the requested content. A delta version of requested content corresponds to the difference between a device side version of the requested content and a current version of the requested content. More specifically the delta information store provides various delta files each file corresponding to a difference between a potential device side version of requested content and the current version of the requested content where what is regarded as the current version changes with the reception of each new version . In general the download module attempts to forward a delta version of the requested content selected from a collection of delta files in the delta information store rather than the entire content to reduce the amount of information that is transmitted from the IPS to the user device . So as not to unduly complicate the discussion of the details of the incremental update process will be provided at a later portion of explanation.

A number of modules of the content delivery module support the download module in various respective capacities. For example the content delivery module includes a hint providing module . The hint providing module prepares and forwards a hint which identifies whether an index exists in the index store for a particular requested item. The hint providing module also prepares and forwards a hint which identifies whether backup annotations exist in the annotations store for a particular request item. Each hint may be expressed as a Boolean Yes No type of field or in some other format. The hint providing module may send the hints along with the items provided by the download module .

The content delivery module also includes an annotation formatting module . The annotation store may store the backup annotations in a generic form in annotation store . Assuming that backup annotations are available and the user device requests these annotations the annotation formatting module may convert the backup annotations from its generic form to a form which is compatible with the format of the corresponding item itself such as the format of the eBook item itself. The download module may then forward the annotations to the user device in a desired format.

In one implementation the annotation store fully describes all types of annotations identified above. In another illustrative implementation the annotation store only stores the locations of the annotations and the content of user notes. In this case the annotation store may not store actual excerpts associated with highlight type and clipping type annotations. In one implementation the annotation formatting module may contact the content store to request excerpts based on the stored locations of the annotations. This allows the system to reconstruct highlight type and clipping type annotations.

The content delivery module also includes an encryption module . The encryption module may optionally encrypt an item to be delivered to the user device for a particular user. This may comprise receiving an item from the content store and applying Digital Rights Management DRM and or other protection related processing to a header of the item. The encryption module need not store an entire copy of the item in memory before applying encryption related processing to the item. In other words the encryption module may stream out the item to the user device applying encryption to parts of the item as appropriate. In one case the encryption module applies encryption to all items that it delivers. In another case the encryption module applies encryption to some items such as eBooks subscription related items etc. but not other items such as personal items and IPS generated messages etc. .

The content delivery module also includes a personalization module . The personalization module may insert personalized information into an item prior to its being delivered to a user. For example the item may include one or more placeholder fields. The personalization module may populate the placeholder fields with personalized information such as the name of the user and so forth.

The content delivery module also includes a metadata injection module . As the name suggests the metadata injection module inserts metadata into the item before it is delivered to the user. The metadata may include the names of the authors of the item. As will be discussed the content manager module may display this name information to the user in one or more user interface pages. The metadata may also include information that specifies the location where the text of the item starts. This location information enables a go to the beginning feature that may be invoked via one or more menus provided by the user device . The metadata may also include a custom title for the item. This metadata allows the content delivery module to present an item with a personalized message such as Thank You John in one or more pages and so on. The last mentioned feature overlaps with the role of the personalization module described above.

The metadata injected into the item may also include item identification information such as a unique ID number used by the merchant store module to identify the item. More specifically in one illustrative implementation when the content reception system receives and processes content it does not couple an ID number with the item itself in the content store . The content reception system stores ID information elsewhere in the IPS . At time of delivery of a particular item the metadata injection module may associate the item with its ID number and send out this combination of information as a package. For instance the metadata injection module may insert ID information in the header of the item prior to delivery.

In one case the encryption module and the metadata injection module and or other modules may operate in series as discrete operations. In another case the encryption module and the metadata injection module and or other modules may operate generally as a single integrated operation.

The content delivery module also includes an authorization module . The authorization module determines whether the user is entitled to receive the item s being requested. The authorization module may make reference to one more fields of authorization information to makes its decision such as information which indicates whether a user has suitably paid for the content being requested. As explained above for an eBook item and other a la carte selections the authorization module may interact with the media library module to determine whether the user has purchased or is otherwise duly entitled to receive the item. For a subscription related item that is provided as per a subscription the authorization module may interact with the subscription module to determine whether the user is generally authorized to receive issues of a particular subscription e.g. without making a per item authorization inquiry .

The content delivery module also includes a download restriction module . The download restriction module may be implemented as part of the authorization module or a separate module. The download restriction model may optionally restrict the downloading of an item to a maximum number of devices such as in one illustrative case five devices.

The above enumerated list of modules is representative and is not exhaustive of the types of functions performed by the content delivery module . As indicated by the label Other Modules the content delivery module may perform additional operations. Further in some implementations the content delivery module may omit one or more of the modules identified in .

In block the content delivery module receives a request from the to do list processing module for one or more items. To facilitate discussion the flowchart will assume that the user device has requested a single item.

In block the content delivery module performs various authorization related operations e.g. as described above with respect to the authorization module and the download restriction module .

In block the content delivery module may optionally personalize the item such as by inserting the user s name in a placeholder field in the item.

In block the content delivery module may assign an identification number to the item and or inject other metadata into the item.

In block the content delivery module may optionally encrypt the header of each item that it delivers for a particular user. As explained above the content delivery module may apply encryption to an item without requiring that the entire item be stored in memory.

In block the content delivery module may forward the prepared item to the user device . The items may be accompanied by hints which respectively describe whether the IPS maintains an index for the item and backup annotations for the item.

In block the content delivery module may receive a request for supplemental information such as a request for a server side index and or a request for backup annotations.

In block the content delivery module may forward the requested supplemental information to the user device .

In block the user device receives a requested item. The item corresponds to a specific type of content which may be an eBook item a subscription related item a bundle of answers to a user s query and so on. The item may also be represented by one or more identification numbers also known as keys. In one case each edition or issue of a subscription related item is assigned a unique identification number.

In block the user device determines whether the type and key e.g. the identification number of the item are the same as an item that is currently stored by the user device . If so for eBook items and subscription related items this means that the user device is now receiving a completely redundant copy of an item which it already possesses. In the case of feeds this may mean that the user device is receiving at least a new version of the feed which may add and or omit one or more parts with respect to a previous version of the feed. A version identifier may be used to identify the version of a received feed.

In block if the item is deemed redundant the user device may consolidate the newly received item with the previously stored item having the same type and key thereby only creating a single record for this entry.

In block if the item is not deemed to be redundant the user device may store the newly received item as a distinct new item. In one implementation at this juncture the user device may also check the received hints and download the appropriate supplemental information annotation backup information and or index information etc. .

The incremental update operation takes place on both the IPS and the user device . These two operations occur independently of each other but these operations also complement each other. describe the incremental update procedure from the standpoint of the IPS while describes the incremental update operation from the standpoint of the user device .

Starting with this figure shows an overview of one scenario in which it may be appropriate to perform an incremental update. In this case the user has subscribed to receive a feed. A feed corresponds to a collection of informational parts which are supplied to the user at predetermined times e.g. hourly or in response to other triggering events. Consider for example the case of a feed which provides headline news stories. Such a feed may forward a list of the top ten news stories every hour. If a collection at time n has prescribed reference content then a collection at time n 1 may be viewed as a later version of the content at time n.

One version of a feed may contain one or more parts that are shared in common with an immediately prior version of the feed. In the case of a news feed the top ten news stories at 2 00 PM on a particular day may include many of the same news stories identified at 1 00 PM. And perhaps all of the news stories may be the same. In this circumstance it is desirable to download only the delta version of 2 00 PM news feed. The delta version of the news feed identifies only those parts of the 2 00 PM news feed which are different than the 1 00 PM news feed. A current version of content may differ from a prior version of the content in at least two respects. First a current version of the content may add one or more parts that are not present in a prior version of the content. Second a current version of the content may in addition or alternatively remove one or more parts that are present in a prior version of the content.

The illustrative strategy adopted by one implementation of the incremental update procedure is to compile in advance delta files which express the difference between the current version e.g. V and each prior version. For instance a first delta file expresses the difference between version Vand version V. This delta file consists of simply an indication that part Ahas been removed. A second delta file expresses the difference between version Vand version V. This delta file consists of an instruction that part Ahas been removed together with the information contained in part A which has been added relative to version V . A third delta file expresses the difference between version Vand V. This delta file consists of an instruction that part Ahas been removed together with the information corresponding to parts Aand A which were added relative to version V . In the delta files the parts that have been omitted need not be reproduced a reference to the omitted parts will suffice.

In an application phase of the incremental update procedure the content delivery module determines the identity of the item that the user is requesting and determines whether the user has a prior version of the requested content such as version V version V version V etc. Without limitation in one case the user device may inform the content delivery module of the version of the content that it possesses if any in header information included in the requests that it sends to the IPS . The content delivery module first makes an attempt to access the delta file which expresses the difference between the current version of the requested content and the device version of the requested content. If this delta file may be obtained and if it is determined that it is more efficient to send the delta file as opposed to the whole file then the content delivery module sends the delta file rather than the entire requested item. Else the content delivery module sends the entire requested item. As mentioned the user device performs a parallel analysis first requesting a delta file. If the user device does not receive and successfully process the delta file in due course it may ask for a full version of the requested item.

In block the content delivery module makes note of the receipt of a new version of content such as a new edition of a feed a new edition of a newspaper item and so on.

In block the content delivery module forms a series of delta files expressing the difference between the current version Vand a series of prior versions V V V and so forth. The content delivery module may apply various rules to determine how many delta files it should compute. In one case the delivery module may cap the number of delta files at a predetermined number. Recall that the objective is to download a requested item to the user in the most efficient manner. As such in another case the delivery module may stop forming delta files when it determines that the delta file becomes so large and or complex that it may be more efficient to download the entire item rather than a delta file. The content delivery module may store the delta files in a delta file store shown in . The delta files may be stored with their corresponding full items or otherwise linked to their corresponding full items by reference information.

In block the content delivery module may remove any delta files from a previous iteration that are no longer relevant. For instance in a previous iteration of the procedure the version Vwas the most current version of the item and all of the delta files were compiled with reference to this version. In one implementation the content delivery module may delete all of these stale delta files based on the presumption that the user will want the most current version of the requested item.

In block the content delivery module receives a request for an item. The content delivery module may determine whether the user device has a prior version Vof the requested content through various mechanisms such as by reading the version information from a header of the user device s HTTP requests.

In block the content delivery module attempts to access a delta file corresponding to the difference between the current version Vand the device s version V. In one case the content delivery module may make n attempts to access this delta file such as without limitation 3 attempts.

If the content delivery module is successful in accessing the delta file as determined in block it may provide the delta file in lieu of the full version. Namely in block the content delivery module sends the delta file as opposed to the full item. Otherwise in block the content delivery module sends the entire item.

The above described manner of operation is based on the assumption that the delta forming procedure of is operative to store delta files for only those cases in which it deems it more efficient to transmit a delta file rather than the entire version. In this case if procedure does not find a corresponding delta file it proceeds by immediately accessing and downloading the full version. In other cases the determination of whether it is more efficient to send the delta file as opposed to the entire version may be performed as part of the download process of e.g. as indicated by the optional decision block . Regardless of what juncture the delta vs full decision is made this decision may be based on a number of factors 

In block the user device as a default rule attempts to access a delta file version of a requested item. If successful the user device attempts to patch the delta file into the version of the content that it currently possesses. The user device may optional make a predetermined number n of attempts to perform this operation.

In block the user device determines whether or not it is successful in obtaining the requested item as a delta file patch. If it is successful the process ends. If it is not successful in block the user device may request the entire item. The user device may apply other considerations rather than or in addition to success failure type considerations in determining whether to download a delta file or a full item.

To repeat the server side content delivery module may perform its incremental updating operation as per procedure in parallel with the user device which performs its own incremental updating operation as per procedure . Either the IPS or the user device may decide to abandon its attempts to retrieve the delta file version of the requested item.

In the examples developed above the IPS operates by receiving an item adding an entry to an appropriate to do queue in the case of a subscription related item and then sending out a TPH signal to notify the user device to access the entry and subsequently download the corresponding item. This section describes various management functions designed to make this general process more efficient and or to achieve other goals.

A second feature corresponds to TPH scheduling functionality . The TPH scheduling functionality generally attempts to schedule the transmission of TPH signals to reduce the power consumed by the user device . More specifically it is relatively expensive from the standpoint of the consumption of power for a user device wake up and act on a TPH signal e.g. by receiving entries from a to do queue and downloading items etc. . In one representative case such an event consumes about 1 percent of the total capacity of the battery life. To address this situation the TPH scheduling functionality may not send a TPH signal for every reportable addition made to the to do queue but rather combine multiple reportable events together and send out a single TPH signal. The TPH scheduling functionality applies other considerations in determining when and how to send out TPH signals as will be described in greater detail below. In one implementation the TPH scheduling functionality may be implemented as a feature of the notification module .

A third feature corresponds to late notice functionality also known as paperboy functionality. The late notice functionality determines that a publisher is late in providing a subscription related item to the IPS . In response the late notice functionality may identify all of the recipients of the item. The late notice functionality may prepare and send out personalized late notices to the recipients.

A fourth feature corresponds to subscription initiation functionality . The subscription initiation functionality refrains from starting the subscription until the user first turns on the device and contacts the IPS . This provision may apply to both fee based and free subscriptions.

The above enumerated list of features is representative and is not exhaustive of the types of functions performed by the IPS . As indicated by the label Other Coordination Functionality the IPS may include additional management features. The IPS may also omit or disable one or more of the features shown in .

In block the reliable fulfillment functionality receives a triggering event which commences the reliable fulfillment processing. The event may correspond to the receipt of a subscription related item and so on.

In block the reliable fulfillment functionality performs prefatory processing in preparation for sending out a TPH signal to one or more devices which are registered to receive the item. In one case the reliable fulfillment functionality may store an entry in the to do queue associated with a device which is scheduled to receive the item. At the time that the reliable fulfillment functionality adds the entry to the to do queue the content reception module may be converting the item so that at this time the item is not yet ready to be forwarded to the user device. To prevent the to do list server module from prematurely sending out a TPH signal upon adding an entry to a queue the entry may be tagged with a flag which identifies it as not ready to be sent. This mechanism may also optionally effectively conceal the entry from the list of entries that the device sees when it requests entries as part of the download process e.g. in block of .

In block the reliable fulfillment functionality allows the TPH signal to be sent to the recipient device when the item is ready to be sent. In the case of the above described subscription related item the reliable fulfillment functionality determines when the content reception system is finished converting the content and storing it in the content store . At this time the reliable fulfillment functionality may change the status of the entry in the to do queue to indicate that a TPH signal may be sent to the user device.

The reliable fulfillment functionality may perform other types of prefatory actions. In general the prefatory actions expedite the delivery of items as these operations may be performed in parallel with other operations and or when the parts of the IPS are otherwise idle or not fully engaged.

In block the late notice functionality determines that a publisher or other source is late in providing a subscription related item to the IPS . Or the late notice functionality may determine that there is some other source of delay with respect to an item. The late notice functionality may make this determination based on information regarding when an item is normally received. Such information may be expressed by manually entered timing information. If the late notice functionality determines that a predetermined amount of time has elapsed beyond the expected receipt of the item then it may identify the item as being late. The late notice functionality may glean information regarding the expected receipt of an item from various sources such as from the administrators of the IPS from the publisher itself and so on. Alternatively or in addition the late notice functionality may compile empirical norms which reflect the typical timing at which the item is received and processed. In making lateness determinations the late notice functionality may take into consideration the time zones in which user devices receive content. For example a first late threshold may apply to a user who is operating his user device on the East Coast of the United States while a second late threshold may apply to a user who is operating his device on the West Coast. The difference in thresholds may account for the fact that there may be less time to react to a delayed delivery on the East coast compared to the West coast. More specifically assume that a newspaper normally arrives at 4 00 AM East Coast time. A delay in delivery is more of a concern for East Coast users than West Coast users because the East Coast users will be waking before the West Coast users and expecting to receive their newspapers with breakfast.

In block assuming that it is determined that an item is late the late notice functionality may send out a late notice to each user who is scheduled to receive this item. The late notice functionality may consult the subscription module to determine the set of users who are scheduled to receive the item. The late notice functionality may optionally personalize the late notices provided to users such as by inserting the users names into placeholder fields in a generic late notice message. The late notice message may also be customized to identify the name of the late publication the date of the late issue and so on.

In block the late notice functionality sends out the late notices to appropriate users. The late notice functionality may take into consideration the respective time zones of subscribers by sending out late notices at appropriate times.

In one case the late notice functionality may send the late notices as documents e.g. like any other type of items described above. The late notice functionality may deliver the late notices by adding GET type entries in appropriate to do queues. In another implementation the late notice functionality may send special commands in the to do queues. These commands prompt the user devices upon receipt of the commands to display an appropriate pop up message or the like informing the users that the items will be delivered late. The late delivery module may optionally send a staggered series of late messages upon continued failure to deliver the item with each message including an appropriate escalation of apologies remedies and the like.

In block when and if the late issue is delivered the late notice functionality may remove the late notice item from the user devices e.g. by sending a DEL type command to the user devices via corresponding to do queues . This provision gives the IPS an opportunity to avoid confusion for a user who opens her device to see both a delivered item and a notification that the item is late.

In block it is assumed that a user s to do queue contains at least one entry. If so in block the TPH scheduling functionality determines whether it is appropriate to send a TPH signal to the user device or to defer such a message until some time later. The to do list server module may refrain from sending a TPH signal for an entry in a to do queue by flagging this entry with a non send status. The status may be changed when the to do list server module wishes to send out the TPH signal.

In making its decision the TPH scheduling functionality may rely on any one of the following considerations or any combination of the following considerations. Many of the considerations include aspects which intersect with other considerations.

In block the TPH scheduling functionality weights one or more of the above identified factors in making a final decision whether or not to send a TPH signal. Different environments may apply different weights to these considerations influencing which consideration may take precedence over other considerations. In one case each user may also define the weights that apply to the sending of TPH signals thereby controlling the relative importance of the various factors identified above.

In block the TPH scheduling functionality sends out a TPH signal prompting the user device to retrieve the entries and download the corresponding items associated with the entries.

In block the subscription initiation functionality determines that the user has purchased a new subscription.

In block the subscription initiation functionality delays charging the user for issues or editions of the subscription until the user actually begins downloading subscription related items or in response to some other consumption trigger. This measure is in part a courtesy to the user.

The home presentation module introduced in the context of provides a home page through which a user may begin interacting with the user device . The home presentation module may present a variety of information on the home page. provides one illustrative implementation of a home page .

The home page of shows a list of various items that a user may consume using the reading device including eBooks audio books personal items subscription related items and so forth. Each entry in the home page includes the salient information regarding the item such as the title of the item the author of an eBook type item and so forth. Each entry includes a selector along the right edge of the page that serves as a guide for selecting the corresponding item thereby opening the item for viewing. A special grouping type selector indicates that the item corresponds to a subscription. By clicking on this item the user may view a list of available issues within the subscription. Further each entry in the home page includes a progress indicator such as progress indicator . The number of dots in the progress indicator identifies how far the user has advanced in reading the item relative to a total length of the indicator.

The home page also includes a Show and Sort selection item. By clicking on this entry the user may receive a Show and Sort menu not shown . This menu allows the user to select a filtering criterion or criteria that is or are used to select items for presentation in the home page . The user may also select a sorting criterion or criteria that is or are used to govern the order in which items are displayed on the home page .

The home page also includes a menu selector . Selecting the menu selector prompts the user device to present the menu shown in . The menu allows the user to navigate to various functions performed by the user device and perform specialized tasks. One such function that may be selected via the menu is a setting option .

By activating the setting option shown in the user device directs the user to a settings page shown in . The settings page allows the user to change various administrative settings associated with the device such as account name device name etc. as well as change various settings that govern the manner of operation of the device. The settings page also reveals the amount of storage available to store additional items.

The merchant store module includes an account administration and set up module . This module allows the user to set up a user account and perform other administrative functions.

The merchant store module also includes or has access to user information . The user information may provide demographic information regarding the users. The user information may also provide information regarding the prior purchases and other types of selections made by the users.

The merchant store module may include an item catalog . The item catalog may include descriptions of various items that may be selected using the merchant store module . A description of an item in the item catalog may take the form of an item detail page.

The merchant store module may include Item Review and Acquisition IRA functionality . The IRA functionality in turn may include a catalog search and presentation module this module allows the user to review items in the item catalog by entering search terms viewing browse categories and so on. The IRA functionality also includes an item recommendation module . The IRA functionality presents one or more recommended items to the user e.g. based on the user s prior interests e.g. as reflected in the user information store or based on generally popular items and so on.

The IRA functionality also may include an item purchase module . The item purchase module allows the user to place items in a shopping chart and purchase or otherwise acquire the items. The item purchase module in turn may include a buy rescind module . The buy rescind module allows the user to rescind an item purchase in the manner described more fully below. The item purchase module may also include a virtual account module . As will be described in greater detail below in Section D the virtual account module allows the user to make item purchases after the user has purchased or otherwise arranged to receive a user device but at this point in time the user has not yet been assigned a particular user device.

The IRA functionality may include yet additional modules as indicated by the label which reads Other Store Modules . Other implementations of the merchant store module may omit one or more modules shown in .

The merchant store module may include a device interface module . The device interface module generally includes functionality which allows the server side merchant store to interact with the device side store interaction module . The device interface module includes a markup presentation module . The markup presentation module provides a series of pages e.g. such as representative page to the user device. The pages may be formulated in any markup language or any other format. The device presentation interface module may also include a device response processing module . The device response processing module receives responses from the users who interact with the pages provided by the markup presentation module . For example the users may select links in pages provided by the markup presentation module . The user s selections are conveyed back to device response processing module using the HTTP protocol or some other protocol or combination of protocols.

In block the item purchase module receives the user s purchase of an item. The user may make the purchase by making a selection which initiates a fulfillment operation.

In block the IPS processes and potentially delivers the purchased item to the user s device in the manner described above.

In block the buy rescind module presents an option to the user which invites the user to rescind her purchase made in block . In one case the buy rescind module may present this option in a thank you page or the like which is provided to the user following the purchase of the item. At this stage as indicated by the prior block the item purchase module is in the course of fulfilling the user s purchase of the item.

The device side content manager module provides a tool that allows the user to review and manage items that are available for consumption by the user device . shows additional detail regarding the content manager . also illustrates the manner in which the content manager may interact with other modules such as the server side personal media library module and the subscription module .

The content manager module includes a presentation module . The presentation module shows various items available for the user to consume using the user device . The items may originate from various sources. A first source corresponds to the user device s internal device memory . A second source corresponds to a portable memory module that may be coupled to the user device such as a flash card or the like. A third source corresponds to items identified in the user s server side personal media library module . More specifically the content manager module may receive information from the media library module regarding on demand a la carte selections such as eBook items specifically selected newspaper and magazine issues and so on. A fourth source corresponds to items identified in the subscription module . More specifically the content manager module may provide information regarding the user s subscriptions and the latest issues associated with those subscriptions. In regards to subscriptions in one illustrative case the content manager module may store the last n days for each of the user s subscriptions.

In one illustrative implementation the content manager module has access to device side metadata that identifies the items stored on the personal media library module and or the subscription module . This avoids the need for the user to make on demand queries to these server side modules to determine their contents.

According to another feature the presentation module includes a filtering module . The filtering module allows the user to select a criterion or criteria for use in determining what types of items are displayed by the presentation module . For instance the user may opt to restrict the presentation to only items stored in the device side internal memory and so on.

The content manager module also includes an update processing module . The purpose of the update processing module is to update the device side metadata that describes the contents of the personal media library module . The update module may be invoked at various times when the user device and IPS interact with each other for any reason. For example the update module may be invoked as part of the collection of operations that are triggered by the receipt of a TPH signal.

Referring now to the personal media library module this module stores items that the user has previously purchased in a la carte fashion. More specifically the personal media item library may store pointers which reference the items in the merchant content store that the user has purchased. In the manner described above the user may receive a previously purchased item via the content delivery module which in turn contacts may the personal media library module to verify that the user is indeed authorized to receive the requested item. The user may decide to download an item again for any reason such as in the case in which the content was inadvertently deleted from the user s device local store s .

The user may download subscription related items in a similar manner. Namely the content delivery module accesses the subscription module to determine whether the user is authorized to download an issue or the like. Permission information provided by the subscription module is performed on the level of subscriptions rather than individual issues within a subscription.

In block one or more modules in the system receive a triggering event. The triggering event signals that it is time for various housekeeping operations such as the sharing of information between the user device and the IPS . One representative triggering event may correspond to the sending of a TPH signal from the IPS to the user device which initiates a host of operations including an information synchronization operation. Another triggering event may correspond to the powering up of the user device or other change in state of the user device and so forth.

In block one or more appropriate modules in the system share information which one or more other modules for the purpose of synchronization. To name one example block may entail the user device sending its annotations that a user has created for a particular item to the IPS for storage in a backup annotation store . Further block may entail the personal media library module sending metadata down to the content manager module where such metadata reflects the items that are referenced by the personal media library module . Still other information sharing operations may be performed upon various triggering events.

In addition to the above periodic synchronization operations the IPS can interact with the user device to restore the contents of the user device when the stored content of the user device is no longer accessible e.g. because the user has invoked a hard reset command etc.

Recall that the reader module introduced in the context of provides an interface that allows a user to read an eBook. shows one page of text content produced by the reader module corresponding to the novel by Herman Melville. The user may change the size of the font through an appropriate menu not shown . The user may view his or her progress through the book via a progress display . The number of dots in the progress display relative to the total length of the display reflects how far the user has advanced into the book.

Any page of readable content may include one or more embedded links that may be activated. Note for instance button in page . In this case the reading material being displayed by the reader module corresponds to a sample of a more complete item such as a chapter of a book. The page includes a button that invites the user to select the full version of the item. In another implementation the button may invite the user to purchase another portion of the item such as another chapter in a book another issue in a magazine series and so forth . In another case a link may identify an item that is related to the content being presently displayed based on one or more matching considerations for example item recommendation module of may identify a related item based on various matching considerations. Clicking on the button directs the merchant store module to purchase or otherwise acquire and initiate delivery of an identified item e.g. in the illustrated case a full version of content being read by the user in page .

In block the user device provides a presentation that includes a link such as page that includes button . The user device may use a template to display the page. The template may include provisions for presenting the link but does not associate the link with any kind of code which uniquely identifies a particular item. In other words the page includes a placeholder field in place of the actual code.

More specifically recall that for certain types of items the content reception system stores the items in the content store without formally integrating identification information with these items. When the content delivery module delivers such an item to the user it may inject the identification information into the header of the item using the metadata injection module . But at this stage the link inside the item still is not populated with identification information.

In block the user device or some other entity may dynamically populate the link information so that it includes a unique identification information e.g. a unique number associated with the link. Consider the specific case in which as indicated above the page displays a sample of an item and the button allows the user to access the full version of the item. When the user clicks on the button the device may populate the link associated with the button with identification information associated with the full version of the item. The identification information is provided to the user device by the content delivery module along with the sample item for instance the identification information may be conveyed in the header of the sample item. The populated link may then be invoked to perform an action such as by accessing the merchant store module to purchase a full version of the item which initiates delivery of this item to the user.

Continuing with the theme of annotations as shown in the user may enter a bookmark by clicking next to a mark icon in the corner of the page . Further shows a way to identify locations in an eBook which have been marked by the user. Namely shows a progress display. The small black triangles illustrate the location of user created bookmarks within the text.

The audio source may represent a commercial supplier of audio items or other type of organization that supplies audio items on a fee basis or on a non fee basis e.g. including libraries governmental organizations etc. . In this context the audio source may be accessible to the personal computer or other device as a WAN accessible resource e.g. as an Internet accessible site or the like . The audio source may also represent a user or a community of users that supply audio items for dissemination to other users.

Upon receipt the audio player module may store the audio item in a background music file and or an audio book file . The audio player module may be configured to play the audio items in the background music file as background music. For instance the audio player module may play an audio item in the background music file when the user is reading a newspaper searching the web and so on. In one case audio player module may play the audio items in the background music file in a random order. The audio player module may provide controls that allow the user to access the background music file pause the playing of background music skip to a next audio item in the random playlist and so on.

The audio player module may be configured to allow a user to interact with and consume audio items stored the audio books file in generally the same manner as textual content. For example page shows one user interface page that allows a user to control the audio playback of an audio book. The audio player module allows the user to move within the content of an audio item using various forward commands back commands etc. Further the audio player module stores the point in the audio item at which the user stopped listening upon returning to the item at a later time the audio player module begins playing from this point onward. Other modules of the user device may manage the audio item in the same banner as an eBook item. For example the content manager module may display metadata regarding an audio item in its list of available items e.g. see the Sun Also Rises entry in .

The IPS may establish different business rules to govern the user s access to external network accessible resources. In one case the IPS may discriminate between a first class of non fee resources for which it does not charge a fee or charges a relatively smaller fee and a second class of fee resources for which it charges a fee or charges a relatively larger fee .

In block the browsing proxy module receives a user s request to connect to a network accessible resource such as a website or the like.

In block the browsing proxy module determines whether the site that the user wishes to connect to corresponds to the services provided by the IPS itself. If this is the case then in block the browsing proxy module grants the user access to the requested resources.

If block is answered in the negative meaning that the user is not attempt to gain access to the IPS itself the flow advances to block where the browsing proxy module determines whether the user is attempting to gain access to one or more of the designed non fee or reduced fee resources . If this is the case then in block the browsing proxy module grants the user access the requested resources in block .

If block is answered in the negative meaning that the user is not attempt to gain access to the IPS or a free resource the flow advances to block where the browsing proxy module determines whether the user is attempting to gain access to one or more of the designated fee resources . If this is the case then in block the browsing proxy module next determines whether the user has paid or has agreed to pay the required fee. If this block is answered in the affirmative the browsing proxy module assesses appropriate fees in block and then grants the user access the requested resources in block . In one case the system may be set up so that the user may pay a fee for each item that the user wishes to access e.g. on a per access basis. In another case the system may be set up so that the user may pay a fee to access any number of items for a predetermined amount of time such as a day week etc. . In any case the user may be given the option of automatically accepting access related fees when the user makes an access attempt e.g. without querying the user each time he or she wishes to access an item.

If none of the conditions set forth above is satisfied then in block the browsing proxy module denies the user access to the requested resource.

This section provides information regarding various administrative or backend tasks that may be performed using the system set forth in Sections A and B. One administrative function pertains to monitoring the performance of various aspects of the system. Another administrative function pertains to testing the operation of the system. Another administrative function pertains to diagnosing problems or other issues that may be present in the system. Another administrative function pertains to upgrading the instruction bearing content e.g. software used by the user device . The above described functions may intersect. For example the testing and diagnosing functions may rely on the performance monitoring function. The upgrade related function may rely on the testing and diagnosing functions to determine whether an instruction upgrade is appropriate.

The system allows an item providing system IPS to interact with a user device via communication infrastructure. The communication infrastructure includes a wireless provider system and a communication enabling system . The communication enabling system interacts with the IPS via a network such as a wide area network WAN and more particularly the Internet.

The system implements the various administrative functions described above at various levels as will be described below.

The wireless provider system may likewise include a performance logging module for recording various events associated with the performance of the system with respect to performance issues that are visible to the wireless provider system . The performance logging module may store performance information in a performance log .

The communication enabling system may likewise include a performance logging module for recording various events associated with the performance of the system with respect to performance issues that are visible to the communication enabling system . The performance logging module may store performance information in a performance log .

The IPS may include a customer service module for performing various functions. As a first function the IPS may also independently record various events and store such events in an IPS side performance log . Further the customer service module may obtain any of the performance information collected by the user device the wireless provider system and or the communication enabling system . In one particular case the customer service module automatically collects performance information from different parts of the system . In another case the customer server module may make on demand targeted inquires into different aspects of the system querying the performance information collected by the user device wireless provider system and or the communication enabling system . For instance a user may call a customer service representative to identify a problem with receiving a download in a particular region of a country. The customer service representative may examine the performance information provided by any part of the system to help uncover the source of the problem.

In addition an administrator at the IPS may proactively test various parts of the system . For instance the IPS may include a server side testing module . The server side testing module may be used to periodically send test signals to a set of test user devices requesting the test user device to respond. Or the testing module may send the testing signals to the test user devices in an on demand manner. A test user device may include a complementary test module for receiving and responding to such a test signal. Note that collectively the device side performance logging module and the device side testing module correspond to the monitoring and testing functionality introduced in . The server side testing module may monitor the response s it receives from each test user device including whether a response was received at all and or various performance metrics associated with response and so forth. The server side testing module and or a human administrator may review the results to help diagnose performance issues within the system .

In block if it is time to test the server side testing module may send test probes to one or more test devices.

In block the server side testing module may identify whether it has received a response from the test user devices and if so the nature of the response.

Returning to this figure illustrates that the IPS includes a server side upgrade module . The user device includes a complementary device side upgrade module which was introduced in the context of . By way of overview in one case server side upgrade module may be manually operated to push an upgrade or other information down to the user device whereupon the device side upgrade module loads the identified upgrade or other information in an appropriate manner. In a second case the server side upgrade module may automatically receive version information from the user device supplied by the device side upgrade module . The server side upgrade module may compare the received version information with the current version of the software. The server side upgrade module may then initiate any upgrades that may be appropriate e.g. by downloading a patch or a full version of the desired instruction bearing item to bring the user device up to date.

In block an administrator associated with the IPS identifies an upgrade to be made to the user device .

In block the server side upgrade module may send the upgrade down to the user device whereupon the device side upgrade module incorporates the upgrade into its body of instructions. The updating operation is transparent in the sense that the end user is optionally not asked to participate in the updating operation and may not be aware of the updating operation.

In block the server side upgrade module may receive information regarding a current version of instructions that is being used by a user device.

In operation the server side upgrade module may compare the device s version with the current versions of the instructions.

In operation the server side upgrade module may automatically prepare an upgrade for use by the user device e.g. by computing a delta file that expresses the difference between the current version of the instructions and the device s version of the instructions. The upgrade module may transfer the upgrade to the user device either as a patch or as a full file. The device side upgrade module receives the upgrade and takes action to incorporate the upgrade. Again the updating operation is transparent in the sense that the end user is not asked to participate in the updating operation and may not be aware of the updating operation.

The package serves as a general purpose container for communicating any type of information to the user device to elicit any type of behavior from the user device . In one case an administrator may use the package shown in to download an instruction bearing item to a user device . The device responds by loading this item into its memory the device thereafter operates based on the program instructions provided in the item.

In another case the administrator may use the package shown in to download other types of content to the user device such as any kind of message content that is displayed by the user device . For instance the downloaded content may pertain to a message that the user device is instructed to display in a power off mode e.g. in the case that the user device uses non volatile display technology that may present information on a display in a power off mode of operation . To provide this message the package may include a bit map which provides the desired message and optionally script content which directs the user device how to display the message. Other applications are possible.

As illustrated in the user device may use the temporary contact information to establish a first access to the communication infrastructure . The communication infrastructure may then forward more permanent contact information to the user device . The user device may thereafter uses the more permanent contact information to access the IPS and other network accessible resources. The provisioning approach allows the user to use the user device without performing complex and burdensome configuration operations.

Addition details regarding one illustrative manner of provisioning user devices is described in U.S. Ser. No. 11 277 876 filed on Mar. 29 2006 entitled Over the air Device Provisioning and Activation naming the inventors of Subram Narasimhan et al.

In block the purchasing system or some other module may establish a virtual account for the user. The virtual account is established before a user device is even assigned to the user.

In block the purchasing system receives one or more item purchases made the user. The purchasing system associates these purchases with the virtual account created in block .

In block when a user device is assigned to the user the purchasing system or some other module may associate the virtual account with the assigned user device. This linking operation allows the user to use his or her new user device to receive and consume the items that were applied to the virtual account.

By way of introduction the user device may include a preferred roaming list PRL and a most recent used MRU table . The PRL includes a list of target frequencies that that the user device may investigate in order to establish communication with a communication station or the like. The MRU table identifies the frequency that the user device most recently used to gain access to a communication station.

To expedite the testing the approach illustrated in programs the MRU table of the user device so that it stores information that identifies the test channel of the test equipment . This allows the user device to quickly establish contact with the test equipment that is by avoiding the need for the user device to hunt for a frequency with which to communicate with the test equipment .

As a further feature the testing approach does not require storing a test PRL in the PRL table and then after the test replacing the test PRL with an actual PRL to be used in the field. That is in the present approach the PRL may maintain an actual PRL information throughout the testing operation.

In block the user device and the test equipment perform the test. In conducting the test the user device does need to hunt for the channel of the test equipment because the appropriate access information is already stored it its MRU table .

This section describes various searching techniques which may be implemented on a computing device to search locally and or remotely stored content. Search and indexing may be carried out on a local user device e.g. electronic book reader device PDA PC etc. a remote computing device e.g. item providing system server etc. or both. Search operations tend to be a relatively processor intensive operations. Often before content is searched the content is cataloged or indexed for ease of searching. Even so search may still require considerable processing resources. Additionally the process of indexing the content also requires processing resources. These processor loads translate into power consumption by the computing device.

Processor loads and power consumption become more of a consideration in the context of portable local user devices such as e book readers. Given the relatively large processing and power requirements search on e book readers has been largely nonexistent. To the extent that searching has been available on PDAs or other portable user devices the portable user devices have tended to leverage the greater processing power of remote computing devices to perform search and indexing. However if search is carried out by a remote computing device search may not be available when the portable user device is out of communication with the remote computing device.

Illustrative search and indexing techniques are described below in the context of an illustrative e book reader user device. However the concepts described herein may be more generally applied to other types of local and or remote computing devices such as PCs desktop or laptop servers PDAs pocket PCs smart phones or the like.

In the illustrated implementation the memory comprises internal memory of the user device . Additionally the user device in this implementation includes removable memory e.g. memory card disk or the like storing a second collection of electronic items and search indices for the second collection of electronic items. Generally each memory includes one or more search indices corresponding to the electronic items stored thereon. Thus removal of one memory does not affect the searchability of electronic items stored on another memory. However in other implementations user devices may include any number and combination of memory types and search indices may be stored together with or separate from the corresponding electronic items.

The user device also includes a user interface by which users can enter search queries manipulate search results browse electronic items and otherwise interact with the user device . Upon entry of a search query search results may be displayed on one or more displays of the user device such as the dual display arrangement shown in . As discussed above the user device may also include various other functionality e.g. to do list processing module reader module content manager module power management functionality etc. . Some of the other functionality may interact with the search and or indexing modules and to manage search results show storage locations of electronic items e.g. in internal memory in removable memory in remote storage interact with a remote merchant store or the like.

In one implementation the remote data store and the merchant store may comprise a personal media library module and a merchant store module respectively such as those described with respect to in section A above. Search of the Internet may be accomplished using a conventional Internet search engine a specialized server side search engine and or a device side search engine. The search entity may be any entity capable of searching a source of information and returning results to the user device . In one implementation the search entity comprises an entity that relies at least in part on humans to compile search results and provide answers to search queries. Various examples of such search entities include Yahoo Answers available from Yahoo Inc. located in Sunnyvale Calif. Wondir Inc. located in Bethesda Md. or NowNow available from NowNow.com located in Seattle Wash.

The search query may be expanded at to include variations of the queried terms using stemming truncation or any other suitable search conventions. For example stemming may include recognizing any one or more of the following variations of the query terms plural forms of singular query terms singular forms of plural query terms other verb tenses of the query terms common misspellings of the query terms foreign language translations of the query terms possessive forms of the query terms domain names including the query terms among other variations. Truncation refers to the ability to search for terms with varying prefixes or suffixes. Details of truncation and various other search conventions will be apparent to those skilled in the art.

At the user device determines sources of content that are available to it. In this case the available sources of content include internal memory removable memory a remote data store the Internet a merchant store and a remote search entity . In some instances the search query may include a command line or other designator indicating one or more sources of content to search. If present the command line may be designated by any suitable character symbol button or other designator. In one example the symbol may be used to begin a command line identifying one or more sources of content to be searched. In that example the command line web indicates that the search should be performed on the web. However any other suitable designator may be used to offset a command line e.g. a checkbox a separate scope field a pull down menu etc. . Command lines may designate one or more whole sources of content e.g. the web remote data store internal memory etc. or some subset of a content source such as a particular website a type of content e.g. books music periodicals etc. a collection of items e.g. drama Dad s stuff etc. or any other subset of content.

At the user device may recognize any command line s that are present in the search query and at identify one or more sources of content to search. If as in the illustrated implementation no command line is found in the search query the search may default to one or more predetermined sources of content. In one implementation the search may default to searching local content stored in internal and or removable memory of the user device . Alternatively the search could default to search all available sources of content or any one or more of the other source of content available to the user device .

At the user device commences searching the one or more identified sources of content for the queried terms. In the illustrated example since no command line was entered the user device searches the default source s of media content in this case local memory of the device for the term politics. 

In some implementations the electronic items to be searched and or the manner of displaying the search results may vary depending on what the user was doing when the search was requested. In the implementation shown the user device determines at whether an electronic item is currently being displayed. If not e.g. if the search is requested from a home screen content manager screen etc. at the search module returns the search results in order of the number of instances that the queried term s appear in each electronic item. Thus the electronic item with the most instances or hits of the queried term s will be listed first. If an electronic item is being displayed e.g. the search is requested from a reading pane within an e book or other electronic item at the search module returns the search results with the presently displayed electronic item listed first if the queried term appears therein. In that case the remaining results are listed in order of the number of instances of the queried terms. If the queried term does not appear in the electronic item currently being displayed then the search results are displayed in the same manner as block .

In other implementations if a user is in the process of consuming an electronic item when the search is requested the search may be limited to the text of the electronic items being consumed prior to the search. Conversely if the user requests the search from outside an electronic item the search may encompass text of all electronic items accessible to the user device all electronic items in local memory of the user device or a subset of the electronic items e.g. a collection in local memory of the user device .

Referring back to the user may also be given the option at to manually set or alter the scope of the search. In one implementation the user may be able to scope the search by for example selecting the menu button on the search results screen in and choosing to scope the search based on one or more displayed menu items not shown . For example the user may be given the option to limit the search by type of content e.g. books periodicals music etc. by source of the content e.g. internal memory removable memory remote data store merchant store etc. and or by any number of other scoping tools.

Selection of one of the electronic items from the list of electronic items in may at cause a list of locations where the queried term s appear in the selected electronic item to be displayed. In one implementation the locations are invariant and are identified by invariant location reference identifiers. Invariant location reference identifiers as their name suggests make it possible to identify and communicate a specific location or segment of content in the electronic item regardless of screen size font type or size resolution or other display conditions of the computing device on which the electronic item is displayed. Generally this is accomplished by assigning unique reference identifiers at locations throughout the content of the electronic item or to individual segments of the electronic item. These reference identifiers are not dependent on display conditions of the computing device on which the electronic item is displayed. In that sense the reference characters are invariant.

There are numerous ways of providing invariant location reference identifiers in or in association with content of an electronic item. In addition there are a variety of ways in which electronic items may be partitioned and assigned invariant location reference identifiers. For example each invariant location reference identifier may be assigned to an individual character or word a group of words a sentence a paragraph a band of text of predetermined size a unit of data or some other division of the electronic item. Additional details of invariant location reference identification schemes can be found in U.S. patent application Ser. No. 11 693 677 filed Mar. 29 2007 and entitled Invariant Referencing in Digital Works. 

At excerpts of the electronic item comprising the queried term s in context with surrounding text may be displayed along with or instead of the locations where the queried term s appear in the selected electronic item. For example if a user selects the selectable block in adjacent to the Mar. 18 2007 edition of the New York Times an instance screen may be displayed showing the instances of the term politics in that edition of the New York Times.

Referring back to in addition to the list of electronic items containing the queried term s the search results screen may also include an entry for any electronic items that have yet to be indexed and are therefore not yet searchable. The search results screen also displays a dictionary link to view a definition of the query term s in one or more dictionaries stored in local memory of the user device. In this case the search results screen indicates that two dictionary definitions are available and may be viewed by selecting the selectable block next to the dictionary link . The search results screen may also include a list of other sources of content that may be searched. In this case the search results screen gives the user the option to search the web a specific website or the merchant store for the queried term. Of course the search results screen is but one possible way of displaying search results. Numerous other ways of presenting search results to a user will be apparent to one of skill in the art.

As mentioned above the search results screen includes an entry indicating how many electronic items are not yet searchable. A user may wish to know which electronic items are not yet searchable and when they can be expected to be indexed. Selection of the entry of not yet searchable items will bring up an indexing status screen such as that shown in . The indexing status screen may include a queue of electronic items that have been received but that are not yet indexed. The queue may be organized in order of receipt by the user device alphabetical order or any other suitable order. The queue may include an indexing status indicator for each electronic item e.g. indexing or not yet indexed . While not shown any electronic item shown as indexing may also include a progress bar or other indicator of how much of the item has been indexed and or remains to be indexed e.g. 60 indexed 40 remaining 500 bytes remaining 2 minutes remaining etc. .

Generally the electronic items will be indexed in the priority order listed in the queue. However a user may request to change the indexing priority order to have a later electronic item in the list indexed first by simply selecting the selector block next to the electronic item in the list. Once selected the indexing status indicator of the electronic item will change from not yet indexed to indexing and the selector block adjacent the electronic item will disappear. In other implementations the electronic items in the queue may be assigned an indexing priority by the user. For example the user may be given the opportunity to assign an indexing priority to each electronic item in the list e.g. by assigning a numerical or other ranking to the electronic items in the list .

Indexing refers to a process of organizing and cataloging terms used in one or more electronic items so that the electronic items can be readily searched for one or more query terms. Indexing for full text search may be performed in a number different ways. In one approach a single master index may be used to catalog terms used in all electronic items stored in memory along with the location of each respective term. In another approach each electronic item includes an item index of terms and the location of each term in that particular electronic item. In yet another approach both master and item indices are used. In this hybrid approach the master index includes a list of terms used in all electronic items stored in memory and each term in the master index is accompanied by a pointer to an entry in an item index for each electronic item. By using the hybrid approach if the master index is corrupted or lost it may be reconstructed from the individual item indices. Also if an item index is corrupted or lost the individual electronic item can be re indexed without the need to regenerate the master index. However every indexing technique has certain advantages and in various implementations any of the foregoing or other indexing techniques may be used to index content for search by a user device.

Similarly Item 2 has an item index including the locations in electronic item 2 of the terms Blue Brown Green and Grey among others. Item 3 has an item index including the locations in electronic item 3 of the terms Brown Cat Cow Dog Eel Fish Green Grey and Zebra among others.

A master index is also stored in memory of the user device . Typically a master index is provided for each memory accessible by the user device and includes terms used in all the electronic items stored on the respective memory. The master index includes a list of terms used in any of the electronic items stored in the respective memory. For each term the master index includes a reference to one or more item index entries. The references may include an identifier of the electronic item in which the term appears a number of times the term appears in the electronic item an occurrence count and a location in the item index corresponding to the term e.g. which entry in the item index . For example the term Apple in the master index is accompanied by a reference 1 3 1 indicating that the term appears in the first electronic item it appears three times in that item and it is the first entry in the item index for that electronic item. As another example the term Brown is accompanied by two references 2 2 2 and N 4 1. The reference 2 2 2 indicates that the term Brown appears in the second electronic item it appears twice in that item and is it is the second entry in the item index for that electronic item. The reference N 4 1 indicates that the term Brown also appears in the Nth electronic item it appears four times in that item and it is the first entry in the item index for that electronic item.

In this simple example only one electronic item data structure and one item index data structure are shown in memory . However in practice any number of electronic item data structures and corresponding item index data structures may be stored in memory. Also while generally only one master index data structure will be stored in memory in some instances multiple master index data structures may be present e.g. during merging as discussed in detail below .

As discussed above search indices are used to facilitate search of electronic items. When the user device receives an electronic item the item may not be searchable until a search index for the item has been obtained. In one implementation the user device may obtain search indices by downloading the indices from a server or other remote data store or by generating the indices at the device. In other implementations indices may additionally or alternatively be obtained by generation at a personal computer of the user or in any other suitable manner.

If the decision is made to generate the search index at the index module of the user device adds the electronic item to the queue of items to be indexed by the device e.g. the list shown in . The index will then be generated in the priority order of the queue or an order specified by the user. If the decision is made to download the search index at the user device downloads the search index e.g. using the to do list processing module . Once the index is obtained either by generation or downloading at the index is stored in memory of the user device for search by the search module .

At a searchable master index of terms is generated containing a list of terms used in any electronic items in a collection of electronic items. For each term the master index also includes a reference to each item index entry for the respective term. Thus if a term appears in five electronic items the master index may have five references to item index entries one for each electronic item. The references to item index entries may include among other things an identifier of the electronic item in which the term appears a number of times the term appears in the respective electronic item and a position at which the term is indexed in an item index for the respective electronic item. The master index eventually may include terms from multiple electronic items stored in memory of the user device or from a collection thereof. However at this stage of the method since only one electronic item has been indexed the master index may only include terms from the one indexed electronic item.

At an additional electronic item may be added to the collection of electronic items stored in memory of the user device . At a searchable item index of terms in the added electronic item is generated and at the master index is updated to include the terms from the added electronic item. In this way as additional electronic items are added the terms used in each are added to the master index so that they become text searchable on the user device .

At some point during the index generation process at a status of the index generation may be displayed to the user. The status may be displayed by an index status screen such as screen or by any other suitable display method. In other examples an indexing status may be displayed on the content manager screen a home screen or in any other convenient manner. At a priority interface may be presented to the user by which the user can set or modify an order in which indices are to be generated. The priority interface may be combined with the index status display or may be a separate interface. Display of the index status and or the priority interface may occur at any time in method not necessarily in the order shown in . Also the index status and or priority interface may be displayed automatically upon the happening of some event e.g. receipt of a new electronic item and or upon request of the user.

Searching and indexing tend to be relatively processor intensive operations. Thus depending on the speed and processing resources of the processor indexing may interfere with and or delay other processes executing on the processor . To avoid any interference or delay in some implementations at indexing may be paused or slowed while other operations are performed by the processor. Whether indexing will be paused or slowed depends on the relative importance of the other operations to be performed by the processor . That is indexing may only be paused or slowed if the other processor operations are of higher priority than the indexing operation. Generally operations requested by the user or by a remote computing device e.g. item providing system will be of higher priority than indexing. However priority of various operations may be set in any desired order.

Several illustrative examples when indexing may be paused include during interaction or purchase of an item from the merchant store during download of an item from the content delivery module or the personal media library while browsing the Internet while refreshing a display or the like. In some instances the other operation to be performed may not require the full processing resources of the processor and or may only require processing intermittently. In those cases indexing may only be slowed rather than paused. Several illustrative examples when indexing may be slowed include while playing audio items using the audio player module and while browsing the Internet. Of course in various other implementations indexing may be paused or slowed in response to these and or any other operation that requires processing. Pausing and or slowing may occur at any time in method not necessarily in the order shown in .

At if another electronic item has been received to be added to the collection the method repeats acts for each additional electronic item. If no additional items are presently being added the method ends until a new electronic item is received.

Instead of generating the search index for a new electronic item the user device may determine at act in to download the search index from a remote computing device such as item providing system . Download of search indices is described below with respect to .

The method may be performed anytime before or after transmission of an electronic item from the remote computing device to the user device . At the remote computing device generates a searchable item index of terms in the electronic item and at generates a searchable item specific master index of terms in the electronic item. The item specific master index may in some instances consist only of terms used in the electronic item. In other instances e.g. if multiple electronic items were or will be transmitted near in time to one another the item specific master index may include terms used in the multiple electronic items e.g. those that were or will be transmitted near in time .

At the item and item specific master indices are stored in memory of the remote computing device for possible transmission to one or more user devices . The indices may at be compressed using one or more known compression techniques. If not already sent at an electronic item may be sent to a user device . Contemporaneously with or subsequent to transmission of the electronic item at the search indices may be sent to the user device . Transmission of the search indices may be dependent on a variety of different factors or business rules which are described in detail below. Alternatively search indices may be sent automatically with or following the electronic item to which they correspond.

At the user device receives the electronic item sent by the remote computing device and at may receive the search indices. At the electronic item is stored in memory of the user device as is the corresponding item index if one has been received. At the user device merges the item specific master index with an existing master index such that the existing master index is updated to include terms from the received electronic item.

Based at least in part on the hint at the user device determines if search indices are available for download. If at the user device determines that search indices are available for download at the user device requests the search indices from the remote computing device. Sometime after requesting the search indices at the user device checks to see if the requested indices have been received and if so saves the item index to memory and merges the item specific master index with an existing master index.

If at the user device determines that search indices are not available the electronic item is added to the queue of items to be indexed at the user device . In some instances if the indexing module of the user device gets behind e.g. the queue of items to be indexed exceeds a predetermined threshold the user device may re request to download the searchable indices. In some implementations the user device may only re request the indices if the hint indicated that search indices were available for the electronic item. At the user device checks to see if the search indices have been received and if so saves the item index to memory and merges the item specific master index with an existing master index.

If at the device determines that the indices have not been received the user device proceeds at to initiate search index generation generally as described with reference to . At if index generation fails the index module will retry to index the electronic item a predetermined number of times e.g. three . If the index operation fails the predetermined number of times the index module may stop trying to index the electronic item and the process may end until the next time the user device is rebooted. This limit on the number of indexing tries prevents unnecessary processor cycles and therefore conserves battery power if an electronic item is corrupted or is otherwise un indexable.

Upon receipt of a request for the search indices the item providing system applies one or more business rules at to determine whether to send the requested search indices. The business rules specify one or more factors to determine whether to send the requested indices. By way of example and not limitation the business rules may be based on factors such as 

Any number of one or more business rules may be applied in any combination to determine whether to send requested indices. Upon application of the business rules the item providing system determines at whether the requested indices are to be sent. If yes at the requested indices are sent to the user device and the process ends unless until another electronic item is transmitted to the user device. If at the item providing system determines not to send the requested indices the item providing system may do nothing. Alternatively the item providing system may send a message indicating that the search indices will not be provided and or sending an advertisement prompting the user to upgrade to premium service to receive search indices.

At the item providing system may receive a re request for the search indices indicating that a queue of items to be indexed by the user device exceeds a predetermined threshold i.e. the device is getting backlogged . The re request may include a request for the item providing system to apply alternative business rules. Alternatively the item providing system may recognize that this is a second or subsequent request for the search indices and may independently determine to apply alternative business rules. In any event at the item providing system applies one or more alternative business rules to determine whether to send the search indices. The alternate business rules may be based on factors such as those listed above relative to the normal business rules as well as others such as whether a queue of electronic items to be indexed at the user device exceeds the predetermined threshold for example.

If at the item providing system determines that the re requested indices should be sent at the requested indices are sent to the user device and the process ends unless until another electronic item is transmitted to the user device. If at the item providing system determines that the re requested indices still should not be sent at the item providing system may take no action may send a rejection message or may send an ad e.g. to upgrade to a premium account .

At the item providing system receives the request for the search index and applies business rules to determine whether to send the requested search indices. At the item providing system either sends the requested search indices sends a message e.g. rejecting the request sending an ad etc. or does nothing. If the user device receives the requested indices the process ends at otherwise the user device generates indices at the device unless until a queue of items to be indexed at the device exceeds a predetermined threshold. Upon exceeding the predetermined threshold the user device may at re request that the search indices be sent. At the item providing system receives the re request and applies alternate business rules to determine whether to send the search indices now that the user device is backlogged. Based on the alternate business rules the item providing system either sends the requested search indices sends a message or does nothing.

Like indexing search is a relatively processor intensive operation. Accordingly in the past portable devices have leveraged greater processing power of remote computing devices to perform Internet search and the like. However performing search on a remote computing device means that search cannot be performed when the portable device is out of communication with the remote computing device. Accordingly it may be desirable in some instances to perform search on the portable device. Performing search at the portable device however burdens the processor of the portable device and as a result uses more power.

At the user device locates the query term s in the master index the located terms are shown in bold in the master index . At the user device determines how many times each query term appears in each electronic item and generates a list of electronic items having at least one instance of each query term. The list of electronic items having at least one instance of each query term is shown to the right of block .

At the user device applies logic to determine a fuzz factor for each electronic item. The fuzz factor is a number that can be derived using minimal processing but which is indicative of the relative likelihood that each electronic item will have the query terms located within the predetermined proximity i.e. near value or NV of one another. Generally the more instances of the query terms the more likely that some of the query terms will be located within a near value of one another. In the illustrated implementation the fuzz factor comprises an average of the number of instances of each query term for item 2 the average of 12 and 2 is 7 . However in other implementations other logic may be used to determine a suitable fuzz factor. For example in another implementation the fuzz factor may be equal to the minimum number of instances of all the query terms. Applying this alternative logic the fuzz factor for item 2 would be 2 the number of instances the second query term .

The annotated flowchart of method continues at . At the list of electronic items with at least one instance of each query term is sorted based on the fuzz factor. From the sorted list at the user device identifies a predetermined number of R entries having query terms located within a predetermined distance i.e. near value from one another. Distance may be calculated in terms of units such as character count word count byte offset or any other measure of distance. Entries for electronic items having terms located less than a near value apart are said to have a near value match NVM . Five of the entries shown in bold in the list to the right of block have a NVM. The near value may be a fixed number e.g. 1 2 3 or more units apart or a variable. For example near value may increase with length of the electronic item number of search query terms entered e.g. if three search terms are queried they may be further apart than if only two search terms are queried average word size of the electronic item and or and or any other factor affecting the proximity of search query terms to one another.

At the predetermined number R of items having near value matches are then displayed to the user in a manner similar to that shown in . Electronic items having the most near value matches will be listed first unless the search was initiated from within an electronic item having a near value match in which case the open electronic item will be listed first.

If the user requests at to view the next R results the method returns to block to identify a next R entries having one or more near value matches. Otherwise the method proceeds to where the user device determines if the user has requested to view instances of one of the search results. If not the method ends until another search is performed or the scope of the search is changed. If at the user does request to view instances of a search result entry at the user device displays a first S instances of the requested search result entry in a manner similar to that shown in .

When a user device such as user device undergoes an event outside its control a wholesale event the user device may not know whether electronic items stored thereon have changed. By way of example and not limitation wholesale events may include connecting or disconnecting a universal serial bus plug or other data connection powering on or off the device connecting or disconnecting a removable memory the device waking from a sleep state downloading an electronic item to the device or any other event in which the user device is not in control.

In the event that electronic items have been added removed or altered one or more indices may need to be updated. For example if items have been added or modified those items may need to be indexed or re indexed. If items have been removed the indices may need to be removed or updated to remove terms. Likewise search results may need to be updated to reflect the addition or deletion of items.

One way to determine if electronic items on the user device have changed is to simply compare indices stored in memory of the device with a current directory of items on the device. However as discussed above processing resources on a portable device are at a premium. Thus it is desirable to avoid any unnecessary processing operations if possible particularly operations that are processor intensive. Comparison of the indices stored in memory of the device with the current directory of items on the device can be a processor intensive operation and in many cases is unnecessary since the content on the user device will not have changed during the wholesale event.

More specifically method comprises at applying a hash function to generate a first hash of a directory of electronic items on a device prior to an event such as a wholesale event. In one implementation the hash function comprises a Message Digest algorithm 4 MD4 hash function a Message Digest algorithm 5 MD5 hash function or a Secure Hash algorithm 1 SHA 1 hash function. However in other implementations any other hash function may be used that provides a relatively small fingerprint that will reflect small changes in the hashed directory. Different hash functions may be used depending on various design considerations for a given application such as error tolerance speed size etc. At the hash function is applied again to generate a second hash of the directory of electronic items after the event. The first and second has are compared at to determine if the directory has changed. If at the hashes are found to match the method recognizes at that electronic items on the user device have not changed during the event. Thus indexing is not performed unnecessarily and the process ends conserving battery life of the user device .

If at the hashes do not match the method proceeds to to delete any search results stored in cache. This is because if the hashes do not match that means that the cached search results may no longer accurately reflect the electronic items stored in memory of the device. For example if an e book was deleted during the event any cached search results including the deleted e book would be inaccurate. In contrast if an electronic item was added during an event the cached search results will not include any instances of the queried term in the added electronic item.

The flowchart of method continues in . At an electronic item in the directory is selected and at the user device determines whether the selected item appears in the master index. The item may be selected in order of the directory entries in alphabetical order in order of most recent modification or in any other desired order. If at the item is not found in the master index the user device determines that the item has been added and at obtains searchable indices e.g. by downloading or generating see .

If the item does appear in the master index at the user device compares characteristics e.g. size and modification time of a directory entry for the electronic item with a master index entry for the electronic item to see if the entries match. If at the user device determines that the directory and master index entries do not match at the user device purges entries for the item from the master index and removes the item index for the item and proceeds to to re download or generate search indices for the item. If at the user device determines that the directory and master index entries do match at the user device checks to see if there are any other items in the directory and if so returns to block for each item in the directory.

After initiating download or generation of search indices at the user device also checks to see if there are any other items in the directory and if so returns to block for each item in the directory.

Once all the items in the directory have been compared and the user device determines at that no more items remain in the directory to be checked the method proceeds to then pick items entries from the master index and check to see if they are present in the directory. Specifically at the user device selects an item from the master index and at checks to see if the selected item appears in the directory. If the selected item is found at to be in the directory the user device checks at to see if there are other items remaining in the master index and if so repeats acts and for each item in the master index.

If at the item is not found in the directory at entries for the item are purged from the master index the item index is removed and the method proceeds to block to check to see if there are any more entries in the master index.

Content that is created by the item providing system may be readily indexed and searched by the user device using one or more of the techniques described above. However applications and other electronic items provided by third parties may not be readily searchable unless the user device has a way of determining where and how terms are used in the third party items. One way to allow the user device to index third party items is through the use of one or more plug ins. Plug ins may also be used in connection with applications and electronic items provide by or through the item providing system . Generally plug ins are applications that call one or more predetermined application programming interfaces APIs of a main application. In this case APIs provide a standard interface allowing third parties to create plug ins that interact with the programs and modules of the user device .

The plug ins may use one or more APIs to register themselves with the user device and or to exchange data with the user device . The search and index modules and of the user device can also call one or more APIs to request index information from the plug ins. In this way the search and index modules and can receive information necessary to index and search the electronic items such as terms that are used in the items and locations of those terms in the electronic items.

In one implementation when the user device receives an electronic item the index module calls an API to expose terms contained in the electronic item and a location of each term within the electronic item. Once the terms are exposed the index module indexes the electronic item by generating a searchable item index of terms in the electronic item and updating a searchable master index of terms in a collection of available electronic items to include the terms exposed using the API.

Alternatively the indexing may be carried out by a computing device such as item providing system . In that case once the terms are exposed the item providing system may generate an item index of terms in the electronic item and an item specific master index of terms in the electronic item. The item index and item specific master index may then be transmitted to a user device such as user device .

A variety of APIs may be provided which can be called by one or more modules of the user device the plug ins and or one or more electronic items themselves. For example an indexing API may be provided that is callable by the index module via a processor to expose terms contained in electronic items and a location of each term within the electronic items. A search API may be provided that is callable by the search module via a processor to expose terms contained in the electronic item in response to entry of a location within the electronic item. A navigation API may be provided that is callable by the processor to cause an electronic book reader to jump to a location corresponding to an entered location within the electronic item.

In addition to searching electronic items stored locally and searching the Internet directly it may be desirable in some instances to use one or more search entities to assist with a search. Some searches may be more easily handled by specific types of search entities. For example image searches and searches posed in the form of questions may not be satisfactorily performed based on a search query using a computer implemented search engine or search module.

As shown in the device side method begins at with receipt of a query in the form of a question. At the search query is transmitted to a remote search entity such as a human based search entity that relies on human input to generate search results. As mentioned above examples of human based search entities include Yahoo Answers available from Yahoo Inc. located in Sunnyvale Calif. Wondir Inc. located in Bethesda Md. or NowNow available from NowNow.com located in Seattle Wash.

At the user device receives an electronic item in the form of a booklet comprising search results. The booklet may contain one or more answers to the question posed in the search query. At the booklet is stored in memory of the user device. At the user device determines whether search indices are available from the remote search entity. In one implementation this determination may be made in a manner similar to the determination described in . If indices are available at the user device receives an item index of terms in the booklet and an item specific master index of terms in the booklet. At the item index is stored in memory the item specific master index is merged with an existing master index on the user device and the process ends.

If at indices are not available the user device proceeds at to generate an item index of terms in the booklet and at to update an existing master index to include terms from the booklet. In this manner the booklet is made text searchable by the user device.

As shown in the device side method begins at with receipt of a query from a user device in the form of a question. At the remote search entity receives input from one or more human searchers regarding the question. The query may be disseminated to the human searchers via a website email or any other suitable distribution mechanism. The human searchers may conduct their own searches of the Internet books or any other sources and then provide their answers to the question. The human searchers answers are then compiled at and transmitted to the remote user device at in the form of an electronic item such as a booklet. The booklet may contain multiple answers to the question posed in the search query. In some implementations the method may end here. However in other implementations the remote search entity may also at generate search indices e.g. item index and item specific master index and at transmit the search indices to the remote user device . In one implementation the search indices may be generated and transmitted in manners similar to those described with respect to .

While various illustrative device and system implementations have been described the components modules and features of these implementations may be rearranged modified and or may be omitted entirely depending on the circumstances.

Also while various illustrative methods have been described it should be understood that certain acts in the methods need not be performed in the order described may be rearranged modified and or may be omitted entirely depending on the circumstances.

Moreover any of the acts described above with respect to any method may be implemented by a processor or other computing device based on instructions stored on one or more computer readable media. Computer readable media can be any available media that can be accessed locally or remotely by the processor of the user device. By way of example and not limitation computer readable media may comprise volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer readable media includes but is not limited to RAM ROM PROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by the processor of the user device. Combinations of any of the above should also be included within the scope of computer readable media.

Disclosed herein are techniques for compensating for error in electronic components. The concepts described in this section represent some examples of the power management functionality shown in and described generally in section A above. In one described implementation a known signal is provided to a resistor. The signal is amplified using an operational amplifier op amp and measured. The measured signal is compared to the signal provided as input to the resistor to obtain a value for the error in the system. This error is applied to an unknown signal provided to the resistor so that the signal value is more accurately characterized when amplified. The error may be applied to the unknown signal using software hardware or a combination thereof to compensate for the error in the components such as the op amp.

According to another implementation a voltage signal is smoothed as a function of time in order to more accurately gauge battery life.

According to another implementation a power state module changes the power state of the device in response to a trigger event. The trigger event may be received using a voice mode and may indicate that a data module is available for transfer. For example the device may receive an indicator such as a ring that indicates the new data content is available. The device switches to a data mode to download the content. The process may be manual i.e. requiring interaction of a user automated or semi automated e.g. requiring user authorization but otherwise automated. The device may be returned to a standby mode upon receipt of the data. Using the voice mode to sense when new data is available reduces power consumption and allows the device to receive the data module when device is in a low power or stand by mode.

The techniques described herein may be implemented in a number of ways. One example environment and context is provided below with reference to the included figures and on going discussion.

Current measurement is typically done by measuring voltage across a resistor. The resistance value is known to within a few percent error. However the resistance value and therefore the error is usually amplified in order to have a value that is useful given the large dynamic range of current that constitute the operating range. At very low currents the voltage across that resister is very low which makes the error or offset voltage of the operational amplifier extremely significant.

Operational amplifiers are available that have offset compensation integrated with the hardware. However such hardware is complex expensive and typically requires mechanical maintenance for proper operation.

Software utilizes the error value to calculate a more accurate current value for the battery voltage level and may be a standalone program or may be integrated with other software provided on the device. The error value may be based on the output signal of the ADC or preselected by a user. Software may be power management software that watches the battery current and or voltage level to determine when to shut off particular components in the system.

Specifics of illustrative methods are described below. However it should be understood that certain acts need not be performed in the order described and may be modified and or may be omitted entirely depending on the circumstances. Moreover the acts described may be implemented by a computer processor or other computing device based on instructions stored on one or more computer readable media. The computer readable media can be any available media that can be accessed by a computing device to implement the instructions stored thereon.

At a first known voltage and or current signal is sent to a resistor. For example a known power source such as battery is sent to current sense resistor .

At the voltage drop across a resistor such as current sense resistor may be measured using a meter which may be an external meter or may be integrated with the device. A known voltage reading may be for example 0.59 millivolts my across the resistor. This value will be the basis for the first input value into the op amp.

At the signal across the resistor is provided to an op amp such as op amp . The op amp output V is measured. The op amp may have an assumed gain of for example 50. In theory V i.e. the output of op amp would simply be the input voltage of the op amp multiplied by the gain in this case 0.59 mv 50 or 29.5 mv. In practice however Vmay be much different. For example the measured Vmay be 72 mv. This discrepancy in values provides an error value of for example 42.5 i.e. 72 29.5 . However this error value is only as accurate as the assumed gain value. If the assumed gain value is incorrect the error value will also be incorrect. Therefore a more accurate gain determination may be utilized for a more accurate error value as described below.

At a second known voltage and or current signal is provided to the resistor to more accurately determine the error value.

At the voltage across the resistor is again measured. This value will be the basis for the second input value for the op amp.

At the signal across the resistor is provided to an op amp such as op amp and measured as a second output value.

At the error value is determined. According to one implementation the error is determined utilizing an assumed gain multiplying that gain value by the first input value to get an expected value and subtracting the expected value from the measured value to determine the error value. According to another implementation the first and second input values are compared to determine the difference in input value i.e. first input value second input value 

The first and second output values are compared to determine the difference in output value i.e. first output value second output value 

 is divided by to obtain the actual gain of the op amp. This actual gain is multiplied by for example the first known input value to determine the expected value. The expected value is subtracted from the first measured output to determine the error value.

As an example of one manner of calculating error consider the following example. A first known input value of 3.5 is provided to an op amp to produce an output of 200. A second known input value of 0.78 is provided to the op amp which produces an output of 56. The input values could be voltages or currents. For example The input values i.e. 3.5 and 0.78 may be derived by taking the measured current I and dividing it by 50 where 50 is selected on the basis that the current sense resister is 1 50 ohm i.e. 20 m . is 3.5 0.78 2.72 and is 200 56 144. Dividing the by the we get 52.94. This is the slope of a line representing the gain of the op amp circuit. Multiplying the gain by the input value and subtracting the result from the output value will give you the offset or error value e.g. 56 0.78 52.94 14.7068.

Yet another alternative for determining offset utilizes the output of an ADC connected in series to the op amp such as ADC connected to op amp . The output of the op amp can be treated similar to V except that an adjustment factor is added to the measured output of the ADC. The value of 4 may be selected as the adjustment factor due to the fact that such a value is one half the value of the least significant bit LSB .

Once the error value obtained it is stored and or utilized to correct for future Vvalues when an unknown voltage such as V is provided to the resistor. For example the error value may be added or subtracted from the V shown in to obtain a more accurate Vvalue. Compensating for Vin this manner corrects for the offset error that occurs in components such as the op amp during normal operation.

At an unknown voltage signal is applied to the resistor. This may occur during the normal operation of the device as the battery discharges thereby providing power to various components of the device.

At the signal is amplified by the op amp. This amplification creates a better quality signal for conversion in an ADC such as ADC . However as mentioned above the op amp has an associated offset value that creates an error in the signal.

At the value of amplified signal is adjusted using the error value. This adjustment may be performed using power management software other computer program. Thus the error value assists in compensating for the offset in the op amp affecting the operating voltage values that are experienced over time.

Using an error value and software to calculate the offset of an op amp or other power component is a more current conservative technique for correcting for component error than incorporating op amps having an offset adjustment into the circuit design. Op amps that have an offset adjustment typically draw more current than op amp which does not have offset adjustment. Moreover the error value may be fixed for a given components or for a given configuration. Therefore determining the error value need only be performed once in the life of the device or may be determined from time to time as needed. The process of determining the error value may be an aspect of a factory initialization. It may also be performed under certain boot conditions and so forth.

The compensated current values that are determined based on the error value described above may be used to better gauge the battery life. As more particularly described below approximating the voltage over time measurement to reduce the effect of spikes allows the battery life to be more accurately estimated and thus optimizes system performance.

The abrupt power spikes caused by for example components being turned on and off may be perceived by one or more monitoring mechanisms with the device to signify the need to disable certain components to conserve power. In simplest terms the system may have certain watermarks or thresholds that determine how the device will manage or distribute power. For example if Vfalls below V certain software programs may be shut down to conserve power. If Vfalls below V certain hardware components may be disabled in order to conserve power. The power spikes may temporarily drive the voltage value below one or both of these thresholds. These thresholds are intended as indicators of the Vcurve is approaching a point tor tand therefore that the battery is approaching a low or fully discharged value. However the power spikes may temporarily drop power below the Vand Vat times tand t respectively. Thus software and or hardware associated with the power management module smoothes the Vcurve to avoid the spikes affecting the power mode of the device. Additionally or alternatively the values for Vand or Vmay be adjusted to ensure that any spikes causes cause by components turning on or off will not exceed the adjusted and or Vvalues.

Specifics of illustrative methods are described below. However it should be understood that certain acts need not be performed in the order described and may be modified and or may be omitted entirely depending on the circumstances. Moreover the acts described may be implemented by a computer processor or other computing device based on instructions stored on one or more computer readable media. The computer readable media can be any available media that can be accessed by a computing device to implement the instructions stored thereon.

At battery voltage of an electronic device is measured. The measurement may be performed with integrated or external components.

At the current drawn by components of the device is obtained. This current value may reflect the error value adjustment to correct for offset in op amp .

At the series resistance value is determined. This may be a value based on characteristics of the board resistance the wiring and other resistance that is inherent with electrical circuitry.

At a battery voltage is obtained that more accurately represents the remaining power i.e. life remaining in the battery . This may be accomplished by performing the following equation. 

Vis the actual value obtained when measurement of Vis taken. Iis calculated using the error value described above. Ris an estimated value based on the board resistance the resistance of wiring and so forth. This value may be calculated and utilized by the software .

Although the power state systems and devices are described below this implementation is meant to serve as a non limiting example.

The trigger event sensor may be a wan switch to sense the availability of a network or for sensing data being sent to the portable device via the wan. The trigger event sensor is operable to sense an event that requires the power state of the device to be changed. According to one example the trigger event sensor senses when a data module is available to send to the portable device and the power state module changes the power state of the device from a first power state to a second power state to receive the data module. The trigger event may be sent to the device through a voice mode of a data connection or network.

The power state module may be a processor or other integrated circuit or electronic device that is operable to transfer a data module using a data transfer mode and to receive event signals using a voice mode. The processor is operable to receive the signals from the trigger event sensor to change the power states of device and to receive data from a remote source with or without user interaction and or notification.

According to one example the first power state is a standby mode state which may have voice mode capability and the second power state is a data transfer state. The standby mode state may allow the device to receive the event trigger signal such as a ping or ring across a voice mode such a cellular or wireless network. The event trigger signal causes the device to wake up from the standby mode. The event signal may indicate to the device that data content or digital items are available for download or push. In response the power state module may place the device into a second state to enable the download or push to occur. This may be a wide area network wan enabled mode. The processor may provide a notification to the user that data content or other digital items have been received. The processor then returns the device to the standby mode state after the data content or digital items have is received. The process of switching states may be controlled by software hardware or a combination thereof.

Various trigger events may alter the power state of the device . For example if a trigger event is received indicating that data is available for transfer and a trigger event is received that the battery level for device is near or below a threshold value the processor may ignore the data transfer trigger event. Additionally or alternatively the processor may record receipt of the data transfer trigger event and may notify the user that the trigger event was received but that due to power levels being near or below threshold values that the data transfer was not initiated.

The trigger event may also be indicator that indicates that a wired or wireless network is available. Such a trigger event could be received by the processor which may in turn enable a wired or wireless networking session.

Specifics of illustrative methods are described below. However it should be understood that certain acts need not be performed in the order described and may be modified and or may be omitted entirely depending on the circumstances. Moreover the acts described may be implemented by a computer processor or other computing device based on instructions stored on one or more computer readable media. The computer readable media can be any available media that can be accessed by a computing device to implement the instructions stored thereon.

At a signal is received by an electronic device. The signal may be sent via a wired or wireless network to which the device is connected. The signal may represent a trigger event as described above.

At a power state of the device may be changed from a first power state to a second power state in response to the trigger event. As described above one of the first and second power states is a wide area network wan enabled state and the other of the power states is a non wan enabled states. For example the trigger event may indicate that a data module is ready for transfer and may be received by the device using a data transfer mode when the device is in a wan enabled mode. In response to the trigger event the device may be placed in a second wan enabled mode that enables the data transfer. The device thereby conserves power by only changing power states in response to the trigger event. The device does not need to regularly check for available data modules but instead monitors for indications that data modules is ready using a low power voice mode.

In closing although the invention has been described in language specific to structural features and or methodological acts it is to be understood that the invention defined in the appended claims is not necessarily limited to the specific features or acts described. Rather the specific features and acts are disclosed as exemplary forms of implementing the claimed invention.

