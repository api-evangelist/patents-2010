---

title: Migrating virtual machine operations
abstract: Embodiments relate to systems and methods for reclassifying a set of virtual machines in a cloud-based network. The systems and methods can analyze virtual machine data to determine performance metrics associated with the set of virtual machines, as well as target data to determine a set of target machines to which the set of virtual machines can be reassigned or reclassified. In embodiments, benefits of reassigning any of the set of virtual machines to any of the set of target virtual machines can be determined. Based on the benefits, the systems and methods can reassign or reclassify appropriate virtual machines to appropriate target virtual machines.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09606831&OS=09606831&RS=09606831
owner: Red Hat, Inc.
number: 09606831
owner_city: Raleigh
owner_country: US
publication_date: 20101130
---
The present teachings relate to systems and methods for reclassifying virtual machines to target virtual machines and more particularly to platforms and techniques for reassigning virtual machines or appliances based on a code analysis.

Cloud computing environments utilize shared resources software and information that can be provided for use by end users. For example a service level agreement SLA can be entered into between a vendor such as an independent software vendor ISV and a cloud network provider whereby the cloud network provider agrees to commit an amount of resources associated with virtual machines in the cloud network for use by end users during operation of software products and applications of the vendor. In return the cloud network provider can charge the vendor a specified rate in proportion to the amount of committed resources. The cloud network provider provides or maintains an amount of resources in the cloud network such as server uptime persistent storage software application instantiation network performance cloud storage support response time and other elements.

A class of virtual machines can be instantiated in a cloud network for use by end users. In particular the virtual machines can have specified sets of applications operating systems and other software and hardware modules. An administrator of the cloud network may wish to optimize usage of the class of virtual machines. More particularly the administrator may wish to ensure that the end users are efficiently operating the class of virtual machines. However it is sometimes the case that the actual usage of the virtual machines by the end users is not efficient or optimized. Further the administrator of the cloud network may desire to locate or instantiate additional virtual machines that efficiently support usage by the end users.

Therefore it may be desirable to provide systems and methods for reclassifying virtual machines to target virtual machines. In particular it may be desirable to reclassify some or all of a set of virtual machines based on a code analysis of resources of the set of virtual machines from which an advantage benefit efficiency gain and or other effect can be realized.

Embodiments of the present teachings relate to systems and methods for reclassifying virtual machines to target virtual machines. In particular embodiments relate to reassigning virtual machines or appliances based on a code analysis from which an advantage benefit efficiency gain and or other effect can be realized. A cloud network can have a specified amount of virtual machines or other resources to execute software modules and to be utilized by for example end users. For example the virtual machines and other resources of the cloud network can be deployed as a Software as a Service SaaS . An administrator of the cloud network can desire to reclassify some or all of the virtual machines or other resources to tarqet virtual machines or other resources.

According to embodiments a virtual machine VM management tool or other logic can analyze a set of virtual machines or other resources in a host cloud to determine resource consumption metrics of the virtual machines or other resources. The VM management tool can determine which of the set of virtual machines or other resources may benefit from a reclassification to a different class or type of virtual machine or other resources. In embodiments the VM management tool can locate target virtual machines within the host cloud or other clouds that can support operations of the existing virtual machines. The VM management tool can reassign or reclassify the existing virtual machines to the target virtual machines to better utilize end user operation patterns and metrics.

In embodiments the VM management tool can be configured to provide relevant data or information to an administrator of any of the clouds or virtual machines such that the administrator can determine a reclassification or reassignment plan for any of the virtual machines. For example the administrator may wish to use virtual machine analysis data or other data to examine or generate a business model based on an hourly rate consumption rate or other metrics and determine potential candidate virtual machines based on any relevant business models.

Embodiments as described herein can be implemented in or supported by a cloud network architecture. As used herein a cloud can for instance refer to a cloud based network comprising a collection of resources that can be invoked to instantiate a virtual machine process appliance or other resource for a limited or defined duration. As used herein an end user can for instance refer to a person customer subscriber corporation organization or other entity accessing files and or devices storing the files in the cloud. In embodiments the end user can operate or manage computer software or hardware that can access files and or devices storing the files in the cloud based network. Further as used herein an administrator of a cloud can for instance refer to a person owner corporation organization or other entity having authoritative power to initialize oversee or otherwise manage the operation of a cloud.

As used herein the system of a cloud can for instance refer to software and hardware as a whole such as for example virtual machines appliances applications programs servers device drivers storage such as hard drives virtual memory databases random access memory RAM and other memory processors multimedia cards and the like in the cloud. The system can be accessed by users or by software or applications independent from or associated with the system of the cloud. In embodiments vendors such as ISVs can supply software resources for use with the system in the cloud. The system can further comprise any communications resources such as ports or channels provided to a virtual machine or other machine or process in the cloud. The system can also support services such as Web based services deployed in the cloud for example security or identity management services and or other resources. As used herein a module or software module can for instance refer to any type of software application program computer code and the like that is part of the system of the cloud. The software modules can be executed by users the system itself an administrator or any other entity.

As used herein an analysis can for instance be any static or dynamic analysis performed on a software module program data or program code that can be examined to determine an advantage benefit efficiency gain and or other effect of a reclassification or reassignment. As used herein optimize can for instance be a general term that can refer to the best available option. In other words an optimized configuration need not represent the best possible configuration but instead can mean the preferred configuration of the possible configurations. Further the term optimize can for instance also mean maximize enhance improve or other terms related to a preferred or improved performance level. Still further as used herein a simulation can for instance refer to a projection model analysis assessment breakdown evaluation and other terms that can refer to any type of analysis of data.

In embodiments the entire set of resource servers or other hardware or software resources used to support the cloud along with its instantiated virtual machines is managed by a cloud management system . The cloud management system can comprise a dedicated or centralized server and or other software hardware and network tools that communicate via network such as the Internet or other public or private network with all sets of resource servers to manage the cloud and its operation. To instantiate a new set of virtual machines a user can transmit an instantiation request to the cloud management system for the particular type of virtual machine that the user desires to invoke for its intended application. A user can for instance make a request to instantiate a set of virtual machines configured for email messaging or other applications from the cloud . The request can be received and processed by the cloud management system which identifies the type of virtual machine process or other resource being requested. The cloud management system can then identify the collection of resources necessary to instantiate that machine or resource. In embodiments the set of instantiated virtual machines or other resources can for example comprise virtual transaction servers used to support Web storefronts or other transaction sites.

In embodiments the user s instantiation request can specify a variety of parameters defining the operation of the set of virtual machines to be invoked. The instantiation request for example can specify a defined period of time for which the instantiated machine or process is needed. The period of time can be for example an hour a day or other increment of time. In embodiments the user s instantiation request can specify the instantiation of a set of virtual machines or processes on a task basis rather than for a predetermined amount of time. For instance a user could request resources until a software update is completed. The user s instantiation request can specify other parameters that define the configuration and operation of the set of virtual machines or other instantiated resources. For example the request can specify an amount of processing power or input output I O throughput the user desires to be available to each instance of the virtual machine or other resource. In embodiments the requesting user can for instance specify a service level agreement SLA acceptable for their purposes. Other parameters and settings can be used. One skilled in the art will realize that the user s request can likewise include combinations of the foregoing exemplary parameters and others.

When the request to instantiate a set of virtual machines or other resources has been received and the necessary resources to build that machine or resource have been identified the cloud management system can communicate with one or more of the set of resource servers to locate resources to supply the required components. The cloud management system can select providers from the diverse set of resource servers to assemble the various components needed to build the requested set of virtual machines or other resources. It may be noted that in some embodiments permanent storage such as hard disk arrays may not be included or located within the set of resource servers available to the cloud management system since the set of instantiated virtual machines or other resources may be intended to operate on a purely transient or temporary basis. In embodiments other hardware software or other resources not strictly located or hosted in the cloud can be leveraged as needed. For example other software services that are provided outside of the cloud and hosted by third parties can be invoked by in cloud virtual machines. For further example other non cloud hardware and or storage services can be utilized as an extension to the cloud either on an on demand or subscribed or decided basis.

With the resource requirements identified the cloud management system can extract and build the set of virtual machines or other resources on a dynamic or on demand basis. For example one set of resource servers may respond to an instantiation request for a given quantity of processor cycles with an offer to deliver that computational power immediately and guaranteed for the next hour. A further set of resource servers can offer to immediately supply communication bandwidth for example on a guaranteed minimum or best efforts basis. In other embodiments the set of virtual machines or other resources can be built on a batch basis or at a particular future time. For example a set of resource servers may respond to a request for instantiation at a programmed time with an offer to deliver the specified quantity of processor cycles within a specific amount of time such as the next 12 hours.

The cloud management system can select groups of servers in the set of resource servers that match or best match the instantiation request for each component needed to build the virtual machine or other resource. The cloud management system can then coordinate the integration of the completed group of servers from the set of resource servers to build and launch the requested set of virtual machines or other resources. The cloud management system can track the combined group of servers selected from the set of resource servers or other distributed resources that are dynamically or temporarily combined to produce and manage the requested virtual machine population or other resources.

In embodiments the cloud management system can generate a Resource aggregation table that identifies the various sets of resource servers

that will be used to supply the components of the virtual machine or process. The sets of resource servers can be identified by unique identifiers such as for instance Internet protocol IP addresses or other addresses. The cloud management system can register the finalized group of servers in the set of resource servers contributing to an instantiated machine or process.

The cloud management system can then set up and launch the initiation process for the virtual machines processes or other resources to be delivered from the cloud. The cloud management system can for instance transmit an instantiation command or instruction to the registered group of servers in the set of resource servers . The cloud management system can receive a confirmation message back from each participating server in the set of resource servers indicating a status regarding the provisioning of their respective resources. Various sets of resource servers may confirm for example the availability of a dedicated amount of processor cycles amounts of electronic memory communications bandwidth or applications or other software prepared to be served.

As shown for example in the cloud management system can then instantiate one or more than one set of virtual machines or other processes based on the resources supplied by the registered set of resource servers shown in . In embodiments the cloud management system can instantiate a given number for example 10 500 1000 or other numbers of virtual machines to be made available to users on a network such as the internet or other public or private network. Each virtual machine can be assigned an instantiated machine ID that can be stored in the resource aggregation table or other record or image of the instantiated population. Additionally the cloud management system can store the duration of each virtual machine and the collection of resources utilized by the complete set of instantiated virtual machines .

In embodiments the cloud management system can further store track and manage a user s identity and associated set of rights or entitlements to software hardware and other resources. Each user that populates a set of virtual machines in the cloud can have specific rights and resources assigned and made available to them. The cloud management system can track and configure specific actions that a user can perform such as provision a set of virtual machines with software applications or other resources configure a set of virtual machines to desired specifications submit jobs to the set of virtual machines or other host manage other users of the set of instantiated virtual machines or other resources and other privileges or actions. The cloud management system can further generate records of the usage of instantiated virtual machines to permit tracking billing and auditing of the services consumed by the user. In embodiments the cloud management system can for example meter the usage and or duration of the set of instantiated virtual machines to generate subscription billing records for a user that has launched those machines. Other billing or value arrangements are possible.

The cloud management system can configure each virtual machine to be made available to users of the network via a browser interface or other interface or mechanism. Each instantiated virtual machine can communicate with the cloud management system and the underlying registered set of resource servers via a standard Web application programming interface API or via other calls or interfaces. The set of instantiated virtual machines can likewise communicate with each other as well as other sites servers locations and resources available via the Internet or other public or private networks whether within a given cloud or between clouds.

It may be noted that while a browser interface or other front end can be used to view and operate the set of instantiated virtual machines from a client or terminal the processing memory communications storage and other hardware as well as software resources required to be combined to build the virtual machines or other resources are all hosted remotely in the cloud . In embodiments the set of virtual machines or other resources may not depend on or require the user s own on premise hardware or other resources. In embodiments a user can therefore request and instantiate a set of virtual machines or other resources on a purely off premise basis for instance to build and launch a virtual storefront or other application.

Because the cloud management system in one regard specifies builds operates and manages the set of instantiated virtual machines on a logical level the user can request and receive different sets of virtual machines and other resources on a real time or near real time basis without a need to specify or install any particular hardware. The user s set of instantiated machines processes or other resources can be scaled up or down immediately or within a short period of time on an on demand basis if desired. In embodiments the various sets of resource servers that are accessed by the cloud management system to support a set of instantiated virtual machines or processes can change or be substituted over time. The type and operating characteristics of the set of instantiated virtual machines can nevertheless remain constant or almost constant since instances are assembled from abstracted resources that can be selected and maintained from diverse sources based on uniform specifications.

In terms of network management of the set of virtual machines that have been successfully configured and instantiated the cloud management system can perform various network management tasks including security maintenance and metering for billing or subscription purposes. The cloud management system of a given cloud can for example install or terminate applications or appliances on individual machines. The cloud management system can monitor operating virtual machines to detect any virus or other rogue process on individual machines and for instance terminate the infected application or virtual machine. The cloud management system can likewise manage an entire set of instantiated virtual machines or other resources on a collective basis for instance to push or deliver a software upgrade to all active virtual machines. Other management processes are possible.

In embodiments more than one set of virtual machines can be instantiated in a given cloud at the same overlapping or successive times. The cloud management system can in such implementations build launch and manage multiple sets of virtual machines based on the same or different underlying set of resource servers with populations of different instantiated virtual machines such as may be requested by different users. The cloud management system can institute and enforce security protocols in a cloud hosting multiple sets of virtual machines. Each of the individual sets of virtual machines can be hosted in a respective partition or sub cloud of the resources of the main cloud . The cloud management system of a cloud can for example deploy services specific to isolated or defined sub clouds or isolate individual workloads processes within the cloud to a specific sub cloud. The subdivision of the cloud into distinct transient sub clouds or other sub components which have assured security and isolation features can assist in establishing a multiple user or multi tenant cloud arrangement. In a multiple user scenario each of the multiple users can use the cloud platform as a common utility while retaining the assurance that their information is secure from other users of the overall cloud system. In further embodiments sub clouds can nevertheless be configured to share resources if desired.

In embodiments and as also shown in the set of instantiated virtual machines generated in a first cloud can also interact with a set of instantiated virtual machines or processes generated in a second third or further cloud . Further the cloud management system of the first cloud can interface with the cloud management system of the second cloud to coordinate those domains and operate the clouds and or virtual machines or processes on a combined basis. The cloud management system of a given cloud can track and manage individual virtual machines or other resources instantiated in that cloud as well as the set of instantiated virtual machines or other resources in other clouds.

Further it should be appreciated that the VM management tool can be configured to interface with additional clouds not shown in figures and associated system resources such as virtual machines of the additional clouds. Further still it should be clear that although depicts the VM management tool in association with the cloud management system of the cloud in certain embodiments the VM management tool can instead be associated with one or more additional clouds.

In embodiments the administrator can be any person owner corporation organization or other entity having authoritative power to initialize oversee or otherwise manage the operation of the cloud and any associated resources. In embodiments the administrator can manage the delivery or provisioning of software applications or other software hardware or other products or services such as products and services of one or more ISVs not shown in figures to end users accessing the cloud . In embodiments the end users can access the set of virtual machines of the system . It should be appreciated that the administrator can enter into one or more service agreements with vendors or other entities to provide resources to end users in one or multiple clouds and or across multiple products and or product lines. It should further be appreciated that the administrator can oversee multiple target or candidate virtual machines or clouds and can communicate and contact other respective administrators of the multiple target or candidate virtual machines or clouds.

In embodiments the VM management tool can receive and analyze VM analysis data for potential reclassification or reassignment of one or more of the set of virtual machines . In some embodiments the VM analysis data can comprise data associated with software or hardware modules of the set of virtual machines . For example the VM analysis data can detail the software or hardware modules that execute on or are otherwise supported by the set of virtual machines . In some embodiments the VM analysis data can detail an analysis of program code associated with the software modules. For example the VM analysis data can include one or more of input output I O data memory usage data storage data central processing unit CPU consumption data and other processing data redundancy data network transmission data and any other data associated with an execution or support of software modules or other resources of the set of virtual machines . In some embodiments the VM analysis data can indicate data relating to the operations of a set of appliances of the system .

In embodiments the VM management tool can statically or dynamically simulate model or otherwise analyze the VM analysis data to determine information related to the software or hardware modules of the set of virtual machines . For example the VM management tool can determine from the VM analysis data how much memory a certain virtual machine uses over a certain time period and can determine that the virtual machine may benefit from an upgrade or downgrade in the amount of instantiated memory. For further example the VM management tool can determine from the VM analysis data the daily average amount of data that another virtual machine transfers and can determine that the virtual machine can benefit from an upgrade or downgrade in a data transfer capacity. It should be appreciated that the VM management tool can determine any other metrics associated with the software or hardware modules from the VM analysis data or any potential benefits or Improvements for the set of virtual machines . In embodiments the VM management tool can perform a static analysis on a header file a manifest file a metadata file or the like that can specify resources required by a service an application and or a virtual machine.

In embodiments the VM management tool can receive determine or detect data relating to a set of target virtual machines . In embodiments the set of target virtual machines can be in the cloud or in other clouds. The VM management tool can simulate model or otherwise analyze the data relating to the set of target virtual machines to determine the ability of the set of target virtual machines to initialize execute or otherwise support a reclassification or reassignment of any of the set of virtual machines . For example the VM management tool can detect that one of the set of target virtual machines has the ability to initialize execute or otherwise support modules that operate on one of the set of virtual machines .

Still further in embodiments the VM management tool can perform any sort of benefit simulation model or analysis to determine which ones of the set of virtual machines would benefit from a reassignment to or reconfiguration or reclassification in any of the set of target virtual machines . For example the VM analysis data can reveal that one of the set of virtual machines would benefit from a security enhanced operating system and the VM management tool can detect that one of the set of target virtual machines comprises a security enhanced operating system. The VM management tool can reassign that virtual machine to the detected target virtual machine that comprises the security enhanced operating system. For further example the VM analysis data can indicate that one of the set of virtual machines comprises a communication bandwidth that is not being efficiently consumed and the VM management tool can detect a target virtual machine that comprises a reduced communication bandwidth. The VM management tool can reassign that virtual machine to one of the detected target virtual machine that comprises a lower communication bandwidth. In embodiments the VM management tool can reclassify any virtual machine in accordance with the selected target virtual machine according to any system or convention. It should be envisioned that the VM management tool can determine any sort of benefit to reassigning any of the set of virtual machines to any of the set of target virtual machines .

In embodiments the VM management tool can instantiate one or more new virtual machines not shown in figures to support a reclassification or reassignment of any of the set of virtual machines . In some embodiments the VM management tool can determine that the set of target virtual machines cannot offer what the set of virtual machines would benefit from and can instead instantiate a set of new virtual machines to support a reclassification or reassignment of the set of virtual machines . For example the VM analysis data can indicate that one of the set of virtual machines would benefit from a reclassification to a 4 processor virtual machine. If none of the set of target virtual machines offers 4 processors then the VM management tool can instantiate a new virtual machine comprising 4 processors and can reassign the virtual machine to the instantiated new virtual machine.

As an output the benefit analysis can yield a determination as to whether it is beneficial for any reason to reassign or reclassify one or more of the set of virtual machines to one or more of the set of target virtual machines . For example the benefit analysis can indicate that reassigning each of the set of virtual machines to the set of target virtual machines is beneficial for cost purposes. For further example the benefit analysis can indicate that instantiating a set of new virtual machines to support operations of a set of existing virtual machines is beneficial for resource consumption purposes. In embodiments an agreement such as an SLA can be entered into among one or more respective cloud providers one or more vendors and or one or more end users.

In embodiments the VM management tool can notify the administrator of the benefits of reclassifying or reassigning any of the set of virtual machines . In embodiments the administrator can be notified of any of the results of any of the analysis performed by VM management tool in any way and via any data communication. Further in embodiments the VM management tool can generate or provide a reclassification reconfiguration or reassignment recommendation or offer to an administrator owner or other user associated with the cloud or other clouds. Further In embodiments the offer can be directed to multiple administrators or entities associated with multiple clouds having the capability to support the set of virtual machines . It should be appreciated that the administrator or other entity can contact an administrator or a user associated with any existing clouds in any way with any type of information or offer.

As an example and as a merely exemplary application of systems and methods as described herein a cloud administrator may wish to explore options to improve usage of a set of three virtual machines VM A VM B and VM C. In embodiments analysis data of the set of three virtual machines can be compiled and analyzed by the VM management tool or other logic. The analysis can indicate that VM A would benefit from an upgraded operating system that VM B is operating efficiently and that VM C would benefit from a downgrade in memory. The VM management tool or other logic can locate or detect a set of target virtual machines that can be candidates on which to reclassify or migrate VM A and VM C.

In such an exemplary application the VM management tool or other logic can analyze the set of target virtual machines and determine that a target VM A offers an upgraded operating system and that a target VM C offers a reduced amount of memory. In embodiments the VM management tool or other logic can run a simulation or model to confirm that reassigning or reclassifying VM A to target VM A is beneficial and reassigning or reclassifying VM C to target VM C is beneficial. The VM management tool or other logic can reassign or reclassify VM A to target VM A and VM C to target VM C. In embodiments the VM management tool or other logic can provide a reassignment or reclassification recommendation to an administrator associated with the virtual machines or an associated cloud network.

Processor can also communicate with computer readable storage medium and the module migration tool to execute control logic identify usage histories for producing optimized cloud utilization in the cloud as described herein and control the operation of virtual machines and other resources in cloud . Other configurations of cloud management system associated network connections and other hardware and software resources are possible.

In a set of new configurations for the set of virtual machines to improve operation of the set of virtual machines can be determined. In embodiments the set of new configurations can specify any sort of hardware or software associated with the operation of the set of virtual machines. In data related to resources in a set of target virtual machines can be detected. In embodiments the resources in the set of target virtual machines can be associated with any sort of hardware or software of the set of target virtual machines.

In it can be determined if the set of target virtual machines is capable of supporting operations of any of the set of virtual machines. In embodiments the determination can be based on whether the resources in the set of target virtual machines can support the set of new configurations needed to improve operation of the set of virtual machines. Further in embodiments the set of target virtual machines can offer resources that can improve performance of the operations of the set of virtual machines. In if the set of target virtual machines is capable any of the set of target virtual machines can be reconfigured or reassigned to support operations of any of the set of virtual machines. In embodiments one or more of the set of virtual machines can be reassigned to one or more of the set of target virtual machines that can improve performance of the operations of the set of virtual machines. In if the set of target virtual machines is not capable a new set of virtual machines with a configuration to support operations of any of the set of virtual machines can be instantiated. In embodiments the new set of virtual machines can be instantiated with the set of new configurations needed to improve operation of the set of virtual machines. In reconfiguration reassignment or instantiation information can be provided to an administrator of any of the set of virtual machines. In embodiments the information can be provided to any administrator or entity associated with the host cloud set of virtual machines set of target virtual machines or new set of virtual machines. In processing can end.

The foregoing description is illustrative and variations in configuration and implementation may occur to persons skilled in the art. For example while embodiments have been described which operate using one VM management tool and associated cloud management system in embodiments one or more of VM management tool and associated cloud management system and or other servers data stores and or other logic or resources can be used. Other resources described as singular or integrated can in embodiments be plural or distributed and resources described as multiple or distributed can in embodiments be combined. The scope of the present teachings is accordingly intended to be limited only by the following claims.

