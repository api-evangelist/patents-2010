---

title: Proactive distribution of virtual environment user credentials in a single sign-on system
abstract: An environment manager in a computer executes multiple environments concurrently. A user management framework (UMF) virtual machine an the computer runs an authentication domain that supports user profile management of the multiple environments.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09183023&OS=09183023&RS=09183023
owner: Hewlett-Packard Development Company, L.P.
number: 09183023
owner_city: Houston
owner_country: US
publication_date: 20100701
---
This application is a national stage application under 35 U.S.C. 371 of PCT US2010 040779 filed 1 Jul. 2010.

Hypervisors provide a software virtualization environment in which other software including operating systems can run with the appearance of full access to the underlying system hardware even though such access is actually under the control of the hypervisor. Embedded bare metal hypervisors are hypervisors that support the requirements of embedded systems development.

As provided herein various methods systems an apparatuses introduce a user management framework that integrates the notion of client device user authentication management to a environment manager s handling of virtual machines VMs . As used herein an environment manager refers to any entity that manages multiple environments. Environments may include virtual machines virtual appliances partitions hard disk drives etc. Examples of environment managers include hypervisors hardware controllers and VMMs virtual machine monitors . While embodiments described herein are applicable to any environment manager various described embodiments refer specifically to a hypervisor implementation. In other words various embodiments could employ other environment managers besides a hypervisor as described.

Many hypervisors do not contemplate the notion of a user let alone a local device user or an administrator and therefore do not handle user authentication. By integrating the concept of user profiles including roles such as for example system users into the hypervisor embodiments described herein deliver authentication and or single sign on SSO functionality to virtualized client devices including virtualized enterprise client devices allowing users to configure access profiles according to their authorized roles.

A Trusted Client User Management Framework hereinafter referred to as UMF implements a scalable architecture to handle multiple user and different profiles providing security and isolation on top of a hypervisor such as a Xen based hypervisor available from Citrix Systems Inc. of Fort Lauderdale Fla. Other specific types of hypervisors including embedded bare metal hypervisors may be used in embodiments described herein. UMF incorporates the concept of hypervisor users and roles while adding an authentication UI user Interface into a hypervisor access control center referred to herein as an authentication domain. Global environment user identities GEIDs may be mapped to user identities for administrative domains of individual environments e.g. VMs with support for software appliances. As used herein a software appliance refers to a software application that includes sufficient operating system OS functionality to run as a virtual machine.

Authentication domain is an extension of hypervisor and runs as a service in UMF virtual machine to support user profile management of virtual environments . UMF VM may be an independent and privileged VM e.g. limited access etc. . Authentication domain maintains at least one global environment user identity GEID associated with hypervisor . In various embodiments a GEID defines at least three entities a user an authentication policy and a credential. The authentication policy determines which environments are accessible to the user the conditions for access and the credential needed for access. A credential as used herein refers to any token used to gain access to an environment or other authentication based process e.g. BIOS web browser mail client etc . Examples of credentials include but are not limited to passwords finger print scans e.g. via finger scanning and the like.

Authentication domain uses the GEID to link different user profiles to the same persona. In other words authentication domain maps other user credentials that are used to access and or interact with virtual environments to the GEID described in more detail below. In certain embodiments one or more virtual environments on computing device may not have its own user identity management infrastructure. For example some environments e.g. virtual environments may be deployed by an enterprise with a centralized user ID management infrastructure which could he satisfied by the GEID. For virtual environments having an authentication component linking authentication credentials to the GEID via registration and or enrollment with authentication domain facilitates seamless single sign on SSO functionality across all such environments on computing device . Authentication domain communicates e.g. collects and or distributes authentication credentials etc. with virtual environments via remote procedure calls web services remote function calls or other suitable communication formats including security mechanisms that transport credentials.

Computing device includes hypervisor sitting on top of firmware which sits on top of device hardware . UMF VM is a privileged virtual machine that functions as an extension of hypervisor . Authentication domain interfaces with authentication proxies and other authentication domains such as those that run in virtual environments and those that may run in firmware including in basic input output system BIOS or Extensible Firmware Interface EFI . In particular authentication domain interfaces with authentication proxies and or domains using remote procedure calls RPCs web services remote function calls RFCs etc. The use of RPCs and or RFCs may require additional security mechanisms for transporting credentials.

A global environment user identity GEID module manages and maintains GEIDs. Computing device may have one GEID or many GEIDs When a new GEID is created e.g. during initial system setup the user can associate installed environments e.g. virtual appliance VMs with credentials registered with the new GEID. These associations serve as the basis of an access control system that controls which users have access to which environments based on the GEID.

In many traditional computing systems user authentication takes place at the OS level e.g. Windows etc. in communication with a system BIOS. In various embodiments described herein authentication domain as an extension of hypervisor moves primary authentication and credential management to the hypervisor level and away from the OS operating system level while retaining the ability to create new users in any guest operating system. Thus authentication domain as opposed to an operating system notifies firmware interface BIOS EFI etc. of any new user credentials that have been registered e.g. in conjunction with registering Windows guest VM or other environments .

The first time a new virtual machine for example Windows guest VM is activated authorized user credentials e.g. password finger print scan etc. are mapped to GEID through an authentication proxy installed on VM . Accordingly upon subsequent activation of VM the authentication proxy will obtain the user s credentials transparently based on authentication done within authentication domain e.g. based on the user signing in with the GEID . This transparent distribution of credentials gives the user SSO functionality e.g. signing on to device using GEID grants access to all environments registered to the GEID .

VM and VM are Linux and Windows guests but could be any type of guest in different embodiments that include an authentication proxy module that synchronizes user credentials with other VMs including UMF VM and with firmware interface . VM is a guest e.g. a Windows guest with its own authentication domain . Authentication domain integrates e.g. via one or more application programming interfaces or APIs with the authentication proxy to synchronize user credentials with UMF VM . Virtual appliance is a web browser appliance in various embodiments and similarly synchronizes credentials e.g. for an online user account with UMF VM via an authentication proxy installed on the VM. Other suitable VAs could be used instead of a web browser VA in alternate embodiments.

Authentication domain does not require that one GEID be manually created for each potential user of computing device . Instead authentication domain includes user authentication policies for handling received user credentials. For example authentication domain may define an authentication policy mat accepts a valid Google account available from Google Inc. of Mountain View Calif. In other words based on the authentication policy if authentication domain receives user credentials from web browser VA that do not correspond to any GEID authentication domain may automatically create an internal GEID for that user. In this way a user can authenticate into hypervisor via authentication domain using a Google username and password.

Additionally authentication domain can similarly communicate with trusted third party providers e.g. OpenID identity 2.0 OASIS SAML SAML 2.0 etc. . OpenID is an example of an open decentralized authentication standard by which a user can logon to one account e.g. a PayPal account using a different account e.g. Google trusted by the provider. Accordingly by enrolling a user profile and corresponding credential with GEID authentication domain may provide access to all profiles trusted by the third party provider.

In certain embodiments not every environment has its own user identify management infrastructure. For example some environments e.g. virtual environments may be deployed by an enterprise that has a centralized user ID management infrastructure. Administrative domain similar to authentication domain enables management of hypervisor resources. Examples of administrative domains include federated domains e.g. OpenID Microsoft Passport etc. enterprise domains service provider domains e.g. GoogleApps Microsoft Active Directory etc. and local platform users. Administrative domain may be accessed remotely and its privileges and or credentials allow an administrator to set user authentication policies manage GEIDs and register environments to GEIDs. In various embodiments computing device may include multiple administrative domains.

A switching module allows a user to switch between environments to which the user is registered. For example if virtual environments are all registered to a user s GEID then switching module may provide a button link window icon or other suitable mechanism e.g. via a user interface to allow the user to switch between virtual environments .

The following examples illustrate user experiences associated with computing device . In the first example a user uses her notebook to work from home using guest VA e.g. a remote access VA . By logging into computing device using her GEID she authenticates herself into the system once and thereafter has access to all the environments configured e.g. by registration for single sign on under her GEID. However when the users daughter authenticates to computing device the daughter may only have access to a subset of environments perhaps designated by her mother .

In another example John Smith enters the GEID jsmith along with the appropriate GEID credential. Authentication domain determines which of virtual environments should be activated and exposed to John Smith in this example VA and VM are registered with the GEID jsmith and are activated VM is not registered with the GEID jsmith but it is exposed to the user based on the access policy . Accordingly authentication domain exposes an authentication UI for VM . Upon verifying the appropriate credential for VM authentication module registers VM with the GEID jsmith and stores the credential for future use with VM .

In another example the user jsmith is a registered GEID in GEID module and BIOS is aware the user and his credentials. Thus assuming single sign on SSO is enabled e.g. in access policy the user jsmith could login to computing device via BIOS and receive automatic access to hypervisor and UMF VM .

In a yet another example a user e.g. that does not have a GEID enters an enterprise identity for administrative domain from a computing device other than computing device . If the user does not yet have credentials for administrative domain on computing device hypervisor exposes an icon for authentication into administrative domain and perhaps other environments that might be accessible for any user of hypervisor . If the user authenticates successfully a GEID is created to be registered with authentication domain and maintained by GEID module the authentication credential for the user and any access control policies are cached and any other environments accessible to the user via administrative domain are registered to the new GEID.

In a final example an enterprise configures hypervisor with a Google Chrome OS available from Google Inc. of Mountain View Calif. virtual appliance to provide Internet access when a user accesses hypervisor using for example an OpenID identity. When the user logs in to computing device using a Gmail account registered with GEID authentication domain automatically exposes the Google Chrome OS VA and the user is seamlessly signed in to the Gmail client in the Chrome OS browser.

A privileged virtual machine associated with an environment manager e.g. hypervisor VMM etc. maintains a global environment user identity GEID for a user in various embodiments the notion of a user is brought to the hypervisor level logically lower than the OS level of a computing device. The global environment user identify includes an accompanying credential. As used herein the term privileged with respect to virtual machines refers to limiting virtual machine access for example to those with administrator privileges. In various embodiments the privileged virtual machine e.g. the UMF VM described above is a logical extension and or component of the hypervisor itself.

The environment manager executes one or more environments e.g. virtual machines virtual appliances etc. . At least one virtual environment is enrolled with the GEID. By enrolling the virtual environment the computing device can provide SSO functionality to the user for the virtual environment via the GEID. In many traditional systems including those with a hypervisor initial system authentication is handled somewhere other than the hypervisor for example authentication is frequently bandied by the operating system. However in various embodiments described herein initial and or primary system authentication is controlled by the environment manager e.g. via GEID . By enrolling a virtual environment with a GEID the environment manager layer e.g. hypervisor layer seamlessly i.e. transparent to the user passes credentials to the enrolled virtual environment in response to a user successfully signing in with the GEID to achieve SSO for the user.

An authentication domain executing in a privileged VM associated with a hypervisor on a computer maintains one or more global environment user identities GEIDs . The hypervisor executes multiple virtual environments concurrently. At least one virtual environment e.g. a VM VA etc. communicates a user profile and a user profits credential to the authentication domain using an authentication proxy. In various embodiments communication between the authentication domain and the authentication proxy takes place using remote procedure calls web service s remote function calls or other suitable communication formats. The user profile and user profile credential e.g. password etc. are bound to a GEID. The GEID may be an existing GEID or the authentication domain can generate a new GEID to correspond to the user profile and credential received from the virtual environment. Multiple profiles e.g. from separate environments may be bound to the same GEID. Also a single environment profile may be bound to multiple GEIDs.

The authentication domain distributes credentials e.g. passwords finger print scans etc. to respective environments. In some embodiments the authentication domain pushes credentials to registered environments in response to a user successfully inputting the GEID credential for a corresponding GEID. In other embodiments credentials are pulled from the authentication domain for example in response to access requests from particular environments. The collecting and or distributing of user profile credentials may be transparent to the user or they may be explicit to the user. Also the distribution of credentials may be done in view of one or more access policies.

The above examples and illustrations are not exhaustive of the functionality enabled by the User Management Framework described herein. Other suitable uses functions operations etc. may be similarly enabled by embodiments described herein. Additionally various modifications may be made to the disclosed embodiments and implementations of the invention without departing from their scope. Therefore the illustrations and examples herein should be construed in an illustrative and not a restrictive sense.

